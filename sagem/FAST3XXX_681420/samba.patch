diff -pruwN samba-2.2.12/source/00-README-FT.txt samba-2.2.12-livebox/00-README-FT.txt
--- samba-2.2.12/source/00-README-FT.txt	1970-01-01 01:00:00.000000000 +0100
+++ samba-2.2.12-livebox/00-README-FT.txt	2010-03-31 11:45:59.000000000 +0200
@@ -0,0 +1,8 @@
+
+First, set PATH to include the path to your mips-linux-uclibc compiler:
+export PATH="/path/to/mips-linux-uclibc/bin:${PATH}"
+
+Then, build samba proper:
+make
+
+The resulting binaries are stored in the bin/ sub-directory
diff -pruwN samba-2.2.12/source/acconfig.h samba-2.2.12-livebox/acconfig.h
--- samba-2.2.12/source/acconfig.h	2004-08-12 20:24:34.000000000 +0200
+++ samba-2.2.12-livebox/acconfig.h	1970-01-01 01:00:00.000000000 +0100
@@ -1,225 +0,0 @@
-#undef HAVE_VOLATILE
-#undef HAVE_BROKEN_READDIR
-#undef HAVE_C99_VSNPRINTF
-#undef HAVE_ERRNO_DECL
-#undef HAVE_LONGLONG
-#undef HAVE_OFF64_T
-#undef HAVE_REMSH
-#undef HAVE_UNSIGNED_CHAR
-#undef HAVE_UTIMBUF
-#undef HAVE_SIG_ATOMIC_T_TYPE
-#undef HAVE_SOCKLEN_T_TYPE
-#undef ssize_t
-#undef ino_t
-#undef ssize_t
-#undef loff_t
-#undef offset_t
-#undef aclent_t
-#undef wchar_t
-#undef HAVE_CONNECT
-#undef HAVE_SHORT_INO_T
-#undef WITH_SMBWRAPPER
-#undef WITH_AFS
-#undef WITH_DFS
-#undef SUNOS5
-#undef SUNOS4
-#undef LINUX
-#undef AIX
-#undef BSD
-#undef IRIX
-#undef IRIX6
-#undef HPUX
-#undef QNX
-#undef SCO
-#undef OSF1
-#undef NEXT2
-#undef RELIANTUNIX
-#undef HAVE_MMAP
-#undef HAVE_FCNTL_LOCK
-#undef HAVE_FTRUNCATE_EXTEND
-#undef FTRUNCATE_NEEDS_ROOT
-#undef HAVE_TRAPDOOR_UID
-#undef HAVE_ROOT
-#undef HAVE_GETTIMEOFDAY_TZ
-#undef HAVE_SOCK_SIN_LEN
-#undef STAT_READ_FILSYS
-#undef STAT_STATFS2_BSIZE
-#undef STAT_STATFS2_FSIZE
-#undef STAT_STATFS2_FS_DATA
-#undef STAT_STATFS3_OSF1
-#undef STAT_STATFS4
-#undef STAT_STATVFS
-#undef STAT_STATVFS64
-#undef HAVE_IFACE_AIX
-#undef HAVE_IFACE_IFCONF
-#undef HAVE_IFACE_IFREQ
-#undef HAVE_CRYPT
-#undef HAVE_PUTPRPWNAM
-#undef HAVE_SET_AUTH_PARAMETERS
-#undef WITH_SYSLOG
-#undef WITH_PROFILE
-#undef WITH_SSL
-#undef WITH_LDAP
-#undef WITH_NISPLUS
-#undef WITH_TDBPWD
-#undef WITH_PAM
-#undef WITH_PAM_SMBPASS
-#undef WITH_NISPLUS_HOME
-#undef WITH_AUTOMOUNT
-#undef WITH_SMBMOUNT
-#undef HAVE_BROKEN_GETGROUPS
-#undef REPLACE_GETPASS
-#undef REPLACE_INET_NTOA
-#undef HAVE_FILE_MACRO
-#undef HAVE_FUNCTION_MACRO
-#undef HAVE_VA_COPY
-#undef HAVE_SETRESUID_DECL
-#undef HAVE_SETRESUID
-#undef WITH_NETATALK
-#undef WITH_UTMP
-#undef WITH_MSDFS
-#undef WITH_VFS
-#undef HAVE_INO64_T
-#undef HAVE_DEV64_T
-#undef HAVE_STRUCT_FLOCK64
-#undef SIZEOF_INO_T
-#undef SIZEOF_OFF_T
-#undef STAT_STATVFS64
-#undef HAVE_LIBREADLINE
-#undef HAVE_KERNEL_SHARE_MODES
-#undef HAVE_KERNEL_OPLOCKS_IRIX
-#undef HAVE_KERNEL_OPLOCKS_LINUX
-#undef HAVE_KERNEL_CHANGE_NOTIFY
-#undef HAVE_IRIX_SPECIFIC_CAPABILITIES
-#undef HAVE_INT16_FROM_RPC_RPC_H
-#undef HAVE_UINT16_FROM_RPC_RPC_H
-#undef HAVE_INT32_FROM_RPC_RPC_H
-#undef HAVE_UINT32_FROM_RPC_RPC_H
-#undef KRB4_AUTH
-#undef KRB5_AUTH
-#undef SEEKDIR_RETURNS_VOID
-#undef HAVE_DIRENT_D_OFF
-#undef HAVE_GETSPNAM
-#undef HAVE_BIGCRYPT
-#undef HAVE_GETPRPWNAM
-#undef HAVE_FSTAT64
-#undef HAVE_LSTAT64
-#undef HAVE_STAT64
-#undef HAVE_SETRESGID
-#undef HAVE_SETRESGID_DECL
-#undef HAVE_SHADOW_H
-#undef HAVE_MEMSET
-#undef HAVE_STRCASECMP
-#undef HAVE_STRUCT_DIRENT64
-#undef HAVE_TRUNCATED_SALT
-#undef BROKEN_NISPLUS_INCLUDE_FILES
-#undef HAVE_RPC_AUTH_ERROR_CONFLICT
-#undef HAVE_EXPLICIT_LARGEFILE_SUPPORT
-#undef USE_BOTH_CRYPT_CALLS
-#undef HAVE_BROKEN_FCNTL64_LOCKS
-#undef HAVE_SECURE_MKSTEMP
-#undef HAVE_FNMATCH
-#undef USE_SETEUID
-#undef USE_SETRESUID
-#undef USE_SETREUID
-#undef USE_SETUIDX
-#undef HAVE_DLOPEN
-#undef HAVE_DLCLOSE
-#undef HAVE_DLSYM
-#undef HAVE_DLERROR
-#undef SYSCONF_SC_NGROUPS_MAX
-#undef HAVE_UT_UT_NAME
-#undef HAVE_UT_UT_USER
-#undef HAVE_UT_UT_ID
-#undef HAVE_UT_UT_HOST
-#undef HAVE_UT_UT_TIME
-#undef HAVE_UT_UT_TV
-#undef HAVE_UT_UT_TYPE
-#undef HAVE_UT_UT_PID
-#undef HAVE_UT_UT_EXIT
-#undef HAVE_UT_UT_ADDR
-#undef HAVE_UX_UT_SYSLEN
-#undef PUTUTLINE_RETURNS_UTMP
-#undef COMPILER_SUPPORTS_LL
-#undef HAVE_YP_GET_DEFAULT_DOMAIN
-#undef USE_SPINLOCKS
-#undef SPARC_SPINLOCKS
-#undef INTEL_SPINLOCKS
-#undef MIPS_SPINLOCKS
-#undef POWERPC_SPINLOCKS
-#undef HAVE_POSIX_ACLS
-#undef HAVE_ACL_GET_PERM_NP
-#undef HAVE_UNIXWARE_ACLS
-#undef HAVE_SOLARIS_ACLS
-#undef HAVE_HPUX_ACLS
-#undef HAVE_IRIX_ACLS
-#undef HAVE_AIX_ACLS
-#undef HAVE_TRU64_ACLS
-#undef HAVE_NO_ACLS
-#undef HAVE_LIBPAM
-#undef HAVE_ASPRINTF_DECL
-#undef HAVE_VASPRINTF_DECL
-#undef HAVE_SNPRINTF_DECL
-#undef HAVE_VSNPRINTF_DECL
-#undef HAVE_UNIXSOCKET
-#undef MMAP_BLACKLIST
-#undef HAVE_CUPS
-#undef WITH_LDAP_SAM
-#undef WITH_NISPLUS_SAM
-#undef WITH_SMBPASSWD_SAM
-#undef WITH_TDB_SAM
-#undef LINUX_QUOTAS_1
-#undef LINUX_QUOTAS_2
-#undef BROKEN_REDHAT_7_SYSTEM_HEADERS
-#undef HAVE_IMMEDIATE_STRUCTURES
-#undef HAVE_STAT_ST_BLOCKS
-#undef STAT_ST_BLOCKSIZE
-#undef HAVE_DEVICE_MAJOR_FN
-#undef HAVE_DEVICE_MINOR_FN
-#undef HAVE_MAKEDEV_FN
-#undef HAVE_GETGROUPS_TOO_MANY_EGIDS
-#undef HAVE_PASSWD_PW_COMMENT
-#undef HAVE_PASSWD_PW_AGE
-#undef HAVE_STAT_ST_BLKSIZE
-#undef WITH_WINBIND_AUTH_CRAP
-#undef WITH_HORRIBLE_LDAP_NATIVE_MODE_HACK
-
-/*
- * Add these definitions to allow VFS modules to
- * see the CPPFLAGS defines.
- */
-#ifndef _HPUX_SOURCE
-#undef _HPUX_SOURCE
-#endif
-#ifndef _POSIX_SOURCE
-#undef _POSIX_SOURCE
-#endif
-#ifndef _LARGEFILE64_SOURCE
-#undef _LARGEFILE64_SOURCE
-#endif
-#ifndef _ALIGNMENT_REQUIRED
-#undef _ALIGNMENT_REQUIRED
-#endif
-#ifndef _MAX_ALIGNMENT
-#undef _MAX_ALIGNMENT
-#endif
-#ifndef _LARGE_FILES
-#undef _LARGE_FILES
-#endif
-#ifndef _FILE_OFFSET_BITS
-#undef _FILE_OFFSET_BITS
-#endif
-#ifndef _GNU_SOURCE
-#undef _GNU_SOURCE
-#endif
-#undef HAVE_SENDFILE
-#undef HAVE_SENDFILE64
-#undef LINUX_SENDFILE_API
-#undef LINUX_BROKEN_SENDFILE_API
-#undef WITH_SENDFILE
-#undef FREEBSD_SENDFILE_API
-#undef HPUX_SENDFILE_API
-#undef HAVE_SENDFILEV
-#undef HAVE_SENDFILEV64
-#undef SOLARIS_SENDFILE_API
-#undef LDAP_SET_REBIND_PROC_ARGS
diff -pruwN samba-2.2.12/source/aclocal.m4 samba-2.2.12-livebox/aclocal.m4
--- samba-2.2.12/source/aclocal.m4	2004-08-12 20:24:35.000000000 +0200
+++ samba-2.2.12-livebox/aclocal.m4	1970-01-01 01:00:00.000000000 +0100
@@ -1,105 +0,0 @@
-dnl AC_VALIDATE_CACHE_SYSTEM_TYPE[(cmd)]
-dnl if the cache file is inconsistent with the current host,
-dnl target and build system types, execute CMD or print a default
-dnl error message.
-AC_DEFUN(AC_VALIDATE_CACHE_SYSTEM_TYPE, [
-    AC_REQUIRE([AC_CANONICAL_SYSTEM])
-    AC_MSG_CHECKING([config.cache system type])
-    if { test x"${ac_cv_host_system_type+set}" = x"set" &&
-         test x"$ac_cv_host_system_type" != x"$host"; } ||
-       { test x"${ac_cv_build_system_type+set}" = x"set" &&
-         test x"$ac_cv_build_system_type" != x"$build"; } ||
-       { test x"${ac_cv_target_system_type+set}" = x"set" &&
-         test x"$ac_cv_target_system_type" != x"$target"; }; then
-	AC_MSG_RESULT([different])
-	ifelse($#, 1, [$1],
-		[AC_MSG_ERROR(["you must remove config.cache and restart configure"])])
-    else
-	AC_MSG_RESULT([same])
-    fi
-    ac_cv_host_system_type="$host"
-    ac_cv_build_system_type="$build"
-    ac_cv_target_system_type="$target"
-])
-
-
-dnl test whether dirent has a d_off member
-AC_DEFUN(AC_DIRENT_D_OFF,
-[AC_CACHE_CHECK([for d_off in dirent], ac_cv_dirent_d_off,
-[AC_TRY_COMPILE([
-#include <unistd.h>
-#include <sys/types.h>
-#include <dirent.h>], [struct dirent d; d.d_off;],
-ac_cv_dirent_d_off=yes, ac_cv_dirent_d_off=no)])
-if test $ac_cv_dirent_d_off = yes; then
-  AC_DEFINE(HAVE_DIRENT_D_OFF)
-fi
-])
-
-
-dnl AC_PROG_CC_FLAG(flag)
-AC_DEFUN(AC_PROG_CC_FLAG,
-[AC_CACHE_CHECK(whether ${CC-cc} accepts -$1, ac_cv_prog_cc_$1,
-[echo 'void f(){}' > conftest.c
-if test -z "`${CC-cc} -$1 -c conftest.c 2>&1`"; then
-  ac_cv_prog_cc_$1=yes
-else
-  ac_cv_prog_cc_$1=no
-fi
-rm -f conftest*
-])])
-
-dnl see if a declaration exists for a function or variable
-dnl defines HAVE_function_DECL if it exists
-dnl AC_HAVE_DECL(var, includes)
-AC_DEFUN(AC_HAVE_DECL,
-[
- AC_CACHE_CHECK([for $1 declaration],ac_cv_have_$1_decl,[
-    AC_TRY_COMPILE([$2],[int i = (int)$1],
-        ac_cv_have_$1_decl=yes,ac_cv_have_$1_decl=no)])
- if test x"$ac_cv_have_$1_decl" = x"yes"; then
-    AC_DEFINE([HAVE_]translit([$1], [a-z], [A-Z])[_DECL])
- fi
-])
-
-
-dnl check for a function in a library, but don't
-dnl keep adding the same library to the LIBS variable.
-dnl AC_LIBTESTFUNC(lib,func)
-AC_DEFUN(AC_LIBTESTFUNC,
-[case "$LIBS" in
-  *-l$1*) AC_CHECK_FUNCS($2) ;;
-  *) AC_CHECK_LIB($1, $2) 
-     AC_CHECK_FUNCS($2)
-  ;;
-  esac
-])
-
-dnl Define an AC_DEFINE with ifndef guard.
-dnl AC_N_DEFINE(VARIABLE [, VALUE])
-define(AC_N_DEFINE,
-[cat >> confdefs.h <<\EOF
-[#ifndef] $1
-[#define] $1 ifelse($#, 2, [$2], $#, 3, [$2], 1)
-[#endif]
-EOF
-])
-
-dnl Add an #include
-dnl AC_ADD_INCLUDE(VARIABLE)
-define(AC_ADD_INCLUDE,
-[cat >> confdefs.h <<\EOF
-[#include] $1
-EOF
-])
-
-dnl Copied from libtool.m4
-AC_DEFUN(AC_PROG_LD_GNU,
-[AC_CACHE_CHECK([if the linker ($LD) is GNU ld], ac_cv_prog_gnu_ld,
-[# I'd rather use --version here, but apparently some GNU ld's only accept -v.
-if $LD -v 2>&1 </dev/null | egrep '(GNU|with BFD)' 1>&5; then
-  ac_cv_prog_gnu_ld=yes
-else
-  ac_cv_prog_gnu_ld=no
-fi])
-])
Les fichiers binaires samba-2.2.12/source/bin/get_country_code et samba-2.2.12-livebox/bin/get_country_code sont différents.
Les fichiers binaires samba-2.2.12/source/bin/kill_share_process et samba-2.2.12-livebox/bin/kill_share_process sont différents.
diff -pruwN samba-2.2.12/source/config.guess samba-2.2.12-livebox/config.guess
--- samba-2.2.12/source/config.guess	2004-08-12 20:24:22.000000000 +0200
+++ samba-2.2.12-livebox/config.guess	1970-01-01 01:00:00.000000000 +0100
@@ -1,1308 +0,0 @@
-#! /bin/sh
-# Attempt to guess a canonical system name.
-#   Copyright (C) 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001
-#   Free Software Foundation, Inc.
-
-timestamp='2001-11-26'
-
-# This file is free software; you can redistribute it and/or modify it
-# under the terms of the GNU General Public License as published by
-# the Free Software Foundation; either version 2 of the License, or
-# (at your option) any later version.
-#
-# This program is distributed in the hope that it will be useful, but
-# WITHOUT ANY WARRANTY; without even the implied warranty of
-# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-# General Public License for more details.
-#
-# You should have received a copy of the GNU General Public License
-# along with this program; if not, write to the Free Software
-# Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.
-#
-# As a special exception to the GNU General Public License, if you
-# distribute this file as part of a program that contains a
-# configuration script generated by Autoconf, you may include it under
-# the same distribution terms that you use for the rest of that program.
-
-# Originally written by Per Bothner <bothner@cygnus.com>.
-# Please send patches to <config-patches@gnu.org>.  Submit a context
-# diff and a properly formatted ChangeLog entry.
-#
-# This script attempts to guess a canonical system name similar to
-# config.sub.  If it succeeds, it prints the system name on stdout, and
-# exits with 0.  Otherwise, it exits with 1.
-#
-# The plan is that this can be called by configure scripts if you
-# don't specify an explicit build system type.
-
-me=`echo "$0" | sed -e 's,.*/,,'`
-
-usage="\
-Usage: $0 [OPTION]
-
-Output the configuration name of the system \`$me' is run on.
-
-Operation modes:
-  -h, --help         print this help, then exit
-  -t, --time-stamp   print date of last modification, then exit
-  -v, --version      print version number, then exit
-
-Report bugs and patches to <config-patches@gnu.org>."
-
-version="\
-GNU config.guess ($timestamp)
-
-Originally written by Per Bothner.
-Copyright (C) 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001
-Free Software Foundation, Inc.
-
-This is free software; see the source for copying conditions.  There is NO
-warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE."
-
-help="
-Try \`$me --help' for more information."
-
-# Parse command line
-while test $# -gt 0 ; do
-  case $1 in
-    --time-stamp | --time* | -t )
-       echo "$timestamp" ; exit 0 ;;
-    --version | -v )
-       echo "$version" ; exit 0 ;;
-    --help | --h* | -h )
-       echo "$usage"; exit 0 ;;
-    -- )     # Stop option processing
-       shift; break ;;
-    - )	# Use stdin as input.
-       break ;;
-    -* )
-       echo "$me: invalid option $1$help" >&2
-       exit 1 ;;
-    * )
-       break ;;
-  esac
-done
-
-if test $# != 0; then
-  echo "$me: too many arguments$help" >&2
-  exit 1
-fi
-
-
-dummy=dummy-$$
-trap 'rm -f $dummy.c $dummy.o $dummy.rel $dummy; exit 1' 1 2 15
-
-# CC_FOR_BUILD -- compiler used by this script.
-# Historically, `CC_FOR_BUILD' used to be named `HOST_CC'. We still
-# use `HOST_CC' if defined, but it is deprecated.
-
-set_cc_for_build='case $CC_FOR_BUILD,$HOST_CC,$CC in
- ,,)    echo "int dummy(){}" > $dummy.c ;
-	for c in cc gcc c89 ; do
-	  ($c $dummy.c -c -o $dummy.o) >/dev/null 2>&1 ;
-	  if test $? = 0 ; then
-	     CC_FOR_BUILD="$c"; break ;
-	  fi ;
-	done ;
-	rm -f $dummy.c $dummy.o $dummy.rel ;
-	if test x"$CC_FOR_BUILD" = x ; then
-	  CC_FOR_BUILD=no_compiler_found ;
-	fi
-	;;
- ,,*)   CC_FOR_BUILD=$CC ;;
- ,*,*)  CC_FOR_BUILD=$HOST_CC ;;
-esac'
-
-# This is needed to find uname on a Pyramid OSx when run in the BSD universe.
-# (ghazi@noc.rutgers.edu 1994-08-24)
-if (test -f /.attbin/uname) >/dev/null 2>&1 ; then
-	PATH=$PATH:/.attbin ; export PATH
-fi
-
-UNAME_MACHINE=`(uname -m) 2>/dev/null` || UNAME_MACHINE=unknown
-UNAME_RELEASE=`(uname -r) 2>/dev/null` || UNAME_RELEASE=unknown
-UNAME_SYSTEM=`(uname -s) 2>/dev/null`  || UNAME_SYSTEM=unknown
-UNAME_VERSION=`(uname -v) 2>/dev/null` || UNAME_VERSION=unknown
-
-# Note: order is significant - the case branches are not exclusive.
-
-case "${UNAME_MACHINE}:${UNAME_SYSTEM}:${UNAME_RELEASE}:${UNAME_VERSION}" in
-    *:NetBSD:*:*)
-	# NetBSD (nbsd) targets should (where applicable) match one or
-	# more of the tupples: *-*-netbsdelf*, *-*-netbsdaout*,
-	# *-*-netbsdecoff* and *-*-netbsd*.  For targets that recently
-	# switched to ELF, *-*-netbsd* would select the old
-	# object file format.  This provides both forward
-	# compatibility and a consistent mechanism for selecting the
-	# object file format.
-	# Determine the machine/vendor (is the vendor relevant).
-	case "${UNAME_MACHINE}" in
-	    amiga) machine=m68k-unknown ;;
-	    arm32) machine=arm-unknown ;;
-	    atari*) machine=m68k-atari ;;
-	    sun3*) machine=m68k-sun ;;
-	    mac68k) machine=m68k-apple ;;
-	    macppc) machine=powerpc-apple ;;
-	    hp3[0-9][05]) machine=m68k-hp ;;
-	    ibmrt|romp-ibm) machine=romp-ibm ;;
-	    sparc*) machine=`uname -p`-unknown ;;
-	    *) machine=${UNAME_MACHINE}-unknown ;;
-	esac
-	# The Operating System including object format, if it has switched
-	# to ELF recently, or will in the future.
-	case "${UNAME_MACHINE}" in
-	    i386|sparc|amiga|arm*|hp300|mvme68k|vax|atari|luna68k|mac68k|news68k|next68k|pc532|sun3*|x68k)
-		eval $set_cc_for_build
-		if echo __ELF__ | $CC_FOR_BUILD -E - 2>/dev/null \
-			| grep __ELF__ >/dev/null
-		then
-		    # Once all utilities can be ECOFF (netbsdecoff) or a.out (netbsdaout).
-		    # Return netbsd for either.  FIX?
-		    os=netbsd
-		else
-		    os=netbsdelf
-		fi
-		;;
-	    *)
-	        os=netbsd
-		;;
-	esac
-	# The OS release
-	release=`echo ${UNAME_RELEASE}|sed -e 's/[-_].*/\./'`
-	# Since CPU_TYPE-MANUFACTURER-KERNEL-OPERATING_SYSTEM:
-	# contains redundant information, the shorter form:
-	# CPU_TYPE-MANUFACTURER-OPERATING_SYSTEM is used.
-	echo "${machine}-${os}${release}"
-	exit 0 ;;
-    amiga:OpenBSD:*:*)
-	echo m68k-unknown-openbsd${UNAME_RELEASE}
-	exit 0 ;;
-    arc:OpenBSD:*:*)
-	echo mipsel-unknown-openbsd${UNAME_RELEASE}
-	exit 0 ;;
-    hp300:OpenBSD:*:*)
-	echo m68k-unknown-openbsd${UNAME_RELEASE}
-	exit 0 ;;
-    mac68k:OpenBSD:*:*)
-	echo m68k-unknown-openbsd${UNAME_RELEASE}
-	exit 0 ;;
-    macppc:OpenBSD:*:*)
-	echo powerpc-unknown-openbsd${UNAME_RELEASE}
-	exit 0 ;;
-    mvme68k:OpenBSD:*:*)
-	echo m68k-unknown-openbsd${UNAME_RELEASE}
-	exit 0 ;;
-    mvme88k:OpenBSD:*:*)
-	echo m88k-unknown-openbsd${UNAME_RELEASE}
-	exit 0 ;;
-    mvmeppc:OpenBSD:*:*)
-	echo powerpc-unknown-openbsd${UNAME_RELEASE}
-	exit 0 ;;
-    pmax:OpenBSD:*:*)
-	echo mipsel-unknown-openbsd${UNAME_RELEASE}
-	exit 0 ;;
-    sgi:OpenBSD:*:*)
-	echo mipseb-unknown-openbsd${UNAME_RELEASE}
-	exit 0 ;;
-    sun3:OpenBSD:*:*)
-	echo m68k-unknown-openbsd${UNAME_RELEASE}
-	exit 0 ;;
-    wgrisc:OpenBSD:*:*)
-	echo mipsel-unknown-openbsd${UNAME_RELEASE}
-	exit 0 ;;
-    *:OpenBSD:*:*)
-	echo ${UNAME_MACHINE}-unknown-openbsd${UNAME_RELEASE}
-	exit 0 ;;
-    alpha:OSF1:*:*)
-	if test $UNAME_RELEASE = "V4.0"; then
-		UNAME_RELEASE=`/usr/sbin/sizer -v | awk '{print $3}'`
-	fi
-	# A Vn.n version is a released version.
-	# A Tn.n version is a released field test version.
-	# A Xn.n version is an unreleased experimental baselevel.
-	# 1.2 uses "1.2" for uname -r.
-	cat <<EOF >$dummy.s
-	.data
-\$Lformat:
-	.byte 37,100,45,37,120,10,0	# "%d-%x\n"
-
-	.text
-	.globl main
-	.align 4
-	.ent main
-main:
-	.frame \$30,16,\$26,0
-	ldgp \$29,0(\$27)
-	.prologue 1
-	.long 0x47e03d80 # implver \$0
-	lda \$2,-1
-	.long 0x47e20c21 # amask \$2,\$1
-	lda \$16,\$Lformat
-	mov \$0,\$17
-	not \$1,\$18
-	jsr \$26,printf
-	ldgp \$29,0(\$26)
-	mov 0,\$16
-	jsr \$26,exit
-	.end main
-EOF
-	eval $set_cc_for_build
-	$CC_FOR_BUILD $dummy.s -o $dummy 2>/dev/null
-	if test "$?" = 0 ; then
-		case `./$dummy` in
-			0-0)
-				UNAME_MACHINE="alpha"
-				;;
-			1-0)
-				UNAME_MACHINE="alphaev5"
-				;;
-			1-1)
-				UNAME_MACHINE="alphaev56"
-				;;
-			1-101)
-				UNAME_MACHINE="alphapca56"
-				;;
-			2-303)
-				UNAME_MACHINE="alphaev6"
-				;;
-			2-307)
-				UNAME_MACHINE="alphaev67"
-				;;
-			2-1307)
-				UNAME_MACHINE="alphaev68"
-				;;
-		esac
-	fi
-	rm -f $dummy.s $dummy
-	echo ${UNAME_MACHINE}-dec-osf`echo ${UNAME_RELEASE} | sed -e 's/^[VTX]//' | tr 'ABCDEFGHIJKLMNOPQRSTUVWXYZ' 'abcdefghijklmnopqrstuvwxyz'`
-	exit 0 ;;
-    Alpha\ *:Windows_NT*:*)
-	# How do we know it's Interix rather than the generic POSIX subsystem?
-	# Should we change UNAME_MACHINE based on the output of uname instead
-	# of the specific Alpha model?
-	echo alpha-pc-interix
-	exit 0 ;;
-    21064:Windows_NT:50:3)
-	echo alpha-dec-winnt3.5
-	exit 0 ;;
-    Amiga*:UNIX_System_V:4.0:*)
-	echo m68k-unknown-sysv4
-	exit 0;;
-    *:[Aa]miga[Oo][Ss]:*:*)
-	echo ${UNAME_MACHINE}-unknown-amigaos
-	exit 0 ;;
-    *:OS/390:*:*)
-	echo i370-ibm-openedition
-	exit 0 ;;
-    arm:RISC*:1.[012]*:*|arm:riscix:1.[012]*:*)
-	echo arm-acorn-riscix${UNAME_RELEASE}
-	exit 0;;
-    SR2?01:HI-UX/MPP:*:* | SR8000:HI-UX/MPP:*:*)
-	echo hppa1.1-hitachi-hiuxmpp
-	exit 0;;
-    Pyramid*:OSx*:*:* | MIS*:OSx*:*:* | MIS*:SMP_DC-OSx*:*:*)
-	# akee@wpdis03.wpafb.af.mil (Earle F. Ake) contributed MIS and NILE.
-	if test "`(/bin/universe) 2>/dev/null`" = att ; then
-		echo pyramid-pyramid-sysv3
-	else
-		echo pyramid-pyramid-bsd
-	fi
-	exit 0 ;;
-    NILE*:*:*:dcosx)
-	echo pyramid-pyramid-svr4
-	exit 0 ;;
-    sun4H:SunOS:5.*:*)
-	echo sparc-hal-solaris2`echo ${UNAME_RELEASE}|sed -e 's/[^.]*//'`
-	exit 0 ;;
-    sun4*:SunOS:5.*:* | tadpole*:SunOS:5.*:*)
-	echo sparc-sun-solaris2`echo ${UNAME_RELEASE}|sed -e 's/[^.]*//'`
-	exit 0 ;;
-    i86pc:SunOS:5.*:*)
-	echo i386-pc-solaris2`echo ${UNAME_RELEASE}|sed -e 's/[^.]*//'`
-	exit 0 ;;
-    sun4*:SunOS:6*:*)
-	# According to config.sub, this is the proper way to canonicalize
-	# SunOS6.  Hard to guess exactly what SunOS6 will be like, but
-	# it's likely to be more like Solaris than SunOS4.
-	echo sparc-sun-solaris3`echo ${UNAME_RELEASE}|sed -e 's/[^.]*//'`
-	exit 0 ;;
-    sun4*:SunOS:*:*)
-	case "`/usr/bin/arch -k`" in
-	    Series*|S4*)
-		UNAME_RELEASE=`uname -v`
-		;;
-	esac
-	# Japanese Language versions have a version number like `4.1.3-JL'.
-	echo sparc-sun-sunos`echo ${UNAME_RELEASE}|sed -e 's/-/_/'`
-	exit 0 ;;
-    sun3*:SunOS:*:*)
-	echo m68k-sun-sunos${UNAME_RELEASE}
-	exit 0 ;;
-    sun*:*:4.2BSD:*)
-	UNAME_RELEASE=`(head -1 /etc/motd | awk '{print substr($5,1,3)}') 2>/dev/null`
-	test "x${UNAME_RELEASE}" = "x" && UNAME_RELEASE=3
-	case "`/bin/arch`" in
-	    sun3)
-		echo m68k-sun-sunos${UNAME_RELEASE}
-		;;
-	    sun4)
-		echo sparc-sun-sunos${UNAME_RELEASE}
-		;;
-	esac
-	exit 0 ;;
-    aushp:SunOS:*:*)
-	echo sparc-auspex-sunos${UNAME_RELEASE}
-	exit 0 ;;
-    # The situation for MiNT is a little confusing.  The machine name
-    # can be virtually everything (everything which is not
-    # "atarist" or "atariste" at least should have a processor
-    # > m68000).  The system name ranges from "MiNT" over "FreeMiNT"
-    # to the lowercase version "mint" (or "freemint").  Finally
-    # the system name "TOS" denotes a system which is actually not
-    # MiNT.  But MiNT is downward compatible to TOS, so this should
-    # be no problem.
-    atarist[e]:*MiNT:*:* | atarist[e]:*mint:*:* | atarist[e]:*TOS:*:*)
-        echo m68k-atari-mint${UNAME_RELEASE}
-	exit 0 ;;
-    atari*:*MiNT:*:* | atari*:*mint:*:* | atarist[e]:*TOS:*:*)
-	echo m68k-atari-mint${UNAME_RELEASE}
-        exit 0 ;;
-    *falcon*:*MiNT:*:* | *falcon*:*mint:*:* | *falcon*:*TOS:*:*)
-        echo m68k-atari-mint${UNAME_RELEASE}
-	exit 0 ;;
-    milan*:*MiNT:*:* | milan*:*mint:*:* | *milan*:*TOS:*:*)
-        echo m68k-milan-mint${UNAME_RELEASE}
-        exit 0 ;;
-    hades*:*MiNT:*:* | hades*:*mint:*:* | *hades*:*TOS:*:*)
-        echo m68k-hades-mint${UNAME_RELEASE}
-        exit 0 ;;
-    *:*MiNT:*:* | *:*mint:*:* | *:*TOS:*:*)
-        echo m68k-unknown-mint${UNAME_RELEASE}
-        exit 0 ;;
-    powerpc:machten:*:*)
-	echo powerpc-apple-machten${UNAME_RELEASE}
-	exit 0 ;;
-    RISC*:Mach:*:*)
-	echo mips-dec-mach_bsd4.3
-	exit 0 ;;
-    RISC*:ULTRIX:*:*)
-	echo mips-dec-ultrix${UNAME_RELEASE}
-	exit 0 ;;
-    VAX*:ULTRIX*:*:*)
-	echo vax-dec-ultrix${UNAME_RELEASE}
-	exit 0 ;;
-    2020:CLIX:*:* | 2430:CLIX:*:*)
-	echo clipper-intergraph-clix${UNAME_RELEASE}
-	exit 0 ;;
-    mips:*:*:UMIPS | mips:*:*:RISCos)
-	eval $set_cc_for_build
-	sed 's/^	//' << EOF >$dummy.c
-#ifdef __cplusplus
-#include <stdio.h>  /* for printf() prototype */
-	int main (int argc, char *argv[]) {
-#else
-	int main (argc, argv) int argc; char *argv[]; {
-#endif
-	#if defined (host_mips) && defined (MIPSEB)
-	#if defined (SYSTYPE_SYSV)
-	  printf ("mips-mips-riscos%ssysv\n", argv[1]); exit (0);
-	#endif
-	#if defined (SYSTYPE_SVR4)
-	  printf ("mips-mips-riscos%ssvr4\n", argv[1]); exit (0);
-	#endif
-	#if defined (SYSTYPE_BSD43) || defined(SYSTYPE_BSD)
-	  printf ("mips-mips-riscos%sbsd\n", argv[1]); exit (0);
-	#endif
-	#endif
-	  exit (-1);
-	}
-EOF
-	$CC_FOR_BUILD $dummy.c -o $dummy \
-	  && ./$dummy `echo "${UNAME_RELEASE}" | sed -n 's/\([0-9]*\).*/\1/p'` \
-	  && rm -f $dummy.c $dummy && exit 0
-	rm -f $dummy.c $dummy
-	echo mips-mips-riscos${UNAME_RELEASE}
-	exit 0 ;;
-    Motorola:PowerMAX_OS:*:*)
-	echo powerpc-motorola-powermax
-	exit 0 ;;
-    Night_Hawk:Power_UNIX:*:*)
-	echo powerpc-harris-powerunix
-	exit 0 ;;
-    m88k:CX/UX:7*:*)
-	echo m88k-harris-cxux7
-	exit 0 ;;
-    m88k:*:4*:R4*)
-	echo m88k-motorola-sysv4
-	exit 0 ;;
-    m88k:*:3*:R3*)
-	echo m88k-motorola-sysv3
-	exit 0 ;;
-    AViiON:dgux:*:*)
-        # DG/UX returns AViiON for all architectures
-        UNAME_PROCESSOR=`/usr/bin/uname -p`
-	if [ $UNAME_PROCESSOR = mc88100 ] || [ $UNAME_PROCESSOR = mc88110 ]
-	then
-	    if [ ${TARGET_BINARY_INTERFACE}x = m88kdguxelfx ] || \
-	       [ ${TARGET_BINARY_INTERFACE}x = x ]
-	    then
-		echo m88k-dg-dgux${UNAME_RELEASE}
-	    else
-		echo m88k-dg-dguxbcs${UNAME_RELEASE}
-	    fi
-	else
-	    echo i586-dg-dgux${UNAME_RELEASE}
-	fi
- 	exit 0 ;;
-    M88*:DolphinOS:*:*)	# DolphinOS (SVR3)
-	echo m88k-dolphin-sysv3
-	exit 0 ;;
-    M88*:*:R3*:*)
-	# Delta 88k system running SVR3
-	echo m88k-motorola-sysv3
-	exit 0 ;;
-    XD88*:*:*:*) # Tektronix XD88 system running UTekV (SVR3)
-	echo m88k-tektronix-sysv3
-	exit 0 ;;
-    Tek43[0-9][0-9]:UTek:*:*) # Tektronix 4300 system running UTek (BSD)
-	echo m68k-tektronix-bsd
-	exit 0 ;;
-    *:IRIX*:*:*)
-	echo mips-sgi-irix`echo ${UNAME_RELEASE}|sed -e 's/-/_/g'`
-	exit 0 ;;
-    ????????:AIX?:[12].1:2)   # AIX 2.2.1 or AIX 2.1.1 is RT/PC AIX.
-	echo romp-ibm-aix      # uname -m gives an 8 hex-code CPU id
-	exit 0 ;;              # Note that: echo "'`uname -s`'" gives 'AIX '
-    i*86:AIX:*:*)
-	echo i386-ibm-aix
-	exit 0 ;;
-    ia64:AIX:*:*)
-	if [ -x /usr/bin/oslevel ] ; then
-		IBM_REV=`/usr/bin/oslevel`
-	else
-		IBM_REV=${UNAME_VERSION}.${UNAME_RELEASE}
-	fi
-	echo ${UNAME_MACHINE}-ibm-aix${IBM_REV}
-	exit 0 ;;
-    *:AIX:2:3)
-	if grep bos325 /usr/include/stdio.h >/dev/null 2>&1; then
-		eval $set_cc_for_build
-		sed 's/^		//' << EOF >$dummy.c
-		#include <sys/systemcfg.h>
-
-		main()
-			{
-			if (!__power_pc())
-				exit(1);
-			puts("powerpc-ibm-aix3.2.5");
-			exit(0);
-			}
-EOF
-		$CC_FOR_BUILD $dummy.c -o $dummy && ./$dummy && rm -f $dummy.c $dummy && exit 0
-		rm -f $dummy.c $dummy
-		echo rs6000-ibm-aix3.2.5
-	elif grep bos324 /usr/include/stdio.h >/dev/null 2>&1; then
-		echo rs6000-ibm-aix3.2.4
-	else
-		echo rs6000-ibm-aix3.2
-	fi
-	exit 0 ;;
-    *:AIX:*:[45])
-	IBM_CPU_ID=`/usr/sbin/lsdev -C -c processor -S available | head -1 | awk '{ print $1 }'`
-	if /usr/sbin/lsattr -El ${IBM_CPU_ID} | grep ' POWER' >/dev/null 2>&1; then
-		IBM_ARCH=rs6000
-	else
-		IBM_ARCH=powerpc
-	fi
-	if [ -x /usr/bin/oslevel ] ; then
-		IBM_REV=`/usr/bin/oslevel`
-	else
-		IBM_REV=${UNAME_VERSION}.${UNAME_RELEASE}
-	fi
-	echo ${IBM_ARCH}-ibm-aix${IBM_REV}
-	exit 0 ;;
-    *:AIX:*:*)
-	echo rs6000-ibm-aix
-	exit 0 ;;
-    ibmrt:4.4BSD:*|romp-ibm:BSD:*)
-	echo romp-ibm-bsd4.4
-	exit 0 ;;
-    ibmrt:*BSD:*|romp-ibm:BSD:*)            # covers RT/PC BSD and
-	echo romp-ibm-bsd${UNAME_RELEASE}   # 4.3 with uname added to
-	exit 0 ;;                           # report: romp-ibm BSD 4.3
-    *:BOSX:*:*)
-	echo rs6000-bull-bosx
-	exit 0 ;;
-    DPX/2?00:B.O.S.:*:*)
-	echo m68k-bull-sysv3
-	exit 0 ;;
-    9000/[34]??:4.3bsd:1.*:*)
-	echo m68k-hp-bsd
-	exit 0 ;;
-    hp300:4.4BSD:*:* | 9000/[34]??:4.3bsd:2.*:*)
-	echo m68k-hp-bsd4.4
-	exit 0 ;;
-    9000/[34678]??:HP-UX:*:*)
-	HPUX_REV=`echo ${UNAME_RELEASE}|sed -e 's/[^.]*.[0B]*//'`
-	case "${UNAME_MACHINE}" in
-	    9000/31? )            HP_ARCH=m68000 ;;
-	    9000/[34]?? )         HP_ARCH=m68k ;;
-	    9000/[678][0-9][0-9])
-		if [ -x /usr/bin/getconf ]; then
-		    sc_cpu_version=`/usr/bin/getconf SC_CPU_VERSION 2>/dev/null`
-                    sc_kernel_bits=`/usr/bin/getconf SC_KERNEL_BITS 2>/dev/null`
-                    case "${sc_cpu_version}" in
-                      523) HP_ARCH="hppa1.0" ;; # CPU_PA_RISC1_0
-                      528) HP_ARCH="hppa1.1" ;; # CPU_PA_RISC1_1
-                      532)                      # CPU_PA_RISC2_0
-                        case "${sc_kernel_bits}" in
-                          32) HP_ARCH="hppa2.0n" ;;
-                          64) HP_ARCH="hppa2.0w" ;;
-			  '') HP_ARCH="hppa2.0" ;;   # HP-UX 10.20
-                        esac ;;
-                    esac
-		fi
-		if [ "${HP_ARCH}" = "" ]; then
-		    eval $set_cc_for_build
-		    sed 's/^              //' << EOF >$dummy.c
-
-              #define _HPUX_SOURCE
-              #include <stdlib.h>
-              #include <unistd.h>
-
-              int main ()
-              {
-              #if defined(_SC_KERNEL_BITS)
-                  long bits = sysconf(_SC_KERNEL_BITS);
-              #endif
-                  long cpu  = sysconf (_SC_CPU_VERSION);
-
-                  switch (cpu)
-              	{
-              	case CPU_PA_RISC1_0: puts ("hppa1.0"); break;
-              	case CPU_PA_RISC1_1: puts ("hppa1.1"); break;
-              	case CPU_PA_RISC2_0:
-              #if defined(_SC_KERNEL_BITS)
-              	    switch (bits)
-              		{
-              		case 64: puts ("hppa2.0w"); break;
-              		case 32: puts ("hppa2.0n"); break;
-              		default: puts ("hppa2.0"); break;
-              		} break;
-              #else  /* !defined(_SC_KERNEL_BITS) */
-              	    puts ("hppa2.0"); break;
-              #endif
-              	default: puts ("hppa1.0"); break;
-              	}
-                  exit (0);
-              }
-EOF
-		    (CCOPTS= $CC_FOR_BUILD $dummy.c -o $dummy 2>/dev/null) && HP_ARCH=`./$dummy`
-		    if test -z "$HP_ARCH"; then HP_ARCH=hppa; fi
-		    rm -f $dummy.c $dummy
-		fi ;;
-	esac
-	echo ${HP_ARCH}-hp-hpux${HPUX_REV}
-	exit 0 ;;
-    ia64:HP-UX:*:*)
-	HPUX_REV=`echo ${UNAME_RELEASE}|sed -e 's/[^.]*.[0B]*//'`
-	echo ia64-hp-hpux${HPUX_REV}
-	exit 0 ;;
-    3050*:HI-UX:*:*)
-	eval $set_cc_for_build
-	sed 's/^	//' << EOF >$dummy.c
-	#include <unistd.h>
-	int
-	main ()
-	{
-	  long cpu = sysconf (_SC_CPU_VERSION);
-	  /* The order matters, because CPU_IS_HP_MC68K erroneously returns
-	     true for CPU_PA_RISC1_0.  CPU_IS_PA_RISC returns correct
-	     results, however.  */
-	  if (CPU_IS_PA_RISC (cpu))
-	    {
-	      switch (cpu)
-		{
-		  case CPU_PA_RISC1_0: puts ("hppa1.0-hitachi-hiuxwe2"); break;
-		  case CPU_PA_RISC1_1: puts ("hppa1.1-hitachi-hiuxwe2"); break;
-		  case CPU_PA_RISC2_0: puts ("hppa2.0-hitachi-hiuxwe2"); break;
-		  default: puts ("hppa-hitachi-hiuxwe2"); break;
-		}
-	    }
-	  else if (CPU_IS_HP_MC68K (cpu))
-	    puts ("m68k-hitachi-hiuxwe2");
-	  else puts ("unknown-hitachi-hiuxwe2");
-	  exit (0);
-	}
-EOF
-	$CC_FOR_BUILD $dummy.c -o $dummy && ./$dummy && rm -f $dummy.c $dummy && exit 0
-	rm -f $dummy.c $dummy
-	echo unknown-hitachi-hiuxwe2
-	exit 0 ;;
-    9000/7??:4.3bsd:*:* | 9000/8?[79]:4.3bsd:*:* )
-	echo hppa1.1-hp-bsd
-	exit 0 ;;
-    9000/8??:4.3bsd:*:*)
-	echo hppa1.0-hp-bsd
-	exit 0 ;;
-    *9??*:MPE/iX:*:* | *3000*:MPE/iX:*:*)
-	echo hppa1.0-hp-mpeix
-	exit 0 ;;
-    hp7??:OSF1:*:* | hp8?[79]:OSF1:*:* )
-	echo hppa1.1-hp-osf
-	exit 0 ;;
-    hp8??:OSF1:*:*)
-	echo hppa1.0-hp-osf
-	exit 0 ;;
-    i*86:OSF1:*:*)
-	if [ -x /usr/sbin/sysversion ] ; then
-	    echo ${UNAME_MACHINE}-unknown-osf1mk
-	else
-	    echo ${UNAME_MACHINE}-unknown-osf1
-	fi
-	exit 0 ;;
-    parisc*:Lites*:*:*)
-	echo hppa1.1-hp-lites
-	exit 0 ;;
-    C1*:ConvexOS:*:* | convex:ConvexOS:C1*:*)
-	echo c1-convex-bsd
-        exit 0 ;;
-    C2*:ConvexOS:*:* | convex:ConvexOS:C2*:*)
-	if getsysinfo -f scalar_acc
-	then echo c32-convex-bsd
-	else echo c2-convex-bsd
-	fi
-        exit 0 ;;
-    C34*:ConvexOS:*:* | convex:ConvexOS:C34*:*)
-	echo c34-convex-bsd
-        exit 0 ;;
-    C38*:ConvexOS:*:* | convex:ConvexOS:C38*:*)
-	echo c38-convex-bsd
-        exit 0 ;;
-    C4*:ConvexOS:*:* | convex:ConvexOS:C4*:*)
-	echo c4-convex-bsd
-        exit 0 ;;
-    CRAY*X-MP:*:*:*)
-	echo xmp-cray-unicos
-        exit 0 ;;
-    CRAY*Y-MP:*:*:*)
-	echo ymp-cray-unicos${UNAME_RELEASE} | sed -e 's/\.[^.]*$/.X/'
-	exit 0 ;;
-    CRAY*[A-Z]90:*:*:*)
-	echo ${UNAME_MACHINE}-cray-unicos${UNAME_RELEASE} \
-	| sed -e 's/CRAY.*\([A-Z]90\)/\1/' \
-	      -e y/ABCDEFGHIJKLMNOPQRSTUVWXYZ/abcdefghijklmnopqrstuvwxyz/ \
-	      -e 's/\.[^.]*$/.X/'
-	exit 0 ;;
-    CRAY*TS:*:*:*)
-	echo t90-cray-unicos${UNAME_RELEASE} | sed -e 's/\.[^.]*$/.X/'
-	exit 0 ;;
-    CRAY*T3D:*:*:*)
-	echo alpha-cray-unicosmk${UNAME_RELEASE} | sed -e 's/\.[^.]*$/.X/'
-	exit 0 ;;
-    CRAY*T3E:*:*:*)
-	echo alphaev5-cray-unicosmk${UNAME_RELEASE} | sed -e 's/\.[^.]*$/.X/'
-	exit 0 ;;
-    CRAY*SV1:*:*:*)
-	echo sv1-cray-unicos${UNAME_RELEASE} | sed -e 's/\.[^.]*$/.X/'
-	exit 0 ;;
-    CRAY-2:*:*:*)
-	echo cray2-cray-unicos
-        exit 0 ;;
-    F30[01]:UNIX_System_V:*:* | F700:UNIX_System_V:*:*)
-	FUJITSU_PROC=`uname -m | tr 'ABCDEFGHIJKLMNOPQRSTUVWXYZ' 'abcdefghijklmnopqrstuvwxyz'`
-        FUJITSU_SYS=`uname -p | tr 'ABCDEFGHIJKLMNOPQRSTUVWXYZ' 'abcdefghijklmnopqrstuvwxyz' | sed -e 's/\///'`
-        FUJITSU_REL=`echo ${UNAME_RELEASE} | sed -e 's/ /_/'`
-        echo "${FUJITSU_PROC}-fujitsu-${FUJITSU_SYS}${FUJITSU_REL}"
-        exit 0 ;;
-    i*86:BSD/386:*:* | i*86:BSD/OS:*:* | *:Ascend\ Embedded/OS:*:*)
-	echo ${UNAME_MACHINE}-pc-bsdi${UNAME_RELEASE}
-	exit 0 ;;
-    sparc*:BSD/OS:*:*)
-	echo sparc-unknown-bsdi${UNAME_RELEASE}
-	exit 0 ;;
-    *:BSD/OS:*:*)
-	echo ${UNAME_MACHINE}-unknown-bsdi${UNAME_RELEASE}
-	exit 0 ;;
-    *:FreeBSD:*:*)
-	echo ${UNAME_MACHINE}-unknown-freebsd`echo ${UNAME_RELEASE}|sed -e 's/[-(].*//'`
-	exit 0 ;;
-    i*:CYGWIN*:*)
-	echo ${UNAME_MACHINE}-pc-cygwin
-	exit 0 ;;
-    i*:MINGW*:*)
-	echo ${UNAME_MACHINE}-pc-mingw32
-	exit 0 ;;
-    i*:PW*:*)
-	echo ${UNAME_MACHINE}-pc-pw32
-	exit 0 ;;
-    i*:Windows_NT*:* | Pentium*:Windows_NT*:*)
-	# How do we know it's Interix rather than the generic POSIX subsystem?
-	# It also conflicts with pre-2.0 versions of AT&T UWIN. Should we
-	# UNAME_MACHINE based on the output of uname instead of i386?
-	echo i386-pc-interix
-	exit 0 ;;
-    i*:UWIN*:*)
-	echo ${UNAME_MACHINE}-pc-uwin
-	exit 0 ;;
-    p*:CYGWIN*:*)
-	echo powerpcle-unknown-cygwin
-	exit 0 ;;
-    prep*:SunOS:5.*:*)
-	echo powerpcle-unknown-solaris2`echo ${UNAME_RELEASE}|sed -e 's/[^.]*//'`
-	exit 0 ;;
-    *:GNU:*:*)
-	echo `echo ${UNAME_MACHINE}|sed -e 's,[-/].*$,,'`-unknown-gnu`echo ${UNAME_RELEASE}|sed -e 's,/.*$,,'`
-	exit 0 ;;
-    i*86:Minix:*:*)
-	echo ${UNAME_MACHINE}-pc-minix
-	exit 0 ;;
-    arm*:Linux:*:*)
-	echo ${UNAME_MACHINE}-unknown-linux-gnu
-	exit 0 ;;
-    ia64:Linux:*:*)
-	echo ${UNAME_MACHINE}-unknown-linux
-	exit 0 ;;
-    m68*:Linux:*:*)
-	echo ${UNAME_MACHINE}-unknown-linux-gnu
-	exit 0 ;;
-    mips:Linux:*:*)
-	case `sed -n '/^byte/s/^.*: \(.*\) endian/\1/p' < /proc/cpuinfo` in
-	  big)    echo mips-unknown-linux-gnu && exit 0 ;;
-	  little) echo mipsel-unknown-linux-gnu && exit 0 ;;
-	esac
-	;;
-    ppc:Linux:*:*)
-	echo powerpc-unknown-linux-gnu
-	exit 0 ;;
-    ppc64:Linux:*:*)
-	echo powerpc64-unknown-linux-gnu
-	exit 0 ;;
-    alpha:Linux:*:*)
-	case `sed -n '/^cpu model/s/^.*: \(.*\)/\1/p' < /proc/cpuinfo` in
-	  EV5)   UNAME_MACHINE=alphaev5 ;;
-	  EV56)  UNAME_MACHINE=alphaev56 ;;
-	  PCA56) UNAME_MACHINE=alphapca56 ;;
-	  PCA57) UNAME_MACHINE=alphapca56 ;;
-	  EV6)   UNAME_MACHINE=alphaev6 ;;
-	  EV67)  UNAME_MACHINE=alphaev67 ;;
-	  EV68*) UNAME_MACHINE=alphaev68 ;;
-        esac
-	objdump --private-headers /bin/sh | grep ld.so.1 >/dev/null
-	if test "$?" = 0 ; then LIBC="libc1" ; else LIBC="" ; fi
-	echo ${UNAME_MACHINE}-unknown-linux-gnu${LIBC}
-	exit 0 ;;
-    parisc:Linux:*:* | hppa:Linux:*:*)
-	# Look for CPU level
-	case `grep '^cpu[^a-z]*:' /proc/cpuinfo 2>/dev/null | cut -d' ' -f2` in
-	  PA7*) echo hppa1.1-unknown-linux-gnu ;;
-	  PA8*) echo hppa2.0-unknown-linux-gnu ;;
-	  *)    echo hppa-unknown-linux-gnu ;;
-	esac
-	exit 0 ;;
-    parisc64:Linux:*:* | hppa64:Linux:*:*)
-	echo hppa64-unknown-linux-gnu
-	exit 0 ;;
-    s390:Linux:*:* | s390x:Linux:*:*)
-	echo ${UNAME_MACHINE}-ibm-linux
-	exit 0 ;;
-    sh*:Linux:*:*)
-	echo ${UNAME_MACHINE}-unknown-linux-gnu
-	exit 0 ;;
-    sparc:Linux:*:* | sparc64:Linux:*:*)
-	echo ${UNAME_MACHINE}-unknown-linux-gnu
-	exit 0 ;;
-    x86_64:Linux:*:*)
-	echo x86_64-unknown-linux-gnu
-	exit 0 ;;
-    i*86:Linux:*:*)
-	# The BFD linker knows what the default object file format is, so
-	# first see if it will tell us. cd to the root directory to prevent
-	# problems with other programs or directories called `ld' in the path.
-	ld_supported_targets=`cd /; ld --help 2>&1 \
-			 | sed -ne '/supported targets:/!d
-				    s/[ 	][ 	]*/ /g
-				    s/.*supported targets: *//
-				    s/ .*//
-				    p'`
-        case "$ld_supported_targets" in
-	  elf32-i386)
-		TENTATIVE="${UNAME_MACHINE}-pc-linux-gnu"
-		;;
-	  a.out-i386-linux)
-		echo "${UNAME_MACHINE}-pc-linux-gnuaout"
-		exit 0 ;;		
-	  coff-i386)
-		echo "${UNAME_MACHINE}-pc-linux-gnucoff"
-		exit 0 ;;
-	  "")
-		# Either a pre-BFD a.out linker (linux-gnuoldld) or
-		# one that does not give us useful --help.
-		echo "${UNAME_MACHINE}-pc-linux-gnuoldld"
-		exit 0 ;;
-	esac
-	# Determine whether the default compiler is a.out or elf
-	eval $set_cc_for_build
-	cat >$dummy.c <<EOF
-#include <features.h>
-#ifdef __cplusplus
-#include <stdio.h>  /* for printf() prototype */
-	int main (int argc, char *argv[]) {
-#else
-	int main (argc, argv) int argc; char *argv[]; {
-#endif
-#ifdef __ELF__
-# ifdef __GLIBC__
-#  if __GLIBC__ >= 2
-    printf ("%s-pc-linux-gnu\n", argv[1]);
-#  else
-    printf ("%s-pc-linux-gnulibc1\n", argv[1]);
-#  endif
-# else
-   printf ("%s-pc-linux-gnulibc1\n", argv[1]);
-# endif
-#else
-  printf ("%s-pc-linux-gnuaout\n", argv[1]);
-#endif
-  return 0;
-}
-EOF
-	$CC_FOR_BUILD $dummy.c -o $dummy 2>/dev/null && ./$dummy "${UNAME_MACHINE}" && rm -f $dummy.c $dummy && exit 0
-	rm -f $dummy.c $dummy
-	test x"${TENTATIVE}" != x && echo "${TENTATIVE}" && exit 0
-	;;
-    i*86:DYNIX/ptx:4*:*)
-	# ptx 4.0 does uname -s correctly, with DYNIX/ptx in there.
-	# earlier versions are messed up and put the nodename in both
-	# sysname and nodename.
-	echo i386-sequent-sysv4
-	exit 0 ;;
-    i*86:UNIX_SV:4.2MP:2.*)
-        # Unixware is an offshoot of SVR4, but it has its own version
-        # number series starting with 2...
-        # I am not positive that other SVR4 systems won't match this,
-	# I just have to hope.  -- rms.
-        # Use sysv4.2uw... so that sysv4* matches it.
-	echo ${UNAME_MACHINE}-pc-sysv4.2uw${UNAME_VERSION}
-	exit 0 ;;
-    i*86:*:4.*:* | i*86:SYSTEM_V:4.*:*)
-	UNAME_REL=`echo ${UNAME_RELEASE} | sed 's/\/MP$//'`
-	if grep Novell /usr/include/link.h >/dev/null 2>/dev/null; then
-		echo ${UNAME_MACHINE}-univel-sysv${UNAME_REL}
-	else
-		echo ${UNAME_MACHINE}-pc-sysv${UNAME_REL}
-	fi
-	exit 0 ;;
-    i*86:*:5:[78]*)
-	case `/bin/uname -X | grep "^Machine"` in
-	    *486*)	     UNAME_MACHINE=i486 ;;
-	    *Pentium)	     UNAME_MACHINE=i586 ;;
-	    *Pent*|*Celeron) UNAME_MACHINE=i686 ;;
-	esac
-	echo ${UNAME_MACHINE}-unknown-sysv${UNAME_RELEASE}${UNAME_SYSTEM}${UNAME_VERSION}
-	exit 0 ;;
-    i*86:*:3.2:*)
-	if test -f /usr/options/cb.name; then
-		UNAME_REL=`sed -n 's/.*Version //p' </usr/options/cb.name`
-		echo ${UNAME_MACHINE}-pc-isc$UNAME_REL
-	elif /bin/uname -X 2>/dev/null >/dev/null ; then
-		UNAME_REL=`(/bin/uname -X|egrep Release|sed -e 's/.*= //')`
-		(/bin/uname -X|egrep i80486 >/dev/null) && UNAME_MACHINE=i486
-		(/bin/uname -X|egrep '^Machine.*Pentium' >/dev/null) \
-			&& UNAME_MACHINE=i586
-		(/bin/uname -X|egrep '^Machine.*Pent ?II' >/dev/null) \
-			&& UNAME_MACHINE=i686
-		(/bin/uname -X|egrep '^Machine.*Pentium Pro' >/dev/null) \
-			&& UNAME_MACHINE=i686
-		echo ${UNAME_MACHINE}-pc-sco$UNAME_REL
-	else
-		echo ${UNAME_MACHINE}-pc-sysv32
-	fi
-	exit 0 ;;
-    i*86:*DOS:*:*)
-	echo ${UNAME_MACHINE}-pc-msdosdjgpp
-	exit 0 ;;
-    pc:*:*:*)
-	# Left here for compatibility:
-        # uname -m prints for DJGPP always 'pc', but it prints nothing about
-        # the processor, so we play safe by assuming i386.
-	echo i386-pc-msdosdjgpp
-        exit 0 ;;
-    Intel:Mach:3*:*)
-	echo i386-pc-mach3
-	exit 0 ;;
-    paragon:*:*:*)
-	echo i860-intel-osf1
-	exit 0 ;;
-    i860:*:4.*:*) # i860-SVR4
-	if grep Stardent /usr/include/sys/uadmin.h >/dev/null 2>&1 ; then
-	  echo i860-stardent-sysv${UNAME_RELEASE} # Stardent Vistra i860-SVR4
-	else # Add other i860-SVR4 vendors below as they are discovered.
-	  echo i860-unknown-sysv${UNAME_RELEASE}  # Unknown i860-SVR4
-	fi
-	exit 0 ;;
-    mini*:CTIX:SYS*5:*)
-	# "miniframe"
-	echo m68010-convergent-sysv
-	exit 0 ;;
-    M68*:*:R3V[567]*:*)
-	test -r /sysV68 && echo 'm68k-motorola-sysv' && exit 0 ;;
-    3[34]??:*:4.0:3.0 | 3[34]??A:*:4.0:3.0 | 3[34]??,*:*:4.0:3.0 | 3[34]??/*:*:4.0:3.0 | 4850:*:4.0:3.0 | SKA40:*:4.0:3.0)
-	OS_REL=''
-	test -r /etc/.relid \
-	&& OS_REL=.`sed -n 's/[^ ]* [^ ]* \([0-9][0-9]\).*/\1/p' < /etc/.relid`
-	/bin/uname -p 2>/dev/null | grep 86 >/dev/null \
-	  && echo i486-ncr-sysv4.3${OS_REL} && exit 0
-	/bin/uname -p 2>/dev/null | /bin/grep entium >/dev/null \
-	  && echo i586-ncr-sysv4.3${OS_REL} && exit 0 ;;
-    3[34]??:*:4.0:* | 3[34]??,*:*:4.0:*)
-        /bin/uname -p 2>/dev/null | grep 86 >/dev/null \
-          && echo i486-ncr-sysv4 && exit 0 ;;
-    m68*:LynxOS:2.*:* | m68*:LynxOS:3.0*:*)
-	echo m68k-unknown-lynxos${UNAME_RELEASE}
-	exit 0 ;;
-    mc68030:UNIX_System_V:4.*:*)
-	echo m68k-atari-sysv4
-	exit 0 ;;
-    i*86:LynxOS:2.*:* | i*86:LynxOS:3.[01]*:* | i*86:LynxOS:4.0*:*)
-	echo i386-unknown-lynxos${UNAME_RELEASE}
-	exit 0 ;;
-    TSUNAMI:LynxOS:2.*:*)
-	echo sparc-unknown-lynxos${UNAME_RELEASE}
-	exit 0 ;;
-    rs6000:LynxOS:2.*:*)
-	echo rs6000-unknown-lynxos${UNAME_RELEASE}
-	exit 0 ;;
-    PowerPC:LynxOS:2.*:* | PowerPC:LynxOS:3.[01]*:* | PowerPC:LynxOS:4.0*:*)
-	echo powerpc-unknown-lynxos${UNAME_RELEASE}
-	exit 0 ;;
-    SM[BE]S:UNIX_SV:*:*)
-	echo mips-dde-sysv${UNAME_RELEASE}
-	exit 0 ;;
-    RM*:ReliantUNIX-*:*:*)
-	echo mips-sni-sysv4
-	exit 0 ;;
-    RM*:SINIX-*:*:*)
-	echo mips-sni-sysv4
-	exit 0 ;;
-    *:SINIX-*:*:*)
-	if uname -p 2>/dev/null >/dev/null ; then
-		UNAME_MACHINE=`(uname -p) 2>/dev/null`
-		echo ${UNAME_MACHINE}-sni-sysv4
-	else
-		echo ns32k-sni-sysv
-	fi
-	exit 0 ;;
-    PENTIUM:*:4.0*:*) # Unisys `ClearPath HMP IX 4000' SVR4/MP effort
-                      # says <Richard.M.Bartel@ccMail.Census.GOV>
-        echo i586-unisys-sysv4
-        exit 0 ;;
-    *:UNIX_System_V:4*:FTX*)
-	# From Gerald Hewes <hewes@openmarket.com>.
-	# How about differentiating between stratus architectures? -djm
-	echo hppa1.1-stratus-sysv4
-	exit 0 ;;
-    *:*:*:FTX*)
-	# From seanf@swdc.stratus.com.
-	echo i860-stratus-sysv4
-	exit 0 ;;
-    *:VOS:*:*)
-	# From Paul.Green@stratus.com.
-	echo hppa1.1-stratus-vos
-	exit 0 ;;
-    mc68*:A/UX:*:*)
-	echo m68k-apple-aux${UNAME_RELEASE}
-	exit 0 ;;
-    news*:NEWS-OS:6*:*)
-	echo mips-sony-newsos6
-	exit 0 ;;
-    R[34]000:*System_V*:*:* | R4000:UNIX_SYSV:*:* | R*000:UNIX_SV:*:*)
-	if [ -d /usr/nec ]; then
-	        echo mips-nec-sysv${UNAME_RELEASE}
-	else
-	        echo mips-unknown-sysv${UNAME_RELEASE}
-	fi
-        exit 0 ;;
-    BeBox:BeOS:*:*)	# BeOS running on hardware made by Be, PPC only.
-	echo powerpc-be-beos
-	exit 0 ;;
-    BeMac:BeOS:*:*)	# BeOS running on Mac or Mac clone, PPC only.
-	echo powerpc-apple-beos
-	exit 0 ;;
-    BePC:BeOS:*:*)	# BeOS running on Intel PC compatible.
-	echo i586-pc-beos
-	exit 0 ;;
-    SX-4:SUPER-UX:*:*)
-	echo sx4-nec-superux${UNAME_RELEASE}
-	exit 0 ;;
-    SX-5:SUPER-UX:*:*)
-	echo sx5-nec-superux${UNAME_RELEASE}
-	exit 0 ;;
-    Power*:Rhapsody:*:*)
-	echo powerpc-apple-rhapsody${UNAME_RELEASE}
-	exit 0 ;;
-    *:Rhapsody:*:*)
-	echo ${UNAME_MACHINE}-apple-rhapsody${UNAME_RELEASE}
-	exit 0 ;;
-    *:Darwin:*:*)
-	echo `uname -p`-apple-darwin${UNAME_RELEASE}
-	exit 0 ;;
-    *:procnto*:*:* | *:QNX:[0123456789]*:*)
-	if test "${UNAME_MACHINE}" = "x86pc"; then
-		UNAME_MACHINE=pc
-	fi
-	echo `uname -p`-${UNAME_MACHINE}-nto-qnx
-	exit 0 ;;
-    *:QNX:*:4*)
-	echo i386-pc-qnx
-	exit 0 ;;
-    NSR-[GKLNPTVW]:NONSTOP_KERNEL:*:*)
-	echo nsr-tandem-nsk${UNAME_RELEASE}
-	exit 0 ;;
-    *:NonStop-UX:*:*)
-	echo mips-compaq-nonstopux
-	exit 0 ;;
-    BS2000:POSIX*:*:*)
-	echo bs2000-siemens-sysv
-	exit 0 ;;
-    DS/*:UNIX_System_V:*:*)
-	echo ${UNAME_MACHINE}-${UNAME_SYSTEM}-${UNAME_RELEASE}
-	exit 0 ;;
-    *:Plan9:*:*)
-	# "uname -m" is not consistent, so use $cputype instead. 386
-	# is converted to i386 for consistency with other x86
-	# operating systems.
-	if test "$cputype" = "386"; then
-	    UNAME_MACHINE=i386
-	else
-	    UNAME_MACHINE="$cputype"
-	fi
-	echo ${UNAME_MACHINE}-unknown-plan9
-	exit 0 ;;
-    i*86:OS/2:*:*)
-	# If we were able to find `uname', then EMX Unix compatibility
-	# is probably installed.
-	echo ${UNAME_MACHINE}-pc-os2-emx
-	exit 0 ;;
-    *:TOPS-10:*:*)
-	echo pdp10-unknown-tops10
-	exit 0 ;;
-    *:TENEX:*:*)
-	echo pdp10-unknown-tenex
-	exit 0 ;;
-    KS10:TOPS-20:*:* | KL10:TOPS-20:*:* | TYPE4:TOPS-20:*:*)
-	echo pdp10-dec-tops20
-	exit 0 ;;
-    XKL-1:TOPS-20:*:* | TYPE5:TOPS-20:*:*)
-	echo pdp10-xkl-tops20
-	exit 0 ;;
-    *:TOPS-20:*:*)
-	echo pdp10-unknown-tops20
-	exit 0 ;;
-    *:ITS:*:*)
-	echo pdp10-unknown-its
-	exit 0 ;;
-    i*86:XTS-300:*:STOP)
-	echo ${UNAME_MACHINE}-unknown-stop
-	exit 0 ;;
-    i*86:atheos:*:*)
-	echo ${UNAME_MACHINE}-unknown-atheos
-	exit 0 ;;
-esac
-
-#echo '(No uname command or uname output not recognized.)' 1>&2
-#echo "${UNAME_MACHINE}:${UNAME_SYSTEM}:${UNAME_RELEASE}:${UNAME_VERSION}" 1>&2
-
-eval $set_cc_for_build
-cat >$dummy.c <<EOF
-#ifdef _SEQUENT_
-# include <sys/types.h>
-# include <sys/utsname.h>
-#endif
-main ()
-{
-#if defined (sony)
-#if defined (MIPSEB)
-  /* BFD wants "bsd" instead of "newsos".  Perhaps BFD should be changed,
-     I don't know....  */
-  printf ("mips-sony-bsd\n"); exit (0);
-#else
-#include <sys/param.h>
-  printf ("m68k-sony-newsos%s\n",
-#ifdef NEWSOS4
-          "4"
-#else
-	  ""
-#endif
-         ); exit (0);
-#endif
-#endif
-
-#if defined (__arm) && defined (__acorn) && defined (__unix)
-  printf ("arm-acorn-riscix"); exit (0);
-#endif
-
-#if defined (hp300) && !defined (hpux)
-  printf ("m68k-hp-bsd\n"); exit (0);
-#endif
-
-#if defined (NeXT)
-#if !defined (__ARCHITECTURE__)
-#define __ARCHITECTURE__ "m68k"
-#endif
-  int version;
-  version=`(hostinfo | sed -n 's/.*NeXT Mach \([0-9]*\).*/\1/p') 2>/dev/null`;
-  if (version < 4)
-    printf ("%s-next-nextstep%d\n", __ARCHITECTURE__, version);
-  else
-    printf ("%s-next-openstep%d\n", __ARCHITECTURE__, version);
-  exit (0);
-#endif
-
-#if defined (MULTIMAX) || defined (n16)
-#if defined (UMAXV)
-  printf ("ns32k-encore-sysv\n"); exit (0);
-#else
-#if defined (CMU)
-  printf ("ns32k-encore-mach\n"); exit (0);
-#else
-  printf ("ns32k-encore-bsd\n"); exit (0);
-#endif
-#endif
-#endif
-
-#if defined (__386BSD__)
-  printf ("i386-pc-bsd\n"); exit (0);
-#endif
-
-#if defined (sequent)
-#if defined (i386)
-  printf ("i386-sequent-dynix\n"); exit (0);
-#endif
-#if defined (ns32000)
-  printf ("ns32k-sequent-dynix\n"); exit (0);
-#endif
-#endif
-
-#if defined (_SEQUENT_)
-    struct utsname un;
-
-    uname(&un);
-
-    if (strncmp(un.version, "V2", 2) == 0) {
-	printf ("i386-sequent-ptx2\n"); exit (0);
-    }
-    if (strncmp(un.version, "V1", 2) == 0) { /* XXX is V1 correct? */
-	printf ("i386-sequent-ptx1\n"); exit (0);
-    }
-    printf ("i386-sequent-ptx\n"); exit (0);
-
-#endif
-
-#if defined (vax)
-# if !defined (ultrix)
-#  include <sys/param.h>
-#  if defined (BSD)
-#   if BSD == 43
-      printf ("vax-dec-bsd4.3\n"); exit (0);
-#   else
-#    if BSD == 199006
-      printf ("vax-dec-bsd4.3reno\n"); exit (0);
-#    else
-      printf ("vax-dec-bsd\n"); exit (0);
-#    endif
-#   endif
-#  else
-    printf ("vax-dec-bsd\n"); exit (0);
-#  endif
-# else
-    printf ("vax-dec-ultrix\n"); exit (0);
-# endif
-#endif
-
-#if defined (alliant) && defined (i860)
-  printf ("i860-alliant-bsd\n"); exit (0);
-#endif
-
-  exit (1);
-}
-EOF
-
-$CC_FOR_BUILD $dummy.c -o $dummy 2>/dev/null && ./$dummy && rm -f $dummy.c $dummy && exit 0
-rm -f $dummy.c $dummy
-
-# Apollos put the system type in the environment.
-
-test -d /usr/apollo && { echo ${ISP}-apollo-${SYSTYPE}; exit 0; }
-
-# Convex versions that predate uname can use getsysinfo(1)
-
-if [ -x /usr/convex/getsysinfo ]
-then
-    case `getsysinfo -f cpu_type` in
-    c1*)
-	echo c1-convex-bsd
-	exit 0 ;;
-    c2*)
-	if getsysinfo -f scalar_acc
-	then echo c32-convex-bsd
-	else echo c2-convex-bsd
-	fi
-	exit 0 ;;
-    c34*)
-	echo c34-convex-bsd
-	exit 0 ;;
-    c38*)
-	echo c38-convex-bsd
-	exit 0 ;;
-    c4*)
-	echo c4-convex-bsd
-	exit 0 ;;
-    esac
-fi
-
-cat >&2 <<EOF
-$0: unable to guess system type
-
-This script, last modified $timestamp, has failed to recognize
-the operating system you are using. It is advised that you
-download the most up to date version of the config scripts from
-
-    ftp://ftp.gnu.org/pub/gnu/config/
-
-If the version you run ($0) is already up to date, please
-send the following data and any information you think might be
-pertinent to <config-patches@gnu.org> in order to provide the needed
-information to handle your system.
-
-config.guess timestamp = $timestamp
-
-uname -m = `(uname -m) 2>/dev/null || echo unknown`
-uname -r = `(uname -r) 2>/dev/null || echo unknown`
-uname -s = `(uname -s) 2>/dev/null || echo unknown`
-uname -v = `(uname -v) 2>/dev/null || echo unknown`
-
-/usr/bin/uname -p = `(/usr/bin/uname -p) 2>/dev/null`
-/bin/uname -X     = `(/bin/uname -X) 2>/dev/null`
-
-hostinfo               = `(hostinfo) 2>/dev/null`
-/bin/universe          = `(/bin/universe) 2>/dev/null`
-/usr/bin/arch -k       = `(/usr/bin/arch -k) 2>/dev/null`
-/bin/arch              = `(/bin/arch) 2>/dev/null`
-/usr/bin/oslevel       = `(/usr/bin/oslevel) 2>/dev/null`
-/usr/convex/getsysinfo = `(/usr/convex/getsysinfo) 2>/dev/null`
-
-UNAME_MACHINE = ${UNAME_MACHINE}
-UNAME_RELEASE = ${UNAME_RELEASE}
-UNAME_SYSTEM  = ${UNAME_SYSTEM}
-UNAME_VERSION = ${UNAME_VERSION}
-EOF
-
-exit 1
-
-# Local variables:
-# eval: (add-hook 'write-file-hooks 'time-stamp)
-# time-stamp-start: "timestamp='"
-# time-stamp-format: "%:y-%02m-%02d"
-# time-stamp-end: "'"
-# End:
diff -pruwN samba-2.2.12/source/config.sub samba-2.2.12-livebox/config.sub
--- samba-2.2.12/source/config.sub	2004-08-12 20:24:22.000000000 +0200
+++ samba-2.2.12-livebox/config.sub	1970-01-01 01:00:00.000000000 +0100
@@ -1,1421 +0,0 @@
-#! /bin/sh
-# Configuration validation subroutine script.
-#   Copyright (C) 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001
-#   Free Software Foundation, Inc.
-
-timestamp='2001-12-03'
-
-# This file is (in principle) common to ALL GNU software.
-# The presence of a machine in this file suggests that SOME GNU software
-# can handle that machine.  It does not imply ALL GNU software can.
-#
-# This file is free software; you can redistribute it and/or modify
-# it under the terms of the GNU General Public License as published by
-# the Free Software Foundation; either version 2 of the License, or
-# (at your option) any later version.
-#
-# This program is distributed in the hope that it will be useful,
-# but WITHOUT ANY WARRANTY; without even the implied warranty of
-# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-# GNU General Public License for more details.
-#
-# You should have received a copy of the GNU General Public License
-# along with this program; if not, write to the Free Software
-# Foundation, Inc., 59 Temple Place - Suite 330,
-# Boston, MA 02111-1307, USA.
-
-# As a special exception to the GNU General Public License, if you
-# distribute this file as part of a program that contains a
-# configuration script generated by Autoconf, you may include it under
-# the same distribution terms that you use for the rest of that program.
-
-# Please send patches to <config-patches@gnu.org>.  Submit a context
-# diff and a properly formatted ChangeLog entry.
-#
-# Configuration subroutine to validate and canonicalize a configuration type.
-# Supply the specified configuration type as an argument.
-# If it is invalid, we print an error message on stderr and exit with code 1.
-# Otherwise, we print the canonical config type on stdout and succeed.
-
-# This file is supposed to be the same for all GNU packages
-# and recognize all the CPU types, system types and aliases
-# that are meaningful with *any* GNU software.
-# Each package is responsible for reporting which valid configurations
-# it does not support.  The user should be able to distinguish
-# a failure to support a valid configuration from a meaningless
-# configuration.
-
-# The goal of this file is to map all the various variations of a given
-# machine specification into a single specification in the form:
-#	CPU_TYPE-MANUFACTURER-OPERATING_SYSTEM
-# or in some cases, the newer four-part form:
-#	CPU_TYPE-MANUFACTURER-KERNEL-OPERATING_SYSTEM
-# It is wrong to echo any other type of specification.
-
-me=`echo "$0" | sed -e 's,.*/,,'`
-
-usage="\
-Usage: $0 [OPTION] CPU-MFR-OPSYS
-       $0 [OPTION] ALIAS
-
-Canonicalize a configuration name.
-
-Operation modes:
-  -h, --help         print this help, then exit
-  -t, --time-stamp   print date of last modification, then exit
-  -v, --version      print version number, then exit
-
-Report bugs and patches to <config-patches@gnu.org>."
-
-version="\
-GNU config.sub ($timestamp)
-
-Copyright (C) 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001
-Free Software Foundation, Inc.
-
-This is free software; see the source for copying conditions.  There is NO
-warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE."
-
-help="
-Try \`$me --help' for more information."
-
-# Parse command line
-while test $# -gt 0 ; do
-  case $1 in
-    --time-stamp | --time* | -t )
-       echo "$timestamp" ; exit 0 ;;
-    --version | -v )
-       echo "$version" ; exit 0 ;;
-    --help | --h* | -h )
-       echo "$usage"; exit 0 ;;
-    -- )     # Stop option processing
-       shift; break ;;
-    - )	# Use stdin as input.
-       break ;;
-    -* )
-       echo "$me: invalid option $1$help"
-       exit 1 ;;
-
-    *local*)
-       # First pass through any local machine types.
-       echo $1
-       exit 0;;
-
-    * )
-       break ;;
-  esac
-done
-
-case $# in
- 0) echo "$me: missing argument$help" >&2
-    exit 1;;
- 1) ;;
- *) echo "$me: too many arguments$help" >&2
-    exit 1;;
-esac
-
-# Separate what the user gave into CPU-COMPANY and OS or KERNEL-OS (if any).
-# Here we must recognize all the valid KERNEL-OS combinations.
-maybe_os=`echo $1 | sed 's/^\(.*\)-\([^-]*-[^-]*\)$/\2/'`
-case $maybe_os in
-  nto-qnx* | linux-gnu* | storm-chaos* | os2-emx* | windows32-*)
-    os=-$maybe_os
-    basic_machine=`echo $1 | sed 's/^\(.*\)-\([^-]*-[^-]*\)$/\1/'`
-    ;;
-  *)
-    basic_machine=`echo $1 | sed 's/-[^-]*$//'`
-    if [ $basic_machine != $1 ]
-    then os=`echo $1 | sed 's/.*-/-/'`
-    else os=; fi
-    ;;
-esac
-
-### Let's recognize common machines as not being operating systems so
-### that things like config.sub decstation-3100 work.  We also
-### recognize some manufacturers as not being operating systems, so we
-### can provide default operating systems below.
-case $os in
-	-sun*os*)
-		# Prevent following clause from handling this invalid input.
-		;;
-	-dec* | -mips* | -sequent* | -encore* | -pc532* | -sgi* | -sony* | \
-	-att* | -7300* | -3300* | -delta* | -motorola* | -sun[234]* | \
-	-unicom* | -ibm* | -next | -hp | -isi* | -apollo | -altos* | \
-	-convergent* | -ncr* | -news | -32* | -3600* | -3100* | -hitachi* |\
-	-c[123]* | -convex* | -sun | -crds | -omron* | -dg | -ultra | -tti* | \
-	-harris | -dolphin | -highlevel | -gould | -cbm | -ns | -masscomp | \
-	-apple | -axis)
-		os=
-		basic_machine=$1
-		;;
-	-sim | -cisco | -oki | -wec | -winbond)
-		os=
-		basic_machine=$1
-		;;
-	-scout)
-		;;
-	-wrs)
-		os=-vxworks
-		basic_machine=$1
-		;;
-	-chorusos*)
-		os=-chorusos
-		basic_machine=$1
-		;;
- 	-chorusrdb)
- 		os=-chorusrdb
-		basic_machine=$1
- 		;;
-	-hiux*)
-		os=-hiuxwe2
-		;;
-	-sco5)
-		os=-sco3.2v5
-		basic_machine=`echo $1 | sed -e 's/86-.*/86-pc/'`
-		;;
-	-sco4)
-		os=-sco3.2v4
-		basic_machine=`echo $1 | sed -e 's/86-.*/86-pc/'`
-		;;
-	-sco3.2.[4-9]*)
-		os=`echo $os | sed -e 's/sco3.2./sco3.2v/'`
-		basic_machine=`echo $1 | sed -e 's/86-.*/86-pc/'`
-		;;
-	-sco3.2v[4-9]*)
-		# Don't forget version if it is 3.2v4 or newer.
-		basic_machine=`echo $1 | sed -e 's/86-.*/86-pc/'`
-		;;
-	-sco*)
-		os=-sco3.2v2
-		basic_machine=`echo $1 | sed -e 's/86-.*/86-pc/'`
-		;;
-	-udk*)
-		basic_machine=`echo $1 | sed -e 's/86-.*/86-pc/'`
-		;;
-	-isc)
-		os=-isc2.2
-		basic_machine=`echo $1 | sed -e 's/86-.*/86-pc/'`
-		;;
-	-clix*)
-		basic_machine=clipper-intergraph
-		;;
-	-isc*)
-		basic_machine=`echo $1 | sed -e 's/86-.*/86-pc/'`
-		;;
-	-lynx*)
-		os=-lynxos
-		;;
-	-ptx*)
-		basic_machine=`echo $1 | sed -e 's/86-.*/86-sequent/'`
-		;;
-	-windowsnt*)
-		os=`echo $os | sed -e 's/windowsnt/winnt/'`
-		;;
-	-psos*)
-		os=-psos
-		;;
-	-mint | -mint[0-9]*)
-		basic_machine=m68k-atari
-		os=-mint
-		;;
-esac
-
-# Decode aliases for certain CPU-COMPANY combinations.
-case $basic_machine in
-	# Recognize the basic CPU types without company name.
-	# Some are omitted here because they have special meanings below.
-	1750a | 580 \
-	| a29k \
-	| alpha | alphaev[4-8] | alphaev56 | alphaev6[78] | alphapca5[67] \
-	| arc | arm | arm[bl]e | arme[lb] | armv[2345] | armv[345][lb] | avr \
-	| c4x | clipper \
-	| d10v | d30v | dsp16xx \
-	| fr30 \
-	| h8300 | h8500 | hppa | hppa1.[01] | hppa2.0 | hppa2.0[nw] | hppa64 \
-	| i370 | i860 | i960 | ia64 \
-	| m32r | m68000 | m68k | m88k | mcore \
-	| mips16 | mips64 | mips64el | mips64orion | mips64orionel \
-	| mips64vr4100 | mips64vr4100el | mips64vr4300 \
-	| mips64vr4300el | mips64vr5000 | mips64vr5000el \
-	| mipsbe | mipseb | mipsel | mipsle | mipstx39 | mipstx39el \
-	| mipsisa32 \
-	| mn10200 | mn10300 \
-	| ns16k | ns32k \
-	| openrisc \
-	| pdp10 | pdp11 | pj | pjl \
-	| powerpc | powerpc64 | powerpc64le | powerpcle | ppcbe \
-	| pyramid \
-	| sh | sh[34] | sh[34]eb | shbe | shle \
-	| sparc | sparc64 | sparclet | sparclite | sparcv9 | sparcv9b \
-	| strongarm \
-	| tahoe | thumb | tic80 | tron \
-	| v850 | v850e \
-	| we32k \
-	| x86 | xscale | xstormy16 | xtensa \
-	| z8k)
-		basic_machine=$basic_machine-unknown
-		;;
-	m6811 | m68hc11 | m6812 | m68hc12)
-		# Motorola 68HC11/12.
-		basic_machine=$basic_machine-unknown
-		os=-none
-		;;
-	m88110 | m680[12346]0 | m683?2 | m68360 | m5200 | v70 | w65 | z8k)
-		;;
-
-	# We use `pc' rather than `unknown'
-	# because (1) that's what they normally are, and
-	# (2) the word "unknown" tends to confuse beginning users.
-	i*86 | x86_64)
-	  basic_machine=$basic_machine-pc
-	  ;;
-	# Object if more than one company name word.
-	*-*-*)
-		echo Invalid configuration \`$1\': machine \`$basic_machine\' not recognized 1>&2
-		exit 1
-		;;
-	# Recognize the basic CPU types with company name.
-	580-* \
-	| a29k-* \
-	| alpha-* | alphaev[4-8]-* | alphaev56-* | alphaev6[78]-* \
-	| alphapca5[67]-* | arc-* \
-	| arm-*  | armbe-* | armle-* | armv*-* \
-	| avr-* \
-	| bs2000-* \
-	| c[123]* | c30-* | [cjt]90-* | c54x-* \
-	| clipper-* | cray2-* | cydra-* \
-	| d10v-* | d30v-* \
-	| elxsi-* \
-	| f30[01]-* | f700-* | fr30-* | fx80-* \
-	| h8300-* | h8500-* \
-	| hppa-* | hppa1.[01]-* | hppa2.0-* | hppa2.0[nw]-* | hppa64-* \
-	| i*86-* | i860-* | i960-* | ia64-* \
-	| m32r-* \
-	| m68000-* | m680[01234]0-* | m68360-* | m683?2-* | m68k-* \
-	| m88110-* | m88k-* | mcore-* \
-	| mips-* | mips16-* | mips64-* | mips64el-* | mips64orion-* \
-	| mips64orionel-* | mips64vr4100-* | mips64vr4100el-* \
-	| mips64vr4300-* | mips64vr4300el-* | mipsbe-* | mipseb-* \
-	| mipsle-* | mipsel-* | mipstx39-* | mipstx39el-* \
-	| none-* | np1-* | ns16k-* | ns32k-* \
-	| orion-* \
-	| pdp10-* | pdp11-* | pj-* | pjl-* | pn-* | power-* \
-	| powerpc-* | powerpc64-* | powerpc64le-* | powerpcle-* | ppcbe-* \
-	| pyramid-* \
-	| romp-* | rs6000-* \
-	| sh-* | sh[34]-* | sh[34]eb-* | shbe-* | shle-* \
-	| sparc-* | sparc64-* | sparc86x-* | sparclite-* \
-	| sparcv9-* | sparcv9b-* | strongarm-* | sv1-* \
-	| t3e-* | tahoe-* | thumb-* | tic30-* | tic54x-* | tic80-* | tron-* \
-	| v850-* | v850e-* | vax-* \
-	| we32k-* \
-	| x86-* | x86_64-* | xmp-* | xps100-* | xscale-* | xstormy16-* \
-	| xtensa-* \
-	| ymp-* \
-	| z8k-*)
-		;;
-	# Recognize the various machine names and aliases which stand
-	# for a CPU type and a company and sometimes even an OS.
-	386bsd)
-		basic_machine=i386-unknown
-		os=-bsd
-		;;
-	3b1 | 7300 | 7300-att | att-7300 | pc7300 | safari | unixpc)
-		basic_machine=m68000-att
-		;;
-	3b*)
-		basic_machine=we32k-att
-		;;
-	a29khif)
-		basic_machine=a29k-amd
-		os=-udi
-		;;
-	adobe68k)
-		basic_machine=m68010-adobe
-		os=-scout
-		;;
-	alliant | fx80)
-		basic_machine=fx80-alliant
-		;;
-	altos | altos3068)
-		basic_machine=m68k-altos
-		;;
-	am29k)
-		basic_machine=a29k-none
-		os=-bsd
-		;;
-	amdahl)
-		basic_machine=580-amdahl
-		os=-sysv
-		;;
-	amiga | amiga-*)
-		basic_machine=m68k-unknown
-		;;
-	amigaos | amigados)
-		basic_machine=m68k-unknown
-		os=-amigaos
-		;;
-	amigaunix | amix)
-		basic_machine=m68k-unknown
-		os=-sysv4
-		;;
-	apollo68)
-		basic_machine=m68k-apollo
-		os=-sysv
-		;;
-	apollo68bsd)
-		basic_machine=m68k-apollo
-		os=-bsd
-		;;
-	aux)
-		basic_machine=m68k-apple
-		os=-aux
-		;;
-	balance)
-		basic_machine=ns32k-sequent
-		os=-dynix
-		;;
-	convex-c1)
-		basic_machine=c1-convex
-		os=-bsd
-		;;
-	convex-c2)
-		basic_machine=c2-convex
-		os=-bsd
-		;;
-	convex-c32)
-		basic_machine=c32-convex
-		os=-bsd
-		;;
-	convex-c34)
-		basic_machine=c34-convex
-		os=-bsd
-		;;
-	convex-c38)
-		basic_machine=c38-convex
-		os=-bsd
-		;;
-	cray | ymp)
-		basic_machine=ymp-cray
-		os=-unicos
-		;;
-	cray2)
-		basic_machine=cray2-cray
-		os=-unicos
-		;;
-	[cjt]90)
-		basic_machine=${basic_machine}-cray
-		os=-unicos
-		;;
-	crds | unos)
-		basic_machine=m68k-crds
-		;;
-	cris | cris-* | etrax*)
-		basic_machine=cris-axis
-		;;
-	da30 | da30-*)
-		basic_machine=m68k-da30
-		;;
-	decstation | decstation-3100 | pmax | pmax-* | pmin | dec3100 | decstatn)
-		basic_machine=mips-dec
-		;;
-	delta | 3300 | motorola-3300 | motorola-delta \
-	      | 3300-motorola | delta-motorola)
-		basic_machine=m68k-motorola
-		;;
-	delta88)
-		basic_machine=m88k-motorola
-		os=-sysv3
-		;;
-	dpx20 | dpx20-*)
-		basic_machine=rs6000-bull
-		os=-bosx
-		;;
-	dpx2* | dpx2*-bull)
-		basic_machine=m68k-bull
-		os=-sysv3
-		;;
-	ebmon29k)
-		basic_machine=a29k-amd
-		os=-ebmon
-		;;
-	elxsi)
-		basic_machine=elxsi-elxsi
-		os=-bsd
-		;;
-	encore | umax | mmax)
-		basic_machine=ns32k-encore
-		;;
-	es1800 | OSE68k | ose68k | ose | OSE)
-		basic_machine=m68k-ericsson
-		os=-ose
-		;;
-	fx2800)
-		basic_machine=i860-alliant
-		;;
-	genix)
-		basic_machine=ns32k-ns
-		;;
-	gmicro)
-		basic_machine=tron-gmicro
-		os=-sysv
-		;;
-	go32)
-		basic_machine=i386-pc
-		os=-go32
-		;;
-	h3050r* | hiux*)
-		basic_machine=hppa1.1-hitachi
-		os=-hiuxwe2
-		;;
-	h8300hms)
-		basic_machine=h8300-hitachi
-		os=-hms
-		;;
-	h8300xray)
-		basic_machine=h8300-hitachi
-		os=-xray
-		;;
-	h8500hms)
-		basic_machine=h8500-hitachi
-		os=-hms
-		;;
-	harris)
-		basic_machine=m88k-harris
-		os=-sysv3
-		;;
-	hp300-*)
-		basic_machine=m68k-hp
-		;;
-	hp300bsd)
-		basic_machine=m68k-hp
-		os=-bsd
-		;;
-	hp300hpux)
-		basic_machine=m68k-hp
-		os=-hpux
-		;;
-	hp3k9[0-9][0-9] | hp9[0-9][0-9])
-		basic_machine=hppa1.0-hp
-		;;
-	hp9k2[0-9][0-9] | hp9k31[0-9])
-		basic_machine=m68000-hp
-		;;
-	hp9k3[2-9][0-9])
-		basic_machine=m68k-hp
-		;;
-	hp9k6[0-9][0-9] | hp6[0-9][0-9])
-		basic_machine=hppa1.0-hp
-		;;
-	hp9k7[0-79][0-9] | hp7[0-79][0-9])
-		basic_machine=hppa1.1-hp
-		;;
-	hp9k78[0-9] | hp78[0-9])
-		# FIXME: really hppa2.0-hp
-		basic_machine=hppa1.1-hp
-		;;
-	hp9k8[67]1 | hp8[67]1 | hp9k80[24] | hp80[24] | hp9k8[78]9 | hp8[78]9 | hp9k893 | hp893)
-		# FIXME: really hppa2.0-hp
-		basic_machine=hppa1.1-hp
-		;;
-	hp9k8[0-9][13679] | hp8[0-9][13679])
-		basic_machine=hppa1.1-hp
-		;;
-	hp9k8[0-9][0-9] | hp8[0-9][0-9])
-		basic_machine=hppa1.0-hp
-		;;
-	hppa-next)
-		os=-nextstep3
-		;;
-	hppaosf)
-		basic_machine=hppa1.1-hp
-		os=-osf
-		;;
-	hppro)
-		basic_machine=hppa1.1-hp
-		os=-proelf
-		;;
-	i370-ibm* | ibm*)
-		basic_machine=i370-ibm
-		;;
-# I'm not sure what "Sysv32" means.  Should this be sysv3.2?
-	i*86v32)
-		basic_machine=`echo $1 | sed -e 's/86.*/86-pc/'`
-		os=-sysv32
-		;;
-	i*86v4*)
-		basic_machine=`echo $1 | sed -e 's/86.*/86-pc/'`
-		os=-sysv4
-		;;
-	i*86v)
-		basic_machine=`echo $1 | sed -e 's/86.*/86-pc/'`
-		os=-sysv
-		;;
-	i*86sol2)
-		basic_machine=`echo $1 | sed -e 's/86.*/86-pc/'`
-		os=-solaris2
-		;;
-	i386mach)
-		basic_machine=i386-mach
-		os=-mach
-		;;
-	i386-vsta | vsta)
-		basic_machine=i386-unknown
-		os=-vsta
-		;;
-	iris | iris4d)
-		basic_machine=mips-sgi
-		case $os in
-		    -irix*)
-			;;
-		    *)
-			os=-irix4
-			;;
-		esac
-		;;
-	isi68 | isi)
-		basic_machine=m68k-isi
-		os=-sysv
-		;;
-	m88k-omron*)
-		basic_machine=m88k-omron
-		;;
-	magnum | m3230)
-		basic_machine=mips-mips
-		os=-sysv
-		;;
-	merlin)
-		basic_machine=ns32k-utek
-		os=-sysv
-		;;
-	mingw32)
-		basic_machine=i386-pc
-		os=-mingw32
-		;;
-	miniframe)
-		basic_machine=m68000-convergent
-		;;
-	*mint | -mint[0-9]* | *MiNT | *MiNT[0-9]*)
-		basic_machine=m68k-atari
-		os=-mint
-		;;
-	mipsel*-linux*)
-		basic_machine=mipsel-unknown
-		os=-linux-gnu
-		;;
-	mips*-linux*)
-		basic_machine=mips-unknown
-		os=-linux-gnu
-		;;
-	mips3*-*)
-		basic_machine=`echo $basic_machine | sed -e 's/mips3/mips64/'`
-		;;
-	mips3*)
-		basic_machine=`echo $basic_machine | sed -e 's/mips3/mips64/'`-unknown
-		;;
-	mmix*)
-		basic_machine=mmix-knuth
-		os=-mmixware
-		;;
-	monitor)
-		basic_machine=m68k-rom68k
-		os=-coff
-		;;
-	msdos)
-		basic_machine=i386-pc
-		os=-msdos
-		;;
-	mvs)
-		basic_machine=i370-ibm
-		os=-mvs
-		;;
-	ncr3000)
-		basic_machine=i486-ncr
-		os=-sysv4
-		;;
-	netbsd386)
-		basic_machine=i386-unknown
-		os=-netbsd
-		;;
-	netwinder)
-		basic_machine=armv4l-rebel
-		os=-linux
-		;;
-	news | news700 | news800 | news900)
-		basic_machine=m68k-sony
-		os=-newsos
-		;;
-	news1000)
-		basic_machine=m68030-sony
-		os=-newsos
-		;;
-	news-3600 | risc-news)
-		basic_machine=mips-sony
-		os=-newsos
-		;;
-	necv70)
-		basic_machine=v70-nec
-		os=-sysv
-		;;
-	next | m*-next )
-		basic_machine=m68k-next
-		case $os in
-		    -nextstep* )
-			;;
-		    -ns2*)
-		      os=-nextstep2
-			;;
-		    *)
-		      os=-nextstep3
-			;;
-		esac
-		;;
-	nh3000)
-		basic_machine=m68k-harris
-		os=-cxux
-		;;
-	nh[45]000)
-		basic_machine=m88k-harris
-		os=-cxux
-		;;
-	nindy960)
-		basic_machine=i960-intel
-		os=-nindy
-		;;
-	mon960)
-		basic_machine=i960-intel
-		os=-mon960
-		;;
-	nonstopux)
-		basic_machine=mips-compaq
-		os=-nonstopux
-		;;
-	np1)
-		basic_machine=np1-gould
-		;;
-	nsr-tandem)
-		basic_machine=nsr-tandem
-		;;
-	op50n-* | op60c-*)
-		basic_machine=hppa1.1-oki
-		os=-proelf
-		;;
-	OSE68000 | ose68000)
-		basic_machine=m68000-ericsson
-		os=-ose
-		;;
-	os68k)
-		basic_machine=m68k-none
-		os=-os68k
-		;;
-	pa-hitachi)
-		basic_machine=hppa1.1-hitachi
-		os=-hiuxwe2
-		;;
-	paragon)
-		basic_machine=i860-intel
-		os=-osf
-		;;
-	pbd)
-		basic_machine=sparc-tti
-		;;
-	pbb)
-		basic_machine=m68k-tti
-		;;
-        pc532 | pc532-*)
-		basic_machine=ns32k-pc532
-		;;
-	pentium | p5 | k5 | k6 | nexgen | viac3)
-		basic_machine=i586-pc
-		;;
-	pentiumpro | p6 | 6x86 | athlon)
-		basic_machine=i686-pc
-		;;
-	pentiumii | pentium2)
-		basic_machine=i686-pc
-		;;
-	pentium-* | p5-* | k5-* | k6-* | nexgen-* | viac3-*)
-		basic_machine=i586-`echo $basic_machine | sed 's/^[^-]*-//'`
-		;;
-	pentiumpro-* | p6-* | 6x86-* | athlon-*)
-		basic_machine=i686-`echo $basic_machine | sed 's/^[^-]*-//'`
-		;;
-	pentiumii-* | pentium2-*)
-		basic_machine=i686-`echo $basic_machine | sed 's/^[^-]*-//'`
-		;;
-	pn)
-		basic_machine=pn-gould
-		;;
-	power)	basic_machine=power-ibm
-		;;
-	ppc)	basic_machine=powerpc-unknown
-	        ;;
-	ppc-*)	basic_machine=powerpc-`echo $basic_machine | sed 's/^[^-]*-//'`
-		;;
-	ppcle | powerpclittle | ppc-le | powerpc-little)
-		basic_machine=powerpcle-unknown
-	        ;;
-	ppcle-* | powerpclittle-*)
-		basic_machine=powerpcle-`echo $basic_machine | sed 's/^[^-]*-//'`
-		;;
-	ppc64)	basic_machine=powerpc64-unknown
-	        ;;
-	ppc64-*) basic_machine=powerpc64-`echo $basic_machine | sed 's/^[^-]*-//'`
-		;;
-	ppc64le | powerpc64little | ppc64-le | powerpc64-little)
-		basic_machine=powerpc64le-unknown
-	        ;;
-	ppc64le-* | powerpc64little-*)
-		basic_machine=powerpc64le-`echo $basic_machine | sed 's/^[^-]*-//'`
-		;;
-	ps2)
-		basic_machine=i386-ibm
-		;;
-	pw32)
-		basic_machine=i586-unknown
-		os=-pw32
-		;;
-	rom68k)
-		basic_machine=m68k-rom68k
-		os=-coff
-		;;
-	rm[46]00)
-		basic_machine=mips-siemens
-		;;
-	rtpc | rtpc-*)
-		basic_machine=romp-ibm
-		;;
-	s390 | s390-*)
-		basic_machine=s390-ibm
-		;;
-	s390x | s390x-*)
-		basic_machine=s390x-ibm
-		;;
-	sa29200)
-		basic_machine=a29k-amd
-		os=-udi
-		;;
-	sequent)
-		basic_machine=i386-sequent
-		;;
-	sh)
-		basic_machine=sh-hitachi
-		os=-hms
-		;;
-	sparclite-wrs | simso-wrs)
-		basic_machine=sparclite-wrs
-		os=-vxworks
-		;;
-	sps7)
-		basic_machine=m68k-bull
-		os=-sysv2
-		;;
-	spur)
-		basic_machine=spur-unknown
-		;;
-	st2000)
-		basic_machine=m68k-tandem
-		;;
-	stratus)
-		basic_machine=i860-stratus
-		os=-sysv4
-		;;
-	sun2)
-		basic_machine=m68000-sun
-		;;
-	sun2os3)
-		basic_machine=m68000-sun
-		os=-sunos3
-		;;
-	sun2os4)
-		basic_machine=m68000-sun
-		os=-sunos4
-		;;
-	sun3os3)
-		basic_machine=m68k-sun
-		os=-sunos3
-		;;
-	sun3os4)
-		basic_machine=m68k-sun
-		os=-sunos4
-		;;
-	sun4os3)
-		basic_machine=sparc-sun
-		os=-sunos3
-		;;
-	sun4os4)
-		basic_machine=sparc-sun
-		os=-sunos4
-		;;
-	sun4sol2)
-		basic_machine=sparc-sun
-		os=-solaris2
-		;;
-	sun3 | sun3-*)
-		basic_machine=m68k-sun
-		;;
-	sun4)
-		basic_machine=sparc-sun
-		;;
-	sun386 | sun386i | roadrunner)
-		basic_machine=i386-sun
-		;;
-	sv1)
-		basic_machine=sv1-cray
-		os=-unicos
-		;;
-	symmetry)
-		basic_machine=i386-sequent
-		os=-dynix
-		;;
-	t3e)
-		basic_machine=t3e-cray
-		os=-unicos
-		;;
-	tic54x | c54x*)
-		basic_machine=tic54x-unknown
-		os=-coff
-		;;
-	tx39)
-		basic_machine=mipstx39-unknown
-		;;
-	tx39el)
-		basic_machine=mipstx39el-unknown
-		;;
-	tower | tower-32)
-		basic_machine=m68k-ncr
-		;;
-	udi29k)
-		basic_machine=a29k-amd
-		os=-udi
-		;;
-	ultra3)
-		basic_machine=a29k-nyu
-		os=-sym1
-		;;
-	v810 | necv810)
-		basic_machine=v810-nec
-		os=-none
-		;;
-	vaxv)
-		basic_machine=vax-dec
-		os=-sysv
-		;;
-	vms)
-		basic_machine=vax-dec
-		os=-vms
-		;;
-	vpp*|vx|vx-*)
-               basic_machine=f301-fujitsu
-               ;;
-	vxworks960)
-		basic_machine=i960-wrs
-		os=-vxworks
-		;;
-	vxworks68)
-		basic_machine=m68k-wrs
-		os=-vxworks
-		;;
-	vxworks29k)
-		basic_machine=a29k-wrs
-		os=-vxworks
-		;;
-	w65*)
-		basic_machine=w65-wdc
-		os=-none
-		;;
-	w89k-*)
-		basic_machine=hppa1.1-winbond
-		os=-proelf
-		;;
-	windows32)
-		basic_machine=i386-pc
-		os=-windows32-msvcrt
-		;;
-	xmp)
-		basic_machine=xmp-cray
-		os=-unicos
-		;;
-        xps | xps100)
-		basic_machine=xps100-honeywell
-		;;
-	z8k-*-coff)
-		basic_machine=z8k-unknown
-		os=-sim
-		;;
-	none)
-		basic_machine=none-none
-		os=-none
-		;;
-
-# Here we handle the default manufacturer of certain CPU types.  It is in
-# some cases the only manufacturer, in others, it is the most popular.
-	w89k)
-		basic_machine=hppa1.1-winbond
-		;;
-	op50n)
-		basic_machine=hppa1.1-oki
-		;;
-	op60c)
-		basic_machine=hppa1.1-oki
-		;;
-	mips)
-		if [ x$os = x-linux-gnu ]; then
-			basic_machine=mips-unknown
-		else
-			basic_machine=mips-mips
-		fi
-		;;
-	romp)
-		basic_machine=romp-ibm
-		;;
-	rs6000)
-		basic_machine=rs6000-ibm
-		;;
-	vax)
-		basic_machine=vax-dec
-		;;
-	pdp10)
-		# there are many clones, so DEC is not a safe bet
-		basic_machine=pdp10-unknown
-		;;
-	pdp11)
-		basic_machine=pdp11-dec
-		;;
-	we32k)
-		basic_machine=we32k-att
-		;;
-	sh3 | sh4 | sh3eb | sh4eb)
-		basic_machine=sh-unknown
-		;;
-	sparc | sparcv9 | sparcv9b)
-		basic_machine=sparc-sun
-		;;
-        cydra)
-		basic_machine=cydra-cydrome
-		;;
-	orion)
-		basic_machine=orion-highlevel
-		;;
-	orion105)
-		basic_machine=clipper-highlevel
-		;;
-	mac | mpw | mac-mpw)
-		basic_machine=m68k-apple
-		;;
-	pmac | pmac-mpw)
-		basic_machine=powerpc-apple
-		;;
-	c4x*)
-		basic_machine=c4x-none
-		os=-coff
-		;;
-	*-unknown)
-		# Make sure to match an already-canonicalized machine name.
-		;;
-	*)
-		echo Invalid configuration \`$1\': machine \`$basic_machine\' not recognized 1>&2
-		exit 1
-		;;
-esac
-
-# Here we canonicalize certain aliases for manufacturers.
-case $basic_machine in
-	*-digital*)
-		basic_machine=`echo $basic_machine | sed 's/digital.*/dec/'`
-		;;
-	*-commodore*)
-		basic_machine=`echo $basic_machine | sed 's/commodore.*/cbm/'`
-		;;
-	*)
-		;;
-esac
-
-# Decode manufacturer-specific aliases for certain operating systems.
-
-if [ x"$os" != x"" ]
-then
-case $os in
-        # First match some system type aliases
-        # that might get confused with valid system types.
-	# -solaris* is a basic system type, with this one exception.
-	-solaris1 | -solaris1.*)
-		os=`echo $os | sed -e 's|solaris1|sunos4|'`
-		;;
-	-solaris)
-		os=-solaris2
-		;;
-	-svr4*)
-		os=-sysv4
-		;;
-	-unixware*)
-		os=-sysv4.2uw
-		;;
-	-gnu/linux*)
-		os=`echo $os | sed -e 's|gnu/linux|linux-gnu|'`
-		;;
-	# First accept the basic system types.
-	# The portable systems comes first.
-	# Each alternative MUST END IN A *, to match a version number.
-	# -sysv* is not here because it comes later, after sysvr4.
-	-gnu* | -bsd* | -mach* | -minix* | -genix* | -ultrix* | -irix* \
-	      | -*vms* | -sco* | -esix* | -isc* | -aix* | -sunos | -sunos[34]*\
-	      | -hpux* | -unos* | -osf* | -luna* | -dgux* | -solaris* | -sym* \
-	      | -amigaos* | -amigados* | -msdos* | -newsos* | -unicos* | -aof* \
-	      | -aos* \
-	      | -nindy* | -vxsim* | -vxworks* | -ebmon* | -hms* | -mvs* \
-	      | -clix* | -riscos* | -uniplus* | -iris* | -rtu* | -xenix* \
-	      | -hiux* | -386bsd* | -netbsd* | -openbsd* | -freebsd* | -riscix* \
-	      | -lynxos* | -bosx* | -nextstep* | -cxux* | -aout* | -elf* | -oabi* \
-	      | -ptx* | -coff* | -ecoff* | -winnt* | -domain* | -vsta* \
-	      | -udi* | -eabi* | -lites* | -ieee* | -go32* | -aux* \
-	      | -chorusos* | -chorusrdb* \
-	      | -cygwin* | -pe* | -psos* | -moss* | -proelf* | -rtems* \
-	      | -mingw32* | -linux-gnu* | -uxpv* | -beos* | -mpeix* | -udk* \
-	      | -interix* | -uwin* | -rhapsody* | -darwin* | -opened* \
-	      | -openstep* | -oskit* | -conix* | -pw32* | -nonstopux* \
-	      | -storm-chaos* | -tops10* | -tenex* | -tops20* | -its* \
-	      | -os2* | -vos* | -palmos* | -uclinux* | -nucleus*)
-	# Remember, each alternative MUST END IN *, to match a version number.
-		;;
-	-qnx*)
-		case $basic_machine in
-		    x86-* | i*86-*)
-			;;
-		    *)
-			os=-nto$os
-			;;
-		esac
-		;;
-	-nto*)
-		os=-nto-qnx
-		;;
-	-sim | -es1800* | -hms* | -xray | -os68k* | -none* | -v88r* \
-	      | -windows* | -osx | -abug | -netware* | -os9* | -beos* \
-	      | -macos* | -mpw* | -magic* | -mmixware* | -mon960* | -lnews*)
-		;;
-	-mac*)
-		os=`echo $os | sed -e 's|mac|macos|'`
-		;;
-	-linux*)
-		os=`echo $os | sed -e 's|linux|linux-gnu|'`
-		;;
-	-sunos5*)
-		os=`echo $os | sed -e 's|sunos5|solaris2|'`
-		;;
-	-sunos6*)
-		os=`echo $os | sed -e 's|sunos6|solaris3|'`
-		;;
-	-opened*)
-		os=-openedition
-		;;
-	-wince*)
-		os=-wince
-		;;
-	-osfrose*)
-		os=-osfrose
-		;;
-	-osf*)
-		os=-osf
-		;;
-	-utek*)
-		os=-bsd
-		;;
-	-dynix*)
-		os=-bsd
-		;;
-	-acis*)
-		os=-aos
-		;;
-	-atheos*)
-		os=-atheos
-		;;
-	-386bsd)
-		os=-bsd
-		;;
-	-ctix* | -uts*)
-		os=-sysv
-		;;
-	-ns2 )
-	        os=-nextstep2
-		;;
-	-nsk*)
-		os=-nsk
-		;;
-	# Preserve the version number of sinix5.
-	-sinix5.*)
-		os=`echo $os | sed -e 's|sinix|sysv|'`
-		;;
-	-sinix*)
-		os=-sysv4
-		;;
-	-triton*)
-		os=-sysv3
-		;;
-	-oss*)
-		os=-sysv3
-		;;
-	-svr4)
-		os=-sysv4
-		;;
-	-svr3)
-		os=-sysv3
-		;;
-	-sysvr4)
-		os=-sysv4
-		;;
-	# This must come after -sysvr4.
-	-sysv*)
-		;;
-	-ose*)
-		os=-ose
-		;;
-	-es1800*)
-		os=-ose
-		;;
-	-xenix)
-		os=-xenix
-		;;
-        -*mint | -mint[0-9]* | -*MiNT | -MiNT[0-9]*)
-	        os=-mint
-		;;
-	-none)
-		;;
-	*)
-		# Get rid of the `-' at the beginning of $os.
-		os=`echo $os | sed 's/[^-]*-//'`
-		echo Invalid configuration \`$1\': system \`$os\' not recognized 1>&2
-		exit 1
-		;;
-esac
-else
-
-# Here we handle the default operating systems that come with various machines.
-# The value should be what the vendor currently ships out the door with their
-# machine or put another way, the most popular os provided with the machine.
-
-# Note that if you're going to try to match "-MANUFACTURER" here (say,
-# "-sun"), then you have to tell the case statement up towards the top
-# that MANUFACTURER isn't an operating system.  Otherwise, code above
-# will signal an error saying that MANUFACTURER isn't an operating
-# system, and we'll never get to this point.
-
-case $basic_machine in
-	*-acorn)
-		os=-riscix1.2
-		;;
-	arm*-rebel)
-		os=-linux
-		;;
-	arm*-semi)
-		os=-aout
-		;;
-	pdp10-*)
-		os=-tops20
-		;;
-        pdp11-*)
-		os=-none
-		;;
-	*-dec | vax-*)
-		os=-ultrix4.2
-		;;
-	m68*-apollo)
-		os=-domain
-		;;
-	i386-sun)
-		os=-sunos4.0.2
-		;;
-	m68000-sun)
-		os=-sunos3
-		# This also exists in the configure program, but was not the
-		# default.
-		# os=-sunos4
-		;;
-	m68*-cisco)
-		os=-aout
-		;;
-	mips*-cisco)
-		os=-elf
-		;;
-	mips*-*)
-		os=-elf
-		;;
-	*-tti)	# must be before sparc entry or we get the wrong os.
-		os=-sysv3
-		;;
-	sparc-* | *-sun)
-		os=-sunos4.1.1
-		;;
-	*-be)
-		os=-beos
-		;;
-	*-ibm)
-		os=-aix
-		;;
-	*-wec)
-		os=-proelf
-		;;
-	*-winbond)
-		os=-proelf
-		;;
-	*-oki)
-		os=-proelf
-		;;
-	*-hp)
-		os=-hpux
-		;;
-	*-hitachi)
-		os=-hiux
-		;;
-	i860-* | *-att | *-ncr | *-altos | *-motorola | *-convergent)
-		os=-sysv
-		;;
-	*-cbm)
-		os=-amigaos
-		;;
-	*-dg)
-		os=-dgux
-		;;
-	*-dolphin)
-		os=-sysv3
-		;;
-	m68k-ccur)
-		os=-rtu
-		;;
-	m88k-omron*)
-		os=-luna
-		;;
-	*-next )
-		os=-nextstep
-		;;
-	*-sequent)
-		os=-ptx
-		;;
-	*-crds)
-		os=-unos
-		;;
-	*-ns)
-		os=-genix
-		;;
-	i370-*)
-		os=-mvs
-		;;
-	*-next)
-		os=-nextstep3
-		;;
-        *-gould)
-		os=-sysv
-		;;
-        *-highlevel)
-		os=-bsd
-		;;
-	*-encore)
-		os=-bsd
-		;;
-        *-sgi)
-		os=-irix
-		;;
-        *-siemens)
-		os=-sysv4
-		;;
-	*-masscomp)
-		os=-rtu
-		;;
-	f30[01]-fujitsu | f700-fujitsu)
-		os=-uxpv
-		;;
-	*-rom68k)
-		os=-coff
-		;;
-	*-*bug)
-		os=-coff
-		;;
-	*-apple)
-		os=-macos
-		;;
-	*-atari*)
-		os=-mint
-		;;
-	*)
-		os=-none
-		;;
-esac
-fi
-
-# Here we handle the case where we know the os, and the CPU type, but not the
-# manufacturer.  We pick the logical manufacturer.
-vendor=unknown
-case $basic_machine in
-	*-unknown)
-		case $os in
-			-riscix*)
-				vendor=acorn
-				;;
-			-sunos*)
-				vendor=sun
-				;;
-			-aix*)
-				vendor=ibm
-				;;
-			-beos*)
-				vendor=be
-				;;
-			-hpux*)
-				vendor=hp
-				;;
-			-mpeix*)
-				vendor=hp
-				;;
-			-hiux*)
-				vendor=hitachi
-				;;
-			-unos*)
-				vendor=crds
-				;;
-			-dgux*)
-				vendor=dg
-				;;
-			-luna*)
-				vendor=omron
-				;;
-			-genix*)
-				vendor=ns
-				;;
-			-mvs* | -opened*)
-				vendor=ibm
-				;;
-			-ptx*)
-				vendor=sequent
-				;;
-			-vxsim* | -vxworks*)
-				vendor=wrs
-				;;
-			-aux*)
-				vendor=apple
-				;;
-			-hms*)
-				vendor=hitachi
-				;;
-			-mpw* | -macos*)
-				vendor=apple
-				;;
-			-*mint | -mint[0-9]* | -*MiNT | -MiNT[0-9]*)
-				vendor=atari
-				;;
-			-vos*)
-				vendor=stratus
-				;;
-		esac
-		basic_machine=`echo $basic_machine | sed "s/unknown/$vendor/"`
-		;;
-esac
-
-echo $basic_machine$os
-exit 0
-
-# Local variables:
-# eval: (add-hook 'write-file-hooks 'time-stamp)
-# time-stamp-start: "timestamp='"
-# time-stamp-format: "%:y-%02m-%02d"
-# time-stamp-end: "'"
-# End:
diff -pruwN samba-2.2.12/source/configure samba-2.2.12-livebox/configure
--- samba-2.2.12/source/configure	2004-08-12 20:24:19.000000000 +0200
+++ samba-2.2.12-livebox/configure	1970-01-01 01:00:00.000000000 +0100
@@ -1,14723 +0,0 @@
-#! /bin/sh
-
-# Guess values for system-dependent variables and create Makefiles.
-# Generated automatically using autoconf version 2.13 
-# Copyright (C) 1992, 93, 94, 95, 96 Free Software Foundation, Inc.
-#
-# This configure script is free software; the Free Software Foundation
-# gives unlimited permission to copy, distribute and modify it.
-
-# Defaults:
-ac_help=
-ac_default_prefix=/usr/local
-# Any additions from configure.in:
-ac_default_prefix=/usr/local/samba
-ac_help="$ac_help
-  --with-fhs              Use FHS-compliant paths (default=no)"
-ac_help="$ac_help
-  --with-privatedir=DIR   Where to put smbpasswd ($ac_default_prefix/private)"
-ac_help="$ac_help
-  --with-lockdir=DIR      Where to put lock files ($ac_default_prefix/var/locks)"
-ac_help="$ac_help
-  --with-piddir=DIR       Where to put pid files ($ac_default_prefix/var/locks)"
-ac_help="$ac_help
-  --with-swatdir=DIR      Where to put SWAT files ($ac_default_prefix/swat)"
-ac_help="$ac_help
-  --with-configdir=DIR    Where to put configuration files (\$libdir)"
-ac_help="$ac_help
-  --with-codepagedir=DIR  Where to put codepage files (\$libdir/codepages)"
-ac_help="$ac_help
-  --with-logfilebase=DIR  Where to put log files (\$(VARDIR))"
-ac_help="$ac_help
-  --enable-debug          Turn on compiler debugging information (default=no)"
-ac_help="$ac_help
-  --enable-cups           Turn on CUPS support (default=auto)"
-ac_help="$ac_help
-  --with-readline[=DIR]   Look for readline include/libs in DIR (default=auto)"
-ac_help="$ac_help
-  --with-smbwrapper       Include SMB wrapper support (default=no)"
-ac_help="$ac_help
-  --with-afs              Include AFS support (default=no)"
-ac_help="$ac_help
-  --with-dce-dfs          Include DCE/DFS support (default=no)"
-ac_help="$ac_help
-  --with-krb4=base-dir    Include Kerberos IV support (default=no)"
-ac_help="$ac_help
-  --with-krb5=base-dir    Include Kerberos 5 support (default=no)"
-ac_help="$ac_help
-  --with-automount        Include AUTOMOUNT support (default=no)"
-ac_help="$ac_help
-  --with-smbmount         Include SMBMOUNT (Linux only) support (default=no)"
-ac_help="$ac_help
-  --with-pam              Include PAM password database support (default=no)"
-ac_help="$ac_help
-  --with-pam_smbpass      Include the smbpass PAM module (default=no)"
-ac_help="$ac_help
-  --with-tdbsam           Include experimental TDB SAM support (default=no)"
-ac_help="$ac_help
-  --with-ldapsam          Include experimental LDAP SAM support (default=no)"
-ac_help="$ac_help
-  --with-nisplussam       Include NISPLUS SAM support (default=no)"
-ac_help="$ac_help
-  --with-nisplus-home     Include NISPLUS_HOME support (default=no)"
-ac_help="$ac_help
-  --with-ssl              Include SSL support (default=no)
-  --with-sslinc=DIR          Where the SSL includes are (defaults to /usr/local/ssl/include)
-  --with-ssllib=DIR          Where the SSL libraries are (defaults to /usr/local/ssl/lib)"
-ac_help="$ac_help
-  --with-syslog           Include experimental SYSLOG support (default=no)"
-ac_help="$ac_help
-  --with-profiling-data   Include gathering source code profile information (default=no)"
-ac_help="$ac_help
-  --with-quotas           Include experimental disk-quota support (default=no)"
-ac_help="$ac_help
-  --with-utmp             Include experimental utmp accounting (default=no)"
-ac_help="$ac_help
-  --with-msdfs            Include MS Dfs support (default=no)"
-ac_help="$ac_help
-  --with-libsmbclient     Build the libsmbclient shared library (default=no)"
-ac_help="$ac_help
-  --with-spinlocks        Use spin locks instead of fcntl locks (default=no)"
-ac_help="$ac_help
-  --with-acl-support      Include ACL support (default=no)"
-ac_help="$ac_help
-  --with-sendfile-support      Check for sendfile support (default=no)"
-ac_help="$ac_help
-  --with-winbind          Build winbind (default, if supported by OS)"
-ac_help="$ac_help
-  --with-winbind-auth-challenge   Enable winbindd_pam_auth_crap() functionality (default no)"
-ac_help="$ac_help
-  --with-winbind-ldap-hack   Enable winbindd_ldap_hack() functionality (default no)"
-ac_help="$ac_help
-  --with-included-popt    use bundled popt library, not from system"
-
-# Initialize some variables set by options.
-# The variables have the same names as the options, with
-# dashes changed to underlines.
-build=NONE
-cache_file=./config.cache
-exec_prefix=NONE
-host=NONE
-no_create=
-nonopt=NONE
-no_recursion=
-prefix=NONE
-program_prefix=NONE
-program_suffix=NONE
-program_transform_name=s,x,x,
-silent=
-site=
-srcdir=
-target=NONE
-verbose=
-x_includes=NONE
-x_libraries=NONE
-bindir='${exec_prefix}/bin'
-sbindir='${exec_prefix}/sbin'
-libexecdir='${exec_prefix}/libexec'
-datadir='${prefix}/share'
-sysconfdir='${prefix}/etc'
-sharedstatedir='${prefix}/com'
-localstatedir='${prefix}/var'
-libdir='${exec_prefix}/lib'
-includedir='${prefix}/include'
-oldincludedir='/usr/include'
-infodir='${prefix}/info'
-mandir='${prefix}/man'
-
-# Initialize some other variables.
-subdirs=
-MFLAGS= MAKEFLAGS=
-SHELL=${CONFIG_SHELL-/bin/sh}
-# Maximum number of lines to put in a shell here document.
-ac_max_here_lines=12
-
-ac_prev=
-for ac_option
-do
-
-  # If the previous option needs an argument, assign it.
-  if test -n "$ac_prev"; then
-    eval "$ac_prev=\$ac_option"
-    ac_prev=
-    continue
-  fi
-
-  case "$ac_option" in
-  -*=*) ac_optarg=`echo "$ac_option" | sed 's/[-_a-zA-Z0-9]*=//'` ;;
-  *) ac_optarg= ;;
-  esac
-
-  # Accept the important Cygnus configure options, so we can diagnose typos.
-
-  case "$ac_option" in
-
-  -bindir | --bindir | --bindi | --bind | --bin | --bi)
-    ac_prev=bindir ;;
-  -bindir=* | --bindir=* | --bindi=* | --bind=* | --bin=* | --bi=*)
-    bindir="$ac_optarg" ;;
-
-  -build | --build | --buil | --bui | --bu)
-    ac_prev=build ;;
-  -build=* | --build=* | --buil=* | --bui=* | --bu=*)
-    build="$ac_optarg" ;;
-
-  -cache-file | --cache-file | --cache-fil | --cache-fi \
-  | --cache-f | --cache- | --cache | --cach | --cac | --ca | --c)
-    ac_prev=cache_file ;;
-  -cache-file=* | --cache-file=* | --cache-fil=* | --cache-fi=* \
-  | --cache-f=* | --cache-=* | --cache=* | --cach=* | --cac=* | --ca=* | --c=*)
-    cache_file="$ac_optarg" ;;
-
-  -datadir | --datadir | --datadi | --datad | --data | --dat | --da)
-    ac_prev=datadir ;;
-  -datadir=* | --datadir=* | --datadi=* | --datad=* | --data=* | --dat=* \
-  | --da=*)
-    datadir="$ac_optarg" ;;
-
-  -disable-* | --disable-*)
-    ac_feature=`echo $ac_option|sed -e 's/-*disable-//'`
-    # Reject names that are not valid shell variable names.
-    if test -n "`echo $ac_feature| sed 's/[-a-zA-Z0-9_]//g'`"; then
-      { echo "configure: error: $ac_feature: invalid feature name" 1>&2; exit 1; }
-    fi
-    ac_feature=`echo $ac_feature| sed 's/-/_/g'`
-    eval "enable_${ac_feature}=no" ;;
-
-  -enable-* | --enable-*)
-    ac_feature=`echo $ac_option|sed -e 's/-*enable-//' -e 's/=.*//'`
-    # Reject names that are not valid shell variable names.
-    if test -n "`echo $ac_feature| sed 's/[-_a-zA-Z0-9]//g'`"; then
-      { echo "configure: error: $ac_feature: invalid feature name" 1>&2; exit 1; }
-    fi
-    ac_feature=`echo $ac_feature| sed 's/-/_/g'`
-    case "$ac_option" in
-      *=*) ;;
-      *) ac_optarg=yes ;;
-    esac
-    eval "enable_${ac_feature}='$ac_optarg'" ;;
-
-  -exec-prefix | --exec_prefix | --exec-prefix | --exec-prefi \
-  | --exec-pref | --exec-pre | --exec-pr | --exec-p | --exec- \
-  | --exec | --exe | --ex)
-    ac_prev=exec_prefix ;;
-  -exec-prefix=* | --exec_prefix=* | --exec-prefix=* | --exec-prefi=* \
-  | --exec-pref=* | --exec-pre=* | --exec-pr=* | --exec-p=* | --exec-=* \
-  | --exec=* | --exe=* | --ex=*)
-    exec_prefix="$ac_optarg" ;;
-
-  -gas | --gas | --ga | --g)
-    # Obsolete; use --with-gas.
-    with_gas=yes ;;
-
-  -help | --help | --hel | --he)
-    # Omit some internal or obsolete options to make the list less imposing.
-    # This message is too long to be a string in the A/UX 3.1 sh.
-    cat << EOF
-Usage: configure [options] [host]
-Options: [defaults in brackets after descriptions]
-Configuration:
-  --cache-file=FILE       cache test results in FILE
-  --help                  print this message
-  --no-create             do not create output files
-  --quiet, --silent       do not print \`checking...' messages
-  --version               print the version of autoconf that created configure
-Directory and file names:
-  --prefix=PREFIX         install architecture-independent files in PREFIX
-                          [$ac_default_prefix]
-  --exec-prefix=EPREFIX   install architecture-dependent files in EPREFIX
-                          [same as prefix]
-  --bindir=DIR            user executables in DIR [EPREFIX/bin]
-  --sbindir=DIR           system admin executables in DIR [EPREFIX/sbin]
-  --libexecdir=DIR        program executables in DIR [EPREFIX/libexec]
-  --datadir=DIR           read-only architecture-independent data in DIR
-                          [PREFIX/share]
-  --sysconfdir=DIR        read-only single-machine data in DIR [PREFIX/etc]
-  --sharedstatedir=DIR    modifiable architecture-independent data in DIR
-                          [PREFIX/com]
-  --localstatedir=DIR     modifiable single-machine data in DIR [PREFIX/var]
-  --libdir=DIR            object code libraries in DIR [EPREFIX/lib]
-  --includedir=DIR        C header files in DIR [PREFIX/include]
-  --oldincludedir=DIR     C header files for non-gcc in DIR [/usr/include]
-  --infodir=DIR           info documentation in DIR [PREFIX/info]
-  --mandir=DIR            man documentation in DIR [PREFIX/man]
-  --srcdir=DIR            find the sources in DIR [configure dir or ..]
-  --program-prefix=PREFIX prepend PREFIX to installed program names
-  --program-suffix=SUFFIX append SUFFIX to installed program names
-  --program-transform-name=PROGRAM
-                          run sed PROGRAM on installed program names
-EOF
-    cat << EOF
-Host type:
-  --build=BUILD           configure for building on BUILD [BUILD=HOST]
-  --host=HOST             configure for HOST [guessed]
-  --target=TARGET         configure for TARGET [TARGET=HOST]
-Features and packages:
-  --disable-FEATURE       do not include FEATURE (same as --enable-FEATURE=no)
-  --enable-FEATURE[=ARG]  include FEATURE [ARG=yes]
-  --with-PACKAGE[=ARG]    use PACKAGE [ARG=yes]
-  --without-PACKAGE       do not use PACKAGE (same as --with-PACKAGE=no)
-  --x-includes=DIR        X include files are in DIR
-  --x-libraries=DIR       X library files are in DIR
-EOF
-    if test -n "$ac_help"; then
-      echo "--enable and --with options recognized:$ac_help"
-    fi
-    exit 0 ;;
-
-  -host | --host | --hos | --ho)
-    ac_prev=host ;;
-  -host=* | --host=* | --hos=* | --ho=*)
-    host="$ac_optarg" ;;
-
-  -includedir | --includedir | --includedi | --included | --include \
-  | --includ | --inclu | --incl | --inc)
-    ac_prev=includedir ;;
-  -includedir=* | --includedir=* | --includedi=* | --included=* | --include=* \
-  | --includ=* | --inclu=* | --incl=* | --inc=*)
-    includedir="$ac_optarg" ;;
-
-  -infodir | --infodir | --infodi | --infod | --info | --inf)
-    ac_prev=infodir ;;
-  -infodir=* | --infodir=* | --infodi=* | --infod=* | --info=* | --inf=*)
-    infodir="$ac_optarg" ;;
-
-  -libdir | --libdir | --libdi | --libd)
-    ac_prev=libdir ;;
-  -libdir=* | --libdir=* | --libdi=* | --libd=*)
-    libdir="$ac_optarg" ;;
-
-  -libexecdir | --libexecdir | --libexecdi | --libexecd | --libexec \
-  | --libexe | --libex | --libe)
-    ac_prev=libexecdir ;;
-  -libexecdir=* | --libexecdir=* | --libexecdi=* | --libexecd=* | --libexec=* \
-  | --libexe=* | --libex=* | --libe=*)
-    libexecdir="$ac_optarg" ;;
-
-  -localstatedir | --localstatedir | --localstatedi | --localstated \
-  | --localstate | --localstat | --localsta | --localst \
-  | --locals | --local | --loca | --loc | --lo)
-    ac_prev=localstatedir ;;
-  -localstatedir=* | --localstatedir=* | --localstatedi=* | --localstated=* \
-  | --localstate=* | --localstat=* | --localsta=* | --localst=* \
-  | --locals=* | --local=* | --loca=* | --loc=* | --lo=*)
-    localstatedir="$ac_optarg" ;;
-
-  -mandir | --mandir | --mandi | --mand | --man | --ma | --m)
-    ac_prev=mandir ;;
-  -mandir=* | --mandir=* | --mandi=* | --mand=* | --man=* | --ma=* | --m=*)
-    mandir="$ac_optarg" ;;
-
-  -nfp | --nfp | --nf)
-    # Obsolete; use --without-fp.
-    with_fp=no ;;
-
-  -no-create | --no-create | --no-creat | --no-crea | --no-cre \
-  | --no-cr | --no-c)
-    no_create=yes ;;
-
-  -no-recursion | --no-recursion | --no-recursio | --no-recursi \
-  | --no-recurs | --no-recur | --no-recu | --no-rec | --no-re | --no-r)
-    no_recursion=yes ;;
-
-  -oldincludedir | --oldincludedir | --oldincludedi | --oldincluded \
-  | --oldinclude | --oldinclud | --oldinclu | --oldincl | --oldinc \
-  | --oldin | --oldi | --old | --ol | --o)
-    ac_prev=oldincludedir ;;
-  -oldincludedir=* | --oldincludedir=* | --oldincludedi=* | --oldincluded=* \
-  | --oldinclude=* | --oldinclud=* | --oldinclu=* | --oldincl=* | --oldinc=* \
-  | --oldin=* | --oldi=* | --old=* | --ol=* | --o=*)
-    oldincludedir="$ac_optarg" ;;
-
-  -prefix | --prefix | --prefi | --pref | --pre | --pr | --p)
-    ac_prev=prefix ;;
-  -prefix=* | --prefix=* | --prefi=* | --pref=* | --pre=* | --pr=* | --p=*)
-    prefix="$ac_optarg" ;;
-
-  -program-prefix | --program-prefix | --program-prefi | --program-pref \
-  | --program-pre | --program-pr | --program-p)
-    ac_prev=program_prefix ;;
-  -program-prefix=* | --program-prefix=* | --program-prefi=* \
-  | --program-pref=* | --program-pre=* | --program-pr=* | --program-p=*)
-    program_prefix="$ac_optarg" ;;
-
-  -program-suffix | --program-suffix | --program-suffi | --program-suff \
-  | --program-suf | --program-su | --program-s)
-    ac_prev=program_suffix ;;
-  -program-suffix=* | --program-suffix=* | --program-suffi=* \
-  | --program-suff=* | --program-suf=* | --program-su=* | --program-s=*)
-    program_suffix="$ac_optarg" ;;
-
-  -program-transform-name | --program-transform-name \
-  | --program-transform-nam | --program-transform-na \
-  | --program-transform-n | --program-transform- \
-  | --program-transform | --program-transfor \
-  | --program-transfo | --program-transf \
-  | --program-trans | --program-tran \
-  | --progr-tra | --program-tr | --program-t)
-    ac_prev=program_transform_name ;;
-  -program-transform-name=* | --program-transform-name=* \
-  | --program-transform-nam=* | --program-transform-na=* \
-  | --program-transform-n=* | --program-transform-=* \
-  | --program-transform=* | --program-transfor=* \
-  | --program-transfo=* | --program-transf=* \
-  | --program-trans=* | --program-tran=* \
-  | --progr-tra=* | --program-tr=* | --program-t=*)
-    program_transform_name="$ac_optarg" ;;
-
-  -q | -quiet | --quiet | --quie | --qui | --qu | --q \
-  | -silent | --silent | --silen | --sile | --sil)
-    silent=yes ;;
-
-  -sbindir | --sbindir | --sbindi | --sbind | --sbin | --sbi | --sb)
-    ac_prev=sbindir ;;
-  -sbindir=* | --sbindir=* | --sbindi=* | --sbind=* | --sbin=* \
-  | --sbi=* | --sb=*)
-    sbindir="$ac_optarg" ;;
-
-  -sharedstatedir | --sharedstatedir | --sharedstatedi \
-  | --sharedstated | --sharedstate | --sharedstat | --sharedsta \
-  | --sharedst | --shareds | --shared | --share | --shar \
-  | --sha | --sh)
-    ac_prev=sharedstatedir ;;
-  -sharedstatedir=* | --sharedstatedir=* | --sharedstatedi=* \
-  | --sharedstated=* | --sharedstate=* | --sharedstat=* | --sharedsta=* \
-  | --sharedst=* | --shareds=* | --shared=* | --share=* | --shar=* \
-  | --sha=* | --sh=*)
-    sharedstatedir="$ac_optarg" ;;
-
-  -site | --site | --sit)
-    ac_prev=site ;;
-  -site=* | --site=* | --sit=*)
-    site="$ac_optarg" ;;
-
-  -srcdir | --srcdir | --srcdi | --srcd | --src | --sr)
-    ac_prev=srcdir ;;
-  -srcdir=* | --srcdir=* | --srcdi=* | --srcd=* | --src=* | --sr=*)
-    srcdir="$ac_optarg" ;;
-
-  -sysconfdir | --sysconfdir | --sysconfdi | --sysconfd | --sysconf \
-  | --syscon | --sysco | --sysc | --sys | --sy)
-    ac_prev=sysconfdir ;;
-  -sysconfdir=* | --sysconfdir=* | --sysconfdi=* | --sysconfd=* | --sysconf=* \
-  | --syscon=* | --sysco=* | --sysc=* | --sys=* | --sy=*)
-    sysconfdir="$ac_optarg" ;;
-
-  -target | --target | --targe | --targ | --tar | --ta | --t)
-    ac_prev=target ;;
-  -target=* | --target=* | --targe=* | --targ=* | --tar=* | --ta=* | --t=*)
-    target="$ac_optarg" ;;
-
-  -v | -verbose | --verbose | --verbos | --verbo | --verb)
-    verbose=yes ;;
-
-  -version | --version | --versio | --versi | --vers)
-    echo "configure generated by autoconf version 2.13"
-    exit 0 ;;
-
-  -with-* | --with-*)
-    ac_package=`echo $ac_option|sed -e 's/-*with-//' -e 's/=.*//'`
-    # Reject names that are not valid shell variable names.
-    if test -n "`echo $ac_package| sed 's/[-_a-zA-Z0-9]//g'`"; then
-      { echo "configure: error: $ac_package: invalid package name" 1>&2; exit 1; }
-    fi
-    ac_package=`echo $ac_package| sed 's/-/_/g'`
-    case "$ac_option" in
-      *=*) ;;
-      *) ac_optarg=yes ;;
-    esac
-    eval "with_${ac_package}='$ac_optarg'" ;;
-
-  -without-* | --without-*)
-    ac_package=`echo $ac_option|sed -e 's/-*without-//'`
-    # Reject names that are not valid shell variable names.
-    if test -n "`echo $ac_package| sed 's/[-a-zA-Z0-9_]//g'`"; then
-      { echo "configure: error: $ac_package: invalid package name" 1>&2; exit 1; }
-    fi
-    ac_package=`echo $ac_package| sed 's/-/_/g'`
-    eval "with_${ac_package}=no" ;;
-
-  --x)
-    # Obsolete; use --with-x.
-    with_x=yes ;;
-
-  -x-includes | --x-includes | --x-include | --x-includ | --x-inclu \
-  | --x-incl | --x-inc | --x-in | --x-i)
-    ac_prev=x_includes ;;
-  -x-includes=* | --x-includes=* | --x-include=* | --x-includ=* | --x-inclu=* \
-  | --x-incl=* | --x-inc=* | --x-in=* | --x-i=*)
-    x_includes="$ac_optarg" ;;
-
-  -x-libraries | --x-libraries | --x-librarie | --x-librari \
-  | --x-librar | --x-libra | --x-libr | --x-lib | --x-li | --x-l)
-    ac_prev=x_libraries ;;
-  -x-libraries=* | --x-libraries=* | --x-librarie=* | --x-librari=* \
-  | --x-librar=* | --x-libra=* | --x-libr=* | --x-lib=* | --x-li=* | --x-l=*)
-    x_libraries="$ac_optarg" ;;
-
-  -*) { echo "configure: error: $ac_option: invalid option; use --help to show usage" 1>&2; exit 1; }
-    ;;
-
-  *)
-    if test -n "`echo $ac_option| sed 's/[-a-z0-9.]//g'`"; then
-      echo "configure: warning: $ac_option: invalid host type" 1>&2
-    fi
-    if test "x$nonopt" != xNONE; then
-      { echo "configure: error: can only configure for one host and one target at a time" 1>&2; exit 1; }
-    fi
-    nonopt="$ac_option"
-    ;;
-
-  esac
-done
-
-if test -n "$ac_prev"; then
-  { echo "configure: error: missing argument to --`echo $ac_prev | sed 's/_/-/g'`" 1>&2; exit 1; }
-fi
-
-trap 'rm -fr conftest* confdefs* core core.* *.core $ac_clean_files; exit 1' 1 2 15
-
-# File descriptor usage:
-# 0 standard input
-# 1 file creation
-# 2 errors and warnings
-# 3 some systems may open it to /dev/tty
-# 4 used on the Kubota Titan
-# 6 checking for... messages and results
-# 5 compiler messages saved in config.log
-if test "$silent" = yes; then
-  exec 6>/dev/null
-else
-  exec 6>&1
-fi
-exec 5>./config.log
-
-echo "\
-This file contains any messages produced by compilers while
-running configure, to aid debugging if configure makes a mistake.
-" 1>&5
-
-# Strip out --no-create and --no-recursion so they do not pile up.
-# Also quote any args containing shell metacharacters.
-ac_configure_args=
-for ac_arg
-do
-  case "$ac_arg" in
-  -no-create | --no-create | --no-creat | --no-crea | --no-cre \
-  | --no-cr | --no-c) ;;
-  -no-recursion | --no-recursion | --no-recursio | --no-recursi \
-  | --no-recurs | --no-recur | --no-recu | --no-rec | --no-re | --no-r) ;;
-  *" "*|*"	"*|*[\[\]\~\#\$\^\&\*\(\)\{\}\\\|\;\<\>\?]*)
-  ac_configure_args="$ac_configure_args '$ac_arg'" ;;
-  *) ac_configure_args="$ac_configure_args $ac_arg" ;;
-  esac
-done
-
-# NLS nuisances.
-# Only set these to C if already set.  These must not be set unconditionally
-# because not all systems understand e.g. LANG=C (notably SCO).
-# Fixing LC_MESSAGES prevents Solaris sh from translating var values in `set'!
-# Non-C LC_CTYPE values break the ctype check.
-if test "${LANG+set}"   = set; then LANG=C;   export LANG;   fi
-if test "${LC_ALL+set}" = set; then LC_ALL=C; export LC_ALL; fi
-if test "${LC_MESSAGES+set}" = set; then LC_MESSAGES=C; export LC_MESSAGES; fi
-if test "${LC_CTYPE+set}"    = set; then LC_CTYPE=C;    export LC_CTYPE;    fi
-
-# confdefs.h avoids OS command line length limits that DEFS can exceed.
-rm -rf conftest* confdefs.h
-# AIX cpp loses on an empty file, so make sure it contains at least a newline.
-echo > confdefs.h
-
-# A filename unique to this package, relative to the directory that
-# configure is in, which we can look for to find out if srcdir is correct.
-ac_unique_file=include/includes.h
-
-# Find the source files, if location was not specified.
-if test -z "$srcdir"; then
-  ac_srcdir_defaulted=yes
-  # Try the directory containing this script, then its parent.
-  ac_prog=$0
-  ac_confdir=`echo $ac_prog|sed 's%/[^/][^/]*$%%'`
-  test "x$ac_confdir" = "x$ac_prog" && ac_confdir=.
-  srcdir=$ac_confdir
-  if test ! -r $srcdir/$ac_unique_file; then
-    srcdir=..
-  fi
-else
-  ac_srcdir_defaulted=no
-fi
-if test ! -r $srcdir/$ac_unique_file; then
-  if test "$ac_srcdir_defaulted" = yes; then
-    { echo "configure: error: can not find sources in $ac_confdir or .." 1>&2; exit 1; }
-  else
-    { echo "configure: error: can not find sources in $srcdir" 1>&2; exit 1; }
-  fi
-fi
-srcdir=`echo "${srcdir}" | sed 's%\([^/]\)/*$%\1%'`
-
-# Prefer explicitly selected file to automatically selected ones.
-if test -z "$CONFIG_SITE"; then
-  if test "x$prefix" != xNONE; then
-    CONFIG_SITE="$prefix/share/config.site $prefix/etc/config.site"
-  else
-    CONFIG_SITE="$ac_default_prefix/share/config.site $ac_default_prefix/etc/config.site"
-  fi
-fi
-for ac_site_file in $CONFIG_SITE; do
-  if test -r "$ac_site_file"; then
-    echo "loading site script $ac_site_file"
-    . "$ac_site_file"
-  fi
-done
-
-if test -r "$cache_file"; then
-  echo "loading cache $cache_file"
-  . $cache_file
-else
-  echo "creating cache $cache_file"
-  > $cache_file
-fi
-
-ac_ext=c
-# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
-ac_cpp='$CPP $CPPFLAGS'
-ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
-ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
-cross_compiling=$ac_cv_prog_cc_cross
-
-ac_exeext=
-ac_objext=o
-if (echo "testing\c"; echo 1,2,3) | grep c >/dev/null; then
-  # Stardent Vistra SVR4 grep lacks -e, says ghazi@caip.rutgers.edu.
-  if (echo -n testing; echo 1,2,3) | sed s/-n/xn/ | grep xn >/dev/null; then
-    ac_n= ac_c='
-' ac_t='	'
-  else
-    ac_n=-n ac_c= ac_t=
-  fi
-else
-  ac_n= ac_c='\c' ac_t=
-fi
-
-
-
-
-#################################################
-# Directory handling stuff to support both the
-# legacy SAMBA directories and FHS compliant
-# ones...
-
-
-# Check whether --with-fhs or --without-fhs was given.
-if test "${with_fhs+set}" = set; then
-  withval="$with_fhs"
-  codepagedir="\$(DATADIR)/samba/codepages"
-    configdir="${sysconfdir}/samba"
-    lockdir="\${VARDIR}/cache/samba"
-    piddir="\$(VARDIR)/run/samba"
-    logfilebase="\${VARDIR}/log/samba"
-    privatedir="\${CONFIGDIR}/private"
-    swatdir="\${DATADIR}/samba/swat"
-else
-  codepagedir="\$(LIBDIR)/codepages"
-    configdir="\$(LIBDIR)"
-    logfilebase="\$(VARDIR)"
-    lockdir="\${VARDIR}/locks"
-    piddir="\$(VARDIR)/locks"
-    privatedir="\${prefix}/private"
-    swatdir="\${prefix}/swat"
-fi
-
-
-#################################################
-# set private directory location
-# Check whether --with-privatedir or --without-privatedir was given.
-if test "${with_privatedir+set}" = set; then
-  withval="$with_privatedir"
-   case "$withval" in
-  yes|no)
-  #
-  # Just in case anybody calls it without argument
-  #
-    echo "configure: warning: --with-privatedir called without argument - will use default" 1>&2
-  ;;
-  * )
-    privatedir="$withval"
-    ;;
-  esac
-fi
-
-
-#################################################
-# set lock directory location
-# Check whether --with-lockdir or --without-lockdir was given.
-if test "${with_lockdir+set}" = set; then
-  withval="$with_lockdir"
-   case "$withval" in
-  yes|no)
-  #
-  # Just in case anybody calls it without argument
-  #
-    echo "configure: warning: --with-lockdir called without argument - will use default" 1>&2
-  ;;
-  * )
-    lockdir="$withval"
-    ;;
-  esac
-fi
-
-
-#################################################
-# set pid directory location
-# Check whether --with-piddir or --without-piddir was given.
-if test "${with_piddir+set}" = set; then
-  withval="$with_piddir"
-   case "$withval" in
-  yes|no)
-  #
-  # Just in case anybody calls it without argument
-  #
-    echo "configure: warning: --with-piddir called without argument - will use default" 1>&2
-  ;;
-  * )
-    piddir="$withval"
-    ;;
-  esac
-fi
-
-
-#################################################
-# set SWAT directory location
-# Check whether --with-swatdir or --without-swatdir was given.
-if test "${with_swatdir+set}" = set; then
-  withval="$with_swatdir"
-   case "$withval" in
-  yes|no)
-  #
-  # Just in case anybody does it
-  #
-    echo "configure: warning: --with-swatdir called without argument - will use default" 1>&2
-  ;;
-  * )
-    swatdir="$withval"
-    ;;
-  esac
-fi
-
-
-#################################################
-# set configuration directory location
-# Check whether --with-configdir or --without-configdir was given.
-if test "${with_configdir+set}" = set; then
-  withval="$with_configdir"
-   case "$withval" in
-  yes|no)
-  #
-  # Just in case anybody does it
-  #
-    echo "configure: warning: --with-configdir called without argument - will use default" 1>&2
-  ;;
-  * )
-    configdir="$withval"
-    ;;
-  esac
-fi
-
-
-#################################################
-# set codepage directory location
-# Check whether --with-codepagedir or --without-codepagedir was given.
-if test "${with_codepagedir+set}" = set; then
-  withval="$with_codepagedir"
-   case "$withval" in
-  yes|no)
-  #
-  # Just in case anybody does it
-  #
-    echo "configure: warning: --with-codepagedir called without argument - will use default" 1>&2
-  ;;
-  * )
-    codepagedir="$withval"
-    ;;
-  esac
-fi
-
-
-#################################################
-# set log directory location
-# Check whether --with-logfilebase or --without-logfilebase was given.
-if test "${with_logfilebase+set}" = set; then
-  withval="$with_logfilebase"
-   case "$withval" in
-  yes|no)
-  #
-  # Just in case anybody does it
-  #
-    echo "configure: warning: --with-logfilebase called without argument - will use default" 1>&2
-  ;;
-  * )
-    logfilebase="$withval"
-    ;;
-  esac
-fi
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
- 
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-# compile with optimization and without debugging by default
-CFLAGS="-O ${CFLAGS}"
-
-# Check whether --enable-debug or --disable-debug was given.
-if test "${enable_debug+set}" = set; then
-  enableval="$enable_debug"
-  if eval "test x$enable_debug = xyes"; then
-	CFLAGS="${CFLAGS} -g"
-    fi
-fi
-
-
-
-
-# Extract the first word of "gcc", so it can be a program name with args.
-set dummy gcc; ac_word=$2
-echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:814: checking for $ac_word" >&5
-if eval "test \"`echo '$''{'ac_cv_prog_CC'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  if test -n "$CC"; then
-  ac_cv_prog_CC="$CC" # Let the user override the test.
-else
-  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
-  ac_dummy="$PATH"
-  for ac_dir in $ac_dummy; do
-    test -z "$ac_dir" && ac_dir=.
-    if test -f $ac_dir/$ac_word; then
-      ac_cv_prog_CC="gcc"
-      break
-    fi
-  done
-  IFS="$ac_save_ifs"
-fi
-fi
-CC="$ac_cv_prog_CC"
-if test -n "$CC"; then
-  echo "$ac_t""$CC" 1>&6
-else
-  echo "$ac_t""no" 1>&6
-fi
-
-if test -z "$CC"; then
-  # Extract the first word of "cc", so it can be a program name with args.
-set dummy cc; ac_word=$2
-echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:844: checking for $ac_word" >&5
-if eval "test \"`echo '$''{'ac_cv_prog_CC'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  if test -n "$CC"; then
-  ac_cv_prog_CC="$CC" # Let the user override the test.
-else
-  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
-  ac_prog_rejected=no
-  ac_dummy="$PATH"
-  for ac_dir in $ac_dummy; do
-    test -z "$ac_dir" && ac_dir=.
-    if test -f $ac_dir/$ac_word; then
-      if test "$ac_dir/$ac_word" = "/usr/ucb/cc"; then
-        ac_prog_rejected=yes
-	continue
-      fi
-      ac_cv_prog_CC="cc"
-      break
-    fi
-  done
-  IFS="$ac_save_ifs"
-if test $ac_prog_rejected = yes; then
-  # We found a bogon in the path, so make sure we never use it.
-  set dummy $ac_cv_prog_CC
-  shift
-  if test $# -gt 0; then
-    # We chose a different compiler from the bogus one.
-    # However, it has the same basename, so the bogon will be chosen
-    # first if we set CC to just the basename; use the full file name.
-    shift
-    set dummy "$ac_dir/$ac_word" "$@"
-    shift
-    ac_cv_prog_CC="$@"
-  fi
-fi
-fi
-fi
-CC="$ac_cv_prog_CC"
-if test -n "$CC"; then
-  echo "$ac_t""$CC" 1>&6
-else
-  echo "$ac_t""no" 1>&6
-fi
-
-  if test -z "$CC"; then
-    case "`uname -s`" in
-    *win32* | *WIN32*)
-      # Extract the first word of "cl", so it can be a program name with args.
-set dummy cl; ac_word=$2
-echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:895: checking for $ac_word" >&5
-if eval "test \"`echo '$''{'ac_cv_prog_CC'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  if test -n "$CC"; then
-  ac_cv_prog_CC="$CC" # Let the user override the test.
-else
-  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
-  ac_dummy="$PATH"
-  for ac_dir in $ac_dummy; do
-    test -z "$ac_dir" && ac_dir=.
-    if test -f $ac_dir/$ac_word; then
-      ac_cv_prog_CC="cl"
-      break
-    fi
-  done
-  IFS="$ac_save_ifs"
-fi
-fi
-CC="$ac_cv_prog_CC"
-if test -n "$CC"; then
-  echo "$ac_t""$CC" 1>&6
-else
-  echo "$ac_t""no" 1>&6
-fi
- ;;
-    esac
-  fi
-  test -z "$CC" && { echo "configure: error: no acceptable cc found in \$PATH" 1>&2; exit 1; }
-fi
-
-echo $ac_n "checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works""... $ac_c" 1>&6
-echo "configure:927: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works" >&5
-
-ac_ext=c
-# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
-ac_cpp='$CPP $CPPFLAGS'
-ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
-ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
-cross_compiling=$ac_cv_prog_cc_cross
-
-cat > conftest.$ac_ext << EOF
-
-#line 938 "configure"
-#include "confdefs.h"
-
-main(){return(0);}
-EOF
-if { (eval echo configure:943: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  ac_cv_prog_cc_works=yes
-  # If we can't run a trivial program, we are probably using a cross compiler.
-  if (./conftest; exit) 2>/dev/null; then
-    ac_cv_prog_cc_cross=no
-  else
-    ac_cv_prog_cc_cross=yes
-  fi
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  ac_cv_prog_cc_works=no
-fi
-rm -fr conftest*
-ac_ext=c
-# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
-ac_cpp='$CPP $CPPFLAGS'
-ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
-ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
-cross_compiling=$ac_cv_prog_cc_cross
-
-echo "$ac_t""$ac_cv_prog_cc_works" 1>&6
-if test $ac_cv_prog_cc_works = no; then
-  { echo "configure: error: installation or configuration problem: C compiler cannot create executables." 1>&2; exit 1; }
-fi
-echo $ac_n "checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler""... $ac_c" 1>&6
-echo "configure:969: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler" >&5
-echo "$ac_t""$ac_cv_prog_cc_cross" 1>&6
-cross_compiling=$ac_cv_prog_cc_cross
-
-echo $ac_n "checking whether we are using GNU C""... $ac_c" 1>&6
-echo "configure:974: checking whether we are using GNU C" >&5
-if eval "test \"`echo '$''{'ac_cv_prog_gcc'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.c <<EOF
-#ifdef __GNUC__
-  yes;
-#endif
-EOF
-if { ac_try='${CC-cc} -E conftest.c'; { (eval echo configure:983: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }; } | egrep yes >/dev/null 2>&1; then
-  ac_cv_prog_gcc=yes
-else
-  ac_cv_prog_gcc=no
-fi
-fi
-
-echo "$ac_t""$ac_cv_prog_gcc" 1>&6
-
-if test $ac_cv_prog_gcc = yes; then
-  GCC=yes
-else
-  GCC=
-fi
-
-ac_test_CFLAGS="${CFLAGS+set}"
-ac_save_CFLAGS="$CFLAGS"
-CFLAGS=
-echo $ac_n "checking whether ${CC-cc} accepts -g""... $ac_c" 1>&6
-echo "configure:1002: checking whether ${CC-cc} accepts -g" >&5
-if eval "test \"`echo '$''{'ac_cv_prog_cc_g'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  echo 'void f(){}' > conftest.c
-if test -z "`${CC-cc} -g -c conftest.c 2>&1`"; then
-  ac_cv_prog_cc_g=yes
-else
-  ac_cv_prog_cc_g=no
-fi
-rm -f conftest*
-
-fi
-
-echo "$ac_t""$ac_cv_prog_cc_g" 1>&6
-if test "$ac_test_CFLAGS" = set; then
-  CFLAGS="$ac_save_CFLAGS"
-elif test $ac_cv_prog_cc_g = yes; then
-  if test "$GCC" = yes; then
-    CFLAGS="-g -O2"
-  else
-    CFLAGS="-g"
-  fi
-else
-  if test "$GCC" = yes; then
-    CFLAGS="-O2"
-  else
-    CFLAGS=
-  fi
-fi
-
-ac_aux_dir=
-for ac_dir in $srcdir $srcdir/.. $srcdir/../..; do
-  if test -f $ac_dir/install-sh; then
-    ac_aux_dir=$ac_dir
-    ac_install_sh="$ac_aux_dir/install-sh -c"
-    break
-  elif test -f $ac_dir/install.sh; then
-    ac_aux_dir=$ac_dir
-    ac_install_sh="$ac_aux_dir/install.sh -c"
-    break
-  fi
-done
-if test -z "$ac_aux_dir"; then
-  { echo "configure: error: can not find install-sh or install.sh in $srcdir $srcdir/.. $srcdir/../.." 1>&2; exit 1; }
-fi
-ac_config_guess=$ac_aux_dir/config.guess
-ac_config_sub=$ac_aux_dir/config.sub
-ac_configure=$ac_aux_dir/configure # This should be Cygnus configure.
-
-# Find a good install program.  We prefer a C program (faster),
-# so one script is as good as another.  But avoid the broken or
-# incompatible versions:
-# SysV /etc/install, /usr/sbin/install
-# SunOS /usr/etc/install
-# IRIX /sbin/install
-# AIX /bin/install
-# AIX 4 /usr/bin/installbsd, which doesn't work without a -g flag
-# AFS /usr/afsws/bin/install, which mishandles nonexistent args
-# SVR4 /usr/ucb/install, which tries to use the nonexistent group "staff"
-# ./install, which can be erroneously created by make from ./install.sh.
-echo $ac_n "checking for a BSD compatible install""... $ac_c" 1>&6
-echo "configure:1064: checking for a BSD compatible install" >&5
-if test -z "$INSTALL"; then
-if eval "test \"`echo '$''{'ac_cv_path_install'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-    IFS="${IFS= 	}"; ac_save_IFS="$IFS"; IFS=":"
-  for ac_dir in $PATH; do
-    # Account for people who put trailing slashes in PATH elements.
-    case "$ac_dir/" in
-    /|./|.//|/etc/*|/usr/sbin/*|/usr/etc/*|/sbin/*|/usr/afsws/bin/*|/usr/ucb/*) ;;
-    *)
-      # OSF1 and SCO ODT 3.0 have their own names for install.
-      # Don't use installbsd from OSF since it installs stuff as root
-      # by default.
-      for ac_prog in ginstall scoinst install; do
-        if test -f $ac_dir/$ac_prog; then
-	  if test $ac_prog = install &&
-            grep dspmsg $ac_dir/$ac_prog >/dev/null 2>&1; then
-	    # AIX install.  It has an incompatible calling convention.
-	    :
-	  else
-	    ac_cv_path_install="$ac_dir/$ac_prog -c"
-	    break 2
-	  fi
-	fi
-      done
-      ;;
-    esac
-  done
-  IFS="$ac_save_IFS"
-
-fi
-  if test "${ac_cv_path_install+set}" = set; then
-    INSTALL="$ac_cv_path_install"
-  else
-    # As a last resort, use the slow shell script.  We don't cache a
-    # path for INSTALL within a source directory, because that will
-    # break other packages using the cache if that directory is
-    # removed, or if the path is relative.
-    INSTALL="$ac_install_sh"
-  fi
-fi
-echo "$ac_t""$INSTALL" 1>&6
-
-# Use test -z because SunOS4 sh mishandles braces in ${var-val}.
-# It thinks the first close brace ends the variable substitution.
-test -z "$INSTALL_PROGRAM" && INSTALL_PROGRAM='${INSTALL}'
-
-test -z "$INSTALL_SCRIPT" && INSTALL_SCRIPT='${INSTALL_PROGRAM}'
-
-test -z "$INSTALL_DATA" && INSTALL_DATA='${INSTALL} -m 644'
-
-for ac_prog in gawk mawk nawk awk
-do
-# Extract the first word of "$ac_prog", so it can be a program name with args.
-set dummy $ac_prog; ac_word=$2
-echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:1121: checking for $ac_word" >&5
-if eval "test \"`echo '$''{'ac_cv_prog_AWK'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  if test -n "$AWK"; then
-  ac_cv_prog_AWK="$AWK" # Let the user override the test.
-else
-  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
-  ac_dummy="$PATH"
-  for ac_dir in $ac_dummy; do
-    test -z "$ac_dir" && ac_dir=.
-    if test -f $ac_dir/$ac_word; then
-      ac_cv_prog_AWK="$ac_prog"
-      break
-    fi
-  done
-  IFS="$ac_save_ifs"
-fi
-fi
-AWK="$ac_cv_prog_AWK"
-if test -n "$AWK"; then
-  echo "$ac_t""$AWK" 1>&6
-else
-  echo "$ac_t""no" 1>&6
-fi
-
-test -n "$AWK" && break
-done
-
-LD=ld
-echo $ac_n "checking if the linker ($LD) is GNU ld""... $ac_c" 1>&6
-echo "configure:1152: checking if the linker ($LD) is GNU ld" >&5
-if eval "test \"`echo '$''{'ac_cv_prog_gnu_ld'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  # I'd rather use --version here, but apparently some GNU ld's only accept -v.
-if $LD -v 2>&1 </dev/null | egrep '(GNU|with BFD)' 1>&5; then
-  ac_cv_prog_gnu_ld=yes
-else
-  ac_cv_prog_gnu_ld=no
-fi
-fi
-
-echo "$ac_t""$ac_cv_prog_gnu_ld" 1>&6
-
-# Extract the first word of "passwd", so it can be a program name with args.
-set dummy passwd; ac_word=$2
-echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:1169: checking for $ac_word" >&5
-if eval "test \"`echo '$''{'ac_cv_path_passwd_program'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  case "$passwd_program" in
-  /*)
-  ac_cv_path_passwd_program="$passwd_program" # Let the user override the test with a path.
-  ;;
-  ?:/*)			 
-  ac_cv_path_passwd_program="$passwd_program" # Let the user override the test with a dos path.
-  ;;
-  *)
-  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
-  ac_dummy="$PATH"
-  for ac_dir in $ac_dummy; do 
-    test -z "$ac_dir" && ac_dir=.
-    if test -f $ac_dir/$ac_word; then
-      ac_cv_path_passwd_program="$ac_dir/$ac_word"
-      break
-    fi
-  done
-  IFS="$ac_save_ifs"
-  test -z "$ac_cv_path_passwd_program" && ac_cv_path_passwd_program="/bin/passwd"
-  ;;
-esac
-fi
-passwd_program="$ac_cv_path_passwd_program"
-if test -n "$passwd_program"; then
-  echo "$ac_t""$passwd_program" 1>&6
-else
-  echo "$ac_t""no" 1>&6
-fi
-
-
-
-if test "x$CC" != xcc; then
-  echo $ac_n "checking whether $CC and cc understand -c and -o together""... $ac_c" 1>&6
-echo "configure:1206: checking whether $CC and cc understand -c and -o together" >&5
-else
-  echo $ac_n "checking whether cc understands -c and -o together""... $ac_c" 1>&6
-echo "configure:1209: checking whether cc understands -c and -o together" >&5
-fi
-set dummy $CC; ac_cc="`echo $2 |
-		       sed -e 's/[^a-zA-Z0-9_]/_/g' -e 's/^[0-9]/_/'`"
-if eval "test \"`echo '$''{'ac_cv_prog_cc_${ac_cc}_c_o'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  echo 'foo(){}' > conftest.c
-# Make sure it works both with $CC and with simple cc.
-# We do the test twice because some compilers refuse to overwrite an
-# existing .o file with -o, though they will create one.
-ac_try='${CC-cc} -c conftest.c -o conftest.o 1>&5'
-if { (eval echo configure:1221: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; } &&
-   test -f conftest.o && { (eval echo configure:1222: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; };
-then
-  eval ac_cv_prog_cc_${ac_cc}_c_o=yes
-  if test "x$CC" != xcc; then
-    # Test first that cc exists at all.
-    if { ac_try='cc -c conftest.c 1>&5'; { (eval echo configure:1227: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }; }; then
-      ac_try='cc -c conftest.c -o conftest.o 1>&5'
-      if { (eval echo configure:1229: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; } &&
-	 test -f conftest.o && { (eval echo configure:1230: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; };
-      then
-        # cc works too.
-        :
-      else
-        # cc exists but doesn't like -o.
-        eval ac_cv_prog_cc_${ac_cc}_c_o=no
-      fi
-    fi
-  fi
-else
-  eval ac_cv_prog_cc_${ac_cc}_c_o=no
-fi
-rm -f conftest*
-
-fi
-if eval "test \"`echo '$ac_cv_prog_cc_'${ac_cc}_c_o`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-else
-  echo "$ac_t""no" 1>&6
-  cat >> confdefs.h <<\EOF
-#define NO_MINUS_C_MINUS_O 1
-EOF
-
-fi
-
-if eval "test \"`echo '$ac_cv_prog_cc_'${ac_cc}_c_o`\" = no"; then
-      BROKEN_CC=
-else
-      BROKEN_CC=#
-fi
-
-
-echo $ac_n "checking that the C compiler understands volatile""... $ac_c" 1>&6
-echo "configure:1264: checking that the C compiler understands volatile" >&5
-if eval "test \"`echo '$''{'samba_cv_volatile'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-    cat > conftest.$ac_ext <<EOF
-#line 1270 "configure"
-#include "confdefs.h"
-#include <sys/types.h>
-int main() {
-volatile int i = 0
-; return 0; }
-EOF
-if { (eval echo configure:1277: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-  rm -rf conftest*
-  samba_cv_volatile=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  samba_cv_volatile=no
-fi
-rm -f conftest*
-fi
-
-echo "$ac_t""$samba_cv_volatile" 1>&6
-if test x"$samba_cv_volatile" = x"yes"; then
-   cat >> confdefs.h <<\EOF
-#define HAVE_VOLATILE 1
-EOF
-
-fi
-
-
-
-
-# Do some error checking and defaulting for the host and target type.
-# The inputs are:
-#    configure --host=HOST --target=TARGET --build=BUILD NONOPT
-#
-# The rules are:
-# 1. You are not allowed to specify --host, --target, and nonopt at the
-#    same time.
-# 2. Host defaults to nonopt.
-# 3. If nonopt is not specified, then host defaults to the current host,
-#    as determined by config.guess.
-# 4. Target and build default to nonopt.
-# 5. If nonopt is not specified, then target and build default to host.
-
-# The aliases save the names the user supplied, while $host etc.
-# will get canonicalized.
-case $host---$target---$nonopt in
-NONE---*---* | *---NONE---* | *---*---NONE) ;;
-*) { echo "configure: error: can only configure for one host and one target at a time" 1>&2; exit 1; } ;;
-esac
-
-
-# Make sure we can run config.sub.
-if ${CONFIG_SHELL-/bin/sh} $ac_config_sub sun4 >/dev/null 2>&1; then :
-else { echo "configure: error: can not run $ac_config_sub" 1>&2; exit 1; }
-fi
-
-echo $ac_n "checking host system type""... $ac_c" 1>&6
-echo "configure:1327: checking host system type" >&5
-
-host_alias=$host
-case "$host_alias" in
-NONE)
-  case $nonopt in
-  NONE)
-    if host_alias=`${CONFIG_SHELL-/bin/sh} $ac_config_guess`; then :
-    else { echo "configure: error: can not guess host type; you must specify one" 1>&2; exit 1; }
-    fi ;;
-  *) host_alias=$nonopt ;;
-  esac ;;
-esac
-
-host=`${CONFIG_SHELL-/bin/sh} $ac_config_sub $host_alias`
-host_cpu=`echo $host | sed 's/^\([^-]*\)-\([^-]*\)-\(.*\)$/\1/'`
-host_vendor=`echo $host | sed 's/^\([^-]*\)-\([^-]*\)-\(.*\)$/\2/'`
-host_os=`echo $host | sed 's/^\([^-]*\)-\([^-]*\)-\(.*\)$/\3/'`
-echo "$ac_t""$host" 1>&6
-
-echo $ac_n "checking target system type""... $ac_c" 1>&6
-echo "configure:1348: checking target system type" >&5
-
-target_alias=$target
-case "$target_alias" in
-NONE)
-  case $nonopt in
-  NONE) target_alias=$host_alias ;;
-  *) target_alias=$nonopt ;;
-  esac ;;
-esac
-
-target=`${CONFIG_SHELL-/bin/sh} $ac_config_sub $target_alias`
-target_cpu=`echo $target | sed 's/^\([^-]*\)-\([^-]*\)-\(.*\)$/\1/'`
-target_vendor=`echo $target | sed 's/^\([^-]*\)-\([^-]*\)-\(.*\)$/\2/'`
-target_os=`echo $target | sed 's/^\([^-]*\)-\([^-]*\)-\(.*\)$/\3/'`
-echo "$ac_t""$target" 1>&6
-
-echo $ac_n "checking build system type""... $ac_c" 1>&6
-echo "configure:1366: checking build system type" >&5
-
-build_alias=$build
-case "$build_alias" in
-NONE)
-  case $nonopt in
-  NONE) build_alias=$host_alias ;;
-  *) build_alias=$nonopt ;;
-  esac ;;
-esac
-
-build=`${CONFIG_SHELL-/bin/sh} $ac_config_sub $build_alias`
-build_cpu=`echo $build | sed 's/^\([^-]*\)-\([^-]*\)-\(.*\)$/\1/'`
-build_vendor=`echo $build | sed 's/^\([^-]*\)-\([^-]*\)-\(.*\)$/\2/'`
-build_os=`echo $build | sed 's/^\([^-]*\)-\([^-]*\)-\(.*\)$/\3/'`
-echo "$ac_t""$build" 1>&6
-
-test "$host_alias" != "$target_alias" &&
-  test "$program_prefix$program_suffix$program_transform_name" = \
-    NONENONEs,x,x, &&
-  program_prefix=${target_alias}-
-
-
-  case "$host_os" in
-	*irix6*) cat >> confdefs.h <<\EOF
-#include <standards.h>
-EOF
-
-	;;
-esac
-
-
-    
-    echo $ac_n "checking config.cache system type""... $ac_c" 1>&6
-echo "configure:1400: checking config.cache system type" >&5
-    if { test x"${ac_cv_host_system_type+set}" = x"set" &&
-         test x"$ac_cv_host_system_type" != x"$host"; } ||
-       { test x"${ac_cv_build_system_type+set}" = x"set" &&
-         test x"$ac_cv_build_system_type" != x"$build"; } ||
-       { test x"${ac_cv_target_system_type+set}" = x"set" &&
-         test x"$ac_cv_target_system_type" != x"$target"; }; then
-	echo "$ac_t""different" 1>&6
-	{ echo "configure: error: "you must remove config.cache and restart configure"" 1>&2; exit 1; }
-    else
-	echo "$ac_t""same" 1>&6
-    fi
-    ac_cv_host_system_type="$host"
-    ac_cv_build_system_type="$build"
-    ac_cv_target_system_type="$target"
-
-
-DYNEXP=
-
-#
-# Config CPPFLAG settings for strange OS's that must be set
-# before other tests.
-#
-case "$host_os" in
-# Try to work out if this is the native HPUX compiler that uses the -Ae flag.
-    *hpux*)
-      echo $ac_n "checking whether ${CC-cc} accepts -Ae""... $ac_c" 1>&6
-echo "configure:1427: checking whether ${CC-cc} accepts -Ae" >&5
-if eval "test \"`echo '$''{'ac_cv_prog_cc_Ae'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  echo 'void f(){}' > conftest.c
-if test -z "`${CC-cc} -Ae -c conftest.c 2>&1`"; then
-  ac_cv_prog_cc_Ae=yes
-else
-  ac_cv_prog_cc_Ae=no
-fi
-rm -f conftest*
-
-fi
-
-echo "$ac_t""$ac_cv_prog_cc_Ae" 1>&6
-      # mmap on HPUX is completely broken...
-      cat >> confdefs.h <<\EOF
-#define MMAP_BLACKLIST 1
-EOF
-
-      if test $ac_cv_prog_cc_Ae = yes; then
-        CPPFLAGS="$CPPFLAGS -Ae"
-      fi
-#
-# Defines needed for HPUX support.
-# HPUX has bigcrypt but (sometimes?) doesn't use it for
-# password hashing - hence the USE_BOTH_CRYPT_CALLS define.
-#
-      case `uname -r` in
-			*9*|*10*)
-				CPPFLAGS="$CPPFLAGS -D_HPUX_SOURCE -D_POSIX_SOURCE -D_ALIGNMENT_REQUIRED=1 -D_MAX_ALIGNMENT=4 -DMAX_POSITIVE_LOCK_OFFSET=0x1ffffffffffLL"
-		   		cat >> confdefs.h <<\EOF
-#define USE_BOTH_CRYPT_CALLS 1
-EOF
-
-				cat >> confdefs.h <<\EOF
-#define _HPUX_SOURCE 1
-EOF
-
-				cat >> confdefs.h <<\EOF
-#define _POSIX_SOURCE 1
-EOF
-
-				cat >> confdefs.h <<\EOF
-#define _ALIGNMENT_REQUIRED 1
-EOF
-
-				cat >> confdefs.h <<\EOF
-#define _MAX_ALIGNMENT 4
-EOF
-
-				;;
-			*11*)
-				CPPFLAGS="$CPPFLAGS -D_HPUX_SOURCE -D_POSIX_SOURCE -D_LARGEFILE64_SOURCE -D_ALIGNMENT_REQUIRED=1 -D_MAX_ALIGNMENT=4 -DMAX_POSITIVE_LOCK_OFFSET=0x1ffffffffffLL"
-				cat >> confdefs.h <<\EOF
-#define _HPUX_SOURCE 1
-EOF
-
-				cat >> confdefs.h <<\EOF
-#define _POSIX_SOURCE 1
-EOF
-
-				cat >> confdefs.h <<\EOF
-#define _LARGEFILE64_SOURCE 1
-EOF
-
-				cat >> confdefs.h <<\EOF
-#define _ALIGNMENT_REQUIRED 1
-EOF
-
-				cat >> confdefs.h <<\EOF
-#define _MAX_ALIGNMENT 4
-EOF
-
-		   		cat >> confdefs.h <<\EOF
-#define USE_BOTH_CRYPT_CALLS 1
-EOF
-
-				;;
-      esac
-      DYNEXP="-Wl,-E"
-      ;;
-
-
-#
-# CRAY Unicos has broken const handling
-	*unicos*)
-		echo "$ac_t""disabling const" 1>&6
-		CPPFLAGS="$CPPFLAGS -Dconst="
-		;;
-
-#
-# AIX4.x doesn't even admit to having large
-# files *at all* unless the -D_LARGE_FILE or -D_LARGE_FILE_API flags are set.
-#
-    *aix4*)
-	  echo "$ac_t""enabling large file support" 1>&6
-      CPPFLAGS="$CPPFLAGS -D_LARGE_FILES"
-      cat >> confdefs.h <<\EOF
-#define _LARGE_FILES 1
-EOF
-
-      ;;    
-#
-# Defines needed for Solaris 2.6/2.7 aka 7.0 to make it admit
-# to the existance of large files..
-# Note that -D_LARGEFILE64_SOURCE is different from the Sun
-# recommendations on large file support, however it makes the
-# compile work using gcc 2.7 and 2.8, whereas using the Sun
-# recommendation makes the compile fail on gcc2.7. JRA.
-#
-	*solaris*)
-		case `uname -r` in
-			5.0*|5.1*|5.2*|5.3*|5.5*)
-	  			echo "$ac_t""no large file support" 1>&6
-				;;
-			5.*)
-			echo "$ac_t""enabling large file support" 1>&6
-			if test "$ac_cv_prog_gcc" = yes; then
-				${CC-cc} -v >conftest.c 2>&1
-				ac_cv_gcc_compiler_version_number=`grep 'gcc version' conftest.c`
-				rm -fr conftest.c
-				case "$ac_cv_gcc_compiler_version_number" in
-					*"gcc version 2.6"*|*"gcc version 2.7"*)
-						CPPFLAGS="$CPPFLAGS -D_LARGEFILE64_SOURCE"
-						cat >> confdefs.h <<\EOF
-#define _LARGEFILE64_SOURCE 1
-EOF
-
-						;;
-					*)
-						CPPFLAGS="$CPPFLAGS -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64"
-						cat >> confdefs.h <<\EOF
-#define _LARGEFILE64_SOURCE 1
-EOF
-
-						cat >> confdefs.h <<\EOF
-#define _FILE_OFFSET_BITS 64
-EOF
-
-						;;
-				esac
-			else
-				CPPFLAGS="$CPPFLAGS -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64"
-				cat >> confdefs.h <<\EOF
-#define _LARGEFILE64_SOURCE 1
-EOF
-
-				cat >> confdefs.h <<\EOF
-#define _FILE_OFFSET_BITS 64
-EOF
-
-			fi
-			;;
-		esac
-		;;
-#
-# VOS may need to have POSIX support and System V compatibility enabled.
-#
-    *vos*)
-    case "$CPPFLAGS" in
-	  *-D_POSIX_C_SOURCE*)
-		;;
-	  *)
-		CPPFLAGS="$CPPFLAGS -D_POSIX_C_SOURCE=199506L"
-		cat >> confdefs.h <<\EOF
-#define _POSIX_C_SOURCE 199506L
-EOF
-
-		;;
-    esac
-    case "$CPPFLAGS" in
-	  *-D_SYSV*|*-D_SVID_SOURCE*)
-		;;
-	  *)
-		CPPFLAGS="$CPPFLAGS -D_SYSV"
-		cat >> confdefs.h <<\EOF
-#define _SYSV 1
-EOF
-
-    esac
-    ;;
-#
-# Tests needed for SINIX large file support.
-#
-    *sysv4*)
-      if test $host = mips-sni-sysv4 ; then
-        echo $ac_n "checking for LFS support""... $ac_c" 1>&6
-echo "configure:1615: checking for LFS support" >&5
-        old_CPPFLAGS="$CPPFLAGS"
-        CPPFLAGS="-D_LARGEFILE64_SOURCE $CPPFLAGS"
-        if test "$cross_compiling" = yes; then
-  SINIX_LFS_SUPPORT=cross
-else
-  cat > conftest.$ac_ext <<EOF
-#line 1622 "configure"
-#include "confdefs.h"
-
-#include <unistd.h>
-main () {
-#if _LFS64_LARGEFILE == 1
-exit(0);
-#else
-exit(1);
-#endif
-}
-EOF
-if { (eval echo configure:1634: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  SINIX_LFS_SUPPORT=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  SINIX_LFS_SUPPORT=no
-fi
-rm -fr conftest*
-fi
-
-        CPPFLAGS="$old_CPPFLAGS"
-        if test x$SINIX_LFS_SUPPORT = xyes ; then
-          CPPFLAGS="-D_LARGEFILE64_SOURCE $CPPFLAGS"
-          cat >> confdefs.h <<\EOF
-#define _LARGEFILE64_SOURCE 1
-EOF
-
-          CFLAGS="`getconf LFS64_CFLAGS` $CFLAGS"
-          LDFLAGS="`getconf LFS64_LDFLAGS` $LDFLAGS"
-          LIBS="`getconf LFS64_LIBS` $LIBS"
-        fi
-      echo "$ac_t""$SINIX_LFS_SUPPORT" 1>&6
-      fi
-    ;;
-
-# Tests for linux LFS support. Need kernel 2.4 and glibc2.2 or greater support.
-#
-    *linux*)
-        echo $ac_n "checking for LFS support""... $ac_c" 1>&6
-echo "configure:1665: checking for LFS support" >&5
-        old_CPPFLAGS="$CPPFLAGS"
-        CPPFLAGS="-D_LARGEFILE64_SOURCE -D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE $CPPFLAGS"
-       if test "$cross_compiling" = yes; then
-  LINUX_LFS_SUPPORT=cross
-else
-  cat > conftest.$ac_ext <<EOF
-#line 1672 "configure"
-#include "confdefs.h"
-
-#include <unistd.h>
-#include <sys/utsname.h>
-main() {
-#if _LFS64_LARGEFILE == 1
-       struct utsname uts;
-       char *release;
-       int major, minor;
-
-       /* Ensure this is glibc 2.2 or higher */
-#if defined(__GLIBC__) && defined(__GLIBC_MINOR__)
-       int libc_major = __GLIBC__;
-       int libc_minor = __GLIBC_MINOR__;
-
-       if (libc_major < 2)
-              exit(1);
-       if (libc_minor < 2)
-              exit(1);
-#endif
-
-       /* Ensure this is kernel 2.4 or higher */
-
-       uname(&uts);
-       release = uts.release;
-       major = atoi(strsep(&release, "."));
-       minor = atoi(strsep(&release, "."));
-
-       if (major > 2 || (major == 2 && minor > 3))
-               exit(0);
-       exit(1);
-#else
-       exit(1);
-#endif
-}
-
-EOF
-if { (eval echo configure:1710: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  LINUX_LFS_SUPPORT=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  LINUX_LFS_SUPPORT=no
-fi
-rm -fr conftest*
-fi
-
-        CPPFLAGS="$old_CPPFLAGS"
-        if test x$LINUX_LFS_SUPPORT = xyes ; then
-          CPPFLAGS="-D_LARGEFILE64_SOURCE -D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE $CPPFLAGS"
-          cat >> confdefs.h <<\EOF
-#define _LARGEFILE64_SOURCE 1
-EOF
-
-          cat >> confdefs.h <<\EOF
-#define _FILE_OFFSET_BITS 64
-EOF
-
-          cat >> confdefs.h <<\EOF
-#define _GNU_SOURCE 1
-EOF
-
-        fi
-       echo "$ac_t""$LINUX_LFS_SUPPORT" 1>&6
-		;;
-
-    *hurd*)
-        echo $ac_n "checking for LFS support""... $ac_c" 1>&6
-echo "configure:1743: checking for LFS support" >&5
-        old_CPPFLAGS="$CPPFLAGS"
-        CPPFLAGS="-D_LARGEFILE64_SOURCE -D_GNU_SOURCE $CPPFLAGS"
-        if test "$cross_compiling" = yes; then
-  GLIBC_LFS_SUPPORT=cross
-else
-  cat > conftest.$ac_ext <<EOF
-#line 1750 "configure"
-#include "confdefs.h"
-
-#include <unistd.h>
-main () {
-#if _LFS64_LARGEFILE == 1
-exit(0);
-#else
-exit(1);
-#endif
-}
-EOF
-if { (eval echo configure:1762: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  GLIBC_LFS_SUPPORT=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  GLIBC_LFS_SUPPORT=no
-fi
-rm -fr conftest*
-fi
-
-        CPPFLAGS="$old_CPPFLAGS"
-        if test x$GLIBC_LFS_SUPPORT = xyes ; then
-          CPPFLAGS="-D_LARGEFILE64_SOURCE -D_GNU_SOURCE $CPPFLAGS"
-          cat >> confdefs.h <<\EOF
-#define _LARGEFILE64_SOURCE 1
-EOF
-
-          cat >> confdefs.h <<\EOF
-#define _GNU_SOURCE 1
-EOF
-
-        fi
-      echo "$ac_t""$GLIBC_LFS_SUPPORT" 1>&6
-    ;;
-
-esac
-
-echo $ac_n "checking for inline""... $ac_c" 1>&6
-echo "configure:1792: checking for inline" >&5
-if eval "test \"`echo '$''{'ac_cv_c_inline'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_cv_c_inline=no
-for ac_kw in inline __inline__ __inline; do
-  cat > conftest.$ac_ext <<EOF
-#line 1799 "configure"
-#include "confdefs.h"
-
-int main() {
-} $ac_kw foo() {
-; return 0; }
-EOF
-if { (eval echo configure:1806: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-  rm -rf conftest*
-  ac_cv_c_inline=$ac_kw; break
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-fi
-rm -f conftest*
-done
-
-fi
-
-echo "$ac_t""$ac_cv_c_inline" 1>&6
-case "$ac_cv_c_inline" in
-  inline | yes) ;;
-  no) cat >> confdefs.h <<\EOF
-#define inline 
-EOF
- ;;
-  *)  cat >> confdefs.h <<EOF
-#define inline $ac_cv_c_inline
-EOF
- ;;
-esac
-
-echo $ac_n "checking how to run the C preprocessor""... $ac_c" 1>&6
-echo "configure:1832: checking how to run the C preprocessor" >&5
-# On Suns, sometimes $CPP names a directory.
-if test -n "$CPP" && test -d "$CPP"; then
-  CPP=
-fi
-if test -z "$CPP"; then
-if eval "test \"`echo '$''{'ac_cv_prog_CPP'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-    # This must be in double quotes, not single quotes, because CPP may get
-  # substituted into the Makefile and "${CC-cc}" will confuse make.
-  CPP="${CC-cc} -E"
-  # On the NeXT, cc -E runs the code through the compiler's parser,
-  # not just through cpp.
-  cat > conftest.$ac_ext <<EOF
-#line 1847 "configure"
-#include "confdefs.h"
-#include <assert.h>
-Syntax Error
-EOF
-ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:1853: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
-ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
-if test -z "$ac_err"; then
-  :
-else
-  echo "$ac_err" >&5
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  CPP="${CC-cc} -E -traditional-cpp"
-  cat > conftest.$ac_ext <<EOF
-#line 1864 "configure"
-#include "confdefs.h"
-#include <assert.h>
-Syntax Error
-EOF
-ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:1870: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
-ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
-if test -z "$ac_err"; then
-  :
-else
-  echo "$ac_err" >&5
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  CPP="${CC-cc} -nologo -E"
-  cat > conftest.$ac_ext <<EOF
-#line 1881 "configure"
-#include "confdefs.h"
-#include <assert.h>
-Syntax Error
-EOF
-ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:1887: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
-ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
-if test -z "$ac_err"; then
-  :
-else
-  echo "$ac_err" >&5
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  CPP=/lib/cpp
-fi
-rm -f conftest*
-fi
-rm -f conftest*
-fi
-rm -f conftest*
-  ac_cv_prog_CPP="$CPP"
-fi
-  CPP="$ac_cv_prog_CPP"
-else
-  ac_cv_prog_CPP="$CPP"
-fi
-echo "$ac_t""$CPP" 1>&6
-
-echo $ac_n "checking for ANSI C header files""... $ac_c" 1>&6
-echo "configure:1912: checking for ANSI C header files" >&5
-if eval "test \"`echo '$''{'ac_cv_header_stdc'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 1917 "configure"
-#include "confdefs.h"
-#include <stdlib.h>
-#include <stdarg.h>
-#include <string.h>
-#include <float.h>
-EOF
-ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:1925: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
-ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
-if test -z "$ac_err"; then
-  rm -rf conftest*
-  ac_cv_header_stdc=yes
-else
-  echo "$ac_err" >&5
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  ac_cv_header_stdc=no
-fi
-rm -f conftest*
-
-if test $ac_cv_header_stdc = yes; then
-  # SunOS 4.x string.h does not declare mem*, contrary to ANSI.
-cat > conftest.$ac_ext <<EOF
-#line 1942 "configure"
-#include "confdefs.h"
-#include <string.h>
-EOF
-if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
-  egrep "memchr" >/dev/null 2>&1; then
-  :
-else
-  rm -rf conftest*
-  ac_cv_header_stdc=no
-fi
-rm -f conftest*
-
-fi
-
-if test $ac_cv_header_stdc = yes; then
-  # ISC 2.0.2 stdlib.h does not declare free, contrary to ANSI.
-cat > conftest.$ac_ext <<EOF
-#line 1960 "configure"
-#include "confdefs.h"
-#include <stdlib.h>
-EOF
-if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
-  egrep "free" >/dev/null 2>&1; then
-  :
-else
-  rm -rf conftest*
-  ac_cv_header_stdc=no
-fi
-rm -f conftest*
-
-fi
-
-if test $ac_cv_header_stdc = yes; then
-  # /bin/cc in Irix-4.0.5 gets non-ANSI ctype macros unless using -ansi.
-if test "$cross_compiling" = yes; then
-  :
-else
-  cat > conftest.$ac_ext <<EOF
-#line 1981 "configure"
-#include "confdefs.h"
-#include <ctype.h>
-#define ISLOWER(c) ('a' <= (c) && (c) <= 'z')
-#define TOUPPER(c) (ISLOWER(c) ? 'A' + ((c) - 'a') : (c))
-#define XOR(e, f) (((e) && !(f)) || (!(e) && (f)))
-int main () { int i; for (i = 0; i < 256; i++)
-if (XOR (islower (i), ISLOWER (i)) || toupper (i) != TOUPPER (i)) exit(2);
-exit (0); }
-
-EOF
-if { (eval echo configure:1992: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  :
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  ac_cv_header_stdc=no
-fi
-rm -fr conftest*
-fi
-
-fi
-fi
-
-echo "$ac_t""$ac_cv_header_stdc" 1>&6
-if test $ac_cv_header_stdc = yes; then
-  cat >> confdefs.h <<\EOF
-#define STDC_HEADERS 1
-EOF
-
-fi
-
-ac_header_dirent=no
-for ac_hdr in dirent.h sys/ndir.h sys/dir.h ndir.h
-do
-ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
-echo $ac_n "checking for $ac_hdr that defines DIR""... $ac_c" 1>&6
-echo "configure:2020: checking for $ac_hdr that defines DIR" >&5
-if eval "test \"`echo '$''{'ac_cv_header_dirent_$ac_safe'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 2025 "configure"
-#include "confdefs.h"
-#include <sys/types.h>
-#include <$ac_hdr>
-int main() {
-DIR *dirp = 0;
-; return 0; }
-EOF
-if { (eval echo configure:2033: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-  rm -rf conftest*
-  eval "ac_cv_header_dirent_$ac_safe=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_header_dirent_$ac_safe=no"
-fi
-rm -f conftest*
-fi
-if eval "test \"`echo '$ac_cv_header_dirent_'$ac_safe`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_hdr 1
-EOF
- ac_header_dirent=$ac_hdr; break
-else
-  echo "$ac_t""no" 1>&6
-fi
-done
-# Two versions of opendir et al. are in -ldir and -lx on SCO Xenix.
-if test $ac_header_dirent = dirent.h; then
-echo $ac_n "checking for opendir in -ldir""... $ac_c" 1>&6
-echo "configure:2058: checking for opendir in -ldir" >&5
-ac_lib_var=`echo dir'_'opendir | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-ldir  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 2066 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char opendir();
-
-int main() {
-opendir()
-; return 0; }
-EOF
-if { (eval echo configure:2077: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
-
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  LIBS="$LIBS -ldir"
-else
-  echo "$ac_t""no" 1>&6
-fi
-
-else
-echo $ac_n "checking for opendir in -lx""... $ac_c" 1>&6
-echo "configure:2099: checking for opendir in -lx" >&5
-ac_lib_var=`echo x'_'opendir | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lx  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 2107 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char opendir();
-
-int main() {
-opendir()
-; return 0; }
-EOF
-if { (eval echo configure:2118: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
-
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  LIBS="$LIBS -lx"
-else
-  echo "$ac_t""no" 1>&6
-fi
-
-fi
-
-echo $ac_n "checking whether time.h and sys/time.h may both be included""... $ac_c" 1>&6
-echo "configure:2141: checking whether time.h and sys/time.h may both be included" >&5
-if eval "test \"`echo '$''{'ac_cv_header_time'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 2146 "configure"
-#include "confdefs.h"
-#include <sys/types.h>
-#include <sys/time.h>
-#include <time.h>
-int main() {
-struct tm *tp;
-; return 0; }
-EOF
-if { (eval echo configure:2155: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-  rm -rf conftest*
-  ac_cv_header_time=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  ac_cv_header_time=no
-fi
-rm -f conftest*
-fi
-
-echo "$ac_t""$ac_cv_header_time" 1>&6
-if test $ac_cv_header_time = yes; then
-  cat >> confdefs.h <<\EOF
-#define TIME_WITH_SYS_TIME 1
-EOF
-
-fi
-
-echo $ac_n "checking for sys/wait.h that is POSIX.1 compatible""... $ac_c" 1>&6
-echo "configure:2176: checking for sys/wait.h that is POSIX.1 compatible" >&5
-if eval "test \"`echo '$''{'ac_cv_header_sys_wait_h'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 2181 "configure"
-#include "confdefs.h"
-#include <sys/types.h>
-#include <sys/wait.h>
-#ifndef WEXITSTATUS
-#define WEXITSTATUS(stat_val) ((unsigned)(stat_val) >> 8)
-#endif
-#ifndef WIFEXITED
-#define WIFEXITED(stat_val) (((stat_val) & 255) == 0)
-#endif
-int main() {
-int s;
-wait (&s);
-s = WIFEXITED (s) ? WEXITSTATUS (s) : 1;
-; return 0; }
-EOF
-if { (eval echo configure:2197: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-  rm -rf conftest*
-  ac_cv_header_sys_wait_h=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  ac_cv_header_sys_wait_h=no
-fi
-rm -f conftest*
-fi
-
-echo "$ac_t""$ac_cv_header_sys_wait_h" 1>&6
-if test $ac_cv_header_sys_wait_h = yes; then
-  cat >> confdefs.h <<\EOF
-#define HAVE_SYS_WAIT_H 1
-EOF
-
-fi
-
-for ac_hdr in arpa/inet.h sys/fcntl.h sys/select.h fcntl.h sys/time.h sys/unistd.h
-do
-ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
-echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
-echo "configure:2221: checking for $ac_hdr" >&5
-if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 2226 "configure"
-#include "confdefs.h"
-#include <$ac_hdr>
-EOF
-ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:2231: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
-ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
-if test -z "$ac_err"; then
-  rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=yes"
-else
-  echo "$ac_err" >&5
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=no"
-fi
-rm -f conftest*
-fi
-if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_hdr 1
-EOF
- 
-else
-  echo "$ac_t""no" 1>&6
-fi
-done
-
-for ac_hdr in unistd.h utime.h grp.h sys/id.h limits.h memory.h net/if.h
-do
-ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
-echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
-echo "configure:2261: checking for $ac_hdr" >&5
-if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 2266 "configure"
-#include "confdefs.h"
-#include <$ac_hdr>
-EOF
-ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:2271: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
-ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
-if test -z "$ac_err"; then
-  rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=yes"
-else
-  echo "$ac_err" >&5
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=no"
-fi
-rm -f conftest*
-fi
-if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_hdr 1
-EOF
- 
-else
-  echo "$ac_t""no" 1>&6
-fi
-done
-
-for ac_hdr in compat.h rpc/rpc.h rpcsvc/nis.h rpcsvc/yp_prot.h rpcsvc/ypclnt.h
-do
-ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
-echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
-echo "configure:2301: checking for $ac_hdr" >&5
-if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 2306 "configure"
-#include "confdefs.h"
-#include <$ac_hdr>
-EOF
-ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:2311: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
-ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
-if test -z "$ac_err"; then
-  rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=yes"
-else
-  echo "$ac_err" >&5
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=no"
-fi
-rm -f conftest*
-fi
-if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_hdr 1
-EOF
- 
-else
-  echo "$ac_t""no" 1>&6
-fi
-done
-
-for ac_hdr in stdlib.h string.h strings.h syslog.h sys/file.h
-do
-ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
-echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
-echo "configure:2341: checking for $ac_hdr" >&5
-if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 2346 "configure"
-#include "confdefs.h"
-#include <$ac_hdr>
-EOF
-ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:2351: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
-ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
-if test -z "$ac_err"; then
-  rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=yes"
-else
-  echo "$ac_err" >&5
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=no"
-fi
-rm -f conftest*
-fi
-if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_hdr 1
-EOF
- 
-else
-  echo "$ac_t""no" 1>&6
-fi
-done
-
-for ac_hdr in sys/param.h ctype.h sys/wait.h sys/resource.h sys/ioctl.h sys/ipc.h sys/mode.h
-do
-ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
-echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
-echo "configure:2381: checking for $ac_hdr" >&5
-if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 2386 "configure"
-#include "confdefs.h"
-#include <$ac_hdr>
-EOF
-ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:2391: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
-ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
-if test -z "$ac_err"; then
-  rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=yes"
-else
-  echo "$ac_err" >&5
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=no"
-fi
-rm -f conftest*
-fi
-if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_hdr 1
-EOF
- 
-else
-  echo "$ac_t""no" 1>&6
-fi
-done
-
-for ac_hdr in sys/mman.h sys/filio.h sys/priv.h sys/shm.h sys/socket.h
-do
-ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
-echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
-echo "configure:2421: checking for $ac_hdr" >&5
-if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 2426 "configure"
-#include "confdefs.h"
-#include <$ac_hdr>
-EOF
-ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:2431: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
-ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
-if test -z "$ac_err"; then
-  rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=yes"
-else
-  echo "$ac_err" >&5
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=no"
-fi
-rm -f conftest*
-fi
-if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_hdr 1
-EOF
- 
-else
-  echo "$ac_t""no" 1>&6
-fi
-done
-
-for ac_hdr in syslog.h sys/syslog.h sys/mount.h sys/vfs.h sys/fs/s5param.h sys/filsys.h termios.h termio.h
-do
-ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
-echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
-echo "configure:2461: checking for $ac_hdr" >&5
-if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 2466 "configure"
-#include "confdefs.h"
-#include <$ac_hdr>
-EOF
-ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:2471: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
-ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
-if test -z "$ac_err"; then
-  rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=yes"
-else
-  echo "$ac_err" >&5
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=no"
-fi
-rm -f conftest*
-fi
-if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_hdr 1
-EOF
- 
-else
-  echo "$ac_t""no" 1>&6
-fi
-done
-
-for ac_hdr in sys/termio.h sys/statfs.h sys/dustat.h sys/statvfs.h stdarg.h sys/sockio.h
-do
-ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
-echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
-echo "configure:2501: checking for $ac_hdr" >&5
-if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 2506 "configure"
-#include "confdefs.h"
-#include <$ac_hdr>
-EOF
-ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:2511: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
-ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
-if test -z "$ac_err"; then
-  rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=yes"
-else
-  echo "$ac_err" >&5
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=no"
-fi
-rm -f conftest*
-fi
-if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_hdr 1
-EOF
- 
-else
-  echo "$ac_t""no" 1>&6
-fi
-done
-
-for ac_hdr in security/pam_modules.h security/_pam_macros.h dlfcn.h synch.h pthread.h nsswitch.h
-do
-ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
-echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
-echo "configure:2541: checking for $ac_hdr" >&5
-if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 2546 "configure"
-#include "confdefs.h"
-#include <$ac_hdr>
-EOF
-ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:2551: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
-ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
-if test -z "$ac_err"; then
-  rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=yes"
-else
-  echo "$ac_err" >&5
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=no"
-fi
-rm -f conftest*
-fi
-if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_hdr 1
-EOF
- 
-else
-  echo "$ac_t""no" 1>&6
-fi
-done
-
-
-#
-# HPUX has a bug in that including shadow.h causes a re-definition of MAXINT.
-# This causes configure to fail to detect it. Check for shadow separately on HPUX.
-#
-case "$host_os" in
-    *hpux*)
-		cat > conftest.$ac_ext <<EOF
-#line 2585 "configure"
-#include "confdefs.h"
-#include <shadow.h>
-int main() {
-struct spwd testme
-; return 0; }
-EOF
-if { (eval echo configure:2592: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-  rm -rf conftest*
-  ac_cv_header_shadow_h=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  ac_cv_header_shadow_h=no
-fi
-rm -f conftest*
-		if test x"$ac_cv_header_shadow_h" = x"yes"; then
-		   cat >> confdefs.h <<\EOF
-#define HAVE_SHADOW_H 1
-EOF
-
-		fi
-	;;
-esac
-for ac_hdr in shadow.h netinet/ip.h netinet/tcp.h netinet/in_systm.h netinet/in_ip.h
-do
-ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
-echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
-echo "configure:2614: checking for $ac_hdr" >&5
-if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 2619 "configure"
-#include "confdefs.h"
-#include <$ac_hdr>
-EOF
-ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:2624: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
-ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
-if test -z "$ac_err"; then
-  rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=yes"
-else
-  echo "$ac_err" >&5
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=no"
-fi
-rm -f conftest*
-fi
-if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_hdr 1
-EOF
- 
-else
-  echo "$ac_t""no" 1>&6
-fi
-done
-
-for ac_hdr in nss.h nss_common.h ns_api.h sys/security.h security/pam_appl.h security/pam_modules.h
-do
-ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
-echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
-echo "configure:2654: checking for $ac_hdr" >&5
-if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 2659 "configure"
-#include "confdefs.h"
-#include <$ac_hdr>
-EOF
-ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:2664: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
-ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
-if test -z "$ac_err"; then
-  rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=yes"
-else
-  echo "$ac_err" >&5
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=no"
-fi
-rm -f conftest*
-fi
-if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_hdr 1
-EOF
- 
-else
-  echo "$ac_t""no" 1>&6
-fi
-done
-
-for ac_hdr in stropts.h poll.h
-do
-ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
-echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
-echo "configure:2694: checking for $ac_hdr" >&5
-if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 2699 "configure"
-#include "confdefs.h"
-#include <$ac_hdr>
-EOF
-ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:2704: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
-ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
-if test -z "$ac_err"; then
-  rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=yes"
-else
-  echo "$ac_err" >&5
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=no"
-fi
-rm -f conftest*
-fi
-if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_hdr 1
-EOF
- 
-else
-  echo "$ac_t""no" 1>&6
-fi
-done
-
-for ac_hdr in sys/capability.h syscall.h sys/syscall.h
-do
-ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
-echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
-echo "configure:2734: checking for $ac_hdr" >&5
-if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 2739 "configure"
-#include "confdefs.h"
-#include <$ac_hdr>
-EOF
-ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:2744: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
-ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
-if test -z "$ac_err"; then
-  rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=yes"
-else
-  echo "$ac_err" >&5
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=no"
-fi
-rm -f conftest*
-fi
-if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_hdr 1
-EOF
- 
-else
-  echo "$ac_t""no" 1>&6
-fi
-done
-
-for ac_hdr in sys/acl.h sys/cdefs.h glob.h
-do
-ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
-echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
-echo "configure:2774: checking for $ac_hdr" >&5
-if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 2779 "configure"
-#include "confdefs.h"
-#include <$ac_hdr>
-EOF
-ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:2784: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
-ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
-if test -z "$ac_err"; then
-  rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=yes"
-else
-  echo "$ac_err" >&5
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=no"
-fi
-rm -f conftest*
-fi
-if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_hdr 1
-EOF
- 
-else
-  echo "$ac_t""no" 1>&6
-fi
-done
-
-
-# For experimental utmp support (lastlog on some BSD-like systems)
-for ac_hdr in utmp.h utmpx.h lastlog.h
-do
-ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
-echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
-echo "configure:2816: checking for $ac_hdr" >&5
-if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 2821 "configure"
-#include "confdefs.h"
-#include <$ac_hdr>
-EOF
-ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:2826: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
-ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
-if test -z "$ac_err"; then
-  rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=yes"
-else
-  echo "$ac_err" >&5
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=no"
-fi
-rm -f conftest*
-fi
-if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_hdr 1
-EOF
- 
-else
-  echo "$ac_t""no" 1>&6
-fi
-done
-
- 
-# For quotas on Veritas VxFS filesystems
-for ac_hdr in sys/fs/vx_quota.h
-do
-ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
-echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
-echo "configure:2858: checking for $ac_hdr" >&5
-if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 2863 "configure"
-#include "confdefs.h"
-#include <$ac_hdr>
-EOF
-ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:2868: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
-ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
-if test -z "$ac_err"; then
-  rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=yes"
-else
-  echo "$ac_err" >&5
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=no"
-fi
-rm -f conftest*
-fi
-if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_hdr 1
-EOF
- 
-else
-  echo "$ac_t""no" 1>&6
-fi
-done
-
-
-# For quotas on Linux XFS filesystems
-for ac_hdr in linux/xqm.h
-do
-ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
-echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
-echo "configure:2900: checking for $ac_hdr" >&5
-if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 2905 "configure"
-#include "confdefs.h"
-#include <$ac_hdr>
-EOF
-ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:2910: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
-ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
-if test -z "$ac_err"; then
-  rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=yes"
-else
-  echo "$ac_err" >&5
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=no"
-fi
-rm -f conftest*
-fi
-if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_hdr 1
-EOF
- 
-else
-  echo "$ac_t""no" 1>&6
-fi
-done
-
-
-echo $ac_n "checking size of int""... $ac_c" 1>&6
-echo "configure:2938: checking size of int" >&5
-if eval "test \"`echo '$''{'ac_cv_sizeof_int'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  if test "$cross_compiling" = yes; then
-  ac_cv_sizeof_int=cross
-else
-  cat > conftest.$ac_ext <<EOF
-#line 2946 "configure"
-#include "confdefs.h"
-#include <stdio.h>
-int main()
-{
-  FILE *f=fopen("conftestval", "w");
-  if (!f) return(1);
-  fprintf(f, "%d\n", sizeof(int));
-  return(0);
-}
-EOF
-if { (eval echo configure:2957: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  ac_cv_sizeof_int=`cat conftestval`
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  ac_cv_sizeof_int=0
-fi
-rm -fr conftest*
-fi
-
-fi
-echo "$ac_t""$ac_cv_sizeof_int" 1>&6
-cat >> confdefs.h <<EOF
-#define SIZEOF_INT $ac_cv_sizeof_int
-EOF
-
-
-echo $ac_n "checking size of long""... $ac_c" 1>&6
-echo "configure:2977: checking size of long" >&5
-if eval "test \"`echo '$''{'ac_cv_sizeof_long'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  if test "$cross_compiling" = yes; then
-  ac_cv_sizeof_long=cross
-else
-  cat > conftest.$ac_ext <<EOF
-#line 2985 "configure"
-#include "confdefs.h"
-#include <stdio.h>
-int main()
-{
-  FILE *f=fopen("conftestval", "w");
-  if (!f) return(1);
-  fprintf(f, "%d\n", sizeof(long));
-  return(0);
-}
-EOF
-if { (eval echo configure:2996: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  ac_cv_sizeof_long=`cat conftestval`
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  ac_cv_sizeof_long=0
-fi
-rm -fr conftest*
-fi
-
-fi
-echo "$ac_t""$ac_cv_sizeof_long" 1>&6
-cat >> confdefs.h <<EOF
-#define SIZEOF_LONG $ac_cv_sizeof_long
-EOF
-
-
-echo $ac_n "checking size of short""... $ac_c" 1>&6
-echo "configure:3016: checking size of short" >&5
-if eval "test \"`echo '$''{'ac_cv_sizeof_short'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  if test "$cross_compiling" = yes; then
-  ac_cv_sizeof_short=cross
-else
-  cat > conftest.$ac_ext <<EOF
-#line 3024 "configure"
-#include "confdefs.h"
-#include <stdio.h>
-int main()
-{
-  FILE *f=fopen("conftestval", "w");
-  if (!f) return(1);
-  fprintf(f, "%d\n", sizeof(short));
-  return(0);
-}
-EOF
-if { (eval echo configure:3035: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  ac_cv_sizeof_short=`cat conftestval`
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  ac_cv_sizeof_short=0
-fi
-rm -fr conftest*
-fi
-
-fi
-echo "$ac_t""$ac_cv_sizeof_short" 1>&6
-cat >> confdefs.h <<EOF
-#define SIZEOF_SHORT $ac_cv_sizeof_short
-EOF
-
-
-
-echo $ac_n "checking for working const""... $ac_c" 1>&6
-echo "configure:3056: checking for working const" >&5
-if eval "test \"`echo '$''{'ac_cv_c_const'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 3061 "configure"
-#include "confdefs.h"
-
-int main() {
-
-/* Ultrix mips cc rejects this.  */
-typedef int charset[2]; const charset x;
-/* SunOS 4.1.1 cc rejects this.  */
-char const *const *ccp;
-char **p;
-/* NEC SVR4.0.2 mips cc rejects this.  */
-struct point {int x, y;};
-static struct point const zero = {0,0};
-/* AIX XL C 1.02.0.0 rejects this.
-   It does not let you subtract one const X* pointer from another in an arm
-   of an if-expression whose if-part is not a constant expression */
-const char *g = "string";
-ccp = &g + (g ? g-g : 0);
-/* HPUX 7.0 cc rejects these. */
-++ccp;
-p = (char**) ccp;
-ccp = (char const *const *) p;
-{ /* SCO 3.2v4 cc rejects this.  */
-  char *t;
-  char const *s = 0 ? (char *) 0 : (char const *) 0;
-
-  *t++ = 0;
-}
-{ /* Someone thinks the Sun supposedly-ANSI compiler will reject this.  */
-  int x[] = {25, 17};
-  const int *foo = &x[0];
-  ++foo;
-}
-{ /* Sun SC1.0 ANSI compiler rejects this -- but not the above. */
-  typedef const int *iptr;
-  iptr p = 0;
-  ++p;
-}
-{ /* AIX XL C 1.02.0.0 rejects this saying
-     "k.c", line 2.27: 1506-025 (S) Operand must be a modifiable lvalue. */
-  struct s { int j; const int *ap[3]; };
-  struct s *b; b->j = 5;
-}
-{ /* ULTRIX-32 V3.1 (Rev 9) vcc rejects this */
-  const int foo = 10;
-}
-
-; return 0; }
-EOF
-if { (eval echo configure:3110: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-  rm -rf conftest*
-  ac_cv_c_const=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  ac_cv_c_const=no
-fi
-rm -f conftest*
-fi
-
-echo "$ac_t""$ac_cv_c_const" 1>&6
-if test $ac_cv_c_const = no; then
-  cat >> confdefs.h <<\EOF
-#define const 
-EOF
-
-fi
-
-echo $ac_n "checking for inline""... $ac_c" 1>&6
-echo "configure:3131: checking for inline" >&5
-if eval "test \"`echo '$''{'ac_cv_c_inline'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_cv_c_inline=no
-for ac_kw in inline __inline__ __inline; do
-  cat > conftest.$ac_ext <<EOF
-#line 3138 "configure"
-#include "confdefs.h"
-
-int main() {
-} $ac_kw foo() {
-; return 0; }
-EOF
-if { (eval echo configure:3145: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-  rm -rf conftest*
-  ac_cv_c_inline=$ac_kw; break
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-fi
-rm -f conftest*
-done
-
-fi
-
-echo "$ac_t""$ac_cv_c_inline" 1>&6
-case "$ac_cv_c_inline" in
-  inline | yes) ;;
-  no) cat >> confdefs.h <<\EOF
-#define inline 
-EOF
- ;;
-  *)  cat >> confdefs.h <<EOF
-#define inline $ac_cv_c_inline
-EOF
- ;;
-esac
-
-echo $ac_n "checking whether byte ordering is bigendian""... $ac_c" 1>&6
-echo "configure:3171: checking whether byte ordering is bigendian" >&5
-if eval "test \"`echo '$''{'ac_cv_c_bigendian'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_cv_c_bigendian=unknown
-# See if sys/param.h defines the BYTE_ORDER macro.
-cat > conftest.$ac_ext <<EOF
-#line 3178 "configure"
-#include "confdefs.h"
-#include <sys/types.h>
-#include <sys/param.h>
-int main() {
-
-#if !BYTE_ORDER || !BIG_ENDIAN || !LITTLE_ENDIAN
- bogus endian macros
-#endif
-; return 0; }
-EOF
-if { (eval echo configure:3189: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-  rm -rf conftest*
-  # It does; now see whether it defined to BIG_ENDIAN or not.
-cat > conftest.$ac_ext <<EOF
-#line 3193 "configure"
-#include "confdefs.h"
-#include <sys/types.h>
-#include <sys/param.h>
-int main() {
-
-#if BYTE_ORDER != BIG_ENDIAN
- not big endian
-#endif
-; return 0; }
-EOF
-if { (eval echo configure:3204: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-  rm -rf conftest*
-  ac_cv_c_bigendian=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  ac_cv_c_bigendian=no
-fi
-rm -f conftest*
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-fi
-rm -f conftest*
-if test $ac_cv_c_bigendian = unknown; then
-if test "$cross_compiling" = yes; then
-    { echo "configure: error: can not run test program while cross compiling" 1>&2; exit 1; }
-else
-  cat > conftest.$ac_ext <<EOF
-#line 3224 "configure"
-#include "confdefs.h"
-main () {
-  /* Are we little or big endian?  From Harbison&Steele.  */
-  union
-  {
-    long l;
-    char c[sizeof (long)];
-  } u;
-  u.l = 1;
-  exit (u.c[sizeof (long) - 1] == 1);
-}
-EOF
-if { (eval echo configure:3237: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  ac_cv_c_bigendian=no
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  ac_cv_c_bigendian=yes
-fi
-rm -fr conftest*
-fi
-
-fi
-fi
-
-echo "$ac_t""$ac_cv_c_bigendian" 1>&6
-if test $ac_cv_c_bigendian = yes; then
-  cat >> confdefs.h <<\EOF
-#define WORDS_BIGENDIAN 1
-EOF
-
-fi
-
-echo $ac_n "checking whether char is unsigned""... $ac_c" 1>&6
-echo "configure:3261: checking whether char is unsigned" >&5
-if eval "test \"`echo '$''{'ac_cv_c_char_unsigned'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  if test "$GCC" = yes; then
-  # GCC predefines this symbol on systems where it applies.
-cat > conftest.$ac_ext <<EOF
-#line 3268 "configure"
-#include "confdefs.h"
-#ifdef __CHAR_UNSIGNED__
-  yes
-#endif
-
-EOF
-if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
-  egrep "yes" >/dev/null 2>&1; then
-  rm -rf conftest*
-  ac_cv_c_char_unsigned=yes
-else
-  rm -rf conftest*
-  ac_cv_c_char_unsigned=no
-fi
-rm -f conftest*
-
-else
-if test "$cross_compiling" = yes; then
-    { echo "configure: error: can not run test program while cross compiling" 1>&2; exit 1; }
-else
-  cat > conftest.$ac_ext <<EOF
-#line 3290 "configure"
-#include "confdefs.h"
-/* volatile prevents gcc2 from optimizing the test away on sparcs.  */
-#if !defined(__STDC__) || __STDC__ != 1
-#define volatile
-#endif
-main() {
-  volatile char c = 255; exit(c < 0);
-}
-EOF
-if { (eval echo configure:3300: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  ac_cv_c_char_unsigned=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  ac_cv_c_char_unsigned=no
-fi
-rm -fr conftest*
-fi
-
-fi
-fi
-
-echo "$ac_t""$ac_cv_c_char_unsigned" 1>&6
-if test $ac_cv_c_char_unsigned = yes && test "$GCC" != yes; then
-  cat >> confdefs.h <<\EOF
-#define __CHAR_UNSIGNED__ 1
-EOF
-
-fi
-
-
-echo $ac_n "checking return type of signal handlers""... $ac_c" 1>&6
-echo "configure:3325: checking return type of signal handlers" >&5
-if eval "test \"`echo '$''{'ac_cv_type_signal'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 3330 "configure"
-#include "confdefs.h"
-#include <sys/types.h>
-#include <signal.h>
-#ifdef signal
-#undef signal
-#endif
-#ifdef __cplusplus
-extern "C" void (*signal (int, void (*)(int)))(int);
-#else
-void (*signal ()) ();
-#endif
-
-int main() {
-int i;
-; return 0; }
-EOF
-if { (eval echo configure:3347: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-  rm -rf conftest*
-  ac_cv_type_signal=void
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  ac_cv_type_signal=int
-fi
-rm -f conftest*
-fi
-
-echo "$ac_t""$ac_cv_type_signal" 1>&6
-cat >> confdefs.h <<EOF
-#define RETSIGTYPE $ac_cv_type_signal
-EOF
-
-
-echo $ac_n "checking for uid_t in sys/types.h""... $ac_c" 1>&6
-echo "configure:3366: checking for uid_t in sys/types.h" >&5
-if eval "test \"`echo '$''{'ac_cv_type_uid_t'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 3371 "configure"
-#include "confdefs.h"
-#include <sys/types.h>
-EOF
-if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
-  egrep "uid_t" >/dev/null 2>&1; then
-  rm -rf conftest*
-  ac_cv_type_uid_t=yes
-else
-  rm -rf conftest*
-  ac_cv_type_uid_t=no
-fi
-rm -f conftest*
-
-fi
-
-echo "$ac_t""$ac_cv_type_uid_t" 1>&6
-if test $ac_cv_type_uid_t = no; then
-  cat >> confdefs.h <<\EOF
-#define uid_t int
-EOF
-
-  cat >> confdefs.h <<\EOF
-#define gid_t int
-EOF
-
-fi
-
-echo $ac_n "checking for mode_t""... $ac_c" 1>&6
-echo "configure:3400: checking for mode_t" >&5
-if eval "test \"`echo '$''{'ac_cv_type_mode_t'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 3405 "configure"
-#include "confdefs.h"
-#include <sys/types.h>
-#if STDC_HEADERS
-#include <stdlib.h>
-#include <stddef.h>
-#endif
-EOF
-if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
-  egrep "(^|[^a-zA-Z_0-9])mode_t[^a-zA-Z_0-9]" >/dev/null 2>&1; then
-  rm -rf conftest*
-  ac_cv_type_mode_t=yes
-else
-  rm -rf conftest*
-  ac_cv_type_mode_t=no
-fi
-rm -f conftest*
-
-fi
-echo "$ac_t""$ac_cv_type_mode_t" 1>&6
-if test $ac_cv_type_mode_t = no; then
-  cat >> confdefs.h <<\EOF
-#define mode_t int
-EOF
-
-fi
-
-echo $ac_n "checking for off_t""... $ac_c" 1>&6
-echo "configure:3433: checking for off_t" >&5
-if eval "test \"`echo '$''{'ac_cv_type_off_t'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 3438 "configure"
-#include "confdefs.h"
-#include <sys/types.h>
-#if STDC_HEADERS
-#include <stdlib.h>
-#include <stddef.h>
-#endif
-EOF
-if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
-  egrep "(^|[^a-zA-Z_0-9])off_t[^a-zA-Z_0-9]" >/dev/null 2>&1; then
-  rm -rf conftest*
-  ac_cv_type_off_t=yes
-else
-  rm -rf conftest*
-  ac_cv_type_off_t=no
-fi
-rm -f conftest*
-
-fi
-echo "$ac_t""$ac_cv_type_off_t" 1>&6
-if test $ac_cv_type_off_t = no; then
-  cat >> confdefs.h <<\EOF
-#define off_t long
-EOF
-
-fi
-
-echo $ac_n "checking for size_t""... $ac_c" 1>&6
-echo "configure:3466: checking for size_t" >&5
-if eval "test \"`echo '$''{'ac_cv_type_size_t'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 3471 "configure"
-#include "confdefs.h"
-#include <sys/types.h>
-#if STDC_HEADERS
-#include <stdlib.h>
-#include <stddef.h>
-#endif
-EOF
-if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
-  egrep "(^|[^a-zA-Z_0-9])size_t[^a-zA-Z_0-9]" >/dev/null 2>&1; then
-  rm -rf conftest*
-  ac_cv_type_size_t=yes
-else
-  rm -rf conftest*
-  ac_cv_type_size_t=no
-fi
-rm -f conftest*
-
-fi
-echo "$ac_t""$ac_cv_type_size_t" 1>&6
-if test $ac_cv_type_size_t = no; then
-  cat >> confdefs.h <<\EOF
-#define size_t unsigned
-EOF
-
-fi
-
-echo $ac_n "checking for pid_t""... $ac_c" 1>&6
-echo "configure:3499: checking for pid_t" >&5
-if eval "test \"`echo '$''{'ac_cv_type_pid_t'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 3504 "configure"
-#include "confdefs.h"
-#include <sys/types.h>
-#if STDC_HEADERS
-#include <stdlib.h>
-#include <stddef.h>
-#endif
-EOF
-if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
-  egrep "(^|[^a-zA-Z_0-9])pid_t[^a-zA-Z_0-9]" >/dev/null 2>&1; then
-  rm -rf conftest*
-  ac_cv_type_pid_t=yes
-else
-  rm -rf conftest*
-  ac_cv_type_pid_t=no
-fi
-rm -f conftest*
-
-fi
-echo "$ac_t""$ac_cv_type_pid_t" 1>&6
-if test $ac_cv_type_pid_t = no; then
-  cat >> confdefs.h <<\EOF
-#define pid_t int
-EOF
-
-fi
-
-echo $ac_n "checking for st_rdev in struct stat""... $ac_c" 1>&6
-echo "configure:3532: checking for st_rdev in struct stat" >&5
-if eval "test \"`echo '$''{'ac_cv_struct_st_rdev'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 3537 "configure"
-#include "confdefs.h"
-#include <sys/types.h>
-#include <sys/stat.h>
-int main() {
-struct stat s; s.st_rdev;
-; return 0; }
-EOF
-if { (eval echo configure:3545: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-  rm -rf conftest*
-  ac_cv_struct_st_rdev=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  ac_cv_struct_st_rdev=no
-fi
-rm -f conftest*
-fi
-
-echo "$ac_t""$ac_cv_struct_st_rdev" 1>&6
-if test $ac_cv_struct_st_rdev = yes; then
-  cat >> confdefs.h <<\EOF
-#define HAVE_ST_RDEV 1
-EOF
-
-fi
-
-echo $ac_n "checking for d_off in dirent""... $ac_c" 1>&6
-echo "configure:3566: checking for d_off in dirent" >&5
-if eval "test \"`echo '$''{'ac_cv_dirent_d_off'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 3571 "configure"
-#include "confdefs.h"
-
-#include <unistd.h>
-#include <sys/types.h>
-#include <dirent.h>
-int main() {
-struct dirent d; d.d_off;
-; return 0; }
-EOF
-if { (eval echo configure:3581: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-  rm -rf conftest*
-  ac_cv_dirent_d_off=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  ac_cv_dirent_d_off=no
-fi
-rm -f conftest*
-fi
-
-echo "$ac_t""$ac_cv_dirent_d_off" 1>&6
-if test $ac_cv_dirent_d_off = yes; then
-  cat >> confdefs.h <<\EOF
-#define HAVE_DIRENT_D_OFF 1
-EOF
-
-fi
-
-echo $ac_n "checking for ino_t""... $ac_c" 1>&6
-echo "configure:3602: checking for ino_t" >&5
-if eval "test \"`echo '$''{'ac_cv_type_ino_t'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 3607 "configure"
-#include "confdefs.h"
-#include <sys/types.h>
-#if STDC_HEADERS
-#include <stdlib.h>
-#include <stddef.h>
-#endif
-EOF
-if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
-  egrep "(^|[^a-zA-Z_0-9])ino_t[^a-zA-Z_0-9]" >/dev/null 2>&1; then
-  rm -rf conftest*
-  ac_cv_type_ino_t=yes
-else
-  rm -rf conftest*
-  ac_cv_type_ino_t=no
-fi
-rm -f conftest*
-
-fi
-echo "$ac_t""$ac_cv_type_ino_t" 1>&6
-if test $ac_cv_type_ino_t = no; then
-  cat >> confdefs.h <<\EOF
-#define ino_t unsigned
-EOF
-
-fi
-
-echo $ac_n "checking for loff_t""... $ac_c" 1>&6
-echo "configure:3635: checking for loff_t" >&5
-if eval "test \"`echo '$''{'ac_cv_type_loff_t'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 3640 "configure"
-#include "confdefs.h"
-#include <sys/types.h>
-#if STDC_HEADERS
-#include <stdlib.h>
-#include <stddef.h>
-#endif
-EOF
-if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
-  egrep "(^|[^a-zA-Z_0-9])loff_t[^a-zA-Z_0-9]" >/dev/null 2>&1; then
-  rm -rf conftest*
-  ac_cv_type_loff_t=yes
-else
-  rm -rf conftest*
-  ac_cv_type_loff_t=no
-fi
-rm -f conftest*
-
-fi
-echo "$ac_t""$ac_cv_type_loff_t" 1>&6
-if test $ac_cv_type_loff_t = no; then
-  cat >> confdefs.h <<\EOF
-#define loff_t off_t
-EOF
-
-fi
-
-echo $ac_n "checking for offset_t""... $ac_c" 1>&6
-echo "configure:3668: checking for offset_t" >&5
-if eval "test \"`echo '$''{'ac_cv_type_offset_t'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 3673 "configure"
-#include "confdefs.h"
-#include <sys/types.h>
-#if STDC_HEADERS
-#include <stdlib.h>
-#include <stddef.h>
-#endif
-EOF
-if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
-  egrep "(^|[^a-zA-Z_0-9])offset_t[^a-zA-Z_0-9]" >/dev/null 2>&1; then
-  rm -rf conftest*
-  ac_cv_type_offset_t=yes
-else
-  rm -rf conftest*
-  ac_cv_type_offset_t=no
-fi
-rm -f conftest*
-
-fi
-echo "$ac_t""$ac_cv_type_offset_t" 1>&6
-if test $ac_cv_type_offset_t = no; then
-  cat >> confdefs.h <<\EOF
-#define offset_t loff_t
-EOF
-
-fi
-
-echo $ac_n "checking for ssize_t""... $ac_c" 1>&6
-echo "configure:3701: checking for ssize_t" >&5
-if eval "test \"`echo '$''{'ac_cv_type_ssize_t'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 3706 "configure"
-#include "confdefs.h"
-#include <sys/types.h>
-#if STDC_HEADERS
-#include <stdlib.h>
-#include <stddef.h>
-#endif
-EOF
-if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
-  egrep "(^|[^a-zA-Z_0-9])ssize_t[^a-zA-Z_0-9]" >/dev/null 2>&1; then
-  rm -rf conftest*
-  ac_cv_type_ssize_t=yes
-else
-  rm -rf conftest*
-  ac_cv_type_ssize_t=no
-fi
-rm -f conftest*
-
-fi
-echo "$ac_t""$ac_cv_type_ssize_t" 1>&6
-if test $ac_cv_type_ssize_t = no; then
-  cat >> confdefs.h <<\EOF
-#define ssize_t int
-EOF
-
-fi
-
-echo $ac_n "checking for wchar_t""... $ac_c" 1>&6
-echo "configure:3734: checking for wchar_t" >&5
-if eval "test \"`echo '$''{'ac_cv_type_wchar_t'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 3739 "configure"
-#include "confdefs.h"
-#include <sys/types.h>
-#if STDC_HEADERS
-#include <stdlib.h>
-#include <stddef.h>
-#endif
-EOF
-if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
-  egrep "(^|[^a-zA-Z_0-9])wchar_t[^a-zA-Z_0-9]" >/dev/null 2>&1; then
-  rm -rf conftest*
-  ac_cv_type_wchar_t=yes
-else
-  rm -rf conftest*
-  ac_cv_type_wchar_t=no
-fi
-rm -f conftest*
-
-fi
-echo "$ac_t""$ac_cv_type_wchar_t" 1>&6
-if test $ac_cv_type_wchar_t = no; then
-  cat >> confdefs.h <<\EOF
-#define wchar_t unsigned short
-EOF
-
-fi
-
-
-############################################
-# for cups support we need libcups, and a handful of header files
-
-# Check whether --enable-cups or --disable-cups was given.
-if test "${enable_cups+set}" = set; then
-  enableval="$enable_cups"
-  :
-fi
-
-
-if test x$enable_cups != xno; then
-	# Extract the first word of "cups-config", so it can be a program name with args.
-set dummy cups-config; ac_word=$2
-echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:3781: checking for $ac_word" >&5
-if eval "test \"`echo '$''{'ac_cv_path_CUPS_CONFIG'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  case "$CUPS_CONFIG" in
-  /*)
-  ac_cv_path_CUPS_CONFIG="$CUPS_CONFIG" # Let the user override the test with a path.
-  ;;
-  ?:/*)			 
-  ac_cv_path_CUPS_CONFIG="$CUPS_CONFIG" # Let the user override the test with a dos path.
-  ;;
-  *)
-  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
-  ac_dummy="$PATH"
-  for ac_dir in $ac_dummy; do 
-    test -z "$ac_dir" && ac_dir=.
-    if test -f $ac_dir/$ac_word; then
-      ac_cv_path_CUPS_CONFIG="$ac_dir/$ac_word"
-      break
-    fi
-  done
-  IFS="$ac_save_ifs"
-  ;;
-esac
-fi
-CUPS_CONFIG="$ac_cv_path_CUPS_CONFIG"
-if test -n "$CUPS_CONFIG"; then
-  echo "$ac_t""$CUPS_CONFIG" 1>&6
-else
-  echo "$ac_t""no" 1>&6
-fi
-
-
-        if test "x$CUPS_CONFIG" != x; then
-	        cat >> confdefs.h <<\EOF
-#define HAVE_CUPS 1
-EOF
-
-		CFLAGS="$CFLAGS `$CUPS_CONFIG --cflags`"
-		LDFLAGS="$LDFLAGS `$CUPS_CONFIG --ldflags`"
-		LIBS="$LIBS `$CUPS_CONFIG --libs`"
-        fi
-fi
-
-############################################
-# we need dlopen/dlclose/dlsym/dlerror for PAM, the password database plugins and the new VFS code
-for ac_func in dlopen
-do
-echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:3830: checking for $ac_func" >&5
-if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 3835 "configure"
-#include "confdefs.h"
-/* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char $ac_func(); below.  */
-#include <assert.h>
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char $ac_func();
-
-int main() {
-
-/* The GNU C library defines this for functions which it implements
-    to always fail with ENOSYS.  Some functions are actually named
-    something starting with __ and the normal name is an alias.  */
-#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
-choke me
-#else
-$ac_func();
-#endif
-
-; return 0; }
-EOF
-if { (eval echo configure:3858: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=no"
-fi
-rm -f conftest*
-fi
-
-if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_func 1
-EOF
- 
-else
-  echo "$ac_t""no" 1>&6
-fi
-done
-
-if test x"$ac_cv_func_dlopen" = x"no"; then
-	echo $ac_n "checking for dlopen in -ldl""... $ac_c" 1>&6
-echo "configure:3884: checking for dlopen in -ldl" >&5
-ac_lib_var=`echo dl'_'dlopen | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-ldl  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 3892 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char dlopen();
-
-int main() {
-dlopen()
-; return 0; }
-EOF
-if { (eval echo configure:3903: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
-
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  LIBS="$LIBS -ldl";
-	cat >> confdefs.h <<\EOF
-#define HAVE_DLOPEN 1
-EOF
-
-else
-  echo "$ac_t""no" 1>&6
-fi
-
-fi
-# dlopen/dlclose/dlsym/dlerror will be checked again later and defines will be set then
-
-############################################
-# check if the compiler can do immediate structures
-echo $ac_n "checking for immediate structures""... $ac_c" 1>&6
-echo "configure:3933: checking for immediate structures" >&5
-if eval "test \"`echo '$''{'samba_cv_immediate_structures'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-    cat > conftest.$ac_ext <<EOF
-#line 3939 "configure"
-#include "confdefs.h"
-
-#include <stdio.h>
-int main() {
-
-	typedef struct {unsigned x;} FOOBAR;
-#define X_FOOBAR(x) ((FOOBAR) { x })
-#define FOO_ONE X_FOOBAR(1)
-	FOOBAR f = FOO_ONE;
-	static struct {
-	FOOBAR y;
-	} f2[] = {
-		{FOO_ONE}
-	};
-
-; return 0; }
-EOF
-if { (eval echo configure:3957: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-  rm -rf conftest*
-  samba_cv_immediate_structures=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  samba_cv_immediate_structures=no
-fi
-rm -f conftest*
-fi
-
-echo "$ac_t""$samba_cv_immediate_structures" 1>&6
-if test x"$samba_cv_immediate_structures" = x"yes"; then
-   cat >> confdefs.h <<\EOF
-#define HAVE_IMMEDIATE_STRUCTURES 1
-EOF
-
-fi
-
-############################################
-# check for unix domain sockets
-echo $ac_n "checking for unix domain sockets""... $ac_c" 1>&6
-echo "configure:3980: checking for unix domain sockets" >&5
-if eval "test \"`echo '$''{'samba_cv_unixsocket'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-    cat > conftest.$ac_ext <<EOF
-#line 3986 "configure"
-#include "confdefs.h"
-
-#include <sys/types.h>
-#include <stdlib.h>
-#include <stddef.h>
-#include <sys/socket.h>
-#include <sys/un.h>
-int main() {
-
-  struct sockaddr_un sunaddr; 
-  sunaddr.sun_family = AF_UNIX;
-
-; return 0; }
-EOF
-if { (eval echo configure:4001: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-  rm -rf conftest*
-  samba_cv_unixsocket=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  samba_cv_unixsocket=no
-fi
-rm -f conftest*
-fi
-
-echo "$ac_t""$samba_cv_unixsocket" 1>&6
-if test x"$samba_cv_unixsocket" = x"yes"; then
-   cat >> confdefs.h <<\EOF
-#define HAVE_UNIXSOCKET 1
-EOF
-
-fi
-
-echo $ac_n "checking for socklen_t type""... $ac_c" 1>&6
-echo "configure:4022: checking for socklen_t type" >&5
-if eval "test \"`echo '$''{'samba_cv_socklen_t'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-    cat > conftest.$ac_ext <<EOF
-#line 4028 "configure"
-#include "confdefs.h"
-
-#include <sys/types.h>
-#if STDC_HEADERS
-#include <stdlib.h>
-#include <stddef.h>
-#endif
-#include <sys/socket.h>
-int main() {
-socklen_t i = 0
-; return 0; }
-EOF
-if { (eval echo configure:4041: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-  rm -rf conftest*
-  samba_cv_socklen_t=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  samba_cv_socklen_t=no
-fi
-rm -f conftest*
-fi
-
-echo "$ac_t""$samba_cv_socklen_t" 1>&6
-if test x"$samba_cv_socklen_t" = x"yes"; then
-   cat >> confdefs.h <<\EOF
-#define HAVE_SOCKLEN_T_TYPE 1
-EOF
-
-fi
-
-echo $ac_n "checking for sig_atomic_t type""... $ac_c" 1>&6
-echo "configure:4062: checking for sig_atomic_t type" >&5
-if eval "test \"`echo '$''{'samba_cv_sig_atomic_t'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-    cat > conftest.$ac_ext <<EOF
-#line 4068 "configure"
-#include "confdefs.h"
-
-#include <sys/types.h>
-#if STDC_HEADERS
-#include <stdlib.h>
-#include <stddef.h>
-#endif
-#include <signal.h>
-int main() {
-sig_atomic_t i = 0
-; return 0; }
-EOF
-if { (eval echo configure:4081: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-  rm -rf conftest*
-  samba_cv_sig_atomic_t=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  samba_cv_sig_atomic_t=no
-fi
-rm -f conftest*
-fi
-
-echo "$ac_t""$samba_cv_sig_atomic_t" 1>&6
-if test x"$samba_cv_sig_atomic_t" = x"yes"; then
-   cat >> confdefs.h <<\EOF
-#define HAVE_SIG_ATOMIC_T_TYPE 1
-EOF
-
-fi
-
-# stupid headers have the functions but no declaration. grrrr.
-
- echo $ac_n "checking for errno declaration""... $ac_c" 1>&6
-echo "configure:4104: checking for errno declaration" >&5
-if eval "test \"`echo '$''{'ac_cv_have_errno_decl'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-    cat > conftest.$ac_ext <<EOF
-#line 4110 "configure"
-#include "confdefs.h"
-#include <errno.h>
-int main() {
-int i = (int)errno
-; return 0; }
-EOF
-if { (eval echo configure:4117: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-  rm -rf conftest*
-  ac_cv_have_errno_decl=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  ac_cv_have_errno_decl=no
-fi
-rm -f conftest*
-fi
-
-echo "$ac_t""$ac_cv_have_errno_decl" 1>&6
- if test x"$ac_cv_have_errno_decl" = x"yes"; then
-    cat >> confdefs.h <<\EOF
-#define HAVE_ERRNO_DECL 1
-EOF
-
- fi
-
-
- echo $ac_n "checking for setresuid declaration""... $ac_c" 1>&6
-echo "configure:4139: checking for setresuid declaration" >&5
-if eval "test \"`echo '$''{'ac_cv_have_setresuid_decl'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-    cat > conftest.$ac_ext <<EOF
-#line 4145 "configure"
-#include "confdefs.h"
-#include <unistd.h>
-int main() {
-int i = (int)setresuid
-; return 0; }
-EOF
-if { (eval echo configure:4152: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-  rm -rf conftest*
-  ac_cv_have_setresuid_decl=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  ac_cv_have_setresuid_decl=no
-fi
-rm -f conftest*
-fi
-
-echo "$ac_t""$ac_cv_have_setresuid_decl" 1>&6
- if test x"$ac_cv_have_setresuid_decl" = x"yes"; then
-    cat >> confdefs.h <<\EOF
-#define HAVE_SETRESUID_DECL 1
-EOF
-
- fi
-
-
- echo $ac_n "checking for setresgid declaration""... $ac_c" 1>&6
-echo "configure:4174: checking for setresgid declaration" >&5
-if eval "test \"`echo '$''{'ac_cv_have_setresgid_decl'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-    cat > conftest.$ac_ext <<EOF
-#line 4180 "configure"
-#include "confdefs.h"
-#include <unistd.h>
-int main() {
-int i = (int)setresgid
-; return 0; }
-EOF
-if { (eval echo configure:4187: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-  rm -rf conftest*
-  ac_cv_have_setresgid_decl=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  ac_cv_have_setresgid_decl=no
-fi
-rm -f conftest*
-fi
-
-echo "$ac_t""$ac_cv_have_setresgid_decl" 1>&6
- if test x"$ac_cv_have_setresgid_decl" = x"yes"; then
-    cat >> confdefs.h <<\EOF
-#define HAVE_SETRESGID_DECL 1
-EOF
-
- fi
-
-
- echo $ac_n "checking for asprintf declaration""... $ac_c" 1>&6
-echo "configure:4209: checking for asprintf declaration" >&5
-if eval "test \"`echo '$''{'ac_cv_have_asprintf_decl'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-    cat > conftest.$ac_ext <<EOF
-#line 4215 "configure"
-#include "confdefs.h"
-#include <stdio.h>
-int main() {
-int i = (int)asprintf
-; return 0; }
-EOF
-if { (eval echo configure:4222: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-  rm -rf conftest*
-  ac_cv_have_asprintf_decl=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  ac_cv_have_asprintf_decl=no
-fi
-rm -f conftest*
-fi
-
-echo "$ac_t""$ac_cv_have_asprintf_decl" 1>&6
- if test x"$ac_cv_have_asprintf_decl" = x"yes"; then
-    cat >> confdefs.h <<\EOF
-#define HAVE_ASPRINTF_DECL 1
-EOF
-
- fi
-
-
- echo $ac_n "checking for vasprintf declaration""... $ac_c" 1>&6
-echo "configure:4244: checking for vasprintf declaration" >&5
-if eval "test \"`echo '$''{'ac_cv_have_vasprintf_decl'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-    cat > conftest.$ac_ext <<EOF
-#line 4250 "configure"
-#include "confdefs.h"
-#include <stdio.h>
-int main() {
-int i = (int)vasprintf
-; return 0; }
-EOF
-if { (eval echo configure:4257: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-  rm -rf conftest*
-  ac_cv_have_vasprintf_decl=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  ac_cv_have_vasprintf_decl=no
-fi
-rm -f conftest*
-fi
-
-echo "$ac_t""$ac_cv_have_vasprintf_decl" 1>&6
- if test x"$ac_cv_have_vasprintf_decl" = x"yes"; then
-    cat >> confdefs.h <<\EOF
-#define HAVE_VASPRINTF_DECL 1
-EOF
-
- fi
-
-
- echo $ac_n "checking for vsnprintf declaration""... $ac_c" 1>&6
-echo "configure:4279: checking for vsnprintf declaration" >&5
-if eval "test \"`echo '$''{'ac_cv_have_vsnprintf_decl'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-    cat > conftest.$ac_ext <<EOF
-#line 4285 "configure"
-#include "confdefs.h"
-#include <stdio.h>
-int main() {
-int i = (int)vsnprintf
-; return 0; }
-EOF
-if { (eval echo configure:4292: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-  rm -rf conftest*
-  ac_cv_have_vsnprintf_decl=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  ac_cv_have_vsnprintf_decl=no
-fi
-rm -f conftest*
-fi
-
-echo "$ac_t""$ac_cv_have_vsnprintf_decl" 1>&6
- if test x"$ac_cv_have_vsnprintf_decl" = x"yes"; then
-    cat >> confdefs.h <<\EOF
-#define HAVE_VSNPRINTF_DECL 1
-EOF
-
- fi
-
-
- echo $ac_n "checking for snprintf declaration""... $ac_c" 1>&6
-echo "configure:4314: checking for snprintf declaration" >&5
-if eval "test \"`echo '$''{'ac_cv_have_snprintf_decl'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-    cat > conftest.$ac_ext <<EOF
-#line 4320 "configure"
-#include "confdefs.h"
-#include <stdio.h>
-int main() {
-int i = (int)snprintf
-; return 0; }
-EOF
-if { (eval echo configure:4327: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-  rm -rf conftest*
-  ac_cv_have_snprintf_decl=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  ac_cv_have_snprintf_decl=no
-fi
-rm -f conftest*
-fi
-
-echo "$ac_t""$ac_cv_have_snprintf_decl" 1>&6
- if test x"$ac_cv_have_snprintf_decl" = x"yes"; then
-    cat >> confdefs.h <<\EOF
-#define HAVE_SNPRINTF_DECL 1
-EOF
-
- fi
-
-
-# and glibc has setresuid under linux but the function does
-# nothing until kernel 2.1.44! very dumb.
-echo $ac_n "checking for real setresuid""... $ac_c" 1>&6
-echo "configure:4351: checking for real setresuid" >&5
-if eval "test \"`echo '$''{'samba_cv_have_setresuid'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-    if test "$cross_compiling" = yes; then
-  samba_cv_have_setresuid=cross
-else
-  cat > conftest.$ac_ext <<EOF
-#line 4360 "configure"
-#include "confdefs.h"
-#include <errno.h>
-main() { setresuid(1,1,1); setresuid(2,2,2); exit(errno==EPERM?0:1);}
-EOF
-if { (eval echo configure:4365: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  samba_cv_have_setresuid=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  samba_cv_have_setresuid=no
-fi
-rm -fr conftest*
-fi
-
-fi
-
-echo "$ac_t""$samba_cv_have_setresuid" 1>&6
-if test x"$samba_cv_have_setresuid" = x"yes"; then
-    cat >> confdefs.h <<\EOF
-#define HAVE_SETRESUID 1
-EOF
-
-fi
-
-# Do the same check for setresguid...
-#
-echo $ac_n "checking for real setresgid""... $ac_c" 1>&6
-echo "configure:4390: checking for real setresgid" >&5
-if eval "test \"`echo '$''{'samba_cv_have_setresgid'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-    if test "$cross_compiling" = yes; then
-  samba_cv_have_setresgid=cross
-else
-  cat > conftest.$ac_ext <<EOF
-#line 4399 "configure"
-#include "confdefs.h"
-#include <unistd.h>
-#include <errno.h>
-main() { errno = 0; setresgid(1,1,1); exit(errno != 0 ? (errno==EPERM ? 0 : 1) : 0);}
-EOF
-if { (eval echo configure:4405: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  samba_cv_have_setresgid=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  samba_cv_have_setresgid=no
-fi
-rm -fr conftest*
-fi
-
-fi
-
-echo "$ac_t""$samba_cv_have_setresgid" 1>&6
-if test x"$samba_cv_have_setresgid" = x"yes"; then
-    cat >> confdefs.h <<\EOF
-#define HAVE_SETRESGID 1
-EOF
-
-fi
-
-echo $ac_n "checking for 8-bit clean memcmp""... $ac_c" 1>&6
-echo "configure:4428: checking for 8-bit clean memcmp" >&5
-if eval "test \"`echo '$''{'ac_cv_func_memcmp_clean'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  if test "$cross_compiling" = yes; then
-  ac_cv_func_memcmp_clean=no
-else
-  cat > conftest.$ac_ext <<EOF
-#line 4436 "configure"
-#include "confdefs.h"
-
-main()
-{
-  char c0 = 0x40, c1 = 0x80, c2 = 0x81;
-  exit(memcmp(&c0, &c2, 1) < 0 && memcmp(&c1, &c2, 1) < 0 ? 0 : 1);
-}
-
-EOF
-if { (eval echo configure:4446: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  ac_cv_func_memcmp_clean=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  ac_cv_func_memcmp_clean=no
-fi
-rm -fr conftest*
-fi
-
-fi
-
-echo "$ac_t""$ac_cv_func_memcmp_clean" 1>&6
-test $ac_cv_func_memcmp_clean = no && LIBOBJS="$LIBOBJS memcmp.${ac_objext}"
-
-
-###############################################
-# Readline included by default unless explicitly asked not to
-test "${with_readline+set}" != "set" && with_readline=yes
-
-# test for where we get readline() from
-echo $ac_n "checking whether to use readline""... $ac_c" 1>&6
-echo "configure:4470: checking whether to use readline" >&5
-# Check whether --with-readline or --without-readline was given.
-if test "${with_readline+set}" = set; then
-  withval="$with_readline"
-    case "$with_readline" in
-  yes)
-    echo "$ac_t""yes" 1>&6
-
-    for ac_hdr in readline.h history.h readline/readline.h
-do
-ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
-echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
-echo "configure:4482: checking for $ac_hdr" >&5
-if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 4487 "configure"
-#include "confdefs.h"
-#include <$ac_hdr>
-EOF
-ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:4492: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
-ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
-if test -z "$ac_err"; then
-  rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=yes"
-else
-  echo "$ac_err" >&5
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=no"
-fi
-rm -f conftest*
-fi
-if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_hdr 1
-EOF
- 
-else
-  echo "$ac_t""no" 1>&6
-fi
-done
-
-    for ac_hdr in readline/history.h
-do
-ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
-echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
-echo "configure:4522: checking for $ac_hdr" >&5
-if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 4527 "configure"
-#include "confdefs.h"
-#include <$ac_hdr>
-EOF
-ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:4532: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
-ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
-if test -z "$ac_err"; then
-  rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=yes"
-else
-  echo "$ac_err" >&5
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=no"
-fi
-rm -f conftest*
-fi
-if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_hdr 1
-EOF
- 
-else
-  echo "$ac_t""no" 1>&6
-fi
-done
-
-
-    for ac_hdr in readline.h readline/readline.h
-do
-ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
-echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
-echo "configure:4563: checking for $ac_hdr" >&5
-if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 4568 "configure"
-#include "confdefs.h"
-#include <$ac_hdr>
-EOF
-ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:4573: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
-ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
-if test -z "$ac_err"; then
-  rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=yes"
-else
-  echo "$ac_err" >&5
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=no"
-fi
-rm -f conftest*
-fi
-if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_hdr 1
-EOF
- 
-      for termlib in ncurses curses termcap terminfo termlib; do
-       echo $ac_n "checking for tgetent in -l${termlib}""... $ac_c" 1>&6
-echo "configure:4596: checking for tgetent in -l${termlib}" >&5
-ac_lib_var=`echo ${termlib}'_'tgetent | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-l${termlib}  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 4604 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char tgetent();
-
-int main() {
-tgetent()
-; return 0; }
-EOF
-if { (eval echo configure:4615: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
-
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  TERMLIBS="-l${termlib}"; break
-else
-  echo "$ac_t""no" 1>&6
-fi
-
-      done
-      echo $ac_n "checking for rl_callback_handler_install in -lreadline""... $ac_c" 1>&6
-echo "configure:4637: checking for rl_callback_handler_install in -lreadline" >&5
-ac_lib_var=`echo readline'_'rl_callback_handler_install | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lreadline $TERMLIBS $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 4645 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char rl_callback_handler_install();
-
-int main() {
-rl_callback_handler_install()
-; return 0; }
-EOF
-if { (eval echo configure:4656: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
-
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  TERMLIBS="-lreadline $TERMLIBS"
-       cat >> confdefs.h <<\EOF
-#define HAVE_LIBREADLINE 1
-EOF
-
-       break
-else
-  echo "$ac_t""no" 1>&6
-TERMLIBS=
-fi
-
-else
-  echo "$ac_t""no" 1>&6
-fi
-done
-
-    ;;
-  no)
-    echo "$ac_t""no" 1>&6
-    ;;
-  *)
-    echo "$ac_t""yes" 1>&6
-
-    # Needed for AC_CHECK_HEADERS and AC_CHECK_LIB to look at
-    # alternate readline path
-    _ldflags=${LDFLAGS}
-    _cppflags=${CPPFLAGS}
-
-    # Add additional search path
-    LDFLAGS="-L$with_readline/lib $LDFLAGS"
-    CPPFLAGS="-I$with_readline/include $CPPFLAGS"
-
-    for ac_hdr in readline.h history.h readline/readline.h
-do
-ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
-echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
-echo "configure:4707: checking for $ac_hdr" >&5
-if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 4712 "configure"
-#include "confdefs.h"
-#include <$ac_hdr>
-EOF
-ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:4717: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
-ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
-if test -z "$ac_err"; then
-  rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=yes"
-else
-  echo "$ac_err" >&5
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=no"
-fi
-rm -f conftest*
-fi
-if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_hdr 1
-EOF
- 
-else
-  echo "$ac_t""no" 1>&6
-fi
-done
-
-    for ac_hdr in readline/history.h
-do
-ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
-echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
-echo "configure:4747: checking for $ac_hdr" >&5
-if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 4752 "configure"
-#include "confdefs.h"
-#include <$ac_hdr>
-EOF
-ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:4757: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
-ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
-if test -z "$ac_err"; then
-  rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=yes"
-else
-  echo "$ac_err" >&5
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=no"
-fi
-rm -f conftest*
-fi
-if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_hdr 1
-EOF
- 
-else
-  echo "$ac_t""no" 1>&6
-fi
-done
-
-
-    for ac_hdr in readline.h readline/readline.h
-do
-ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
-echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
-echo "configure:4788: checking for $ac_hdr" >&5
-if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 4793 "configure"
-#include "confdefs.h"
-#include <$ac_hdr>
-EOF
-ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:4798: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
-ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
-if test -z "$ac_err"; then
-  rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=yes"
-else
-  echo "$ac_err" >&5
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=no"
-fi
-rm -f conftest*
-fi
-if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_hdr 1
-EOF
- 
-      for termlib in ncurses curses termcap terminfo termlib; do
-       echo $ac_n "checking for tgetent in -l${termlib}""... $ac_c" 1>&6
-echo "configure:4821: checking for tgetent in -l${termlib}" >&5
-ac_lib_var=`echo ${termlib}'_'tgetent | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-l${termlib}  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 4829 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char tgetent();
-
-int main() {
-tgetent()
-; return 0; }
-EOF
-if { (eval echo configure:4840: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
-
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  TERMLIBS="-l${termlib}"; break
-else
-  echo "$ac_t""no" 1>&6
-fi
-
-      done
-      echo $ac_n "checking for rl_callback_handler_install in -lreadline""... $ac_c" 1>&6
-echo "configure:4862: checking for rl_callback_handler_install in -lreadline" >&5
-ac_lib_var=`echo readline'_'rl_callback_handler_install | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lreadline $TERMLIBS $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 4870 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char rl_callback_handler_install();
-
-int main() {
-rl_callback_handler_install()
-; return 0; }
-EOF
-if { (eval echo configure:4881: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
-
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  TERMLDFLAGS="-L$with_readline/lib"
-       TERMCPPFLAGS="-I$with_readline/include"
-       CPPFLAGS="-I$with_readline/include $CPPFLAGS"
-       TERMLIBS="-lreadline $TERMLIBS"
-       cat >> confdefs.h <<\EOF
-#define HAVE_LIBREADLINE 1
-EOF
-
-       break
-else
-  echo "$ac_t""no" 1>&6
-TERMLIBS= CPPFLAGS=$_cppflags
-fi
-
-else
-  echo "$ac_t""no" 1>&6
-fi
-done
-
-
-    LDFLAGS=$_ldflags
-    ;;
-  esac
-else
-  echo "$ac_t""no" 1>&6
-
-fi
-
-
-
-
-# The following test taken from the cvs sources
-# If we can't find connect, try looking in -lsocket, -lnsl, and -linet.
-# The Irix 5 libc.so has connect and gethostbyname, but Irix 5 also has
-# libsocket.so which has a bad implementation of gethostbyname (it
-# only looks in /etc/hosts), so we only look for -lsocket if we need
-# it.
-for ac_func in connect
-do
-echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:4936: checking for $ac_func" >&5
-if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 4941 "configure"
-#include "confdefs.h"
-/* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char $ac_func(); below.  */
-#include <assert.h>
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char $ac_func();
-
-int main() {
-
-/* The GNU C library defines this for functions which it implements
-    to always fail with ENOSYS.  Some functions are actually named
-    something starting with __ and the normal name is an alias.  */
-#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
-choke me
-#else
-$ac_func();
-#endif
-
-; return 0; }
-EOF
-if { (eval echo configure:4964: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=no"
-fi
-rm -f conftest*
-fi
-
-if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_func 1
-EOF
- 
-else
-  echo "$ac_t""no" 1>&6
-fi
-done
-
-if test x"$ac_cv_func_connect" = x"no"; then
-    case "$LIBS" in
-    *-lnsl*) ;;
-    *) echo $ac_n "checking for printf in -lnsl_s""... $ac_c" 1>&6
-echo "configure:4992: checking for printf in -lnsl_s" >&5
-ac_lib_var=`echo nsl_s'_'printf | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lnsl_s  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 5000 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char printf();
-
-int main() {
-printf()
-; return 0; }
-EOF
-if { (eval echo configure:5011: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
-
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_lib=HAVE_LIB`echo nsl_s | sed -e 's/[^a-zA-Z0-9_]/_/g' \
-    -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_lib 1
-EOF
-
-  LIBS="-lnsl_s $LIBS"
-
-else
-  echo "$ac_t""no" 1>&6
-fi
- ;;
-    esac
-    case "$LIBS" in
-    *-lnsl*) ;;
-    *) echo $ac_n "checking for printf in -lnsl""... $ac_c" 1>&6
-echo "configure:5042: checking for printf in -lnsl" >&5
-ac_lib_var=`echo nsl'_'printf | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lnsl  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 5050 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char printf();
-
-int main() {
-printf()
-; return 0; }
-EOF
-if { (eval echo configure:5061: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
-
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_lib=HAVE_LIB`echo nsl | sed -e 's/[^a-zA-Z0-9_]/_/g' \
-    -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_lib 1
-EOF
-
-  LIBS="-lnsl $LIBS"
-
-else
-  echo "$ac_t""no" 1>&6
-fi
- ;;
-    esac
-    case "$LIBS" in
-    *-lsocket*) ;;
-    *) echo $ac_n "checking for connect in -lsocket""... $ac_c" 1>&6
-echo "configure:5092: checking for connect in -lsocket" >&5
-ac_lib_var=`echo socket'_'connect | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lsocket  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 5100 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char connect();
-
-int main() {
-connect()
-; return 0; }
-EOF
-if { (eval echo configure:5111: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
-
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_lib=HAVE_LIB`echo socket | sed -e 's/[^a-zA-Z0-9_]/_/g' \
-    -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_lib 1
-EOF
-
-  LIBS="-lsocket $LIBS"
-
-else
-  echo "$ac_t""no" 1>&6
-fi
- ;;
-    esac
-    case "$LIBS" in
-    *-linet*) ;;
-    *) echo $ac_n "checking for connect in -linet""... $ac_c" 1>&6
-echo "configure:5142: checking for connect in -linet" >&5
-ac_lib_var=`echo inet'_'connect | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-linet  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 5150 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char connect();
-
-int main() {
-connect()
-; return 0; }
-EOF
-if { (eval echo configure:5161: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
-
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_lib=HAVE_LIB`echo inet | sed -e 's/[^a-zA-Z0-9_]/_/g' \
-    -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_lib 1
-EOF
-
-  LIBS="-linet $LIBS"
-
-else
-  echo "$ac_t""no" 1>&6
-fi
- ;;
-    esac
-            if test x"$ac_cv_lib_socket_connect" = x"yes" || 
-       test x"$ac_cv_lib_inet_connect" = x"yes"; then
-        # ac_cv_func_connect=yes
-        # don't!  it would cause AC_CHECK_FUNC to succeed next time configure is run
-        cat >> confdefs.h <<\EOF
-#define HAVE_CONNECT 1
-EOF
-
-    fi
-fi
-
-###############################################
-# test for where we get get_yp_default_domain() from
-for ac_func in yp_get_default_domain
-do
-echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:5205: checking for $ac_func" >&5
-if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 5210 "configure"
-#include "confdefs.h"
-/* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char $ac_func(); below.  */
-#include <assert.h>
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char $ac_func();
-
-int main() {
-
-/* The GNU C library defines this for functions which it implements
-    to always fail with ENOSYS.  Some functions are actually named
-    something starting with __ and the normal name is an alias.  */
-#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
-choke me
-#else
-$ac_func();
-#endif
-
-; return 0; }
-EOF
-if { (eval echo configure:5233: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=no"
-fi
-rm -f conftest*
-fi
-
-if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_func 1
-EOF
- 
-else
-  echo "$ac_t""no" 1>&6
-fi
-done
-
-if test x"$ac_cv_func_yp_get_default_domain" = x"no"; then
-	echo $ac_n "checking for yp_get_default_domain in -lnsl""... $ac_c" 1>&6
-echo "configure:5259: checking for yp_get_default_domain in -lnsl" >&5
-ac_lib_var=`echo nsl'_'yp_get_default_domain | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lnsl  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 5267 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char yp_get_default_domain();
-
-int main() {
-yp_get_default_domain()
-; return 0; }
-EOF
-if { (eval echo configure:5278: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
-
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  LIBS="$LIBS -lnsl";
-	cat >> confdefs.h <<\EOF
-#define HAVE_YP_GET_DEFAULT_DOMAIN 1
-EOF
-
-else
-  echo "$ac_t""no" 1>&6
-fi
- 
-fi
-
-# Check if we have execl, if not we need to compile smbrun.
-for ac_func in execl
-do
-echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:5308: checking for $ac_func" >&5
-if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 5313 "configure"
-#include "confdefs.h"
-/* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char $ac_func(); below.  */
-#include <assert.h>
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char $ac_func();
-
-int main() {
-
-/* The GNU C library defines this for functions which it implements
-    to always fail with ENOSYS.  Some functions are actually named
-    something starting with __ and the normal name is an alias.  */
-#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
-choke me
-#else
-$ac_func();
-#endif
-
-; return 0; }
-EOF
-if { (eval echo configure:5336: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=no"
-fi
-rm -f conftest*
-fi
-
-if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_func 1
-EOF
- 
-else
-  echo "$ac_t""no" 1>&6
-fi
-done
-
-if test x"$ac_cv_func_execl" = x"no"; then
-    RUNPROG="bin/smbrun"
-else
-    RUNPROG=""
-fi
-
-for ac_func in dlopen dlclose dlsym dlerror waitpid getcwd strdup strndup strnlen strtoul strerror chown fchown chmod fchmod chroot link
-do
-echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:5369: checking for $ac_func" >&5
-if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 5374 "configure"
-#include "confdefs.h"
-/* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char $ac_func(); below.  */
-#include <assert.h>
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char $ac_func();
-
-int main() {
-
-/* The GNU C library defines this for functions which it implements
-    to always fail with ENOSYS.  Some functions are actually named
-    something starting with __ and the normal name is an alias.  */
-#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
-choke me
-#else
-$ac_func();
-#endif
-
-; return 0; }
-EOF
-if { (eval echo configure:5397: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=no"
-fi
-rm -f conftest*
-fi
-
-if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_func 1
-EOF
- 
-else
-  echo "$ac_t""no" 1>&6
-fi
-done
-
-for ac_func in fstat strchr utime utimes getrlimit fsync bzero memset strlcpy strlcat setpgid mknod mknod64
-do
-echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:5424: checking for $ac_func" >&5
-if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 5429 "configure"
-#include "confdefs.h"
-/* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char $ac_func(); below.  */
-#include <assert.h>
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char $ac_func();
-
-int main() {
-
-/* The GNU C library defines this for functions which it implements
-    to always fail with ENOSYS.  Some functions are actually named
-    something starting with __ and the normal name is an alias.  */
-#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
-choke me
-#else
-$ac_func();
-#endif
-
-; return 0; }
-EOF
-if { (eval echo configure:5452: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=no"
-fi
-rm -f conftest*
-fi
-
-if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_func 1
-EOF
- 
-else
-  echo "$ac_t""no" 1>&6
-fi
-done
-
-for ac_func in memmove vsnprintf snprintf asprintf vasprintf setsid glob strpbrk pipe crypt16 getauthuid
-do
-echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:5479: checking for $ac_func" >&5
-if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 5484 "configure"
-#include "confdefs.h"
-/* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char $ac_func(); below.  */
-#include <assert.h>
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char $ac_func();
-
-int main() {
-
-/* The GNU C library defines this for functions which it implements
-    to always fail with ENOSYS.  Some functions are actually named
-    something starting with __ and the normal name is an alias.  */
-#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
-choke me
-#else
-$ac_func();
-#endif
-
-; return 0; }
-EOF
-if { (eval echo configure:5507: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=no"
-fi
-rm -f conftest*
-fi
-
-if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_func 1
-EOF
- 
-else
-  echo "$ac_t""no" 1>&6
-fi
-done
-
-for ac_func in strftime sigprocmask sigblock sigaction sigset innetgr setnetgrent getnetgrent endnetgrent
-do
-echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:5534: checking for $ac_func" >&5
-if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 5539 "configure"
-#include "confdefs.h"
-/* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char $ac_func(); below.  */
-#include <assert.h>
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char $ac_func();
-
-int main() {
-
-/* The GNU C library defines this for functions which it implements
-    to always fail with ENOSYS.  Some functions are actually named
-    something starting with __ and the normal name is an alias.  */
-#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
-choke me
-#else
-$ac_func();
-#endif
-
-; return 0; }
-EOF
-if { (eval echo configure:5562: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=no"
-fi
-rm -f conftest*
-fi
-
-if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_func 1
-EOF
- 
-else
-  echo "$ac_t""no" 1>&6
-fi
-done
-
-for ac_func in initgroups select poll rdchk getgrnam getgrent pathconf realpath
-do
-echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:5589: checking for $ac_func" >&5
-if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 5594 "configure"
-#include "confdefs.h"
-/* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char $ac_func(); below.  */
-#include <assert.h>
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char $ac_func();
-
-int main() {
-
-/* The GNU C library defines this for functions which it implements
-    to always fail with ENOSYS.  Some functions are actually named
-    something starting with __ and the normal name is an alias.  */
-#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
-choke me
-#else
-$ac_func();
-#endif
-
-; return 0; }
-EOF
-if { (eval echo configure:5617: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=no"
-fi
-rm -f conftest*
-fi
-
-if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_func 1
-EOF
- 
-else
-  echo "$ac_t""no" 1>&6
-fi
-done
-
-for ac_func in setpriv setgidx setuidx setgroups sysconf mktime rename ftruncate stat64 fstat64
-do
-echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:5644: checking for $ac_func" >&5
-if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 5649 "configure"
-#include "confdefs.h"
-/* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char $ac_func(); below.  */
-#include <assert.h>
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char $ac_func();
-
-int main() {
-
-/* The GNU C library defines this for functions which it implements
-    to always fail with ENOSYS.  Some functions are actually named
-    something starting with __ and the normal name is an alias.  */
-#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
-choke me
-#else
-$ac_func();
-#endif
-
-; return 0; }
-EOF
-if { (eval echo configure:5672: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=no"
-fi
-rm -f conftest*
-fi
-
-if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_func 1
-EOF
- 
-else
-  echo "$ac_t""no" 1>&6
-fi
-done
-
-for ac_func in lstat64 fopen64 atexit grantpt dup2 lseek64 ftruncate64 readdir64
-do
-echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:5699: checking for $ac_func" >&5
-if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 5704 "configure"
-#include "confdefs.h"
-/* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char $ac_func(); below.  */
-#include <assert.h>
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char $ac_func();
-
-int main() {
-
-/* The GNU C library defines this for functions which it implements
-    to always fail with ENOSYS.  Some functions are actually named
-    something starting with __ and the normal name is an alias.  */
-#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
-choke me
-#else
-$ac_func();
-#endif
-
-; return 0; }
-EOF
-if { (eval echo configure:5727: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=no"
-fi
-rm -f conftest*
-fi
-
-if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_func 1
-EOF
- 
-else
-  echo "$ac_t""no" 1>&6
-fi
-done
-
-for ac_func in fseek64 fseeko64 ftell64 ftello64 setluid getpwanam setlinebuf
-do
-echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:5754: checking for $ac_func" >&5
-if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 5759 "configure"
-#include "confdefs.h"
-/* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char $ac_func(); below.  */
-#include <assert.h>
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char $ac_func();
-
-int main() {
-
-/* The GNU C library defines this for functions which it implements
-    to always fail with ENOSYS.  Some functions are actually named
-    something starting with __ and the normal name is an alias.  */
-#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
-choke me
-#else
-$ac_func();
-#endif
-
-; return 0; }
-EOF
-if { (eval echo configure:5782: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=no"
-fi
-rm -f conftest*
-fi
-
-if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_func 1
-EOF
- 
-else
-  echo "$ac_t""no" 1>&6
-fi
-done
-
-for ac_func in srandom random srand rand setenv usleep strcasecmp fcvt fcvtl symlink readlink
-do
-echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:5809: checking for $ac_func" >&5
-if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 5814 "configure"
-#include "confdefs.h"
-/* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char $ac_func(); below.  */
-#include <assert.h>
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char $ac_func();
-
-int main() {
-
-/* The GNU C library defines this for functions which it implements
-    to always fail with ENOSYS.  Some functions are actually named
-    something starting with __ and the normal name is an alias.  */
-#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
-choke me
-#else
-$ac_func();
-#endif
-
-; return 0; }
-EOF
-if { (eval echo configure:5837: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=no"
-fi
-rm -f conftest*
-fi
-
-if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_func 1
-EOF
- 
-else
-  echo "$ac_t""no" 1>&6
-fi
-done
-
-for ac_func in syslog vsyslog
-do
-echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:5864: checking for $ac_func" >&5
-if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 5869 "configure"
-#include "confdefs.h"
-/* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char $ac_func(); below.  */
-#include <assert.h>
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char $ac_func();
-
-int main() {
-
-/* The GNU C library defines this for functions which it implements
-    to always fail with ENOSYS.  Some functions are actually named
-    something starting with __ and the normal name is an alias.  */
-#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
-choke me
-#else
-$ac_func();
-#endif
-
-; return 0; }
-EOF
-if { (eval echo configure:5892: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=no"
-fi
-rm -f conftest*
-fi
-
-if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_func 1
-EOF
- 
-else
-  echo "$ac_t""no" 1>&6
-fi
-done
-
-
-# syscall() is needed for smbwrapper.
-for ac_func in syscall
-do
-echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:5921: checking for $ac_func" >&5
-if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 5926 "configure"
-#include "confdefs.h"
-/* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char $ac_func(); below.  */
-#include <assert.h>
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char $ac_func();
-
-int main() {
-
-/* The GNU C library defines this for functions which it implements
-    to always fail with ENOSYS.  Some functions are actually named
-    something starting with __ and the normal name is an alias.  */
-#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
-choke me
-#else
-$ac_func();
-#endif
-
-; return 0; }
-EOF
-if { (eval echo configure:5949: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=no"
-fi
-rm -f conftest*
-fi
-
-if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_func 1
-EOF
- 
-else
-  echo "$ac_t""no" 1>&6
-fi
-done
-
-
-for ac_func in _dup _dup2 _opendir _readdir _seekdir _telldir _closedir
-do
-echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:5977: checking for $ac_func" >&5
-if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 5982 "configure"
-#include "confdefs.h"
-/* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char $ac_func(); below.  */
-#include <assert.h>
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char $ac_func();
-
-int main() {
-
-/* The GNU C library defines this for functions which it implements
-    to always fail with ENOSYS.  Some functions are actually named
-    something starting with __ and the normal name is an alias.  */
-#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
-choke me
-#else
-$ac_func();
-#endif
-
-; return 0; }
-EOF
-if { (eval echo configure:6005: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=no"
-fi
-rm -f conftest*
-fi
-
-if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_func 1
-EOF
- 
-else
-  echo "$ac_t""no" 1>&6
-fi
-done
-
-for ac_func in __dup __dup2 __opendir __readdir __seekdir __telldir __closedir
-do
-echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:6032: checking for $ac_func" >&5
-if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 6037 "configure"
-#include "confdefs.h"
-/* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char $ac_func(); below.  */
-#include <assert.h>
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char $ac_func();
-
-int main() {
-
-/* The GNU C library defines this for functions which it implements
-    to always fail with ENOSYS.  Some functions are actually named
-    something starting with __ and the normal name is an alias.  */
-#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
-choke me
-#else
-$ac_func();
-#endif
-
-; return 0; }
-EOF
-if { (eval echo configure:6060: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=no"
-fi
-rm -f conftest*
-fi
-
-if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_func 1
-EOF
- 
-else
-  echo "$ac_t""no" 1>&6
-fi
-done
-
-for ac_func in __getcwd _getcwd
-do
-echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:6087: checking for $ac_func" >&5
-if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 6092 "configure"
-#include "confdefs.h"
-/* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char $ac_func(); below.  */
-#include <assert.h>
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char $ac_func();
-
-int main() {
-
-/* The GNU C library defines this for functions which it implements
-    to always fail with ENOSYS.  Some functions are actually named
-    something starting with __ and the normal name is an alias.  */
-#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
-choke me
-#else
-$ac_func();
-#endif
-
-; return 0; }
-EOF
-if { (eval echo configure:6115: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=no"
-fi
-rm -f conftest*
-fi
-
-if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_func 1
-EOF
- 
-else
-  echo "$ac_t""no" 1>&6
-fi
-done
-
-for ac_func in __xstat __fxstat __lxstat
-do
-echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:6142: checking for $ac_func" >&5
-if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 6147 "configure"
-#include "confdefs.h"
-/* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char $ac_func(); below.  */
-#include <assert.h>
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char $ac_func();
-
-int main() {
-
-/* The GNU C library defines this for functions which it implements
-    to always fail with ENOSYS.  Some functions are actually named
-    something starting with __ and the normal name is an alias.  */
-#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
-choke me
-#else
-$ac_func();
-#endif
-
-; return 0; }
-EOF
-if { (eval echo configure:6170: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=no"
-fi
-rm -f conftest*
-fi
-
-if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_func 1
-EOF
- 
-else
-  echo "$ac_t""no" 1>&6
-fi
-done
-
-for ac_func in _stat _lstat _fstat __stat __lstat __fstat
-do
-echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:6197: checking for $ac_func" >&5
-if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 6202 "configure"
-#include "confdefs.h"
-/* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char $ac_func(); below.  */
-#include <assert.h>
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char $ac_func();
-
-int main() {
-
-/* The GNU C library defines this for functions which it implements
-    to always fail with ENOSYS.  Some functions are actually named
-    something starting with __ and the normal name is an alias.  */
-#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
-choke me
-#else
-$ac_func();
-#endif
-
-; return 0; }
-EOF
-if { (eval echo configure:6225: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=no"
-fi
-rm -f conftest*
-fi
-
-if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_func 1
-EOF
- 
-else
-  echo "$ac_t""no" 1>&6
-fi
-done
-
-for ac_func in _acl __acl _facl __facl _open __open _chdir __chdir
-do
-echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:6252: checking for $ac_func" >&5
-if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 6257 "configure"
-#include "confdefs.h"
-/* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char $ac_func(); below.  */
-#include <assert.h>
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char $ac_func();
-
-int main() {
-
-/* The GNU C library defines this for functions which it implements
-    to always fail with ENOSYS.  Some functions are actually named
-    something starting with __ and the normal name is an alias.  */
-#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
-choke me
-#else
-$ac_func();
-#endif
-
-; return 0; }
-EOF
-if { (eval echo configure:6280: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=no"
-fi
-rm -f conftest*
-fi
-
-if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_func 1
-EOF
- 
-else
-  echo "$ac_t""no" 1>&6
-fi
-done
-
-for ac_func in _close __close _fchdir __fchdir _fcntl __fcntl
-do
-echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:6307: checking for $ac_func" >&5
-if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 6312 "configure"
-#include "confdefs.h"
-/* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char $ac_func(); below.  */
-#include <assert.h>
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char $ac_func();
-
-int main() {
-
-/* The GNU C library defines this for functions which it implements
-    to always fail with ENOSYS.  Some functions are actually named
-    something starting with __ and the normal name is an alias.  */
-#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
-choke me
-#else
-$ac_func();
-#endif
-
-; return 0; }
-EOF
-if { (eval echo configure:6335: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=no"
-fi
-rm -f conftest*
-fi
-
-if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_func 1
-EOF
- 
-else
-  echo "$ac_t""no" 1>&6
-fi
-done
-
-for ac_func in getdents _getdents __getdents _lseek __lseek _read __read
-do
-echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:6362: checking for $ac_func" >&5
-if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 6367 "configure"
-#include "confdefs.h"
-/* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char $ac_func(); below.  */
-#include <assert.h>
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char $ac_func();
-
-int main() {
-
-/* The GNU C library defines this for functions which it implements
-    to always fail with ENOSYS.  Some functions are actually named
-    something starting with __ and the normal name is an alias.  */
-#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
-choke me
-#else
-$ac_func();
-#endif
-
-; return 0; }
-EOF
-if { (eval echo configure:6390: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=no"
-fi
-rm -f conftest*
-fi
-
-if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_func 1
-EOF
- 
-else
-  echo "$ac_t""no" 1>&6
-fi
-done
-
-for ac_func in _write __write _fork __fork
-do
-echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:6417: checking for $ac_func" >&5
-if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 6422 "configure"
-#include "confdefs.h"
-/* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char $ac_func(); below.  */
-#include <assert.h>
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char $ac_func();
-
-int main() {
-
-/* The GNU C library defines this for functions which it implements
-    to always fail with ENOSYS.  Some functions are actually named
-    something starting with __ and the normal name is an alias.  */
-#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
-choke me
-#else
-$ac_func();
-#endif
-
-; return 0; }
-EOF
-if { (eval echo configure:6445: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=no"
-fi
-rm -f conftest*
-fi
-
-if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_func 1
-EOF
- 
-else
-  echo "$ac_t""no" 1>&6
-fi
-done
-
-for ac_func in _stat64 __stat64 _fstat64 __fstat64 _lstat64 __lstat64
-do
-echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:6472: checking for $ac_func" >&5
-if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 6477 "configure"
-#include "confdefs.h"
-/* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char $ac_func(); below.  */
-#include <assert.h>
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char $ac_func();
-
-int main() {
-
-/* The GNU C library defines this for functions which it implements
-    to always fail with ENOSYS.  Some functions are actually named
-    something starting with __ and the normal name is an alias.  */
-#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
-choke me
-#else
-$ac_func();
-#endif
-
-; return 0; }
-EOF
-if { (eval echo configure:6500: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=no"
-fi
-rm -f conftest*
-fi
-
-if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_func 1
-EOF
- 
-else
-  echo "$ac_t""no" 1>&6
-fi
-done
-
-for ac_func in __sys_llseek llseek _llseek __llseek readdir64 _readdir64 __readdir64
-do
-echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:6527: checking for $ac_func" >&5
-if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 6532 "configure"
-#include "confdefs.h"
-/* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char $ac_func(); below.  */
-#include <assert.h>
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char $ac_func();
-
-int main() {
-
-/* The GNU C library defines this for functions which it implements
-    to always fail with ENOSYS.  Some functions are actually named
-    something starting with __ and the normal name is an alias.  */
-#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
-choke me
-#else
-$ac_func();
-#endif
-
-; return 0; }
-EOF
-if { (eval echo configure:6555: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=no"
-fi
-rm -f conftest*
-fi
-
-if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_func 1
-EOF
- 
-else
-  echo "$ac_t""no" 1>&6
-fi
-done
-
-for ac_func in pread _pread __pread pread64 _pread64 __pread64
-do
-echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:6582: checking for $ac_func" >&5
-if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 6587 "configure"
-#include "confdefs.h"
-/* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char $ac_func(); below.  */
-#include <assert.h>
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char $ac_func();
-
-int main() {
-
-/* The GNU C library defines this for functions which it implements
-    to always fail with ENOSYS.  Some functions are actually named
-    something starting with __ and the normal name is an alias.  */
-#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
-choke me
-#else
-$ac_func();
-#endif
-
-; return 0; }
-EOF
-if { (eval echo configure:6610: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=no"
-fi
-rm -f conftest*
-fi
-
-if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_func 1
-EOF
- 
-else
-  echo "$ac_t""no" 1>&6
-fi
-done
-
-for ac_func in pwrite _pwrite __pwrite pwrite64 _pwrite64 __pwrite64
-do
-echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:6637: checking for $ac_func" >&5
-if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 6642 "configure"
-#include "confdefs.h"
-/* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char $ac_func(); below.  */
-#include <assert.h>
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char $ac_func();
-
-int main() {
-
-/* The GNU C library defines this for functions which it implements
-    to always fail with ENOSYS.  Some functions are actually named
-    something starting with __ and the normal name is an alias.  */
-#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
-choke me
-#else
-$ac_func();
-#endif
-
-; return 0; }
-EOF
-if { (eval echo configure:6665: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=no"
-fi
-rm -f conftest*
-fi
-
-if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_func 1
-EOF
- 
-else
-  echo "$ac_t""no" 1>&6
-fi
-done
-
-for ac_func in open64 _open64 __open64 creat64
-do
-echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:6692: checking for $ac_func" >&5
-if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 6697 "configure"
-#include "confdefs.h"
-/* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char $ac_func(); below.  */
-#include <assert.h>
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char $ac_func();
-
-int main() {
-
-/* The GNU C library defines this for functions which it implements
-    to always fail with ENOSYS.  Some functions are actually named
-    something starting with __ and the normal name is an alias.  */
-#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
-choke me
-#else
-$ac_func();
-#endif
-
-; return 0; }
-EOF
-if { (eval echo configure:6720: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=no"
-fi
-rm -f conftest*
-fi
-
-if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_func 1
-EOF
- 
-else
-  echo "$ac_t""no" 1>&6
-fi
-done
-
-
-#
-# stat64 family may need <sys/stat.h> on some systems, notably ReliantUNIX
-#
-
-if test x$ac_cv_func_stat64 = xno ; then
-  echo $ac_n "checking for stat64 in <sys/stat.h>""... $ac_c" 1>&6
-echo "configure:6751: checking for stat64 in <sys/stat.h>" >&5
-  cat > conftest.$ac_ext <<EOF
-#line 6753 "configure"
-#include "confdefs.h"
-
-#if defined(HAVE_UNISTD_H)
-#include <unistd.h>
-#endif
-#include <sys/stat.h>
-
-int main() {
-struct stat64 st64; exit(stat64(".",&st64));
-; return 0; }
-EOF
-if { (eval echo configure:6765: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  ac_cv_func_stat64=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-fi
-rm -f conftest*
-  echo "$ac_t""$ac_cv_func_stat64" 1>&6
-  if test x$ac_cv_func_stat64 = xyes ; then
-    cat >> confdefs.h <<\EOF
-#define HAVE_STAT64 1
-EOF
-
-  fi
-fi
-
-if test x$ac_cv_func_lstat64 = xno ; then
-  echo $ac_n "checking for lstat64 in <sys/stat.h>""... $ac_c" 1>&6
-echo "configure:6784: checking for lstat64 in <sys/stat.h>" >&5
-  cat > conftest.$ac_ext <<EOF
-#line 6786 "configure"
-#include "confdefs.h"
-
-#if defined(HAVE_UNISTD_H)
-#include <unistd.h>
-#endif
-#include <sys/stat.h>
-
-int main() {
-struct stat64 st64; exit(lstat64(".",&st64));
-; return 0; }
-EOF
-if { (eval echo configure:6798: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  ac_cv_func_lstat64=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-fi
-rm -f conftest*
-  echo "$ac_t""$ac_cv_func_lstat64" 1>&6
-  if test x$ac_cv_func_lstat64 = xyes ; then
-    cat >> confdefs.h <<\EOF
-#define HAVE_LSTAT64 1
-EOF
-
-  fi
-fi
-
-if test x$ac_cv_func_fstat64 = xno ; then
-  echo $ac_n "checking for fstat64 in <sys/stat.h>""... $ac_c" 1>&6
-echo "configure:6817: checking for fstat64 in <sys/stat.h>" >&5
-  cat > conftest.$ac_ext <<EOF
-#line 6819 "configure"
-#include "confdefs.h"
-
-#if defined(HAVE_UNISTD_H)
-#include <unistd.h>
-#endif
-#include <sys/stat.h>
-
-int main() {
-struct stat64 st64; exit(fstat64(0,&st64));
-; return 0; }
-EOF
-if { (eval echo configure:6831: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  ac_cv_func_fstat64=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-fi
-rm -f conftest*
-  echo "$ac_t""$ac_cv_func_fstat64" 1>&6
-  if test x$ac_cv_func_fstat64 = xyes ; then
-    cat >> confdefs.h <<\EOF
-#define HAVE_FSTAT64 1
-EOF
-
-  fi
-fi
-
-#
-# If no strcasecmp, check for it in some known places
-# It is in -lresolv on ReliantUNIX and UnixWare
-#   -lresolve *must* follow -lnsl for name resolution to work properly
-#
-
-if test x$ac_cv_func_strcasecmp = xno ; then
-	echo $ac_n "checking for strcasecmp in -lresolv""... $ac_c" 1>&6
-echo "configure:6856: checking for strcasecmp in -lresolv" >&5
-ac_lib_var=`echo resolv'_'strcasecmp | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lresolv  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 6864 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char strcasecmp();
-
-int main() {
-strcasecmp()
-; return 0; }
-EOF
-if { (eval echo configure:6875: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
-
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  LIBS="$LIBS -lresolv"
-		cat >> confdefs.h <<\EOF
-#define HAVE_STRCASECMP 1
-EOF
-
-else
-  echo "$ac_t""no" 1>&6
-fi
-
-fi
-
-#
-# Check for the functions putprpwnam, set_auth_parameters,
-# getspnam, bigcrypt and getprpwnam in -lsec and -lsecurity
-# Needed for OSF1 and HPUX.
-#
-
-case "$LIBS" in
-  *-lsecurity*) for ac_func in putprpwnam
-do
-echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:6911: checking for $ac_func" >&5
-if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 6916 "configure"
-#include "confdefs.h"
-/* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char $ac_func(); below.  */
-#include <assert.h>
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char $ac_func();
-
-int main() {
-
-/* The GNU C library defines this for functions which it implements
-    to always fail with ENOSYS.  Some functions are actually named
-    something starting with __ and the normal name is an alias.  */
-#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
-choke me
-#else
-$ac_func();
-#endif
-
-; return 0; }
-EOF
-if { (eval echo configure:6939: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=no"
-fi
-rm -f conftest*
-fi
-
-if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_func 1
-EOF
- 
-else
-  echo "$ac_t""no" 1>&6
-fi
-done
- ;;
-  *) echo $ac_n "checking for putprpwnam in -lsecurity""... $ac_c" 1>&6
-echo "configure:6964: checking for putprpwnam in -lsecurity" >&5
-ac_lib_var=`echo security'_'putprpwnam | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lsecurity  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 6972 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char putprpwnam();
-
-int main() {
-putprpwnam()
-; return 0; }
-EOF
-if { (eval echo configure:6983: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
-
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_lib=HAVE_LIB`echo security | sed -e 's/[^a-zA-Z0-9_]/_/g' \
-    -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_lib 1
-EOF
-
-  LIBS="-lsecurity $LIBS"
-
-else
-  echo "$ac_t""no" 1>&6
-fi
- 
-     for ac_func in putprpwnam
-do
-echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:7013: checking for $ac_func" >&5
-if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 7018 "configure"
-#include "confdefs.h"
-/* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char $ac_func(); below.  */
-#include <assert.h>
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char $ac_func();
-
-int main() {
-
-/* The GNU C library defines this for functions which it implements
-    to always fail with ENOSYS.  Some functions are actually named
-    something starting with __ and the normal name is an alias.  */
-#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
-choke me
-#else
-$ac_func();
-#endif
-
-; return 0; }
-EOF
-if { (eval echo configure:7041: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=no"
-fi
-rm -f conftest*
-fi
-
-if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_func 1
-EOF
- 
-else
-  echo "$ac_t""no" 1>&6
-fi
-done
-
-  ;;
-  esac
-
-case "$LIBS" in
-  *-lsec*) for ac_func in putprpwnam
-do
-echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:7072: checking for $ac_func" >&5
-if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 7077 "configure"
-#include "confdefs.h"
-/* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char $ac_func(); below.  */
-#include <assert.h>
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char $ac_func();
-
-int main() {
-
-/* The GNU C library defines this for functions which it implements
-    to always fail with ENOSYS.  Some functions are actually named
-    something starting with __ and the normal name is an alias.  */
-#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
-choke me
-#else
-$ac_func();
-#endif
-
-; return 0; }
-EOF
-if { (eval echo configure:7100: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=no"
-fi
-rm -f conftest*
-fi
-
-if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_func 1
-EOF
- 
-else
-  echo "$ac_t""no" 1>&6
-fi
-done
- ;;
-  *) echo $ac_n "checking for putprpwnam in -lsec""... $ac_c" 1>&6
-echo "configure:7125: checking for putprpwnam in -lsec" >&5
-ac_lib_var=`echo sec'_'putprpwnam | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lsec  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 7133 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char putprpwnam();
-
-int main() {
-putprpwnam()
-; return 0; }
-EOF
-if { (eval echo configure:7144: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
-
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_lib=HAVE_LIB`echo sec | sed -e 's/[^a-zA-Z0-9_]/_/g' \
-    -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_lib 1
-EOF
-
-  LIBS="-lsec $LIBS"
-
-else
-  echo "$ac_t""no" 1>&6
-fi
- 
-     for ac_func in putprpwnam
-do
-echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:7174: checking for $ac_func" >&5
-if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 7179 "configure"
-#include "confdefs.h"
-/* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char $ac_func(); below.  */
-#include <assert.h>
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char $ac_func();
-
-int main() {
-
-/* The GNU C library defines this for functions which it implements
-    to always fail with ENOSYS.  Some functions are actually named
-    something starting with __ and the normal name is an alias.  */
-#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
-choke me
-#else
-$ac_func();
-#endif
-
-; return 0; }
-EOF
-if { (eval echo configure:7202: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=no"
-fi
-rm -f conftest*
-fi
-
-if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_func 1
-EOF
- 
-else
-  echo "$ac_t""no" 1>&6
-fi
-done
-
-  ;;
-  esac
-
-
-case "$LIBS" in
-  *-lsecurity*) for ac_func in set_auth_parameters
-do
-echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:7234: checking for $ac_func" >&5
-if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 7239 "configure"
-#include "confdefs.h"
-/* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char $ac_func(); below.  */
-#include <assert.h>
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char $ac_func();
-
-int main() {
-
-/* The GNU C library defines this for functions which it implements
-    to always fail with ENOSYS.  Some functions are actually named
-    something starting with __ and the normal name is an alias.  */
-#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
-choke me
-#else
-$ac_func();
-#endif
-
-; return 0; }
-EOF
-if { (eval echo configure:7262: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=no"
-fi
-rm -f conftest*
-fi
-
-if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_func 1
-EOF
- 
-else
-  echo "$ac_t""no" 1>&6
-fi
-done
- ;;
-  *) echo $ac_n "checking for set_auth_parameters in -lsecurity""... $ac_c" 1>&6
-echo "configure:7287: checking for set_auth_parameters in -lsecurity" >&5
-ac_lib_var=`echo security'_'set_auth_parameters | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lsecurity  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 7295 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char set_auth_parameters();
-
-int main() {
-set_auth_parameters()
-; return 0; }
-EOF
-if { (eval echo configure:7306: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
-
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_lib=HAVE_LIB`echo security | sed -e 's/[^a-zA-Z0-9_]/_/g' \
-    -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_lib 1
-EOF
-
-  LIBS="-lsecurity $LIBS"
-
-else
-  echo "$ac_t""no" 1>&6
-fi
- 
-     for ac_func in set_auth_parameters
-do
-echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:7336: checking for $ac_func" >&5
-if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 7341 "configure"
-#include "confdefs.h"
-/* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char $ac_func(); below.  */
-#include <assert.h>
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char $ac_func();
-
-int main() {
-
-/* The GNU C library defines this for functions which it implements
-    to always fail with ENOSYS.  Some functions are actually named
-    something starting with __ and the normal name is an alias.  */
-#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
-choke me
-#else
-$ac_func();
-#endif
-
-; return 0; }
-EOF
-if { (eval echo configure:7364: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=no"
-fi
-rm -f conftest*
-fi
-
-if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_func 1
-EOF
- 
-else
-  echo "$ac_t""no" 1>&6
-fi
-done
-
-  ;;
-  esac
-
-case "$LIBS" in
-  *-lsec*) for ac_func in set_auth_parameters
-do
-echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:7395: checking for $ac_func" >&5
-if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 7400 "configure"
-#include "confdefs.h"
-/* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char $ac_func(); below.  */
-#include <assert.h>
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char $ac_func();
-
-int main() {
-
-/* The GNU C library defines this for functions which it implements
-    to always fail with ENOSYS.  Some functions are actually named
-    something starting with __ and the normal name is an alias.  */
-#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
-choke me
-#else
-$ac_func();
-#endif
-
-; return 0; }
-EOF
-if { (eval echo configure:7423: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=no"
-fi
-rm -f conftest*
-fi
-
-if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_func 1
-EOF
- 
-else
-  echo "$ac_t""no" 1>&6
-fi
-done
- ;;
-  *) echo $ac_n "checking for set_auth_parameters in -lsec""... $ac_c" 1>&6
-echo "configure:7448: checking for set_auth_parameters in -lsec" >&5
-ac_lib_var=`echo sec'_'set_auth_parameters | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lsec  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 7456 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char set_auth_parameters();
-
-int main() {
-set_auth_parameters()
-; return 0; }
-EOF
-if { (eval echo configure:7467: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
-
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_lib=HAVE_LIB`echo sec | sed -e 's/[^a-zA-Z0-9_]/_/g' \
-    -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_lib 1
-EOF
-
-  LIBS="-lsec $LIBS"
-
-else
-  echo "$ac_t""no" 1>&6
-fi
- 
-     for ac_func in set_auth_parameters
-do
-echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:7497: checking for $ac_func" >&5
-if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 7502 "configure"
-#include "confdefs.h"
-/* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char $ac_func(); below.  */
-#include <assert.h>
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char $ac_func();
-
-int main() {
-
-/* The GNU C library defines this for functions which it implements
-    to always fail with ENOSYS.  Some functions are actually named
-    something starting with __ and the normal name is an alias.  */
-#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
-choke me
-#else
-$ac_func();
-#endif
-
-; return 0; }
-EOF
-if { (eval echo configure:7525: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=no"
-fi
-rm -f conftest*
-fi
-
-if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_func 1
-EOF
- 
-else
-  echo "$ac_t""no" 1>&6
-fi
-done
-
-  ;;
-  esac
-
-
-# UnixWare 7.x has its getspnam in -lgen
-case "$LIBS" in
-  *-lgen*) for ac_func in getspnam
-do
-echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:7558: checking for $ac_func" >&5
-if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 7563 "configure"
-#include "confdefs.h"
-/* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char $ac_func(); below.  */
-#include <assert.h>
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char $ac_func();
-
-int main() {
-
-/* The GNU C library defines this for functions which it implements
-    to always fail with ENOSYS.  Some functions are actually named
-    something starting with __ and the normal name is an alias.  */
-#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
-choke me
-#else
-$ac_func();
-#endif
-
-; return 0; }
-EOF
-if { (eval echo configure:7586: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=no"
-fi
-rm -f conftest*
-fi
-
-if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_func 1
-EOF
- 
-else
-  echo "$ac_t""no" 1>&6
-fi
-done
- ;;
-  *) echo $ac_n "checking for getspnam in -lgen""... $ac_c" 1>&6
-echo "configure:7611: checking for getspnam in -lgen" >&5
-ac_lib_var=`echo gen'_'getspnam | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lgen  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 7619 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char getspnam();
-
-int main() {
-getspnam()
-; return 0; }
-EOF
-if { (eval echo configure:7630: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
-
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_lib=HAVE_LIB`echo gen | sed -e 's/[^a-zA-Z0-9_]/_/g' \
-    -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_lib 1
-EOF
-
-  LIBS="-lgen $LIBS"
-
-else
-  echo "$ac_t""no" 1>&6
-fi
- 
-     for ac_func in getspnam
-do
-echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:7660: checking for $ac_func" >&5
-if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 7665 "configure"
-#include "confdefs.h"
-/* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char $ac_func(); below.  */
-#include <assert.h>
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char $ac_func();
-
-int main() {
-
-/* The GNU C library defines this for functions which it implements
-    to always fail with ENOSYS.  Some functions are actually named
-    something starting with __ and the normal name is an alias.  */
-#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
-choke me
-#else
-$ac_func();
-#endif
-
-; return 0; }
-EOF
-if { (eval echo configure:7688: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=no"
-fi
-rm -f conftest*
-fi
-
-if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_func 1
-EOF
- 
-else
-  echo "$ac_t""no" 1>&6
-fi
-done
-
-  ;;
-  esac
-
-
-case "$LIBS" in
-  *-lsecurity*) for ac_func in getspnam
-do
-echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:7720: checking for $ac_func" >&5
-if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 7725 "configure"
-#include "confdefs.h"
-/* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char $ac_func(); below.  */
-#include <assert.h>
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char $ac_func();
-
-int main() {
-
-/* The GNU C library defines this for functions which it implements
-    to always fail with ENOSYS.  Some functions are actually named
-    something starting with __ and the normal name is an alias.  */
-#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
-choke me
-#else
-$ac_func();
-#endif
-
-; return 0; }
-EOF
-if { (eval echo configure:7748: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=no"
-fi
-rm -f conftest*
-fi
-
-if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_func 1
-EOF
- 
-else
-  echo "$ac_t""no" 1>&6
-fi
-done
- ;;
-  *) echo $ac_n "checking for getspnam in -lsecurity""... $ac_c" 1>&6
-echo "configure:7773: checking for getspnam in -lsecurity" >&5
-ac_lib_var=`echo security'_'getspnam | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lsecurity  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 7781 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char getspnam();
-
-int main() {
-getspnam()
-; return 0; }
-EOF
-if { (eval echo configure:7792: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
-
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_lib=HAVE_LIB`echo security | sed -e 's/[^a-zA-Z0-9_]/_/g' \
-    -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_lib 1
-EOF
-
-  LIBS="-lsecurity $LIBS"
-
-else
-  echo "$ac_t""no" 1>&6
-fi
- 
-     for ac_func in getspnam
-do
-echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:7822: checking for $ac_func" >&5
-if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 7827 "configure"
-#include "confdefs.h"
-/* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char $ac_func(); below.  */
-#include <assert.h>
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char $ac_func();
-
-int main() {
-
-/* The GNU C library defines this for functions which it implements
-    to always fail with ENOSYS.  Some functions are actually named
-    something starting with __ and the normal name is an alias.  */
-#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
-choke me
-#else
-$ac_func();
-#endif
-
-; return 0; }
-EOF
-if { (eval echo configure:7850: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=no"
-fi
-rm -f conftest*
-fi
-
-if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_func 1
-EOF
- 
-else
-  echo "$ac_t""no" 1>&6
-fi
-done
-
-  ;;
-  esac
-
-case "$LIBS" in
-  *-lsec*) for ac_func in getspnam
-do
-echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:7881: checking for $ac_func" >&5
-if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 7886 "configure"
-#include "confdefs.h"
-/* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char $ac_func(); below.  */
-#include <assert.h>
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char $ac_func();
-
-int main() {
-
-/* The GNU C library defines this for functions which it implements
-    to always fail with ENOSYS.  Some functions are actually named
-    something starting with __ and the normal name is an alias.  */
-#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
-choke me
-#else
-$ac_func();
-#endif
-
-; return 0; }
-EOF
-if { (eval echo configure:7909: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=no"
-fi
-rm -f conftest*
-fi
-
-if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_func 1
-EOF
- 
-else
-  echo "$ac_t""no" 1>&6
-fi
-done
- ;;
-  *) echo $ac_n "checking for getspnam in -lsec""... $ac_c" 1>&6
-echo "configure:7934: checking for getspnam in -lsec" >&5
-ac_lib_var=`echo sec'_'getspnam | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lsec  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 7942 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char getspnam();
-
-int main() {
-getspnam()
-; return 0; }
-EOF
-if { (eval echo configure:7953: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
-
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_lib=HAVE_LIB`echo sec | sed -e 's/[^a-zA-Z0-9_]/_/g' \
-    -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_lib 1
-EOF
-
-  LIBS="-lsec $LIBS"
-
-else
-  echo "$ac_t""no" 1>&6
-fi
- 
-     for ac_func in getspnam
-do
-echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:7983: checking for $ac_func" >&5
-if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 7988 "configure"
-#include "confdefs.h"
-/* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char $ac_func(); below.  */
-#include <assert.h>
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char $ac_func();
-
-int main() {
-
-/* The GNU C library defines this for functions which it implements
-    to always fail with ENOSYS.  Some functions are actually named
-    something starting with __ and the normal name is an alias.  */
-#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
-choke me
-#else
-$ac_func();
-#endif
-
-; return 0; }
-EOF
-if { (eval echo configure:8011: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=no"
-fi
-rm -f conftest*
-fi
-
-if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_func 1
-EOF
- 
-else
-  echo "$ac_t""no" 1>&6
-fi
-done
-
-  ;;
-  esac
-
-
-case "$LIBS" in
-  *-lsecurity*) for ac_func in bigcrypt
-do
-echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:8043: checking for $ac_func" >&5
-if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 8048 "configure"
-#include "confdefs.h"
-/* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char $ac_func(); below.  */
-#include <assert.h>
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char $ac_func();
-
-int main() {
-
-/* The GNU C library defines this for functions which it implements
-    to always fail with ENOSYS.  Some functions are actually named
-    something starting with __ and the normal name is an alias.  */
-#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
-choke me
-#else
-$ac_func();
-#endif
-
-; return 0; }
-EOF
-if { (eval echo configure:8071: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=no"
-fi
-rm -f conftest*
-fi
-
-if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_func 1
-EOF
- 
-else
-  echo "$ac_t""no" 1>&6
-fi
-done
- ;;
-  *) echo $ac_n "checking for bigcrypt in -lsecurity""... $ac_c" 1>&6
-echo "configure:8096: checking for bigcrypt in -lsecurity" >&5
-ac_lib_var=`echo security'_'bigcrypt | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lsecurity  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 8104 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char bigcrypt();
-
-int main() {
-bigcrypt()
-; return 0; }
-EOF
-if { (eval echo configure:8115: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
-
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_lib=HAVE_LIB`echo security | sed -e 's/[^a-zA-Z0-9_]/_/g' \
-    -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_lib 1
-EOF
-
-  LIBS="-lsecurity $LIBS"
-
-else
-  echo "$ac_t""no" 1>&6
-fi
- 
-     for ac_func in bigcrypt
-do
-echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:8145: checking for $ac_func" >&5
-if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 8150 "configure"
-#include "confdefs.h"
-/* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char $ac_func(); below.  */
-#include <assert.h>
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char $ac_func();
-
-int main() {
-
-/* The GNU C library defines this for functions which it implements
-    to always fail with ENOSYS.  Some functions are actually named
-    something starting with __ and the normal name is an alias.  */
-#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
-choke me
-#else
-$ac_func();
-#endif
-
-; return 0; }
-EOF
-if { (eval echo configure:8173: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=no"
-fi
-rm -f conftest*
-fi
-
-if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_func 1
-EOF
- 
-else
-  echo "$ac_t""no" 1>&6
-fi
-done
-
-  ;;
-  esac
-
-case "$LIBS" in
-  *-lsec*) for ac_func in bigcrypt
-do
-echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:8204: checking for $ac_func" >&5
-if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 8209 "configure"
-#include "confdefs.h"
-/* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char $ac_func(); below.  */
-#include <assert.h>
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char $ac_func();
-
-int main() {
-
-/* The GNU C library defines this for functions which it implements
-    to always fail with ENOSYS.  Some functions are actually named
-    something starting with __ and the normal name is an alias.  */
-#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
-choke me
-#else
-$ac_func();
-#endif
-
-; return 0; }
-EOF
-if { (eval echo configure:8232: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=no"
-fi
-rm -f conftest*
-fi
-
-if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_func 1
-EOF
- 
-else
-  echo "$ac_t""no" 1>&6
-fi
-done
- ;;
-  *) echo $ac_n "checking for bigcrypt in -lsec""... $ac_c" 1>&6
-echo "configure:8257: checking for bigcrypt in -lsec" >&5
-ac_lib_var=`echo sec'_'bigcrypt | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lsec  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 8265 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char bigcrypt();
-
-int main() {
-bigcrypt()
-; return 0; }
-EOF
-if { (eval echo configure:8276: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
-
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_lib=HAVE_LIB`echo sec | sed -e 's/[^a-zA-Z0-9_]/_/g' \
-    -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_lib 1
-EOF
-
-  LIBS="-lsec $LIBS"
-
-else
-  echo "$ac_t""no" 1>&6
-fi
- 
-     for ac_func in bigcrypt
-do
-echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:8306: checking for $ac_func" >&5
-if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 8311 "configure"
-#include "confdefs.h"
-/* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char $ac_func(); below.  */
-#include <assert.h>
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char $ac_func();
-
-int main() {
-
-/* The GNU C library defines this for functions which it implements
-    to always fail with ENOSYS.  Some functions are actually named
-    something starting with __ and the normal name is an alias.  */
-#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
-choke me
-#else
-$ac_func();
-#endif
-
-; return 0; }
-EOF
-if { (eval echo configure:8334: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=no"
-fi
-rm -f conftest*
-fi
-
-if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_func 1
-EOF
- 
-else
-  echo "$ac_t""no" 1>&6
-fi
-done
-
-  ;;
-  esac
-
-
-case "$LIBS" in
-  *-lsecurity*) for ac_func in getprpwnam
-do
-echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:8366: checking for $ac_func" >&5
-if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 8371 "configure"
-#include "confdefs.h"
-/* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char $ac_func(); below.  */
-#include <assert.h>
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char $ac_func();
-
-int main() {
-
-/* The GNU C library defines this for functions which it implements
-    to always fail with ENOSYS.  Some functions are actually named
-    something starting with __ and the normal name is an alias.  */
-#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
-choke me
-#else
-$ac_func();
-#endif
-
-; return 0; }
-EOF
-if { (eval echo configure:8394: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=no"
-fi
-rm -f conftest*
-fi
-
-if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_func 1
-EOF
- 
-else
-  echo "$ac_t""no" 1>&6
-fi
-done
- ;;
-  *) echo $ac_n "checking for getprpwnam in -lsecurity""... $ac_c" 1>&6
-echo "configure:8419: checking for getprpwnam in -lsecurity" >&5
-ac_lib_var=`echo security'_'getprpwnam | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lsecurity  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 8427 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char getprpwnam();
-
-int main() {
-getprpwnam()
-; return 0; }
-EOF
-if { (eval echo configure:8438: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
-
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_lib=HAVE_LIB`echo security | sed -e 's/[^a-zA-Z0-9_]/_/g' \
-    -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_lib 1
-EOF
-
-  LIBS="-lsecurity $LIBS"
-
-else
-  echo "$ac_t""no" 1>&6
-fi
- 
-     for ac_func in getprpwnam
-do
-echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:8468: checking for $ac_func" >&5
-if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 8473 "configure"
-#include "confdefs.h"
-/* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char $ac_func(); below.  */
-#include <assert.h>
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char $ac_func();
-
-int main() {
-
-/* The GNU C library defines this for functions which it implements
-    to always fail with ENOSYS.  Some functions are actually named
-    something starting with __ and the normal name is an alias.  */
-#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
-choke me
-#else
-$ac_func();
-#endif
-
-; return 0; }
-EOF
-if { (eval echo configure:8496: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=no"
-fi
-rm -f conftest*
-fi
-
-if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_func 1
-EOF
- 
-else
-  echo "$ac_t""no" 1>&6
-fi
-done
-
-  ;;
-  esac
-
-case "$LIBS" in
-  *-lsec*) for ac_func in getprpwnam
-do
-echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:8527: checking for $ac_func" >&5
-if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 8532 "configure"
-#include "confdefs.h"
-/* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char $ac_func(); below.  */
-#include <assert.h>
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char $ac_func();
-
-int main() {
-
-/* The GNU C library defines this for functions which it implements
-    to always fail with ENOSYS.  Some functions are actually named
-    something starting with __ and the normal name is an alias.  */
-#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
-choke me
-#else
-$ac_func();
-#endif
-
-; return 0; }
-EOF
-if { (eval echo configure:8555: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=no"
-fi
-rm -f conftest*
-fi
-
-if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_func 1
-EOF
- 
-else
-  echo "$ac_t""no" 1>&6
-fi
-done
- ;;
-  *) echo $ac_n "checking for getprpwnam in -lsec""... $ac_c" 1>&6
-echo "configure:8580: checking for getprpwnam in -lsec" >&5
-ac_lib_var=`echo sec'_'getprpwnam | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lsec  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 8588 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char getprpwnam();
-
-int main() {
-getprpwnam()
-; return 0; }
-EOF
-if { (eval echo configure:8599: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
-
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_lib=HAVE_LIB`echo sec | sed -e 's/[^a-zA-Z0-9_]/_/g' \
-    -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_lib 1
-EOF
-
-  LIBS="-lsec $LIBS"
-
-else
-  echo "$ac_t""no" 1>&6
-fi
- 
-     for ac_func in getprpwnam
-do
-echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:8629: checking for $ac_func" >&5
-if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 8634 "configure"
-#include "confdefs.h"
-/* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char $ac_func(); below.  */
-#include <assert.h>
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char $ac_func();
-
-int main() {
-
-/* The GNU C library defines this for functions which it implements
-    to always fail with ENOSYS.  Some functions are actually named
-    something starting with __ and the normal name is an alias.  */
-#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
-choke me
-#else
-$ac_func();
-#endif
-
-; return 0; }
-EOF
-if { (eval echo configure:8657: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=no"
-fi
-rm -f conftest*
-fi
-
-if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_func 1
-EOF
- 
-else
-  echo "$ac_t""no" 1>&6
-fi
-done
-
-  ;;
-  esac
-
-
-# this bit needs to be modified for each OS that is suported by
-# smbwrapper. You need to specify how to created a shared library and
-# how to compile C code to produce PIC object files
-
-# these are the defaults, good for lots of systems
-HOST_OS="$host_os"
-LDSHFLAGS="-shared"
-SONAMEFLAG="#"
-SHLD="\${CC}" 
-PICFLAG=""
-PICSUFFIX="po.o"
-SHLIBEXT="so"
-# Assume non-shared by default and override below
-BLDSHARED="false" 
-echo $ac_n "checking ability to build shared libraries""... $ac_c" 1>&6
-echo "configure:8700: checking ability to build shared libraries" >&5
-
-# and these are for particular systems
-case "$host_os" in
-		*linux*)   cat >> confdefs.h <<\EOF
-#define LINUX 1
-EOF
-
-			BLDSHARED="true"
-			LDSHFLAGS="-shared"
-			DYNEXP="-Wl,--export-dynamic"
-			PICFLAG="-fPIC"
-			SONAMEFLAG="-Wl,-soname="
-			cat >> confdefs.h <<\EOF
-#define STAT_ST_BLOCKSIZE 512
-EOF
-
-			;;
-		*solaris*) cat >> confdefs.h <<\EOF
-#define SUNOS5 1
-EOF
-
-			BLDSHARED="true"
-			LDSHFLAGS="-G"
-			SONAMEFLAG="-h "
-			if test "${GCC}" = "yes"; then
-				PICFLAG="-fPIC"
-				if test "${ac_cv_prog_gnu_ld}" = "yes"; then
-					DYNEXP="-Wl,-E"
-				fi
-			else
-				PICFLAG="-KPIC"
-				## ${CFLAGS} added for building 64-bit shared 
-				## libs using Sun's Compiler
-				LDSHFLAGS="-G \${CFLAGS}"
-				POBAD_CC=""
-				PICSUFFIX="po.o"
-			fi
-			cat >> confdefs.h <<\EOF
-#define STAT_ST_BLOCKSIZE 512
-EOF
-
-		;;
-		*sunos*) cat >> confdefs.h <<\EOF
-#define SUNOS4 1
-EOF
-
-			BLDSHARED="true"
-			LDSHFLAGS="-G"
-			SONAMEFLAG="-Wl,-h,"
-			PICFLAG="-KPIC"   # Is this correct for SunOS
-			cat >> confdefs.h <<\EOF
-#define STAT_ST_BLOCKSIZE 512
-EOF
-
-		;;
-		*freebsd*)  BLDSHARED="true"
-			LDSHFLAGS="-shared"
-			DYNEXP="-Wl,--export-dynamic"
-			SONAMEFLAG="-Wl,-soname,"
-			PICFLAG="-fPIC -DPIC"
-			cat >> confdefs.h <<\EOF
-#define STAT_ST_BLOCKSIZE 512
-EOF
-
-		;;
-		*openbsd*)  BLDSHARED="true"
-			LDSHFLAGS="-shared"
-			DYNEXP="-Wl,-Bdynamic"
-			SONAMEFLAG="-Wl,-soname,"
-			PICFLAG="-fPIC"
-			cat >> confdefs.h <<\EOF
-#define STAT_ST_BLOCKSIZE 512
-EOF
-
-		;;
-		*irix*) cat >> confdefs.h <<\EOF
-#define IRIX 1
-EOF
-
-			case "$host_os" in
-			*irix6*) cat >> confdefs.h <<\EOF
-#define IRIX6 1
-EOF
-
-			;;
-			esac
-			ATTEMPT_WRAP32_BUILD=yes
-			BLDSHARED="true"
-			LDSHFLAGS="-set_version sgi1.0 -shared"
-			SONAMEFLAG="-soname "
-			SHLD="\${LD}" 
-			if test "${GCC}" = "yes"; then
-				PICFLAG="-fPIC"
-			else 
-				PICFLAG="-KPIC"
-			fi
-			cat >> confdefs.h <<\EOF
-#define STAT_ST_BLOCKSIZE 512
-EOF
-
-		;;
-		*aix*) cat >> confdefs.h <<\EOF
-#define AIX 1
-EOF
-
-			BLDSHARED="true"
-			LDSHFLAGS="-Wl,-bexpall,-bM:SRE,-bnoentry"
-			DYNEXP="-Wl,-brtl,-bexpall"
-			PICFLAG="-O2"
-			if test "${GCC}" != "yes"; then
-				## for funky AIX compiler using strncpy()
-				CFLAGS="$CFLAGS -D_LINUX_SOURCE_COMPAT -qmaxmem=32000"
-			fi
-
-			cat >> confdefs.h <<\EOF
-#define STAT_ST_BLOCKSIZE DEV_BSIZE
-EOF
-
-		;;
-		*hpux*) cat >> confdefs.h <<\EOF
-#define HPUX 1
-EOF
-
-			SHLIBEXT="sl"
-			# Use special PIC flags for the native HP-UX compiler.
-			if test $ac_cv_prog_cc_Ae = yes; then
-				BLDSHARED="true"
-				SHLD="/usr/bin/ld"
-				LDSHFLAGS="-B symbolic -b -z"
-				SONAMEFLAG="+h "
-				PICFLAG="+z"
-			fi
-			DYNEXP="-Wl,-E"
-			cat >> confdefs.h <<\EOF
-#define STAT_ST_BLOCKSIZE 8192
-EOF
-
-			;;
-		*qnx*) cat >> confdefs.h <<\EOF
-#define QNX 1
-EOF
-
-			cat >> confdefs.h <<\EOF
-#define STAT_ST_BLOCKSIZE 512
-EOF
-
-			;;
-		*osf*) cat >> confdefs.h <<\EOF
-#define OSF1 1
-EOF
-
-			BLDSHARED="true"
-			LDSHFLAGS="-shared"
-			SONAMEFLAG="-Wl,-soname,"
-			PICFLAG="-fPIC"
-			cat >> confdefs.h <<\EOF
-#define STAT_ST_BLOCKSIZE 512
-EOF
-
-		;;
-		*sco*) cat >> confdefs.h <<\EOF
-#define SCO 1
-EOF
-
-			cat >> confdefs.h <<\EOF
-#define STAT_ST_BLOCKSIZE 512
-EOF
-
-			;;
-		*unixware*) cat >> confdefs.h <<\EOF
-#define UNIXWARE 1
-EOF
-
-			BLDSHARED="true"
-			LDSHFLAGS="-shared"
-			SONAMEFLAG="-Wl,-soname,"
-			PICFLAG="-KPIC"
-			cat >> confdefs.h <<\EOF
-#define STAT_ST_BLOCKSIZE 512
-EOF
-
-		;;
-		*next2*) cat >> confdefs.h <<\EOF
-#define NEXT2 1
-EOF
-
-			cat >> confdefs.h <<\EOF
-#define STAT_ST_BLOCKSIZE 512
-EOF
-
-			;;
-		*dgux*) # Extract the first word of "groff", so it can be a program name with args.
-set dummy groff; ac_word=$2
-echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:8895: checking for $ac_word" >&5
-if eval "test \"`echo '$''{'ac_cv_prog_ROFF'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  if test -n "$ROFF"; then
-  ac_cv_prog_ROFF="$ROFF" # Let the user override the test.
-else
-  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
-  ac_dummy="$PATH"
-  for ac_dir in $ac_dummy; do
-    test -z "$ac_dir" && ac_dir=.
-    if test -f $ac_dir/$ac_word; then
-      ac_cv_prog_ROFF="groff -etpsR -Tascii -man"
-      break
-    fi
-  done
-  IFS="$ac_save_ifs"
-fi
-fi
-ROFF="$ac_cv_prog_ROFF"
-if test -n "$ROFF"; then
-  echo "$ac_t""$ROFF" 1>&6
-else
-  echo "$ac_t""no" 1>&6
-fi
-
-			cat >> confdefs.h <<\EOF
-#define STAT_ST_BLOCKSIZE 512
-EOF
-
-			;;
-		*sysv4*)
-			case "$host" in
-				*-univel-*)     if  test "$GCC" != yes ; then
-									cat >> confdefs.h <<\EOF
-#define HAVE_MEMSET 1
-EOF
-
-								fi
-								LDSHFLAGS="-G"
-								DYNEXP="-Bexport"
-				;;
-				*mips-sni-sysv4*) cat >> confdefs.h <<\EOF
-#define RELIANTUNIX 1
-EOF
-;;
-			esac
-			cat >> confdefs.h <<\EOF
-#define STAT_ST_BLOCKSIZE 512
-EOF
-
-			;;
-		*sysv5*)
-			if  test "$GCC" != yes ; then
-				cat >> confdefs.h <<\EOF
-#define HAVE_MEMSET 1
-EOF
-
-			fi
-			LDSHFLAGS="-G"
-			cat >> confdefs.h <<\EOF
-#define STAT_ST_BLOCKSIZE 512
-EOF
-
-			;;
-		*vos*) cat >> confdefs.h <<\EOF
-#define STAT_ST_BLOCKSIZE 4096
-EOF
-
-			BLDSHARED="false"
-			LDSHFLAGS=""
-			;;
-		*)
-			cat >> confdefs.h <<\EOF
-#define STAT_ST_BLOCKSIZE 512
-EOF
-
-			;;
-esac
-
-echo "$ac_t""$BLDSHARED" 1>&6
-echo $ac_n "checking linker flags for shared libraries""... $ac_c" 1>&6
-echo "configure:8977: checking linker flags for shared libraries" >&5
-echo "$ac_t""$LDSHFLAGS" 1>&6
-echo $ac_n "checking compiler flags for position-independent code""... $ac_c" 1>&6
-echo "configure:8980: checking compiler flags for position-independent code" >&5
-echo "$ac_t""$PICFLAGS" 1>&6
-
-# try to work out how to produce pic code with this compiler
-if test x$PICFLAG = x; then
-  echo $ac_n "checking whether ${CC-cc} accepts -fpic""... $ac_c" 1>&6
-echo "configure:8986: checking whether ${CC-cc} accepts -fpic" >&5
-if eval "test \"`echo '$''{'ac_cv_prog_cc_fpic'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  echo 'void f(){}' > conftest.c
-if test -z "`${CC-cc} -fpic -c conftest.c 2>&1`"; then
-  ac_cv_prog_cc_fpic=yes
-else
-  ac_cv_prog_cc_fpic=no
-fi
-rm -f conftest*
-
-fi
-
-echo "$ac_t""$ac_cv_prog_cc_fpic" 1>&6
-  if test $ac_cv_prog_cc_fpic = yes; then
-      PICFLAG="-fpic";
-  fi
-fi
-if test x$PICFLAG = x; then
-  echo $ac_n "checking whether ${CC-cc} accepts -KPIC""... $ac_c" 1>&6
-echo "configure:9007: checking whether ${CC-cc} accepts -KPIC" >&5
-if eval "test \"`echo '$''{'ac_cv_prog_cc_KPIC'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  echo 'void f(){}' > conftest.c
-if test -z "`${CC-cc} -KPIC -c conftest.c 2>&1`"; then
-  ac_cv_prog_cc_KPIC=yes
-else
-  ac_cv_prog_cc_KPIC=no
-fi
-rm -f conftest*
-
-fi
-
-echo "$ac_t""$ac_cv_prog_cc_KPIC" 1>&6
-  if test $ac_cv_prog_cc_KPIC = yes; then
-    PICFLAG="-KPIC";
-  fi
-fi
-if test x$PICFLAG = x; then
-  echo $ac_n "checking whether ${CC-cc} accepts -Kpic""... $ac_c" 1>&6
-echo "configure:9028: checking whether ${CC-cc} accepts -Kpic" >&5
-if eval "test \"`echo '$''{'ac_cv_prog_cc_Kpic'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  echo 'void f(){}' > conftest.c
-if test -z "`${CC-cc} -Kpic -c conftest.c 2>&1`"; then
-  ac_cv_prog_cc_Kpic=yes
-else
-  ac_cv_prog_cc_Kpic=no
-fi
-rm -f conftest*
-
-fi
-
-echo "$ac_t""$ac_cv_prog_cc_Kpic" 1>&6
-  if test $ac_cv_prog_cc_Kpic = yes; then
-    PICFLAG="-Kpic";
-  fi
-fi
-
-################
-
-echo $ac_n "checking for long long""... $ac_c" 1>&6
-echo "configure:9051: checking for long long" >&5
-if eval "test \"`echo '$''{'samba_cv_have_longlong'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-if test "$cross_compiling" = yes; then
-  samba_cv_have_longlong=cross
-else
-  cat > conftest.$ac_ext <<EOF
-#line 9060 "configure"
-#include "confdefs.h"
-#include <stdio.h>
-main() { long long x = 1000000; x *= x; exit(((x/1000000) == 1000000)? 0: 1); }
-EOF
-if { (eval echo configure:9065: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  samba_cv_have_longlong=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  samba_cv_have_longlong=no
-fi
-rm -fr conftest*
-fi
-
-fi
-
-echo "$ac_t""$samba_cv_have_longlong" 1>&6
-if test x"$samba_cv_have_longlong" = x"yes"; then
-    cat >> confdefs.h <<\EOF
-#define HAVE_LONGLONG 1
-EOF
-
-fi
-
-#
-# Check if the compiler supports the LL prefix on long long integers.
-# AIX needs this.
-
-echo $ac_n "checking for LL suffix on long long integers""... $ac_c" 1>&6
-echo "configure:9092: checking for LL suffix on long long integers" >&5
-if eval "test \"`echo '$''{'samba_cv_compiler_supports_ll'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-    cat > conftest.$ac_ext <<EOF
-#line 9098 "configure"
-#include "confdefs.h"
-#include <stdio.h>
-int main() {
-long long i = 0x8000000000LL
-; return 0; }
-EOF
-if { (eval echo configure:9105: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-  rm -rf conftest*
-  samba_cv_compiler_supports_ll=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  samba_cv_compiler_supports_ll=no
-fi
-rm -f conftest*
-fi
-
-echo "$ac_t""$samba_cv_compiler_supports_ll" 1>&6
-if test x"$samba_cv_compiler_supports_ll" = x"yes"; then
-   cat >> confdefs.h <<\EOF
-#define COMPILER_SUPPORTS_LL 1
-EOF
-
-fi
-
-  
-echo $ac_n "checking for 64 bit off_t""... $ac_c" 1>&6
-echo "configure:9127: checking for 64 bit off_t" >&5
-if eval "test \"`echo '$''{'samba_cv_SIZEOF_OFF_T'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-if test "$cross_compiling" = yes; then
-  samba_cv_SIZEOF_OFF_T=cross
-else
-  cat > conftest.$ac_ext <<EOF
-#line 9136 "configure"
-#include "confdefs.h"
-#include <stdio.h>
-#include <sys/stat.h>
-main() { exit((sizeof(off_t) == 8) ? 0 : 1); }
-EOF
-if { (eval echo configure:9142: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  samba_cv_SIZEOF_OFF_T=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  samba_cv_SIZEOF_OFF_T=no
-fi
-rm -fr conftest*
-fi
-
-fi
-
-echo "$ac_t""$samba_cv_SIZEOF_OFF_T" 1>&6
-if test x"$samba_cv_SIZEOF_OFF_T" = x"yes"; then
-    cat >> confdefs.h <<\EOF
-#define SIZEOF_OFF_T 8
-EOF
-
-fi
-
-echo $ac_n "checking for off64_t""... $ac_c" 1>&6
-echo "configure:9165: checking for off64_t" >&5
-if eval "test \"`echo '$''{'samba_cv_HAVE_OFF64_T'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-if test "$cross_compiling" = yes; then
-  samba_cv_HAVE_OFF64_T=cross
-else
-  cat > conftest.$ac_ext <<EOF
-#line 9174 "configure"
-#include "confdefs.h"
-
-#if defined(HAVE_UNISTD_H)
-#include <unistd.h>
-#endif
-#include <stdio.h>
-#include <sys/stat.h>
-main() { struct stat64 st; off64_t s; if (sizeof(off_t) == sizeof(off64_t)) exit(1); exit((lstat64("/dev/null", &st)==0)?0:1); }
-EOF
-if { (eval echo configure:9184: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  samba_cv_HAVE_OFF64_T=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  samba_cv_HAVE_OFF64_T=no
-fi
-rm -fr conftest*
-fi
-
-fi
-
-echo "$ac_t""$samba_cv_HAVE_OFF64_T" 1>&6
-if test x"$samba_cv_HAVE_OFF64_T" = x"yes"; then
-    cat >> confdefs.h <<\EOF
-#define HAVE_OFF64_T 1
-EOF
-
-fi
-
-echo $ac_n "checking for 64 bit ino_t""... $ac_c" 1>&6
-echo "configure:9207: checking for 64 bit ino_t" >&5
-if eval "test \"`echo '$''{'samba_cv_SIZEOF_INO_T'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-if test "$cross_compiling" = yes; then
-  samba_cv_SIZEOF_INO_T=cross
-else
-  cat > conftest.$ac_ext <<EOF
-#line 9216 "configure"
-#include "confdefs.h"
-#include <stdio.h>
-#include <sys/stat.h>
-main() { exit((sizeof(ino_t) == 8) ? 0 : 1); }
-EOF
-if { (eval echo configure:9222: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  samba_cv_SIZEOF_INO_T=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  samba_cv_SIZEOF_INO_T=no
-fi
-rm -fr conftest*
-fi
-
-fi
-
-echo "$ac_t""$samba_cv_SIZEOF_INO_T" 1>&6
-if test x"$samba_cv_SIZEOF_INO_T" = x"yes"; then
-    cat >> confdefs.h <<\EOF
-#define SIZEOF_INO_T 8
-EOF
-
-fi
-
-echo $ac_n "checking for ino64_t""... $ac_c" 1>&6
-echo "configure:9245: checking for ino64_t" >&5
-if eval "test \"`echo '$''{'samba_cv_HAVE_INO64_T'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-if test "$cross_compiling" = yes; then
-  samba_cv_HAVE_INO64_T=cross
-else
-  cat > conftest.$ac_ext <<EOF
-#line 9254 "configure"
-#include "confdefs.h"
-
-#if defined(HAVE_UNISTD_H)
-#include <unistd.h>
-#endif
-#include <stdio.h>
-#include <sys/stat.h>
-main() { struct stat64 st; ino64_t s; if (sizeof(ino_t) == sizeof(ino64_t)) exit(1); exit((lstat64("/dev/null", &st)==0)?0:1); }
-EOF
-if { (eval echo configure:9264: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  samba_cv_HAVE_INO64_T=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  samba_cv_HAVE_INO64_T=no
-fi
-rm -fr conftest*
-fi
-
-fi
-
-echo "$ac_t""$samba_cv_HAVE_INO64_T" 1>&6
-if test x"$samba_cv_HAVE_INO64_T" = x"yes"; then
-    cat >> confdefs.h <<\EOF
-#define HAVE_INO64_T 1
-EOF
-
-fi
-
-echo $ac_n "checking for dev64_t""... $ac_c" 1>&6
-echo "configure:9287: checking for dev64_t" >&5
-if eval "test \"`echo '$''{'samba_cv_HAVE_DEV64_T'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-if test "$cross_compiling" = yes; then
-  samba_cv_HAVE_DEV64_T=cross
-else
-  cat > conftest.$ac_ext <<EOF
-#line 9296 "configure"
-#include "confdefs.h"
-
-#if defined(HAVE_UNISTD_H)
-#include <unistd.h>
-#endif
-#include <stdio.h>
-#include <sys/stat.h>
-main() { struct stat64 st; dev64_t s; if (sizeof(dev_t) == sizeof(dev64_t)) exit(1); exit((lstat64("/dev/null", &st)==0)?0:1); }
-EOF
-if { (eval echo configure:9306: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  samba_cv_HAVE_DEV64_T=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  samba_cv_HAVE_DEV64_T=no
-fi
-rm -fr conftest*
-fi
-
-fi
-
-echo "$ac_t""$samba_cv_HAVE_DEV64_T" 1>&6
-if test x"$samba_cv_HAVE_DEV64_T" = x"yes"; then
-    cat >> confdefs.h <<\EOF
-#define HAVE_DEV64_T 1
-EOF
-
-fi
-
-echo $ac_n "checking for struct dirent64""... $ac_c" 1>&6
-echo "configure:9329: checking for struct dirent64" >&5
-if eval "test \"`echo '$''{'samba_cv_HAVE_STRUCT_DIRENT64'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-cat > conftest.$ac_ext <<EOF
-#line 9335 "configure"
-#include "confdefs.h"
-
-#if defined(HAVE_UNISTD_H)
-#include <unistd.h>
-#endif
-#include <sys/types.h>
-#include <dirent.h>
-int main() {
-struct dirent64 de;
-; return 0; }
-EOF
-if { (eval echo configure:9347: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-  rm -rf conftest*
-  samba_cv_HAVE_STRUCT_DIRENT64=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  samba_cv_HAVE_STRUCT_DIRENT64=no
-fi
-rm -f conftest*
-fi
-
-echo "$ac_t""$samba_cv_HAVE_STRUCT_DIRENT64" 1>&6
-if test x"$samba_cv_HAVE_STRUCT_DIRENT64" = x"yes" && test x"$ac_cv_func_readdir64" = x"yes"; then
-    cat >> confdefs.h <<\EOF
-#define HAVE_STRUCT_DIRENT64 1
-EOF
-
-fi
-
-echo $ac_n "checking for major macro""... $ac_c" 1>&6
-echo "configure:9368: checking for major macro" >&5
-if eval "test \"`echo '$''{'samba_cv_HAVE_DEVICE_MAJOR_FN'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-if test "$cross_compiling" = yes; then
-  samba_cv_HAVE_DEVICE_MAJOR_FN=cross
-else
-  cat > conftest.$ac_ext <<EOF
-#line 9377 "configure"
-#include "confdefs.h"
-
-#if defined(HAVE_UNISTD_H)
-#include <unistd.h>
-#endif
-#include <sys/types.h>
-main() { dev_t dev; int i = major(dev); return 0; }
-EOF
-if { (eval echo configure:9386: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  samba_cv_HAVE_DEVICE_MAJOR_FN=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  samba_cv_HAVE_DEVICE_MAJOR_FN=no
-fi
-rm -fr conftest*
-fi
-
-fi
-
-echo "$ac_t""$samba_cv_HAVE_DEVICE_MAJOR_FN" 1>&6
-if test x"$samba_cv_HAVE_DEVICE_MAJOR_FN" = x"yes"; then
-    cat >> confdefs.h <<\EOF
-#define HAVE_DEVICE_MAJOR_FN 1
-EOF
-
-fi
-
-echo $ac_n "checking for minor macro""... $ac_c" 1>&6
-echo "configure:9409: checking for minor macro" >&5
-if eval "test \"`echo '$''{'samba_cv_HAVE_DEVICE_MINOR_FN'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-if test "$cross_compiling" = yes; then
-  samba_cv_HAVE_DEVICE_MINOR_FN=cross
-else
-  cat > conftest.$ac_ext <<EOF
-#line 9418 "configure"
-#include "confdefs.h"
-
-#if defined(HAVE_UNISTD_H)
-#include <unistd.h>
-#endif
-#include <sys/types.h>
-main() { dev_t dev; int i = minor(dev); return 0; }
-EOF
-if { (eval echo configure:9427: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  samba_cv_HAVE_DEVICE_MINOR_FN=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  samba_cv_HAVE_DEVICE_MINOR_FN=no
-fi
-rm -fr conftest*
-fi
-
-fi
-
-echo "$ac_t""$samba_cv_HAVE_DEVICE_MINOR_FN" 1>&6
-if test x"$samba_cv_HAVE_DEVICE_MINOR_FN" = x"yes"; then
-    cat >> confdefs.h <<\EOF
-#define HAVE_DEVICE_MINOR_FN 1
-EOF
-
-fi
-
-echo $ac_n "checking for makedev macro""... $ac_c" 1>&6
-echo "configure:9450: checking for makedev macro" >&5
-if eval "test \"`echo '$''{'samba_cv_HAVE_MAKEDEV_FN'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-if test "$cross_compiling" = yes; then
-  samba_cv_HAVE_MAKEDEV_FN=cross
-else
-  cat > conftest.$ac_ext <<EOF
-#line 9459 "configure"
-#include "confdefs.h"
-
-#if defined(HAVE_UNISTD_H)
-#include <unistd.h>
-#endif
-#include <sys/types.h>
-main() { dev_t dev = makedev(1,2); return 0; }
-EOF
-if { (eval echo configure:9468: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  samba_cv_HAVE_MAKEDEV_FN=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  samba_cv_HAVE_MAKEDEV_FN=no
-fi
-rm -fr conftest*
-fi
-
-fi
-
-echo "$ac_t""$samba_cv_HAVE_MAKEDEV_FN" 1>&6
-if test x"$samba_cv_HAVE_MAKEDEV_FN" = x"yes"; then
-    cat >> confdefs.h <<\EOF
-#define MAKEDEV_FN 1
-EOF
-
-fi
-
-echo $ac_n "checking for unsigned char""... $ac_c" 1>&6
-echo "configure:9491: checking for unsigned char" >&5
-if eval "test \"`echo '$''{'samba_cv_HAVE_UNSIGNED_CHAR'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-if test "$cross_compiling" = yes; then
-  samba_cv_HAVE_UNSIGNED_CHAR=cross
-else
-  cat > conftest.$ac_ext <<EOF
-#line 9500 "configure"
-#include "confdefs.h"
-#include <stdio.h>
-main() { char c; c=250; exit((c > 0)?0:1); }
-EOF
-if { (eval echo configure:9505: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  samba_cv_HAVE_UNSIGNED_CHAR=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  samba_cv_HAVE_UNSIGNED_CHAR=no
-fi
-rm -fr conftest*
-fi
-
-fi
-
-echo "$ac_t""$samba_cv_HAVE_UNSIGNED_CHAR" 1>&6
-if test x"$samba_cv_HAVE_UNSIGNED_CHAR" = x"yes"; then
-    cat >> confdefs.h <<\EOF
-#define HAVE_UNSIGNED_CHAR 1
-EOF
-
-fi
-
-echo $ac_n "checking for sin_len in sock""... $ac_c" 1>&6
-echo "configure:9528: checking for sin_len in sock" >&5
-if eval "test \"`echo '$''{'samba_cv_HAVE_SOCK_SIN_LEN'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-cat > conftest.$ac_ext <<EOF
-#line 9534 "configure"
-#include "confdefs.h"
-#include <sys/types.h>
-#include <sys/socket.h>
-#include <netinet/in.h>
-int main() {
-struct sockaddr_in sock; sock.sin_len = sizeof(sock);
-; return 0; }
-EOF
-if { (eval echo configure:9543: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-  rm -rf conftest*
-  samba_cv_HAVE_SOCK_SIN_LEN=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  samba_cv_HAVE_SOCK_SIN_LEN=no
-fi
-rm -f conftest*
-fi
-
-echo "$ac_t""$samba_cv_HAVE_SOCK_SIN_LEN" 1>&6
-if test x"$samba_cv_HAVE_SOCK_SIN_LEN" = x"yes"; then
-    cat >> confdefs.h <<\EOF
-#define HAVE_SOCK_SIN_LEN 1
-EOF
-
-fi
-
-echo $ac_n "checking whether seekdir returns void""... $ac_c" 1>&6
-echo "configure:9564: checking whether seekdir returns void" >&5
-if eval "test \"`echo '$''{'samba_cv_SEEKDIR_RETURNS_VOID'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-cat > conftest.$ac_ext <<EOF
-#line 9570 "configure"
-#include "confdefs.h"
-#include <sys/types.h>
-#include <dirent.h>
-void seekdir(DIR *d, long loc) { return; }
-int main() {
-return 0;
-; return 0; }
-EOF
-if { (eval echo configure:9579: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-  rm -rf conftest*
-  samba_cv_SEEKDIR_RETURNS_VOID=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  samba_cv_SEEKDIR_RETURNS_VOID=no
-fi
-rm -f conftest*
-fi
-
-echo "$ac_t""$samba_cv_SEEKDIR_RETURNS_VOID" 1>&6
-if test x"$samba_cv_SEEKDIR_RETURNS_VOID" = x"yes"; then
-    cat >> confdefs.h <<\EOF
-#define SEEKDIR_RETURNS_VOID 1
-EOF
-
-fi
-
-echo $ac_n "checking for __FILE__ macro""... $ac_c" 1>&6
-echo "configure:9600: checking for __FILE__ macro" >&5
-if eval "test \"`echo '$''{'samba_cv_HAVE_FILE_MACRO'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-cat > conftest.$ac_ext <<EOF
-#line 9606 "configure"
-#include "confdefs.h"
-#include <stdio.h>
-int main() {
-printf("%s\n", __FILE__);
-; return 0; }
-EOF
-if { (eval echo configure:9613: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-  rm -rf conftest*
-  samba_cv_HAVE_FILE_MACRO=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  samba_cv_HAVE_FILE_MACRO=no
-fi
-rm -f conftest*
-fi
-
-echo "$ac_t""$samba_cv_HAVE_FILE_MACRO" 1>&6
-if test x"$samba_cv_HAVE_FILE_MACRO" = x"yes"; then
-    cat >> confdefs.h <<\EOF
-#define HAVE_FILE_MACRO 1
-EOF
-
-fi
-
-echo $ac_n "checking for __FUNCTION__ macro""... $ac_c" 1>&6
-echo "configure:9634: checking for __FUNCTION__ macro" >&5
-if eval "test \"`echo '$''{'samba_cv_HAVE_FUNCTION_MACRO'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-cat > conftest.$ac_ext <<EOF
-#line 9640 "configure"
-#include "confdefs.h"
-#include <stdio.h>
-int main() {
-printf("%s\n", __FUNCTION__);
-; return 0; }
-EOF
-if { (eval echo configure:9647: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-  rm -rf conftest*
-  samba_cv_HAVE_FUNCTION_MACRO=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  samba_cv_HAVE_FUNCTION_MACRO=no
-fi
-rm -f conftest*
-fi
-
-echo "$ac_t""$samba_cv_HAVE_FUNCTION_MACRO" 1>&6
-if test x"$samba_cv_HAVE_FUNCTION_MACRO" = x"yes"; then
-    cat >> confdefs.h <<\EOF
-#define HAVE_FUNCTION_MACRO 1
-EOF
-
-fi
-
-echo $ac_n "checking if gettimeofday takes tz argument""... $ac_c" 1>&6
-echo "configure:9668: checking if gettimeofday takes tz argument" >&5
-if eval "test \"`echo '$''{'samba_cv_HAVE_GETTIMEOFDAY_TZ'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-if test "$cross_compiling" = yes; then
-  samba_cv_HAVE_GETTIMEOFDAY_TZ=cross
-else
-  cat > conftest.$ac_ext <<EOF
-#line 9677 "configure"
-#include "confdefs.h"
-
-#include <sys/time.h>
-#include <unistd.h>
-main() { struct timeval tv; exit(gettimeofday(&tv, NULL));}
-EOF
-if { (eval echo configure:9684: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  samba_cv_HAVE_GETTIMEOFDAY_TZ=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  samba_cv_HAVE_GETTIMEOFDAY_TZ=no
-fi
-rm -fr conftest*
-fi
-
-fi
-
-echo "$ac_t""$samba_cv_HAVE_GETTIMEOFDAY_TZ" 1>&6
-if test x"$samba_cv_HAVE_GETTIMEOFDAY_TZ" = x"yes"; then
-    cat >> confdefs.h <<\EOF
-#define HAVE_GETTIMEOFDAY_TZ 1
-EOF
-
-fi
-
-echo $ac_n "checking for __va_copy""... $ac_c" 1>&6
-echo "configure:9707: checking for __va_copy" >&5
-if eval "test \"`echo '$''{'samba_cv_HAVE_VA_COPY'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-cat > conftest.$ac_ext <<EOF
-#line 9713 "configure"
-#include "confdefs.h"
-#include <stdarg.h>
-va_list ap1,ap2;
-int main() {
-__va_copy(ap1,ap2);
-; return 0; }
-EOF
-if { (eval echo configure:9721: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  samba_cv_HAVE_VA_COPY=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  samba_cv_HAVE_VA_COPY=no
-fi
-rm -f conftest*
-fi
-
-echo "$ac_t""$samba_cv_HAVE_VA_COPY" 1>&6
-if test x"$samba_cv_HAVE_VA_COPY" = x"yes"; then
-    cat >> confdefs.h <<\EOF
-#define HAVE_VA_COPY 1
-EOF
-
-fi
-
-echo $ac_n "checking for C99 vsnprintf""... $ac_c" 1>&6
-echo "configure:9742: checking for C99 vsnprintf" >&5
-if eval "test \"`echo '$''{'samba_cv_HAVE_C99_VSNPRINTF'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-if test "$cross_compiling" = yes; then
-  samba_cv_HAVE_C99_VSNPRINTF=cross
-else
-  cat > conftest.$ac_ext <<EOF
-#line 9751 "configure"
-#include "confdefs.h"
-
-#include <sys/types.h>
-#include <stdarg.h>
-void foo(const char *format, ...) {
-	va_list ap;
-	int len;
-	char buf[5];
-
-	va_start(ap, format);
-	len = vsnprintf(buf, 0, format, ap);
-	va_end(ap);
-	if (len != 5) exit(1);
-
-	va_start(ap, format);
-	len = vsnprintf(0, 0, format, ap);
-	va_end(ap);
-	if (len != 5) exit(1);
-
-	if (snprintf(buf, 3, "hello") != 5 || strcmp(buf, "he") != 0) exit(1);
-
-	exit(0);
-}
-main() { foo("hello"); }
-
-EOF
-if { (eval echo configure:9778: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  samba_cv_HAVE_C99_VSNPRINTF=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  samba_cv_HAVE_C99_VSNPRINTF=no
-fi
-rm -fr conftest*
-fi
-
-fi
-
-echo "$ac_t""$samba_cv_HAVE_C99_VSNPRINTF" 1>&6
-if test x"$samba_cv_HAVE_C99_VSNPRINTF" = x"yes"; then
-	cat >> confdefs.h <<\EOF
-#define HAVE_C99_VSNPRINTF 1
-EOF
-
-fi
-
-echo $ac_n "checking for broken readdir""... $ac_c" 1>&6
-echo "configure:9801: checking for broken readdir" >&5
-if eval "test \"`echo '$''{'samba_cv_HAVE_BROKEN_READDIR'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-if test "$cross_compiling" = yes; then
-  samba_cv_HAVE_BROKEN_READDIR=cross
-else
-  cat > conftest.$ac_ext <<EOF
-#line 9810 "configure"
-#include "confdefs.h"
-#include <sys/types.h>
-#include <dirent.h>
-main() { struct dirent *di; DIR *d = opendir("."); di = readdir(d);
-if (di && di->d_name[-2] == '.' && di->d_name[-1] == 0 &&
-di->d_name[0] == 0) exit(0); exit(1);} 
-EOF
-if { (eval echo configure:9818: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  samba_cv_HAVE_BROKEN_READDIR=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  samba_cv_HAVE_BROKEN_READDIR=no
-fi
-rm -fr conftest*
-fi
-
-fi
-
-echo "$ac_t""$samba_cv_HAVE_BROKEN_READDIR" 1>&6
-if test x"$samba_cv_HAVE_BROKEN_READDIR" = x"yes"; then
-    cat >> confdefs.h <<\EOF
-#define HAVE_BROKEN_READDIR 1
-EOF
-
-fi
-
-echo $ac_n "checking for utimbuf""... $ac_c" 1>&6
-echo "configure:9841: checking for utimbuf" >&5
-if eval "test \"`echo '$''{'samba_cv_HAVE_UTIMBUF'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-cat > conftest.$ac_ext <<EOF
-#line 9847 "configure"
-#include "confdefs.h"
-#include <sys/types.h>
-#include <utime.h>
-int main() {
-struct utimbuf tbuf;  tbuf.actime = 0; tbuf.modtime = 1; exit(utime("foo.c",&tbuf));
-; return 0; }
-EOF
-if { (eval echo configure:9855: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-  rm -rf conftest*
-  samba_cv_HAVE_UTIMBUF=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  samba_cv_HAVE_UTIMBUF=no
-fi
-rm -f conftest*
-fi
-
-echo "$ac_t""$samba_cv_HAVE_UTIMBUF" 1>&6
-if test x"$samba_cv_HAVE_UTIMBUF" = x"yes"; then
-    cat >> confdefs.h <<\EOF
-#define HAVE_UTIMBUF 1
-EOF
-
-fi
-
-
-for ac_func in pututline pututxline updwtmp updwtmpx getutmpx
-do
-echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:9879: checking for $ac_func" >&5
-if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 9884 "configure"
-#include "confdefs.h"
-/* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char $ac_func(); below.  */
-#include <assert.h>
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char $ac_func();
-
-int main() {
-
-/* The GNU C library defines this for functions which it implements
-    to always fail with ENOSYS.  Some functions are actually named
-    something starting with __ and the normal name is an alias.  */
-#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
-choke me
-#else
-$ac_func();
-#endif
-
-; return 0; }
-EOF
-if { (eval echo configure:9907: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=no"
-fi
-rm -f conftest*
-fi
-
-if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_func 1
-EOF
- 
-else
-  echo "$ac_t""no" 1>&6
-fi
-done
-
-
-echo $ac_n "checking for ut_name in utmp""... $ac_c" 1>&6
-echo "configure:9933: checking for ut_name in utmp" >&5
-if eval "test \"`echo '$''{'samba_cv_HAVE_UT_UT_NAME'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-cat > conftest.$ac_ext <<EOF
-#line 9939 "configure"
-#include "confdefs.h"
-#include <sys/types.h>
-#include <utmp.h>
-int main() {
-struct utmp ut;  ut.ut_name[0] = 'a';
-; return 0; }
-EOF
-if { (eval echo configure:9947: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-  rm -rf conftest*
-  samba_cv_HAVE_UT_UT_NAME=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  samba_cv_HAVE_UT_UT_NAME=no
-fi
-rm -f conftest*
-fi
-
-echo "$ac_t""$samba_cv_HAVE_UT_UT_NAME" 1>&6
-if test x"$samba_cv_HAVE_UT_UT_NAME" = x"yes"; then
-    cat >> confdefs.h <<\EOF
-#define HAVE_UT_UT_NAME 1
-EOF
-
-fi 
-
-echo $ac_n "checking for ut_user in utmp""... $ac_c" 1>&6
-echo "configure:9968: checking for ut_user in utmp" >&5
-if eval "test \"`echo '$''{'samba_cv_HAVE_UT_UT_USER'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-cat > conftest.$ac_ext <<EOF
-#line 9974 "configure"
-#include "confdefs.h"
-#include <sys/types.h>
-#include <utmp.h>
-int main() {
-struct utmp ut;  ut.ut_user[0] = 'a';
-; return 0; }
-EOF
-if { (eval echo configure:9982: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-  rm -rf conftest*
-  samba_cv_HAVE_UT_UT_USER=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  samba_cv_HAVE_UT_UT_USER=no
-fi
-rm -f conftest*
-fi
-
-echo "$ac_t""$samba_cv_HAVE_UT_UT_USER" 1>&6
-if test x"$samba_cv_HAVE_UT_UT_USER" = x"yes"; then
-    cat >> confdefs.h <<\EOF
-#define HAVE_UT_UT_USER 1
-EOF
-
-fi 
-
-echo $ac_n "checking for ut_id in utmp""... $ac_c" 1>&6
-echo "configure:10003: checking for ut_id in utmp" >&5
-if eval "test \"`echo '$''{'samba_cv_HAVE_UT_UT_ID'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-cat > conftest.$ac_ext <<EOF
-#line 10009 "configure"
-#include "confdefs.h"
-#include <sys/types.h>
-#include <utmp.h>
-int main() {
-struct utmp ut;  ut.ut_id[0] = 'a';
-; return 0; }
-EOF
-if { (eval echo configure:10017: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-  rm -rf conftest*
-  samba_cv_HAVE_UT_UT_ID=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  samba_cv_HAVE_UT_UT_ID=no
-fi
-rm -f conftest*
-fi
-
-echo "$ac_t""$samba_cv_HAVE_UT_UT_ID" 1>&6
-if test x"$samba_cv_HAVE_UT_UT_ID" = x"yes"; then
-    cat >> confdefs.h <<\EOF
-#define HAVE_UT_UT_ID 1
-EOF
-
-fi 
-
-echo $ac_n "checking for ut_host in utmp""... $ac_c" 1>&6
-echo "configure:10038: checking for ut_host in utmp" >&5
-if eval "test \"`echo '$''{'samba_cv_HAVE_UT_UT_HOST'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-cat > conftest.$ac_ext <<EOF
-#line 10044 "configure"
-#include "confdefs.h"
-#include <sys/types.h>
-#include <utmp.h>
-int main() {
-struct utmp ut;  ut.ut_host[0] = 'a';
-; return 0; }
-EOF
-if { (eval echo configure:10052: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-  rm -rf conftest*
-  samba_cv_HAVE_UT_UT_HOST=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  samba_cv_HAVE_UT_UT_HOST=no
-fi
-rm -f conftest*
-fi
-
-echo "$ac_t""$samba_cv_HAVE_UT_UT_HOST" 1>&6
-if test x"$samba_cv_HAVE_UT_UT_HOST" = x"yes"; then
-    cat >> confdefs.h <<\EOF
-#define HAVE_UT_UT_HOST 1
-EOF
-
-fi 
-
-echo $ac_n "checking for ut_time in utmp""... $ac_c" 1>&6
-echo "configure:10073: checking for ut_time in utmp" >&5
-if eval "test \"`echo '$''{'samba_cv_HAVE_UT_UT_TIME'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-cat > conftest.$ac_ext <<EOF
-#line 10079 "configure"
-#include "confdefs.h"
-#include <sys/types.h>
-#include <utmp.h>
-int main() {
-struct utmp ut;  time_t t; ut.ut_time = t;
-; return 0; }
-EOF
-if { (eval echo configure:10087: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-  rm -rf conftest*
-  samba_cv_HAVE_UT_UT_TIME=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  samba_cv_HAVE_UT_UT_TIME=no
-fi
-rm -f conftest*
-fi
-
-echo "$ac_t""$samba_cv_HAVE_UT_UT_TIME" 1>&6
-if test x"$samba_cv_HAVE_UT_UT_TIME" = x"yes"; then
-    cat >> confdefs.h <<\EOF
-#define HAVE_UT_UT_TIME 1
-EOF
-
-fi 
-
-echo $ac_n "checking for ut_tv in utmp""... $ac_c" 1>&6
-echo "configure:10108: checking for ut_tv in utmp" >&5
-if eval "test \"`echo '$''{'samba_cv_HAVE_UT_UT_TV'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-cat > conftest.$ac_ext <<EOF
-#line 10114 "configure"
-#include "confdefs.h"
-#include <sys/types.h>
-#include <utmp.h>
-int main() {
-struct utmp ut;  struct timeval tv; ut.ut_tv = tv;
-; return 0; }
-EOF
-if { (eval echo configure:10122: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-  rm -rf conftest*
-  samba_cv_HAVE_UT_UT_TV=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  samba_cv_HAVE_UT_UT_TV=no
-fi
-rm -f conftest*
-fi
-
-echo "$ac_t""$samba_cv_HAVE_UT_UT_TV" 1>&6
-if test x"$samba_cv_HAVE_UT_UT_TV" = x"yes"; then
-    cat >> confdefs.h <<\EOF
-#define HAVE_UT_UT_TV 1
-EOF
-
-fi 
-
-echo $ac_n "checking for ut_type in utmp""... $ac_c" 1>&6
-echo "configure:10143: checking for ut_type in utmp" >&5
-if eval "test \"`echo '$''{'samba_cv_HAVE_UT_UT_TYPE'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-cat > conftest.$ac_ext <<EOF
-#line 10149 "configure"
-#include "confdefs.h"
-#include <sys/types.h>
-#include <utmp.h>
-int main() {
-struct utmp ut;  ut.ut_type = 0;
-; return 0; }
-EOF
-if { (eval echo configure:10157: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-  rm -rf conftest*
-  samba_cv_HAVE_UT_UT_TYPE=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  samba_cv_HAVE_UT_UT_TYPE=no
-fi
-rm -f conftest*
-fi
-
-echo "$ac_t""$samba_cv_HAVE_UT_UT_TYPE" 1>&6
-if test x"$samba_cv_HAVE_UT_UT_TYPE" = x"yes"; then
-    cat >> confdefs.h <<\EOF
-#define HAVE_UT_UT_TYPE 1
-EOF
-
-fi 
-
-echo $ac_n "checking for ut_pid in utmp""... $ac_c" 1>&6
-echo "configure:10178: checking for ut_pid in utmp" >&5
-if eval "test \"`echo '$''{'samba_cv_HAVE_UT_UT_PID'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-cat > conftest.$ac_ext <<EOF
-#line 10184 "configure"
-#include "confdefs.h"
-#include <sys/types.h>
-#include <utmp.h>
-int main() {
-struct utmp ut;  ut.ut_pid = 0;
-; return 0; }
-EOF
-if { (eval echo configure:10192: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-  rm -rf conftest*
-  samba_cv_HAVE_UT_UT_PID=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  samba_cv_HAVE_UT_UT_PID=no
-fi
-rm -f conftest*
-fi
-
-echo "$ac_t""$samba_cv_HAVE_UT_UT_PID" 1>&6
-if test x"$samba_cv_HAVE_UT_UT_PID" = x"yes"; then
-    cat >> confdefs.h <<\EOF
-#define HAVE_UT_UT_PID 1
-EOF
-
-fi 
-
-echo $ac_n "checking for ut_exit in utmp""... $ac_c" 1>&6
-echo "configure:10213: checking for ut_exit in utmp" >&5
-if eval "test \"`echo '$''{'samba_cv_HAVE_UT_UT_EXIT'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-cat > conftest.$ac_ext <<EOF
-#line 10219 "configure"
-#include "confdefs.h"
-#include <sys/types.h>
-#include <utmp.h>
-int main() {
-struct utmp ut;  ut.ut_exit.e_exit = 0;
-; return 0; }
-EOF
-if { (eval echo configure:10227: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-  rm -rf conftest*
-  samba_cv_HAVE_UT_UT_EXIT=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  samba_cv_HAVE_UT_UT_EXIT=no
-fi
-rm -f conftest*
-fi
-
-echo "$ac_t""$samba_cv_HAVE_UT_UT_EXIT" 1>&6
-if test x"$samba_cv_HAVE_UT_UT_EXIT" = x"yes"; then
-    cat >> confdefs.h <<\EOF
-#define HAVE_UT_UT_EXIT 1
-EOF
-
-fi 
-
-echo $ac_n "checking for ut_addr in utmp""... $ac_c" 1>&6
-echo "configure:10248: checking for ut_addr in utmp" >&5
-if eval "test \"`echo '$''{'samba_cv_HAVE_UT_UT_ADDR'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-cat > conftest.$ac_ext <<EOF
-#line 10254 "configure"
-#include "confdefs.h"
-#include <sys/types.h>
-#include <utmp.h>
-int main() {
-struct utmp ut;  ut.ut_addr = 0;
-; return 0; }
-EOF
-if { (eval echo configure:10262: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-  rm -rf conftest*
-  samba_cv_HAVE_UT_UT_ADDR=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  samba_cv_HAVE_UT_UT_ADDR=no
-fi
-rm -f conftest*
-fi
-
-echo "$ac_t""$samba_cv_HAVE_UT_UT_ADDR" 1>&6
-if test x"$samba_cv_HAVE_UT_UT_ADDR" = x"yes"; then
-    cat >> confdefs.h <<\EOF
-#define HAVE_UT_UT_ADDR 1
-EOF
-
-fi 
-
-if test x$ac_cv_func_pututline = xyes ; then
-  echo $ac_n "checking whether pututline returns pointer""... $ac_c" 1>&6
-echo "configure:10284: checking whether pututline returns pointer" >&5
-if eval "test \"`echo '$''{'samba_cv_PUTUTLINE_RETURNS_UTMP'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-  cat > conftest.$ac_ext <<EOF
-#line 10290 "configure"
-#include "confdefs.h"
-#include <sys/types.h>
-#include <utmp.h>
-int main() {
-struct utmp utarg; struct utmp *utreturn; utreturn = pututline(&utarg);
-; return 0; }
-EOF
-if { (eval echo configure:10298: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-  rm -rf conftest*
-  samba_cv_PUTUTLINE_RETURNS_UTMP=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  samba_cv_PUTUTLINE_RETURNS_UTMP=no
-fi
-rm -f conftest*
-fi
-
-echo "$ac_t""$samba_cv_PUTUTLINE_RETURNS_UTMP" 1>&6
-  if test x"$samba_cv_PUTUTLINE_RETURNS_UTMP" = x"yes"; then
-      cat >> confdefs.h <<\EOF
-#define PUTUTLINE_RETURNS_UTMP 1
-EOF
-
-  fi
-fi
-
-echo $ac_n "checking for ut_syslen in utmpx""... $ac_c" 1>&6
-echo "configure:10320: checking for ut_syslen in utmpx" >&5
-if eval "test \"`echo '$''{'samba_cv_HAVE_UX_UT_SYSLEN'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-cat > conftest.$ac_ext <<EOF
-#line 10326 "configure"
-#include "confdefs.h"
-#include <sys/types.h>
-#include <utmpx.h>
-int main() {
-struct utmpx ux;  ux.ut_syslen = 0;
-; return 0; }
-EOF
-if { (eval echo configure:10334: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-  rm -rf conftest*
-  samba_cv_HAVE_UX_UT_SYSLEN=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  samba_cv_HAVE_UX_UT_SYSLEN=no
-fi
-rm -f conftest*
-fi
-
-echo "$ac_t""$samba_cv_HAVE_UX_UT_SYSLEN" 1>&6
-if test x"$samba_cv_HAVE_UX_UT_SYSLEN" = x"yes"; then
-    cat >> confdefs.h <<\EOF
-#define HAVE_UX_UT_SYSLEN 1
-EOF
-
-fi 
-
-echo $ac_n "checking for Linux kernel oplocks""... $ac_c" 1>&6
-echo "configure:10355: checking for Linux kernel oplocks" >&5
-if eval "test \"`echo '$''{'samba_cv_HAVE_KERNEL_OPLOCKS_LINUX'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-if test "$cross_compiling" = yes; then
-  samba_cv_HAVE_KERNEL_OPLOCKS_LINUX=cross
-else
-  cat > conftest.$ac_ext <<EOF
-#line 10364 "configure"
-#include "confdefs.h"
-
-#include <sys/types.h>
-#include <fcntl.h>
-#ifndef F_GETLEASE
-#define F_GETLEASE	1025
-#endif
-main() {
-       int fd = open("/dev/null", O_RDONLY);
-       return fcntl(fd, F_GETLEASE, 0) == -1;
-}
-
-EOF
-if { (eval echo configure:10378: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  samba_cv_HAVE_KERNEL_OPLOCKS_LINUX=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  samba_cv_HAVE_KERNEL_OPLOCKS_LINUX=no
-fi
-rm -fr conftest*
-fi
-
-fi
-
-echo "$ac_t""$samba_cv_HAVE_KERNEL_OPLOCKS_LINUX" 1>&6
-if test x"$samba_cv_HAVE_KERNEL_OPLOCKS_LINUX" = x"yes"; then
-    cat >> confdefs.h <<\EOF
-#define HAVE_KERNEL_OPLOCKS_LINUX 1
-EOF
-
-fi
-
-echo $ac_n "checking for kernel change notify support""... $ac_c" 1>&6
-echo "configure:10401: checking for kernel change notify support" >&5
-if eval "test \"`echo '$''{'samba_cv_HAVE_KERNEL_CHANGE_NOTIFY'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-if test "$cross_compiling" = yes; then
-  samba_cv_HAVE_KERNEL_CHANGE_NOTIFY=cross
-else
-  cat > conftest.$ac_ext <<EOF
-#line 10410 "configure"
-#include "confdefs.h"
-
-#include <sys/types.h>
-#include <fcntl.h>
-#include <signal.h>
-#ifndef F_NOTIFY
-#define F_NOTIFY 1026
-#endif
-main() {
-       	exit(fcntl(open("/tmp", O_RDONLY), F_NOTIFY, 0) == -1 ?  1 : 0);
-}
-
-EOF
-if { (eval echo configure:10424: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  samba_cv_HAVE_KERNEL_CHANGE_NOTIFY=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  samba_cv_HAVE_KERNEL_CHANGE_NOTIFY=no
-fi
-rm -fr conftest*
-fi
-
-fi
-
-echo "$ac_t""$samba_cv_HAVE_KERNEL_CHANGE_NOTIFY" 1>&6
-if test x"$samba_cv_HAVE_KERNEL_CHANGE_NOTIFY" = x"yes" && test x"$target_cpu" != x"s390"; then
-    cat >> confdefs.h <<\EOF
-#define HAVE_KERNEL_CHANGE_NOTIFY 1
-EOF
-
-fi
-
-echo $ac_n "checking for kernel share modes""... $ac_c" 1>&6
-echo "configure:10447: checking for kernel share modes" >&5
-if eval "test \"`echo '$''{'samba_cv_HAVE_KERNEL_SHARE_MODES'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-if test "$cross_compiling" = yes; then
-  samba_cv_HAVE_KERNEL_SHARE_MODES=cross
-else
-  cat > conftest.$ac_ext <<EOF
-#line 10456 "configure"
-#include "confdefs.h"
-
-#include <sys/types.h>
-#include <fcntl.h>
-#include <signal.h>
-#include <sys/file.h>
-#ifndef LOCK_MAND
-#define LOCK_MAND	32
-#define LOCK_READ	64
-#endif
-main() {
-       	exit(flock(open("/dev/null", O_RDWR), LOCK_MAND|LOCK_READ) != 0);
-}
-
-EOF
-if { (eval echo configure:10472: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  samba_cv_HAVE_KERNEL_SHARE_MODES=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  samba_cv_HAVE_KERNEL_SHARE_MODES=no
-fi
-rm -fr conftest*
-fi
-
-fi
-
-echo "$ac_t""$samba_cv_HAVE_KERNEL_SHARE_MODES" 1>&6
-if test x"$samba_cv_HAVE_KERNEL_SHARE_MODES" = x"yes"; then
-    cat >> confdefs.h <<\EOF
-#define HAVE_KERNEL_SHARE_MODES 1
-EOF
-
-fi
-
-
-
-
-echo $ac_n "checking for IRIX kernel oplock type definitions""... $ac_c" 1>&6
-echo "configure:10498: checking for IRIX kernel oplock type definitions" >&5
-if eval "test \"`echo '$''{'samba_cv_HAVE_KERNEL_OPLOCKS_IRIX'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-cat > conftest.$ac_ext <<EOF
-#line 10504 "configure"
-#include "confdefs.h"
-#include <sys/types.h>
-#include <fcntl.h>
-int main() {
-oplock_stat_t t; t.os_state = OP_REVOKE; t.os_dev = 1; t.os_ino = 1;
-; return 0; }
-EOF
-if { (eval echo configure:10512: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-  rm -rf conftest*
-  samba_cv_HAVE_KERNEL_OPLOCKS_IRIX=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  samba_cv_HAVE_KERNEL_OPLOCKS_IRIX=no
-fi
-rm -f conftest*
-fi
-
-echo "$ac_t""$samba_cv_HAVE_KERNEL_OPLOCKS_IRIX" 1>&6
-if test x"$samba_cv_HAVE_KERNEL_OPLOCKS_IRIX" = x"yes"; then
-    cat >> confdefs.h <<\EOF
-#define HAVE_KERNEL_OPLOCKS_IRIX 1
-EOF
-
-fi
-
-echo $ac_n "checking for irix specific capabilities""... $ac_c" 1>&6
-echo "configure:10533: checking for irix specific capabilities" >&5
-if eval "test \"`echo '$''{'samba_cv_HAVE_IRIX_SPECIFIC_CAPABILITIES'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-if test "$cross_compiling" = yes; then
-  samba_cv_HAVE_IRIX_SPECIFIC_CAPABILITIES=cross
-else
-  cat > conftest.$ac_ext <<EOF
-#line 10542 "configure"
-#include "confdefs.h"
-#include <sys/types.h>
-#include <sys/capability.h>
-main() {
- cap_t cap;
- if ((cap = cap_get_proc()) == NULL)
-   exit(1);
- cap->cap_effective |= CAP_NETWORK_MGT;
- cap->cap_inheritable |= CAP_NETWORK_MGT;
- cap_set_proc(cap);
- exit(0);
-}
-
-EOF
-if { (eval echo configure:10557: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  samba_cv_HAVE_IRIX_SPECIFIC_CAPABILITIES=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  samba_cv_HAVE_IRIX_SPECIFIC_CAPABILITIES=no
-fi
-rm -fr conftest*
-fi
-
-fi
-
-echo "$ac_t""$samba_cv_HAVE_IRIX_SPECIFIC_CAPABILITIES" 1>&6
-if test x"$samba_cv_HAVE_IRIX_SPECIFIC_CAPABILITIES" = x"yes"; then
-    cat >> confdefs.h <<\EOF
-#define HAVE_IRIX_SPECIFIC_CAPABILITIES 1
-EOF
-
-fi
-
-#
-# Check for int16, uint16, int32 and uint32 in rpc/types.h included from rpc/rpc.h
-# This is *really* broken but some systems (DEC OSF1) do this.... JRA.
-#
-
-echo $ac_n "checking for int16 typedef included by rpc/rpc.h""... $ac_c" 1>&6
-echo "configure:10585: checking for int16 typedef included by rpc/rpc.h" >&5
-if eval "test \"`echo '$''{'samba_cv_HAVE_INT16_FROM_RPC_RPC_H'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-cat > conftest.$ac_ext <<EOF
-#line 10591 "configure"
-#include "confdefs.h"
-#include <sys/types.h>
-#if defined(HAVE_RPC_RPC_H)
-#include <rpc/rpc.h>
-#endif
-int main() {
-int16 testvar;
-; return 0; }
-EOF
-if { (eval echo configure:10601: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-  rm -rf conftest*
-  samba_cv_HAVE_INT16_FROM_RPC_RPC_H=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  samba_cv_HAVE_INT16_FROM_RPC_RPC_H=no
-fi
-rm -f conftest*
-fi
-
-echo "$ac_t""$samba_cv_HAVE_INT16_FROM_RPC_RPC_H" 1>&6
-if test x"$samba_cv_HAVE_INT16_FROM_RPC_RPC_H" = x"yes"; then
-    cat >> confdefs.h <<\EOF
-#define HAVE_INT16_FROM_RPC_RPC_H 1
-EOF
-
-fi
-
-echo $ac_n "checking for uint16 typedef included by rpc/rpc.h""... $ac_c" 1>&6
-echo "configure:10622: checking for uint16 typedef included by rpc/rpc.h" >&5
-if eval "test \"`echo '$''{'samba_cv_HAVE_UINT16_FROM_RPC_RPC_H'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-cat > conftest.$ac_ext <<EOF
-#line 10628 "configure"
-#include "confdefs.h"
-#include <sys/types.h>
-#if defined(HAVE_RPC_RPC_H)
-#include <rpc/rpc.h>
-#endif
-int main() {
-uint16 testvar;
-; return 0; }
-EOF
-if { (eval echo configure:10638: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-  rm -rf conftest*
-  samba_cv_HAVE_UINT16_FROM_RPC_RPC_H=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  samba_cv_HAVE_UINT16_FROM_RPC_RPC_H=no
-fi
-rm -f conftest*
-fi
-
-echo "$ac_t""$samba_cv_HAVE_UINT16_FROM_RPC_RPC_H" 1>&6
-if test x"$samba_cv_HAVE_UINT16_FROM_RPC_RPC_H" = x"yes"; then
-    cat >> confdefs.h <<\EOF
-#define HAVE_UINT16_FROM_RPC_RPC_H 1
-EOF
-
-fi
-
-echo $ac_n "checking for int32 typedef included by rpc/rpc.h""... $ac_c" 1>&6
-echo "configure:10659: checking for int32 typedef included by rpc/rpc.h" >&5
-if eval "test \"`echo '$''{'samba_cv_HAVE_INT32_FROM_RPC_RPC_H'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-cat > conftest.$ac_ext <<EOF
-#line 10665 "configure"
-#include "confdefs.h"
-#include <sys/types.h>
-#if defined(HAVE_RPC_RPC_H)
-#include <rpc/rpc.h>
-#endif
-int main() {
-int32 testvar;
-; return 0; }
-EOF
-if { (eval echo configure:10675: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-  rm -rf conftest*
-  samba_cv_HAVE_INT32_FROM_RPC_RPC_H=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  samba_cv_HAVE_INT32_FROM_RPC_RPC_H=no
-fi
-rm -f conftest*
-fi
-
-echo "$ac_t""$samba_cv_HAVE_INT32_FROM_RPC_RPC_H" 1>&6
-if test x"$samba_cv_HAVE_INT32_FROM_RPC_RPC_H" = x"yes"; then
-    cat >> confdefs.h <<\EOF
-#define HAVE_INT32_FROM_RPC_RPC_H 1
-EOF
-
-fi
-
-echo $ac_n "checking for uint32 typedef included by rpc/rpc.h""... $ac_c" 1>&6
-echo "configure:10696: checking for uint32 typedef included by rpc/rpc.h" >&5
-if eval "test \"`echo '$''{'samba_cv_HAVE_UINT32_FROM_RPC_RPC_H'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-cat > conftest.$ac_ext <<EOF
-#line 10702 "configure"
-#include "confdefs.h"
-#include <sys/types.h>
-#if defined(HAVE_RPC_RPC_H)
-#include <rpc/rpc.h>
-#endif
-int main() {
-uint32 testvar;
-; return 0; }
-EOF
-if { (eval echo configure:10712: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-  rm -rf conftest*
-  samba_cv_HAVE_UINT32_FROM_RPC_RPC_H=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  samba_cv_HAVE_UINT32_FROM_RPC_RPC_H=no
-fi
-rm -f conftest*
-fi
-
-echo "$ac_t""$samba_cv_HAVE_UINT32_FROM_RPC_RPC_H" 1>&6
-if test x"$samba_cv_HAVE_UINT32_FROM_RPC_RPC_H" = x"yes"; then
-    cat >> confdefs.h <<\EOF
-#define HAVE_UINT32_FROM_RPC_RPC_H 1
-EOF
-
-fi
-
-
-echo $ac_n "checking for conflicting AUTH_ERROR define in rpc/rpc.h""... $ac_c" 1>&6
-echo "configure:10734: checking for conflicting AUTH_ERROR define in rpc/rpc.h" >&5
-if eval "test \"`echo '$''{'samba_cv_HAVE_RPC_AUTH_ERROR_CONFLICT'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-cat > conftest.$ac_ext <<EOF
-#line 10740 "configure"
-#include "confdefs.h"
-#include <sys/types.h>
-#ifdef HAVE_SYS_SECURITY_H
-#include <sys/security.h>
-#include <prot.h>
-#endif  /* HAVE_SYS_SECURITY_H */
-#if defined(HAVE_RPC_RPC_H)
-#include <rpc/rpc.h>
-#endif
-int main() {
-int testvar;
-; return 0; }
-EOF
-if { (eval echo configure:10754: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-  rm -rf conftest*
-  samba_cv_HAVE_RPC_AUTH_ERROR_CONFLICT=no
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  samba_cv_HAVE_RPC_AUTH_ERROR_CONFLICT=yes
-fi
-rm -f conftest*
-fi
-
-echo "$ac_t""$samba_cv_HAVE_RPC_AUTH_ERROR_CONFLICT" 1>&6
-if test x"$samba_cv_HAVE_RPC_AUTH_ERROR_CONFLICT" = x"yes"; then
-    cat >> confdefs.h <<\EOF
-#define HAVE_RPC_AUTH_ERROR_CONFLICT 1
-EOF
-
-fi
-
-echo $ac_n "checking for test routines""... $ac_c" 1>&6
-echo "configure:10775: checking for test routines" >&5
-if test "$cross_compiling" = yes; then
-  echo "configure: warning: cannot run when cross-compiling" 1>&2
-else
-  cat > conftest.$ac_ext <<EOF
-#line 10780 "configure"
-#include "confdefs.h"
-#include "${srcdir-.}/tests/trivial.c"
-EOF
-if { (eval echo configure:10784: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  echo "$ac_t""yes" 1>&6
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  { echo "configure: error: cant find test code. Aborting config" 1>&2; exit 1; }
-fi
-rm -fr conftest*
-fi
-
-
-echo $ac_n "checking for ftruncate extend""... $ac_c" 1>&6
-echo "configure:10798: checking for ftruncate extend" >&5
-if eval "test \"`echo '$''{'samba_cv_HAVE_FTRUNCATE_EXTEND'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-if test "$cross_compiling" = yes; then
-  samba_cv_HAVE_FTRUNCATE_EXTEND=cross
-else
-  cat > conftest.$ac_ext <<EOF
-#line 10807 "configure"
-#include "confdefs.h"
-#include "${srcdir-.}/tests/ftruncate.c"
-EOF
-if { (eval echo configure:10811: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  samba_cv_HAVE_FTRUNCATE_EXTEND=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  samba_cv_HAVE_FTRUNCATE_EXTEND=no
-fi
-rm -fr conftest*
-fi
-
-fi
-
-echo "$ac_t""$samba_cv_HAVE_FTRUNCATE_EXTEND" 1>&6
-if test x"$samba_cv_HAVE_FTRUNCATE_EXTEND" = x"yes"; then
-    cat >> confdefs.h <<\EOF
-#define HAVE_FTRUNCATE_EXTEND 1
-EOF
-
-fi
-
-echo $ac_n "checking for broken getgroups""... $ac_c" 1>&6
-echo "configure:10834: checking for broken getgroups" >&5
-if eval "test \"`echo '$''{'samba_cv_HAVE_BROKEN_GETGROUPS'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-if test "$cross_compiling" = yes; then
-  samba_cv_HAVE_BROKEN_GETGROUPS=cross
-else
-  cat > conftest.$ac_ext <<EOF
-#line 10843 "configure"
-#include "confdefs.h"
-#include "${srcdir-.}/tests/getgroups.c"
-EOF
-if { (eval echo configure:10847: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  samba_cv_HAVE_BROKEN_GETGROUPS=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  samba_cv_HAVE_BROKEN_GETGROUPS=no
-fi
-rm -fr conftest*
-fi
-
-fi
-
-echo "$ac_t""$samba_cv_HAVE_BROKEN_GETGROUPS" 1>&6
-if test x"$samba_cv_HAVE_BROKEN_GETGROUPS" = x"yes"; then
-    cat >> confdefs.h <<\EOF
-#define HAVE_BROKEN_GETGROUPS 1
-EOF
-
-fi
-
-echo $ac_n "checking whether getpass should be replaced""... $ac_c" 1>&6
-echo "configure:10870: checking whether getpass should be replaced" >&5
-if eval "test \"`echo '$''{'samba_cv_REPLACE_GETPASS'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-SAVE_CPPFLAGS="$CPPFLAGS"
-CPPFLAGS="$CPPFLAGS -I${srcdir-.}/ -I${srcdir-.}/include -I${srcdir-.}/ubiqx -I${srcdir-.}/popt  -I${srcdir-.}/smbwrapper"
-cat > conftest.$ac_ext <<EOF
-#line 10878 "configure"
-#include "confdefs.h"
-
-#define REPLACE_GETPASS 1
-#define NO_CONFIG_H 1
-#define main dont_declare_main
-#include "${srcdir-.}/lib/getsmbpass.c"
-#undef main
-
-int main() {
-
-; return 0; }
-EOF
-if { (eval echo configure:10891: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-  rm -rf conftest*
-  samba_cv_REPLACE_GETPASS=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  samba_cv_REPLACE_GETPASS=no
-fi
-rm -f conftest*
-CPPFLAGS="$SAVE_CPPFLAGS"
-
-fi
-
-echo "$ac_t""$samba_cv_REPLACE_GETPASS" 1>&6
-if test x"$samba_cv_REPLACE_GETPASS" = x"yes"; then
-	cat >> confdefs.h <<\EOF
-#define REPLACE_GETPASS 1
-EOF
-
-fi
-
-echo $ac_n "checking for broken inet_ntoa""... $ac_c" 1>&6
-echo "configure:10914: checking for broken inet_ntoa" >&5
-if eval "test \"`echo '$''{'samba_cv_REPLACE_INET_NTOA'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-if test "$cross_compiling" = yes; then
-  samba_cv_REPLACE_INET_NTOA=cross
-else
-  cat > conftest.$ac_ext <<EOF
-#line 10923 "configure"
-#include "confdefs.h"
-
-#include <stdio.h>
-#include <sys/types.h>
-#include <netinet/in.h>
-#ifdef HAVE_ARPA_INET_H
-#include <arpa/inet.h>
-#endif
-main() { struct in_addr ip; ip.s_addr = 0x12345678;
-if (strcmp(inet_ntoa(ip),"18.52.86.120") &&
-    strcmp(inet_ntoa(ip),"120.86.52.18")) { exit(0); } 
-exit(1);}
-EOF
-if { (eval echo configure:10937: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  samba_cv_REPLACE_INET_NTOA=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  samba_cv_REPLACE_INET_NTOA=no
-fi
-rm -fr conftest*
-fi
-
-fi
-
-echo "$ac_t""$samba_cv_REPLACE_INET_NTOA" 1>&6
-if test x"$samba_cv_REPLACE_INET_NTOA" = x"yes"; then
-    cat >> confdefs.h <<\EOF
-#define REPLACE_INET_NTOA 1
-EOF
-
-fi
-
-echo $ac_n "checking for secure mkstemp""... $ac_c" 1>&6
-echo "configure:10960: checking for secure mkstemp" >&5
-if eval "test \"`echo '$''{'samba_cv_HAVE_SECURE_MKSTEMP'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-if test "$cross_compiling" = yes; then
-  samba_cv_HAVE_SECURE_MKSTEMP=cross
-else
-  cat > conftest.$ac_ext <<EOF
-#line 10969 "configure"
-#include "confdefs.h"
-#include <stdlib.h>
-#include <sys/types.h>
-#include <sys/stat.h>
-#include <unistd.h>
-main() { 
-  struct stat st;
-  char tpl[20]="/tmp/test.XXXXXX"; 
-  int fd = mkstemp(tpl); 
-  if (fd == -1) exit(1);
-  unlink(tpl);
-  if (fstat(fd, &st) != 0) exit(1);
-  if ((st.st_mode & 0777) != 0600) exit(1);
-  exit(0);
-}
-EOF
-if { (eval echo configure:10986: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  samba_cv_HAVE_SECURE_MKSTEMP=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  samba_cv_HAVE_SECURE_MKSTEMP=no
-fi
-rm -fr conftest*
-fi
-
-fi
-
-echo "$ac_t""$samba_cv_HAVE_SECURE_MKSTEMP" 1>&6
-if test x"$samba_cv_HAVE_SECURE_MKSTEMP" = x"yes"; then
-    cat >> confdefs.h <<\EOF
-#define HAVE_SECURE_MKSTEMP 1
-EOF
-
-fi
-
-echo $ac_n "checking for sysconf(_SC_NGROUPS_MAX)""... $ac_c" 1>&6
-echo "configure:11009: checking for sysconf(_SC_NGROUPS_MAX)" >&5
-if eval "test \"`echo '$''{'samba_cv_SYSCONF_SC_NGROUPS_MAX'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-if test "$cross_compiling" = yes; then
-  samba_cv_SYSCONF_SC_NGROUPS_MAX=cross
-else
-  cat > conftest.$ac_ext <<EOF
-#line 11018 "configure"
-#include "confdefs.h"
-#include <unistd.h>
-main() { exit(sysconf(_SC_NGROUPS_MAX) == -1 ? 1 : 0); }
-EOF
-if { (eval echo configure:11023: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  samba_cv_SYSCONF_SC_NGROUPS_MAX=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  samba_cv_SYSCONF_SC_NGROUPS_MAX=no
-fi
-rm -fr conftest*
-fi
-
-fi
-
-echo "$ac_t""$samba_cv_SYSCONF_SC_NGROUPS_MAX" 1>&6
-if test x"$samba_cv_SYSCONF_SC_NGROUPS_MAX" = x"yes"; then
-    cat >> confdefs.h <<\EOF
-#define SYSCONF_SC_NGROUPS_MAX 1
-EOF
-
-fi
-
-echo $ac_n "checking for root""... $ac_c" 1>&6
-echo "configure:11046: checking for root" >&5
-if eval "test \"`echo '$''{'samba_cv_HAVE_ROOT'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-if test "$cross_compiling" = yes; then
-  samba_cv_HAVE_ROOT=cross
-else
-  cat > conftest.$ac_ext <<EOF
-#line 11055 "configure"
-#include "confdefs.h"
-main() { exit(getuid() != 0); }
-EOF
-if { (eval echo configure:11059: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  samba_cv_HAVE_ROOT=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  samba_cv_HAVE_ROOT=no
-fi
-rm -fr conftest*
-fi
-
-fi
-
-echo "$ac_t""$samba_cv_HAVE_ROOT" 1>&6
-if test x"$samba_cv_HAVE_ROOT" = x"yes"; then
-    cat >> confdefs.h <<\EOF
-#define HAVE_ROOT 1
-EOF
-
-else
-    echo "configure: warning: running as non-root will disable some tests" 1>&2
-fi
-
-##################
-# look for a method of finding the list of network interfaces
-iface=no;
-echo $ac_n "checking for iface AIX""... $ac_c" 1>&6
-echo "configure:11087: checking for iface AIX" >&5
-if eval "test \"`echo '$''{'samba_cv_HAVE_IFACE_AIX'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-if test "$cross_compiling" = yes; then
-  samba_cv_HAVE_IFACE_AIX=cross
-else
-  cat > conftest.$ac_ext <<EOF
-#line 11096 "configure"
-#include "confdefs.h"
-
-#define HAVE_IFACE_AIX 1
-#define AUTOCONF_TEST 1
-#include "confdefs.h"
-#include "${srcdir-.}/lib/interfaces.c"
-EOF
-if { (eval echo configure:11104: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  samba_cv_HAVE_IFACE_AIX=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  samba_cv_HAVE_IFACE_AIX=no
-fi
-rm -fr conftest*
-fi
-
-fi
-
-echo "$ac_t""$samba_cv_HAVE_IFACE_AIX" 1>&6
-if test x"$samba_cv_HAVE_IFACE_AIX" = x"yes"; then
-    iface=yes;cat >> confdefs.h <<\EOF
-#define HAVE_IFACE_AIX 1
-EOF
-
-fi
-
-if test $iface = no; then
-echo $ac_n "checking for iface ifconf""... $ac_c" 1>&6
-echo "configure:11128: checking for iface ifconf" >&5
-if eval "test \"`echo '$''{'samba_cv_HAVE_IFACE_IFCONF'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-if test "$cross_compiling" = yes; then
-  samba_cv_HAVE_IFACE_IFCONF=cross
-else
-  cat > conftest.$ac_ext <<EOF
-#line 11137 "configure"
-#include "confdefs.h"
-
-#define HAVE_IFACE_IFCONF 1
-#define AUTOCONF_TEST 1
-#include "confdefs.h"
-#include "${srcdir-.}/lib/interfaces.c"
-EOF
-if { (eval echo configure:11145: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  samba_cv_HAVE_IFACE_IFCONF=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  samba_cv_HAVE_IFACE_IFCONF=no
-fi
-rm -fr conftest*
-fi
-
-fi
-
-echo "$ac_t""$samba_cv_HAVE_IFACE_IFCONF" 1>&6
-if test x"$samba_cv_HAVE_IFACE_IFCONF" = x"yes"; then
-    iface=yes;cat >> confdefs.h <<\EOF
-#define HAVE_IFACE_IFCONF 1
-EOF
-
-fi
-fi
-
-if test $iface = no; then
-echo $ac_n "checking for iface ifreq""... $ac_c" 1>&6
-echo "configure:11170: checking for iface ifreq" >&5
-if eval "test \"`echo '$''{'samba_cv_HAVE_IFACE_IFREQ'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-if test "$cross_compiling" = yes; then
-  samba_cv_HAVE_IFACE_IFREQ=cross
-else
-  cat > conftest.$ac_ext <<EOF
-#line 11179 "configure"
-#include "confdefs.h"
-
-#define HAVE_IFACE_IFREQ 1
-#define AUTOCONF_TEST 1
-#include "confdefs.h"
-#include "${srcdir-.}/lib/interfaces.c"
-EOF
-if { (eval echo configure:11187: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  samba_cv_HAVE_IFACE_IFREQ=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  samba_cv_HAVE_IFACE_IFREQ=no
-fi
-rm -fr conftest*
-fi
-
-fi
-
-echo "$ac_t""$samba_cv_HAVE_IFACE_IFREQ" 1>&6
-if test x"$samba_cv_HAVE_IFACE_IFREQ" = x"yes"; then
-    iface=yes;cat >> confdefs.h <<\EOF
-#define HAVE_IFACE_IFREQ 1
-EOF
-
-fi
-fi
-
-
-################################################
-# look for a method of setting the effective uid
-seteuid=no;
-if test $seteuid = no; then
-echo $ac_n "checking for setresuid""... $ac_c" 1>&6
-echo "configure:11216: checking for setresuid" >&5
-if eval "test \"`echo '$''{'samba_cv_USE_SETRESUID'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-if test "$cross_compiling" = yes; then
-  samba_cv_USE_SETRESUID=cross
-else
-  cat > conftest.$ac_ext <<EOF
-#line 11225 "configure"
-#include "confdefs.h"
-
-#define AUTOCONF_TEST 1
-#define USE_SETRESUID 1
-#include "confdefs.h"
-#include "${srcdir-.}/lib/util_sec.c"
-EOF
-if { (eval echo configure:11233: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  samba_cv_USE_SETRESUID=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  samba_cv_USE_SETRESUID=no
-fi
-rm -fr conftest*
-fi
-
-fi
-
-echo "$ac_t""$samba_cv_USE_SETRESUID" 1>&6
-if test x"$samba_cv_USE_SETRESUID" = x"yes"; then
-    seteuid=yes;cat >> confdefs.h <<\EOF
-#define USE_SETRESUID 1
-EOF
-
-fi
-fi
-
-
-if test $seteuid = no; then
-echo $ac_n "checking for setreuid""... $ac_c" 1>&6
-echo "configure:11259: checking for setreuid" >&5
-if eval "test \"`echo '$''{'samba_cv_USE_SETREUID'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-if test "$cross_compiling" = yes; then
-  samba_cv_USE_SETREUID=cross
-else
-  cat > conftest.$ac_ext <<EOF
-#line 11268 "configure"
-#include "confdefs.h"
-
-#define AUTOCONF_TEST 1
-#define USE_SETREUID 1
-#include "confdefs.h"
-#include "${srcdir-.}/lib/util_sec.c"
-EOF
-if { (eval echo configure:11276: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  samba_cv_USE_SETREUID=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  samba_cv_USE_SETREUID=no
-fi
-rm -fr conftest*
-fi
-
-fi
-
-echo "$ac_t""$samba_cv_USE_SETREUID" 1>&6
-if test x"$samba_cv_USE_SETREUID" = x"yes"; then
-    seteuid=yes;cat >> confdefs.h <<\EOF
-#define USE_SETREUID 1
-EOF
-
-fi
-fi
-
-if test $seteuid = no; then
-echo $ac_n "checking for seteuid""... $ac_c" 1>&6
-echo "configure:11301: checking for seteuid" >&5
-if eval "test \"`echo '$''{'samba_cv_USE_SETEUID'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-if test "$cross_compiling" = yes; then
-  samba_cv_USE_SETEUID=cross
-else
-  cat > conftest.$ac_ext <<EOF
-#line 11310 "configure"
-#include "confdefs.h"
-
-#define AUTOCONF_TEST 1
-#define USE_SETEUID 1
-#include "confdefs.h"
-#include "${srcdir-.}/lib/util_sec.c"
-EOF
-if { (eval echo configure:11318: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  samba_cv_USE_SETEUID=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  samba_cv_USE_SETEUID=no
-fi
-rm -fr conftest*
-fi
-
-fi
-
-echo "$ac_t""$samba_cv_USE_SETEUID" 1>&6
-if test x"$samba_cv_USE_SETEUID" = x"yes"; then
-    seteuid=yes;cat >> confdefs.h <<\EOF
-#define USE_SETEUID 1
-EOF
-
-fi
-fi
-
-if test $seteuid = no; then
-echo $ac_n "checking for setuidx""... $ac_c" 1>&6
-echo "configure:11343: checking for setuidx" >&5
-if eval "test \"`echo '$''{'samba_cv_USE_SETUIDX'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-if test "$cross_compiling" = yes; then
-  samba_cv_USE_SETUIDX=cross
-else
-  cat > conftest.$ac_ext <<EOF
-#line 11352 "configure"
-#include "confdefs.h"
-
-#define AUTOCONF_TEST 1
-#define USE_SETUIDX 1
-#include "confdefs.h"
-#include "${srcdir-.}/lib/util_sec.c"
-EOF
-if { (eval echo configure:11360: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  samba_cv_USE_SETUIDX=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  samba_cv_USE_SETUIDX=no
-fi
-rm -fr conftest*
-fi
-
-fi
-
-echo "$ac_t""$samba_cv_USE_SETUIDX" 1>&6
-if test x"$samba_cv_USE_SETUIDX" = x"yes"; then
-    seteuid=yes;cat >> confdefs.h <<\EOF
-#define USE_SETUIDX 1
-EOF
-
-fi
-fi
-
-
-echo $ac_n "checking for working mmap""... $ac_c" 1>&6
-echo "configure:11385: checking for working mmap" >&5
-if eval "test \"`echo '$''{'samba_cv_HAVE_MMAP'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-if test "$cross_compiling" = yes; then
-  samba_cv_HAVE_MMAP=cross
-else
-  cat > conftest.$ac_ext <<EOF
-#line 11394 "configure"
-#include "confdefs.h"
-#include "${srcdir-.}/tests/shared_mmap.c"
-EOF
-if { (eval echo configure:11398: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  samba_cv_HAVE_MMAP=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  samba_cv_HAVE_MMAP=no
-fi
-rm -fr conftest*
-fi
-
-fi
-
-echo "$ac_t""$samba_cv_HAVE_MMAP" 1>&6
-if test x"$samba_cv_HAVE_MMAP" = x"yes"; then
-    cat >> confdefs.h <<\EOF
-#define HAVE_MMAP 1
-EOF
-
-fi
-
-echo $ac_n "checking for ftruncate needs root""... $ac_c" 1>&6
-echo "configure:11421: checking for ftruncate needs root" >&5
-if eval "test \"`echo '$''{'samba_cv_FTRUNCATE_NEEDS_ROOT'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-if test "$cross_compiling" = yes; then
-  samba_cv_FTRUNCATE_NEEDS_ROOT=cross
-else
-  cat > conftest.$ac_ext <<EOF
-#line 11430 "configure"
-#include "confdefs.h"
-#include "${srcdir-.}/tests/ftruncroot.c"
-EOF
-if { (eval echo configure:11434: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  samba_cv_FTRUNCATE_NEEDS_ROOT=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  samba_cv_FTRUNCATE_NEEDS_ROOT=no
-fi
-rm -fr conftest*
-fi
-
-fi
-
-echo "$ac_t""$samba_cv_FTRUNCATE_NEEDS_ROOT" 1>&6
-if test x"$samba_cv_FTRUNCATE_NEEDS_ROOT" = x"yes"; then
-    cat >> confdefs.h <<\EOF
-#define FTRUNCATE_NEEDS_ROOT 1
-EOF
-
-fi
-
-echo $ac_n "checking for fcntl locking""... $ac_c" 1>&6
-echo "configure:11457: checking for fcntl locking" >&5
-if eval "test \"`echo '$''{'samba_cv_HAVE_FCNTL_LOCK'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-if test "$cross_compiling" = yes; then
-  samba_cv_HAVE_FCNTL_LOCK=cross
-else
-  cat > conftest.$ac_ext <<EOF
-#line 11466 "configure"
-#include "confdefs.h"
-#include "${srcdir-.}/tests/fcntl_lock.c"
-EOF
-if { (eval echo configure:11470: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  samba_cv_HAVE_FCNTL_LOCK=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  samba_cv_HAVE_FCNTL_LOCK=no
-fi
-rm -fr conftest*
-fi
-
-fi
-
-echo "$ac_t""$samba_cv_HAVE_FCNTL_LOCK" 1>&6
-if test x"$samba_cv_HAVE_FCNTL_LOCK" = x"yes"; then
-    cat >> confdefs.h <<\EOF
-#define HAVE_FCNTL_LOCK 1
-EOF
-
-fi
-
-echo $ac_n "checking for broken (glibc2.1/x86) 64 bit fcntl locking""... $ac_c" 1>&6
-echo "configure:11493: checking for broken (glibc2.1/x86) 64 bit fcntl locking" >&5
-if eval "test \"`echo '$''{'samba_cv_HAVE_BROKEN_FCNTL64_LOCKS'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-if test "$cross_compiling" = yes; then
-  samba_cv_HAVE_BROKEN_FCNTL64_LOCKS=cross
-else
-  cat > conftest.$ac_ext <<EOF
-#line 11502 "configure"
-#include "confdefs.h"
-#include "${srcdir-.}/tests/fcntl_lock64.c"
-EOF
-if { (eval echo configure:11506: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  samba_cv_HAVE_BROKEN_FCNTL64_LOCKS=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  samba_cv_HAVE_BROKEN_FCNTL64_LOCKS=no
-fi
-rm -fr conftest*
-fi
-
-fi
-
-echo "$ac_t""$samba_cv_HAVE_BROKEN_FCNTL64_LOCKS" 1>&6
-if test x"$samba_cv_HAVE_BROKEN_FCNTL64_LOCKS" = x"yes"; then
-    cat >> confdefs.h <<\EOF
-#define HAVE_BROKEN_FCNTL64_LOCKS 1
-EOF
-
-
-else
-
-
-  echo $ac_n "checking for 64 bit fcntl locking""... $ac_c" 1>&6
-echo "configure:11531: checking for 64 bit fcntl locking" >&5
-if eval "test \"`echo '$''{'samba_cv_HAVE_STRUCT_FLOCK64'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-  if test "$cross_compiling" = yes; then
-  samba_cv_HAVE_STRUCT_FLOCK64=cross
-else
-  cat > conftest.$ac_ext <<EOF
-#line 11540 "configure"
-#include "confdefs.h"
-
-#if defined(HAVE_UNISTD_H)
-#include <unistd.h>
-#endif
-#include <stdio.h>
-#include <stdlib.h>
-
-#ifdef HAVE_FCNTL_H
-#include <fcntl.h>
-#endif
-
-#ifdef HAVE_SYS_FCNTL_H
-#include <sys/fcntl.h>
-#endif
-main() { struct flock64 fl64;
-#if defined(F_SETLKW64) && defined(F_SETLK64) && defined(F_GETLK64)
-exit(0);
-#else
-exit(1);
-#endif
-}
-EOF
-if { (eval echo configure:11564: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  samba_cv_HAVE_STRUCT_FLOCK64=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  samba_cv_HAVE_STRUCT_FLOCK64=no
-fi
-rm -fr conftest*
-fi
-
-fi
-
-echo "$ac_t""$samba_cv_HAVE_STRUCT_FLOCK64" 1>&6
-
-  if test x"$samba_cv_HAVE_STRUCT_FLOCK64" = x"yes"; then
-      cat >> confdefs.h <<\EOF
-#define HAVE_STRUCT_FLOCK64 1
-EOF
-
-  fi
-fi
-
-echo $ac_n "checking for st_blocks in struct stat""... $ac_c" 1>&6
-echo "configure:11589: checking for st_blocks in struct stat" >&5
-if eval "test \"`echo '$''{'samba_cv_HAVE_STAT_ST_BLOCKS'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-cat > conftest.$ac_ext <<EOF
-#line 11595 "configure"
-#include "confdefs.h"
-#include <sys/types.h>
-#include <sys/stat.h>
-#include <unistd.h>
-int main() {
-struct stat st;  st.st_blocks = 0;
-; return 0; }
-EOF
-if { (eval echo configure:11604: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-  rm -rf conftest*
-  samba_cv_HAVE_STAT_ST_BLOCKS=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  samba_cv_HAVE_STAT_ST_BLOCKS=no
-fi
-rm -f conftest*
-fi
-
-echo "$ac_t""$samba_cv_HAVE_STAT_ST_BLOCKS" 1>&6
-if test x"$samba_cv_HAVE_STAT_ST_BLOCKS" = x"yes"; then
-    cat >> confdefs.h <<\EOF
-#define HAVE_STAT_ST_BLOCKS 1
-EOF
-
-fi 
-
-echo $ac_n "checking for st_blksize in struct stat""... $ac_c" 1>&6
-echo "configure:11625: checking for st_blksize in struct stat" >&5
-if eval "test \"`echo '$''{'samba_cv_HAVE_STAT_ST_BLKSIZE'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-cat > conftest.$ac_ext <<EOF
-#line 11631 "configure"
-#include "confdefs.h"
-#include <sys/types.h>
-#include <sys/stat.h>
-#include <unistd.h>
-int main() {
-struct stat st;  st.st_blksize = 0;
-; return 0; }
-EOF
-if { (eval echo configure:11640: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-  rm -rf conftest*
-  samba_cv_HAVE_STAT_ST_BLKSIZE=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  samba_cv_HAVE_STAT_ST_BLKSIZE=no
-fi
-rm -f conftest*
-fi
-
-echo "$ac_t""$samba_cv_HAVE_STAT_ST_BLKSIZE" 1>&6
-if test x"$samba_cv_HAVE_STAT_ST_BLKSIZE" = x"yes"; then
-    cat >> confdefs.h <<\EOF
-#define HAVE_STAT_ST_BLKSIZE 1
-EOF
-
-fi
-
-case "$host_os" in
-*linux*)
-echo $ac_n "checking for broken RedHat 7.2 system header files""... $ac_c" 1>&6
-echo "configure:11663: checking for broken RedHat 7.2 system header files" >&5
-if eval "test \"`echo '$''{'samba_cv_BROKEN_REDHAT_7_SYSTEM_HEADERS'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-cat > conftest.$ac_ext <<EOF
-#line 11669 "configure"
-#include "confdefs.h"
-
-#ifdef HAVE_SYS_VFS_H
-#include <sys/vfs.h>
-#endif
-#ifdef HAVE_SYS_CAPABILITY_H
-#include <sys/capability.h>
-#endif
-
-int main() {
-int i;
-; return 0; }
-EOF
-if { (eval echo configure:11683: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-  rm -rf conftest*
-  samba_cv_BROKEN_REDHAT_7_SYSTEM_HEADERS=no
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  samba_cv_BROKEN_REDHAT_7_SYSTEM_HEADERS=yes
-fi
-rm -f conftest*
-fi
-
-echo "$ac_t""$samba_cv_BROKEN_REDHAT_7_SYSTEM_HEADERS" 1>&6
-if test x"$samba_cv_BROKEN_REDHAT_7_SYSTEM_HEADERS" = x"yes"; then
-   cat >> confdefs.h <<\EOF
-#define BROKEN_REDHAT_7_SYSTEM_HEADERS 1
-EOF
-
-fi
-;;
-esac
-
-echo $ac_n "checking for broken nisplus include files""... $ac_c" 1>&6
-echo "configure:11706: checking for broken nisplus include files" >&5
-if eval "test \"`echo '$''{'samba_cv_BROKEN_NISPLUS_INCLUDE_FILES'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-cat > conftest.$ac_ext <<EOF
-#line 11712 "configure"
-#include "confdefs.h"
-#include <sys/acl.h>
-#if defined(HAVE_RPCSVC_NIS_H)
-#include <rpcsvc/nis.h>
-#endif
-int main() {
-int i;
-; return 0; }
-EOF
-if { (eval echo configure:11722: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-  rm -rf conftest*
-  samba_cv_BROKEN_NISPLUS_INCLUDE_FILES=no
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  samba_cv_BROKEN_NISPLUS_INCLUDE_FILES=yes
-fi
-rm -f conftest*
-fi
-
-echo "$ac_t""$samba_cv_BROKEN_NISPLUS_INCLUDE_FILES" 1>&6
-if test x"$samba_cv_BROKEN_NISPLUS_INCLUDE_FILES" = x"yes"; then
-    cat >> confdefs.h <<\EOF
-#define BROKEN_NISPLUS_INCLUDE_FILES 1
-EOF
-
-fi
-
-
-#################################################
-# check for smbwrapper support
-echo $ac_n "checking whether to use smbwrapper""... $ac_c" 1>&6
-echo "configure:11746: checking whether to use smbwrapper" >&5
-# Check whether --with-smbwrapper or --without-smbwrapper was given.
-if test "${with_smbwrapper+set}" = set; then
-  withval="$with_smbwrapper"
-   case "$withval" in
-  yes)
-    echo "$ac_t""yes" 1>&6
-    cat >> confdefs.h <<\EOF
-#define WITH_SMBWRAPPER 1
-EOF
-
-	WRAPPROG="bin/smbsh"
-	WRAP="bin/smbwrapper.$SHLIBEXT"
-
-	if test x$ATTEMPT_WRAP32_BUILD = x; then
-		WRAP32=""
-	else
-			WRAP32=bin/smbwrapper.32.$SHLIBEXT
-	fi
-
-# Conditions under which smbwrapper should not be built.
-
-	if test x$PICFLAG = x; then
-	   echo No support for PIC code - disabling smbwrapper and smbsh
-	   WRAPPROG=""
-	   WRAP=""
-	   WRAP32=""
-	elif test x$ac_cv_func_syscall = xno; then
-	   echo "$ac_t""No syscall() -- disabling smbwrapper and smbsh" 1>&6
-	   WRAPPROG=""
-	   WRAP=""
-	   WRAP32=""
-	fi
-    ;;
-  *)
-    echo "$ac_t""no" 1>&6
-    ;;
-  esac 
-else
-  echo "$ac_t""no" 1>&6
-
-fi
-
-
-#################################################
-# check for the AFS filesystem
-echo $ac_n "checking whether to use AFS""... $ac_c" 1>&6
-echo "configure:11793: checking whether to use AFS" >&5
-# Check whether --with-afs or --without-afs was given.
-if test "${with_afs+set}" = set; then
-  withval="$with_afs"
-   case "$withval" in
-  yes)
-    echo "$ac_t""yes" 1>&6
-    cat >> confdefs.h <<\EOF
-#define WITH_AFS 1
-EOF
-
-    ;;
-  *)
-    echo "$ac_t""no" 1>&6
-    ;;
-  esac 
-else
-  echo "$ac_t""no" 1>&6
-
-fi
-
-
-
-#################################################
-# check for the DFS auth system
-echo $ac_n "checking whether to use DCE/DFS auth""... $ac_c" 1>&6
-echo "configure:11819: checking whether to use DCE/DFS auth" >&5
-# Check whether --with-dfs or --without-dfs was given.
-if test "${with_dfs+set}" = set; then
-  withval="$with_dfs"
-   case "$withval" in
-  yes)
-    echo "$ac_t""yes" 1>&6
-    cat >> confdefs.h <<\EOF
-#define WITH_DFS 1
-EOF
-
-    ;;
-  *)
-    echo "$ac_t""no" 1>&6
-    ;;
-  esac 
-else
-  echo "$ac_t""no" 1>&6
-
-fi
-
-
-#################################################
-# check for Kerberos IV auth system
-echo $ac_n "checking whether to use Kerberos IV""... $ac_c" 1>&6
-echo "configure:11844: checking whether to use Kerberos IV" >&5
-# Check whether --with-krb4 or --without-krb4 was given.
-if test "${with_krb4+set}" = set; then
-  withval="$with_krb4"
-   case "$withval" in
-  yes)
-    echo "$ac_t""yes" 1>&6
-    cat >> confdefs.h <<\EOF
-#define KRB4_AUTH 1
-EOF
-
-    echo $ac_n "checking for dn_expand in -lresolv""... $ac_c" 1>&6
-echo "configure:11856: checking for dn_expand in -lresolv" >&5
-ac_lib_var=`echo resolv'_'dn_expand | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lresolv  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 11864 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char dn_expand();
-
-int main() {
-dn_expand()
-; return 0; }
-EOF
-if { (eval echo configure:11875: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
-
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_lib=HAVE_LIB`echo resolv | sed -e 's/[^a-zA-Z0-9_]/_/g' \
-    -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_lib 1
-EOF
-
-  LIBS="-lresolv $LIBS"
-
-else
-  echo "$ac_t""no" 1>&6
-fi
-
-    LIBS="$LIBS -lkrb -ldes"
-    CFLAGS="$CFLAGS -I$withval/include"
-    LDFLAGS="$LDFLAGS -L$withval/lib"
-    ;;
-  *)
-    echo "$ac_t""no" 1>&6
-    ;;
-  esac 
-else
-  echo "$ac_t""no" 1>&6
-
-fi
-
-
-#################################################
-# check for Kerberos 5 auth system
-echo $ac_n "checking whether to use Kerberos 5""... $ac_c" 1>&6
-echo "configure:11919: checking whether to use Kerberos 5" >&5
-# Check whether --with-krb5 or --without-krb5 was given.
-if test "${with_krb5+set}" = set; then
-  withval="$with_krb5"
-   case "$withval" in
-  yes)
-    echo "$ac_t""yes" 1>&6
-    cat >> confdefs.h <<\EOF
-#define KRB5_AUTH 1
-EOF
-
-    LIBS="$LIBS -ldes425 -lkrb5 -lcrypto -lcom_err"
-    CFLAGS="$CFLAGS -I$withval/include"
-    LDFLAGS="$LDFLAGS -L$withval/lib"
-    ;;
-  *)
-    echo "$ac_t""no" 1>&6
-    ;;
-  esac 
-else
-  echo "$ac_t""no" 1>&6
-
-fi
-
-
-#################################################
-# check for automount support
-echo $ac_n "checking whether to use AUTOMOUNT""... $ac_c" 1>&6
-echo "configure:11947: checking whether to use AUTOMOUNT" >&5
-# Check whether --with-automount or --without-automount was given.
-if test "${with_automount+set}" = set; then
-  withval="$with_automount"
-   case "$withval" in
-  yes)
-    echo "$ac_t""yes" 1>&6
-    cat >> confdefs.h <<\EOF
-#define WITH_AUTOMOUNT 1
-EOF
-
-    ;;
-  *)
-    echo "$ac_t""no" 1>&6
-    ;;
-  esac 
-else
-  echo "$ac_t""no" 1>&6
-
-fi
-
-
-#################################################
-# check for smbmount support
-echo $ac_n "checking whether to use SMBMOUNT""... $ac_c" 1>&6
-echo "configure:11972: checking whether to use SMBMOUNT" >&5
-# Check whether --with-smbmount or --without-smbmount was given.
-if test "${with_smbmount+set}" = set; then
-  withval="$with_smbmount"
-   case "$withval" in
-  yes)
-	case "$host_os" in
-	*linux*)
-		echo "$ac_t""yes" 1>&6
-		cat >> confdefs.h <<\EOF
-#define WITH_SMBMOUNT 1
-EOF
-
-		MPROGS="bin/smbmount bin/smbmnt bin/smbumount"
-		;;
-	*)
-		{ echo "configure: error: not on a linux system!" 1>&2; exit 1; }
-		;;
-	esac
-    ;;
-  *)
-    echo "$ac_t""no" 1>&6
-    MPROGS=
-    ;;
-  esac 
-else
-  echo "$ac_t""no" 1>&6
-  MPROGS=
-
-fi
-
-
-
-#################################################
-# check for a PAM password database
-with_pam_for_crypt=no
-echo $ac_n "checking whether to use PAM password database""... $ac_c" 1>&6
-echo "configure:12009: checking whether to use PAM password database" >&5
-# Check whether --with-pam or --without-pam was given.
-if test "${with_pam+set}" = set; then
-  withval="$with_pam"
-   case "$withval" in
-  yes)
-    echo "$ac_t""yes" 1>&6
-    cat >> confdefs.h <<\EOF
-#define WITH_PAM 1
-EOF
-
-    LIBS="$LIBS -lpam"
-    with_pam_for_crypt=yes
-    ;;
-  *)
-    echo "$ac_t""no" 1>&6
-    ;;
-  esac 
-else
-  echo "$ac_t""no" 1>&6
-
-fi
-
-
-# we can't build a pam module if we don't have pam.
-echo $ac_n "checking for pam_get_data in -lpam""... $ac_c" 1>&6
-echo "configure:12035: checking for pam_get_data in -lpam" >&5
-ac_lib_var=`echo pam'_'pam_get_data | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lpam  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 12043 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char pam_get_data();
-
-int main() {
-pam_get_data()
-; return 0; }
-EOF
-if { (eval echo configure:12054: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
-
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  cat >> confdefs.h <<\EOF
-#define HAVE_LIBPAM 1
-EOF
-
-else
-  echo "$ac_t""no" 1>&6
-fi
-
-
-#################################################
-# check for pam_smbpass support
-echo $ac_n "checking whether to use pam_smbpass""... $ac_c" 1>&6
-echo "configure:12081: checking whether to use pam_smbpass" >&5
-# Check whether --with-pam_smbpass or --without-pam_smbpass was given.
-if test "${with_pam_smbpass+set}" = set; then
-  withval="$with_pam_smbpass"
-   case "$withval" in
-  yes)
-    echo "$ac_t""yes" 1>&6
-
-# Conditions under which pam_smbpass should not be built.
-
-       if test x$PICFLAG = x; then
-          echo "$ac_t""No support for PIC code - disabling pam_smbpass" 1>&6
-          PAM_MOD=""
-       elif test x$ac_cv_lib_pam_pam_get_data = xno; then
-          echo "$ac_t""No libpam found -- disabling pam_smbpass" 1>&6
-          PAM_MOD=""
-       else
-          cat >> confdefs.h <<\EOF
-#define WITH_PAM_SMBPASS 1
-EOF
-
-          PAM_MOD="bin/pam_smbpass.so"
-       fi
-    ;;
-  *)
-    echo "$ac_t""no" 1>&6
-    ;;
-  esac 
-else
-  echo "$ac_t""no" 1>&6
-
-fi
-
-
-
-###############################################
-# test for where we get crypt() from, but only
-# if not using PAM
-if test $with_pam_for_crypt = no; then
-for ac_func in crypt
-do
-echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:12123: checking for $ac_func" >&5
-if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 12128 "configure"
-#include "confdefs.h"
-/* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char $ac_func(); below.  */
-#include <assert.h>
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char $ac_func();
-
-int main() {
-
-/* The GNU C library defines this for functions which it implements
-    to always fail with ENOSYS.  Some functions are actually named
-    something starting with __ and the normal name is an alias.  */
-#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
-choke me
-#else
-$ac_func();
-#endif
-
-; return 0; }
-EOF
-if { (eval echo configure:12151: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=no"
-fi
-rm -f conftest*
-fi
-
-if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_func 1
-EOF
- 
-else
-  echo "$ac_t""no" 1>&6
-fi
-done
-
-if test x"$ac_cv_func_crypt" = x"no"; then
-    echo $ac_n "checking for crypt in -lcrypt""... $ac_c" 1>&6
-echo "configure:12177: checking for crypt in -lcrypt" >&5
-ac_lib_var=`echo crypt'_'crypt | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lcrypt  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 12185 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char crypt();
-
-int main() {
-crypt()
-; return 0; }
-EOF
-if { (eval echo configure:12196: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
-
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  LIBS="$LIBS -lcrypt";
-	cat >> confdefs.h <<\EOF
-#define HAVE_CRYPT 1
-EOF
-
-else
-  echo "$ac_t""no" 1>&6
-fi
-
-fi
-fi
-
-##
-## moved after the check for -lcrypt in order to
-## ensure that the necessary libraries are included
-## check checking for truncated salt.  Wrapped by the
-## $with_pam_for_crypt variable as above   --jerry
-##
-if test $with_pam_for_crypt = no; then
-echo $ac_n "checking for a crypt that needs truncated salt""... $ac_c" 1>&6
-echo "configure:12231: checking for a crypt that needs truncated salt" >&5
-if eval "test \"`echo '$''{'samba_cv_HAVE_TRUNCATED_SALT'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-if test "$cross_compiling" = yes; then
-  samba_cv_HAVE_TRUNCATED_SALT=cross
-else
-  cat > conftest.$ac_ext <<EOF
-#line 12240 "configure"
-#include "confdefs.h"
-#include "${srcdir-.}/tests/crypttest.c"
-EOF
-if { (eval echo configure:12244: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  samba_cv_HAVE_TRUNCATED_SALT=no
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  samba_cv_HAVE_TRUNCATED_SALT=yes
-fi
-rm -fr conftest*
-fi
-
-fi
-
-echo "$ac_t""$samba_cv_HAVE_TRUNCATED_SALT" 1>&6
-if test x"$samba_cv_HAVE_TRUNCATED_SALT" = x"yes"; then
-	cat >> confdefs.h <<\EOF
-#define HAVE_TRUNCATED_SALT 1
-EOF
-
-fi
-fi
-
-
-########################################################################################
-##
-## TESTS FOR SAM BACKENDS.  KEEP THESE GROUPED TOGETHER
-##
-########################################################################################
-
-## set the with_smbpasswd_sam as the default
-with_smbpasswd_sam=yes
-
-
-
-#################################################
-# check for a TDB password database
-echo $ac_n "checking whether to use TDB SAM database""... $ac_c" 1>&6
-echo "configure:12282: checking whether to use TDB SAM database" >&5
-# Check whether --with-tdbsam or --without-tdbsam was given.
-if test "${with_tdbsam+set}" = set; then
-  withval="$with_tdbsam"
-   case "$withval" in
-  yes)
-    echo "$ac_t""yes" 1>&6
-    cat >> confdefs.h <<\EOF
-#define WITH_TDB_SAM 1
-EOF
-
-    with_smbpasswd_sam=no
-    ;;
-  *)
-    echo "$ac_t""no" 1>&6
-    ;;
-  esac 
-else
-  echo "$ac_t""no" 1>&6
-
-fi
-
-
-#################################################
-# check for a LDAP password database
-echo $ac_n "checking whether to use LDAP SAM database""... $ac_c" 1>&6
-echo "configure:12308: checking whether to use LDAP SAM database" >&5
-# Check whether --with-ldapsam or --without-ldapsam was given.
-if test "${with_ldapsam+set}" = set; then
-  withval="$with_ldapsam"
-   case "$withval" in
-  yes)
-    echo "$ac_t""yes" 1>&6
-    cat >> confdefs.h <<\EOF
-#define WITH_LDAP_SAM 1
-EOF
-
-    LDAPLIBS="-lldap"
-    echo $ac_n "checking for ber_bvfree in -llber""... $ac_c" 1>&6
-echo "configure:12321: checking for ber_bvfree in -llber" >&5
-ac_lib_var=`echo lber'_'ber_bvfree | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-llber  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 12329 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char ber_bvfree();
-
-int main() {
-ber_bvfree()
-; return 0; }
-EOF
-if { (eval echo configure:12340: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
-
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  LDAPLIBS="$LDAPLIBS -llber"
-else
-  echo "$ac_t""no" 1>&6
-fi
-
-    ## remove -lresolv as this should be included by the -lsasl dependency 
-    ## in the OpenLDAP clients.  By not requiring it specifically, we avoid
-    ## issues on platforms that don't have it
-    LDAPLIBS="$LDAPLIBS"
-    old_LDFLAGS="$LDFLAGS"
-    LDFLAGS="$LDFLAGS $LDAPLIBS"
-    for ac_func in ldap_start_tls_s
-do
-echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:12369: checking for $ac_func" >&5
-if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 12374 "configure"
-#include "confdefs.h"
-/* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char $ac_func(); below.  */
-#include <assert.h>
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char $ac_func();
-
-int main() {
-
-/* The GNU C library defines this for functions which it implements
-    to always fail with ENOSYS.  Some functions are actually named
-    something starting with __ and the normal name is an alias.  */
-#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
-choke me
-#else
-$ac_func();
-#endif
-
-; return 0; }
-EOF
-if { (eval echo configure:12397: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=no"
-fi
-rm -f conftest*
-fi
-
-if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_func 1
-EOF
- 
-else
-  echo "$ac_t""no" 1>&6
-fi
-done
-
-    LDFLAGS="$old_LDFLAGS"
-    with_smbpasswd_sam=no
-    
-echo $ac_n "checking whether ldap_set_rebind_proc takes 3 arguments""... $ac_c" 1>&6
-echo "configure:12425: checking whether ldap_set_rebind_proc takes 3 arguments" >&5
-if eval "test \"`echo '$''{'samba_cv_ldap_set_rebind_proc'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-cat > conftest.$ac_ext <<EOF
-#line 12431 "configure"
-#include "confdefs.h"
-
-#include <lber.h>
-#include <ldap.h>
-int main() {
-ldap_set_rebind_proc(0, 0, 0);
-; return 0; }
-EOF
-if { (eval echo configure:12440: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-  rm -rf conftest*
-  samba_cv_ldap_set_rebind_proc=3
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  samba_cv_ldap_set_rebind_proc=2
-fi
-rm -f conftest* 
-fi
-
-echo "$ac_t""$samba_cv_ldap_set_rebind_proc" 1>&6
-if test x"$samba_cv_ldap_set_rebind_proc" = x"3"; then
-   cat >> confdefs.h <<\EOF
-#define LDAP_SET_REBIND_PROC_ARGS 3
-EOF
-
-else
-   cat >> confdefs.h <<\EOF
-#define LDAP_SET_REBIND_PROC_ARGS 2
-EOF
-
-fi
-    ;;
-  *)
-    echo "$ac_t""no" 1>&6
-    ;;
-  esac 
-else
-  echo "$ac_t""no" 1>&6
-
-fi
-
-
-
-#################################################
-# check for a NISPLUS password database
-echo $ac_n "checking whether to use NISPLUS SAM database""... $ac_c" 1>&6
-echo "configure:12479: checking whether to use NISPLUS SAM database" >&5
-# Check whether --with-nisplussam or --without-nisplussam was given.
-if test "${with_nisplussam+set}" = set; then
-  withval="$with_nisplussam"
-   case "$withval" in
-  yes)
-    echo "$ac_t""yes" 1>&6
-    cat >> confdefs.h <<\EOF
-#define WITH_NISPLUS_SAM 1
-EOF
-
-    with_smbpasswd_sam=no
-    ;;
-  *)
-    echo "$ac_t""no" 1>&6
-    ;;
-  esac 
-else
-  echo "$ac_t""no" 1>&6
-
-fi
-
-
-################################################
-# This test should come last because the
-# smbpasswd SAM is only used if another format
-# has not been defined
-echo $ac_n "checking whether to use traditional smbpasswd file""... $ac_c" 1>&6
-echo "configure:12507: checking whether to use traditional smbpasswd file" >&5
-if test $with_smbpasswd_sam = yes; then
-	echo "$ac_t""yes" 1>&6
-	cat >> confdefs.h <<\EOF
-#define WITH_SMBPASSWD_SAM 1
-EOF
-
-	PDBEDIT=""
-else
-	echo "$ac_t""no" 1>&6
-	PDBEDIT=bin/pdbedit
-fi
-
-########################################################################################
-##
-## END OF TESTS FOR SAM BACKENDS.  
-##
-########################################################################################
-
-#################################################
-# check for a NISPLUS_HOME support 
-echo $ac_n "checking whether to use NISPLUS_HOME""... $ac_c" 1>&6
-echo "configure:12529: checking whether to use NISPLUS_HOME" >&5
-# Check whether --with-nisplus-home or --without-nisplus-home was given.
-if test "${with_nisplus_home+set}" = set; then
-  withval="$with_nisplus_home"
-   case "$withval" in
-  yes)
-    echo "$ac_t""yes" 1>&6
-    cat >> confdefs.h <<\EOF
-#define WITH_NISPLUS_HOME 1
-EOF
-
-    ;;
-  *)
-    echo "$ac_t""no" 1>&6
-    ;;
-  esac 
-else
-  echo "$ac_t""no" 1>&6
-
-fi
-
-
-#################################################
-# check for the secure socket layer
-echo $ac_n "checking whether to use SSL""... $ac_c" 1>&6
-echo "configure:12554: checking whether to use SSL" >&5
-# Check whether --with-ssl or --without-ssl was given.
-if test "${with_ssl+set}" = set; then
-  withval="$with_ssl"
-   case "$withval" in
-  yes)
-    echo "$ac_t""yes" 1>&6
-    cat >> confdefs.h <<\EOF
-#define WITH_SSL 1
-EOF
-
-    withval="/usr/local/ssl"     # default
-
-    if test "${with_sslinc+set}" = set; then
-
-	withval="$with_sslinc"
-	case "$withval" in
-	yes|no)
-	  echo "configure: warning: --with-sslinc called without argument - will use default" 1>&w
-	  CFLAGS="-I/usr/local/ssl/include $CFLAGS"
-	;;
-        * )
-          CFLAGS="-I${withval} $CFLAGS"
-	;;
-	esac
-
-    else
-
-	CFLAGS="-I/usr/local/ssl/include $CFLAGS"   
-
-    fi
-
-    if test "${with_ssllib+set}" = set; then
-
-	withval="$with_ssllib"
-	case "$withval" in
-	yes|no)
-	  echo "configure: warning: --with-ssllib called without argument - will use default" 1>&w
-	  LDFLAGS="-L/usr/local/ssl/lib $LDFLAGS"
-	;;
-        * )
-  	  LDFLAGS="-L${withval}/lib $LDFLAGS"
-	;;
-	esac
-
-    else
-
-	LDFLAGS="-L/usr/local/ssl/lib $LDFLAGS"
-
-    fi
-
-    LIBS="-lssl -lcrypto $LIBS"
-
-#    if test ! -d ${withval}; then
-#      echo "configure: error: called with --with-ssl, but ssl base directory ${withval} does not exist or is not a directory. Aborting config" 1>&2
-#      exit 1
-#    fi 
-
-    CFLAGS="-DHAVE_CRYPT_DECL $CFLAGS"  # Damn, SSLeay defines its own
-
-    ;;
-  *)
-    echo "$ac_t""no" 1>&6
-    ;;
-  esac 
-else
-  echo "$ac_t""no" 1>&6
-
-fi
-
-
-#################################################
-# check for syslog logging
-echo $ac_n "checking whether to use syslog logging""... $ac_c" 1>&6
-echo "configure:12628: checking whether to use syslog logging" >&5
-# Check whether --with-syslog or --without-syslog was given.
-if test "${with_syslog+set}" = set; then
-  withval="$with_syslog"
-   case "$withval" in
-  yes)
-    echo "$ac_t""yes" 1>&6
-    cat >> confdefs.h <<\EOF
-#define WITH_SYSLOG 1
-EOF
-
-    ;;
-  *)
-    echo "$ac_t""no" 1>&6
-    ;;
-  esac 
-else
-  echo "$ac_t""no" 1>&6
-
-fi
-
-
-#################################################
-# check for a shared memory profiling support
-echo $ac_n "checking whether to use profiling""... $ac_c" 1>&6
-echo "configure:12653: checking whether to use profiling" >&5
-# Check whether --with-profiling-data or --without-profiling-data was given.
-if test "${with_profiling_data+set}" = set; then
-  withval="$with_profiling_data"
-   case "$withval" in
-  yes)
-    echo "$ac_t""yes" 1>&6
-    cat >> confdefs.h <<\EOF
-#define WITH_PROFILE 1
-EOF
-
-    ;;
-  *)
-    echo "$ac_t""no" 1>&6
-    ;;
-  esac 
-else
-  echo "$ac_t""no" 1>&6
-
-fi
-
-
-
-#################################################
-# check for experimental disk-quotas support
-QUOTAOBJS=smbd/noquotas.o
-
-echo $ac_n "checking whether to support disk-quotas""... $ac_c" 1>&6
-echo "configure:12681: checking whether to support disk-quotas" >&5
-# Check whether --with-quotas or --without-quotas was given.
-if test "${with_quotas+set}" = set; then
-  withval="$with_quotas"
-   case "$withval" in
-  yes)
-    echo "$ac_t""yes" 1>&6
-    QUOTAOBJS=smbd/quotas.o
-    ;;
-  *)
-    echo "$ac_t""no" 1>&6
-    ;;
-  esac 
-else
-  echo "$ac_t""no" 1>&6
-
-fi
-
-
-
-#################################################
-# check for experimental utmp accounting
-
-echo $ac_n "checking whether to support utmp accounting""... $ac_c" 1>&6
-echo "configure:12705: checking whether to support utmp accounting" >&5
-# Check whether --with-utmp or --without-utmp was given.
-if test "${with_utmp+set}" = set; then
-  withval="$with_utmp"
-   case "$withval" in
-  yes)
-    echo "$ac_t""yes" 1>&6
-    cat >> confdefs.h <<\EOF
-#define WITH_UTMP 1
-EOF
-
-    ;;
-  *)
-    echo "$ac_t""no" 1>&6
-    ;;
-  esac 
-else
-  echo "$ac_t""no" 1>&6
-
-fi
-
-
-#################################################
-# check for MS Dfs support
-
-echo $ac_n "checking whether to support Microsoft Dfs""... $ac_c" 1>&6
-echo "configure:12731: checking whether to support Microsoft Dfs" >&5
-# Check whether --with-msdfs or --without-msdfs was given.
-if test "${with_msdfs+set}" = set; then
-  withval="$with_msdfs"
-   case "$withval" in
-  yes)
-     echo "$ac_t""yes" 1>&6
-     cat >> confdefs.h <<\EOF
-#define WITH_MSDFS 1
-EOF
-
-     ;;
-  *)
-    echo "$ac_t""no" 1>&6
-    ;;
-  esac 
-else
-  echo "$ac_t""no" 1>&6
-
-fi
-
-
-#################################################
-# should we build libsmbclient?
-
-INSTALLCLIENTCMD_SH=:
-INSTALLCLIENTCMD_A=:
-LIBSMBCLIENT_SHARED=
-LIBSMBCLIENT=
-echo $ac_n "checking whether to build the libsmbclient shared library""... $ac_c" 1>&6
-echo "configure:12761: checking whether to build the libsmbclient shared library" >&5
-# Check whether --with-libsmbclient or --without-libsmbclient was given.
-if test "${with_libsmbclient+set}" = set; then
-  withval="$with_libsmbclient"
-   case "$withval" in
-  yes)
-     if test $BLDSHARED = true; then
-        INSTALLCLIENTCMD_SH="\$(INSTALLCMD)"
-        LIBSMBCLIENT_SHARED=bin/libsmbclient.$SHLIBEXT
-        LIBSMBCLIENT=libsmbclient
-        echo "$ac_t""yes" 1>&6
-     else
-        INSTALLCLIENTCMD_A="\$(INSTALLCMD)"
-        LIBSMBCLIENT=libsmbclient
-        echo "$ac_t""no shared library support -- will supply static library" 1>&6
-     fi
-     ;;
-  *)
-    echo "$ac_t""no" 1>&6
-    ;;
-  esac 
-else
-  echo "$ac_t""no" 1>&6
-
-fi
-
-
-#################################################
-# these tests are taken from the GNU fileutils package
-echo "checking how to get filesystem space usage" 1>&6
-echo "configure:12791: checking how to get filesystem space usage" >&5
-space=no
-
-# Test for statvfs64.
-if test $space = no; then
-  # SVR4
-  echo $ac_n "checking statvfs64 function (SVR4)""... $ac_c" 1>&6
-echo "configure:12798: checking statvfs64 function (SVR4)" >&5
-if eval "test \"`echo '$''{'fu_cv_sys_stat_statvfs64'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  if test "$cross_compiling" = yes; then
-  fu_cv_sys_stat_statvfs64=cross
-else
-  cat > conftest.$ac_ext <<EOF
-#line 12806 "configure"
-#include "confdefs.h"
-
-#if defined(HAVE_UNISTD_H)
-#include <unistd.h>
-#endif
-#include <sys/types.h>
-#include <sys/statvfs.h>
-  main ()
-  {
-    struct statvfs64 fsd;
-    exit (statvfs64 (".", &fsd));
-  }
-EOF
-if { (eval echo configure:12820: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  fu_cv_sys_stat_statvfs64=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  fu_cv_sys_stat_statvfs64=no
-fi
-rm -fr conftest*
-fi
-
-fi
-
-echo "$ac_t""$fu_cv_sys_stat_statvfs64" 1>&6
-  if test $fu_cv_sys_stat_statvfs64 = yes; then
-    space=yes
-    cat >> confdefs.h <<\EOF
-#define STAT_STATVFS64 1
-EOF
-
-  fi
-fi
-
-# Perform only the link test since it seems there are no variants of the
-# statvfs function.  This check is more than just AC_CHECK_FUNCS(statvfs)
-# because that got a false positive on SCO OSR5.  Adding the declaration
-# of a `struct statvfs' causes this test to fail (as it should) on such
-# systems.  That system is reported to work fine with STAT_STATFS4 which
-# is what it gets when this test fails.
-if test $space = no; then
-  # SVR4
-  echo $ac_n "checking statvfs function (SVR4)""... $ac_c" 1>&6
-echo "configure:12853: checking statvfs function (SVR4)" >&5
-if eval "test \"`echo '$''{'fu_cv_sys_stat_statvfs'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 12858 "configure"
-#include "confdefs.h"
-#include <sys/types.h>
-#include <sys/statvfs.h>
-int main() {
-struct statvfs fsd; statvfs (0, &fsd);
-; return 0; }
-EOF
-if { (eval echo configure:12866: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  fu_cv_sys_stat_statvfs=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  fu_cv_sys_stat_statvfs=no
-fi
-rm -f conftest*
-fi
-
-echo "$ac_t""$fu_cv_sys_stat_statvfs" 1>&6
-  if test $fu_cv_sys_stat_statvfs = yes; then
-    space=yes
-    cat >> confdefs.h <<\EOF
-#define STAT_STATVFS 1
-EOF
-
-  fi
-fi
-
-if test $space = no; then
-  # DEC Alpha running OSF/1
-  echo $ac_n "checking for 3-argument statfs function (DEC OSF/1)""... $ac_c" 1>&6
-echo "configure:12891: checking for 3-argument statfs function (DEC OSF/1)" >&5
-  if eval "test \"`echo '$''{'fu_cv_sys_stat_statfs3_osf1'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  if test "$cross_compiling" = yes; then
-  fu_cv_sys_stat_statfs3_osf1=no
-else
-  cat > conftest.$ac_ext <<EOF
-#line 12899 "configure"
-#include "confdefs.h"
-
-#include <sys/param.h>
-#include <sys/types.h>
-#include <sys/mount.h>
-  main ()
-  {
-    struct statfs fsd;
-    fsd.f_fsize = 0;
-    exit (statfs (".", &fsd, sizeof (struct statfs)));
-  }
-EOF
-if { (eval echo configure:12912: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  fu_cv_sys_stat_statfs3_osf1=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  fu_cv_sys_stat_statfs3_osf1=no
-fi
-rm -fr conftest*
-fi
-
-fi
-
-  echo "$ac_t""$fu_cv_sys_stat_statfs3_osf1" 1>&6
-  if test $fu_cv_sys_stat_statfs3_osf1 = yes; then
-    space=yes
-    cat >> confdefs.h <<\EOF
-#define STAT_STATFS3_OSF1 1
-EOF
-
-  fi
-fi
-
-if test $space = no; then
-# AIX
-  echo $ac_n "checking for two-argument statfs with statfs.bsize member (AIX, 4.3BSD)""... $ac_c" 1>&6
-echo "configure:12939: checking for two-argument statfs with statfs.bsize member (AIX, 4.3BSD)" >&5
-  if eval "test \"`echo '$''{'fu_cv_sys_stat_statfs2_bsize'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  if test "$cross_compiling" = yes; then
-  fu_cv_sys_stat_statfs2_bsize=no
-else
-  cat > conftest.$ac_ext <<EOF
-#line 12947 "configure"
-#include "confdefs.h"
-
-#ifdef HAVE_SYS_PARAM_H
-#include <sys/param.h>
-#endif
-#ifdef HAVE_SYS_MOUNT_H
-#include <sys/mount.h>
-#endif
-#ifdef HAVE_SYS_VFS_H
-#include <sys/vfs.h>
-#endif
-  main ()
-  {
-  struct statfs fsd;
-  fsd.f_bsize = 0;
-  exit (statfs (".", &fsd));
-  }
-EOF
-if { (eval echo configure:12966: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  fu_cv_sys_stat_statfs2_bsize=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  fu_cv_sys_stat_statfs2_bsize=no
-fi
-rm -fr conftest*
-fi
-
-fi
-
-  echo "$ac_t""$fu_cv_sys_stat_statfs2_bsize" 1>&6
-  if test $fu_cv_sys_stat_statfs2_bsize = yes; then
-    space=yes
-    cat >> confdefs.h <<\EOF
-#define STAT_STATFS2_BSIZE 1
-EOF
-
-  fi
-fi
-
-if test $space = no; then
-# SVR3
-  echo $ac_n "checking for four-argument statfs (AIX-3.2.5, SVR3)""... $ac_c" 1>&6
-echo "configure:12993: checking for four-argument statfs (AIX-3.2.5, SVR3)" >&5
-  if eval "test \"`echo '$''{'fu_cv_sys_stat_statfs4'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  if test "$cross_compiling" = yes; then
-  fu_cv_sys_stat_statfs4=no
-else
-  cat > conftest.$ac_ext <<EOF
-#line 13001 "configure"
-#include "confdefs.h"
-#include <sys/types.h>
-#include <sys/statfs.h>
-  main ()
-  {
-  struct statfs fsd;
-  exit (statfs (".", &fsd, sizeof fsd, 0));
-  }
-EOF
-if { (eval echo configure:13011: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  fu_cv_sys_stat_statfs4=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  fu_cv_sys_stat_statfs4=no
-fi
-rm -fr conftest*
-fi
-
-fi
-
-  echo "$ac_t""$fu_cv_sys_stat_statfs4" 1>&6
-  if test $fu_cv_sys_stat_statfs4 = yes; then
-    space=yes
-    cat >> confdefs.h <<\EOF
-#define STAT_STATFS4 1
-EOF
-
-  fi
-fi
-
-if test $space = no; then
-# 4.4BSD and NetBSD
-  echo $ac_n "checking for two-argument statfs with statfs.fsize member (4.4BSD and NetBSD)""... $ac_c" 1>&6
-echo "configure:13038: checking for two-argument statfs with statfs.fsize member (4.4BSD and NetBSD)" >&5
-  if eval "test \"`echo '$''{'fu_cv_sys_stat_statfs2_fsize'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  if test "$cross_compiling" = yes; then
-  fu_cv_sys_stat_statfs2_fsize=no
-else
-  cat > conftest.$ac_ext <<EOF
-#line 13046 "configure"
-#include "confdefs.h"
-#include <sys/types.h>
-#ifdef HAVE_SYS_PARAM_H
-#include <sys/param.h>
-#endif
-#ifdef HAVE_SYS_MOUNT_H
-#include <sys/mount.h>
-#endif
-  main ()
-  {
-  struct statfs fsd;
-  fsd.f_fsize = 0;
-  exit (statfs (".", &fsd));
-  }
-EOF
-if { (eval echo configure:13062: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  fu_cv_sys_stat_statfs2_fsize=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  fu_cv_sys_stat_statfs2_fsize=no
-fi
-rm -fr conftest*
-fi
-
-fi
-
-  echo "$ac_t""$fu_cv_sys_stat_statfs2_fsize" 1>&6
-  if test $fu_cv_sys_stat_statfs2_fsize = yes; then
-    space=yes
-    cat >> confdefs.h <<\EOF
-#define STAT_STATFS2_FSIZE 1
-EOF
-
-  fi
-fi
-
-if test $space = no; then
-  # Ultrix
-  echo $ac_n "checking for two-argument statfs with struct fs_data (Ultrix)""... $ac_c" 1>&6
-echo "configure:13089: checking for two-argument statfs with struct fs_data (Ultrix)" >&5
-  if eval "test \"`echo '$''{'fu_cv_sys_stat_fs_data'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  if test "$cross_compiling" = yes; then
-  fu_cv_sys_stat_fs_data=no
-else
-  cat > conftest.$ac_ext <<EOF
-#line 13097 "configure"
-#include "confdefs.h"
-#include <sys/types.h>
-#ifdef HAVE_SYS_PARAM_H
-#include <sys/param.h>
-#endif
-#ifdef HAVE_SYS_MOUNT_H
-#include <sys/mount.h>
-#endif
-#ifdef HAVE_SYS_FS_TYPES_H
-#include <sys/fs_types.h>
-#endif
-  main ()
-  {
-  struct fs_data fsd;
-  /* Ultrix's statfs returns 1 for success,
-     0 for not mounted, -1 for failure.  */
-  exit (statfs (".", &fsd) != 1);
-  }
-EOF
-if { (eval echo configure:13117: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  fu_cv_sys_stat_fs_data=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  fu_cv_sys_stat_fs_data=no
-fi
-rm -fr conftest*
-fi
-
-fi
-
-  echo "$ac_t""$fu_cv_sys_stat_fs_data" 1>&6
-  if test $fu_cv_sys_stat_fs_data = yes; then
-    space=yes
-    cat >> confdefs.h <<\EOF
-#define STAT_STATFS2_FS_DATA 1
-EOF
-
-  fi
-fi
-
-#
-# As a gating factor for large file support, in order to
-# use <4GB files we must have the following minimal support
-# available.
-# long long, and a 64 bit off_t or off64_t.
-# If we don't have all of these then disable large
-# file support.
-#
-echo $ac_n "checking if large file support can be enabled""... $ac_c" 1>&6
-echo "configure:13150: checking if large file support can be enabled" >&5
-cat > conftest.$ac_ext <<EOF
-#line 13152 "configure"
-#include "confdefs.h"
-
-#if defined(HAVE_LONGLONG) && (defined(HAVE_OFF64_T) || (defined(SIZEOF_OFF_T) && (SIZEOF_OFF_T == 8)))
-#include <sys/types.h>
-#else
-__COMPILE_ERROR_
-#endif
-
-int main() {
-int i
-; return 0; }
-EOF
-if { (eval echo configure:13165: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-  rm -rf conftest*
-  samba_cv_HAVE_EXPLICIT_LARGEFILE_SUPPORT=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  samba_cv_HAVE_EXPLICIT_LARGEFILE_SUPPORT=no
-fi
-rm -f conftest*
-if test x"$samba_cv_HAVE_EXPLICIT_LARGEFILE_SUPPORT" = x"yes"; then
-    echo "$ac_t""yes" 1>&6
-    cat >> confdefs.h <<\EOF
-#define HAVE_EXPLICIT_LARGEFILE_SUPPORT 1
-EOF
-
-else
-    echo "$ac_t""no" 1>&6
-fi
-
-# Check whether --with-spinlocks or --without-spinlocks was given.
-if test "${with_spinlocks+set}" = set; then
-  withval="$with_spinlocks"
-  :
-fi
-
-if test "x$with_spinlocks" = "xyes"; then
-    cat >> confdefs.h <<\EOF
-#define USE_SPINLOCKS 1
-EOF
-
-
-    case "$host_cpu" in
-        sparc)
-            cat >> confdefs.h <<\EOF
-#define SPARC_SPINLOCKS 1
-EOF
-
-            ;;
-
-        i386|i486|i586|i686)
-            cat >> confdefs.h <<\EOF
-#define INTEL_SPINLOCKS 1
-EOF
-
-            ;;
-
-        mips)
-            cat >> confdefs.h <<\EOF
-#define MIPS_SPINLOCKS 1
-EOF
-
-            ;;
-
-        powerpc)
-            cat >> confdefs.h <<\EOF
-#define POWERPC_SPINLOCKS 1
-EOF
-
-            ;;
-    esac
-fi
-
-#################################################
-# check for ACL support
-
-echo $ac_n "checking whether to support ACLs""... $ac_c" 1>&6
-echo "configure:13232: checking whether to support ACLs" >&5
-# Check whether --with-acl-support or --without-acl-support was given.
-if test "${with_acl_support+set}" = set; then
-  withval="$with_acl_support"
-   case "$withval" in
-  yes)
-
-		case "$host_os" in
-		*sysv5*)
-			echo "$ac_t""Using UnixWare ACLs" 1>&6
-			cat >> confdefs.h <<\EOF
-#define HAVE_UNIXWARE_ACLS 1
-EOF
-
-			;;
-		*solaris*)
-			echo "$ac_t""Using solaris ACLs" 1>&6
-			cat >> confdefs.h <<\EOF
-#define HAVE_SOLARIS_ACLS 1
-EOF
-
-			;;
-		*hpux*)
-			echo "$ac_t""Using HPUX ACLs" 1>&6
-			cat >> confdefs.h <<\EOF
-#define HAVE_HPUX_ACLS 1
-EOF
-
-			;;
-		*irix*)
-			echo "$ac_t""Using IRIX ACLs" 1>&6
-			cat >> confdefs.h <<\EOF
-#define HAVE_IRIX_ACLS 1
-EOF
-
-			;;
-		*aix*)
-			echo "$ac_t""Using AIX ACLs" 1>&6
-			cat >> confdefs.h <<\EOF
-#define HAVE_AIX_ACLS 1
-EOF
-
-			;;
-		*osf*)
-			echo "$ac_t""Using Tru64 ACLs" 1>&6
-			cat >> confdefs.h <<\EOF
-#define HAVE_TRU64_ACLS 1
-EOF
-
-			LIBS="$LIBS -lpacl"
-			;;
-		*)
-		    echo $ac_n "checking for acl_get_file in -lacl""... $ac_c" 1>&6
-echo "configure:13285: checking for acl_get_file in -lacl" >&5
-ac_lib_var=`echo acl'_'acl_get_file | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lacl  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 13293 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char acl_get_file();
-
-int main() {
-acl_get_file()
-; return 0; }
-EOF
-if { (eval echo configure:13304: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
-
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_lib=HAVE_LIB`echo acl | sed -e 's/[^a-zA-Z0-9_]/_/g' \
-    -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_lib 1
-EOF
-
-  LIBS="-lacl $LIBS"
-
-else
-  echo "$ac_t""no" 1>&6
-fi
-
-			echo $ac_n "checking for ACL support""... $ac_c" 1>&6
-echo "configure:13332: checking for ACL support" >&5
-if eval "test \"`echo '$''{'samba_cv_HAVE_POSIX_ACLS'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-			cat > conftest.$ac_ext <<EOF
-#line 13338 "configure"
-#include "confdefs.h"
-#include <sys/types.h>
-#include <sys/acl.h>
-int main() {
- acl_t acl; int entry_id; acl_entry_t *entry_p; return acl_get_entry( acl, entry_id, entry_p);
-; return 0; }
-EOF
-if { (eval echo configure:13346: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  samba_cv_HAVE_POSIX_ACLS=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  samba_cv_HAVE_POSIX_ACLS=no
-fi
-rm -f conftest*
-fi
-
-echo "$ac_t""$samba_cv_HAVE_POSIX_ACLS" 1>&6
-			if test x"$samba_cv_HAVE_POSIX_ACLS" = x"yes"; then
-			    echo "$ac_t""Using posix ACLs" 1>&6
-			    cat >> confdefs.h <<\EOF
-#define HAVE_POSIX_ACLS 1
-EOF
-
-				echo $ac_n "checking for acl_get_perm_np""... $ac_c" 1>&6
-echo "configure:13366: checking for acl_get_perm_np" >&5
-if eval "test \"`echo '$''{'samba_cv_HAVE_ACL_GET_PERM_NP'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-				cat > conftest.$ac_ext <<EOF
-#line 13372 "configure"
-#include "confdefs.h"
-#include <sys/types.h>
-#include <sys/acl.h>
-int main() {
- acl_permset_t permset_d; acl_perm_t perm; return acl_get_perm_np( permset_d, perm);
-; return 0; }
-EOF
-if { (eval echo configure:13380: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  samba_cv_HAVE_ACL_GET_PERM_NP=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  samba_cv_HAVE_ACL_GET_PERM_NP=no
-fi
-rm -f conftest*
-fi
-
-echo "$ac_t""$samba_cv_HAVE_ACL_GET_PERM_NP" 1>&6
-				if test x"$samba_cv_HAVE_ACL_GET_PERM_NP" = x"yes"; then
-					cat >> confdefs.h <<\EOF
-#define HAVE_ACL_GET_PERM_NP 1
-EOF
-
-				fi
-			fi
-			;;
-		esac
-		;;
-  *)
-    echo "$ac_t""no" 1>&6
-	cat >> confdefs.h <<\EOF
-#define HAVE_NO_ACLS 1
-EOF
-
-    ;;
-  esac 
-else
-  cat >> confdefs.h <<\EOF
-#define HAVE_NO_ACLS 1
-EOF
-
-  echo "$ac_t""no" 1>&6
-
-fi
-
-
-#################################################
-# check for the historical SAMBA installation
-
-if test "x$prefix" = xNONE -a "$sbindir" = "\${exec_prefix}/sbin"; then
-	# Put all binaries under the /usr/local/samba/bin directory.
-	sbindir="$bindir"
-fi
-
-#################################################
-# check for sendfile support
-
-echo $ac_n "checking whether to check for support sendfile""... $ac_c" 1>&6
-echo "configure:13433: checking whether to check for support sendfile" >&5
-# Check whether --with-sendfile-support or --without-sendfile-support was given.
-if test "${with_sendfile_support+set}" = set; then
-  withval="$with_sendfile_support"
-   case "$withval" in
-  yes)
-
-	echo "$ac_t""yes" 1>&6;
-
-	case "$host_os" in
-	*linux*)
-		echo $ac_n "checking for linux sendfile64 support""... $ac_c" 1>&6
-echo "configure:13445: checking for linux sendfile64 support" >&5
-if eval "test \"`echo '$''{'samba_cv_HAVE_SENDFILE64'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-		cat > conftest.$ac_ext <<EOF
-#line 13451 "configure"
-#include "confdefs.h"
-#include <sys/sendfile.h>
-int main() {
-\
-int tofd, fromfd;
-off64_t offset;
-size_t total;
-ssize_t nwritten = sendfile64(tofd, fromfd, &offset, total);
-
-; return 0; }
-EOF
-if { (eval echo configure:13463: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  samba_cv_HAVE_SENDFILE64=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  samba_cv_HAVE_SENDFILE64=no
-fi
-rm -f conftest*
-fi
-
-echo "$ac_t""$samba_cv_HAVE_SENDFILE64" 1>&6
-
-		echo $ac_n "checking for linux sendfile support""... $ac_c" 1>&6
-echo "configure:13478: checking for linux sendfile support" >&5
-if eval "test \"`echo '$''{'samba_cv_HAVE_SENDFILE'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-		cat > conftest.$ac_ext <<EOF
-#line 13484 "configure"
-#include "confdefs.h"
-#include <sys/sendfile.h>
-int main() {
-\
-int tofd, fromfd;
-off_t offset;
-size_t total;
-ssize_t nwritten = sendfile(tofd, fromfd, &offset, total);
-
-; return 0; }
-EOF
-if { (eval echo configure:13496: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  samba_cv_HAVE_SENDFILE=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  samba_cv_HAVE_SENDFILE=no
-fi
-rm -f conftest*
-fi
-
-echo "$ac_t""$samba_cv_HAVE_SENDFILE" 1>&6
-
-# Try and cope with broken Linux sendfile....
-		echo $ac_n "checking for broken linux sendfile support""... $ac_c" 1>&6
-echo "configure:13512: checking for broken linux sendfile support" >&5
-if eval "test \"`echo '$''{'samba_cv_HAVE_BROKEN_LINUX_SENDFILE'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-		cat > conftest.$ac_ext <<EOF
-#line 13518 "configure"
-#include "confdefs.h"
-\
-#if defined(_FILE_OFFSET_BITS) && (_FILE_OFFSET_BITS == 64)
-#undef _FILE_OFFSET_BITS
-#endif
-#include <sys/sendfile.h>
-int main() {
-\
-int tofd, fromfd;
-off_t offset;
-size_t total;
-ssize_t nwritten = sendfile(tofd, fromfd, &offset, total);
-
-; return 0; }
-EOF
-if { (eval echo configure:13534: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  samba_cv_HAVE_BROKEN_LINUX_SENDFILE=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  samba_cv_HAVE_BROKEN_LINUX_SENDFILE=no
-fi
-rm -f conftest*
-fi
-
-echo "$ac_t""$samba_cv_HAVE_BROKEN_LINUX_SENDFILE" 1>&6
-
-	if test x"$samba_cv_HAVE_SENDFILE64" = x"yes"; then
-    		cat >> confdefs.h <<\EOF
-#define HAVE_SENDFILE64 1
-EOF
-
-		cat >> confdefs.h <<\EOF
-#define LINUX_SENDFILE_API 1
-EOF
-
-		cat >> confdefs.h <<\EOF
-#define WITH_SENDFILE 1
-EOF
-
-	elif test x"$samba_cv_HAVE_SENDFILE" = x"yes"; then
-    		cat >> confdefs.h <<\EOF
-#define HAVE_SENDFILE 1
-EOF
-
-		cat >> confdefs.h <<\EOF
-#define LINUX_SENDFILE_API 1
-EOF
-
-		cat >> confdefs.h <<\EOF
-#define WITH_SENDFILE 1
-EOF
-
-	elif test x"$samba_cv_HAVE_BROKEN_LINUX_SENDFILE" = x"yes"; then
-		cat >> confdefs.h <<\EOF
-#define LINUX_BROKEN_SENDFILE_API 1
-EOF
-
-		cat >> confdefs.h <<\EOF
-#define WITH_SENDFILE 1
-EOF
-
-	else
-		echo "$ac_t""no" 1>&6;
-	fi
-
-	;;
-	*freebsd*)
-		echo $ac_n "checking for freebsd sendfile support""... $ac_c" 1>&6
-echo "configure:13590: checking for freebsd sendfile support" >&5
-if eval "test \"`echo '$''{'samba_cv_HAVE_SENDFILE'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-		cat > conftest.$ac_ext <<EOF
-#line 13596 "configure"
-#include "confdefs.h"
-\
-#include <sys/types.h>
-#include <sys/socket.h>
-#include <sys/uio.h>
-int main() {
-\
-#define NULL (void *)0
-	int fromfd, tofd, ret, total;
-	off_t offset, nwritten;
-	struct sf_hdtr {
-                struct iovec *headers;
-                int hdr_cnt;
-                struct iovec *trailers;
-                int trl_cnt;
-	} hdr;
-	struct iovec hdtrl;
-	hdr.headers = &hdtrl;
-	hdr.hdr_cnt = 1;
-	hdr.trailers = NULL;
-	hdr.trl_cnt = 0;
-	hdtrl.iov_base = NULL;
-	hdtrl.iov_len = 0;
-	ret = sendfile(fromfd, tofd, offset, total, &hdr, &nwritten, 0);
-
-; return 0; }
-EOF
-if { (eval echo configure:13624: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  samba_cv_HAVE_SENDFILE=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  samba_cv_HAVE_SENDFILE=no
-fi
-rm -f conftest*
-fi
-
-echo "$ac_t""$samba_cv_HAVE_SENDFILE" 1>&6
-
-	if test x"$samba_cv_HAVE_SENDFILE" = x"yes"; then
-    		cat >> confdefs.h <<\EOF
-#define HAVE_SENDFILE 1
-EOF
-
-		cat >> confdefs.h <<\EOF
-#define FREEBSD_SENDFILE_API 1
-EOF
-
-		cat >> confdefs.h <<\EOF
-#define WITH_SENDFILE 1
-EOF
-
-	else
-		echo "$ac_t""no" 1>&6;
-	fi
-	;;
-
-	*hpux*)
-		echo $ac_n "checking for hpux sendfile64 support""... $ac_c" 1>&6
-echo "configure:13658: checking for hpux sendfile64 support" >&5
-if eval "test \"`echo '$''{'samba_cv_HAVE_SENDFILE64'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-		cat > conftest.$ac_ext <<EOF
-#line 13664 "configure"
-#include "confdefs.h"
-\
-#include <sys/socket.h>
-#include <sys/uio.h>
-int main() {
-\
-	int fromfd, tofd;
-	size_t total=0;
-	struct iovec hdtrl[2];
-	ssize_t nwritten;
-	off64_t offset;
-
-	hdtrl[0].iov_base = 0;
-	hdtrl[0].iov_len = 0;
-
-	nwritten = sendfile64(tofd, fromfd, offset, total, &hdtrl[0], 0);
-
-; return 0; }
-EOF
-if { (eval echo configure:13684: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  samba_cv_HAVE_SENDFILE64=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  samba_cv_HAVE_SENDFILE64=no
-fi
-rm -f conftest*
-fi
-
-echo "$ac_t""$samba_cv_HAVE_SENDFILE64" 1>&6
-	if test x"$samba_cv_HAVE_SENDFILE64" = x"yes"; then
-    		cat >> confdefs.h <<\EOF
-#define HAVE_SENDFILE64 1
-EOF
-
-		cat >> confdefs.h <<\EOF
-#define HPUX_SENDFILE_API 1
-EOF
-
-		cat >> confdefs.h <<\EOF
-#define WITH_SENDFILE 1
-EOF
-
-	else
-		echo "$ac_t""no" 1>&6;
-	fi
-
-		echo $ac_n "checking for hpux sendfile support""... $ac_c" 1>&6
-echo "configure:13715: checking for hpux sendfile support" >&5
-if eval "test \"`echo '$''{'samba_cv_HAVE_SENDFILE'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-		cat > conftest.$ac_ext <<EOF
-#line 13721 "configure"
-#include "confdefs.h"
-\
-#include <sys/socket.h>
-#include <sys/uio.h>
-int main() {
-\
-	int fromfd, tofd;
-	size_t total=0;
-	struct iovec hdtrl[2];
-	ssize_t nwritten;
-	off_t offset;
-
-	hdtrl[0].iov_base = 0;
-	hdtrl[0].iov_len = 0;
-
-	nwritten = sendfile(tofd, fromfd, offset, total, &hdtrl[0], 0);
-
-; return 0; }
-EOF
-if { (eval echo configure:13741: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  samba_cv_HAVE_SENDFILE=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  samba_cv_HAVE_SENDFILE=no
-fi
-rm -f conftest*
-fi
-
-echo "$ac_t""$samba_cv_HAVE_SENDFILE" 1>&6
-	if test x"$samba_cv_HAVE_SENDFILE" = x"yes"; then
-    		cat >> confdefs.h <<\EOF
-#define HAVE_SENDFILE 1
-EOF
-
-		cat >> confdefs.h <<\EOF
-#define HPUX_SENDFILE_API 1
-EOF
-
-		cat >> confdefs.h <<\EOF
-#define WITH_SENDFILE 1
-EOF
-
-	else
-		echo "$ac_t""no" 1>&6;
-	fi
-	;;
-
-	*solaris*)
-		LIBS="$LIBS -lsendfile"
-		echo $ac_n "checking for solaris sendfilev64 support""... $ac_c" 1>&6
-echo "configure:13775: checking for solaris sendfilev64 support" >&5
-if eval "test \"`echo '$''{'samba_cv_HAVE_SENDFILEV64'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-		cat > conftest.$ac_ext <<EOF
-#line 13781 "configure"
-#include "confdefs.h"
-\
-#include <sys/sendfile.h>
-int main() {
-\
-        int sfvcnt;
-        size_t xferred;
-        struct sendfilevec vec[2];
-	ssize_t nwritten;
-	int tofd;
-
-	sfvcnt = 2;
-
-	vec[0].sfv_fd = SFV_FD_SELF;
-	vec[0].sfv_flag = 0;
-	vec[0].sfv_off = 0;
-	vec[0].sfv_len = 0;
-
-	vec[1].sfv_fd = 0;
-	vec[1].sfv_flag = 0;
-	vec[1].sfv_off = 0;
-	vec[1].sfv_len = 0;
-	nwritten = sendfilev64(tofd, vec, sfvcnt, &xferred);
-
-; return 0; }
-EOF
-if { (eval echo configure:13808: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  samba_cv_HAVE_SENDFILEV64=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  samba_cv_HAVE_SENDFILEV64=no
-fi
-rm -f conftest*
-fi
-
-echo "$ac_t""$samba_cv_HAVE_SENDFILEV64" 1>&6
-
-	if test x"$samba_cv_HAVE_SENDFILEV64" = x"yes"; then
-    		cat >> confdefs.h <<\EOF
-#define HAVE_SENDFILEV64 1
-EOF
-
-		cat >> confdefs.h <<\EOF
-#define SOLARIS_SENDFILE_API 1
-EOF
-
-		cat >> confdefs.h <<\EOF
-#define WITH_SENDFILE 1
-EOF
-
-	else
-		echo "$ac_t""no" 1>&6;
-	fi
-
-		echo $ac_n "checking for solaris sendfilev support""... $ac_c" 1>&6
-echo "configure:13840: checking for solaris sendfilev support" >&5
-if eval "test \"`echo '$''{'samba_cv_HAVE_SENDFILEV'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-		cat > conftest.$ac_ext <<EOF
-#line 13846 "configure"
-#include "confdefs.h"
-\
-#include <sys/sendfile.h>
-int main() {
-\
-        int sfvcnt;
-        size_t xferred;
-        struct sendfilevec vec[2];
-	ssize_t nwritten;
-	int tofd;
-
-	sfvcnt = 2;
-
-	vec[0].sfv_fd = SFV_FD_SELF;
-	vec[0].sfv_flag = 0;
-	vec[0].sfv_off = 0;
-	vec[0].sfv_len = 0;
-
-	vec[1].sfv_fd = 0;
-	vec[1].sfv_flag = 0;
-	vec[1].sfv_off = 0;
-	vec[1].sfv_len = 0;
-	nwritten = sendfilev(tofd, vec, sfvcnt, &xferred);
-
-; return 0; }
-EOF
-if { (eval echo configure:13873: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  samba_cv_HAVE_SENDFILEV=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  samba_cv_HAVE_SENDFILEV=no
-fi
-rm -f conftest*
-fi
-
-echo "$ac_t""$samba_cv_HAVE_SENDFILEV" 1>&6
-
-	if test x"$samba_cv_HAVE_SENDFILEV" = x"yes"; then
-    		cat >> confdefs.h <<\EOF
-#define HAVE_SENDFILEV 1
-EOF
-
-		cat >> confdefs.h <<\EOF
-#define SOLARIS_SENDFILE_API 1
-EOF
-
-		cat >> confdefs.h <<\EOF
-#define WITH_SENDFILE 1
-EOF
-
-	else
-		echo "$ac_t""no" 1>&6;
-	fi
-	;;
-
-	*)
-	;;
-        esac
-        ;;
-  *)
-    echo "$ac_t""no" 1>&6
-    ;;
-  esac 
-else
-  echo "$ac_t""no" 1>&6
-
-fi
-
-
-#################################################
-# Check whether winbind is supported on this platform.  If so we need to
-# build and install client programs (WINBIND_TARGETS), sbin programs
-# (WINBIND_STARGETS) and shared libraries (WINBIND_LTARGETS).
-
-echo $ac_n "checking whether to build winbind""... $ac_c" 1>&6
-echo "configure:13925: checking whether to build winbind" >&5
-
-# Initially, the value of $host_os decides whether winbind is supported
-
-case "$host_os" in 
-        *linux*|*irix*)
-		HAVE_WINBIND=yes
-                ;;
-	*solaris*)
-		HAVE_WINBIND=yes
-		WINBIND_NSS_EXTRA_OBJS="nsswitch/winbind_nss_solaris.o"
-		WINBIND_NSS_EXTRA_LIBS="-lsocket"
-		;;
-	*hpux11*)
-		HAVE_WINBIND=yes
-		WINBIND_NSS_EXTRA_OBJS="nsswitch/winbind_nss_solaris.o"
-               ;;
-	*aix4*)
-		HAVE_WINBIND=yes
-		;;
-        *)
-		HAVE_WINBIND=no
-                winbind_no_reason=", unsupported on $host_os"
-		;;
-esac
-
-# Check the setting of --with-winbindd
-
-# Check whether --with-winbind or --without-winbind was given.
-if test "${with_winbind+set}" = set; then
-  withval="$with_winbind"
-   
-  case "$withval" in
-	yes)
-		HAVE_WINBIND=yes
-		;;
-        no)
-		HAVE_WINBIND=no
-                winbind_reason=""
-                ;;
-  esac 
-fi
-
-
-# We need unix domain sockets for winbind
-
-if test x"$HAVE_WINBIND" = x"yes"; then
-	if test x"$samba_cv_unixsocket" = x"no"; then
-		winbind_no_reason=", no unix domain socket support on $host_os"
-		HAVE_WINBIND=no
-	fi
-fi
-
-# Display test results
-
-if test x"$HAVE_WINBIND" = x"yes"; then
-
-        echo "$ac_t""yes" 1>&6
-
-	echo $ac_n "checking whether to enable winbind auth challenge/response code""... $ac_c" 1>&6
-echo "configure:13985: checking whether to enable winbind auth challenge/response code" >&5
-	# Check whether --with-winbind-auth-challenge or --without-winbind-auth-challenge was given.
-if test "${with_winbind_auth_challenge+set}" = set; then
-  withval="$with_winbind_auth_challenge"
-   
-	  case "$withval" in
-		yes)
-			cat >> confdefs.h <<\EOF
-#define WITH_WINBIND_AUTH_CRAP 1
-EOF
-
-			echo "$ac_t""yes" 1>&6
-			;;
-	        *)
-			echo "$ac_t""no" 1>&6
-	                ;;
-	  esac 
-else
-  echo "$ac_t""no" 1>&6
-	
-fi
-
-
-# Check for FreeBSD problem with getgroups
-
-	WINBIND_TARGETS="bin/wbinfo"
-	WINBIND_STARGETS="bin/winbindd"
-	case "$host_os" in
-        *irix*)
-		WINBIND_LTARGETS="nsswitch/libns_winbind.so"
-                ;;
-        *)
-		WINBIND_LTARGETS="nsswitch/libnss_winbind.so"
-                ;;
-	esac
-
-
-	case "$with_pam" in
-		yes)
-			WINBIND_PAM_TARGETS="nsswitch/pam_winbind.so"
-		;;
-	esac
-
-# Check for Horrible winbindd ldap hack.
-
-        echo $ac_n "checking whether to enable winbind ldap hack""... $ac_c" 1>&6
-echo "configure:14031: checking whether to enable winbind ldap hack" >&5
-        # Check whether --with-winbind-ldap-hack or --without-winbind-ldap-hack was given.
-if test "${with_winbind_ldap_hack+set}" = set; then
-  withval="$with_winbind_ldap_hack"
-  
-          case "$withval" in
-                yes)
-                        cat >> confdefs.h <<\EOF
-#define WITH_HORRIBLE_LDAP_NATIVE_MODE_HACK 1
-EOF
-
-                        LIBS="$LIBS -lldap";
-                        echo "$ac_t""yes" 1>&6
-                        ;;
-                no)
-                        echo "$ac_t""no" 1>&6
-                        ;;
-          esac 
-else
-  echo "$ac_t""no" 1>&6
-        
-fi
-
-
-else
-        echo "$ac_t""no$winbind_no_reason" 1>&6
-
-	WINBIND_TARGETS=""
-	WINBIND_STARGETS=""
-	WINBIND_LTARGETS=""
-	WINBIND_PAM_TARGETS=""
-fi
-
-
-# Check for FreeBSD problem with getgroups
-# It returns EGID too many times in the list of groups
-# and causes a security problem
-echo $ac_n "checking whether or not getgroups returns EGID too many times""... $ac_c" 1>&6
-echo "configure:14069: checking whether or not getgroups returns EGID too many times" >&5
-if eval "test \"`echo '$''{'samba_cv_have_getgroups_too_many_egids'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  if test "$cross_compiling" = yes; then
-  samba_cv_have_getgroups_too_many_egids=cross
-else
-  cat > conftest.$ac_ext <<EOF
-#line 14077 "configure"
-#include "confdefs.h"
-
-#include <sys/types.h>
-#include <stdio.h>
-
-int main(int argc, char *argv[])
-{
-  gid_t groups[10];
-  int n = 10;
-
-  n = getgroups(n, &groups);
-  /* Could actually pass back the number of EGIDs there ... */
-  exit((n > 1 && groups[0] == getegid() && groups[1] == getegid()) ? 1 : 0);
-}
-EOF
-if { (eval echo configure:14093: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  samba_cv_have_getgroups_too_many_egids=no
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  samba_cv_have_getgroups_too_many_egids=yes
-fi
-rm -fr conftest*
-fi
-
-fi
-
-echo "$ac_t""$samba_cv_have_getgroups_too_many_egids" 1>&6
-if test x"$samba_cv_have_getgroups_too_many_egids" = x"yes"; then
-    cat >> confdefs.h <<\EOF
-#define HAVE_GETGROUPS_TOO_MANY_EGIDS 1
-EOF
-
-fi
-
-# Substitution time!
-
-
-
-
-
-
-
-
-# Solaris has some extra fields in struct passwd that need to be
-# initialised otherwise nscd crashes.  Unfortunately autoconf < 2.50
-# doesn't have the AC_CHECK_MEMBER macro which would be handy for checking
-# this.
-
-#AC_CHECK_MEMBER(struct passwd.pw_comment,
-#		AC_DEFINE(HAVE_PASSWD_PW_COMMENT, 1, [Defined if struct passwd has pw_comment field]),
-#		[#include <pwd.h>])
-
-echo $ac_n "checking whether struct passwd has pw_comment""... $ac_c" 1>&6
-echo "configure:14134: checking whether struct passwd has pw_comment" >&5
-if eval "test \"`echo '$''{'samba_cv_passwd_pw_comment'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-	cat > conftest.$ac_ext <<EOF
-#line 14140 "configure"
-#include "confdefs.h"
-#include <pwd.h>
-int main() {
-struct passwd p; p.pw_comment;
-; return 0; }
-EOF
-if { (eval echo configure:14147: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-  rm -rf conftest*
-  samba_cv_passwd_pw_comment=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  samba_cv_passwd_pw_comment=no
-fi
-rm -f conftest*
-fi
-
-echo "$ac_t""$samba_cv_passwd_pw_comment" 1>&6
-if test x"$samba_cv_passwd_pw_comment" = x"yes"; then
-	cat >> confdefs.h <<\EOF
-#define HAVE_PASSWD_PW_COMMENT 1
-EOF
-
-fi
-
-#AC_CHECK_MEMBER(struct passwd.pw_age,
-#		AC_DEFINE(HAVE_PASSWD_PW_AGE, 1, [Defined if struct passwd has pw_age field]),
-#		[#include <pwd.h>])
-
-echo $ac_n "checking whether struct passwd has pw_age""... $ac_c" 1>&6
-echo "configure:14172: checking whether struct passwd has pw_age" >&5
-if eval "test \"`echo '$''{'samba_cv_passwd_pw_age'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-	cat > conftest.$ac_ext <<EOF
-#line 14178 "configure"
-#include "confdefs.h"
-#include <pwd.h>
-int main() {
-struct passwd p; p.pw_age;
-; return 0; }
-EOF
-if { (eval echo configure:14185: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-  rm -rf conftest*
-  samba_cv_passwd_pw_age=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  samba_cv_passwd_pw_age=no
-fi
-rm -f conftest*
-fi
-
-echo "$ac_t""$samba_cv_passwd_pw_age" 1>&6
-if test x"$samba_cv_passwd_pw_age" = x"yes"; then
-	cat >> confdefs.h <<\EOF
-#define HAVE_PASSWD_PW_AGE 1
-EOF
-
-fi
-
-#################################################
-# Check to see if we should use the included popt
-
-# Check whether --with-included-popt or --without-included-popt was given.
-if test "${with_included_popt+set}" = set; then
-  withval="$with_included_popt"
-  
-  case "$withval" in
-        yes)
-                INCLUDED_POPT=yes
-                ;;
-        no)
-                INCLUDED_POPT=no
-                ;;
-  esac 
-fi
-
-if test x"$INCLUDED_POPT" != x"yes"; then
-    echo $ac_n "checking for poptGetContext in -lpopt""... $ac_c" 1>&6
-echo "configure:14224: checking for poptGetContext in -lpopt" >&5
-ac_lib_var=`echo popt'_'poptGetContext | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lpopt  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 14232 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char poptGetContext();
-
-int main() {
-poptGetContext()
-; return 0; }
-EOF
-if { (eval echo configure:14243: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
-
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  INCLUDED_POPT=no
-else
-  echo "$ac_t""no" 1>&6
-INCLUDED_POPT=yes
-fi
-
-fi
-
-echo $ac_n "checking whether to use included popt""... $ac_c" 1>&6
-echo "configure:14267: checking whether to use included popt" >&5
-if test x"$INCLUDED_POPT" = x"yes"; then
-    echo "$ac_t""$srcdir/popt" 1>&6
-    BUILD_POPT='$(POPT_OBJS)'
-    FLAGS1="-I$srcdir/popt"
-else
-    echo "$ac_t""no" 1>&6
-    LIBS="$LIBS -lpopt"
-fi
-
-
-
-#################################################
-# final configure stuff
-echo $ac_n "checking configure summary""... $ac_c" 1>&6
-echo "configure:14282: checking configure summary" >&5
-if test "$cross_compiling" = yes; then
-  echo "configure: warning: cannot run when cross-compiling" 1>&2
-else
-  cat > conftest.$ac_ext <<EOF
-#line 14287 "configure"
-#include "confdefs.h"
-#include "${srcdir-.}/tests/summary.c"
-EOF
-if { (eval echo configure:14291: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  echo "$ac_t""yes" 1>&6
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  { echo "configure: error: summary failure. Aborting config" 1>&2; exit 1; }; exit 1;
-fi
-rm -fr conftest*
-fi
-
-
-builddir=`pwd`
-
-
-trap '' 1 2 15
-cat > confcache <<\EOF
-# This file is a shell script that caches the results of configure
-# tests run on this system so they can be shared between configure
-# scripts and configure runs.  It is not useful on other systems.
-# If it contains results you don't want to keep, you may remove or edit it.
-#
-# By default, configure uses ./config.cache as the cache file,
-# creating it if it does not exist already.  You can give configure
-# the --cache-file=FILE option to use a different cache file; that is
-# what configure does when it calls configure scripts in
-# subdirectories, so they share the cache.
-# Giving --cache-file=/dev/null disables caching, for debugging configure.
-# config.status only pays attention to the cache file if you give it the
-# --recheck option to rerun configure.
-#
-EOF
-# The following way of writing the cache mishandles newlines in values,
-# but we know of no workaround that is simple, portable, and efficient.
-# So, don't put newlines in cache variables' values.
-# Ultrix sh set writes to stderr and can't be redirected directly,
-# and sets the high bit in the cache file unless we assign to the vars.
-(set) 2>&1 |
-  case `(ac_space=' '; set | grep ac_space) 2>&1` in
-  *ac_space=\ *)
-    # `set' does not quote correctly, so add quotes (double-quote substitution
-    # turns \\\\ into \\, and sed turns \\ into \).
-    sed -n \
-      -e "s/'/'\\\\''/g" \
-      -e "s/^\\([a-zA-Z0-9_]*_cv_[a-zA-Z0-9_]*\\)=\\(.*\\)/\\1=\${\\1='\\2'}/p"
-    ;;
-  *)
-    # `set' quotes correctly as required by POSIX, so do not add quotes.
-    sed -n -e 's/^\([a-zA-Z0-9_]*_cv_[a-zA-Z0-9_]*\)=\(.*\)/\1=${\1=\2}/p'
-    ;;
-  esac >> confcache
-if cmp -s $cache_file confcache; then
-  :
-else
-  if test -w $cache_file; then
-    echo "updating cache $cache_file"
-    cat confcache > $cache_file
-  else
-    echo "not updating unwritable cache $cache_file"
-  fi
-fi
-rm -f confcache
-
-trap 'rm -fr conftest* confdefs* core core.* *.core $ac_clean_files; exit 1' 1 2 15
-
-test "x$prefix" = xNONE && prefix=$ac_default_prefix
-# Let make expand exec_prefix.
-test "x$exec_prefix" = xNONE && exec_prefix='${prefix}'
-
-# Any assignment to VPATH causes Sun make to only execute
-# the first set of double-colon rules, so remove it if not needed.
-# If there is a colon in the path, we need to keep it.
-if test "x$srcdir" = x.; then
-  ac_vpsub='/^[ 	]*VPATH[ 	]*=[^:]*$/d'
-fi
-
-trap 'rm -f $CONFIG_STATUS conftest*; exit 1' 1 2 15
-
-DEFS=-DHAVE_CONFIG_H
-
-# Without the "./", some shells look in PATH for config.status.
-: ${CONFIG_STATUS=./config.status}
-
-echo creating $CONFIG_STATUS
-rm -f $CONFIG_STATUS
-cat > $CONFIG_STATUS <<EOF
-#! /bin/sh
-# Generated automatically by configure.
-# Run this file to recreate the current configuration.
-# This directory was configured as follows,
-# on host `(hostname || uname -n) 2>/dev/null | sed 1q`:
-#
-# $0 $ac_configure_args
-#
-# Compiler output produced by configure, useful for debugging
-# configure, is in ./config.log if it exists.
-
-ac_cs_usage="Usage: $CONFIG_STATUS [--recheck] [--version] [--help]"
-for ac_option
-do
-  case "\$ac_option" in
-  -recheck | --recheck | --rechec | --reche | --rech | --rec | --re | --r)
-    echo "running \${CONFIG_SHELL-/bin/sh} $0 $ac_configure_args --no-create --no-recursion"
-    exec \${CONFIG_SHELL-/bin/sh} $0 $ac_configure_args --no-create --no-recursion ;;
-  -version | --version | --versio | --versi | --vers | --ver | --ve | --v)
-    echo "$CONFIG_STATUS generated by autoconf version 2.13"
-    exit 0 ;;
-  -help | --help | --hel | --he | --h)
-    echo "\$ac_cs_usage"; exit 0 ;;
-  *) echo "\$ac_cs_usage"; exit 1 ;;
-  esac
-done
-
-ac_given_srcdir=$srcdir
-ac_given_INSTALL="$INSTALL"
-
-trap 'rm -fr `echo "include/stamp-h Makefile script/findsmb include/config.h" | sed "s/:[^ ]*//g"` conftest*; exit 1' 1 2 15
-EOF
-cat >> $CONFIG_STATUS <<EOF
-
-# Protect against being on the right side of a sed subst in config.status.
-sed 's/%@/@@/; s/@%/@@/; s/%g\$/@g/; /@g\$/s/[\\\\&%]/\\\\&/g;
- s/@@/%@/; s/@@/@%/; s/@g\$/%g/' > conftest.subs <<\\CEOF
-$ac_vpsub
-$extrasub
-s%@SHELL@%$SHELL%g
-s%@CFLAGS@%$CFLAGS%g
-s%@CPPFLAGS@%$CPPFLAGS%g
-s%@CXXFLAGS@%$CXXFLAGS%g
-s%@FFLAGS@%$FFLAGS%g
-s%@DEFS@%$DEFS%g
-s%@LDFLAGS@%$LDFLAGS%g
-s%@LIBS@%$LIBS%g
-s%@exec_prefix@%$exec_prefix%g
-s%@prefix@%$prefix%g
-s%@program_transform_name@%$program_transform_name%g
-s%@bindir@%$bindir%g
-s%@sbindir@%$sbindir%g
-s%@libexecdir@%$libexecdir%g
-s%@datadir@%$datadir%g
-s%@sysconfdir@%$sysconfdir%g
-s%@sharedstatedir@%$sharedstatedir%g
-s%@localstatedir@%$localstatedir%g
-s%@libdir@%$libdir%g
-s%@includedir@%$includedir%g
-s%@oldincludedir@%$oldincludedir%g
-s%@infodir@%$infodir%g
-s%@mandir@%$mandir%g
-s%@codepagedir@%$codepagedir%g
-s%@configdir@%$configdir%g
-s%@lockdir@%$lockdir%g
-s%@piddir@%$piddir%g
-s%@logfilebase@%$logfilebase%g
-s%@privatedir@%$privatedir%g
-s%@swatdir@%$swatdir%g
-s%@RUNPROG@%$RUNPROG%g
-s%@MPROGS@%$MPROGS%g
-s%@LDSHFLAGS@%$LDSHFLAGS%g
-s%@SONAMEFLAG@%$SONAMEFLAG%g
-s%@SHLD@%$SHLD%g
-s%@HOST_OS@%$HOST_OS%g
-s%@PAM_MOD@%$PAM_MOD%g
-s%@PDBEDIT@%$PDBEDIT%g
-s%@WRAP@%$WRAP%g
-s%@WRAP32@%$WRAP32%g
-s%@WRAPPROG@%$WRAPPROG%g
-s%@PICFLAG@%$PICFLAG%g
-s%@PICSUFFIX@%$PICSUFFIX%g
-s%@SHLIBEXT@%$SHLIBEXT%g
-s%@BLDSHARED@%$BLDSHARED%g
-s%@INSTALLCLIENTCMD_SH@%$INSTALLCLIENTCMD_SH%g
-s%@INSTALLCLIENTCMD_A@%$INSTALLCLIENTCMD_A%g
-s%@LIBSMBCLIENT_SHARED@%$LIBSMBCLIENT_SHARED%g
-s%@LIBSMBCLIENT@%$LIBSMBCLIENT%g
-s%@CC@%$CC%g
-s%@INSTALL_PROGRAM@%$INSTALL_PROGRAM%g
-s%@INSTALL_SCRIPT@%$INSTALL_SCRIPT%g
-s%@INSTALL_DATA@%$INSTALL_DATA%g
-s%@AWK@%$AWK%g
-s%@passwd_program@%$passwd_program%g
-s%@BROKEN_CC@%$BROKEN_CC%g
-s%@host@%$host%g
-s%@host_alias@%$host_alias%g
-s%@host_cpu@%$host_cpu%g
-s%@host_vendor@%$host_vendor%g
-s%@host_os@%$host_os%g
-s%@target@%$target%g
-s%@target_alias@%$target_alias%g
-s%@target_cpu@%$target_cpu%g
-s%@target_vendor@%$target_vendor%g
-s%@target_os@%$target_os%g
-s%@build@%$build%g
-s%@build_alias@%$build_alias%g
-s%@build_cpu@%$build_cpu%g
-s%@build_vendor@%$build_vendor%g
-s%@build_os@%$build_os%g
-s%@CPP@%$CPP%g
-s%@CUPS_CONFIG@%$CUPS_CONFIG%g
-s%@LIBOBJS@%$LIBOBJS%g
-s%@TERMLIBS@%$TERMLIBS%g
-s%@TERMLDFLAGS@%$TERMLDFLAGS%g
-s%@ROFF@%$ROFF%g
-s%@DYNEXP@%$DYNEXP%g
-s%@LDAPLIBS@%$LDAPLIBS%g
-s%@QUOTAOBJS@%$QUOTAOBJS%g
-s%@WINBIND_TARGETS@%$WINBIND_TARGETS%g
-s%@WINBIND_STARGETS@%$WINBIND_STARGETS%g
-s%@WINBIND_LTARGETS@%$WINBIND_LTARGETS%g
-s%@WINBIND_PAM_TARGETS@%$WINBIND_PAM_TARGETS%g
-s%@WINBIND_NSS_EXTRA_OBJS@%$WINBIND_NSS_EXTRA_OBJS%g
-s%@WINBIND_NSS_EXTRA_LIBS@%$WINBIND_NSS_EXTRA_LIBS%g
-s%@BUILD_POPT@%$BUILD_POPT%g
-s%@FLAGS1@%$FLAGS1%g
-s%@builddir@%$builddir%g
-
-CEOF
-EOF
-
-cat >> $CONFIG_STATUS <<\EOF
-
-# Split the substitutions into bite-sized pieces for seds with
-# small command number limits, like on Digital OSF/1 and HP-UX.
-ac_max_sed_cmds=90 # Maximum number of lines to put in a sed script.
-ac_file=1 # Number of current file.
-ac_beg=1 # First line for current file.
-ac_end=$ac_max_sed_cmds # Line after last line for current file.
-ac_more_lines=:
-ac_sed_cmds=""
-while $ac_more_lines; do
-  if test $ac_beg -gt 1; then
-    sed "1,${ac_beg}d; ${ac_end}q" conftest.subs > conftest.s$ac_file
-  else
-    sed "${ac_end}q" conftest.subs > conftest.s$ac_file
-  fi
-  if test ! -s conftest.s$ac_file; then
-    ac_more_lines=false
-    rm -f conftest.s$ac_file
-  else
-    if test -z "$ac_sed_cmds"; then
-      ac_sed_cmds="sed -f conftest.s$ac_file"
-    else
-      ac_sed_cmds="$ac_sed_cmds | sed -f conftest.s$ac_file"
-    fi
-    ac_file=`expr $ac_file + 1`
-    ac_beg=$ac_end
-    ac_end=`expr $ac_end + $ac_max_sed_cmds`
-  fi
-done
-if test -z "$ac_sed_cmds"; then
-  ac_sed_cmds=cat
-fi
-EOF
-
-cat >> $CONFIG_STATUS <<EOF
-
-CONFIG_FILES=\${CONFIG_FILES-"include/stamp-h Makefile script/findsmb"}
-EOF
-cat >> $CONFIG_STATUS <<\EOF
-for ac_file in .. $CONFIG_FILES; do if test "x$ac_file" != x..; then
-  # Support "outfile[:infile[:infile...]]", defaulting infile="outfile.in".
-  case "$ac_file" in
-  *:*) ac_file_in=`echo "$ac_file"|sed 's%[^:]*:%%'`
-       ac_file=`echo "$ac_file"|sed 's%:.*%%'` ;;
-  *) ac_file_in="${ac_file}.in" ;;
-  esac
-
-  # Adjust a relative srcdir, top_srcdir, and INSTALL for subdirectories.
-
-  # Remove last slash and all that follows it.  Not all systems have dirname.
-  ac_dir=`echo $ac_file|sed 's%/[^/][^/]*$%%'`
-  if test "$ac_dir" != "$ac_file" && test "$ac_dir" != .; then
-    # The file is in a subdirectory.
-    test ! -d "$ac_dir" && mkdir "$ac_dir"
-    ac_dir_suffix="/`echo $ac_dir|sed 's%^\./%%'`"
-    # A "../" for each directory in $ac_dir_suffix.
-    ac_dots=`echo $ac_dir_suffix|sed 's%/[^/]*%../%g'`
-  else
-    ac_dir_suffix= ac_dots=
-  fi
-
-  case "$ac_given_srcdir" in
-  .)  srcdir=.
-      if test -z "$ac_dots"; then top_srcdir=.
-      else top_srcdir=`echo $ac_dots|sed 's%/$%%'`; fi ;;
-  /*) srcdir="$ac_given_srcdir$ac_dir_suffix"; top_srcdir="$ac_given_srcdir" ;;
-  *) # Relative path.
-    srcdir="$ac_dots$ac_given_srcdir$ac_dir_suffix"
-    top_srcdir="$ac_dots$ac_given_srcdir" ;;
-  esac
-
-  case "$ac_given_INSTALL" in
-  [/$]*) INSTALL="$ac_given_INSTALL" ;;
-  *) INSTALL="$ac_dots$ac_given_INSTALL" ;;
-  esac
-
-  echo creating "$ac_file"
-  rm -f "$ac_file"
-  configure_input="Generated automatically from `echo $ac_file_in|sed 's%.*/%%'` by configure."
-  case "$ac_file" in
-  *Makefile*) ac_comsub="1i\\
-# $configure_input" ;;
-  *) ac_comsub= ;;
-  esac
-
-  ac_file_inputs=`echo $ac_file_in|sed -e "s%^%$ac_given_srcdir/%" -e "s%:% $ac_given_srcdir/%g"`
-  sed -e "$ac_comsub
-s%@configure_input@%$configure_input%g
-s%@srcdir@%$srcdir%g
-s%@top_srcdir@%$top_srcdir%g
-s%@INSTALL@%$INSTALL%g
-" $ac_file_inputs | (eval "$ac_sed_cmds") > $ac_file
-fi; done
-rm -f conftest.s*
-
-# These sed commands are passed to sed as "A NAME B NAME C VALUE D", where
-# NAME is the cpp macro being defined and VALUE is the value it is being given.
-#
-# ac_d sets the value in "#define NAME VALUE" lines.
-ac_dA='s%^\([ 	]*\)#\([ 	]*define[ 	][ 	]*\)'
-ac_dB='\([ 	][ 	]*\)[^ 	]*%\1#\2'
-ac_dC='\3'
-ac_dD='%g'
-# ac_u turns "#undef NAME" with trailing blanks into "#define NAME VALUE".
-ac_uA='s%^\([ 	]*\)#\([ 	]*\)undef\([ 	][ 	]*\)'
-ac_uB='\([ 	]\)%\1#\2define\3'
-ac_uC=' '
-ac_uD='\4%g'
-# ac_e turns "#undef NAME" without trailing blanks into "#define NAME VALUE".
-ac_eA='s%^\([ 	]*\)#\([ 	]*\)undef\([ 	][ 	]*\)'
-ac_eB='$%\1#\2define\3'
-ac_eC=' '
-ac_eD='%g'
-
-if test "${CONFIG_HEADERS+set}" != set; then
-EOF
-cat >> $CONFIG_STATUS <<EOF
-  CONFIG_HEADERS="include/config.h"
-EOF
-cat >> $CONFIG_STATUS <<\EOF
-fi
-for ac_file in .. $CONFIG_HEADERS; do if test "x$ac_file" != x..; then
-  # Support "outfile[:infile[:infile...]]", defaulting infile="outfile.in".
-  case "$ac_file" in
-  *:*) ac_file_in=`echo "$ac_file"|sed 's%[^:]*:%%'`
-       ac_file=`echo "$ac_file"|sed 's%:.*%%'` ;;
-  *) ac_file_in="${ac_file}.in" ;;
-  esac
-
-  echo creating $ac_file
-
-  rm -f conftest.frag conftest.in conftest.out
-  ac_file_inputs=`echo $ac_file_in|sed -e "s%^%$ac_given_srcdir/%" -e "s%:% $ac_given_srcdir/%g"`
-  cat $ac_file_inputs > conftest.in
-
-EOF
-
-# Transform confdefs.h into a sed script conftest.vals that substitutes
-# the proper values into config.h.in to produce config.h.  And first:
-# Protect against being on the right side of a sed subst in config.status.
-# Protect against being in an unquoted here document in config.status.
-rm -f conftest.vals
-cat > conftest.hdr <<\EOF
-s/[\\&%]/\\&/g
-s%[\\$`]%\\&%g
-s%#define \([A-Za-z_][A-Za-z0-9_]*\) *\(.*\)%${ac_dA}\1${ac_dB}\1${ac_dC}\2${ac_dD}%gp
-s%ac_d%ac_u%gp
-s%ac_u%ac_e%gp
-EOF
-sed -n -f conftest.hdr confdefs.h > conftest.vals
-rm -f conftest.hdr
-
-# This sed command replaces #undef with comments.  This is necessary, for
-# example, in the case of _POSIX_SOURCE, which is predefined and required
-# on some systems where configure will not decide to define it.
-cat >> conftest.vals <<\EOF
-s%^[ 	]*#[ 	]*undef[ 	][ 	]*[a-zA-Z_][a-zA-Z_0-9]*%/* & */%
-EOF
-
-# Break up conftest.vals because some shells have a limit on
-# the size of here documents, and old seds have small limits too.
-
-rm -f conftest.tail
-while :
-do
-  ac_lines=`grep -c . conftest.vals`
-  # grep -c gives empty output for an empty file on some AIX systems.
-  if test -z "$ac_lines" || test "$ac_lines" -eq 0; then break; fi
-  # Write a limited-size here document to conftest.frag.
-  echo '  cat > conftest.frag <<CEOF' >> $CONFIG_STATUS
-  sed ${ac_max_here_lines}q conftest.vals >> $CONFIG_STATUS
-  echo 'CEOF
-  sed -f conftest.frag conftest.in > conftest.out
-  rm -f conftest.in
-  mv conftest.out conftest.in
-' >> $CONFIG_STATUS
-  sed 1,${ac_max_here_lines}d conftest.vals > conftest.tail
-  rm -f conftest.vals
-  mv conftest.tail conftest.vals
-done
-rm -f conftest.vals
-
-cat >> $CONFIG_STATUS <<\EOF
-  rm -f conftest.frag conftest.h
-  echo "/* $ac_file.  Generated automatically by configure.  */" > conftest.h
-  cat conftest.in >> conftest.h
-  rm -f conftest.in
-  if cmp -s $ac_file conftest.h 2>/dev/null; then
-    echo "$ac_file is unchanged"
-    rm -f conftest.h
-  else
-    # Remove last slash and all that follows it.  Not all systems have dirname.
-      ac_dir=`echo $ac_file|sed 's%/[^/][^/]*$%%'`
-      if test "$ac_dir" != "$ac_file" && test "$ac_dir" != .; then
-      # The file is in a subdirectory.
-      test ! -d "$ac_dir" && mkdir "$ac_dir"
-    fi
-    rm -f $ac_file
-    mv conftest.h $ac_file
-  fi
-fi; done
-
-EOF
-cat >> $CONFIG_STATUS <<EOF
-
-EOF
-cat >> $CONFIG_STATUS <<\EOF
-
-exit 0
-EOF
-chmod +x $CONFIG_STATUS
-rm -fr confdefs* $ac_clean_files
-test "$no_create" = yes || ${CONFIG_SHELL-/bin/sh} $CONFIG_STATUS || exit 1
-
diff -pruwN samba-2.2.12/source/configure.developer samba-2.2.12-livebox/configure.developer
--- samba-2.2.12/source/configure.developer	2004-08-12 20:24:35.000000000 +0200
+++ samba-2.2.12-livebox/configure.developer	1970-01-01 01:00:00.000000000 +0100
@@ -1,4 +0,0 @@
-#!/bin/sh
-CFLAGS="$CFLAGS -g -Wall -Wshadow -Wstrict-prototypes -Wpointer-arith -Wcast-qual -Wcast-align -DDEBUG_PASSWORD -DDEVELOPER"
-export CFLAGS
-`dirname $0`/configure $*
diff -pruwN samba-2.2.12/source/configure.in samba-2.2.12-livebox/configure.in
--- samba-2.2.12/source/configure.in	2004-08-12 20:24:30.000000000 +0200
+++ samba-2.2.12-livebox/configure.in	1970-01-01 01:00:00.000000000 +0100
@@ -1,3172 +0,0 @@
-dnl Process this file with autoconf to produce a configure script.
-AC_INIT(include/includes.h)
-AC_CONFIG_HEADER(include/config.h)
-
-#################################################
-# Directory handling stuff to support both the
-# legacy SAMBA directories and FHS compliant
-# ones...
-AC_PREFIX_DEFAULT(/usr/local/samba)
-
-AC_ARG_WITH(fhs, 
-[  --with-fhs              Use FHS-compliant paths (default=no)],
-    codepagedir="\$(DATADIR)/samba/codepages"
-    configdir="${sysconfdir}/samba"
-    lockdir="\${VARDIR}/cache/samba"
-    piddir="\$(VARDIR)/run/samba"
-    logfilebase="\${VARDIR}/log/samba"
-    privatedir="\${CONFIGDIR}/private"
-    swatdir="\${DATADIR}/samba/swat",
-    codepagedir="\$(LIBDIR)/codepages"
-    configdir="\$(LIBDIR)"
-    logfilebase="\$(VARDIR)"
-    lockdir="\${VARDIR}/locks"
-    piddir="\$(VARDIR)/locks"
-    privatedir="\${prefix}/private"
-    swatdir="\${prefix}/swat")
-
-#################################################
-# set private directory location
-AC_ARG_WITH(privatedir,
-[  --with-privatedir=DIR   Where to put smbpasswd ($ac_default_prefix/private)],
-[ case "$withval" in
-  yes|no)
-  #
-  # Just in case anybody calls it without argument
-  #
-    AC_MSG_WARN([--with-privatedir called without argument - will use default])
-  ;;
-  * )
-    privatedir="$withval"
-    ;;
-  esac])
-
-#################################################
-# set lock directory location
-AC_ARG_WITH(lockdir,
-[  --with-lockdir=DIR      Where to put lock files ($ac_default_prefix/var/locks)],
-[ case "$withval" in
-  yes|no)
-  #
-  # Just in case anybody calls it without argument
-  #
-    AC_MSG_WARN([--with-lockdir called without argument - will use default])
-  ;;
-  * )
-    lockdir="$withval"
-    ;;
-  esac])
-
-#################################################
-# set pid directory location
-AC_ARG_WITH(piddir,
-[  --with-piddir=DIR       Where to put pid files ($ac_default_prefix/var/locks)],
-[ case "$withval" in
-  yes|no)
-  #
-  # Just in case anybody calls it without argument
-  #
-    AC_MSG_WARN([--with-piddir called without argument - will use default])
-  ;;
-  * )
-    piddir="$withval"
-    ;;
-  esac])
-
-#################################################
-# set SWAT directory location
-AC_ARG_WITH(swatdir,
-[  --with-swatdir=DIR      Where to put SWAT files ($ac_default_prefix/swat)],
-[ case "$withval" in
-  yes|no)
-  #
-  # Just in case anybody does it
-  #
-    AC_MSG_WARN([--with-swatdir called without argument - will use default])
-  ;;
-  * )
-    swatdir="$withval"
-    ;;
-  esac])
-
-#################################################
-# set configuration directory location
-AC_ARG_WITH(configdir,
-[  --with-configdir=DIR    Where to put configuration files (\$libdir)],
-[ case "$withval" in
-  yes|no)
-  #
-  # Just in case anybody does it
-  #
-    AC_MSG_WARN([--with-configdir called without argument - will use default])
-  ;;
-  * )
-    configdir="$withval"
-    ;;
-  esac])
-
-#################################################
-# set codepage directory location
-AC_ARG_WITH(codepagedir,
-[  --with-codepagedir=DIR  Where to put codepage files (\$libdir/codepages)],
-[ case "$withval" in
-  yes|no)
-  #
-  # Just in case anybody does it
-  #
-    AC_MSG_WARN([--with-codepagedir called without argument - will use default])
-  ;;
-  * )
-    codepagedir="$withval"
-    ;;
-  esac])
-
-#################################################
-# set log directory location
-AC_ARG_WITH(logfilebase,
-[  --with-logfilebase=DIR  Where to put log files (\$(VARDIR))],
-[ case "$withval" in
-  yes|no)
-  #
-  # Just in case anybody does it
-  #
-    AC_MSG_WARN([--with-logfilebase called without argument - will use default])
-  ;;
-  * )
-    logfilebase="$withval"
-    ;;
-  esac])
-
-AC_SUBST(codepagedir)
-AC_SUBST(configdir)
-AC_SUBST(lockdir)
-AC_SUBST(piddir)
-AC_SUBST(logfilebase)
-AC_SUBST(privatedir)
-AC_SUBST(swatdir)
-AC_SUBST(bindir)
-AC_SUBST(sbindir)
-
-dnl Unique-to-Samba variables we'll be playing with.
-AC_SUBST(SHELL)
-AC_SUBST(RUNPROG)
-AC_SUBST(MPROGS)
-AC_SUBST(LDSHFLAGS)
-AC_SUBST(SONAMEFLAG)
-AC_SUBST(SHLD) 
-AC_SUBST(HOST_OS)
-AC_SUBST(PAM_MOD)
-AC_SUBST(PDBEDIT)
-AC_SUBST(WRAP)
-AC_SUBST(WRAP32)
-AC_SUBST(WRAPPROG)
-AC_SUBST(PICFLAG)
-AC_SUBST(PICSUFFIX)
-AC_SUBST(SHLIBEXT)
-AC_SUBST(BLDSHARED)
-AC_SUBST(INSTALLCLIENTCMD_SH)
-AC_SUBST(INSTALLCLIENTCMD_A)
-AC_SUBST(LIBSMBCLIENT_SHARED)
-AC_SUBST(LIBSMBCLIENT)
-
-# compile with optimization and without debugging by default
-CFLAGS="-O ${CFLAGS}"
-
-AC_ARG_ENABLE(debug, 
-[  --enable-debug          Turn on compiler debugging information (default=no)],
-    [if eval "test x$enable_debug = xyes"; then
-	CFLAGS="${CFLAGS} -g"
-    fi])
-
-
-
-dnl Checks for programs.
-AC_PROG_CC
-AC_PROG_INSTALL
-AC_PROG_AWK
-dnl Check if we use GNU ld
-LD=ld
-AC_PROG_LD_GNU
-AC_PATH_PROG(passwd_program, passwd, /bin/passwd)
-AC_SUBST(passwd_program)
-
-dnl Check if C compiler understands -c and -o at the same time
-AC_PROG_CC_C_O
-if eval "test \"`echo '$ac_cv_prog_cc_'${ac_cc}_c_o`\" = no"; then
-      BROKEN_CC=
-else
-      BROKEN_CC=#
-fi
-AC_SUBST(BROKEN_CC)
-
-dnl Check if the C compiler understands volatile (it should, being ANSI).
-AC_CACHE_CHECK([that the C compiler understands volatile],samba_cv_volatile, [
-    AC_TRY_COMPILE([#include <sys/types.h>],[volatile int i = 0],
-	samba_cv_volatile=yes,samba_cv_volatile=no)])
-if test x"$samba_cv_volatile" = x"yes"; then
-   AC_DEFINE(HAVE_VOLATILE)
-fi
-
-
-
-AC_CANONICAL_SYSTEM
-
-dnl Add #include for broken IRIX header files
-  case "$host_os" in
-	*irix6*) AC_ADD_INCLUDE(<standards.h>)
-	;;
-esac
-
-AC_VALIDATE_CACHE_SYSTEM_TYPE
-
-DYNEXP=
-
-#
-# Config CPPFLAG settings for strange OS's that must be set
-# before other tests.
-#
-case "$host_os" in
-# Try to work out if this is the native HPUX compiler that uses the -Ae flag.
-    *hpux*)
-      AC_PROG_CC_FLAG(Ae)
-      # mmap on HPUX is completely broken...
-      AC_DEFINE(MMAP_BLACKLIST)
-      if test $ac_cv_prog_cc_Ae = yes; then
-        CPPFLAGS="$CPPFLAGS -Ae"
-      fi
-#
-# Defines needed for HPUX support.
-# HPUX has bigcrypt but (sometimes?) doesn't use it for
-# password hashing - hence the USE_BOTH_CRYPT_CALLS define.
-#
-      case `uname -r` in
-			*9*|*10*)
-				CPPFLAGS="$CPPFLAGS -D_HPUX_SOURCE -D_POSIX_SOURCE -D_ALIGNMENT_REQUIRED=1 -D_MAX_ALIGNMENT=4 -DMAX_POSITIVE_LOCK_OFFSET=0x1ffffffffffLL"
-		   		AC_DEFINE(USE_BOTH_CRYPT_CALLS)
-				AC_DEFINE(_HPUX_SOURCE)
-				AC_DEFINE(_POSIX_SOURCE)
-				AC_DEFINE(_ALIGNMENT_REQUIRED,1)
-				AC_DEFINE(_MAX_ALIGNMENT,4)
-				;;
-			*11*)
-				CPPFLAGS="$CPPFLAGS -D_HPUX_SOURCE -D_POSIX_SOURCE -D_LARGEFILE64_SOURCE -D_ALIGNMENT_REQUIRED=1 -D_MAX_ALIGNMENT=4 -DMAX_POSITIVE_LOCK_OFFSET=0x1ffffffffffLL"
-				AC_DEFINE(_HPUX_SOURCE)
-				AC_DEFINE(_POSIX_SOURCE)
-				AC_DEFINE(_LARGEFILE64_SOURCE)
-				AC_DEFINE(_ALIGNMENT_REQUIRED,1)
-				AC_DEFINE(_MAX_ALIGNMENT,4)
-		   		AC_DEFINE(USE_BOTH_CRYPT_CALLS)
-				;;
-      esac
-      DYNEXP="-Wl,-E"
-      ;;
-
-
-#
-# CRAY Unicos has broken const handling
-	*unicos*)
-		AC_MSG_RESULT([disabling const])
-		CPPFLAGS="$CPPFLAGS -Dconst="
-		;;
-
-#
-# AIX4.x doesn't even admit to having large
-# files *at all* unless the -D_LARGE_FILE or -D_LARGE_FILE_API flags are set.
-#
-    *aix4*)
-	  AC_MSG_RESULT([enabling large file support])
-      CPPFLAGS="$CPPFLAGS -D_LARGE_FILES"
-      AC_DEFINE(_LARGE_FILES)
-      ;;    
-#
-# Defines needed for Solaris 2.6/2.7 aka 7.0 to make it admit
-# to the existance of large files..
-# Note that -D_LARGEFILE64_SOURCE is different from the Sun
-# recommendations on large file support, however it makes the
-# compile work using gcc 2.7 and 2.8, whereas using the Sun
-# recommendation makes the compile fail on gcc2.7. JRA.
-#
-	*solaris*)
-		case `uname -r` in
-			5.0*|5.1*|5.2*|5.3*|5.5*)
-	  			AC_MSG_RESULT([no large file support])
-				;;
-			5.*)
-			AC_MSG_RESULT([enabling large file support])
-			if test "$ac_cv_prog_gcc" = yes; then
-				${CC-cc} -v >conftest.c 2>&1
-				ac_cv_gcc_compiler_version_number=`grep 'gcc version' conftest.c`
-				rm -fr conftest.c
-				case "$ac_cv_gcc_compiler_version_number" in
-					*"gcc version 2.6"*|*"gcc version 2.7"*)
-						CPPFLAGS="$CPPFLAGS -D_LARGEFILE64_SOURCE"
-						AC_DEFINE(_LARGEFILE64_SOURCE)
-						;;
-					*)
-						CPPFLAGS="$CPPFLAGS -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64"
-						AC_DEFINE(_LARGEFILE64_SOURCE)
-						AC_DEFINE(_FILE_OFFSET_BITS,64)
-						;;
-				esac
-			else
-				CPPFLAGS="$CPPFLAGS -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64"
-				AC_DEFINE(_LARGEFILE64_SOURCE)
-				AC_DEFINE(_FILE_OFFSET_BITS,64)
-			fi
-			;;
-		esac
-		;;
-#
-# VOS may need to have POSIX support and System V compatibility enabled.
-#
-    *vos*)
-    case "$CPPFLAGS" in
-	  *-D_POSIX_C_SOURCE*)
-		;;
-	  *)
-		CPPFLAGS="$CPPFLAGS -D_POSIX_C_SOURCE=199506L"
-		AC_DEFINE(_POSIX_C_SOURCE, 199506L, [Whether to enable POSIX support])
-		;;
-    esac
-    case "$CPPFLAGS" in
-	  *-D_SYSV*|*-D_SVID_SOURCE*)
-		;;
-	  *)
-		CPPFLAGS="$CPPFLAGS -D_SYSV"
-		AC_DEFINE(_SYSV, 1, [Whether to enable System V compatibility])
-    esac
-    ;;
-#
-# Tests needed for SINIX large file support.
-#
-    *sysv4*)
-      if test $host = mips-sni-sysv4 ; then
-        AC_MSG_CHECKING([for LFS support])
-        old_CPPFLAGS="$CPPFLAGS"
-        CPPFLAGS="-D_LARGEFILE64_SOURCE $CPPFLAGS"
-        AC_TRY_RUN([
-#include <unistd.h>
-main () {
-#if _LFS64_LARGEFILE == 1
-exit(0);
-#else
-exit(1);
-#endif
-}], [SINIX_LFS_SUPPORT=yes], [SINIX_LFS_SUPPORT=no], [SINIX_LFS_SUPPORT=cross])
-        CPPFLAGS="$old_CPPFLAGS"
-        if test x$SINIX_LFS_SUPPORT = xyes ; then
-          CPPFLAGS="-D_LARGEFILE64_SOURCE $CPPFLAGS"
-          AC_DEFINE(_LARGEFILE64_SOURCE)
-          CFLAGS="`getconf LFS64_CFLAGS` $CFLAGS"
-          LDFLAGS="`getconf LFS64_LDFLAGS` $LDFLAGS"
-          LIBS="`getconf LFS64_LIBS` $LIBS"
-        fi
-      AC_MSG_RESULT([$SINIX_LFS_SUPPORT])
-      fi
-    ;;
-
-# Tests for linux LFS support. Need kernel 2.4 and glibc2.2 or greater support.
-#
-    *linux*)
-        AC_MSG_CHECKING([for LFS support])
-        old_CPPFLAGS="$CPPFLAGS"
-        CPPFLAGS="-D_LARGEFILE64_SOURCE -D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE $CPPFLAGS"
-       AC_TRY_RUN([
-#include <unistd.h>
-#include <sys/utsname.h>
-main() {
-#if _LFS64_LARGEFILE == 1
-       struct utsname uts;
-       char *release;
-       int major, minor;
-
-       /* Ensure this is glibc 2.2 or higher */
-#if defined(__GLIBC__) && defined(__GLIBC_MINOR__)
-       int libc_major = __GLIBC__;
-       int libc_minor = __GLIBC_MINOR__;
-
-       if (libc_major < 2)
-              exit(1);
-       if (libc_minor < 2)
-              exit(1);
-#endif
-
-       /* Ensure this is kernel 2.4 or higher */
-
-       uname(&uts);
-       release = uts.release;
-       major = atoi(strsep(&release, "."));
-       minor = atoi(strsep(&release, "."));
-
-       if (major > 2 || (major == 2 && minor > 3))
-               exit(0);
-       exit(1);
-#else
-       exit(1);
-#endif
-}
-], [LINUX_LFS_SUPPORT=yes], [LINUX_LFS_SUPPORT=no], [LINUX_LFS_SUPPORT=cross])
-        CPPFLAGS="$old_CPPFLAGS"
-        if test x$LINUX_LFS_SUPPORT = xyes ; then
-          CPPFLAGS="-D_LARGEFILE64_SOURCE -D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE $CPPFLAGS"
-          AC_DEFINE(_LARGEFILE64_SOURCE)
-          AC_DEFINE(_FILE_OFFSET_BITS,64)
-          AC_DEFINE(_GNU_SOURCE)
-        fi
-       AC_MSG_RESULT([$LINUX_LFS_SUPPORT])
-		;;
-
-    *hurd*)
-        AC_MSG_CHECKING([for LFS support])
-        old_CPPFLAGS="$CPPFLAGS"
-        CPPFLAGS="-D_LARGEFILE64_SOURCE -D_GNU_SOURCE $CPPFLAGS"
-        AC_TRY_RUN([
-#include <unistd.h>
-main () {
-#if _LFS64_LARGEFILE == 1
-exit(0);
-#else
-exit(1);
-#endif
-}], [GLIBC_LFS_SUPPORT=yes], [GLIBC_LFS_SUPPORT=no], [GLIBC_LFS_SUPPORT=cross])
-        CPPFLAGS="$old_CPPFLAGS"
-        if test x$GLIBC_LFS_SUPPORT = xyes ; then
-          CPPFLAGS="-D_LARGEFILE64_SOURCE -D_GNU_SOURCE $CPPFLAGS"
-          AC_DEFINE(_LARGEFILE64_SOURCE)
-          AC_DEFINE(_GNU_SOURCE)
-        fi
-      AC_MSG_RESULT([$GLIBC_LFS_SUPPORT])
-    ;;
-
-esac
-
-AC_INLINE
-AC_HEADER_STDC
-AC_HEADER_DIRENT
-AC_HEADER_TIME
-AC_HEADER_SYS_WAIT
-AC_CHECK_HEADERS(arpa/inet.h sys/fcntl.h sys/select.h fcntl.h sys/time.h sys/unistd.h)
-AC_CHECK_HEADERS(unistd.h utime.h grp.h sys/id.h limits.h memory.h net/if.h)
-AC_CHECK_HEADERS(compat.h rpc/rpc.h rpcsvc/nis.h rpcsvc/yp_prot.h rpcsvc/ypclnt.h)
-AC_CHECK_HEADERS(stdlib.h string.h strings.h syslog.h sys/file.h)
-AC_CHECK_HEADERS(sys/param.h ctype.h sys/wait.h sys/resource.h sys/ioctl.h sys/ipc.h sys/mode.h)
-AC_CHECK_HEADERS(sys/mman.h sys/filio.h sys/priv.h sys/shm.h sys/socket.h)
-AC_CHECK_HEADERS(syslog.h sys/syslog.h sys/mount.h sys/vfs.h sys/fs/s5param.h sys/filsys.h termios.h termio.h)
-AC_CHECK_HEADERS(sys/termio.h sys/statfs.h sys/dustat.h sys/statvfs.h stdarg.h sys/sockio.h)
-AC_CHECK_HEADERS(security/pam_modules.h security/_pam_macros.h dlfcn.h synch.h pthread.h nsswitch.h)
-
-#
-# HPUX has a bug in that including shadow.h causes a re-definition of MAXINT.
-# This causes configure to fail to detect it. Check for shadow separately on HPUX.
-#
-case "$host_os" in
-    *hpux*)
-		AC_TRY_COMPILE([#include <shadow.h>],[struct spwd testme],
-			ac_cv_header_shadow_h=yes,ac_cv_header_shadow_h=no)
-		if test x"$ac_cv_header_shadow_h" = x"yes"; then
-		   AC_DEFINE(HAVE_SHADOW_H)
-		fi
-	;;
-esac
-AC_CHECK_HEADERS(shadow.h netinet/ip.h netinet/tcp.h netinet/in_systm.h netinet/in_ip.h)
-AC_CHECK_HEADERS(nss.h nss_common.h ns_api.h sys/security.h security/pam_appl.h security/pam_modules.h)
-AC_CHECK_HEADERS(stropts.h poll.h)
-AC_CHECK_HEADERS(sys/capability.h syscall.h sys/syscall.h)
-AC_CHECK_HEADERS(sys/acl.h sys/cdefs.h glob.h)
-
-# For experimental utmp support (lastlog on some BSD-like systems)
-AC_CHECK_HEADERS(utmp.h utmpx.h lastlog.h)
- 
-# For quotas on Veritas VxFS filesystems
-AC_CHECK_HEADERS(sys/fs/vx_quota.h)
-
-# For quotas on Linux XFS filesystems
-AC_CHECK_HEADERS(linux/xqm.h)
-
-AC_CHECK_SIZEOF(int,cross)
-AC_CHECK_SIZEOF(long,cross)
-AC_CHECK_SIZEOF(short,cross)
-
-AC_C_CONST
-AC_C_INLINE
-AC_C_BIGENDIAN
-AC_C_CHAR_UNSIGNED
-
-AC_TYPE_SIGNAL
-AC_TYPE_UID_T
-AC_TYPE_MODE_T
-AC_TYPE_OFF_T
-AC_TYPE_SIZE_T
-AC_TYPE_PID_T
-AC_STRUCT_ST_RDEV
-AC_DIRENT_D_OFF
-AC_CHECK_TYPE(ino_t,unsigned)
-AC_CHECK_TYPE(loff_t,off_t)
-AC_CHECK_TYPE(offset_t,loff_t)
-AC_CHECK_TYPE(ssize_t, int)
-AC_CHECK_TYPE(wchar_t, unsigned short)
-
-############################################
-# for cups support we need libcups, and a handful of header files
-
-AC_ARG_ENABLE(cups,
-[  --enable-cups           Turn on CUPS support (default=auto)])
-
-if test x$enable_cups != xno; then
-	AC_PATH_PROG(CUPS_CONFIG, cups-config)
-
-        if test "x$CUPS_CONFIG" != x; then
-	        AC_DEFINE(HAVE_CUPS)
-		CFLAGS="$CFLAGS `$CUPS_CONFIG --cflags`"
-		LDFLAGS="$LDFLAGS `$CUPS_CONFIG --ldflags`"
-		LIBS="$LIBS `$CUPS_CONFIG --libs`"
-        fi
-fi
-
-############################################
-# we need dlopen/dlclose/dlsym/dlerror for PAM, the password database plugins and the new VFS code
-AC_CHECK_FUNCS(dlopen)
-if test x"$ac_cv_func_dlopen" = x"no"; then
-	AC_CHECK_LIB(dl, dlopen, [LIBS="$LIBS -ldl";
-	AC_DEFINE(HAVE_DLOPEN)])
-fi
-# dlopen/dlclose/dlsym/dlerror will be checked again later and defines will be set then
-
-############################################
-# check if the compiler can do immediate structures
-AC_CACHE_CHECK([for immediate structures],samba_cv_immediate_structures, [
-    AC_TRY_COMPILE([
-#include <stdio.h>],
-[
-	typedef struct {unsigned x;} FOOBAR;
-#define X_FOOBAR(x) ((FOOBAR) { x })
-#define FOO_ONE X_FOOBAR(1)
-	FOOBAR f = FOO_ONE;
-	static struct {
-	FOOBAR y;
-	} f2[] = {
-		{FOO_ONE}
-	};
-],
-	samba_cv_immediate_structures=yes,samba_cv_immediate_structures=no)])
-if test x"$samba_cv_immediate_structures" = x"yes"; then
-   AC_DEFINE(HAVE_IMMEDIATE_STRUCTURES)
-fi
-
-############################################
-# check for unix domain sockets
-AC_CACHE_CHECK([for unix domain sockets],samba_cv_unixsocket, [
-    AC_TRY_COMPILE([
-#include <sys/types.h>
-#include <stdlib.h>
-#include <stddef.h>
-#include <sys/socket.h>
-#include <sys/un.h>],
-[
-  struct sockaddr_un sunaddr; 
-  sunaddr.sun_family = AF_UNIX;
-],
-	samba_cv_unixsocket=yes,samba_cv_unixsocket=no)])
-if test x"$samba_cv_unixsocket" = x"yes"; then
-   AC_DEFINE(HAVE_UNIXSOCKET)
-fi
-
-AC_CACHE_CHECK([for socklen_t type],samba_cv_socklen_t, [
-    AC_TRY_COMPILE([
-#include <sys/types.h>
-#if STDC_HEADERS
-#include <stdlib.h>
-#include <stddef.h>
-#endif
-#include <sys/socket.h>],[socklen_t i = 0],
-    samba_cv_socklen_t=yes,samba_cv_socklen_t=no)])
-if test x"$samba_cv_socklen_t" = x"yes"; then
-   AC_DEFINE(HAVE_SOCKLEN_T_TYPE)
-fi
-
-AC_CACHE_CHECK([for sig_atomic_t type],samba_cv_sig_atomic_t, [
-    AC_TRY_COMPILE([
-#include <sys/types.h>
-#if STDC_HEADERS
-#include <stdlib.h>
-#include <stddef.h>
-#endif
-#include <signal.h>],[sig_atomic_t i = 0],
-	samba_cv_sig_atomic_t=yes,samba_cv_sig_atomic_t=no)])
-if test x"$samba_cv_sig_atomic_t" = x"yes"; then
-   AC_DEFINE(HAVE_SIG_ATOMIC_T_TYPE)
-fi
-
-# stupid headers have the functions but no declaration. grrrr.
-AC_HAVE_DECL(errno, [#include <errno.h>])
-AC_HAVE_DECL(setresuid, [#include <unistd.h>])
-AC_HAVE_DECL(setresgid, [#include <unistd.h>])
-AC_HAVE_DECL(asprintf, [#include <stdio.h>])
-AC_HAVE_DECL(vasprintf, [#include <stdio.h>])
-AC_HAVE_DECL(vsnprintf, [#include <stdio.h>])
-AC_HAVE_DECL(snprintf, [#include <stdio.h>])
-
-# and glibc has setresuid under linux but the function does
-# nothing until kernel 2.1.44! very dumb.
-AC_CACHE_CHECK([for real setresuid],samba_cv_have_setresuid,[
-    AC_TRY_RUN([#include <errno.h>
-main() { setresuid(1,1,1); setresuid(2,2,2); exit(errno==EPERM?0:1);}],
-	samba_cv_have_setresuid=yes,samba_cv_have_setresuid=no,samba_cv_have_setresuid=cross)])
-if test x"$samba_cv_have_setresuid" = x"yes"; then
-    AC_DEFINE(HAVE_SETRESUID)
-fi
-
-# Do the same check for setresguid...
-#
-AC_CACHE_CHECK([for real setresgid],samba_cv_have_setresgid,[
-    AC_TRY_RUN([#include <unistd.h>
-#include <errno.h>
-main() { errno = 0; setresgid(1,1,1); exit(errno != 0 ? (errno==EPERM ? 0 : 1) : 0);}],
-	samba_cv_have_setresgid=yes,samba_cv_have_setresgid=no,samba_cv_have_setresgid=cross)])
-if test x"$samba_cv_have_setresgid" = x"yes"; then
-    AC_DEFINE(HAVE_SETRESGID)
-fi
-
-AC_FUNC_MEMCMP
-
-###############################################
-# Readline included by default unless explicitly asked not to
-test "${with_readline+set}" != "set" && with_readline=yes
-
-# test for where we get readline() from
-AC_MSG_CHECKING(whether to use readline)
-AC_ARG_WITH(readline,
-[  --with-readline[=DIR]   Look for readline include/libs in DIR (default=auto)],
-[  case "$with_readline" in
-  yes)
-    AC_MSG_RESULT(yes)
-
-    AC_CHECK_HEADERS(readline.h history.h readline/readline.h)
-    AC_CHECK_HEADERS(readline/history.h)
-
-    AC_CHECK_HEADERS(readline.h readline/readline.h,[
-      for termlib in ncurses curses termcap terminfo termlib; do
-       AC_CHECK_LIB(${termlib}, tgetent, [TERMLIBS="-l${termlib}"; break])
-      done
-      AC_CHECK_LIB(readline, rl_callback_handler_install,
-       [TERMLIBS="-lreadline $TERMLIBS"
-       AC_DEFINE(HAVE_LIBREADLINE)
-       break], [TERMLIBS=], $TERMLIBS)])
-    ;;
-  no)
-    AC_MSG_RESULT(no)
-    ;;
-  *)
-    AC_MSG_RESULT(yes)
-
-    # Needed for AC_CHECK_HEADERS and AC_CHECK_LIB to look at
-    # alternate readline path
-    _ldflags=${LDFLAGS}
-    _cppflags=${CPPFLAGS}
-
-    # Add additional search path
-    LDFLAGS="-L$with_readline/lib $LDFLAGS"
-    CPPFLAGS="-I$with_readline/include $CPPFLAGS"
-
-    AC_CHECK_HEADERS(readline.h history.h readline/readline.h)
-    AC_CHECK_HEADERS(readline/history.h)
-
-    AC_CHECK_HEADERS(readline.h readline/readline.h,[
-      for termlib in ncurses curses termcap terminfo termlib; do
-       AC_CHECK_LIB(${termlib}, tgetent, [TERMLIBS="-l${termlib}"; break])
-      done
-      AC_CHECK_LIB(readline, rl_callback_handler_install,
-       [TERMLDFLAGS="-L$with_readline/lib"
-       TERMCPPFLAGS="-I$with_readline/include"
-       CPPFLAGS="-I$with_readline/include $CPPFLAGS"
-       TERMLIBS="-lreadline $TERMLIBS"
-       AC_DEFINE(HAVE_LIBREADLINE)
-       break], [TERMLIBS= CPPFLAGS=$_cppflags], $TERMLIBS)])
-
-    LDFLAGS=$_ldflags
-    ;;
-  esac],
-  AC_MSG_RESULT(no)
-)
-AC_SUBST(TERMLIBS)
-AC_SUBST(TERMLDFLAGS)
-
-# The following test taken from the cvs sources
-# If we can't find connect, try looking in -lsocket, -lnsl, and -linet.
-# The Irix 5 libc.so has connect and gethostbyname, but Irix 5 also has
-# libsocket.so which has a bad implementation of gethostbyname (it
-# only looks in /etc/hosts), so we only look for -lsocket if we need
-# it.
-AC_CHECK_FUNCS(connect)
-if test x"$ac_cv_func_connect" = x"no"; then
-    case "$LIBS" in
-    *-lnsl*) ;;
-    *) AC_CHECK_LIB(nsl_s, printf) ;;
-    esac
-    case "$LIBS" in
-    *-lnsl*) ;;
-    *) AC_CHECK_LIB(nsl, printf) ;;
-    esac
-    case "$LIBS" in
-    *-lsocket*) ;;
-    *) AC_CHECK_LIB(socket, connect) ;;
-    esac
-    case "$LIBS" in
-    *-linet*) ;;
-    *) AC_CHECK_LIB(inet, connect) ;;
-    esac
-    dnl We can't just call AC_CHECK_FUNCS(connect) here, because the value
-    dnl has been cached.
-    if test x"$ac_cv_lib_socket_connect" = x"yes" || 
-       test x"$ac_cv_lib_inet_connect" = x"yes"; then
-        # ac_cv_func_connect=yes
-        # don't!  it would cause AC_CHECK_FUNC to succeed next time configure is run
-        AC_DEFINE(HAVE_CONNECT)
-    fi
-fi
-
-###############################################
-# test for where we get get_yp_default_domain() from
-AC_CHECK_FUNCS(yp_get_default_domain)
-if test x"$ac_cv_func_yp_get_default_domain" = x"no"; then
-	AC_CHECK_LIB(nsl, yp_get_default_domain, [LIBS="$LIBS -lnsl";
-	AC_DEFINE(HAVE_YP_GET_DEFAULT_DOMAIN)]) 
-fi
-
-# Check if we have execl, if not we need to compile smbrun.
-AC_CHECK_FUNCS(execl)
-if test x"$ac_cv_func_execl" = x"no"; then
-    RUNPROG="bin/smbrun"
-else
-    RUNPROG=""
-fi
-
-AC_CHECK_FUNCS(dlopen dlclose dlsym dlerror waitpid getcwd strdup strndup strnlen strtoul strerror chown fchown chmod fchmod chroot link)
-AC_CHECK_FUNCS(fstat strchr utime utimes getrlimit fsync bzero memset strlcpy strlcat setpgid mknod mknod64)
-AC_CHECK_FUNCS(memmove vsnprintf snprintf asprintf vasprintf setsid glob strpbrk pipe crypt16 getauthuid)
-AC_CHECK_FUNCS(strftime sigprocmask sigblock sigaction sigset innetgr setnetgrent getnetgrent endnetgrent)
-AC_CHECK_FUNCS(initgroups select poll rdchk getgrnam getgrent pathconf realpath)
-AC_CHECK_FUNCS(setpriv setgidx setuidx setgroups sysconf mktime rename ftruncate stat64 fstat64)
-AC_CHECK_FUNCS(lstat64 fopen64 atexit grantpt dup2 lseek64 ftruncate64 readdir64)
-AC_CHECK_FUNCS(fseek64 fseeko64 ftell64 ftello64 setluid getpwanam setlinebuf)
-AC_CHECK_FUNCS(srandom random srand rand setenv usleep strcasecmp fcvt fcvtl symlink readlink)
-AC_CHECK_FUNCS(syslog vsyslog)
-
-# syscall() is needed for smbwrapper.
-AC_CHECK_FUNCS(syscall)
-
-AC_CHECK_FUNCS(_dup _dup2 _opendir _readdir _seekdir _telldir _closedir)
-AC_CHECK_FUNCS(__dup __dup2 __opendir __readdir __seekdir __telldir __closedir)
-AC_CHECK_FUNCS(__getcwd _getcwd)
-AC_CHECK_FUNCS(__xstat __fxstat __lxstat)
-AC_CHECK_FUNCS(_stat _lstat _fstat __stat __lstat __fstat)
-AC_CHECK_FUNCS(_acl __acl _facl __facl _open __open _chdir __chdir)
-AC_CHECK_FUNCS(_close __close _fchdir __fchdir _fcntl __fcntl)
-AC_CHECK_FUNCS(getdents _getdents __getdents _lseek __lseek _read __read)
-AC_CHECK_FUNCS(_write __write _fork __fork)
-AC_CHECK_FUNCS(_stat64 __stat64 _fstat64 __fstat64 _lstat64 __lstat64)
-AC_CHECK_FUNCS(__sys_llseek llseek _llseek __llseek readdir64 _readdir64 __readdir64)
-AC_CHECK_FUNCS(pread _pread __pread pread64 _pread64 __pread64)
-AC_CHECK_FUNCS(pwrite _pwrite __pwrite pwrite64 _pwrite64 __pwrite64)
-AC_CHECK_FUNCS(open64 _open64 __open64 creat64)
-
-#
-# stat64 family may need <sys/stat.h> on some systems, notably ReliantUNIX
-#
-
-if test x$ac_cv_func_stat64 = xno ; then
-  AC_MSG_CHECKING([for stat64 in <sys/stat.h>])
-  AC_TRY_LINK([
-#if defined(HAVE_UNISTD_H)
-#include <unistd.h>
-#endif
-#include <sys/stat.h>
-], [struct stat64 st64; exit(stat64(".",&st64));], [ac_cv_func_stat64=yes])
-  AC_MSG_RESULT([$ac_cv_func_stat64])
-  if test x$ac_cv_func_stat64 = xyes ; then
-    AC_DEFINE(HAVE_STAT64)
-  fi
-fi
-
-if test x$ac_cv_func_lstat64 = xno ; then
-  AC_MSG_CHECKING([for lstat64 in <sys/stat.h>])
-  AC_TRY_LINK([
-#if defined(HAVE_UNISTD_H)
-#include <unistd.h>
-#endif
-#include <sys/stat.h>
-], [struct stat64 st64; exit(lstat64(".",&st64));], [ac_cv_func_lstat64=yes])
-  AC_MSG_RESULT([$ac_cv_func_lstat64])
-  if test x$ac_cv_func_lstat64 = xyes ; then
-    AC_DEFINE(HAVE_LSTAT64)
-  fi
-fi
-
-if test x$ac_cv_func_fstat64 = xno ; then
-  AC_MSG_CHECKING([for fstat64 in <sys/stat.h>])
-  AC_TRY_LINK([
-#if defined(HAVE_UNISTD_H)
-#include <unistd.h>
-#endif
-#include <sys/stat.h>
-], [struct stat64 st64; exit(fstat64(0,&st64));], [ac_cv_func_fstat64=yes])
-  AC_MSG_RESULT([$ac_cv_func_fstat64])
-  if test x$ac_cv_func_fstat64 = xyes ; then
-    AC_DEFINE(HAVE_FSTAT64)
-  fi
-fi
-
-#
-# If no strcasecmp, check for it in some known places
-# It is in -lresolv on ReliantUNIX and UnixWare
-#   -lresolve *must* follow -lnsl for name resolution to work properly
-#
-
-if test x$ac_cv_func_strcasecmp = xno ; then
-	AC_CHECK_LIB(resolv,strcasecmp,[LIBS="$LIBS -lresolv"]
-		AC_DEFINE(HAVE_STRCASECMP))
-fi
-
-#
-# Check for the functions putprpwnam, set_auth_parameters,
-# getspnam, bigcrypt and getprpwnam in -lsec and -lsecurity
-# Needed for OSF1 and HPUX.
-#
-
-AC_LIBTESTFUNC(security, putprpwnam)
-AC_LIBTESTFUNC(sec, putprpwnam)
-
-AC_LIBTESTFUNC(security, set_auth_parameters)
-AC_LIBTESTFUNC(sec, set_auth_parameters)
-
-# UnixWare 7.x has its getspnam in -lgen
-AC_LIBTESTFUNC(gen, getspnam)
-
-AC_LIBTESTFUNC(security, getspnam)
-AC_LIBTESTFUNC(sec, getspnam)
-
-AC_LIBTESTFUNC(security, bigcrypt)
-AC_LIBTESTFUNC(sec, bigcrypt)
-
-AC_LIBTESTFUNC(security, getprpwnam)
-AC_LIBTESTFUNC(sec, getprpwnam)
-
-# this bit needs to be modified for each OS that is suported by
-# smbwrapper. You need to specify how to created a shared library and
-# how to compile C code to produce PIC object files
-
-# these are the defaults, good for lots of systems
-HOST_OS="$host_os"
-LDSHFLAGS="-shared"
-SONAMEFLAG="#"
-SHLD="\${CC}" 
-PICFLAG=""
-PICSUFFIX="po.o"
-SHLIBEXT="so"
-# Assume non-shared by default and override below
-BLDSHARED="false" 
-AC_MSG_CHECKING([ability to build shared libraries])
-
-# and these are for particular systems
-case "$host_os" in
-		*linux*)   AC_DEFINE(LINUX)
-			BLDSHARED="true"
-			LDSHFLAGS="-shared"
-			DYNEXP="-Wl,--export-dynamic"
-			PICFLAG="-fPIC"
-			SONAMEFLAG="-Wl,-soname="
-			AC_DEFINE(STAT_ST_BLOCKSIZE,512)
-			;;
-		*solaris*) AC_DEFINE(SUNOS5)
-			BLDSHARED="true"
-			LDSHFLAGS="-G"
-			SONAMEFLAG="-h "
-			if test "${GCC}" = "yes"; then
-				PICFLAG="-fPIC"
-				if test "${ac_cv_prog_gnu_ld}" = "yes"; then
-					DYNEXP="-Wl,-E"
-				fi
-			else
-				PICFLAG="-KPIC"
-				## ${CFLAGS} added for building 64-bit shared 
-				## libs using Sun's Compiler
-				LDSHFLAGS="-G \${CFLAGS}"
-				POBAD_CC=""
-				PICSUFFIX="po.o"
-			fi
-			AC_DEFINE(STAT_ST_BLOCKSIZE,512)
-		;;
-		*sunos*) AC_DEFINE(SUNOS4)
-			BLDSHARED="true"
-			LDSHFLAGS="-G"
-			SONAMEFLAG="-Wl,-h,"
-			PICFLAG="-KPIC"   # Is this correct for SunOS
-			AC_DEFINE(STAT_ST_BLOCKSIZE,512)
-		;;
-		*freebsd*)  BLDSHARED="true"
-			LDSHFLAGS="-shared"
-			DYNEXP="-Wl,--export-dynamic"
-			SONAMEFLAG="-Wl,-soname,"
-			PICFLAG="-fPIC -DPIC"
-			AC_DEFINE(STAT_ST_BLOCKSIZE,512)
-		;;
-		*openbsd*)  BLDSHARED="true"
-			LDSHFLAGS="-shared"
-			DYNEXP="-Wl,-Bdynamic"
-			SONAMEFLAG="-Wl,-soname,"
-			PICFLAG="-fPIC"
-			AC_DEFINE(STAT_ST_BLOCKSIZE,512)
-		;;
-		*irix*) AC_DEFINE(IRIX)
-			case "$host_os" in
-			*irix6*) AC_DEFINE(IRIX6)
-			;;
-			esac
-			ATTEMPT_WRAP32_BUILD=yes
-			BLDSHARED="true"
-			LDSHFLAGS="-set_version sgi1.0 -shared"
-			SONAMEFLAG="-soname "
-			SHLD="\${LD}" 
-			if test "${GCC}" = "yes"; then
-				PICFLAG="-fPIC"
-			else 
-				PICFLAG="-KPIC"
-			fi
-			AC_DEFINE(STAT_ST_BLOCKSIZE,512)
-		;;
-		*aix*) AC_DEFINE(AIX)
-			BLDSHARED="true"
-			LDSHFLAGS="-Wl,-bexpall,-bM:SRE,-bnoentry"
-			DYNEXP="-Wl,-brtl,-bexpall"
-			PICFLAG="-O2"
-			if test "${GCC}" != "yes"; then
-				## for funky AIX compiler using strncpy()
-				CFLAGS="$CFLAGS -D_LINUX_SOURCE_COMPAT -qmaxmem=32000"
-			fi
-
-			AC_DEFINE(STAT_ST_BLOCKSIZE,DEV_BSIZE)
-		;;
-		*hpux*) AC_DEFINE(HPUX)
-			SHLIBEXT="sl"
-			# Use special PIC flags for the native HP-UX compiler.
-			if test $ac_cv_prog_cc_Ae = yes; then
-				BLDSHARED="true"
-				SHLD="/usr/bin/ld"
-				LDSHFLAGS="-B symbolic -b -z"
-				SONAMEFLAG="+h "
-				PICFLAG="+z"
-			fi
-			DYNEXP="-Wl,-E"
-			AC_DEFINE(STAT_ST_BLOCKSIZE,8192)
-			;;
-		*qnx*) AC_DEFINE(QNX)
-			AC_DEFINE(STAT_ST_BLOCKSIZE,512)
-			;;
-		*osf*) AC_DEFINE(OSF1)
-			BLDSHARED="true"
-			LDSHFLAGS="-shared"
-			SONAMEFLAG="-Wl,-soname,"
-			PICFLAG="-fPIC"
-			AC_DEFINE(STAT_ST_BLOCKSIZE,512)
-		;;
-		*sco*) AC_DEFINE(SCO)
-			AC_DEFINE(STAT_ST_BLOCKSIZE,512)
-			;;
-		*unixware*) AC_DEFINE(UNIXWARE)
-			BLDSHARED="true"
-			LDSHFLAGS="-shared"
-			SONAMEFLAG="-Wl,-soname,"
-			PICFLAG="-KPIC"
-			AC_DEFINE(STAT_ST_BLOCKSIZE,512)
-		;;
-		*next2*) AC_DEFINE(NEXT2)
-			AC_DEFINE(STAT_ST_BLOCKSIZE,512)
-			;;
-		*dgux*) AC_CHECK_PROG( ROFF, groff, [groff -etpsR -Tascii -man])
-			AC_DEFINE(STAT_ST_BLOCKSIZE,512)
-			;;
-		*sysv4*)
-			case "$host" in
-				*-univel-*)     if [ test "$GCC" != yes ]; then
-									AC_DEFINE(HAVE_MEMSET)
-								fi
-								LDSHFLAGS="-G"
-								DYNEXP="-Bexport"
-				;;
-				*mips-sni-sysv4*) AC_DEFINE(RELIANTUNIX);;
-			esac
-			AC_DEFINE(STAT_ST_BLOCKSIZE,512)
-			;;
-		*sysv5*)
-			if [ test "$GCC" != yes ]; then
-				AC_DEFINE(HAVE_MEMSET)
-			fi
-			LDSHFLAGS="-G"
-			AC_DEFINE(STAT_ST_BLOCKSIZE,512)
-			;;
-		*vos*) AC_DEFINE(STAT_ST_BLOCKSIZE,4096)
-			BLDSHARED="false"
-			LDSHFLAGS=""
-			;;
-		*)
-			AC_DEFINE(STAT_ST_BLOCKSIZE,512)
-			;;
-esac
-AC_SUBST(DYNEXP)
-AC_MSG_RESULT($BLDSHARED)
-AC_MSG_CHECKING([linker flags for shared libraries])
-AC_MSG_RESULT([$LDSHFLAGS])
-AC_MSG_CHECKING([compiler flags for position-independent code])
-AC_MSG_RESULT([$PICFLAGS])
-
-# try to work out how to produce pic code with this compiler
-if test x$PICFLAG = x; then
-  AC_PROG_CC_FLAG(fpic)
-  if test $ac_cv_prog_cc_fpic = yes; then
-      PICFLAG="-fpic";
-  fi
-fi
-if test x$PICFLAG = x; then
-  AC_PROG_CC_FLAG(KPIC)
-  if test $ac_cv_prog_cc_KPIC = yes; then
-    PICFLAG="-KPIC";
-  fi
-fi
-if test x$PICFLAG = x; then
-  AC_PROG_CC_FLAG(Kpic)
-  if test $ac_cv_prog_cc_Kpic = yes; then
-    PICFLAG="-Kpic";
-  fi
-fi
-
-################
-
-AC_CACHE_CHECK([for long long],samba_cv_have_longlong,[
-AC_TRY_RUN([#include <stdio.h>
-main() { long long x = 1000000; x *= x; exit(((x/1000000) == 1000000)? 0: 1); }],
-samba_cv_have_longlong=yes,samba_cv_have_longlong=no,samba_cv_have_longlong=cross)])
-if test x"$samba_cv_have_longlong" = x"yes"; then
-    AC_DEFINE(HAVE_LONGLONG)
-fi
-
-#
-# Check if the compiler supports the LL prefix on long long integers.
-# AIX needs this.
-
-AC_CACHE_CHECK([for LL suffix on long long integers],samba_cv_compiler_supports_ll, [
-    AC_TRY_COMPILE([#include <stdio.h>],[long long i = 0x8000000000LL],
-	samba_cv_compiler_supports_ll=yes,samba_cv_compiler_supports_ll=no)])
-if test x"$samba_cv_compiler_supports_ll" = x"yes"; then
-   AC_DEFINE(COMPILER_SUPPORTS_LL)
-fi
-
-  
-AC_CACHE_CHECK([for 64 bit off_t],samba_cv_SIZEOF_OFF_T,[
-AC_TRY_RUN([#include <stdio.h>
-#include <sys/stat.h>
-main() { exit((sizeof(off_t) == 8) ? 0 : 1); }],
-samba_cv_SIZEOF_OFF_T=yes,samba_cv_SIZEOF_OFF_T=no,samba_cv_SIZEOF_OFF_T=cross)])
-if test x"$samba_cv_SIZEOF_OFF_T" = x"yes"; then
-    AC_DEFINE(SIZEOF_OFF_T,8)
-fi
-
-AC_CACHE_CHECK([for off64_t],samba_cv_HAVE_OFF64_T,[
-AC_TRY_RUN([
-#if defined(HAVE_UNISTD_H)
-#include <unistd.h>
-#endif
-#include <stdio.h>
-#include <sys/stat.h>
-main() { struct stat64 st; off64_t s; if (sizeof(off_t) == sizeof(off64_t)) exit(1); exit((lstat64("/dev/null", &st)==0)?0:1); }],
-samba_cv_HAVE_OFF64_T=yes,samba_cv_HAVE_OFF64_T=no,samba_cv_HAVE_OFF64_T=cross)])
-if test x"$samba_cv_HAVE_OFF64_T" = x"yes"; then
-    AC_DEFINE(HAVE_OFF64_T)
-fi
-
-AC_CACHE_CHECK([for 64 bit ino_t],samba_cv_SIZEOF_INO_T,[
-AC_TRY_RUN([#include <stdio.h>
-#include <sys/stat.h>
-main() { exit((sizeof(ino_t) == 8) ? 0 : 1); }],
-samba_cv_SIZEOF_INO_T=yes,samba_cv_SIZEOF_INO_T=no,samba_cv_SIZEOF_INO_T=cross)])
-if test x"$samba_cv_SIZEOF_INO_T" = x"yes"; then
-    AC_DEFINE(SIZEOF_INO_T,8)
-fi
-
-AC_CACHE_CHECK([for ino64_t],samba_cv_HAVE_INO64_T,[
-AC_TRY_RUN([
-#if defined(HAVE_UNISTD_H)
-#include <unistd.h>
-#endif
-#include <stdio.h>
-#include <sys/stat.h>
-main() { struct stat64 st; ino64_t s; if (sizeof(ino_t) == sizeof(ino64_t)) exit(1); exit((lstat64("/dev/null", &st)==0)?0:1); }],
-samba_cv_HAVE_INO64_T=yes,samba_cv_HAVE_INO64_T=no,samba_cv_HAVE_INO64_T=cross)])
-if test x"$samba_cv_HAVE_INO64_T" = x"yes"; then
-    AC_DEFINE(HAVE_INO64_T)
-fi
-
-AC_CACHE_CHECK([for dev64_t],samba_cv_HAVE_DEV64_T,[
-AC_TRY_RUN([
-#if defined(HAVE_UNISTD_H)
-#include <unistd.h>
-#endif
-#include <stdio.h>
-#include <sys/stat.h>
-main() { struct stat64 st; dev64_t s; if (sizeof(dev_t) == sizeof(dev64_t)) exit(1); exit((lstat64("/dev/null", &st)==0)?0:1); }],
-samba_cv_HAVE_DEV64_T=yes,samba_cv_HAVE_DEV64_T=no,samba_cv_HAVE_DEV64_T=cross)])
-if test x"$samba_cv_HAVE_DEV64_T" = x"yes"; then
-    AC_DEFINE(HAVE_DEV64_T)
-fi
-
-AC_CACHE_CHECK([for struct dirent64],samba_cv_HAVE_STRUCT_DIRENT64,[
-AC_TRY_COMPILE([
-#if defined(HAVE_UNISTD_H)
-#include <unistd.h>
-#endif
-#include <sys/types.h>
-#include <dirent.h>],
-[struct dirent64 de;],
-samba_cv_HAVE_STRUCT_DIRENT64=yes,samba_cv_HAVE_STRUCT_DIRENT64=no)])
-if test x"$samba_cv_HAVE_STRUCT_DIRENT64" = x"yes" && test x"$ac_cv_func_readdir64" = x"yes"; then
-    AC_DEFINE(HAVE_STRUCT_DIRENT64)
-fi
-
-AC_CACHE_CHECK([for major macro],samba_cv_HAVE_DEVICE_MAJOR_FN,[
-AC_TRY_RUN([
-#if defined(HAVE_UNISTD_H)
-#include <unistd.h>
-#endif
-#include <sys/types.h>
-main() { dev_t dev; int i = major(dev); return 0; }],
-samba_cv_HAVE_DEVICE_MAJOR_FN=yes,samba_cv_HAVE_DEVICE_MAJOR_FN=no,samba_cv_HAVE_DEVICE_MAJOR_FN=cross)])
-if test x"$samba_cv_HAVE_DEVICE_MAJOR_FN" = x"yes"; then
-    AC_DEFINE(HAVE_DEVICE_MAJOR_FN)
-fi
-
-AC_CACHE_CHECK([for minor macro],samba_cv_HAVE_DEVICE_MINOR_FN,[
-AC_TRY_RUN([
-#if defined(HAVE_UNISTD_H)
-#include <unistd.h>
-#endif
-#include <sys/types.h>
-main() { dev_t dev; int i = minor(dev); return 0; }],
-samba_cv_HAVE_DEVICE_MINOR_FN=yes,samba_cv_HAVE_DEVICE_MINOR_FN=no,samba_cv_HAVE_DEVICE_MINOR_FN=cross)])
-if test x"$samba_cv_HAVE_DEVICE_MINOR_FN" = x"yes"; then
-    AC_DEFINE(HAVE_DEVICE_MINOR_FN)
-fi
-
-AC_CACHE_CHECK([for makedev macro],samba_cv_HAVE_MAKEDEV_FN,[
-AC_TRY_RUN([
-#if defined(HAVE_UNISTD_H)
-#include <unistd.h>
-#endif
-#include <sys/types.h>
-main() { dev_t dev = makedev(1,2); return 0; }],
-samba_cv_HAVE_MAKEDEV_FN=yes,samba_cv_HAVE_MAKEDEV_FN=no,samba_cv_HAVE_MAKEDEV_FN=cross)])
-if test x"$samba_cv_HAVE_MAKEDEV_FN" = x"yes"; then
-    AC_DEFINE(MAKEDEV_FN)
-fi
-
-AC_CACHE_CHECK([for unsigned char],samba_cv_HAVE_UNSIGNED_CHAR,[
-AC_TRY_RUN([#include <stdio.h>
-main() { char c; c=250; exit((c > 0)?0:1); }],
-samba_cv_HAVE_UNSIGNED_CHAR=yes,samba_cv_HAVE_UNSIGNED_CHAR=no,samba_cv_HAVE_UNSIGNED_CHAR=cross)])
-if test x"$samba_cv_HAVE_UNSIGNED_CHAR" = x"yes"; then
-    AC_DEFINE(HAVE_UNSIGNED_CHAR)
-fi
-
-AC_CACHE_CHECK([for sin_len in sock],samba_cv_HAVE_SOCK_SIN_LEN,[
-AC_TRY_COMPILE([#include <sys/types.h>
-#include <sys/socket.h>
-#include <netinet/in.h>],
-[struct sockaddr_in sock; sock.sin_len = sizeof(sock);],
-samba_cv_HAVE_SOCK_SIN_LEN=yes,samba_cv_HAVE_SOCK_SIN_LEN=no)])
-if test x"$samba_cv_HAVE_SOCK_SIN_LEN" = x"yes"; then
-    AC_DEFINE(HAVE_SOCK_SIN_LEN)
-fi
-
-AC_CACHE_CHECK([whether seekdir returns void],samba_cv_SEEKDIR_RETURNS_VOID,[
-AC_TRY_COMPILE([#include <sys/types.h>
-#include <dirent.h>
-void seekdir(DIR *d, long loc) { return; }],[return 0;],
-samba_cv_SEEKDIR_RETURNS_VOID=yes,samba_cv_SEEKDIR_RETURNS_VOID=no)])
-if test x"$samba_cv_SEEKDIR_RETURNS_VOID" = x"yes"; then
-    AC_DEFINE(SEEKDIR_RETURNS_VOID)
-fi
-
-AC_CACHE_CHECK([for __FILE__ macro],samba_cv_HAVE_FILE_MACRO,[
-AC_TRY_COMPILE([#include <stdio.h>], [printf("%s\n", __FILE__);],
-samba_cv_HAVE_FILE_MACRO=yes,samba_cv_HAVE_FILE_MACRO=no)])
-if test x"$samba_cv_HAVE_FILE_MACRO" = x"yes"; then
-    AC_DEFINE(HAVE_FILE_MACRO)
-fi
-
-AC_CACHE_CHECK([for __FUNCTION__ macro],samba_cv_HAVE_FUNCTION_MACRO,[
-AC_TRY_COMPILE([#include <stdio.h>], [printf("%s\n", __FUNCTION__);],
-samba_cv_HAVE_FUNCTION_MACRO=yes,samba_cv_HAVE_FUNCTION_MACRO=no)])
-if test x"$samba_cv_HAVE_FUNCTION_MACRO" = x"yes"; then
-    AC_DEFINE(HAVE_FUNCTION_MACRO)
-fi
-
-AC_CACHE_CHECK([if gettimeofday takes tz argument],samba_cv_HAVE_GETTIMEOFDAY_TZ,[
-AC_TRY_RUN([
-#include <sys/time.h>
-#include <unistd.h>
-main() { struct timeval tv; exit(gettimeofday(&tv, NULL));}],
-           samba_cv_HAVE_GETTIMEOFDAY_TZ=yes,samba_cv_HAVE_GETTIMEOFDAY_TZ=no,samba_cv_HAVE_GETTIMEOFDAY_TZ=cross)])
-if test x"$samba_cv_HAVE_GETTIMEOFDAY_TZ" = x"yes"; then
-    AC_DEFINE(HAVE_GETTIMEOFDAY_TZ)
-fi
-
-AC_CACHE_CHECK([for __va_copy],samba_cv_HAVE_VA_COPY,[
-AC_TRY_LINK([#include <stdarg.h>
-va_list ap1,ap2;], [__va_copy(ap1,ap2);],
-samba_cv_HAVE_VA_COPY=yes,samba_cv_HAVE_VA_COPY=no)])
-if test x"$samba_cv_HAVE_VA_COPY" = x"yes"; then
-    AC_DEFINE(HAVE_VA_COPY)
-fi
-
-AC_CACHE_CHECK([for C99 vsnprintf],samba_cv_HAVE_C99_VSNPRINTF,[
-AC_TRY_RUN([
-#include <sys/types.h>
-#include <stdarg.h>
-void foo(const char *format, ...) {
-	va_list ap;
-	int len;
-	char buf[5];
-
-	va_start(ap, format);
-	len = vsnprintf(buf, 0, format, ap);
-	va_end(ap);
-	if (len != 5) exit(1);
-
-	va_start(ap, format);
-	len = vsnprintf(0, 0, format, ap);
-	va_end(ap);
-	if (len != 5) exit(1);
-
-	if (snprintf(buf, 3, "hello") != 5 || strcmp(buf, "he") != 0) exit(1);
-
-	exit(0);
-}
-main() { foo("hello"); }
-],
-samba_cv_HAVE_C99_VSNPRINTF=yes,samba_cv_HAVE_C99_VSNPRINTF=no,samba_cv_HAVE_C99_VSNPRINTF=cross)])
-if test x"$samba_cv_HAVE_C99_VSNPRINTF" = x"yes"; then
-	AC_DEFINE(HAVE_C99_VSNPRINTF)
-fi
-
-AC_CACHE_CHECK([for broken readdir],samba_cv_HAVE_BROKEN_READDIR,[
-AC_TRY_RUN([#include <sys/types.h>
-#include <dirent.h>
-main() { struct dirent *di; DIR *d = opendir("."); di = readdir(d);
-if (di && di->d_name[-2] == '.' && di->d_name[-1] == 0 &&
-di->d_name[0] == 0) exit(0); exit(1);} ],
-samba_cv_HAVE_BROKEN_READDIR=yes,samba_cv_HAVE_BROKEN_READDIR=no,samba_cv_HAVE_BROKEN_READDIR=cross)])
-if test x"$samba_cv_HAVE_BROKEN_READDIR" = x"yes"; then
-    AC_DEFINE(HAVE_BROKEN_READDIR)
-fi
-
-AC_CACHE_CHECK([for utimbuf],samba_cv_HAVE_UTIMBUF,[
-AC_TRY_COMPILE([#include <sys/types.h>
-#include <utime.h>],
-[struct utimbuf tbuf;  tbuf.actime = 0; tbuf.modtime = 1; exit(utime("foo.c",&tbuf));],
-samba_cv_HAVE_UTIMBUF=yes,samba_cv_HAVE_UTIMBUF=no,samba_cv_HAVE_UTIMBUF=cross)])
-if test x"$samba_cv_HAVE_UTIMBUF" = x"yes"; then
-    AC_DEFINE(HAVE_UTIMBUF)
-fi
-
-dnl  utmp and utmpx come in many flavours
-dnl  We need to check for many of them
-dnl  But we don't need to do each and every one, because our code uses
-dnl  mostly just the utmp (not utmpx) fields.
-
-AC_CHECK_FUNCS(pututline pututxline updwtmp updwtmpx getutmpx)
-
-AC_CACHE_CHECK([for ut_name in utmp],samba_cv_HAVE_UT_UT_NAME,[
-AC_TRY_COMPILE([#include <sys/types.h>
-#include <utmp.h>],
-[struct utmp ut;  ut.ut_name[0] = 'a';],
-samba_cv_HAVE_UT_UT_NAME=yes,samba_cv_HAVE_UT_UT_NAME=no,samba_cv_HAVE_UT_UT_NAME=cross)])
-if test x"$samba_cv_HAVE_UT_UT_NAME" = x"yes"; then
-    AC_DEFINE(HAVE_UT_UT_NAME)
-fi 
-
-AC_CACHE_CHECK([for ut_user in utmp],samba_cv_HAVE_UT_UT_USER,[
-AC_TRY_COMPILE([#include <sys/types.h>
-#include <utmp.h>],
-[struct utmp ut;  ut.ut_user[0] = 'a';],
-samba_cv_HAVE_UT_UT_USER=yes,samba_cv_HAVE_UT_UT_USER=no,samba_cv_HAVE_UT_UT_USER=cross)])
-if test x"$samba_cv_HAVE_UT_UT_USER" = x"yes"; then
-    AC_DEFINE(HAVE_UT_UT_USER)
-fi 
-
-AC_CACHE_CHECK([for ut_id in utmp],samba_cv_HAVE_UT_UT_ID,[
-AC_TRY_COMPILE([#include <sys/types.h>
-#include <utmp.h>],
-[struct utmp ut;  ut.ut_id[0] = 'a';],
-samba_cv_HAVE_UT_UT_ID=yes,samba_cv_HAVE_UT_UT_ID=no,samba_cv_HAVE_UT_UT_ID=cross)])
-if test x"$samba_cv_HAVE_UT_UT_ID" = x"yes"; then
-    AC_DEFINE(HAVE_UT_UT_ID)
-fi 
-
-AC_CACHE_CHECK([for ut_host in utmp],samba_cv_HAVE_UT_UT_HOST,[
-AC_TRY_COMPILE([#include <sys/types.h>
-#include <utmp.h>],
-[struct utmp ut;  ut.ut_host[0] = 'a';],
-samba_cv_HAVE_UT_UT_HOST=yes,samba_cv_HAVE_UT_UT_HOST=no,samba_cv_HAVE_UT_UT_HOST=cross)])
-if test x"$samba_cv_HAVE_UT_UT_HOST" = x"yes"; then
-    AC_DEFINE(HAVE_UT_UT_HOST)
-fi 
-
-AC_CACHE_CHECK([for ut_time in utmp],samba_cv_HAVE_UT_UT_TIME,[
-AC_TRY_COMPILE([#include <sys/types.h>
-#include <utmp.h>],
-[struct utmp ut;  time_t t; ut.ut_time = t;],
-samba_cv_HAVE_UT_UT_TIME=yes,samba_cv_HAVE_UT_UT_TIME=no,samba_cv_HAVE_UT_UT_TIME=cross)])
-if test x"$samba_cv_HAVE_UT_UT_TIME" = x"yes"; then
-    AC_DEFINE(HAVE_UT_UT_TIME)
-fi 
-
-AC_CACHE_CHECK([for ut_tv in utmp],samba_cv_HAVE_UT_UT_TV,[
-AC_TRY_COMPILE([#include <sys/types.h>
-#include <utmp.h>],
-[struct utmp ut;  struct timeval tv; ut.ut_tv = tv;],
-samba_cv_HAVE_UT_UT_TV=yes,samba_cv_HAVE_UT_UT_TV=no,samba_cv_HAVE_UT_UT_TV=cross)])
-if test x"$samba_cv_HAVE_UT_UT_TV" = x"yes"; then
-    AC_DEFINE(HAVE_UT_UT_TV)
-fi 
-
-AC_CACHE_CHECK([for ut_type in utmp],samba_cv_HAVE_UT_UT_TYPE,[
-AC_TRY_COMPILE([#include <sys/types.h>
-#include <utmp.h>],
-[struct utmp ut;  ut.ut_type = 0;],
-samba_cv_HAVE_UT_UT_TYPE=yes,samba_cv_HAVE_UT_UT_TYPE=no,samba_cv_HAVE_UT_UT_TYPE=cross)])
-if test x"$samba_cv_HAVE_UT_UT_TYPE" = x"yes"; then
-    AC_DEFINE(HAVE_UT_UT_TYPE)
-fi 
-
-AC_CACHE_CHECK([for ut_pid in utmp],samba_cv_HAVE_UT_UT_PID,[
-AC_TRY_COMPILE([#include <sys/types.h>
-#include <utmp.h>],
-[struct utmp ut;  ut.ut_pid = 0;],
-samba_cv_HAVE_UT_UT_PID=yes,samba_cv_HAVE_UT_UT_PID=no,samba_cv_HAVE_UT_UT_PID=cross)])
-if test x"$samba_cv_HAVE_UT_UT_PID" = x"yes"; then
-    AC_DEFINE(HAVE_UT_UT_PID)
-fi 
-
-AC_CACHE_CHECK([for ut_exit in utmp],samba_cv_HAVE_UT_UT_EXIT,[
-AC_TRY_COMPILE([#include <sys/types.h>
-#include <utmp.h>],
-[struct utmp ut;  ut.ut_exit.e_exit = 0;],
-samba_cv_HAVE_UT_UT_EXIT=yes,samba_cv_HAVE_UT_UT_EXIT=no,samba_cv_HAVE_UT_UT_EXIT=cross)])
-if test x"$samba_cv_HAVE_UT_UT_EXIT" = x"yes"; then
-    AC_DEFINE(HAVE_UT_UT_EXIT)
-fi 
-
-AC_CACHE_CHECK([for ut_addr in utmp],samba_cv_HAVE_UT_UT_ADDR,[
-AC_TRY_COMPILE([#include <sys/types.h>
-#include <utmp.h>],
-[struct utmp ut;  ut.ut_addr = 0;],
-samba_cv_HAVE_UT_UT_ADDR=yes,samba_cv_HAVE_UT_UT_ADDR=no,samba_cv_HAVE_UT_UT_ADDR=cross)])
-if test x"$samba_cv_HAVE_UT_UT_ADDR" = x"yes"; then
-    AC_DEFINE(HAVE_UT_UT_ADDR)
-fi 
-
-if test x$ac_cv_func_pututline = xyes ; then
-  AC_CACHE_CHECK([whether pututline returns pointer],samba_cv_PUTUTLINE_RETURNS_UTMP,[
-  AC_TRY_COMPILE([#include <sys/types.h>
-#include <utmp.h>],
-  [struct utmp utarg; struct utmp *utreturn; utreturn = pututline(&utarg);],
-  samba_cv_PUTUTLINE_RETURNS_UTMP=yes,samba_cv_PUTUTLINE_RETURNS_UTMP=no)])
-  if test x"$samba_cv_PUTUTLINE_RETURNS_UTMP" = x"yes"; then
-      AC_DEFINE(PUTUTLINE_RETURNS_UTMP)
-  fi
-fi
-
-AC_CACHE_CHECK([for ut_syslen in utmpx],samba_cv_HAVE_UX_UT_SYSLEN,[
-AC_TRY_COMPILE([#include <sys/types.h>
-#include <utmpx.h>],
-[struct utmpx ux;  ux.ut_syslen = 0;],
-samba_cv_HAVE_UX_UT_SYSLEN=yes,samba_cv_HAVE_UX_UT_SYSLEN=no,samba_cv_HAVE_UX_UT_SYSLEN=cross)])
-if test x"$samba_cv_HAVE_UX_UT_SYSLEN" = x"yes"; then
-    AC_DEFINE(HAVE_UX_UT_SYSLEN)
-fi 
-
-AC_CACHE_CHECK([for Linux kernel oplocks],samba_cv_HAVE_KERNEL_OPLOCKS_LINUX,[
-AC_TRY_RUN([
-#include <sys/types.h>
-#include <fcntl.h>
-#ifndef F_GETLEASE
-#define F_GETLEASE	1025
-#endif
-main() {
-       int fd = open("/dev/null", O_RDONLY);
-       return fcntl(fd, F_GETLEASE, 0) == -1;
-}
-],
-samba_cv_HAVE_KERNEL_OPLOCKS_LINUX=yes,samba_cv_HAVE_KERNEL_OPLOCKS_LINUX=no,samba_cv_HAVE_KERNEL_OPLOCKS_LINUX=cross)])
-if test x"$samba_cv_HAVE_KERNEL_OPLOCKS_LINUX" = x"yes"; then
-    AC_DEFINE(HAVE_KERNEL_OPLOCKS_LINUX)
-fi
-
-AC_CACHE_CHECK([for kernel change notify support],samba_cv_HAVE_KERNEL_CHANGE_NOTIFY,[
-AC_TRY_RUN([
-#include <sys/types.h>
-#include <fcntl.h>
-#include <signal.h>
-#ifndef F_NOTIFY
-#define F_NOTIFY 1026
-#endif
-main() {
-       	exit(fcntl(open("/tmp", O_RDONLY), F_NOTIFY, 0) == -1 ?  1 : 0);
-}
-],
-samba_cv_HAVE_KERNEL_CHANGE_NOTIFY=yes,samba_cv_HAVE_KERNEL_CHANGE_NOTIFY=no,samba_cv_HAVE_KERNEL_CHANGE_NOTIFY=cross)])
-if test x"$samba_cv_HAVE_KERNEL_CHANGE_NOTIFY" = x"yes" && test x"$target_cpu" != x"s390"; then
-    AC_DEFINE(HAVE_KERNEL_CHANGE_NOTIFY)
-fi
-
-AC_CACHE_CHECK([for kernel share modes],samba_cv_HAVE_KERNEL_SHARE_MODES,[
-AC_TRY_RUN([
-#include <sys/types.h>
-#include <fcntl.h>
-#include <signal.h>
-#include <sys/file.h>
-#ifndef LOCK_MAND
-#define LOCK_MAND	32
-#define LOCK_READ	64
-#endif
-main() {
-       	exit(flock(open("/dev/null", O_RDWR), LOCK_MAND|LOCK_READ) != 0);
-}
-],
-samba_cv_HAVE_KERNEL_SHARE_MODES=yes,samba_cv_HAVE_KERNEL_SHARE_MODES=no,samba_cv_HAVE_KERNEL_SHARE_MODES=cross)])
-if test x"$samba_cv_HAVE_KERNEL_SHARE_MODES" = x"yes"; then
-    AC_DEFINE(HAVE_KERNEL_SHARE_MODES)
-fi
-
-
-
-
-AC_CACHE_CHECK([for IRIX kernel oplock type definitions],samba_cv_HAVE_KERNEL_OPLOCKS_IRIX,[
-AC_TRY_COMPILE([#include <sys/types.h>
-#include <fcntl.h>],
-[oplock_stat_t t; t.os_state = OP_REVOKE; t.os_dev = 1; t.os_ino = 1;],
-samba_cv_HAVE_KERNEL_OPLOCKS_IRIX=yes,samba_cv_HAVE_KERNEL_OPLOCKS_IRIX=no)])
-if test x"$samba_cv_HAVE_KERNEL_OPLOCKS_IRIX" = x"yes"; then
-    AC_DEFINE(HAVE_KERNEL_OPLOCKS_IRIX)
-fi
-
-AC_CACHE_CHECK([for irix specific capabilities],samba_cv_HAVE_IRIX_SPECIFIC_CAPABILITIES,[
-AC_TRY_RUN([#include <sys/types.h>
-#include <sys/capability.h>
-main() {
- cap_t cap;
- if ((cap = cap_get_proc()) == NULL)
-   exit(1);
- cap->cap_effective |= CAP_NETWORK_MGT;
- cap->cap_inheritable |= CAP_NETWORK_MGT;
- cap_set_proc(cap);
- exit(0);
-}
-],
-samba_cv_HAVE_IRIX_SPECIFIC_CAPABILITIES=yes,samba_cv_HAVE_IRIX_SPECIFIC_CAPABILITIES=no,samba_cv_HAVE_IRIX_SPECIFIC_CAPABILITIES=cross)])
-if test x"$samba_cv_HAVE_IRIX_SPECIFIC_CAPABILITIES" = x"yes"; then
-    AC_DEFINE(HAVE_IRIX_SPECIFIC_CAPABILITIES)
-fi
-
-#
-# Check for int16, uint16, int32 and uint32 in rpc/types.h included from rpc/rpc.h
-# This is *really* broken but some systems (DEC OSF1) do this.... JRA.
-#
-
-AC_CACHE_CHECK([for int16 typedef included by rpc/rpc.h],samba_cv_HAVE_INT16_FROM_RPC_RPC_H,[
-AC_TRY_COMPILE([#include <sys/types.h>
-#if defined(HAVE_RPC_RPC_H)
-#include <rpc/rpc.h>
-#endif],
-[int16 testvar;],
-samba_cv_HAVE_INT16_FROM_RPC_RPC_H=yes,samba_cv_HAVE_INT16_FROM_RPC_RPC_H=no)])
-if test x"$samba_cv_HAVE_INT16_FROM_RPC_RPC_H" = x"yes"; then
-    AC_DEFINE(HAVE_INT16_FROM_RPC_RPC_H)
-fi
-
-AC_CACHE_CHECK([for uint16 typedef included by rpc/rpc.h],samba_cv_HAVE_UINT16_FROM_RPC_RPC_H,[
-AC_TRY_COMPILE([#include <sys/types.h>
-#if defined(HAVE_RPC_RPC_H)
-#include <rpc/rpc.h>
-#endif],
-[uint16 testvar;],
-samba_cv_HAVE_UINT16_FROM_RPC_RPC_H=yes,samba_cv_HAVE_UINT16_FROM_RPC_RPC_H=no)])
-if test x"$samba_cv_HAVE_UINT16_FROM_RPC_RPC_H" = x"yes"; then
-    AC_DEFINE(HAVE_UINT16_FROM_RPC_RPC_H)
-fi
-
-AC_CACHE_CHECK([for int32 typedef included by rpc/rpc.h],samba_cv_HAVE_INT32_FROM_RPC_RPC_H,[
-AC_TRY_COMPILE([#include <sys/types.h>
-#if defined(HAVE_RPC_RPC_H)
-#include <rpc/rpc.h>
-#endif],
-[int32 testvar;],
-samba_cv_HAVE_INT32_FROM_RPC_RPC_H=yes,samba_cv_HAVE_INT32_FROM_RPC_RPC_H=no)])
-if test x"$samba_cv_HAVE_INT32_FROM_RPC_RPC_H" = x"yes"; then
-    AC_DEFINE(HAVE_INT32_FROM_RPC_RPC_H)
-fi
-
-AC_CACHE_CHECK([for uint32 typedef included by rpc/rpc.h],samba_cv_HAVE_UINT32_FROM_RPC_RPC_H,[
-AC_TRY_COMPILE([#include <sys/types.h>
-#if defined(HAVE_RPC_RPC_H)
-#include <rpc/rpc.h>
-#endif],
-[uint32 testvar;],
-samba_cv_HAVE_UINT32_FROM_RPC_RPC_H=yes,samba_cv_HAVE_UINT32_FROM_RPC_RPC_H=no)])
-if test x"$samba_cv_HAVE_UINT32_FROM_RPC_RPC_H" = x"yes"; then
-    AC_DEFINE(HAVE_UINT32_FROM_RPC_RPC_H)
-fi
-
-dnl
-dnl Some systems (SCO) have a problem including
-dnl <prot.h> and <rpc/rpc.h> due to AUTH_ERROR being defined
-dnl as a #define in <prot.h> and as part of an enum
-dnl in <rpc/rpc.h>.
-dnl
-
-AC_CACHE_CHECK([for conflicting AUTH_ERROR define in rpc/rpc.h],samba_cv_HAVE_RPC_AUTH_ERROR_CONFLICT,[
-AC_TRY_COMPILE([#include <sys/types.h>
-#ifdef HAVE_SYS_SECURITY_H
-#include <sys/security.h>
-#include <prot.h>
-#endif  /* HAVE_SYS_SECURITY_H */
-#if defined(HAVE_RPC_RPC_H)
-#include <rpc/rpc.h>
-#endif],
-[int testvar;],
-samba_cv_HAVE_RPC_AUTH_ERROR_CONFLICT=no,samba_cv_HAVE_RPC_AUTH_ERROR_CONFLICT=yes)])
-if test x"$samba_cv_HAVE_RPC_AUTH_ERROR_CONFLICT" = x"yes"; then
-    AC_DEFINE(HAVE_RPC_AUTH_ERROR_CONFLICT)
-fi
-
-AC_MSG_CHECKING([for test routines])
-AC_TRY_RUN([#include "${srcdir-.}/tests/trivial.c"],
-           AC_MSG_RESULT(yes),
-	   AC_MSG_ERROR([cant find test code. Aborting config]),
-	   AC_MSG_WARN([cannot run when cross-compiling]))
-
-AC_CACHE_CHECK([for ftruncate extend],samba_cv_HAVE_FTRUNCATE_EXTEND,[
-AC_TRY_RUN([#include "${srcdir-.}/tests/ftruncate.c"],
-           samba_cv_HAVE_FTRUNCATE_EXTEND=yes,samba_cv_HAVE_FTRUNCATE_EXTEND=no,samba_cv_HAVE_FTRUNCATE_EXTEND=cross)])
-if test x"$samba_cv_HAVE_FTRUNCATE_EXTEND" = x"yes"; then
-    AC_DEFINE(HAVE_FTRUNCATE_EXTEND)
-fi
-
-AC_CACHE_CHECK([for broken getgroups],samba_cv_HAVE_BROKEN_GETGROUPS,[
-AC_TRY_RUN([#include "${srcdir-.}/tests/getgroups.c"],
-           samba_cv_HAVE_BROKEN_GETGROUPS=yes,samba_cv_HAVE_BROKEN_GETGROUPS=no,samba_cv_HAVE_BROKEN_GETGROUPS=cross)])
-if test x"$samba_cv_HAVE_BROKEN_GETGROUPS" = x"yes"; then
-    AC_DEFINE(HAVE_BROKEN_GETGROUPS)
-fi
-
-AC_CACHE_CHECK([whether getpass should be replaced],samba_cv_REPLACE_GETPASS,[
-SAVE_CPPFLAGS="$CPPFLAGS"
-CPPFLAGS="$CPPFLAGS -I${srcdir-.}/ -I${srcdir-.}/include -I${srcdir-.}/ubiqx -I${srcdir-.}/popt  -I${srcdir-.}/smbwrapper"
-AC_TRY_COMPILE([
-#define REPLACE_GETPASS 1
-#define NO_CONFIG_H 1
-#define main dont_declare_main
-#include "${srcdir-.}/lib/getsmbpass.c"
-#undef main
-],[],samba_cv_REPLACE_GETPASS=yes,samba_cv_REPLACE_GETPASS=no)
-CPPFLAGS="$SAVE_CPPFLAGS"
-])
-if test x"$samba_cv_REPLACE_GETPASS" = x"yes"; then
-	AC_DEFINE(REPLACE_GETPASS)
-fi
-
-AC_CACHE_CHECK([for broken inet_ntoa],samba_cv_REPLACE_INET_NTOA,[
-AC_TRY_RUN([
-#include <stdio.h>
-#include <sys/types.h>
-#include <netinet/in.h>
-#ifdef HAVE_ARPA_INET_H
-#include <arpa/inet.h>
-#endif
-main() { struct in_addr ip; ip.s_addr = 0x12345678;
-if (strcmp(inet_ntoa(ip),"18.52.86.120") &&
-    strcmp(inet_ntoa(ip),"120.86.52.18")) { exit(0); } 
-exit(1);}],
-           samba_cv_REPLACE_INET_NTOA=yes,samba_cv_REPLACE_INET_NTOA=no,samba_cv_REPLACE_INET_NTOA=cross)])
-if test x"$samba_cv_REPLACE_INET_NTOA" = x"yes"; then
-    AC_DEFINE(REPLACE_INET_NTOA)
-fi
-
-AC_CACHE_CHECK([for secure mkstemp],samba_cv_HAVE_SECURE_MKSTEMP,[
-AC_TRY_RUN([#include <stdlib.h>
-#include <sys/types.h>
-#include <sys/stat.h>
-#include <unistd.h>
-main() { 
-  struct stat st;
-  char tpl[20]="/tmp/test.XXXXXX"; 
-  int fd = mkstemp(tpl); 
-  if (fd == -1) exit(1);
-  unlink(tpl);
-  if (fstat(fd, &st) != 0) exit(1);
-  if ((st.st_mode & 0777) != 0600) exit(1);
-  exit(0);
-}],
-samba_cv_HAVE_SECURE_MKSTEMP=yes,
-samba_cv_HAVE_SECURE_MKSTEMP=no,
-samba_cv_HAVE_SECURE_MKSTEMP=cross)])
-if test x"$samba_cv_HAVE_SECURE_MKSTEMP" = x"yes"; then
-    AC_DEFINE(HAVE_SECURE_MKSTEMP)
-fi
-
-AC_CACHE_CHECK([for sysconf(_SC_NGROUPS_MAX)],samba_cv_SYSCONF_SC_NGROUPS_MAX,[
-AC_TRY_RUN([#include <unistd.h>
-main() { exit(sysconf(_SC_NGROUPS_MAX) == -1 ? 1 : 0); }],
-samba_cv_SYSCONF_SC_NGROUPS_MAX=yes,samba_cv_SYSCONF_SC_NGROUPS_MAX=no,samba_cv_SYSCONF_SC_NGROUPS_MAX=cross)])
-if test x"$samba_cv_SYSCONF_SC_NGROUPS_MAX" = x"yes"; then
-    AC_DEFINE(SYSCONF_SC_NGROUPS_MAX)
-fi
-
-AC_CACHE_CHECK([for root],samba_cv_HAVE_ROOT,[
-AC_TRY_RUN([main() { exit(getuid() != 0); }],
-           samba_cv_HAVE_ROOT=yes,samba_cv_HAVE_ROOT=no,samba_cv_HAVE_ROOT=cross)])
-if test x"$samba_cv_HAVE_ROOT" = x"yes"; then
-    AC_DEFINE(HAVE_ROOT)
-else
-    AC_MSG_WARN(running as non-root will disable some tests)
-fi
-
-##################
-# look for a method of finding the list of network interfaces
-iface=no;
-AC_CACHE_CHECK([for iface AIX],samba_cv_HAVE_IFACE_AIX,[
-AC_TRY_RUN([
-#define HAVE_IFACE_AIX 1
-#define AUTOCONF_TEST 1
-#include "confdefs.h"
-#include "${srcdir-.}/lib/interfaces.c"],
-           samba_cv_HAVE_IFACE_AIX=yes,samba_cv_HAVE_IFACE_AIX=no,samba_cv_HAVE_IFACE_AIX=cross)])
-if test x"$samba_cv_HAVE_IFACE_AIX" = x"yes"; then
-    iface=yes;AC_DEFINE(HAVE_IFACE_AIX)
-fi
-
-if test $iface = no; then
-AC_CACHE_CHECK([for iface ifconf],samba_cv_HAVE_IFACE_IFCONF,[
-AC_TRY_RUN([
-#define HAVE_IFACE_IFCONF 1
-#define AUTOCONF_TEST 1
-#include "confdefs.h"
-#include "${srcdir-.}/lib/interfaces.c"],
-           samba_cv_HAVE_IFACE_IFCONF=yes,samba_cv_HAVE_IFACE_IFCONF=no,samba_cv_HAVE_IFACE_IFCONF=cross)])
-if test x"$samba_cv_HAVE_IFACE_IFCONF" = x"yes"; then
-    iface=yes;AC_DEFINE(HAVE_IFACE_IFCONF)
-fi
-fi
-
-if test $iface = no; then
-AC_CACHE_CHECK([for iface ifreq],samba_cv_HAVE_IFACE_IFREQ,[
-AC_TRY_RUN([
-#define HAVE_IFACE_IFREQ 1
-#define AUTOCONF_TEST 1
-#include "confdefs.h"
-#include "${srcdir-.}/lib/interfaces.c"],
-           samba_cv_HAVE_IFACE_IFREQ=yes,samba_cv_HAVE_IFACE_IFREQ=no,samba_cv_HAVE_IFACE_IFREQ=cross)])
-if test x"$samba_cv_HAVE_IFACE_IFREQ" = x"yes"; then
-    iface=yes;AC_DEFINE(HAVE_IFACE_IFREQ)
-fi
-fi
-
-
-################################################
-# look for a method of setting the effective uid
-seteuid=no;
-if test $seteuid = no; then
-AC_CACHE_CHECK([for setresuid],samba_cv_USE_SETRESUID,[
-AC_TRY_RUN([
-#define AUTOCONF_TEST 1
-#define USE_SETRESUID 1
-#include "confdefs.h"
-#include "${srcdir-.}/lib/util_sec.c"],
-           samba_cv_USE_SETRESUID=yes,samba_cv_USE_SETRESUID=no,samba_cv_USE_SETRESUID=cross)])
-if test x"$samba_cv_USE_SETRESUID" = x"yes"; then
-    seteuid=yes;AC_DEFINE(USE_SETRESUID)
-fi
-fi
-
-
-if test $seteuid = no; then
-AC_CACHE_CHECK([for setreuid],samba_cv_USE_SETREUID,[
-AC_TRY_RUN([
-#define AUTOCONF_TEST 1
-#define USE_SETREUID 1
-#include "confdefs.h"
-#include "${srcdir-.}/lib/util_sec.c"],
-           samba_cv_USE_SETREUID=yes,samba_cv_USE_SETREUID=no,samba_cv_USE_SETREUID=cross)])
-if test x"$samba_cv_USE_SETREUID" = x"yes"; then
-    seteuid=yes;AC_DEFINE(USE_SETREUID)
-fi
-fi
-
-if test $seteuid = no; then
-AC_CACHE_CHECK([for seteuid],samba_cv_USE_SETEUID,[
-AC_TRY_RUN([
-#define AUTOCONF_TEST 1
-#define USE_SETEUID 1
-#include "confdefs.h"
-#include "${srcdir-.}/lib/util_sec.c"],
-           samba_cv_USE_SETEUID=yes,samba_cv_USE_SETEUID=no,samba_cv_USE_SETEUID=cross)])
-if test x"$samba_cv_USE_SETEUID" = x"yes"; then
-    seteuid=yes;AC_DEFINE(USE_SETEUID)
-fi
-fi
-
-if test $seteuid = no; then
-AC_CACHE_CHECK([for setuidx],samba_cv_USE_SETUIDX,[
-AC_TRY_RUN([
-#define AUTOCONF_TEST 1
-#define USE_SETUIDX 1
-#include "confdefs.h"
-#include "${srcdir-.}/lib/util_sec.c"],
-           samba_cv_USE_SETUIDX=yes,samba_cv_USE_SETUIDX=no,samba_cv_USE_SETUIDX=cross)])
-if test x"$samba_cv_USE_SETUIDX" = x"yes"; then
-    seteuid=yes;AC_DEFINE(USE_SETUIDX)
-fi
-fi
-
-
-AC_CACHE_CHECK([for working mmap],samba_cv_HAVE_MMAP,[
-AC_TRY_RUN([#include "${srcdir-.}/tests/shared_mmap.c"],
-           samba_cv_HAVE_MMAP=yes,samba_cv_HAVE_MMAP=no,samba_cv_HAVE_MMAP=cross)])
-if test x"$samba_cv_HAVE_MMAP" = x"yes"; then
-    AC_DEFINE(HAVE_MMAP)
-fi
-
-AC_CACHE_CHECK([for ftruncate needs root],samba_cv_FTRUNCATE_NEEDS_ROOT,[
-AC_TRY_RUN([#include "${srcdir-.}/tests/ftruncroot.c"],
-           samba_cv_FTRUNCATE_NEEDS_ROOT=yes,samba_cv_FTRUNCATE_NEEDS_ROOT=no,samba_cv_FTRUNCATE_NEEDS_ROOT=cross)])
-if test x"$samba_cv_FTRUNCATE_NEEDS_ROOT" = x"yes"; then
-    AC_DEFINE(FTRUNCATE_NEEDS_ROOT)
-fi
-
-AC_CACHE_CHECK([for fcntl locking],samba_cv_HAVE_FCNTL_LOCK,[
-AC_TRY_RUN([#include "${srcdir-.}/tests/fcntl_lock.c"],
-           samba_cv_HAVE_FCNTL_LOCK=yes,samba_cv_HAVE_FCNTL_LOCK=no,samba_cv_HAVE_FCNTL_LOCK=cross)])
-if test x"$samba_cv_HAVE_FCNTL_LOCK" = x"yes"; then
-    AC_DEFINE(HAVE_FCNTL_LOCK)
-fi
-
-AC_CACHE_CHECK([for broken (glibc2.1/x86) 64 bit fcntl locking],samba_cv_HAVE_BROKEN_FCNTL64_LOCKS,[
-AC_TRY_RUN([#include "${srcdir-.}/tests/fcntl_lock64.c"],
-           samba_cv_HAVE_BROKEN_FCNTL64_LOCKS=yes,samba_cv_HAVE_BROKEN_FCNTL64_LOCKS=no,samba_cv_HAVE_BROKEN_FCNTL64_LOCKS=cross)])
-if test x"$samba_cv_HAVE_BROKEN_FCNTL64_LOCKS" = x"yes"; then
-    AC_DEFINE(HAVE_BROKEN_FCNTL64_LOCKS)
-
-else
-
-dnl
-dnl Don't check for 64 bit fcntl locking if we know that the
-dnl glibc2.1 broken check has succeeded.
-dnl 
-
-  AC_CACHE_CHECK([for 64 bit fcntl locking],samba_cv_HAVE_STRUCT_FLOCK64,[
-  AC_TRY_RUN([
-#if defined(HAVE_UNISTD_H)
-#include <unistd.h>
-#endif
-#include <stdio.h>
-#include <stdlib.h>
-
-#ifdef HAVE_FCNTL_H
-#include <fcntl.h>
-#endif
-
-#ifdef HAVE_SYS_FCNTL_H
-#include <sys/fcntl.h>
-#endif
-main() { struct flock64 fl64;
-#if defined(F_SETLKW64) && defined(F_SETLK64) && defined(F_GETLK64)
-exit(0);
-#else
-exit(1);
-#endif
-}],
-       samba_cv_HAVE_STRUCT_FLOCK64=yes,samba_cv_HAVE_STRUCT_FLOCK64=no,samba_cv_HAVE_STRUCT_FLOCK64=cross)])
-
-  if test x"$samba_cv_HAVE_STRUCT_FLOCK64" = x"yes"; then
-      AC_DEFINE(HAVE_STRUCT_FLOCK64)
-  fi
-fi
-
-AC_CACHE_CHECK([for st_blocks in struct stat],samba_cv_HAVE_STAT_ST_BLOCKS,[
-AC_TRY_COMPILE([#include <sys/types.h>
-#include <sys/stat.h>
-#include <unistd.h>],
-[struct stat st;  st.st_blocks = 0;],
-samba_cv_HAVE_STAT_ST_BLOCKS=yes,samba_cv_HAVE_STAT_ST_BLOCKS=no,samba_cv_HAVE_STAT_ST_BLOCKS=cross)])
-if test x"$samba_cv_HAVE_STAT_ST_BLOCKS" = x"yes"; then
-    AC_DEFINE(HAVE_STAT_ST_BLOCKS)
-fi 
-
-AC_CACHE_CHECK([for st_blksize in struct stat],samba_cv_HAVE_STAT_ST_BLKSIZE,[
-AC_TRY_COMPILE([#include <sys/types.h>
-#include <sys/stat.h>
-#include <unistd.h>],
-[struct stat st;  st.st_blksize = 0;],
-samba_cv_HAVE_STAT_ST_BLKSIZE=yes,samba_cv_HAVE_STAT_ST_BLKSIZE=no,samba_cv_HAVE_STAT_ST_BLKSIZE=cross)])
-if test x"$samba_cv_HAVE_STAT_ST_BLKSIZE" = x"yes"; then
-    AC_DEFINE(HAVE_STAT_ST_BLKSIZE)
-fi
-
-case "$host_os" in
-*linux*)
-AC_CACHE_CHECK([for broken RedHat 7.2 system header files],samba_cv_BROKEN_REDHAT_7_SYSTEM_HEADERS,[
-AC_TRY_COMPILE([
-#ifdef HAVE_SYS_VFS_H
-#include <sys/vfs.h>
-#endif
-#ifdef HAVE_SYS_CAPABILITY_H
-#include <sys/capability.h>
-#endif
-],[int i;],
-   samba_cv_BROKEN_REDHAT_7_SYSTEM_HEADERS=no,samba_cv_BROKEN_REDHAT_7_SYSTEM_HEADERS=yes)])
-if test x"$samba_cv_BROKEN_REDHAT_7_SYSTEM_HEADERS" = x"yes"; then
-   AC_DEFINE(BROKEN_REDHAT_7_SYSTEM_HEADERS)
-fi
-;;
-esac
-
-AC_CACHE_CHECK([for broken nisplus include files],samba_cv_BROKEN_NISPLUS_INCLUDE_FILES,[
-AC_TRY_COMPILE([#include <sys/acl.h>
-#if defined(HAVE_RPCSVC_NIS_H)
-#include <rpcsvc/nis.h>
-#endif],
-[int i;],
-samba_cv_BROKEN_NISPLUS_INCLUDE_FILES=no,samba_cv_BROKEN_NISPLUS_INCLUDE_FILES=yes)])
-if test x"$samba_cv_BROKEN_NISPLUS_INCLUDE_FILES" = x"yes"; then
-    AC_DEFINE(BROKEN_NISPLUS_INCLUDE_FILES)
-fi
-
-
-#################################################
-# check for smbwrapper support
-AC_MSG_CHECKING(whether to use smbwrapper)
-AC_ARG_WITH(smbwrapper,
-[  --with-smbwrapper       Include SMB wrapper support (default=no)],
-[ case "$withval" in
-  yes)
-    AC_MSG_RESULT(yes)
-    AC_DEFINE(WITH_SMBWRAPPER)
-	WRAPPROG="bin/smbsh"
-	WRAP="bin/smbwrapper.$SHLIBEXT"
-
-	if test x$ATTEMPT_WRAP32_BUILD = x; then
-		WRAP32=""
-	else
-			WRAP32=bin/smbwrapper.32.$SHLIBEXT
-	fi
-
-# Conditions under which smbwrapper should not be built.
-
-	if test x$PICFLAG = x; then
-	   echo No support for PIC code - disabling smbwrapper and smbsh
-	   WRAPPROG=""
-	   WRAP=""
-	   WRAP32=""
-	elif test x$ac_cv_func_syscall = xno; then
-	   AC_MSG_RESULT([No syscall() -- disabling smbwrapper and smbsh])
-	   WRAPPROG=""
-	   WRAP=""
-	   WRAP32=""
-	fi
-    ;;
-  *)
-    AC_MSG_RESULT(no)
-    ;;
-  esac ],
-  AC_MSG_RESULT(no)
-)
-
-#################################################
-# check for the AFS filesystem
-AC_MSG_CHECKING(whether to use AFS)
-AC_ARG_WITH(afs,
-[  --with-afs              Include AFS support (default=no)],
-[ case "$withval" in
-  yes)
-    AC_MSG_RESULT(yes)
-    AC_DEFINE(WITH_AFS)
-    ;;
-  *)
-    AC_MSG_RESULT(no)
-    ;;
-  esac ],
-  AC_MSG_RESULT(no)
-)
-
-
-#################################################
-# check for the DFS auth system
-AC_MSG_CHECKING(whether to use DCE/DFS auth)
-AC_ARG_WITH(dfs,
-[  --with-dce-dfs          Include DCE/DFS support (default=no)],
-[ case "$withval" in
-  yes)
-    AC_MSG_RESULT(yes)
-    AC_DEFINE(WITH_DFS)
-    ;;
-  *)
-    AC_MSG_RESULT(no)
-    ;;
-  esac ],
-  AC_MSG_RESULT(no)
-)
-
-#################################################
-# check for Kerberos IV auth system
-AC_MSG_CHECKING(whether to use Kerberos IV)
-AC_ARG_WITH(krb4,
-[  --with-krb4=base-dir    Include Kerberos IV support (default=no)],
-[ case "$withval" in
-  yes)
-    AC_MSG_RESULT(yes)
-    AC_DEFINE(KRB4_AUTH)
-    AC_CHECK_LIB(resolv, dn_expand)
-    LIBS="$LIBS -lkrb -ldes"
-    CFLAGS="$CFLAGS -I$withval/include"
-    LDFLAGS="$LDFLAGS -L$withval/lib"
-    ;;
-  *)
-    AC_MSG_RESULT(no)
-    ;;
-  esac ],
-  AC_MSG_RESULT(no)
-)
-
-#################################################
-# check for Kerberos 5 auth system
-AC_MSG_CHECKING(whether to use Kerberos 5)
-AC_ARG_WITH(krb5,
-[  --with-krb5=base-dir    Include Kerberos 5 support (default=no)],
-[ case "$withval" in
-  yes)
-    AC_MSG_RESULT(yes)
-    AC_DEFINE(KRB5_AUTH)
-    LIBS="$LIBS -ldes425 -lkrb5 -lcrypto -lcom_err"
-    CFLAGS="$CFLAGS -I$withval/include"
-    LDFLAGS="$LDFLAGS -L$withval/lib"
-    ;;
-  *)
-    AC_MSG_RESULT(no)
-    ;;
-  esac ],
-  AC_MSG_RESULT(no)
-)
-
-#################################################
-# check for automount support
-AC_MSG_CHECKING(whether to use AUTOMOUNT)
-AC_ARG_WITH(automount,
-[  --with-automount        Include AUTOMOUNT support (default=no)],
-[ case "$withval" in
-  yes)
-    AC_MSG_RESULT(yes)
-    AC_DEFINE(WITH_AUTOMOUNT)
-    ;;
-  *)
-    AC_MSG_RESULT(no)
-    ;;
-  esac ],
-  AC_MSG_RESULT(no)
-)
-
-#################################################
-# check for smbmount support
-AC_MSG_CHECKING(whether to use SMBMOUNT)
-AC_ARG_WITH(smbmount,
-[  --with-smbmount         Include SMBMOUNT (Linux only) support (default=no)],
-[ case "$withval" in
-  yes)
-	case "$host_os" in
-	*linux*)
-		AC_MSG_RESULT(yes)
-		AC_DEFINE(WITH_SMBMOUNT)
-		MPROGS="bin/smbmount bin/smbmnt bin/smbumount"
-		;;
-	*)
-		AC_MSG_ERROR(not on a linux system!)
-		;;
-	esac
-    ;;
-  *)
-    AC_MSG_RESULT(no)
-    MPROGS=
-    ;;
-  esac ],
-  AC_MSG_RESULT(no)
-  MPROGS=
-)
-
-
-#################################################
-# check for a PAM password database
-with_pam_for_crypt=no
-AC_MSG_CHECKING(whether to use PAM password database)
-AC_ARG_WITH(pam,
-[  --with-pam              Include PAM password database support (default=no)],
-[ case "$withval" in
-  yes)
-    AC_MSG_RESULT(yes)
-    AC_DEFINE(WITH_PAM)
-    LIBS="$LIBS -lpam"
-    with_pam_for_crypt=yes
-    ;;
-  *)
-    AC_MSG_RESULT(no)
-    ;;
-  esac ],
-  AC_MSG_RESULT(no)
-)
-
-# we can't build a pam module if we don't have pam.
-AC_CHECK_LIB(pam, pam_get_data, [AC_DEFINE(HAVE_LIBPAM)])
-
-#################################################
-# check for pam_smbpass support
-AC_MSG_CHECKING(whether to use pam_smbpass)
-AC_ARG_WITH(pam_smbpass,
-[  --with-pam_smbpass      Include the smbpass PAM module (default=no)],
-[ case "$withval" in
-  yes)
-    AC_MSG_RESULT(yes)
-
-# Conditions under which pam_smbpass should not be built.
-
-       if test x$PICFLAG = x; then
-          AC_MSG_RESULT([No support for PIC code - disabling pam_smbpass])
-          PAM_MOD=""
-       elif test x$ac_cv_lib_pam_pam_get_data = xno; then
-          AC_MSG_RESULT([No libpam found -- disabling pam_smbpass])
-          PAM_MOD=""
-       else
-          AC_DEFINE(WITH_PAM_SMBPASS)
-          PAM_MOD="bin/pam_smbpass.so"
-       fi
-    ;;
-  *)
-    AC_MSG_RESULT(no)
-    ;;
-  esac ],
-  AC_MSG_RESULT(no)
-)
-
-
-###############################################
-# test for where we get crypt() from, but only
-# if not using PAM
-if test $with_pam_for_crypt = no; then
-AC_CHECK_FUNCS(crypt)
-if test x"$ac_cv_func_crypt" = x"no"; then
-    AC_CHECK_LIB(crypt, crypt, [LIBS="$LIBS -lcrypt";
-	AC_DEFINE(HAVE_CRYPT)])
-fi
-fi
-
-##
-## moved after the check for -lcrypt in order to
-## ensure that the necessary libraries are included
-## check checking for truncated salt.  Wrapped by the
-## $with_pam_for_crypt variable as above   --jerry
-##
-if test $with_pam_for_crypt = no; then
-AC_CACHE_CHECK([for a crypt that needs truncated salt],samba_cv_HAVE_TRUNCATED_SALT,[
-AC_TRY_RUN([#include "${srcdir-.}/tests/crypttest.c"],
-	samba_cv_HAVE_TRUNCATED_SALT=no,samba_cv_HAVE_TRUNCATED_SALT=yes,samba_cv_HAVE_TRUNCATED_SALT=cross)])
-if test x"$samba_cv_HAVE_TRUNCATED_SALT" = x"yes"; then
-	AC_DEFINE(HAVE_TRUNCATED_SALT)
-fi
-fi
-
-
-########################################################################################
-##
-## TESTS FOR SAM BACKENDS.  KEEP THESE GROUPED TOGETHER
-##
-########################################################################################
-
-## set the with_smbpasswd_sam as the default
-with_smbpasswd_sam=yes
-
-
-
-#################################################
-# check for a TDB password database
-AC_MSG_CHECKING(whether to use TDB SAM database)
-AC_ARG_WITH(tdbsam,
-[  --with-tdbsam           Include experimental TDB SAM support (default=no)],
-[ case "$withval" in
-  yes)
-    AC_MSG_RESULT(yes)
-    AC_DEFINE(WITH_TDB_SAM)
-    with_smbpasswd_sam=no
-    ;;
-  *)
-    AC_MSG_RESULT(no)
-    ;;
-  esac ],
-  AC_MSG_RESULT(no)
-)
-
-#################################################
-# check for a LDAP password database
-AC_MSG_CHECKING(whether to use LDAP SAM database)
-AC_ARG_WITH(ldapsam,
-[  --with-ldapsam          Include experimental LDAP SAM support (default=no)],
-[ case "$withval" in
-  yes)
-    AC_MSG_RESULT(yes)
-    AC_DEFINE(WITH_LDAP_SAM)
-    LDAPLIBS="-lldap"
-    AC_CHECK_LIB(lber, ber_bvfree, [LDAPLIBS="$LDAPLIBS -llber"])
-    ## remove -lresolv as this should be included by the -lsasl dependency 
-    ## in the OpenLDAP clients.  By not requiring it specifically, we avoid
-    ## issues on platforms that don't have it
-    LDAPLIBS="$LDAPLIBS"
-    old_LDFLAGS="$LDFLAGS"
-    LDFLAGS="$LDFLAGS $LDAPLIBS"
-    AC_CHECK_FUNCS(ldap_start_tls_s)
-    LDFLAGS="$old_LDFLAGS"
-    with_smbpasswd_sam=no
-    AC_SUBST(LDAPLIBS)
-AC_CACHE_CHECK(whether ldap_set_rebind_proc takes 3 arguments, samba_cv_ldap_set_rebind_proc, [
-AC_TRY_COMPILE([
-#include <lber.h>
-#include <ldap.h>], [ldap_set_rebind_proc(0, 0, 0);], [samba_cv_ldap_set_rebind_proc=3], [samba_cv_ldap_set_rebind_proc=2]) ])
-if test x"$samba_cv_ldap_set_rebind_proc" = x"3"; then
-   AC_DEFINE(LDAP_SET_REBIND_PROC_ARGS,3)
-else
-   AC_DEFINE(LDAP_SET_REBIND_PROC_ARGS,2)
-fi
-    ;;
-  *)
-    AC_MSG_RESULT(no)
-    ;;
-  esac ],
-  AC_MSG_RESULT(no)
-)
-
-
-#################################################
-# check for a NISPLUS password database
-AC_MSG_CHECKING(whether to use NISPLUS SAM database)
-AC_ARG_WITH(nisplussam,
-[  --with-nisplussam       Include NISPLUS SAM support (default=no)],
-[ case "$withval" in
-  yes)
-    AC_MSG_RESULT(yes)
-    AC_DEFINE(WITH_NISPLUS_SAM)
-    with_smbpasswd_sam=no
-    ;;
-  *)
-    AC_MSG_RESULT(no)
-    ;;
-  esac ],
-  AC_MSG_RESULT(no)
-)
-
-################################################
-# This test should come last because the
-# smbpasswd SAM is only used if another format
-# has not been defined
-AC_MSG_CHECKING(whether to use traditional smbpasswd file)
-if test $with_smbpasswd_sam = yes; then
-	AC_MSG_RESULT(yes)
-	AC_DEFINE(WITH_SMBPASSWD_SAM)
-	PDBEDIT=""
-else
-	AC_MSG_RESULT(no)
-	PDBEDIT=bin/pdbedit
-fi
-
-########################################################################################
-##
-## END OF TESTS FOR SAM BACKENDS.  
-##
-########################################################################################
-
-#################################################
-# check for a NISPLUS_HOME support 
-AC_MSG_CHECKING(whether to use NISPLUS_HOME)
-AC_ARG_WITH(nisplus-home,
-[  --with-nisplus-home     Include NISPLUS_HOME support (default=no)],
-[ case "$withval" in
-  yes)
-    AC_MSG_RESULT(yes)
-    AC_DEFINE(WITH_NISPLUS_HOME)
-    ;;
-  *)
-    AC_MSG_RESULT(no)
-    ;;
-  esac ],
-  AC_MSG_RESULT(no)
-)
-
-#################################################
-# check for the secure socket layer
-AC_MSG_CHECKING(whether to use SSL)
-AC_ARG_WITH(ssl,
-[  --with-ssl              Include SSL support (default=no)
-  --with-sslinc=DIR          Where the SSL includes are (defaults to /usr/local/ssl/include)
-  --with-ssllib=DIR          Where the SSL libraries are (defaults to /usr/local/ssl/lib)],
-[ case "$withval" in
-  yes)
-    AC_MSG_RESULT(yes)
-    AC_DEFINE(WITH_SSL)
-    withval="/usr/local/ssl"     # default
-
-    if test "${with_sslinc+set}" = set; then
-
-	withval="$with_sslinc"
-	case "$withval" in
-	yes|no)
-	  echo "configure: warning: --with-sslinc called without argument - will use default" 1>&w
-	  CFLAGS="-I/usr/local/ssl/include $CFLAGS"
-	;;
-        * )
-          CFLAGS="-I${withval} $CFLAGS"
-	;;
-	esac
-
-    else
-
-	CFLAGS="-I/usr/local/ssl/include $CFLAGS"   
-
-    fi
-
-    if test "${with_ssllib+set}" = set; then
-
-	withval="$with_ssllib"
-	case "$withval" in
-	yes|no)
-	  echo "configure: warning: --with-ssllib called without argument - will use default" 1>&w
-	  LDFLAGS="-L/usr/local/ssl/lib $LDFLAGS"
-	;;
-        * )
-  	  LDFLAGS="-L${withval}/lib $LDFLAGS"
-	;;
-	esac
-
-    else
-
-	LDFLAGS="-L/usr/local/ssl/lib $LDFLAGS"
-
-    fi
-
-    LIBS="-lssl -lcrypto $LIBS"
-
-#    if test ! -d ${withval}; then
-#      echo "configure: error: called with --with-ssl, but ssl base directory ${withval} does not exist or is not a directory. Aborting config" 1>&2
-#      exit 1
-#    fi 
-
-    CFLAGS="-DHAVE_CRYPT_DECL $CFLAGS"  # Damn, SSLeay defines its own
-
-    ;;
-  *)
-    AC_MSG_RESULT(no)
-    ;;
-  esac ],
-  AC_MSG_RESULT(no)
-)
-
-#################################################
-# check for syslog logging
-AC_MSG_CHECKING(whether to use syslog logging)
-AC_ARG_WITH(syslog,
-[  --with-syslog           Include experimental SYSLOG support (default=no)],
-[ case "$withval" in
-  yes)
-    AC_MSG_RESULT(yes)
-    AC_DEFINE(WITH_SYSLOG)
-    ;;
-  *)
-    AC_MSG_RESULT(no)
-    ;;
-  esac ],
-  AC_MSG_RESULT(no)
-)
-
-#################################################
-# check for a shared memory profiling support
-AC_MSG_CHECKING(whether to use profiling)
-AC_ARG_WITH(profiling-data,
-[  --with-profiling-data   Include gathering source code profile information (default=no)],
-[ case "$withval" in
-  yes)
-    AC_MSG_RESULT(yes)
-    AC_DEFINE(WITH_PROFILE)
-    ;;
-  *)
-    AC_MSG_RESULT(no)
-    ;;
-  esac ],
-  AC_MSG_RESULT(no)
-)
-
-
-#################################################
-# check for experimental disk-quotas support
-QUOTAOBJS=smbd/noquotas.o
-
-AC_MSG_CHECKING(whether to support disk-quotas)
-AC_ARG_WITH(quotas,
-[  --with-quotas           Include experimental disk-quota support (default=no)],
-[ case "$withval" in
-  yes)
-    AC_MSG_RESULT(yes)
-    QUOTAOBJS=smbd/quotas.o
-    ;;
-  *)
-    AC_MSG_RESULT(no)
-    ;;
-  esac ],
-  AC_MSG_RESULT(no)
-)
-AC_SUBST(QUOTAOBJS)
-
-#################################################
-# check for experimental utmp accounting
-
-AC_MSG_CHECKING(whether to support utmp accounting)
-AC_ARG_WITH(utmp,
-[  --with-utmp             Include experimental utmp accounting (default=no)],
-[ case "$withval" in
-  yes)
-    AC_MSG_RESULT(yes)
-    AC_DEFINE(WITH_UTMP)
-    ;;
-  *)
-    AC_MSG_RESULT(no)
-    ;;
-  esac ],
-  AC_MSG_RESULT(no)
-)
-
-#################################################
-# check for MS Dfs support
-
-AC_MSG_CHECKING(whether to support Microsoft Dfs)
-AC_ARG_WITH(msdfs,
-[  --with-msdfs            Include MS Dfs support (default=no)],
-[ case "$withval" in
-  yes)
-     AC_MSG_RESULT(yes)
-     AC_DEFINE(WITH_MSDFS)
-     ;;
-  *)
-    AC_MSG_RESULT(no)
-    ;;
-  esac ],
-  AC_MSG_RESULT(no)
-)
-
-#################################################
-# should we build libsmbclient?
-
-INSTALLCLIENTCMD_SH=:
-INSTALLCLIENTCMD_A=:
-LIBSMBCLIENT_SHARED=
-LIBSMBCLIENT=
-AC_MSG_CHECKING(whether to build the libsmbclient shared library)
-AC_ARG_WITH(libsmbclient,
-[  --with-libsmbclient     Build the libsmbclient shared library (default=no)],
-[ case "$withval" in
-  yes)
-     if test $BLDSHARED = true; then
-        INSTALLCLIENTCMD_SH="\$(INSTALLCMD)"
-        LIBSMBCLIENT_SHARED=bin/libsmbclient.$SHLIBEXT
-        LIBSMBCLIENT=libsmbclient
-        AC_MSG_RESULT(yes)
-     else
-        INSTALLCLIENTCMD_A="\$(INSTALLCMD)"
-        LIBSMBCLIENT=libsmbclient
-        AC_MSG_RESULT(no shared library support -- will supply static library)
-     fi
-     ;;
-  *)
-    AC_MSG_RESULT(no)
-    ;;
-  esac ],
-  AC_MSG_RESULT(no)
-)
-
-#################################################
-# these tests are taken from the GNU fileutils package
-AC_CHECKING(how to get filesystem space usage)
-space=no
-
-# Test for statvfs64.
-if test $space = no; then
-  # SVR4
-  AC_CACHE_CHECK([statvfs64 function (SVR4)], fu_cv_sys_stat_statvfs64,
-  [AC_TRY_RUN([
-#if defined(HAVE_UNISTD_H)
-#include <unistd.h>
-#endif
-#include <sys/types.h>
-#include <sys/statvfs.h>
-  main ()
-  {
-    struct statvfs64 fsd;
-    exit (statvfs64 (".", &fsd));
-  }],
-  fu_cv_sys_stat_statvfs64=yes,
-  fu_cv_sys_stat_statvfs64=no,
-  fu_cv_sys_stat_statvfs64=cross)])
-  if test $fu_cv_sys_stat_statvfs64 = yes; then
-    space=yes
-    AC_DEFINE(STAT_STATVFS64)
-  fi
-fi
-
-# Perform only the link test since it seems there are no variants of the
-# statvfs function.  This check is more than just AC_CHECK_FUNCS(statvfs)
-# because that got a false positive on SCO OSR5.  Adding the declaration
-# of a `struct statvfs' causes this test to fail (as it should) on such
-# systems.  That system is reported to work fine with STAT_STATFS4 which
-# is what it gets when this test fails.
-if test $space = no; then
-  # SVR4
-  AC_CACHE_CHECK([statvfs function (SVR4)], fu_cv_sys_stat_statvfs,
-		 [AC_TRY_LINK([#include <sys/types.h>
-#include <sys/statvfs.h>],
-			      [struct statvfs fsd; statvfs (0, &fsd);],
-			      fu_cv_sys_stat_statvfs=yes,
-			      fu_cv_sys_stat_statvfs=no)])
-  if test $fu_cv_sys_stat_statvfs = yes; then
-    space=yes
-    AC_DEFINE(STAT_STATVFS)
-  fi
-fi
-
-if test $space = no; then
-  # DEC Alpha running OSF/1
-  AC_MSG_CHECKING([for 3-argument statfs function (DEC OSF/1)])
-  AC_CACHE_VAL(fu_cv_sys_stat_statfs3_osf1,
-  [AC_TRY_RUN([
-#include <sys/param.h>
-#include <sys/types.h>
-#include <sys/mount.h>
-  main ()
-  {
-    struct statfs fsd;
-    fsd.f_fsize = 0;
-    exit (statfs (".", &fsd, sizeof (struct statfs)));
-  }],
-  fu_cv_sys_stat_statfs3_osf1=yes,
-  fu_cv_sys_stat_statfs3_osf1=no,
-  fu_cv_sys_stat_statfs3_osf1=no)])
-  AC_MSG_RESULT($fu_cv_sys_stat_statfs3_osf1)
-  if test $fu_cv_sys_stat_statfs3_osf1 = yes; then
-    space=yes
-    AC_DEFINE(STAT_STATFS3_OSF1)
-  fi
-fi
-
-if test $space = no; then
-# AIX
-  AC_MSG_CHECKING([for two-argument statfs with statfs.bsize dnl
-member (AIX, 4.3BSD)])
-  AC_CACHE_VAL(fu_cv_sys_stat_statfs2_bsize,
-  [AC_TRY_RUN([
-#ifdef HAVE_SYS_PARAM_H
-#include <sys/param.h>
-#endif
-#ifdef HAVE_SYS_MOUNT_H
-#include <sys/mount.h>
-#endif
-#ifdef HAVE_SYS_VFS_H
-#include <sys/vfs.h>
-#endif
-  main ()
-  {
-  struct statfs fsd;
-  fsd.f_bsize = 0;
-  exit (statfs (".", &fsd));
-  }],
-  fu_cv_sys_stat_statfs2_bsize=yes,
-  fu_cv_sys_stat_statfs2_bsize=no,
-  fu_cv_sys_stat_statfs2_bsize=no)])
-  AC_MSG_RESULT($fu_cv_sys_stat_statfs2_bsize)
-  if test $fu_cv_sys_stat_statfs2_bsize = yes; then
-    space=yes
-    AC_DEFINE(STAT_STATFS2_BSIZE)
-  fi
-fi
-
-if test $space = no; then
-# SVR3
-  AC_MSG_CHECKING([for four-argument statfs (AIX-3.2.5, SVR3)])
-  AC_CACHE_VAL(fu_cv_sys_stat_statfs4,
-  [AC_TRY_RUN([#include <sys/types.h>
-#include <sys/statfs.h>
-  main ()
-  {
-  struct statfs fsd;
-  exit (statfs (".", &fsd, sizeof fsd, 0));
-  }],
-    fu_cv_sys_stat_statfs4=yes,
-    fu_cv_sys_stat_statfs4=no,
-    fu_cv_sys_stat_statfs4=no)])
-  AC_MSG_RESULT($fu_cv_sys_stat_statfs4)
-  if test $fu_cv_sys_stat_statfs4 = yes; then
-    space=yes
-    AC_DEFINE(STAT_STATFS4)
-  fi
-fi
-
-if test $space = no; then
-# 4.4BSD and NetBSD
-  AC_MSG_CHECKING([for two-argument statfs with statfs.fsize dnl
-member (4.4BSD and NetBSD)])
-  AC_CACHE_VAL(fu_cv_sys_stat_statfs2_fsize,
-  [AC_TRY_RUN([#include <sys/types.h>
-#ifdef HAVE_SYS_PARAM_H
-#include <sys/param.h>
-#endif
-#ifdef HAVE_SYS_MOUNT_H
-#include <sys/mount.h>
-#endif
-  main ()
-  {
-  struct statfs fsd;
-  fsd.f_fsize = 0;
-  exit (statfs (".", &fsd));
-  }],
-  fu_cv_sys_stat_statfs2_fsize=yes,
-  fu_cv_sys_stat_statfs2_fsize=no,
-  fu_cv_sys_stat_statfs2_fsize=no)])
-  AC_MSG_RESULT($fu_cv_sys_stat_statfs2_fsize)
-  if test $fu_cv_sys_stat_statfs2_fsize = yes; then
-    space=yes
-    AC_DEFINE(STAT_STATFS2_FSIZE)
-  fi
-fi
-
-if test $space = no; then
-  # Ultrix
-  AC_MSG_CHECKING([for two-argument statfs with struct fs_data (Ultrix)])
-  AC_CACHE_VAL(fu_cv_sys_stat_fs_data,
-  [AC_TRY_RUN([#include <sys/types.h>
-#ifdef HAVE_SYS_PARAM_H
-#include <sys/param.h>
-#endif
-#ifdef HAVE_SYS_MOUNT_H
-#include <sys/mount.h>
-#endif
-#ifdef HAVE_SYS_FS_TYPES_H
-#include <sys/fs_types.h>
-#endif
-  main ()
-  {
-  struct fs_data fsd;
-  /* Ultrix's statfs returns 1 for success,
-     0 for not mounted, -1 for failure.  */
-  exit (statfs (".", &fsd) != 1);
-  }],
-  fu_cv_sys_stat_fs_data=yes,
-  fu_cv_sys_stat_fs_data=no,
-  fu_cv_sys_stat_fs_data=no)])
-  AC_MSG_RESULT($fu_cv_sys_stat_fs_data)
-  if test $fu_cv_sys_stat_fs_data = yes; then
-    space=yes
-    AC_DEFINE(STAT_STATFS2_FS_DATA)
-  fi
-fi
-
-#
-# As a gating factor for large file support, in order to
-# use <4GB files we must have the following minimal support
-# available.
-# long long, and a 64 bit off_t or off64_t.
-# If we don't have all of these then disable large
-# file support.
-#
-AC_MSG_CHECKING(if large file support can be enabled)
-AC_TRY_COMPILE([
-#if defined(HAVE_LONGLONG) && (defined(HAVE_OFF64_T) || (defined(SIZEOF_OFF_T) && (SIZEOF_OFF_T == 8)))
-#include <sys/types.h>
-#else
-__COMPILE_ERROR_
-#endif
-],
-[int i],
-samba_cv_HAVE_EXPLICIT_LARGEFILE_SUPPORT=yes,samba_cv_HAVE_EXPLICIT_LARGEFILE_SUPPORT=no)
-if test x"$samba_cv_HAVE_EXPLICIT_LARGEFILE_SUPPORT" = x"yes"; then
-    AC_MSG_RESULT(yes)
-    AC_DEFINE(HAVE_EXPLICIT_LARGEFILE_SUPPORT)
-else
-    AC_MSG_RESULT(no)
-fi
-
-AC_ARG_WITH(spinlocks, 
-[  --with-spinlocks        Use spin locks instead of fcntl locks (default=no)])
-if test "x$with_spinlocks" = "xyes"; then
-    AC_DEFINE(USE_SPINLOCKS)
-
-    case "$host_cpu" in
-        sparc)
-            AC_DEFINE(SPARC_SPINLOCKS)
-            ;;
-
-        i386|i486|i586|i686)
-            AC_DEFINE(INTEL_SPINLOCKS)
-            ;;
-
-        mips)
-            AC_DEFINE(MIPS_SPINLOCKS)
-            ;;
-
-        powerpc)
-            AC_DEFINE(POWERPC_SPINLOCKS)
-            ;;
-    esac
-fi
-
-#################################################
-# check for ACL support
-
-AC_MSG_CHECKING(whether to support ACLs)
-AC_ARG_WITH(acl-support,
-[  --with-acl-support      Include ACL support (default=no)],
-[ case "$withval" in
-  yes)
-
-		case "$host_os" in
-		*sysv5*)
-			AC_MSG_RESULT(Using UnixWare ACLs)
-			AC_DEFINE(HAVE_UNIXWARE_ACLS)
-			;;
-		*solaris*)
-			AC_MSG_RESULT(Using solaris ACLs)
-			AC_DEFINE(HAVE_SOLARIS_ACLS)
-			;;
-		*hpux*)
-			AC_MSG_RESULT(Using HPUX ACLs)
-			AC_DEFINE(HAVE_HPUX_ACLS)
-			;;
-		*irix*)
-			AC_MSG_RESULT(Using IRIX ACLs)
-			AC_DEFINE(HAVE_IRIX_ACLS)
-			;;
-		*aix*)
-			AC_MSG_RESULT(Using AIX ACLs)
-			AC_DEFINE(HAVE_AIX_ACLS)
-			;;
-		*osf*)
-			AC_MSG_RESULT(Using Tru64 ACLs)
-			AC_DEFINE(HAVE_TRU64_ACLS)
-			LIBS="$LIBS -lpacl"
-			;;
-		*)
-		    AC_CHECK_LIB(acl,acl_get_file)
-			AC_CACHE_CHECK([for ACL support],samba_cv_HAVE_POSIX_ACLS,[
-			AC_TRY_LINK([#include <sys/types.h>
-#include <sys/acl.h>],
-[ acl_t acl; int entry_id; acl_entry_t *entry_p; return acl_get_entry( acl, entry_id, entry_p);],
-samba_cv_HAVE_POSIX_ACLS=yes,samba_cv_HAVE_POSIX_ACLS=no)])
-			if test x"$samba_cv_HAVE_POSIX_ACLS" = x"yes"; then
-			    AC_MSG_RESULT(Using posix ACLs)
-			    AC_DEFINE(HAVE_POSIX_ACLS)
-				AC_CACHE_CHECK([for acl_get_perm_np],samba_cv_HAVE_ACL_GET_PERM_NP,[
-				AC_TRY_LINK([#include <sys/types.h>
-#include <sys/acl.h>],
-[ acl_permset_t permset_d; acl_perm_t perm; return acl_get_perm_np( permset_d, perm);],
-samba_cv_HAVE_ACL_GET_PERM_NP=yes,samba_cv_HAVE_ACL_GET_PERM_NP=no)])
-				if test x"$samba_cv_HAVE_ACL_GET_PERM_NP" = x"yes"; then
-					AC_DEFINE(HAVE_ACL_GET_PERM_NP)
-				fi
-			fi
-			;;
-		esac
-		;;
-  *)
-    AC_MSG_RESULT(no)
-	AC_DEFINE(HAVE_NO_ACLS)
-    ;;
-  esac ],
-  AC_DEFINE(HAVE_NO_ACLS)
-  AC_MSG_RESULT(no)
-)
-
-#################################################
-# check for the historical SAMBA installation
-
-if test "x$prefix" = xNONE -a "$sbindir" = "\${exec_prefix}/sbin"; then
-	# Put all binaries under the /usr/local/samba/bin directory.
-	sbindir="$bindir"
-fi
-
-#################################################
-# check for sendfile support
-
-AC_MSG_CHECKING(whether to check for support sendfile)
-AC_ARG_WITH(sendfile-support,
-[  --with-sendfile-support      Check for sendfile support (default=no)],
-[ case "$withval" in
-  yes)
-
-	AC_MSG_RESULT(yes);
-
-	case "$host_os" in
-	*linux*)
-		AC_CACHE_CHECK([for linux sendfile64 support],samba_cv_HAVE_SENDFILE64,[
-		AC_TRY_LINK([#include <sys/sendfile.h>],
-[\
-int tofd, fromfd;
-off64_t offset;
-size_t total;
-ssize_t nwritten = sendfile64(tofd, fromfd, &offset, total);
-],
-samba_cv_HAVE_SENDFILE64=yes,samba_cv_HAVE_SENDFILE64=no)])
-
-		AC_CACHE_CHECK([for linux sendfile support],samba_cv_HAVE_SENDFILE,[
-		AC_TRY_LINK([#include <sys/sendfile.h>],
-[\
-int tofd, fromfd;
-off_t offset;
-size_t total;
-ssize_t nwritten = sendfile(tofd, fromfd, &offset, total);
-],
-samba_cv_HAVE_SENDFILE=yes,samba_cv_HAVE_SENDFILE=no)])
-
-# Try and cope with broken Linux sendfile....
-		AC_CACHE_CHECK([for broken linux sendfile support],samba_cv_HAVE_BROKEN_LINUX_SENDFILE,[
-		AC_TRY_LINK([\
-#if defined(_FILE_OFFSET_BITS) && (_FILE_OFFSET_BITS == 64)
-#undef _FILE_OFFSET_BITS
-#endif
-#include <sys/sendfile.h>],
-[\
-int tofd, fromfd;
-off_t offset;
-size_t total;
-ssize_t nwritten = sendfile(tofd, fromfd, &offset, total);
-],
-samba_cv_HAVE_BROKEN_LINUX_SENDFILE=yes,samba_cv_HAVE_BROKEN_LINUX_SENDFILE=no)])
-
-	if test x"$samba_cv_HAVE_SENDFILE64" = x"yes"; then
-    		AC_DEFINE(HAVE_SENDFILE64)
-		AC_DEFINE(LINUX_SENDFILE_API)
-		AC_DEFINE(WITH_SENDFILE)
-	elif test x"$samba_cv_HAVE_SENDFILE" = x"yes"; then
-    		AC_DEFINE(HAVE_SENDFILE)
-		AC_DEFINE(LINUX_SENDFILE_API)
-		AC_DEFINE(WITH_SENDFILE)
-	elif test x"$samba_cv_HAVE_BROKEN_LINUX_SENDFILE" = x"yes"; then
-		AC_DEFINE(LINUX_BROKEN_SENDFILE_API)
-		AC_DEFINE(WITH_SENDFILE)
-	else
-		AC_MSG_RESULT(no);
-	fi
-
-	;;
-	*freebsd*)
-		AC_CACHE_CHECK([for freebsd sendfile support],samba_cv_HAVE_SENDFILE,[
-		AC_TRY_LINK([\
-#include <sys/types.h>
-#include <sys/socket.h>
-#include <sys/uio.h>],
-[\
-#define NULL (void *)0
-	int fromfd, tofd, ret, total;
-	off_t offset, nwritten;
-	struct sf_hdtr {
-                struct iovec *headers;
-                int hdr_cnt;
-                struct iovec *trailers;
-                int trl_cnt;
-	} hdr;
-	struct iovec hdtrl;
-	hdr.headers = &hdtrl;
-	hdr.hdr_cnt = 1;
-	hdr.trailers = NULL;
-	hdr.trl_cnt = 0;
-	hdtrl.iov_base = NULL;
-	hdtrl.iov_len = 0;
-	ret = sendfile(fromfd, tofd, offset, total, &hdr, &nwritten, 0);
-],
-samba_cv_HAVE_SENDFILE=yes,samba_cv_HAVE_SENDFILE=no)])
-
-	if test x"$samba_cv_HAVE_SENDFILE" = x"yes"; then
-    		AC_DEFINE(HAVE_SENDFILE)
-		AC_DEFINE(FREEBSD_SENDFILE_API)
-		AC_DEFINE(WITH_SENDFILE)
-	else
-		AC_MSG_RESULT(no);
-	fi
-	;;
-
-	*hpux*)
-		AC_CACHE_CHECK([for hpux sendfile64 support],samba_cv_HAVE_SENDFILE64,[
-		AC_TRY_LINK([\
-#include <sys/socket.h>
-#include <sys/uio.h>],
-[\
-	int fromfd, tofd;
-	size_t total=0;
-	struct iovec hdtrl[2];
-	ssize_t nwritten;
-	off64_t offset;
-
-	hdtrl[0].iov_base = 0;
-	hdtrl[0].iov_len = 0;
-
-	nwritten = sendfile64(tofd, fromfd, offset, total, &hdtrl[0], 0);
-],
-samba_cv_HAVE_SENDFILE64=yes,samba_cv_HAVE_SENDFILE64=no)])
-	if test x"$samba_cv_HAVE_SENDFILE64" = x"yes"; then
-    		AC_DEFINE(HAVE_SENDFILE64)
-		AC_DEFINE(HPUX_SENDFILE_API)
-		AC_DEFINE(WITH_SENDFILE)
-	else
-		AC_MSG_RESULT(no);
-	fi
-
-		AC_CACHE_CHECK([for hpux sendfile support],samba_cv_HAVE_SENDFILE,[
-		AC_TRY_LINK([\
-#include <sys/socket.h>
-#include <sys/uio.h>],
-[\
-	int fromfd, tofd;
-	size_t total=0;
-	struct iovec hdtrl[2];
-	ssize_t nwritten;
-	off_t offset;
-
-	hdtrl[0].iov_base = 0;
-	hdtrl[0].iov_len = 0;
-
-	nwritten = sendfile(tofd, fromfd, offset, total, &hdtrl[0], 0);
-],
-samba_cv_HAVE_SENDFILE=yes,samba_cv_HAVE_SENDFILE=no)])
-	if test x"$samba_cv_HAVE_SENDFILE" = x"yes"; then
-    		AC_DEFINE(HAVE_SENDFILE)
-		AC_DEFINE(HPUX_SENDFILE_API)
-		AC_DEFINE(WITH_SENDFILE)
-	else
-		AC_MSG_RESULT(no);
-	fi
-	;;
-
-	*solaris*)
-		LIBS="$LIBS -lsendfile"
-		AC_CACHE_CHECK([for solaris sendfilev64 support],samba_cv_HAVE_SENDFILEV64,[
-		AC_TRY_LINK([\
-#include <sys/sendfile.h>],
-[\
-        int sfvcnt;
-        size_t xferred;
-        struct sendfilevec vec[2];
-	ssize_t nwritten;
-	int tofd;
-
-	sfvcnt = 2;
-
-	vec[0].sfv_fd = SFV_FD_SELF;
-	vec[0].sfv_flag = 0;
-	vec[0].sfv_off = 0;
-	vec[0].sfv_len = 0;
-
-	vec[1].sfv_fd = 0;
-	vec[1].sfv_flag = 0;
-	vec[1].sfv_off = 0;
-	vec[1].sfv_len = 0;
-	nwritten = sendfilev64(tofd, vec, sfvcnt, &xferred);
-],
-samba_cv_HAVE_SENDFILEV64=yes,samba_cv_HAVE_SENDFILEV64=no)])
-
-	if test x"$samba_cv_HAVE_SENDFILEV64" = x"yes"; then
-    		AC_DEFINE(HAVE_SENDFILEV64)
-		AC_DEFINE(SOLARIS_SENDFILE_API)
-		AC_DEFINE(WITH_SENDFILE)
-	else
-		AC_MSG_RESULT(no);
-	fi
-
-		AC_CACHE_CHECK([for solaris sendfilev support],samba_cv_HAVE_SENDFILEV,[
-		AC_TRY_LINK([\
-#include <sys/sendfile.h>],
-[\
-        int sfvcnt;
-        size_t xferred;
-        struct sendfilevec vec[2];
-	ssize_t nwritten;
-	int tofd;
-
-	sfvcnt = 2;
-
-	vec[0].sfv_fd = SFV_FD_SELF;
-	vec[0].sfv_flag = 0;
-	vec[0].sfv_off = 0;
-	vec[0].sfv_len = 0;
-
-	vec[1].sfv_fd = 0;
-	vec[1].sfv_flag = 0;
-	vec[1].sfv_off = 0;
-	vec[1].sfv_len = 0;
-	nwritten = sendfilev(tofd, vec, sfvcnt, &xferred);
-],
-samba_cv_HAVE_SENDFILEV=yes,samba_cv_HAVE_SENDFILEV=no)])
-
-	if test x"$samba_cv_HAVE_SENDFILEV" = x"yes"; then
-    		AC_DEFINE(HAVE_SENDFILEV)
-		AC_DEFINE(SOLARIS_SENDFILE_API)
-		AC_DEFINE(WITH_SENDFILE)
-	else
-		AC_MSG_RESULT(no);
-	fi
-	;;
-
-	*)
-	;;
-        esac
-        ;;
-  *)
-    AC_MSG_RESULT(no)
-    ;;
-  esac ],
-  AC_MSG_RESULT(no)
-)
-
-#################################################
-# Check whether winbind is supported on this platform.  If so we need to
-# build and install client programs (WINBIND_TARGETS), sbin programs
-# (WINBIND_STARGETS) and shared libraries (WINBIND_LTARGETS).
-
-AC_MSG_CHECKING(whether to build winbind)
-
-# Initially, the value of $host_os decides whether winbind is supported
-
-case "$host_os" in 
-        *linux*|*irix*)
-		HAVE_WINBIND=yes
-                ;;
-	*solaris*)
-		HAVE_WINBIND=yes
-		WINBIND_NSS_EXTRA_OBJS="nsswitch/winbind_nss_solaris.o"
-		WINBIND_NSS_EXTRA_LIBS="-lsocket"
-		;;
-	*hpux11*)
-		HAVE_WINBIND=yes
-		WINBIND_NSS_EXTRA_OBJS="nsswitch/winbind_nss_solaris.o"
-               ;;
-	*aix4*)
-		HAVE_WINBIND=yes
-		;;
-        *)
-		HAVE_WINBIND=no
-                winbind_no_reason=", unsupported on $host_os"
-		;;
-esac
-
-# Check the setting of --with-winbindd
-
-AC_ARG_WITH(winbind,
-[  --with-winbind          Build winbind (default, if supported by OS)],
-[ 
-  case "$withval" in
-	yes)
-		HAVE_WINBIND=yes
-		;;
-        no)
-		HAVE_WINBIND=no
-                winbind_reason=""
-                ;;
-  esac ],
-)
-
-# We need unix domain sockets for winbind
-
-if test x"$HAVE_WINBIND" = x"yes"; then
-	if test x"$samba_cv_unixsocket" = x"no"; then
-		winbind_no_reason=", no unix domain socket support on $host_os"
-		HAVE_WINBIND=no
-	fi
-fi
-
-# Display test results
-
-if test x"$HAVE_WINBIND" = x"yes"; then
-
-        AC_MSG_RESULT(yes)
-
-	AC_MSG_CHECKING(whether to enable winbind auth challenge/response code)
-	AC_ARG_WITH(winbind-auth-challenge,
-	[  --with-winbind-auth-challenge   Enable winbindd_pam_auth_crap() functionality (default no)],
-	[ 
-	  case "$withval" in
-		yes)
-			AC_DEFINE(WITH_WINBIND_AUTH_CRAP)
-			AC_MSG_RESULT(yes)
-			;;
-	        *)
-			AC_MSG_RESULT(no)
-	                ;;
-	  esac ],
-          AC_MSG_RESULT(no)
-	)
-
-# Check for FreeBSD problem with getgroups
-
-	WINBIND_TARGETS="bin/wbinfo"
-	WINBIND_STARGETS="bin/winbindd"
-	case "$host_os" in
-        *irix*)
-		WINBIND_LTARGETS="nsswitch/libns_winbind.so"
-                ;;
-        *)
-		WINBIND_LTARGETS="nsswitch/libnss_winbind.so"
-                ;;
-	esac
-
-
-	case "$with_pam" in
-		yes)
-			WINBIND_PAM_TARGETS="nsswitch/pam_winbind.so"
-		;;
-	esac
-
-# Check for Horrible winbindd ldap hack.
-
-        AC_MSG_CHECKING(whether to enable winbind ldap hack)
-        AC_ARG_WITH(winbind-ldap-hack,
-        [  --with-winbind-ldap-hack   Enable winbindd_ldap_hack() functionality (default no)],
-        [
-          case "$withval" in
-                yes)
-                        AC_DEFINE(WITH_HORRIBLE_LDAP_NATIVE_MODE_HACK)
-                        LIBS="$LIBS -lldap";
-                        AC_MSG_RESULT(yes)
-                        ;;
-                no)
-                        AC_MSG_RESULT(no)
-                        ;;
-          esac ],
-          AC_MSG_RESULT(no)
-        )
-
-else
-        AC_MSG_RESULT(no$winbind_no_reason)
-
-	WINBIND_TARGETS=""
-	WINBIND_STARGETS=""
-	WINBIND_LTARGETS=""
-	WINBIND_PAM_TARGETS=""
-fi
-
-
-# Check for FreeBSD problem with getgroups
-# It returns EGID too many times in the list of groups
-# and causes a security problem
-AC_CACHE_CHECK([whether or not getgroups returns EGID too many times],
-    samba_cv_have_getgroups_too_many_egids,[AC_TRY_RUN([
-#include <sys/types.h>
-#include <stdio.h>
-
-int main(int argc, char *argv[])
-{
-  gid_t groups[10];
-  int n = 10;
-
-  n = getgroups(n, &groups);
-  /* Could actually pass back the number of EGIDs there ... */
-  exit((n > 1 && groups[0] == getegid() && groups[1] == getegid()) ? 1 : 0);
-}],
-	samba_cv_have_getgroups_too_many_egids=no,samba_cv_have_getgroups_too_many_egids=yes, samba_cv_have_getgroups_too_many_egids=cross)])
-if test x"$samba_cv_have_getgroups_too_many_egids" = x"yes"; then
-    AC_DEFINE(HAVE_GETGROUPS_TOO_MANY_EGIDS)
-fi
-
-# Substitution time!
-
-AC_SUBST(WINBIND_TARGETS)
-AC_SUBST(WINBIND_STARGETS)
-AC_SUBST(WINBIND_LTARGETS)
-AC_SUBST(WINBIND_PAM_TARGETS)
-AC_SUBST(WINBIND_NSS_EXTRA_OBJS)
-AC_SUBST(WINBIND_NSS_EXTRA_LIBS)
-
-# Solaris has some extra fields in struct passwd that need to be
-# initialised otherwise nscd crashes.  Unfortunately autoconf < 2.50
-# doesn't have the AC_CHECK_MEMBER macro which would be handy for checking
-# this.
-
-#AC_CHECK_MEMBER(struct passwd.pw_comment,
-#		AC_DEFINE(HAVE_PASSWD_PW_COMMENT, 1, [Defined if struct passwd has pw_comment field]),
-#		[#include <pwd.h>])
-
-AC_CACHE_CHECK([whether struct passwd has pw_comment],samba_cv_passwd_pw_comment, [
-	AC_TRY_COMPILE([#include <pwd.h>],[struct passwd p; p.pw_comment;],
-	samba_cv_passwd_pw_comment=yes,samba_cv_passwd_pw_comment=no)])
-if test x"$samba_cv_passwd_pw_comment" = x"yes"; then
-	AC_DEFINE(HAVE_PASSWD_PW_COMMENT)
-fi
-
-#AC_CHECK_MEMBER(struct passwd.pw_age,
-#		AC_DEFINE(HAVE_PASSWD_PW_AGE, 1, [Defined if struct passwd has pw_age field]),
-#		[#include <pwd.h>])
-
-AC_CACHE_CHECK([whether struct passwd has pw_age],samba_cv_passwd_pw_age, [
-	AC_TRY_COMPILE([#include <pwd.h>],[struct passwd p; p.pw_age;],
-	samba_cv_passwd_pw_age=yes,samba_cv_passwd_pw_age=no)])
-if test x"$samba_cv_passwd_pw_age" = x"yes"; then
-	AC_DEFINE(HAVE_PASSWD_PW_AGE)
-fi
-
-#################################################
-# Check to see if we should use the included popt
-
-AC_ARG_WITH(included-popt,
-[  --with-included-popt    use bundled popt library, not from system],
-[
-  case "$withval" in
-        yes)
-                INCLUDED_POPT=yes
-                ;;
-        no)
-                INCLUDED_POPT=no
-                ;;
-  esac ],
-)
-if test x"$INCLUDED_POPT" != x"yes"; then
-    AC_CHECK_LIB(popt, poptGetContext,
-                 INCLUDED_POPT=no, INCLUDED_POPT=yes)
-fi
-
-AC_MSG_CHECKING(whether to use included popt)
-if test x"$INCLUDED_POPT" = x"yes"; then
-    AC_MSG_RESULT($srcdir/popt)
-    BUILD_POPT='$(POPT_OBJS)'
-    FLAGS1="-I$srcdir/popt"
-else
-    AC_MSG_RESULT(no)
-    LIBS="$LIBS -lpopt"
-fi
-AC_SUBST(BUILD_POPT)
-AC_SUBST(FLAGS1)
-
-#################################################
-# final configure stuff
-AC_MSG_CHECKING([configure summary])
-AC_TRY_RUN([#include "${srcdir-.}/tests/summary.c"],
-	AC_MSG_RESULT(yes),
-	AC_MSG_ERROR([summary failure. Aborting config]); exit 1;,
-	AC_MSG_WARN([cannot run when cross-compiling]))
-
-builddir=`pwd`
-AC_SUBST(builddir)
-
-AC_OUTPUT(include/stamp-h Makefile script/findsmb)
diff -pruwN samba-2.2.12/source/configure.nodebug.developer samba-2.2.12-livebox/configure.nodebug.developer
--- samba-2.2.12/source/configure.nodebug.developer	2004-08-12 20:24:31.000000000 +0200
+++ samba-2.2.12-livebox/configure.nodebug.developer	1970-01-01 01:00:00.000000000 +0100
@@ -1,3 +0,0 @@
-#!/bin/sh
-CFLAGS="-Wall -Wshadow -Wstrict-prototypes -Wpointer-arith -Wcast-qual -Wcast-align -DDEBUG_PASSWORD"; export CFLAGS
-./configure $*
diff -pruwN samba-2.2.12/source/Doxyfile samba-2.2.12-livebox/Doxyfile
--- samba-2.2.12/source/Doxyfile	2004-08-12 20:24:20.000000000 +0200
+++ samba-2.2.12-livebox/Doxyfile	1970-01-01 01:00:00.000000000 +0100
@@ -1,176 +0,0 @@
-# Doxyfile 0.1
-
-#---------------------------------------------------------------------------
-# General configuration options
-#---------------------------------------------------------------------------
-PROJECT_NAME           = Samba
-PROJECT_NUMBER         = HEAD
-
-# NOTE: By default, Doxygen writes into the dox/ subdirectory of the
-# invocation directory.  If you want to put it somewhere else, for
-# example, to write straight into a webserver directory, then override
-# this variable in a configuration concatenated to this one: Doxygen
-# doesn't mind variables being redefined.
-
-OUTPUT_DIRECTORY       = dox
-
-OUTPUT_LANGUAGE        = English
-EXTRACT_ALL            = YES
-EXTRACT_PRIVATE        = YES
-EXTRACT_STATIC         = YES
-HIDE_UNDOC_MEMBERS     = NO
-HIDE_UNDOC_CLASSES     = NO
-BRIEF_MEMBER_DESC      = YES
-REPEAT_BRIEF           = YES
-ALWAYS_DETAILED_SEC    = NO
-FULL_PATH_NAMES        = YES
-STRIP_FROM_PATH        = $(PWD)/
-INTERNAL_DOCS          = YES
-CLASS_DIAGRAMS         = YES
-SOURCE_BROWSER         = YES
-INLINE_SOURCES         = YES
-STRIP_CODE_COMMENTS    = NO
-CASE_SENSE_NAMES       = YES
-SHORT_NAMES            = NO
-HIDE_SCOPE_NAMES       = YES
-VERBATIM_HEADERS       = YES
-SHOW_INCLUDE_FILES     = YES
-JAVADOC_AUTOBRIEF      = YES
-INHERIT_DOCS           = YES
-INLINE_INFO            = YES
-SORT_MEMBER_DOCS       = NO
-DISTRIBUTE_GROUP_DOC   = NO
-TAB_SIZE               = 8
-GENERATE_TODOLIST      = YES
-GENERATE_TESTLIST      = YES
-GENERATE_BUGLIST       = YES
-ALIASES                = 
-ENABLED_SECTIONS       = 
-MAX_INITIALIZER_LINES  = 30
-OPTIMIZE_OUTPUT_FOR_C  = YES
-SHOW_USED_FILES        = YES
-REFERENCED_BY_RELATION = YES
-#---------------------------------------------------------------------------
-# configuration options related to warning and progress messages
-#---------------------------------------------------------------------------
-QUIET                  = YES
-WARNINGS               = NO
-WARN_IF_UNDOCUMENTED   = NO
-WARN_FORMAT            = "$file:$line: $text"
-WARN_LOGFILE           = 
-#---------------------------------------------------------------------------
-# configuration options related to the input files
-#---------------------------------------------------------------------------
-INPUT                  = . 
-FILE_PATTERNS          = *.c \
-                         *.h \
-                         *.idl
-RECURSIVE              = YES
-EXCLUDE                = include/includes.h \
-                         include/proto.h
-EXCLUDE_PATTERNS       = 
-EXAMPLE_PATH           = 
-EXAMPLE_PATTERNS       = 
-IMAGE_PATH             = 
-INPUT_FILTER           = 
-FILTER_SOURCE_FILES    = NO
-#---------------------------------------------------------------------------
-# configuration options related to the alphabetical class index
-#---------------------------------------------------------------------------
-ALPHABETICAL_INDEX     = YES
-COLS_IN_ALPHA_INDEX    = 1
-IGNORE_PREFIX          = 
-#---------------------------------------------------------------------------
-# configuration options related to the HTML output
-#---------------------------------------------------------------------------
-GENERATE_HTML          = YES
-HTML_OUTPUT            = .
-HTML_HEADER            = 
-HTML_FOOTER            = 
-HTML_STYLESHEET        = 
-HTML_ALIGN_MEMBERS     = YES
-GENERATE_HTMLHELP      = NO
-GENERATE_CHI           = NO
-BINARY_TOC             = NO
-TOC_EXPAND             = NO
-DISABLE_INDEX          = NO
-ENUM_VALUES_PER_LINE   = 3
-GENERATE_TREEVIEW      = NO
-TREEVIEW_WIDTH         = 250
-#---------------------------------------------------------------------------
-# configuration options related to the LaTeX output
-#---------------------------------------------------------------------------
-GENERATE_LATEX         = NO
-LATEX_OUTPUT           = latex
-COMPACT_LATEX          = NO
-PAPER_TYPE             = a4wide
-EXTRA_PACKAGES         = 
-LATEX_HEADER           = 
-PDF_HYPERLINKS         = YES
-USE_PDFLATEX           = YES
-LATEX_BATCHMODE        = YES
-#---------------------------------------------------------------------------
-# configuration options related to the RTF output
-#---------------------------------------------------------------------------
-GENERATE_RTF           = NO
-RTF_OUTPUT             = rtf
-COMPACT_RTF            = NO
-RTF_HYPERLINKS         = NO
-RTF_STYLESHEET_FILE    = 
-RTF_EXTENSIONS_FILE    = 
-#---------------------------------------------------------------------------
-# configuration options related to the man page output
-#---------------------------------------------------------------------------
-GENERATE_MAN           = NO
-MAN_OUTPUT             = man
-MAN_EXTENSION          = .3
-MAN_LINKS              = NO
-#---------------------------------------------------------------------------
-# configuration options related to the XML output
-#---------------------------------------------------------------------------
-GENERATE_XML           = NO
-#---------------------------------------------------------------------------
-# configuration options related to the preprocessor   
-#---------------------------------------------------------------------------
-ENABLE_PREPROCESSING   = NO
-MACRO_EXPANSION        = NO
-EXPAND_ONLY_PREDEF     = NO
-SEARCH_INCLUDES        = YES
-INCLUDE_PATH           = 
-INCLUDE_FILE_PATTERNS  = 
-PREDEFINED             = 
-EXPAND_AS_DEFINED      = 
-SKIP_FUNCTION_MACROS   = YES
-#---------------------------------------------------------------------------
-# configuration::additions related to external references   
-#---------------------------------------------------------------------------
-TAGFILES               = 
-GENERATE_TAGFILE       = 
-ALLEXTERNALS           = NO
-PERL_PATH              = /usr/bin/perl
-#---------------------------------------------------------------------------
-# configuration options related to the dot tool   
-#---------------------------------------------------------------------------
-HAVE_DOT               = NO
-CLASS_GRAPH            = YES
-COLLABORATION_GRAPH    = YES
-TEMPLATE_RELATIONS     = YES
-INCLUDE_GRAPH          = YES
-INCLUDED_BY_GRAPH      = YES
-GRAPHICAL_HIERARCHY    = YES
-DOT_PATH               = 
-DOTFILE_DIRS           = 
-MAX_DOT_GRAPH_WIDTH    = 1024
-MAX_DOT_GRAPH_HEIGHT   = 1024
-GENERATE_LEGEND        = YES
-DOT_CLEANUP            = YES
-#---------------------------------------------------------------------------
-# configuration::additions related to the search engine   
-#---------------------------------------------------------------------------
-SEARCHENGINE           = NO
-CGI_NAME               = search.cgi
-CGI_URL                = 
-DOC_URL                = 
-DOC_ABSPATH            = 
-BIN_ABSPATH            = /usr/local/bin/
-EXT_DOC_PATHS          = 
diff -pruwN samba-2.2.12/source/get_country_code.c samba-2.2.12-livebox/get_country_code.c
--- samba-2.2.12/source/get_country_code.c	1970-01-01 01:00:00.000000000 +0100
+++ samba-2.2.12-livebox/get_country_code.c	2010-03-31 11:45:59.000000000 +0200
@@ -0,0 +1,49 @@
+///////////////////////////////////////////////////////////////////////////////
+/**
+ * @file    
+ * @brief
+ * @note    SAGEM Software & Technologies - SST
+ * @author  Wael MAAOUI
+ * @date    2008-09-17
+ * @par     Licences
+ * @note    CopyRight (C) 2000-2008 SST
+ * @version
+ */
+///////////////////////////////////////////////////////////////////////////////
+///
+/// INCLUDE
+///
+#include <stdlib.h>
+#include <stdio.h>
+
+#include "flashinfos.h"
+
+
+
+
+
+/*  get label by country */
+
+int main (int argc,char *argv[])
+{
+    char _permanentParameterCountry[MAX_PERMPARAMS_CTRY_SIZE];
+     
+    if (getCountry(_permanentParameterCountry, MAX_PERMPARAMS_CTRY_SIZE) !=
+                        PERM_PARAMS_OK)
+    {
+        return -1;
+    }
+
+    printf("%s", _permanentParameterCountry );
+   
+return 0;
+}
+
+
+
+
+
+
+
+
+
diff -pruwN samba-2.2.12/source/include/config.h samba-2.2.12-livebox/include/config.h
--- samba-2.2.12/source/include/config.h	1970-01-01 01:00:00.000000000 +0100
+++ samba-2.2.12-livebox/include/config.h	2010-03-31 11:45:59.000000000 +0200
@@ -0,0 +1,1159 @@
+/* include/config.h.  Generated automatically by configure.  */
+/* include/config.h.in.  Generated automatically from configure.in by autoheader.  */
+
+/* Define if on AIX 3.
+   System headers sometimes define this.
+   We just want to avoid a redefinition error message.  */
+#ifndef _ALL_SOURCE
+/* #undef _ALL_SOURCE */
+#endif
+
+/* Define if type char is unsigned and you are not using gcc.  */
+#ifndef __CHAR_UNSIGNED__
+/* #undef __CHAR_UNSIGNED__ */
+#endif
+
+/* Define to empty if the keyword does not work.  */
+/* #undef const */
+
+/* Define to `int' if <sys/types.h> doesn't define.  */
+/* #undef gid_t */
+
+/* Define if you have a working `mmap' system call.  */
+/* #undef HAVE_MMAP */
+
+/* Define if your struct stat has st_rdev.  */
+#define HAVE_ST_RDEV 1
+
+/* Define if you have <sys/wait.h> that is POSIX.1 compatible.  */
+#define HAVE_SYS_WAIT_H 1
+
+/* Define as __inline if that's what the C compiler calls it.  */
+/* #undef inline */
+
+/* Define to `int' if <sys/types.h> doesn't define.  */
+/* #undef mode_t */
+
+/* Define if your C compiler doesn't accept -c and -o together.  */
+/* #undef NO_MINUS_C_MINUS_O */
+
+/* Define to `long' if <sys/types.h> doesn't define.  */
+/* #undef off_t */
+
+/* Define to `int' if <sys/types.h> doesn't define.  */
+/* #undef pid_t */
+
+/* Define if you need to in order for stat and other things to work.  */
+/* #undef _POSIX_SOURCE */
+
+/* Define as the return type of signal handlers (int or void).  */
+#define RETSIGTYPE void
+
+/* Define to `unsigned' if <sys/types.h> doesn't define.  */
+/* #undef size_t */
+
+/* Define if you have the ANSI C header files.  */
+#define STDC_HEADERS 1
+
+/* Define if you can safely include both <sys/time.h> and <time.h>.  */
+#define TIME_WITH_SYS_TIME 1
+
+/* Define to `int' if <sys/types.h> doesn't define.  */
+/* #undef uid_t */
+
+/* Define if your processor stores words with the most significant
+   byte first (like Motorola and SPARC, unlike Intel and VAX).  */
+#define WORDS_BIGENDIAN 1
+
+#define HAVE_VOLATILE 1
+/* #undef HAVE_BROKEN_READDIR */
+/* #undef HAVE_C99_VSNPRINTF */
+#define HAVE_ERRNO_DECL 1
+/* #undef HAVE_LONGLONG */
+/* #undef HAVE_OFF64_T */
+/* #undef HAVE_REMSH */
+/* #undef HAVE_UNSIGNED_CHAR */
+#define HAVE_UTIMBUF 1
+#define HAVE_SIG_ATOMIC_T_TYPE 1
+#define HAVE_SOCKLEN_T_TYPE 1
+/* #undef ssize_t */
+/* #undef ino_t */
+/* #undef ssize_t */
+/* #undef loff_t */
+#define offset_t loff_t
+/* #undef aclent_t */
+/* #undef wchar_t */
+#define HAVE_CONNECT 1
+/* #undef HAVE_SHORT_INO_T */
+/* #undef WITH_SMBWRAPPER */
+/* #undef WITH_AFS */
+/* #undef WITH_DFS */
+/* #undef SUNOS5 */
+/* #undef SUNOS4 */
+#define LINUX 1
+/* #undef AIX */
+/* #undef BSD */
+/* #undef IRIX */
+/* #undef IRIX6 */
+/* #undef HPUX */
+/* #undef QNX */
+/* #undef SCO */
+/* #undef OSF1 */
+/* #undef NEXT2 */
+/* #undef RELIANTUNIX */
+/* #undef HAVE_MMAP */
+/* #undef HAVE_FCNTL_LOCK */
+/* #undef HAVE_FTRUNCATE_EXTEND */
+/* #undef FTRUNCATE_NEEDS_ROOT */
+/* #undef HAVE_TRAPDOOR_UID */
+/* #undef HAVE_ROOT */
+#define HAVE_GETTIMEOFDAY_TZ 1
+/* #undef HAVE_SOCK_SIN_LEN */
+/* #undef STAT_READ_FILSYS */
+/* #undef STAT_STATFS2_BSIZE */
+/* #undef STAT_STATFS2_FSIZE */
+/* #undef STAT_STATFS2_FS_DATA */
+/* #undef STAT_STATFS3_OSF1 */
+/* #undef STAT_STATFS4 */
+#define STAT_STATVFS 1
+/* #undef STAT_STATVFS64 */
+/* #undef HAVE_IFACE_AIX */
+#define HAVE_IFACE_IFCONF 1
+/* #undef HAVE_IFACE_IFREQ */
+#define HAVE_CRYPT 1
+/* #undef HAVE_PUTPRPWNAM */
+/* #undef HAVE_SET_AUTH_PARAMETERS */
+/* #undef WITH_SYSLOG */
+/* #undef WITH_PROFILE */
+/* #undef WITH_SSL */
+/* #undef WITH_LDAP */
+/* #undef WITH_NISPLUS */
+/* #undef WITH_TDBPWD */
+/* #undef WITH_PAM */
+/* #undef WITH_PAM_SMBPASS */
+/* #undef WITH_NISPLUS_HOME */
+/* #undef WITH_AUTOMOUNT */
+/* #undef WITH_SMBMOUNT */
+/* #undef HAVE_BROKEN_GETGROUPS */
+#define REPLACE_GETPASS 1
+/* #undef REPLACE_INET_NTOA */
+#define HAVE_FILE_MACRO 1
+#define HAVE_FUNCTION_MACRO 1
+#define HAVE_VA_COPY 1
+/* #undef HAVE_SETRESUID_DECL */
+/* #undef HAVE_SETRESUID */
+/* #undef WITH_NETATALK */
+/* #undef WITH_UTMP */
+/* #undef WITH_MSDFS */
+/* #undef WITH_VFS */
+/* #undef HAVE_INO64_T */
+/* #undef HAVE_DEV64_T */
+/* #undef HAVE_STRUCT_FLOCK64 */
+/* #undef SIZEOF_INO_T */
+/* #undef SIZEOF_OFF_T */
+/* #undef STAT_STATVFS64 */
+/* #undef HAVE_LIBREADLINE */
+/* #undef HAVE_KERNEL_SHARE_MODES */
+/* #undef HAVE_KERNEL_OPLOCKS_IRIX */
+/* #undef HAVE_KERNEL_OPLOCKS_LINUX */
+/* #undef HAVE_KERNEL_CHANGE_NOTIFY */
+/* #undef HAVE_IRIX_SPECIFIC_CAPABILITIES */
+/* #undef HAVE_INT16_FROM_RPC_RPC_H */
+/* #undef HAVE_UINT16_FROM_RPC_RPC_H */
+/* #undef HAVE_INT32_FROM_RPC_RPC_H */
+/* #undef HAVE_UINT32_FROM_RPC_RPC_H */
+/* #undef KRB4_AUTH */
+/* #undef KRB5_AUTH */
+#define SEEKDIR_RETURNS_VOID 1
+#define HAVE_DIRENT_D_OFF 1
+#define HAVE_GETSPNAM 1
+/* #undef HAVE_BIGCRYPT */
+/* #undef HAVE_GETPRPWNAM */
+#define HAVE_FSTAT64 1
+#define HAVE_LSTAT64 1
+#define HAVE_STAT64 1
+/* #undef HAVE_SETRESGID */
+/* #undef HAVE_SETRESGID_DECL */
+#define HAVE_SHADOW_H 1
+#define HAVE_MEMSET 1
+#define HAVE_STRCASECMP 1
+/* #undef HAVE_STRUCT_DIRENT64 */
+/* #undef HAVE_TRUNCATED_SALT */
+#define BROKEN_NISPLUS_INCLUDE_FILES 1
+/* #undef HAVE_RPC_AUTH_ERROR_CONFLICT */
+/* #undef HAVE_EXPLICIT_LARGEFILE_SUPPORT */
+/* #undef USE_BOTH_CRYPT_CALLS */
+/* #undef HAVE_BROKEN_FCNTL64_LOCKS */
+/* #undef HAVE_SECURE_MKSTEMP */
+/* #undef HAVE_FNMATCH */
+/* #undef USE_SETEUID */
+#define USE_SETRESUID 1
+/* #undef USE_SETREUID */
+/* #undef USE_SETUIDX */
+#define HAVE_DLOPEN 1
+#define HAVE_DLCLOSE 1
+#define HAVE_DLSYM 1
+#define HAVE_DLERROR 1
+/* #undef SYSCONF_SC_NGROUPS_MAX */
+#define HAVE_UT_UT_NAME 1
+#define HAVE_UT_UT_USER 1
+#define HAVE_UT_UT_ID 1
+#define HAVE_UT_UT_HOST 1
+#define HAVE_UT_UT_TIME 1
+#define HAVE_UT_UT_TV 1
+#define HAVE_UT_UT_TYPE 1
+#define HAVE_UT_UT_PID 1
+#define HAVE_UT_UT_EXIT 1
+#define HAVE_UT_UT_ADDR 1
+/* #undef HAVE_UX_UT_SYSLEN */
+#define PUTUTLINE_RETURNS_UTMP 1
+#define COMPILER_SUPPORTS_LL 1
+/* #undef HAVE_YP_GET_DEFAULT_DOMAIN */
+/* #undef USE_SPINLOCKS */
+/* #undef SPARC_SPINLOCKS */
+/* #undef INTEL_SPINLOCKS */
+/* #undef MIPS_SPINLOCKS */
+/* #undef POWERPC_SPINLOCKS */
+/* #undef HAVE_POSIX_ACLS */
+/* #undef HAVE_ACL_GET_PERM_NP */
+/* #undef HAVE_UNIXWARE_ACLS */
+/* #undef HAVE_SOLARIS_ACLS */
+/* #undef HAVE_HPUX_ACLS */
+/* #undef HAVE_IRIX_ACLS */
+/* #undef HAVE_AIX_ACLS */
+/* #undef HAVE_TRU64_ACLS */
+#define HAVE_NO_ACLS 1
+/* #undef HAVE_LIBPAM */
+/* #undef HAVE_ASPRINTF_DECL */
+/* #undef HAVE_VASPRINTF_DECL */
+#define HAVE_SNPRINTF_DECL 1
+#define HAVE_VSNPRINTF_DECL 1
+#define HAVE_UNIXSOCKET 1
+/* #undef MMAP_BLACKLIST */
+/* #undef HAVE_CUPS */
+/* #undef WITH_LDAP_SAM */
+/* #undef WITH_NISPLUS_SAM */
+#define WITH_SMBPASSWD_SAM 1
+/* #undef WITH_TDB_SAM */
+/* #undef LINUX_QUOTAS_1 */
+/* #undef LINUX_QUOTAS_2 */
+/* #undef BROKEN_REDHAT_7_SYSTEM_HEADERS */
+#define HAVE_IMMEDIATE_STRUCTURES 1
+#define HAVE_STAT_ST_BLOCKS 1
+#define STAT_ST_BLOCKSIZE 512
+/* #undef HAVE_DEVICE_MAJOR_FN */
+/* #undef HAVE_DEVICE_MINOR_FN */
+/* #undef HAVE_MAKEDEV_FN */
+/* #undef HAVE_GETGROUPS_TOO_MANY_EGIDS */
+/* #undef HAVE_PASSWD_PW_COMMENT */
+/* #undef HAVE_PASSWD_PW_AGE */
+#define HAVE_STAT_ST_BLKSIZE 1
+/* #undef WITH_WINBIND_AUTH_CRAP */
+/* #undef WITH_HORRIBLE_LDAP_NATIVE_MODE_HACK */
+
+/*
+ * Add these definitions to allow VFS modules to
+ * see the CPPFLAGS defines.
+ */
+#ifndef _HPUX_SOURCE
+/* #undef _HPUX_SOURCE */
+#endif
+#ifndef _POSIX_SOURCE
+/* #undef _POSIX_SOURCE */
+#endif
+#ifndef _LARGEFILE64_SOURCE
+/* #undef _LARGEFILE64_SOURCE */
+#endif
+#ifndef _ALIGNMENT_REQUIRED
+/* #undef _ALIGNMENT_REQUIRED */
+#endif
+#ifndef _MAX_ALIGNMENT
+/* #undef _MAX_ALIGNMENT */
+#endif
+#ifndef _LARGE_FILES
+/* #undef _LARGE_FILES */
+#endif
+#ifndef _FILE_OFFSET_BITS
+#define _FILE_OFFSET_BITS 64
+#endif
+#ifndef _GNU_SOURCE
+/* #undef _GNU_SOURCE */
+#endif
+/* #undef HAVE_SENDFILE */
+/* #undef HAVE_SENDFILE64 */
+/* #undef LINUX_SENDFILE_API */
+/* #undef LINUX_BROKEN_SENDFILE_API */
+/* #undef WITH_SENDFILE */
+/* #undef FREEBSD_SENDFILE_API */
+/* #undef HPUX_SENDFILE_API */
+/* #undef HAVE_SENDFILEV */
+/* #undef HAVE_SENDFILEV64 */
+/* #undef SOLARIS_SENDFILE_API */
+/* #undef LDAP_SET_REBIND_PROC_ARGS */
+
+/* The number of bytes in a int.  */
+#define SIZEOF_INT 4
+
+/* The number of bytes in a long.  */
+#define SIZEOF_LONG cross
+
+/* The number of bytes in a short.  */
+#define SIZEOF_SHORT cross
+
+/* Define if you have the __acl function.  */
+/* #undef HAVE___ACL */
+
+/* Define if you have the __chdir function.  */
+/* #undef HAVE___CHDIR */
+
+/* Define if you have the __close function.  */
+/* #undef HAVE___CLOSE */
+
+/* Define if you have the __closedir function.  */
+/* #undef HAVE___CLOSEDIR */
+
+/* Define if you have the __dup function.  */
+/* #undef HAVE___DUP */
+
+/* Define if you have the __dup2 function.  */
+/* #undef HAVE___DUP2 */
+
+/* Define if you have the __facl function.  */
+/* #undef HAVE___FACL */
+
+/* Define if you have the __fchdir function.  */
+/* #undef HAVE___FCHDIR */
+
+/* Define if you have the __fcntl function.  */
+/* #undef HAVE___FCNTL */
+
+/* Define if you have the __fork function.  */
+/* #undef HAVE___FORK */
+
+/* Define if you have the __fstat function.  */
+/* #undef HAVE___FSTAT */
+
+/* Define if you have the __fstat64 function.  */
+/* #undef HAVE___FSTAT64 */
+
+/* Define if you have the __fxstat function.  */
+/* #undef HAVE___FXSTAT */
+
+/* Define if you have the __getcwd function.  */
+/* #undef HAVE___GETCWD */
+
+/* Define if you have the __getdents function.  */
+#define HAVE___GETDENTS 1
+
+/* Define if you have the __llseek function.  */
+/* #undef HAVE___LLSEEK */
+
+/* Define if you have the __lseek function.  */
+/* #undef HAVE___LSEEK */
+
+/* Define if you have the __lstat function.  */
+/* #undef HAVE___LSTAT */
+
+/* Define if you have the __lstat64 function.  */
+/* #undef HAVE___LSTAT64 */
+
+/* Define if you have the __lxstat function.  */
+/* #undef HAVE___LXSTAT */
+
+/* Define if you have the __open function.  */
+/* #undef HAVE___OPEN */
+
+/* Define if you have the __open64 function.  */
+/* #undef HAVE___OPEN64 */
+
+/* Define if you have the __opendir function.  */
+/* #undef HAVE___OPENDIR */
+
+/* Define if you have the __pread function.  */
+/* #undef HAVE___PREAD */
+
+/* Define if you have the __pread64 function.  */
+/* #undef HAVE___PREAD64 */
+
+/* Define if you have the __pwrite function.  */
+/* #undef HAVE___PWRITE */
+
+/* Define if you have the __pwrite64 function.  */
+/* #undef HAVE___PWRITE64 */
+
+/* Define if you have the __read function.  */
+/* #undef HAVE___READ */
+
+/* Define if you have the __readdir function.  */
+/* #undef HAVE___READDIR */
+
+/* Define if you have the __readdir64 function.  */
+/* #undef HAVE___READDIR64 */
+
+/* Define if you have the __seekdir function.  */
+/* #undef HAVE___SEEKDIR */
+
+/* Define if you have the __stat function.  */
+/* #undef HAVE___STAT */
+
+/* Define if you have the __stat64 function.  */
+/* #undef HAVE___STAT64 */
+
+/* Define if you have the __sys_llseek function.  */
+/* #undef HAVE___SYS_LLSEEK */
+
+/* Define if you have the __telldir function.  */
+/* #undef HAVE___TELLDIR */
+
+/* Define if you have the __write function.  */
+#define HAVE___WRITE 1
+
+/* Define if you have the __xstat function.  */
+/* #undef HAVE___XSTAT */
+
+/* Define if you have the _acl function.  */
+/* #undef HAVE__ACL */
+
+/* Define if you have the _chdir function.  */
+/* #undef HAVE__CHDIR */
+
+/* Define if you have the _close function.  */
+/* #undef HAVE__CLOSE */
+
+/* Define if you have the _closedir function.  */
+/* #undef HAVE__CLOSEDIR */
+
+/* Define if you have the _dup function.  */
+/* #undef HAVE__DUP */
+
+/* Define if you have the _dup2 function.  */
+/* #undef HAVE__DUP2 */
+
+/* Define if you have the _facl function.  */
+/* #undef HAVE__FACL */
+
+/* Define if you have the _fchdir function.  */
+/* #undef HAVE__FCHDIR */
+
+/* Define if you have the _fcntl function.  */
+/* #undef HAVE__FCNTL */
+
+/* Define if you have the _fork function.  */
+/* #undef HAVE__FORK */
+
+/* Define if you have the _fstat function.  */
+/* #undef HAVE__FSTAT */
+
+/* Define if you have the _fstat64 function.  */
+/* #undef HAVE__FSTAT64 */
+
+/* Define if you have the _getcwd function.  */
+/* #undef HAVE__GETCWD */
+
+/* Define if you have the _getdents function.  */
+/* #undef HAVE__GETDENTS */
+
+/* Define if you have the _llseek function.  */
+#define HAVE__LLSEEK 1
+
+/* Define if you have the _lseek function.  */
+/* #undef HAVE__LSEEK */
+
+/* Define if you have the _lstat function.  */
+/* #undef HAVE__LSTAT */
+
+/* Define if you have the _lstat64 function.  */
+/* #undef HAVE__LSTAT64 */
+
+/* Define if you have the _open function.  */
+/* #undef HAVE__OPEN */
+
+/* Define if you have the _open64 function.  */
+/* #undef HAVE__OPEN64 */
+
+/* Define if you have the _opendir function.  */
+/* #undef HAVE__OPENDIR */
+
+/* Define if you have the _pread function.  */
+/* #undef HAVE__PREAD */
+
+/* Define if you have the _pread64 function.  */
+/* #undef HAVE__PREAD64 */
+
+/* Define if you have the _pwrite function.  */
+/* #undef HAVE__PWRITE */
+
+/* Define if you have the _pwrite64 function.  */
+/* #undef HAVE__PWRITE64 */
+
+/* Define if you have the _read function.  */
+/* #undef HAVE__READ */
+
+/* Define if you have the _readdir function.  */
+/* #undef HAVE__READDIR */
+
+/* Define if you have the _readdir64 function.  */
+/* #undef HAVE__READDIR64 */
+
+/* Define if you have the _seekdir function.  */
+/* #undef HAVE__SEEKDIR */
+
+/* Define if you have the _stat function.  */
+/* #undef HAVE__STAT */
+
+/* Define if you have the _stat64 function.  */
+/* #undef HAVE__STAT64 */
+
+/* Define if you have the _telldir function.  */
+/* #undef HAVE__TELLDIR */
+
+/* Define if you have the _write function.  */
+/* #undef HAVE__WRITE */
+
+/* Define if you have the asprintf function.  */
+#define HAVE_ASPRINTF 1
+
+/* Define if you have the atexit function.  */
+#define HAVE_ATEXIT 1
+
+/* Define if you have the bigcrypt function.  */
+/* #undef HAVE_BIGCRYPT */
+
+/* Define if you have the bzero function.  */
+#define HAVE_BZERO 1
+
+/* Define if you have the chmod function.  */
+#define HAVE_CHMOD 1
+
+/* Define if you have the chown function.  */
+#define HAVE_CHOWN 1
+
+/* Define if you have the chroot function.  */
+#define HAVE_CHROOT 1
+
+/* Define if you have the connect function.  */
+#define HAVE_CONNECT 1
+
+/* Define if you have the creat64 function.  */
+#define HAVE_CREAT64 1
+
+/* Define if you have the crypt function.  */
+#define HAVE_CRYPT 1
+
+/* Define if you have the crypt16 function.  */
+/* #undef HAVE_CRYPT16 */
+
+/* Define if you have the dlclose function.  */
+#define HAVE_DLCLOSE 1
+
+/* Define if you have the dlerror function.  */
+#define HAVE_DLERROR 1
+
+/* Define if you have the dlopen function.  */
+#define HAVE_DLOPEN 1
+
+/* Define if you have the dlsym function.  */
+#define HAVE_DLSYM 1
+
+/* Define if you have the dup2 function.  */
+#define HAVE_DUP2 1
+
+/* Define if you have the endnetgrent function.  */
+/* #undef HAVE_ENDNETGRENT */
+
+/* Define if you have the execl function.  */
+#define HAVE_EXECL 1
+
+/* Define if you have the fchmod function.  */
+#define HAVE_FCHMOD 1
+
+/* Define if you have the fchown function.  */
+#define HAVE_FCHOWN 1
+
+/* Define if you have the fcvt function.  */
+/* #undef HAVE_FCVT */
+
+/* Define if you have the fcvtl function.  */
+/* #undef HAVE_FCVTL */
+
+/* Define if you have the fopen64 function.  */
+#define HAVE_FOPEN64 1
+
+/* Define if you have the fseek64 function.  */
+/* #undef HAVE_FSEEK64 */
+
+/* Define if you have the fseeko64 function.  */
+#define HAVE_FSEEKO64 1
+
+/* Define if you have the fstat function.  */
+#define HAVE_FSTAT 1
+
+/* Define if you have the fstat64 function.  */
+#define HAVE_FSTAT64 1
+
+/* Define if you have the fsync function.  */
+#define HAVE_FSYNC 1
+
+/* Define if you have the ftell64 function.  */
+/* #undef HAVE_FTELL64 */
+
+/* Define if you have the ftello64 function.  */
+#define HAVE_FTELLO64 1
+
+/* Define if you have the ftruncate function.  */
+#define HAVE_FTRUNCATE 1
+
+/* Define if you have the ftruncate64 function.  */
+#define HAVE_FTRUNCATE64 1
+/* Define if you have the getauthuid function.  */
+/* #undef HAVE_GETAUTHUID */
+
+/* Define if you have the getcwd function.  */
+#define HAVE_GETCWD 1
+
+/* Define if you have the getdents function.  */
+/* #undef HAVE_GETDENTS */
+
+/* Define if you have the getgrent function.  */
+#define HAVE_GETGRENT 1
+
+/* Define if you have the getgrnam function.  */
+#define HAVE_GETGRNAM 1
+
+/* Define if you have the getnetgrent function.  */
+/* #undef HAVE_GETNETGRENT */
+
+/* Define if you have the getprpwnam function.  */
+/* #undef HAVE_GETPRPWNAM */
+
+/* Define if you have the getpwanam function.  */
+/* #undef HAVE_GETPWANAM */
+
+/* Define if you have the getrlimit function.  */
+#define HAVE_GETRLIMIT 1
+
+/* Define if you have the getspnam function.  */
+#define HAVE_GETSPNAM 1
+
+/* Define if you have the getutmpx function.  */
+/* #undef HAVE_GETUTMPX */
+
+/* Define if you have the glob function.  */
+#define HAVE_GLOB 1
+
+/* Define if you have the grantpt function.  */
+#define HAVE_GRANTPT 1
+
+/* Define if you have the initgroups function.  */
+#define HAVE_INITGROUPS 1
+
+/* Define if you have the innetgr function.  */
+/* #undef HAVE_INNETGR */
+
+/* Define if you have the ldap_start_tls_s function.  */
+/* #undef HAVE_LDAP_START_TLS_S */
+
+/* Define if you have the link function.  */
+#define HAVE_LINK 1
+
+/* Define if you have the llseek function.  */
+#define HAVE_LLSEEK 1
+
+/* Define if you have the lseek64 function.  */
+#define HAVE_LSEEK64 1
+
+/* Define if you have the lstat64 function.  */
+#define HAVE_LSTAT64 1
+
+/* Define if you have the memmove function.  */
+#define HAVE_MEMMOVE 1
+
+/* Define if you have the memset function.  */
+#define HAVE_MEMSET 1
+
+/* Define if you have the mknod function.  */
+#define HAVE_MKNOD 1
+
+/* Define if you have the mknod64 function.  */
+/* #undef HAVE_MKNOD64 */
+
+/* Define if you have the mktime function.  */
+#define HAVE_MKTIME 1
+
+/* Define if you have the open64 function.  */
+#define HAVE_OPEN64 1
+
+/* Define if you have the pathconf function.  */
+#define HAVE_PATHCONF 1
+
+/* Define if you have the pipe function.  */
+#define HAVE_PIPE 1
+
+/* Define if you have the poll function.  */
+#define HAVE_POLL 1
+
+/* Define if you have the pread function.  */
+#define HAVE_PREAD 1
+
+/* Define if you have the pread64 function.  */
+#define HAVE_PREAD64 1
+
+/* Define if you have the putprpwnam function.  */
+/* #undef HAVE_PUTPRPWNAM */
+
+/* Define if you have the pututline function.  */
+#define HAVE_PUTUTLINE 1
+
+/* Define if you have the pututxline function.  */
+/* #undef HAVE_PUTUTXLINE */
+
+/* Define if you have the pwrite function.  */
+#define HAVE_PWRITE 1
+
+/* Define if you have the pwrite64 function.  */
+#define HAVE_PWRITE64 1
+
+/* Define if you have the rand function.  */
+#define HAVE_RAND 1
+
+/* Define if you have the random function.  */
+#define HAVE_RANDOM 1
+
+/* Define if you have the rdchk function.  */
+/* #undef HAVE_RDCHK */
+
+/* Define if you have the readdir64 function.  */
+#define HAVE_READDIR64 1
+
+/* Define if you have the readlink function.  */
+#define HAVE_READLINK 1
+
+/* Define if you have the realpath function.  */
+#define HAVE_REALPATH 1
+
+/* Define if you have the rename function.  */
+#define HAVE_RENAME 1
+
+/* Define if you have the select function.  */
+#define HAVE_SELECT 1
+
+/* Define if you have the set_auth_parameters function.  */
+/* #undef HAVE_SET_AUTH_PARAMETERS */
+
+/* Define if you have the setenv function.  */
+#define HAVE_SETENV 1
+
+/* Define if you have the setgidx function.  */
+/* #undef HAVE_SETGIDX */
+
+/* Define if you have the setgroups function.  */
+#define HAVE_SETGROUPS 1
+
+/* Define if you have the setlinebuf function.  */
+#define HAVE_SETLINEBUF 1
+
+/* Define if you have the setluid function.  */
+/* #undef HAVE_SETLUID */
+
+/* Define if you have the setnetgrent function.  */
+/* #undef HAVE_SETNETGRENT */
+
+/* Define if you have the setpgid function.  */
+#define HAVE_SETPGID 1
+
+/* Define if you have the setpriv function.  */
+/* #undef HAVE_SETPRIV */
+
+/* Define if you have the setsid function.  */
+#define HAVE_SETSID 1
+
+/* Define if you have the setuidx function.  */
+/* #undef HAVE_SETUIDX */
+
+/* Define if you have the sigaction function.  */
+#define HAVE_SIGACTION 1
+
+/* Define if you have the sigblock function.  */
+#define HAVE_SIGBLOCK 1
+
+/* Define if you have the sigprocmask function.  */
+#define HAVE_SIGPROCMASK 1
+
+/* Define if you have the sigset function.  */
+#define HAVE_SIGSET 1
+
+/* Define if you have the snprintf function.  */
+#define HAVE_SNPRINTF 1
+
+/* Define if you have the srand function.  */
+#define HAVE_SRAND 1
+
+/* Define if you have the srandom function.  */
+#define HAVE_SRANDOM 1
+
+/* Define if you have the stat64 function.  */
+#define HAVE_STAT64 1
+
+/* Define if you have the strcasecmp function.  */
+#define HAVE_STRCASECMP 1
+
+/* Define if you have the strchr function.  */
+#define HAVE_STRCHR 1
+
+/* Define if you have the strdup function.  */
+#define HAVE_STRDUP 1
+
+/* Define if you have the strerror function.  */
+#define HAVE_STRERROR 1
+
+/* Define if you have the strftime function.  */
+#define HAVE_STRFTIME 1
+
+/* Define if you have the strlcat function.  */
+#define HAVE_STRLCAT 1
+
+/* Define if you have the strlcpy function.  */
+#define HAVE_STRLCPY 1
+
+/* Define if you have the strndup function.  */
+#define HAVE_STRNDUP 1
+
+/* Define if you have the strnlen function.  */
+#define HAVE_STRNLEN 1
+
+/* Define if you have the strpbrk function.  */
+#define HAVE_STRPBRK 1
+
+/* Define if you have the strtoul function.  */
+#define HAVE_STRTOUL 1
+
+/* Define if you have the symlink function.  */
+#define HAVE_SYMLINK 1
+
+/* Define if you have the syscall function.  */
+#define HAVE_SYSCALL 1
+
+/* Define if you have the sysconf function.  */
+#define HAVE_SYSCONF 1
+
+/* Define if you have the syslog function.  */
+#define HAVE_SYSLOG 1
+
+/* Define if you have the updwtmp function.  */
+#define HAVE_UPDWTMP 1
+
+/* Define if you have the updwtmpx function.  */
+/* #undef HAVE_UPDWTMPX */
+
+/* Define if you have the usleep function.  */
+#define HAVE_USLEEP 1
+
+/* Define if you have the utime function.  */
+#define HAVE_UTIME 1
+
+/* Define if you have the utimes function.  */
+#define HAVE_UTIMES 1
+
+/* Define if you have the vasprintf function.  */
+#define HAVE_VASPRINTF 1
+
+/* Define if you have the vsnprintf function.  */
+#define HAVE_VSNPRINTF 1
+
+/* Define if you have the vsyslog function.  */
+#define HAVE_VSYSLOG 1
+
+/* Define if you have the waitpid function.  */
+#define HAVE_WAITPID 1
+
+/* Define if you have the yp_get_default_domain function.  */
+/* #undef HAVE_YP_GET_DEFAULT_DOMAIN */
+
+/* Define if you have the <arpa/inet.h> header file.  */
+#define HAVE_ARPA_INET_H 1
+
+/* Define if you have the <compat.h> header file.  */
+/* #undef HAVE_COMPAT_H */
+
+/* Define if you have the <ctype.h> header file.  */
+#define HAVE_CTYPE_H 1
+
+/* Define if you have the <dirent.h> header file.  */
+#define HAVE_DIRENT_H 1
+
+/* Define if you have the <dlfcn.h> header file.  */
+#define HAVE_DLFCN_H 1
+
+/* Define if you have the <fcntl.h> header file.  */
+#define HAVE_FCNTL_H 1
+
+/* Define if you have the <glob.h> header file.  */
+#define HAVE_GLOB_H 1
+
+/* Define if you have the <grp.h> header file.  */
+#define HAVE_GRP_H 1
+
+/* Define if you have the <history.h> header file.  */
+/* #undef HAVE_HISTORY_H */
+
+/* Define if you have the <lastlog.h> header file.  */
+#define HAVE_LASTLOG_H 1
+
+/* Define if you have the <limits.h> header file.  */
+#define HAVE_LIMITS_H 1
+
+/* Define if you have the <linux/xqm.h> header file.  */
+/* #undef HAVE_LINUX_XQM_H */
+
+/* Define if you have the <memory.h> header file.  */
+#define HAVE_MEMORY_H 1
+
+/* Define if you have the <ndir.h> header file.  */
+/* #undef HAVE_NDIR_H */
+
+/* Define if you have the <net/if.h> header file.  */
+#define HAVE_NET_IF_H 1
+
+/* Define if you have the <netinet/in_ip.h> header file.  */
+/* #undef HAVE_NETINET_IN_IP_H */
+
+/* Define if you have the <netinet/in_systm.h> header file.  */
+#define HAVE_NETINET_IN_SYSTM_H 1
+
+/* Define if you have the <netinet/ip.h> header file.  */
+#define HAVE_NETINET_IP_H 1
+
+/* Define if you have the <netinet/tcp.h> header file.  */
+#define HAVE_NETINET_TCP_H 1
+
+/* Define if you have the <ns_api.h> header file.  */
+/* #undef HAVE_NS_API_H */
+
+/* Define if you have the <nss.h> header file.  */
+/* #undef HAVE_NSS_H */
+
+/* Define if you have the <nss_common.h> header file.  */
+/* #undef HAVE_NSS_COMMON_H */
+
+/* Define if you have the <nsswitch.h> header file.  */
+/* #undef HAVE_NSSWITCH_H */
+
+/* Define if you have the <poll.h> header file.  */
+#define HAVE_POLL_H 1
+
+/* Define if you have the <pthread.h> header file.  */
+#define HAVE_PTHREAD_H 1
+
+/* Define if you have the <readline.h> header file.  */
+/* #undef HAVE_READLINE_H */
+
+/* Define if you have the <readline/history.h> header file.  */
+/* #undef HAVE_READLINE_HISTORY_H */
+
+/* Define if you have the <readline/readline.h> header file.  */
+/* #undef HAVE_READLINE_READLINE_H */
+
+/* Define if you have the <rpc/rpc.h> header file.  */
+#define HAVE_RPC_RPC_H 1
+
+/* Define if you have the <rpcsvc/nis.h> header file.  */
+/* #undef HAVE_RPCSVC_NIS_H */
+
+/* Define if you have the <rpcsvc/yp_prot.h> header file.  */
+/* #undef HAVE_RPCSVC_YP_PROT_H */
+
+/* Define if you have the <rpcsvc/ypclnt.h> header file.  */
+/* #undef HAVE_RPCSVC_YPCLNT_H */
+
+/* Define if you have the <security/_pam_macros.h> header file.  */
+/* #undef HAVE_SECURITY__PAM_MACROS_H */
+
+/* Define if you have the <security/pam_appl.h> header file.  */
+/* #undef HAVE_SECURITY_PAM_APPL_H */
+
+/* Define if you have the <security/pam_modules.h> header file.  */
+/* #undef HAVE_SECURITY_PAM_MODULES_H */
+
+/* Define if you have the <shadow.h> header file.  */
+#define HAVE_SHADOW_H 1
+
+/* Define if you have the <stdarg.h> header file.  */
+#define HAVE_STDARG_H 1
+
+/* Define if you have the <stdlib.h> header file.  */
+#define HAVE_STDLIB_H 1
+
+/* Define if you have the <string.h> header file.  */
+#define HAVE_STRING_H 1
+
+/* Define if you have the <strings.h> header file.  */
+#define HAVE_STRINGS_H 1
+
+/* Define if you have the <stropts.h> header file.  */
+/* #undef HAVE_STROPTS_H */
+
+/* Define if you have the <synch.h> header file.  */
+/* #undef HAVE_SYNCH_H */
+
+/* Define if you have the <sys/acl.h> header file.  */
+/* #undef HAVE_SYS_ACL_H */
+
+/* Define if you have the <sys/capability.h> header file.  */
+/* #undef HAVE_SYS_CAPABILITY_H */
+
+/* Define if you have the <sys/cdefs.h> header file.  */
+#define HAVE_SYS_CDEFS_H 1
+
+/* Define if you have the <sys/dir.h> header file.  */
+/* #undef HAVE_SYS_DIR_H */
+
+/* Define if you have the <sys/dustat.h> header file.  */
+/* #undef HAVE_SYS_DUSTAT_H */
+
+/* Define if you have the <sys/fcntl.h> header file.  */
+#define HAVE_SYS_FCNTL_H 1
+
+/* Define if you have the <sys/file.h> header file.  */
+#define HAVE_SYS_FILE_H 1
+
+/* Define if you have the <sys/filio.h> header file.  */
+/* #undef HAVE_SYS_FILIO_H */
+
+/* Define if you have the <sys/filsys.h> header file.  */
+/* #undef HAVE_SYS_FILSYS_H */
+
+/* Define if you have the <sys/fs/s5param.h> header file.  */
+/* #undef HAVE_SYS_FS_S5PARAM_H */
+
+/* Define if you have the <sys/fs/vx_quota.h> header file.  */
+/* #undef HAVE_SYS_FS_VX_QUOTA_H */
+
+/* Define if you have the <sys/id.h> header file.  */
+/* #undef HAVE_SYS_ID_H */
+
+/* Define if you have the <sys/ioctl.h> header file.  */
+#define HAVE_SYS_IOCTL_H 1
+
+/* Define if you have the <sys/ipc.h> header file.  */
+#define HAVE_SYS_IPC_H 1
+
+/* Define if you have the <sys/mman.h> header file.  */
+#define HAVE_SYS_MMAN_H 1
+
+/* Define if you have the <sys/mode.h> header file.  */
+/* #undef HAVE_SYS_MODE_H */
+
+/* Define if you have the <sys/mount.h> header file.  */
+#define HAVE_SYS_MOUNT_H 1
+
+/* Define if you have the <sys/ndir.h> header file.  */
+/* #undef HAVE_SYS_NDIR_H */
+
+/* Define if you have the <sys/param.h> header file.  */
+#define HAVE_SYS_PARAM_H 1
+
+/* Define if you have the <sys/priv.h> header file.  */
+/* #undef HAVE_SYS_PRIV_H */
+
+/* Define if you have the <sys/resource.h> header file.  */
+#define HAVE_SYS_RESOURCE_H 1
+
+/* Define if you have the <sys/security.h> header file.  */
+/* #undef HAVE_SYS_SECURITY_H */
+
+/* Define if you have the <sys/select.h> header file.  */
+#define HAVE_SYS_SELECT_H 1
+
+/* Define if you have the <sys/shm.h> header file.  */
+#define HAVE_SYS_SHM_H 1
+
+/* Define if you have the <sys/socket.h> header file.  */
+#define HAVE_SYS_SOCKET_H 1
+
+/* Define if you have the <sys/sockio.h> header file.  */
+/* #undef HAVE_SYS_SOCKIO_H */
+
+/* Define if you have the <sys/statfs.h> header file.  */
+#define HAVE_SYS_STATFS_H 1
+
+/* Define if you have the <sys/statvfs.h> header file.  */
+#define HAVE_SYS_STATVFS_H 1
+
+/* Define if you have the <sys/syscall.h> header file.  */
+#define HAVE_SYS_SYSCALL_H 1
+
+/* Define if you have the <sys/syslog.h> header file.  */
+#define HAVE_SYS_SYSLOG_H 1
+
+/* Define if you have the <sys/termio.h> header file.  */
+/* #undef HAVE_SYS_TERMIO_H */
+
+/* Define if you have the <sys/time.h> header file.  */
+#define HAVE_SYS_TIME_H 1
+
+/* Define if you have the <sys/unistd.h> header file.  */
+#define HAVE_SYS_UNISTD_H 1
+
+/* Define if you have the <sys/vfs.h> header file.  */
+#define HAVE_SYS_VFS_H 1
+
+/* Define if you have the <sys/wait.h> header file.  */
+#define HAVE_SYS_WAIT_H 1
+
+/* Define if you have the <syscall.h> header file.  */
+#define HAVE_SYSCALL_H 1
+
+/* Define if you have the <syslog.h> header file.  */
+#define HAVE_SYSLOG_H 1
+
+/* Define if you have the <termio.h> header file.  */
+#define HAVE_TERMIO_H 1
+
+/* Define if you have the <termios.h> header file.  */
+#define HAVE_TERMIOS_H 1
+
+/* Define if you have the <unistd.h> header file.  */
+#define HAVE_UNISTD_H 1
+
+/* Define if you have the <utime.h> header file.  */
+#define HAVE_UTIME_H 1
+
+/* Define if you have the <utmp.h> header file.  */
+#define HAVE_UTMP_H 1
+
+/* Define if you have the <utmpx.h> header file.  */
+/* #undef HAVE_UTMPX_H */
+
+/* Define if you have the acl library (-lacl).  */
+/* #undef HAVE_LIBACL */
+
+/* Define if you have the gen library (-lgen).  */
+/* #undef HAVE_LIBGEN */
+
+/* Define if you have the inet library (-linet).  */
+/* #undef HAVE_LIBINET */
+
+/* Define if you have the nsl library (-lnsl).  */
+/* #undef HAVE_LIBNSL */
+
+/* Define if you have the nsl_s library (-lnsl_s).  */
+/* #undef HAVE_LIBNSL_S */
+
+/* Define if you have the resolv library (-lresolv).  */
+/* #undef HAVE_LIBRESOLV */
+
+/* Define if you have the sec library (-lsec).  */
+/* #undef HAVE_LIBSEC */
+
+/* Define if you have the security library (-lsecurity).  */
+/* #undef HAVE_LIBSECURITY */
+
+/* Define if you have the socket library (-lsocket).  */
+/* #undef HAVE_LIBSOCKET */
+
+/* Whether to enable POSIX support */
+/* #undef _POSIX_C_SOURCE */
+
+/* Whether to enable System V compatibility */
+/* #undef _SYSV */
+
diff -pruwN samba-2.2.12/source/include/stamp-h samba-2.2.12-livebox/include/stamp-h
--- samba-2.2.12/source/include/stamp-h	1970-01-01 01:00:00.000000000 +0100
+++ samba-2.2.12-livebox/include/stamp-h	2010-03-31 11:45:59.000000000 +0200
@@ -0,0 +1 @@
+Sun Jul 18 20:32:29 UTC 1999
diff -pruwN samba-2.2.12/source/.indent.pro samba-2.2.12-livebox/.indent.pro
--- samba-2.2.12/source/.indent.pro	2004-08-12 20:24:23.000000000 +0200
+++ samba-2.2.12-livebox/.indent.pro	1970-01-01 01:00:00.000000000 +0100
@@ -1,14 +0,0 @@
--cli8 -cbi0 -bli0 -bl -i8 -npsl -npcs -bbo -ncs -hnl
--T BOOL
--T pstring
--T fstring
--T tdb_len
--T tdb_off
--T uint32
--T uint16
--T uint8
--T LDAPDB
--T PLDAPDB
--T POLICY_HND
--T UNISTR2
--T DOM_SID
diff -pruwN samba-2.2.12/source/install-sh samba-2.2.12-livebox/install-sh
--- samba-2.2.12/source/install-sh	2004-08-12 20:24:35.000000000 +0200
+++ samba-2.2.12-livebox/install-sh	1970-01-01 01:00:00.000000000 +0100
@@ -1,238 +0,0 @@
-#! /bin/sh
-#
-# install - install a program, script, or datafile
-# This comes from X11R5.
-#
-# Calling this script install-sh is preferred over install.sh, to prevent
-# `make' implicit rules from creating a file called install from it
-# when there is no Makefile.
-#
-# This script is compatible with the BSD install script, but was written
-# from scratch.
-#
-
-
-# set DOITPROG to echo to test this script
-
-# Don't use :- since 4.3BSD and earlier shells don't like it.
-doit="${DOITPROG-}"
-
-
-# put in absolute paths if you don't have them in your path; or use env. vars.
-
-mvprog="${MVPROG-mv}"
-cpprog="${CPPROG-cp}"
-chmodprog="${CHMODPROG-chmod}"
-chownprog="${CHOWNPROG-chown}"
-chgrpprog="${CHGRPPROG-chgrp}"
-stripprog="${STRIPPROG-strip}"
-rmprog="${RMPROG-rm}"
-mkdirprog="${MKDIRPROG-mkdir}"
-
-transformbasename=""
-transform_arg=""
-instcmd="$mvprog"
-chmodcmd="$chmodprog 0755"
-chowncmd=""
-chgrpcmd=""
-stripcmd=""
-rmcmd="$rmprog -f"
-mvcmd="$mvprog"
-src=""
-dst=""
-dir_arg=""
-
-while [ x"$1" != x ]; do
-    case $1 in
-	-c) instcmd="$cpprog"
-	    shift
-	    continue;;
-
-	-d) dir_arg=true
-	    shift
-	    continue;;
-
-	-m) chmodcmd="$chmodprog $2"
-	    shift
-	    shift
-	    continue;;
-
-	-o) chowncmd="$chownprog $2"
-	    shift
-	    shift
-	    continue;;
-
-	-g) chgrpcmd="$chgrpprog $2"
-	    shift
-	    shift
-	    continue;;
-
-	-s) stripcmd="$stripprog"
-	    shift
-	    continue;;
-
-	-t=*) transformarg=`echo $1 | sed 's/-t=//'`
-	    shift
-	    continue;;
-
-	-b=*) transformbasename=`echo $1 | sed 's/-b=//'`
-	    shift
-	    continue;;
-
-	*)  if [ x"$src" = x ]
-	    then
-		src=$1
-	    else
-		# this colon is to work around a 386BSD /bin/sh bug
-		:
-		dst=$1
-	    fi
-	    shift
-	    continue;;
-    esac
-done
-
-if [ x"$src" = x ]
-then
-	echo "install:	no input file specified"
-	exit 1
-else
-	true
-fi
-
-if [ x"$dir_arg" != x ]; then
-	dst=$src
-	src=""
-	
-	if [ -d $dst ]; then
-		instcmd=:
-	else
-		instcmd=mkdir
-	fi
-else
-
-# Waiting for this to be detected by the "$instcmd $src $dsttmp" command
-# might cause directories to be created, which would be especially bad 
-# if $src (and thus $dsttmp) contains '*'.
-
-	if [ -f $src -o -d $src ]
-	then
-		true
-	else
-		echo "install:  $src does not exist"
-		exit 1
-	fi
-	
-	if [ x"$dst" = x ]
-	then
-		echo "install:	no destination specified"
-		exit 1
-	else
-		true
-	fi
-
-# If destination is a directory, append the input filename; if your system
-# does not like double slashes in filenames, you may need to add some logic
-
-	if [ -d $dst ]
-	then
-		dst="$dst"/`basename $src`
-	else
-		true
-	fi
-fi
-
-## this sed command emulates the dirname command
-dstdir=`echo $dst | sed -e 's,[^/]*$,,;s,/$,,;s,^$,.,'`
-
-# Make sure that the destination directory exists.
-#  this part is taken from Noah Friedman's mkinstalldirs script
-
-# Skip lots of stat calls in the usual case.
-if [ ! -d "$dstdir" ]; then
-defaultIFS='	
-'
-IFS="${IFS-${defaultIFS}}"
-
-oIFS="${IFS}"
-# Some sh's can't handle IFS=/ for some reason.
-IFS='%'
-set - `echo ${dstdir} | sed -e 's@/@%@g' -e 's@^%@/@'`
-IFS="${oIFS}"
-
-pathcomp=''
-
-while [ $# -ne 0 ] ; do
-	pathcomp="${pathcomp}${1}"
-	shift
-
-	if [ ! -d "${pathcomp}" ] ;
-        then
-		$mkdirprog "${pathcomp}"
-	else
-		true
-	fi
-
-	pathcomp="${pathcomp}/"
-done
-fi
-
-if [ x"$dir_arg" != x ]
-then
-	$doit $instcmd $dst &&
-
-	if [ x"$chowncmd" != x ]; then $doit $chowncmd $dst; else true ; fi &&
-	if [ x"$chgrpcmd" != x ]; then $doit $chgrpcmd $dst; else true ; fi &&
-	if [ x"$stripcmd" != x ]; then $doit $stripcmd $dst; else true ; fi &&
-	if [ x"$chmodcmd" != x ]; then $doit $chmodcmd $dst; else true ; fi
-else
-
-# If we're going to rename the final executable, determine the name now.
-
-	if [ x"$transformarg" = x ] 
-	then
-		dstfile=`basename $dst`
-	else
-		dstfile=`basename $dst $transformbasename | 
-			sed $transformarg`$transformbasename
-	fi
-
-# don't allow the sed command to completely eliminate the filename
-
-	if [ x"$dstfile" = x ] 
-	then
-		dstfile=`basename $dst`
-	else
-		true
-	fi
-
-# Make a temp file name in the proper directory.
-
-	dsttmp=$dstdir/#inst.$$#
-
-# Move or copy the file name to the temp name
-
-	$doit $instcmd $src $dsttmp &&
-
-	trap "rm -f ${dsttmp}" 0 &&
-
-# and set any options; do chmod last to preserve setuid bits
-
-# If any of these fail, we abort the whole thing.  If we want to
-# ignore errors from any of these, just make sure not to ignore
-# errors from the above "$doit $instcmd $src $dsttmp" command.
-
-	if [ x"$chowncmd" != x ]; then $doit $chowncmd $dsttmp; else true;fi &&
-	if [ x"$chgrpcmd" != x ]; then $doit $chgrpcmd $dsttmp; else true;fi &&
-	if [ x"$stripcmd" != x ]; then $doit $stripcmd $dsttmp; else true;fi &&
-	if [ x"$chmodcmd" != x ]; then $doit $chmodcmd $dsttmp; else true;fi &&
-
-# Now rename the file to the real destination.
-
-	$doit $rmcmd -f $dstdir/$dstfile &&
-	$doit $mvcmd $dsttmp $dstdir/$dstfile 
-
-fi &&
-
-
-exit 0
diff -pruwN samba-2.2.12/source/kill_share_process.c samba-2.2.12-livebox/kill_share_process.c
--- samba-2.2.12/source/kill_share_process.c	1970-01-01 01:00:00.000000000 +0100
+++ samba-2.2.12-livebox/kill_share_process.c	2010-03-31 11:45:59.000000000 +0200
@@ -0,0 +1,183 @@
+///////////////////////////////////////////////////////////////////////////////
+/**
+ * @file
+ * @brief
+ * @note    SAGEM Software & Technologies - SST
+ * @author  Wael MAAOUI
+ * @date    2008-04-29
+ * @par     Licences
+ * @note    CopyRight (C) 2000-2008 SST
+ * @version
+ */
+///////////////////////////////////////////////////////////////////////////////
+///
+/// INCLUDE
+///
+
+
+#include <stdio.h>
+#include <stdlib.h>
+#include <unistd.h>
+#include <glob.h>
+#include <string.h>
+#include <errno.h>
+#include <assert.h>
+#include <fcntl.h>
+#include <sys/stat.h>
+#include <sys/types.h>
+#include <signal.h>
+
+
+
+
+///////////////////////////////////////////////////////////////////////////////
+///
+/// MACROS
+///
+
+
+#ifdef __DEBUG__
+#define DEBUG(message, args...)     printf("%s/%s:%d=> "message"\n",__FILE__, __FUNCTION__, __LINE__, ##args)
+#else
+#define DEBUG(message, args...)
+#endif // __DEBUG__
+
+#define FAILURE  -1
+#define SUCCESS   0
+
+
+#ifdef _DYNAMIC
+#define GLOB_PATTERN "/proc/[0-9]*/cwd"
+#else
+#define GLOB_PATTERN "/proc/[0-9]*/fd/[0-9]*"
+#endif
+
+#define MAX_PATH_SIZE 256
+#define MAX_PID_LENGTH  4
+static glob_t globbuf_process;
+
+
+static void usage(const char *);
+static void kill_static_share(char *proc_path,char *link,char *mounting_point);
+static void kill_dynamic_share(char *proc_path,char *link,char *mounting_point);
+/**
+ * @brief  this function shows the program usage
+ * @author Wael MAAOUI
+ * @param  main_program :program name
+ * @returns void
+ */
+
+static void usage(const char *main_program)
+{
+    fprintf(stdout, "Usage :\n\t\%s  <Mounting path>\tFor Killing <Mounting path> Process (compile with -D_DYNAMIC for dynamic share)\n",main_program);
+}
+
+/**
+ * @brief  this function kill the process which file descriptor
+ * @brief  points into a mounting_point
+ * @author Wael MAAOUI
+ * @param  : proc_path : result of glob
+ * @param  : link : the link of proc_path
+ * @param  : mounting_point : mounting point
+ * @returns void
+ */
+
+
+static void kill_static_share(char *proc_path,char *link,char *mounting_point)
+{
+	char  path[MAX_PATH_SIZE]="";
+	char *proc_pid=NULL;
+    char *s=NULL;
+
+	assert(proc_path !=NULL);
+    assert(link !=NULL);
+    assert(mounting_point !=NULL);
+
+	   if (strstr(link,mounting_point)!=NULL)
+        {
+            strcpy(path,proc_path);
+            s=strstr(path,"/fd/");
+            path[strlen(path)-strlen(s)]='\0';
+            proc_pid=strrchr(path, '/') + 1;
+            kill (atoi(proc_pid),SIGTERM);
+        }
+
+
+}
+
+/**
+ * @brief  this function kill the process which current working directory
+ * @brief  points into a mounting_point
+ * @author Wael MAAOUI
+ * @param  : proc_path : result of glob
+ * @param  : link : the link of proc_path
+ * @param  : mounting_point : mounting point
+ * @returns void
+ */
+
+
+static void kill_dynamic_share(char *proc_path,char *link,char *mounting_path)
+{
+	char  path[MAX_PATH_SIZE]="";
+	char *proc_pid=NULL;
+
+
+	assert(proc_path !=NULL);
+    assert(link !=NULL);
+    assert(mounting_path !=NULL);
+
+    if (strcmp(link,mounting_path)==0)
+    {
+        strcpy(path,proc_path);
+        path[strlen(path)-4]='\0';
+        proc_pid=strrchr(path, '/') + 1;
+        kill (atoi(proc_pid),SIGTERM);
+    }
+}
+
+
+
+
+
+
+int main(int argc, char *argv[])
+{
+
+
+    int i;
+    char link[MAX_PATH_SIZE]="";
+
+    if(argc != 2) { /* Incorrect Usage */
+       usage(argv[0]);
+	   return FAILURE;
+    }
+
+
+    assert(argv[1] != NULL);
+
+
+        if ((glob(GLOB_PATTERN, GLOB_DOOFFS | GLOB_ONLYDIR | GLOB_MARK, NULL, &globbuf_process)) != 0)
+        {
+            DEBUG("No Matching Found,%d\n",globbuf_process.gl_pathc);
+            return FAILURE;
+        }
+        for (i=0; i<globbuf_process.gl_pathc; i++)
+
+        {
+            memset(link,0,MAX_PATH_SIZE);
+            readlink(globbuf_process.gl_pathv[i],link,strlen(argv[1]));
+            #ifdef _DYNAMIC
+            kill_dynamic_share(globbuf_process.gl_pathv[i],link,argv[1]);
+            #else
+            kill_static_share(globbuf_process.gl_pathv[i],link,argv[1]);
+            #endif
+
+
+        }
+
+
+ globfree(&globbuf_process);
+    return SUCCESS;
+
+
+}
diff -pruwN samba-2.2.12/source/lib/access.c samba-2.2.12-livebox/lib/access.c
--- samba-2.2.12/source/lib/access.c	2004-08-12 20:24:24.000000000 +0200
+++ samba-2.2.12-livebox/lib/access.c	2010-03-31 11:45:59.000000000 +0200
@@ -17,111 +17,18 @@ static const char *sep = ", \t";
 
 #define ALLONES  ((uint32)0xFFFFFFFF)
 
-/* masked_match - match address against netnumber/netmask */
+/* masked_match - match address against netnumber\netmask */
 static int masked_match(char *tok, char *slash, char *s)
 {
-	uint32 net;
-	uint32 mask;
-	uint32 addr;
-
-	if ((addr = interpret_addr(s)) == INADDR_NONE)
-		return (False);
-	*slash = 0;
-	net = interpret_addr(tok);
-	*slash = '/';
-
-        if (strlen(slash + 1) > 2) {
-                mask = interpret_addr(slash + 1);
-        } else {
-		mask = (uint32)((ALLONES << atoi(slash + 1)) ^ ALLONES);
-        }
-
-	if (net == INADDR_NONE || mask == INADDR_NONE) {
-		DEBUG(0,("access: bad net/mask access control: %s\n", tok));
-		return (False);
-	}
-	return ((addr & mask) == net);
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /* string_match - match string against token */
 static int string_match(char *tok,char *s, char *invalid_char)
 {
-	size_t     tok_len;
-	size_t     str_len;
-	char   *cut;
-
-	*invalid_char = '\0';
-
-	/* Return True if a token has the magic value "ALL". Return
-	 * FAIL if the token is "FAIL". If the token starts with a "."
-	 * (domain name), return True if it matches the last fields of
-	 * the string. If the token has the magic value "LOCAL",
-	 * return True if the string does not contain a "."
-	 * character. If the token ends on a "." (network number),
-	 * return True if it matches the first fields of the
-	 * string. If the token begins with a "@" (netgroup name),
-	 * return True if the string is a (host) member of the
-	 * netgroup. Return True if the token fully matches the
-	 * string. If the token is a netnumber/netmask pair, return
-	 * True if the address is a member of the specified subnet.  */
-
-	if (tok[0] == '.') {			/* domain: match last fields */
-		if ((str_len = strlen(s)) > (tok_len = strlen(tok))
-		    && strcasecmp(tok, s + str_len - tok_len) == 0)
-			return (True);
-	} else if (tok[0] == '@') { /* netgroup: look it up */
-#ifdef	HAVE_NETGROUP
-		static char *mydomain = NULL;
-		char *hostname = NULL;
-		BOOL netgroup_ok = False;
-
-		if (!mydomain) yp_get_default_domain(&mydomain);
-
-		if (!mydomain) {
-			DEBUG(0,("Unable to get default yp domain.\n"));
-			return False;
-		}
-		if (!(hostname = strdup(s))) {
-			DEBUG(1,("out of memory for strdup!\n"));
-			return False;
-		}
-		
-		netgroup_ok = innetgr(tok + 1, hostname, (char *) 0, mydomain);
-		
-		DEBUG(5,("looking for %s of domain %s in netgroup %s gave %s\n", 
-			 hostname,
-			 mydomain, 
-			 tok+1,
-			 BOOLSTR(netgroup_ok)));
-
-		SAFE_FREE(hostname);
-      
-		if (netgroup_ok) return(True);
-#else
-		DEBUG(0,("access: netgroup support is not configured\n"));
-		return (False);
-#endif
-	} else if (strcasecmp(tok, "ALL") == 0) {	/* all: match any */
-		return (True);
-	} else if (strcasecmp(tok, "FAIL") == 0) {	/* fail: match any */
-		return (FAIL);
-	} else if (strcasecmp(tok, "LOCAL") == 0) {	/* local: no dots */
-		if (strchr(s, '.') == 0 && strcasecmp(s, "unknown") != 0)
-			return (True);
-	} else if (!strcasecmp(tok, s)) {   /* match host name or address */
-		return (True);
-	} else if (tok[(tok_len = strlen(tok)) - 1] == '.') {	/* network */
-		if (strncmp(tok, s, tok_len) == 0)
-			return (True);
-	} else if ((cut = strchr(tok, '/')) != 0) {	/* netnumber/netmask */
-		if (isdigit((int)s[0]) && masked_match(tok, cut, s))
-			return (True);
-	} else if (strchr(tok, '*') != 0) {
-		*invalid_char = '*';
-	} else if (strchr(tok, '?') != 0) {
-		*invalid_char = '?';
-	}
-	return (False);
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 
@@ -157,44 +64,8 @@ token '%s' in an allow/deny hosts line.\
 /* (All modifications are marked with the initials "jkf") */
 static int list_match(char *list,char *item, int (*match_fn)(char *, char *))
 {
-    char   *tok;
-    char   *listcopy;		/* jkf */
-    int     match = False;
-
-    /*
-     * jkf@soton.ac.uk -- 31 August 1994 -- Stop list_match()
-     * overwriting the list given as its first parameter.
-     */
-
-    /* jkf -- can get called recursively with NULL list */
-    listcopy = (list == 0) ? (char *)0 : strdup(list);
-
-    /*
-     * Process tokens one at a time. We have exhausted all possible matches
-     * when we reach an "EXCEPT" token or the end of the list. If we do find
-     * a match, look for an "EXCEPT" list and recurse to determine whether
-     * the match is affected by any exceptions.
-     */
-
-    for (tok = strtok(listcopy, sep); tok ; tok = strtok(NULL, sep)) {
-	if (strcasecmp(tok, "EXCEPT") == 0)	/* EXCEPT: give up */
-	    break;
-	if ((match = (*match_fn) (tok, item)))	/* True or FAIL */
-	    break;
-    }
-    /* Process exceptions to True or FAIL matches. */
-
-    if (match != False) {
-	while ((tok = strtok((char *) 0, sep)) && strcasecmp(tok, "EXCEPT"))
-	     /* VOID */ ;
-	if (tok == 0 || list_match((char *) 0, item, match_fn) == False) {
-	    SAFE_FREE(listcopy); /* jkf */
-	    return (match);
-	}
-    }
-
-    SAFE_FREE(listcopy); /* jkf */
-    return (False);
+DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 
@@ -274,7 +145,7 @@ static BOOL only_ipaddrs_in_list(const c
 		{
 			/* 
 			 * if we failed, make sure that it was not because the token
-			 * was a network/netmask pair.  Only network/netmask pairs
+			 * was a network\netmask pair.  Only network\netmask pairs
 			 * have a '/' in them
 			 */
 			if (strchr(tok, '/') == NULL)
diff -pruwN samba-2.2.12/source/lib/bitmap.c samba-2.2.12-livebox/lib/bitmap.c
--- samba-2.2.12/source/lib/bitmap.c	2004-08-12 20:24:25.000000000 +0200
+++ samba-2.2.12-livebox/lib/bitmap.c	2010-03-31 11:45:59.000000000 +0200
@@ -54,11 +54,8 @@ free a bitmap.
 
 void bitmap_free(struct bitmap *bm)
 {
-	if (!bm)
-		return;
-
-	SAFE_FREE(bm->b);
-	SAFE_FREE(bm);
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /****************************************************************************
diff -pruwN samba-2.2.12/source/lib/charcnv.c samba-2.2.12-livebox/lib/charcnv.c
--- samba-2.2.12/source/lib/charcnv.c	2004-08-12 20:24:25.000000000 +0200
+++ samba-2.2.12-livebox/lib/charcnv.c	2010-03-31 11:45:59.000000000 +0200
@@ -104,66 +104,16 @@ static void init_iso8859_1(int codepage)
 
 static void init_iso8859_15(int codepage) {
 
-	setupmaps();
-
-
-    if (codepage == 775) {
-        /* MSDOS Code Page 775 -> ISO-8859-15  this is for estonian */
-update_map("\240\377\242\226\243\234\246\276\247\365");
-update_map("\250\325\251\250\253\256\254\252\255\360\256\251");
-update_map("\260\370\261\361\262\375\263\374\264\317\265\346\266\364\267\372");
-update_map("\270\330\271\373\273\257");
-update_map("\304\216\305\217\306\222");
-update_map("\311\220");
-update_map("\323\340\325\345\326\231\327\236");
-update_map("\330\235\334\232\337\341");
-update_map("\344\204\345\206\346\221");
-update_map("\351\202");
-update_map("\363\242\365\344\366\224\367\366");
-update_map("\370\233\374\201");
-    } else {
-        /* MSDOS Code Page 850 -> ISO-8859-15 */
-update_map("\240\377\241\255\242\275\243\234\244\317\245\276\246\321\247\365");
-update_map("\250\320\251\270\252\246\253\256\254\252\255\360\256\251\257\356");
-update_map("\260\370\261\361\262\375\263\374\264\350\265\346\266\364\267\372");
-update_map("\270\347\271\373\272\247\273\257\274\254\275\253\276\363\277\250");
-update_map("\300\267\301\265\302\266\303\307\304\216\305\217\306\222\307\200");
-update_map("\310\324\311\220\312\322\313\323\314\336\315\326\316\327\317\330");
-update_map("\320\321\321\245\322\343\323\340\324\342\325\345\326\231\327\236");
-update_map("\330\235\331\353\332\351\333\352\334\232\335\355\336\350\337\341");
-update_map("\340\205\341\240\342\203\343\306\344\204\345\206\346\221\347\207");
-update_map("\350\212\351\202\352\210\353\211\354\215\355\241\356\214\357\213");
-update_map("\360\320\361\244\362\225\363\242\364\223\365\344\366\224\367\366");
-update_map("\370\233\371\227\372\243\373\226\374\201\375\354\376\347\377\230");
-}
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /* Init for eastern european languages. */
 
 static void init_iso8859_2(void) {
 
-	setupmaps();
-
-/*
- * Tranlation table created by Petr Hubeny <psh@capitol.cz>
- * Requires client code page = 852
- * and character set = ISO8859-2 in smb.conf
- */
-
-/* MSDOS Code Page 852 -> ISO-8859-2 */
-update_map("\240\377"); /* Fix for non-breaking space */
-update_map("\241\244\242\364\243\235\244\317\245\225\246\227\247\365");
-update_map("\250\371\251\346\252\270\253\233\254\215\256\246\257\275");
-update_map("\261\245\262\362\263\210\264\357\265\226\266\230\267\363");
-update_map("\270\367\271\347\272\255\273\234\274\253\275\361\276\247\277\276");
-update_map("\300\350\301\265\302\266\303\306\304\216\305\221\306\217\307\200");
-update_map("\310\254\311\220\312\250\313\323\314\267\315\326\316\327\317\322");
-update_map("\320\321\321\343\322\325\323\340\324\342\325\212\326\231\327\236");
-update_map("\330\374\331\336\332\351\333\353\334\232\335\355\336\335\337\341");
-update_map("\340\352\341\240\342\203\343\307\344\204\345\222\346\206\347\207");
-update_map("\350\237\351\202\352\251\353\211\354\330\355\241\356\214\357\324");
-update_map("\360\320\361\344\362\345\363\242\364\223\365\213\366\224\367\366");
-update_map("\370\375\371\205\372\243\373\373\374\201\375\354\376\356\377\372");
+DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /* Init for russian language (iso8859-5) */
@@ -172,88 +122,32 @@ update_map("\370\375\371\205\372\243\373
 /* 1125 mapping added by Alexander Bokovoy <a.bokovoy@sam-solutions.net> */
 static void init_iso8859_5(int codepage)
 {
-	setupmaps();
-
-	if (codepage == 1125) {
-/* MSDOS Code Page 1125 -> ISO8859-5 */
-update_map ("\360\374\361\361\340\340\341\341\320\240\342\342\321\241\300\220");
-update_map ("\364\365\343\343\322\242\301\221\260\200\344\344\323\243\302\222");
-update_map ("\261\201\366\367\241\360\345\345\324\244\303\223\262\202\367\371");
-update_map ("\346\346\325\245\304\224\263\203\347\347\326\246\305\225\264\204");
-update_map ("\244\364\350\350\327\247\306\226\265\205\351\351\330\250\307\227");
-update_map ("\266\206\246\366\331\251\310\230\267\207\247\370\311\231\270\210");
-update_map ("\271\211");
-        } else {
-/* MSDOS Code Page 866 -> ISO8859-5 */
-update_map("\260\200\261\201\262\202\263\203\264\204\265\205\266\206\267\207");
-update_map("\270\210\271\211\272\212\273\213\274\214\275\215\276\216\277\217");
-update_map("\300\220\301\221\302\222\303\223\304\224\305\225\306\226\307\227");
-update_map("\310\230\311\231\312\232\313\233\314\234\315\235\316\236\317\237");
-update_map("\320\240\321\241\322\242\323\243\324\244\325\245\326\246\327\247");
-update_map("\330\250\331\251\332\252\333\253\334\254\335\255\336\256\337\257");
-update_map("\340\340\341\341\342\342\343\343\344\344\345\345\346\346\347\347");
-update_map("\350\350\351\351\352\352\353\353\354\354\355\355\356\356\357\357");
-update_map("\241\360\361\361\244\362\364\363\247\364\367\365\256\366\376\367");
-update_map("\360\374\240\377");
-	}
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /* Added by Antonios Kavarnos (Antonios.Kavarnos@softlab.ece.ntua.gr */
 
 static void init_iso8859_7(void)
 {
-	setupmaps();
-
-/* MSDOS Code Page 737 -> ISO-8859-7 (Greek-Hellenic) */
-
-update_map("\301\200\302\201\303\202\304\203\305\204\306\205\307\206");
-update_map("\310\207\311\210\312\211\313\212\314\213\315\214\316\215\317\216");
-update_map("\320\217\321\220\323\221\324\222\325\223\326\224\327\225");
-update_map("\330\226\331\227");
-update_map("\341\230\342\231\343\232\344\233\345\234\346\235\347\236");
-update_map("\350\237\351\240\352\241\353\242\354\243\355\244\356\245\357\246");
-update_map("\360\247\361\250\362\252\363\251\364\253\365\254\366\255\367\256");
-update_map("\370\257\371\340");
-update_map("\332\364\333\365\334\341\335\342\336\343\337\345");
-update_map("\372\344\373\350\374\346\375\347\376\351");
-update_map("\266\352");
-update_map("\270\353\271\354\272\355\274\356\276\357\277\360");
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /* Added by Yedidyah Bar-David (didi@tau.ac.il) */
 
 static void init_iso8859_8(void)
 {
-       setupmaps();
-
-/* MSDOS Code Page 862 -> ISO-8859-8 (Hebrew) */
-
-update_map("\340\200\341\201\342\202\343\203\344\204\345\205\346\206\347\207");
-update_map("\350\210\351\211\352\212\353\213\354\214\355\215\356\216\357\217");
-update_map("\360\220\361\221\362\222\363\223\364\224\365\225\366\226\367\227");
-update_map("\370\230\371\231\372\232");
+DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /* Added by Deniz Akkus (akkus@alum.mit.edu) */
 
 static void init_iso8859_9(void)
 {
-  setupmaps();
-
-  /* MSDOS Code Page 857 -> ISO-8859-9 (Turkish) */
-
-  update_map("\xa0\xff\xa1\xad\xa2\xbd\xa3\x9c\xa4\xcf\xA5\xbe\xa6\xdd\xa7\xf5");
-  update_map("\xa8\xf9\xa9\xb8\xaa\xd1\xab\xae\xac\xaa\xad\xf0\xae\xa9\xaf\xee");
-  update_map("\xb0\xf8\xb1\xf1\xb2\xfd\xb3\xfc\xb4\xef\xb5\xe6\xb6\xf4\xb7\xfa");
-  update_map("\xb8\xf7\xb9\xfb\xba\xd0\xbb\xaf\xbc\xac\xbd\xab\xbe\xf3\xbf\xa8");
-  update_map("\xc0\xb7\xc1\xb5\xc2\xb6\xc3\xc7\xc4\x8e\xc5\x8f\xc6\x92\xc7\x80");
-  update_map("\xc8\xd4\xc9\x90\xca\xd2\xcb\xd3\xcc\xde\xcd\xd6\xce\xd7\xcf\xd8");
-  update_map("\xd0\xa6\xd1\xa5\xd2\xe3\xd3\xe0\xd4\xe2\xd5\xe5\xd6\x99\xd7\xe8");
-  update_map("\xd8\x9d\xd9\xeb\xda\xe9\xdb\xea\xdc\x9a\xdd\x98\xde\x9e\xdf\xe1");
-  update_map("\xe0\x85\xe1\xa0\xe2\x83\xe3\xc6\xe4\x84\xe5\x86\xe6\x91\xe7\x87");
-  update_map("\xe8\x8a\xe9\x82\xea\x88\xeb\x89\xec\xec\xed\xa1\xee\x8c\xef\x8b");
-  update_map("\xf0\xa7\xf1\xa4\xf2\x95\xf3\xa2\xf4\x93\xf5\xe4\xf6\x94\xf7\xf6");
-  update_map("\xf8\x9b\xf9\x97\xfa\xa3\xfb\x96\xfc\x81\xfd\x8d\xfe\x9f\xff\xed");
+DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /* init for Baltic Rim */
diff -pruwN samba-2.2.12/source/lib/genrand.c samba-2.2.12-livebox/lib/genrand.c
--- samba-2.2.12/source/lib/genrand.c	2004-08-12 20:24:24.000000000 +0200
+++ samba-2.2.12-livebox/lib/genrand.c	2010-03-31 11:45:59.000000000 +0200
@@ -258,18 +258,6 @@ static char c_list[] = "ABCDEFGHIJKLMNOP
 
 char *generate_random_str(size_t len)
 {
-	static unsigned char retstr[256];
-	size_t i;
-
-	memset(retstr, '\0', sizeof(retstr));
-
-	if (len > sizeof(retstr)-1)
-		len = sizeof(retstr) -1;
-	generate_random_buffer( retstr, len, False);
-	for (i = 0; i < len; i++)
-		retstr[i] = c_list[ retstr[i] % sizeof(c_list) ];
-
-	retstr[i] = '\0';
-
-	return (char *)retstr;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
diff -pruwN samba-2.2.12/source/lib/getsmbpass.c samba-2.2.12-livebox/lib/getsmbpass.c
--- samba-2.2.12/source/lib/getsmbpass.c	2004-08-12 20:24:25.000000000 +0200
+++ samba-2.2.12-livebox/lib/getsmbpass.c	2010-03-31 11:45:59.000000000 +0200
@@ -85,69 +85,8 @@ static struct termios t;
 
 char *getsmbpass(const char *prompt)    
 {
-  FILE *in, *out;
-  int echo_off;
-  static char buf[256];
-  static size_t bufsize = sizeof(buf);
-  size_t nread;
-
-  /* Catch problematic signals */
-  CatchSignal(SIGINT, SIGNAL_CAST SIG_IGN);
-
-  /* Try to write to and read from the terminal if we can.
-     If we can't open the terminal, use stderr and stdin.  */
-
-  in = fopen ("/dev/tty", "w+");
-  if (in == NULL)
-    {
-      in = stdin;
-      out = stderr;
-    }
-  else
-    out = in;
-
-  setvbuf(in, NULL, _IONBF, 0);
-
-  /* Turn echoing off if it is on now.  */
-
-  if (tcgetattr (fileno (in), &t) == 0)
-    {
-	  if (ECHO_IS_ON(t))
-	{
-		TURN_ECHO_OFF(t);
-		echo_off = tcsetattr (fileno (in), TCSAFLUSH, &t) == 0;
-		TURN_ECHO_ON(t);
-	}
-      else
-	echo_off = 0;
-    }
-  else
-    echo_off = 0;
-
-  /* Write the prompt.  */
-  fputs (prompt, out);
-  fflush (out);
-
-  /* Read the password.  */
-  buf[0] = 0;
-  fgets(buf, bufsize, in);
-  nread = strlen(buf);
-  if (buf[nread - 1] == '\n')
-    buf[nread - 1] = '\0';
-
-  /* Restore echoing.  */
-  if (echo_off)
-    (void) tcsetattr (fileno (in), TCSANOW, &t);
-
-  if (in != stdin)
-    /* We opened the terminal; now close it.  */
-    fclose (in);
-
-  /* Catch problematic signals */
-  CatchSignal(SIGINT, SIGNAL_CAST SIG_DFL);
-
-  printf("\n");
-  return buf;
+ DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 #else
diff -pruwN samba-2.2.12/source/lib/kanji.c samba-2.2.12-livebox/lib/kanji.c
--- samba-2.2.12/source/lib/kanji.c	2004-08-12 20:24:25.000000000 +0200
+++ samba-2.2.12-livebox/lib/kanji.c	2010-03-31 11:45:59.000000000 +0200
@@ -105,37 +105,8 @@ static char hex_tag = HEXTAG;
 
 static char *sj_strtok(char *s1, const char *s2)
 {
-  static char *s = NULL;
-  char *q;
-  if (!s1) {
-    if (!s) {
-      return NULL;
-    }
-    s1 = s;
-  }
-  for (q = s1; *s1; ) {
-    if (is_shift_jis (*s1)) {
-      s1 += 2;
-    } else if (is_kana (*s1)) {
-      s1++;
-    } else {
-      char *p = strchr (s2, *s1);
-      if (p) {
-        if (s1 != q) {
-          s = s1 + 1;
-          *s1 = '\0';
-          return q;
-        }
-        q = s1 + 1;
-      }
-      s1++;
-    }
-  }
-  s = NULL;
-  if (*q) {
-    return q;
-  }
-  return NULL;
+DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -145,21 +116,8 @@ static char *sj_strtok(char *s1, const c
 
 static const char *sj_strstr(const char *s1, const char *s2)
 {
-  size_t len = strlen (s2);
-  if (!*s2) 
-    return (const char *) s1;
-  for (;*s1;) {
-    if (*s1 == *s2) {
-      if (strncmp (s1, s2, len) == 0)
-        return (const char *) s1;
-    }
-    if (is_shift_jis (*s1)) {
-      s1 += 2;
-    } else {
-      s1++;
-    }
-  }
-  return NULL;
+DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -169,16 +127,8 @@ static const char *sj_strstr(const char
 
 static const char *sj_strchr (const char *s, int c)
 {
-  for (; *s; ) {
-    if (*s == c)
-      return (const char *) s;
-    if (is_shift_jis (*s)) {
-      s += 2;
-    } else {
-      s++;
-    }
-  }
-  return NULL;
+DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -188,19 +138,8 @@ static const char *sj_strchr (const char
 
 static const char *sj_strrchr(const char *s, int c)
 {
-  const char *q;
-
-  for (q = 0; *s; ) {
-    if (*s == c) {
-      q = (const char *) s;
-    }
-    if (is_shift_jis (*s)) {
-      s += 2;
-    } else {
-      s++;
-    }
-  }
-  return q;
+DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -209,12 +148,8 @@ static const char *sj_strrchr(const char
    
 static size_t skip_kanji_multibyte_char(char c)
 {
-  if(is_shift_jis(c)) {
-    return 2;
-  } else if (is_kana(c)) {
-    return 1;
-  }
-  return 0;
+DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -223,7 +158,8 @@ static size_t skip_kanji_multibyte_char(
    
 static BOOL is_kanji_multibyte_char_1(char c)
 {
-  return is_shift_jis(c);
+DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -240,7 +176,8 @@ static BOOL is_kanji_multibyte_char_1(ch
 
 static BOOL hangul_is_multibyte_char_1(char c)
 {
-  return is_hangul(c);
+DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -249,7 +186,8 @@ static BOOL hangul_is_multibyte_char_1(c
 
 static BOOL big5_is_multibyte_char_1(char c)
 {
-  return is_big5_c1(c);
+DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -258,7 +196,8 @@ static BOOL big5_is_multibyte_char_1(cha
 
 static BOOL simpch_is_multibyte_char_1(char c)
 {
-  return is_simpch_c1(c);
+DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -273,35 +212,8 @@ static BOOL simpch_is_multibyte_char_1(c
 
 static char *generic_multibyte_strtok(char *s1, const char *s2)
 {
-  static char *s = NULL;
-  char *q;
-  if (!s1) {
-    if (!s) {
-      return NULL;
-    }
-    s1 = s;
-  }
-  for (q = s1; *s1; ) {
-    if ((*is_multibyte_char_1)(*s1)) {
-        s1 += 2;
-    } else {
-      char *p = strchr (s2, *s1);
-      if (p) {
-        if (s1 != q) {
-          s = s1 + 1;
-          *s1 = '\0';
-          return q;
-        }
-        q = s1 + 1;
-      }
-    s1++;
-    }
-  }
-  s = NULL;
-  if (*q) {
-    return q;
-  }
-  return NULL;
+DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -311,21 +223,8 @@ static char *generic_multibyte_strtok(ch
 
 static const char *generic_multibyte_strstr(const char *s1, const char *s2)
 {
-  size_t len = strlen (s2);
-  if (!*s2)
-    return (const char *) s1;
-  for (;*s1;) {
-    if (*s1 == *s2) {
-      if (strncmp (s1, s2, len) == 0)
-        return (const char *) s1;
-    }
-    if ((*is_multibyte_char_1)(*s1)) {
-      s1 += 2;
-    } else {
-      s1++;
-    }
-  }
-  return NULL;
+DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -335,16 +234,8 @@ static const char *generic_multibyte_str
 
 static const char *generic_multibyte_strchr(const char *s, int c)
 {
-  for (; *s; ) {
-    if (*s == c)
-      return (const char *) s;
-    if ((*is_multibyte_char_1)(*s)) {
-      s += 2;
-    } else {
-      s++;
-    }
-  }
-  return NULL;
+DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -354,19 +245,8 @@ static const char *generic_multibyte_str
 
 static const char *generic_multibyte_strrchr(const char *s, int c)
 {
-  const char *q;
- 
-  for (q = 0; *s; ) {
-    if (*s == c) {
-      q = (const char *) s;
-    }
-    if ((*is_multibyte_char_1)(*s)) {
-      s += 2;
-    } else {
-      s++;
-    }
-  }
-  return q;
+DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -375,10 +255,8 @@ static const char *generic_multibyte_str
 
 static size_t skip_generic_multibyte_char(char c)
 {
-  if( (*is_multibyte_char_1)(c)) {
-    return 2;
-  }
-  return 0;
+DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -394,68 +272,14 @@ static char cvtbuf[2*sizeof(pstring)];
 
 static int euc2sjis (int hi, int lo)
 {
-  int w;
-  int maxidx = SJISREVTBLSIZ;
-  int minidx = 0;
-  int i = 2;
-
-  if (hi & 1) {
-    hi = hi / 2 + (hi < 0xdf ? 0x31 : 0x71);
-    w =  (hi << 8) | (lo - (lo >= 0xe0 ? 0x60 : 0x61));
-  } else {
-    hi = hi / 2 + (hi < 0xdf ? 0x30 : 0x70);
-    w = (hi << 8) | (lo - 2);
-  }
-  if  ( (0x87 < hi ) && (hi < 0xed ) ) {
-    return w;
-  }
-  while ( maxidx >= minidx ) {
-    if ( sjisrev[i].start > w ) {
-      maxidx = i-1;
-    } else if ( w > sjisrev[i].end ) {
-      minidx = i+1;
-    } else {
-      w -= sjisrev[i].start;
-      w += sjisrev[i].rstart;
-      break;
-    }
-   i = (int)( minidx + (maxidx - minidx) % 2 );  
-  }
-  return w;  
+DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 static int sjis2euc (int hi, int lo)
 {
-  int minidx = 0;
-  int maxidx = SJISCONVTBLSIZ -1; /* max index 1 less than number of entries */
-  int i = ( 0 + SJISCONVTBLSIZ ) % 2;
-  int w = (int)((hi << 8) | lo);
-
-  if ( (sjisconv[0].start < w) && (w < sjisconv[SJISCONVTBLSIZ-1].end) ) {
-    while (maxidx >= minidx) {
-      if ( sjisconv[i].start > w ) {
-	maxidx = i-1;
-      } else if (w > sjisconv[i].end) {
-	minidx = i+1;
-      } else {
-	w -= sjisconv[i].start;
-	w += sjisconv[i].rstart;
-	break;
-      }
-      i = (int)( minidx + (maxidx-minidx)%2 );
-    }
-    hi = (int) ((w >> 8) & 0xff);
-    lo = (int) (w & 0xff);
-  }
-  if (hi >= 0xf0) {
-     hi = GETAHI;
-     lo = GETALO;
-  }
-  if (lo >= 0x9f)
-    return ((hi * 2 - (hi >= 0xe0 ? 0xe0 : 0x60)) << 8) | (lo + 2);
-  else
-    return ((hi * 2 - (hi >= 0xe0 ? 0xe1 : 0x61)) << 8) |
-            (lo + (lo >= 0x7f ? 0x60 : 0x61));
+DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -465,29 +289,14 @@ static int sjis2euc (int hi, int lo)
 
 static char *sj_to_euc_static(const char *from)
 {
-  char *out;
-
-  for (out = cvtbuf; *from && (out - cvtbuf < sizeof(cvtbuf)-3);) {
-    if (is_shift_jis (*from)) {
-      int code = sjis2euc ((int) from[0] & 0xff, (int) from[1] & 0xff);
-      *out++ = (code >> 8) & 0xff;
-      *out++ = code & 0xff;
-      from += 2;
-    } else if (is_kana (*from)) {
-      *out++ = (char)euc_kana;
-      *out++ = *from++;
-    } else {
-      *out++ = *from++;
-    }
-  }
-  *out = 0;
-  return cvtbuf;
+DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 static char *sj_to_euc(char *from)
 {
-  pstrcpy(from, sj_to_euc_static(from));
-  return from;
+DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -497,29 +306,14 @@ static char *sj_to_euc(char *from)
 
 static char *euc_to_sj_static(const char *from)
 {
-  char *out;
-
-  for (out = cvtbuf; *from && (out - cvtbuf < sizeof(cvtbuf)-3); ) {
-    if (is_euc (*from)) {
-      int code = euc2sjis ((int) from[0] & 0xff, (int) from[1] & 0xff);
-      *out++ = (code >> 8) & 0xff;
-      *out++ = code & 0xff;
-      from += 2;
-    } else if (is_euc_kana (*from)) {
-      *out++ = from[1];
-      from += 2;
-    } else {
-      *out++ = *from++;
-    }
-  }
-  *out = 0;
-  return cvtbuf;
+DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 static char *euc_to_sj(char *from)
 {
-  pstrcpy(from, euc_to_sj_static(from));
-  return from;
+DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -527,174 +321,14 @@ static char *euc_to_sj(char *from)
 ********************************************************************/
 static int sjis3euc (int hi, int lo, int *len)
 {
-  int i,w;
-  int minidx;
-  int maxidx;
-
-  w = (int)((hi << 8) | lo);
-
-  /* no sjis */
- if ( ( 0x40 >= lo ) && (lo >= 0xfc) && (lo == 0x7f )) {
-     w = (GETAHI << 8) | GETALO;
-
- /* IBM Extended Kanji */
- } else  if (( w == 0xfa54 )||( w == 0x81ca )) {
-    *len = 2;
-    return (0xa2cc);
-
-  } else if (( w ==  0xfa5b )||( w == 0x81e6)) {
-    *len = 2;
-    return (0xa2e8);
-
-  } else if (( 0xfa <= hi ) && ( hi <= 0xfc ) ) {
-    i = w - 0xfa40 - ( hi - 0xfa )*( 0xfb40 - 0xfafc) - ((lo < 0x7f)? 0 : 1 );
-    if ( i <= EUC3CONVTBLSIZ ){
-      *len = 3;
-      return euc3conv[i];
-    }  
-
-/* NEC selected IBM Extend Kanji */
-    /* there are 3 code that is not good for conv */
-  } else if (( 0x8754 <= w ) && ( w <= 0x878a)) {
-    minidx = 0;
-    maxidx = EUC3CONV2TBLSIZ;
-    i = minidx + (maxidx - minidx) % 2;
-    while ( maxidx >= minidx ) {
-      if ( euc3conv2[i].sjis > w ) {
-	maxidx = i-1;
-      } else if ( w > euc3conv2[i].sjis ) {
-	minidx = i+1;
-      } else {
-	*len = 3;
-	return (euc3conv2[i].euc);
-      }
-      i = (int)( minidx + (maxidx - minidx) % 2 );  
-    }
-    /* else normal EUC */
-
-  } else if (( w == 0xeef9 ) || ( w == 0x81ca )) {  
-    *len = 2; 
-    return (0xa2cc);
-
-  } else if (( 0xed <= hi ) && ( hi <= 0xef )) {
-    minidx = 0;
-    maxidx = SJISREVTBLSIZ;
-    i = 10;
-    while ( maxidx >= minidx ) {
-      if ( sjisrev[i].start > w ) {
-	maxidx = i-1;
-      } else if ( w > sjisrev[i].end ) {
-	minidx = i+1;
-      } else {
-	w -= sjisrev[i].start;
-	w += sjisrev[i].rstart;
-	break;
-      }
-      i = (int)( minidx + (maxidx - minidx) % 2 );  
-    }
-    if ( w >= 0xfa40 ) {
-      i = w - 0xfa40 - ( hi - 0xfa )*( 0xfb40 - 0xfafc) - ((lo < 0x7f)? 0 : 1 );
-      if ( i <= EUC3CONVTBLSIZ ){
-	*len = 3;
-	return euc3conv[i];
-      } else {
-	w = (GETAHI << 8) | GETALO;
-      }
-    }
-    /* else normal EUC */
-
-/* UDC half low*/
-/* this area maps to the G2 UDC area: 0xf5a1 -- 0xfefe */
-  } else if ((0xf0 <= hi) && (hi <= 0xf4)) {
-    *len = 2;
-    if (lo >= 0x9f) {
-      return (((hi * 2 - 0xea) << 8) | (lo + 2));
-    } else {
-      return (((hi * 2 - 0xeb) << 8) | (lo + (lo >=0x7f ? 0x60: 0x61 )));
-    }
-
-/* UDC half high*/
-/* this area maps to the G3 UDC area: 0xf8f5a1 -- 0xf8fefe */
-  } else if ((0xf5 <= hi) && (hi <= 0xf9)) {  
-    *len = 3;
-    if (lo >= 0x9f) {
-      return (((hi*2 - 0xf4) << 8) | (lo + 2));
-    } else {
-      return (((hi*2 - 0xf5) << 8) | (lo + (lo >= 0x7f ? 0x60: 0x61 )));
-    }
-    /* ....checked all special case */
-  }
-
-  /*  These Normal 2 byte EUC */
-  *len = 2;
-  hi = (int) ((w >> 8) & 0xff);
-  lo = (int) (w & 0xff);
-
-  if (hi >= 0xf0) {    /* Check range */
-     hi = GETAHI;
-     lo = GETALO;
-  }
-
-  if (lo >= 0x9f)
-    return ((hi * 2 - (hi >= 0xe0 ? 0xe0 : 0x60)) << 8) | (lo + 2);
-  else
-    return ((hi * 2 - (hi >= 0xe0 ? 0xe1 : 0x61)) << 8) |
-            (lo + (lo >= 0x7f ? 0x60 : 0x61));
+DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 static int  euc3sjis (int hi, int lo, BOOL is_3byte)
 {
-  int w;
-
-  w = (int)((hi << 8) | lo);
-  if (is_3byte) {
-    if (( 0xf5 <= hi) && ( hi <= 0xfe)) {
-     /* UDC half high*/
-     /* this area maps to the G3 UDC area */
-     /* 0xf8f5a1 -- 0xf8fefe --> 0xf540 -- 0xf9fc */
-      if (hi & 1) {
-	return (((hi / 2 + 0x7b) << 8) | (lo - (lo >= 0xe0 ? 0x60 : 0x61)));
-      } else {
-	return (((hi / 2 + 0x7a) << 8) | (lo - 2));
-      }
-    } else {
-      /* Using map table */
-      int minidx = 0;
-      int maxidx = EUC3REVTBLSIZ;
-      int i = minidx + (maxidx - minidx) % 2;
-
-      while ( maxidx >= minidx ) {
-	if (euc3rev[i].euc > w) {
-	  maxidx = i-1;
-	} else if (euc3rev[i].euc < w) {
-	  minidx = i+1;
-	} else {
-	  return (euc3rev[i].sjis);
-	}
-	i = (int)( minidx + ( maxidx - minidx ) % 2);
-      }
-      return ((GETAHI << 8 ) | GETALO);
-    }
-  } else { /* is_2byte */
-    if ((0xf5 <= hi) && (hi <= 0xfe)) {
-      /* UDC half low*/
-      /* this area maps to the G2 UDC area */
-      /* 0xf5a1 -- 0xfefe  --> 0xf040 -- 0xf4fc */
-      if (hi & 1) {
-	return (((hi / 2 + 0x76) << 8) | (lo - (lo >= 0xe0 ? 0x60 : 0x61)));
-      } else {
-	return (((hi / 2 + 0x75) << 8) | (lo - 2));
-      }
-    } else { /* Normal EUC */
-      if (hi & 1) {
-	hi = hi / 2 + (hi < 0xdf ? 0x31 : 0x71);
-	return ((hi << 8) | (lo - (lo >= 0xe0 ? 0x60 : 0x61)));
-      } else {
-	hi = hi / 2 + (hi < 0xdf ? 0x30 : 0x70);
-	return ((hi << 8) | (lo - 2));
-      }
-    }
-  }
+DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -704,33 +338,14 @@ static int  euc3sjis (int hi, int lo, BO
 
 static char *sj_to_euc3_static(const char *from)
 {
-  char *out;
-  int len;
-
-  for (out = cvtbuf; *from && (out - cvtbuf < sizeof(cvtbuf)-4);) {
-    if (is_shift_jis (*from)) {
-      int code = sjis3euc ((int) from[0] & 0xff, (int) from[1] & 0xff, &len);
-      if (len == 3) {
-	*out++ = (char)euc_sup;
-      }
-      *out++ = (code >> 8) & 0xff;
-      *out++ = code & 0xff;
-      from += 2;
-    } else if (is_kana (*from)) {
-      *out++ = (char)euc_kana;
-      *out++ = *from++;
-    } else {
-      *out++ = *from++;
-    }
-  }
-  *out = 0;
-  return cvtbuf;
+DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 static char *sj_to_euc3(char *from)
 {
-  pstrcpy(from, sj_to_euc3_static(from));
-  return from;
+DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -740,34 +355,14 @@ static char *sj_to_euc3(char *from)
 
 static char *euc3_to_sj_static(const char *from)
 {
-  char *out;
-
-  for (out = cvtbuf; *from && (out - cvtbuf < sizeof(cvtbuf)-3); ) {
-    if (is_euc_sup (*from)) {
-      int code = euc3sjis((int) from[1] & 0xff, (int) from[2] & 0xff, True);
-      *out++ = (code >> 8) & 0xff;
-      *out++ = code & 0xff;
-      from += 3;
-    } else if (is_euc (*from)) {
-      int code = euc3sjis ((int) from[0] & 0xff, (int) from[1] & 0xff,False);
-      *out++ = (code >> 8) & 0xff;
-      *out++ = code & 0xff;
-      from += 2;
-    } else if (is_euc_kana (*from)) {
-      *out++ = from[1];
-      from += 2;
-    } else {
-      *out++ = *from++;
-    }
-  }
-  *out = 0;
-  return cvtbuf;
+DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 static char *euc3_to_sj(char *from)
 {
-  pstrcpy(from, euc3_to_sj_static(from));
-  return from;
+DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -776,69 +371,14 @@ static char *euc3_to_sj(char *from)
 
 static int sjis2jis(int hi, int lo)
 {
-  int minidx = 0;
-  int maxidx = SJISCONVTBLSIZ -1; /* max index 1 less than number of entries */
-  int i = (0 + SJISCONVTBLSIZ) % 2;
-  int w = (int)((hi << 8) | lo);
-
-  if ((sjisconv[0].start < w) && (w < sjisconv[SJISCONVTBLSIZ-1].end)) {
-    while (maxidx >= minidx) {
-      if (sjisconv[i].start > w) {
-	maxidx = i-1;
-      } else if (w > sjisconv[i].end) {
-	minidx = i+1;
-      } else {
-	w -= sjisconv[i].start;
-	w += sjisconv[i].rstart;
-	break;
-      }
-      i = (int)( minidx + (maxidx-minidx) %2 );
-    }
-    hi = (int) ((w >> 8) & 0xff);
-    lo = (int) (w & 0xff);
-  }
-  if (hi >= 0xf0) {
-     hi = GETAHI;
-     lo = GETALO;
-  }
-  if (lo >= 0x9f)
-    return ((hi * 2 - (hi >= 0xe0 ? 0x160 : 0xe0)) << 8) | (lo - 0x7e);
-  else
-    return ((hi * 2 - (hi >= 0xe0 ? 0x161 : 0xe1)) << 8) |
-            (lo - (lo >= 0x7f ? 0x20 : 0x1f));
+DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 static int jis2sjis(int hi, int lo)
 {
-  int w;
-  int minidx = 0;
-  int maxidx = SJISREVTBLSIZ;
-  int i = 2;
-
-  if (hi & 1) {
-    hi = hi / 2 + (hi < 0x5f ? 0x71 : 0xb1);
-    w  = (hi << 8) | (lo + (lo >= 0x60 ? 0x20 : 0x1f));
-  } else {
-    hi = hi / 2 + (hi < 0x5f ? 0x70 : 0xb0); 
-    w  = (hi << 8) | (lo + 0x7e);
-  }
-
-  if  (( 0x87 < hi ) && ( hi < 0xed )) {
-    return w;
-  }
-  while (maxidx >= minidx) {
-    if (sjisrev[i].start > w) {
-      maxidx = i-1;
-    } else if (w > sjisrev[i].end) {
-      minidx = i+1;
-    } else {
-      w -= sjisrev[i].start;
-      w += sjisrev[i].rstart;
-      break;
-    }
-    i = (int)( minidx + (maxidx-minidx) %2 );
-  }
-  return w;  
+DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -848,50 +388,14 @@ static int jis2sjis(int hi, int lo)
 
 static char *jis8_to_sj_static(const char *from)
 {
-  char *out;
-  int shifted;
-
-  shifted = _KJ_ROMAN;
-  for (out = cvtbuf; *from && (out - cvtbuf < sizeof(cvtbuf)-3);) {
-    if (is_esc (*from)) {
-      if (is_so1 (from[1]) && is_so2 (from[2])) {
-        shifted = _KJ_KANJI;
-        from += 3;
-      } else if (is_si1 (from[1]) && is_si2 (from[2])) {
-        shifted = _KJ_ROMAN;
-        from += 3;
-      } else { /* sequence error */
-        goto normal;
-      }
-    } else {
-
-normal:
-
-      switch (shifted) {
-      default:
-      case _KJ_ROMAN:
-        *out++ = *from++;
-        break;
-      case _KJ_KANJI:
-        {
-          int code = jis2sjis ((int) from[0] & 0xff, (int) from[1] & 0xff);
-          *out++ = (code >> 8) & 0xff;
-          *out++ = code;
-          from += 2;
-          break;
-        }
-      }
-    }
-  }
-
-  *out = 0;
-  return cvtbuf;
+DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 static char *jis8_to_sj(char *from)
 {
-  pstrcpy(from, jis8_to_sj_static(from));
-  return from;
+DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -901,54 +405,14 @@ static char *jis8_to_sj(char *from)
 
 static char *sj_to_jis8_static(const char *from)
 {
-  char *out;
-  int shifted;
-
-  shifted = _KJ_ROMAN;
-  for (out = cvtbuf; *from && (out - cvtbuf < sizeof(cvtbuf)-4); ) {
-    if (is_shift_jis (*from)) {
-      int code;
-      switch (shifted) {
-      case _KJ_ROMAN: /* to KANJI */
-        *out++ = jis_esc;
-        *out++ = jis_so1;
-        *out++ = jis_kso;
-        shifted = _KJ_KANJI;
-        break;
-      }
-      code = sjis2jis ((int) from[0] & 0xff, (int) from[1] & 0xff);
-      *out++ = (code >> 8) & 0xff;
-      *out++ = code;
-      from += 2;
-    } else {
-      switch (shifted) {
-      case _KJ_KANJI: /* to ROMAN/KANA */
-        *out++ = jis_esc;
-        *out++ = jis_si1;
-        *out++ = jis_ksi;
-        shifted = _KJ_ROMAN;
-        break;
-      }
-      *out++ = *from++;
-    }
-  }
-
-  switch (shifted) {
-  case _KJ_KANJI: /* to ROMAN/KANA */
-    *out++ = jis_esc;
-    *out++ = jis_si1;
-    *out++ = jis_ksi;
-    shifted = _KJ_ROMAN;
-    break;
-  }
-  *out = 0;
-  return cvtbuf;
+DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 static char *sj_to_jis8(char *from)
 {
-  pstrcpy(from, sj_to_jis8_static(from));
-  return from;
+DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -958,56 +422,14 @@ static char *sj_to_jis8(char *from)
 
 static char *jis7_to_sj_static(const char *from)
 {
-    char *out;
-    int shifted;
-
-    shifted = _KJ_ROMAN;
-    for (out = cvtbuf; *from && (out - cvtbuf < sizeof(cvtbuf)-3);) {
-	if (is_esc (*from)) {
-	    if (is_so1 (from[1]) && is_so2 (from[2])) {
-		shifted = _KJ_KANJI;
-		from += 3;
-	    } else if (is_si1 (from[1]) && is_si2 (from[2])) {
-		shifted = _KJ_ROMAN;
-		from += 3;
-	    } else {			/* sequence error */
-		goto normal;
-	    }
-	} else if (is_so (*from)) {
-	    shifted = _KJ_KANA;		/* to KANA */
-	    from++;
-	} else if (is_si (*from)) {
-	    shifted = _KJ_ROMAN;	/* to ROMAN */
-	    from++;
-	} else {
-	normal:
-	    switch (shifted) {
-	    default:
-	    case _KJ_ROMAN:
-		*out++ = *from++;
-		break;
-	    case _KJ_KANJI:
-		{
-		    int code = jis2sjis ((int) from[0] & 0xff, (int) from[1] & 0xff);
-		    *out++ = (code >> 8) & 0xff;
-		    *out++ = code;
-		    from += 2;
-		}
-		break;
-	    case _KJ_KANA:
-		*out++ = ((int) from[0]) + 0x80;
-		break;
-	    }
-	}
-    }
-    *out = 0;
-    return cvtbuf;
+DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 static char *jis7_to_sj(char *from)
 {
-  pstrcpy(from, jis7_to_sj_static(from));
-  return from;
+DEBUG(1,("function ommited\n"));
+	/* function omited*/
 } 
 
 /*******************************************************************
@@ -1017,67 +439,8 @@ static char *jis7_to_sj(char *from)
 
 static char *sj_to_jis7_static(const char *from)
 {
-    char *out;
-    int shifted;
-
-    shifted = _KJ_ROMAN;
-    for (out = cvtbuf; *from && (out - cvtbuf < sizeof(cvtbuf)-4); ) {
-	if (is_shift_jis (*from)) {
-	    int code;
-	    switch (shifted) {
-	    case _KJ_KANA:
-		*out++ = jis_si;	/* to ROMAN and through down */
-	    case _KJ_ROMAN:		/* to KANJI */
-		*out++ = jis_esc;
-		*out++ = jis_so1;
-		*out++ = jis_kso;
-		shifted = _KJ_KANJI;
-		break;
-	    }
-	    code = sjis2jis ((int) from[0] & 0xff, (int) from[1] & 0xff);
-	    *out++ = (code >> 8) & 0xff;
-	    *out++ = code;
-	    from += 2;
-	} else if (is_kana (from[0])) {
-	    switch (shifted) {
-	    case _KJ_KANJI:		/* to ROMAN */
-		*out++ = jis_esc;
-		*out++ = jis_si1;
-		*out++ = jis_ksi;
-	    case _KJ_ROMAN:		/* to KANA */
-		*out++ = jis_so;
-		shifted = _KJ_KANA;
-		break;
-	    }
-	    *out++ = ((int) *from++) - 0x80;
-	} else {
-	    switch (shifted) {
-	    case _KJ_KANA:
-		*out++ = jis_si;	/* to ROMAN */
-		shifted = _KJ_ROMAN;
-		break;
-	    case _KJ_KANJI:		/* to ROMAN */
-		*out++ = jis_esc;
-		*out++ = jis_si1;
-		*out++ = jis_ksi;
-		shifted = _KJ_ROMAN;
-		break;
-	    }
-	    *out++ = *from++;
-	}
-    }
-    switch (shifted) {
-    case _KJ_KANA:
-	*out++ = jis_si;		/* to ROMAN */
-	break;
-    case _KJ_KANJI:			/* to ROMAN */
-	*out++ = jis_esc;
-	*out++ = jis_si1;
-	*out++ = jis_ksi;
-	break;
-    }
-    *out = 0;
-    return cvtbuf;
+DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 static char *sj_to_jis7(char *from)
@@ -1093,53 +456,14 @@ static char *sj_to_jis7(char *from)
 
 static char *junet_to_sj_static(const char *from)
 {
-    char *out;
-    int shifted;
-
-    shifted = _KJ_ROMAN;
-    for (out = cvtbuf; *from && (out - cvtbuf < sizeof(cvtbuf)-3);) {
-	if (is_esc (*from)) {
-	    if (is_so1 (from[1]) && is_so2 (from[2])) {
-		shifted = _KJ_KANJI;
-		from += 3;
-	    } else if (is_si1 (from[1]) && is_si2 (from[2])) {
-		shifted = _KJ_ROMAN;
-		from += 3;
-	    } else if (is_juk1(from[1]) && is_juk2 (from[2])) {
-		shifted = _KJ_KANA;
-		from += 3;
-	    } else {			/* sequence error */
-		goto normal;
-	    }
-	} else {
-	normal:
-	    switch (shifted) {
-	    default:
-	    case _KJ_ROMAN:
-		*out++ = *from++;
-		break;
-	    case _KJ_KANJI:
-		{
-		    int code = jis2sjis ((int) from[0] & 0xff, (int) from[1] & 0xff);
-		    *out++ = (code >> 8) & 0xff;
-		    *out++ = code;
-		    from += 2;
-		}
-		break;
-	    case _KJ_KANA:
-		*out++ = ((int) from[0]) + 0x80;
-		break;
-	    }
-	}
-    }
-    *out = 0;
-    return cvtbuf;
+DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 static char *junet_to_sj(char *from)
 {
-  pstrcpy(from, junet_to_sj_static(from));
-  return from;
+DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -1149,66 +473,14 @@ static char *junet_to_sj(char *from)
 
 static char *sj_to_junet_static(const char *from)
 {
-    char *out;
-    int shifted;
-
-    shifted = _KJ_ROMAN;
-    for (out = cvtbuf; *from && (out - cvtbuf < sizeof(cvtbuf)-4); ) {
-	if (is_shift_jis (*from)) {
-	    int code;
-	    switch (shifted) {
-	    case _KJ_KANA:
-	    case _KJ_ROMAN:		/* to KANJI */
-		*out++ = jis_esc;
-		*out++ = jis_so1;
-		*out++ = jis_so2;
-		shifted = _KJ_KANJI;
-		break;
-	    }
-	    code = sjis2jis ((int) from[0] & 0xff, (int) from[1] & 0xff);
-	    *out++ = (code >> 8) & 0xff;
-	    *out++ = code;
-	    from += 2;
-	} else if (is_kana (from[0])) {
-	    switch (shifted) {
-	    case _KJ_KANJI:		/* to ROMAN */
-	    case _KJ_ROMAN:		/* to KANA */
-		*out++ = jis_esc;
-		*out++ = junet_kana1;
-		*out++ = junet_kana2;
-		shifted = _KJ_KANA;
-		break;
-	    }
-	    *out++ = ((int) *from++) - 0x80;
-	} else {
-	    switch (shifted) {
-	    case _KJ_KANA:
-	    case _KJ_KANJI:		/* to ROMAN */
-		*out++ = jis_esc;
-		*out++ = jis_si1;
-		*out++ = jis_si2;
-		shifted = _KJ_ROMAN;
-		break;
-	    }
-	    *out++ = *from++;
-	}
-    }
-    switch (shifted) {
-    case _KJ_KANA:
-    case _KJ_KANJI:			/* to ROMAN */
-	*out++ = jis_esc;
-	*out++ = jis_si1;
-	*out++ = jis_si2;
-	break;
-    }
-    *out = 0;
-    return cvtbuf;
+DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 static char *sj_to_junet(char *from)
 {
-  pstrcpy(from, sj_to_junet_static(from));
-  return from;
+DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -1218,26 +490,14 @@ static char *sj_to_junet(char *from)
 
 static char *hex_to_sj_static(const char *from)
 {
-    const char *sp;
-    char *dp;
-    
-    sp = from;
-    dp = cvtbuf;
-    while (*sp && (dp - cvtbuf < sizeof(cvtbuf)-3)) {
-	if (*sp == hex_tag && isxdigit((int)sp[1]) && isxdigit((int)sp[2])) {
-	    *dp++ = (hex2bin (sp[1])<<4) | (hex2bin (sp[2]));
-	    sp += 3;
-	} else
-	    *dp++ = *sp++;
-    }
-    *dp = '\0';
-    return cvtbuf;
+DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
  
 static char *hex_to_sj(char *from)
 {
-  pstrcpy(from, hex_to_sj_static(from));
-  return from;
+DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -1246,37 +506,14 @@ static char *hex_to_sj(char *from)
 
 static char *sj_to_hex_static(const char *from)
 {
-    const unsigned char *sp;
-    unsigned char *dp;
-    
-    sp = (const uchar *)from;
-    dp = (unsigned char*) cvtbuf;
-    while (*sp && (((char *)dp)- cvtbuf < sizeof(cvtbuf)-7)) {
-	if (is_kana(*sp)) {
-	    *dp++ = hex_tag;
-	    *dp++ = bin2hex (((*sp)>>4)&0x0f);
-	    *dp++ = bin2hex ((*sp)&0x0f);
-	    sp++;
-	} else if (is_shift_jis (*sp) && is_shift_jis2 (sp[1])) {
-	    *dp++ = hex_tag;
-	    *dp++ = bin2hex (((*sp)>>4)&0x0f);
-	    *dp++ = bin2hex ((*sp)&0x0f);
-	    sp++;
-	    *dp++ = hex_tag;
-	    *dp++ = bin2hex (((*sp)>>4)&0x0f);
-	    *dp++ = bin2hex ((*sp)&0x0f);
-	    sp++;
-	} else
-	    *dp++ = *sp++;
-    }
-    *dp = '\0';
-    return cvtbuf;
+DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 static char *sj_to_hex(char *from)
 {
-  pstrcpy(from, sj_to_hex_static(from));
-  return from;
+DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -1285,32 +522,14 @@ static char *sj_to_hex(char *from)
 /* ":xx" CAP -> a byte */
 static char *cap_to_sj_static(const char *from)
 {
-    const char *sp;
-    char *dp;
-
-    sp = (const char *) from;
-    dp = cvtbuf;
-    while (*sp && (dp- cvtbuf < sizeof(cvtbuf)-2)) {
-        /*
-         * The only change between this and hex_to_sj is here. sj_to_cap only
-         * translates characters greater or equal to 0x80 - make sure that here
-         * we only do the reverse (that's why the strchr is used rather than
-         * isxdigit. Based on fix from ado@elsie.nci.nih.gov (Arthur David Olson).
-         */
-        if (*sp == hex_tag && (strchr ("89abcdefABCDEF", sp[1]) != NULL) && isxdigit((int)sp[2])) {
-            *dp++ = (hex2bin (sp[1])<<4) | (hex2bin (sp[2]));
-            sp += 3;
-        } else
-            *dp++ = *sp++;
-    }
-    *dp = '\0';
-    return cvtbuf;
+DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 static char *cap_to_sj(char *from)
 {
-  pstrcpy(from, cap_to_sj_static(from));
-  return from;
+DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -1318,29 +537,14 @@ static char *cap_to_sj(char *from)
 ********************************************************************/
 static char *sj_to_cap_static(const char *from)
 {
-    const unsigned char *sp;
-    unsigned char *dp;
-
-    sp = (const uchar *)from;
-    dp = (unsigned char*) cvtbuf;
-    while (*sp && (((char *)dp) - cvtbuf < sizeof(cvtbuf)-4)) {
-	if (*sp >= 0x80) {
-	    *dp++ = hex_tag;
-	    *dp++ = bin2hex (((*sp)>>4)&0x0f);
-	    *dp++ = bin2hex ((*sp)&0x0f);
-	    sp++;
-	} else {
-	    *dp++ = *sp++;
-	}
-    }
-    *dp = '\0';
-    return cvtbuf;
+DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 static char *sj_to_cap(char *from)
 {
-  pstrcpy(from, sj_to_cap_static(from));
-  return from;
+DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -1349,13 +553,14 @@ static char *sj_to_cap(char *from)
 
 static char *sj_to_sj_static(const char *from)
 {
-	pstrcpy (cvtbuf, from);
-	return cvtbuf;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 static char *sj_to_sj(char *from)
 {
-	return from;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -1363,44 +568,14 @@ static char *sj_to_sj(char *from)
 ********************************************************************/
 static char *cp_to_utf8_static(const char *from)
 {
-  unsigned char *dst;
-  const unsigned char *src;
-  smb_ucs2_t val;
-  int w;
-  size_t len;
-
-  src = (const unsigned char *)from;
-  dst = (unsigned char *)cvtbuf;
-  while (*src && (((char *)dst - cvtbuf) < sizeof(cvtbuf)-4)) {
-    len = _skip_multibyte_char(*src);
-    if ( len == 2 ) {
-      w = (int)(*src++ & 0xff);
-      w = (int)((w << 8)|(*src++ & 0xff));
-    } else {
-      w = (int)(*src++ & 0xff);
-    }
-    val = doscp2ucs2(w);
-
-    if ( val <= 0x7f ) {
-      *dst++ = (char)(val & 0xff);
-    } else if ( val <= 0x7ff ){
-      *dst++ = (char)( 0xc0 | ((val >> 6) & 0xff)); 
-      *dst++ = (char)( 0x80 | ( val & 0x3f ));
-    } else {
-      *dst++ = (char)( 0xe0 | ((val >> 12) & 0x0f));
-      *dst++ = (char)( 0x80 | ((val >> 6)  & 0x3f));
-      *dst++ = (char)( 0x80 | (val & 0x3f));
-    }
-
-  }
-  *dst++='\0';
-  return cvtbuf;
+DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 static char *cp_to_utf8(char *from)
 {
-  pstrcpy(from, cp_to_utf8_static(from));
-  return from;
+DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -1408,40 +583,14 @@ static char *cp_to_utf8(char *from)
 ********************************************************************/
 static char *utf8_to_cp_static(const char *from)
 {
-  const unsigned char *src;
-  unsigned char *dst;
-  smb_ucs2_t val;
-  int w;
-
-  src = (const unsigned char *)from; 
-  dst = (unsigned char *)cvtbuf; 
-
-  while (*src && ((char *)dst - cvtbuf < sizeof(cvtbuf)-4)) {
-    val = (*src++ & 0xff);
-    if (val < 0x80) {
-      *dst++ = (char)(val & 0x7f); 
-    } else if ((0xc0 <= val) && (val <= 0xdf) 
-	       && (0x80 <= *src) && (*src <= 0xbf)) {
-      w = ucs2doscp( ((val & 31) << 6)  | ((*src++) & 63 ));
-      *dst++ = (char)((w >> 8) & 0xff);
-      *dst++ = (char)(w & 0xff);
-    } else {
-      val  = (val & 0x0f) << 12;
-      val |= ((*src++ & 0x3f) << 6);
-      val |= (*src++ & 0x3f);
-      w = ucs2doscp(val);
-      *dst++ = (char)((w >> 8) & 0xff);
-      *dst++ = (char)(w & 0xff);
-    }
-  }
-  *dst++='\0';
-  return cvtbuf;
+DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 static char *utf8_to_cp(char *from)
 {
-  pstrcpy(from, utf8_to_cp_static(from));
-  return from;
+DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /************************************************************************
@@ -1640,7 +789,8 @@ static size_t skip_non_multibyte_char(ch
 
 static BOOL not_multibyte_char_1(char c)
 {
-  return False;
+DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -1715,8 +865,7 @@ void initialize_multibyte_vectors( int c
    **************************************************** */
 static char *no_conversion_static(const char *str)
 {
-       static pstring temp;
-       pstrcpy(temp, str);
-       return temp;
+DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 char *(*_dos_to_dos_static)(const char *) = no_conversion_static;
diff -pruwN samba-2.2.12/source/lib/ms_fnmatch.c samba-2.2.12-livebox/lib/ms_fnmatch.c
--- samba-2.2.12/source/lib/ms_fnmatch.c	2004-08-12 20:24:25.000000000 +0200
+++ samba-2.2.12-livebox/lib/ms_fnmatch.c	2010-03-31 11:45:59.000000000 +0200
@@ -32,83 +32,8 @@
    better thaan what we had */
 static int ms_fnmatch_lanman_core(const char *pattern, const char *string)
 {
-	const char *p = pattern, *n = string;
-	char c;
-
-	if (strcmp(p,"?")==0 && strcmp(n,".")==0) goto match;
-
-	while ((c = *p++)) {
-		switch (c) {
-		case '.':
-			if (! *n) goto next;
-			/* if (! *n && ! *p) goto match; */
-			if (*n != '.') goto nomatch;
-			n++;
-			break;
-
-		case '?':
-			if (! *n) goto next;
-			if ((*n == '.' && n[1] != '.') || ! *n) goto next;
-			n++;
-			break;
-
-		case '>':
-			if (! *n) goto next;
-			if (n[0] == '.') {
-				if (! n[1] && ms_fnmatch_lanman_core(p, n+1) == 0) goto match;
-				if (ms_fnmatch_lanman_core(p, n) == 0) goto match;
-				goto nomatch;
-			}
-			n++;
-			break;
-
-		case '*':
-			if (! *n) goto next;
-			if (! *p) goto match;
-			for (; *n; n++) {
-				if (ms_fnmatch_lanman_core(p, n) == 0) goto match;
-			}
-			break;
-
-		case '<':
-			for (; *n; n++) {
-				if (ms_fnmatch_lanman_core(p, n) == 0) goto match;
-				if (*n == '.' && !strchr(n+1,'.')) {
-					n++;
-					break;
-				}
-			}
-			break;
-
-		case '"':
-			if (*n == 0 && ms_fnmatch_lanman_core(p, n) == 0) goto match;
-			if (*n != '.') goto nomatch;
-			n++;
-			break;
-
-		default:
-			if (c != *n) goto nomatch;
-			n++;
-		}
-	}
-	
-	if (! *n) goto match;
-	
- nomatch:
-	/*
-	if (verbose) printf("NOMATCH pattern=[%s] string=[%s]\n", pattern, string);
-	*/
-	return -1;
-
-next:
-	if (ms_fnmatch_lanman_core(p, n) == 0) goto match;
-        goto nomatch;
-
- match:
-	/*
-	if (verbose) printf("MATCH   pattern=[%s] string=[%s]\n", pattern, string);
-	*/
-	return 0;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 static int ms_fnmatch_lanman1(const char *pattern, const char *string)
diff -pruwN samba-2.2.12/source/lib/pam_errors.c samba-2.2.12-livebox/lib/pam_errors.c
--- samba-2.2.12/source/lib/pam_errors.c	2004-08-12 20:24:24.000000000 +0200
+++ samba-2.2.12-livebox/lib/pam_errors.c	2010-03-31 11:45:59.000000000 +0200
@@ -76,14 +76,8 @@ convert a PAM error to a NT status32 cod
  *****************************************************************************/
 NTSTATUS pam_to_nt_status(int pam_error)
 {
-	int i;
-	if (pam_error == 0) return NT_STATUS_OK;
-	
-	for (i=0; NT_STATUS_V(pam_to_nt_status_map[i].ntstatus); i++) {
-		if (pam_error == pam_to_nt_status_map[i].pam_code)
-			return pam_to_nt_status_map[i].ntstatus;
-	}
-	return NT_STATUS_UNSUCCESSFUL;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*****************************************************************************
@@ -91,14 +85,8 @@ convert an NT status32 code to a PAM err
  *****************************************************************************/
 int nt_status_to_pam(NTSTATUS nt_status)
 {
-	int i;
-	if NT_STATUS_IS_OK(nt_status) return PAM_SUCCESS;
-	
-	for (i=0; NT_STATUS_V(nt_status_to_pam_map[i].ntstatus); i++) {
-		if (NT_STATUS_EQUAL(nt_status,nt_status_to_pam_map[i].ntstatus))
-			return nt_status_to_pam_map[i].pam_code;
-	}
-	return PAM_SYSTEM_ERR;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 #else 
@@ -108,8 +96,8 @@ convert a PAM error to a NT status32 cod
  *****************************************************************************/
 NTSTATUS pam_to_nt_status(int pam_error)
 {
-	if (pam_error == 0) return NT_STATUS_OK;
-	return NT_STATUS_UNSUCCESSFUL;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*****************************************************************************
@@ -117,8 +105,8 @@ convert an NT status32 code to a PAM err
  *****************************************************************************/
 int nt_status_to_pam(NTSTATUS nt_status)
 {
-	if (NT_STATUS_EQUAL(nt_status, NT_STATUS_OK)) return 0;
-	return 4; /* PAM_SYSTEM_ERR */
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 #endif
diff -pruwN samba-2.2.12/source/lib/substitute.c samba-2.2.12-livebox/lib/substitute.c
--- samba-2.2.12/source/lib/substitute.c	2004-08-12 20:24:24.000000000 +0200
+++ samba-2.2.12-livebox/lib/substitute.c	2010-03-31 11:45:59.000000000 +0200
@@ -63,50 +63,8 @@ const char* get_remote_machine_name(void
 
 static size_t expand_env_var(char *p, int len)
 {
-	fstring envname;
-	char *envval;
-	char *q, *r;
-	int copylen;
-
-	if (p[1] != '$')
-		return 1;
-
-	if (p[2] != '(')
-		return 2;
-
-	/*
-	 * Look for the terminating ')'.
-	 */
-
-	if ((q = strchr(p,')')) == NULL) {
-		DEBUG(0,("expand_env_var: Unterminated environment variable [%s]\n", p));
-		return 2;
-	}
-
-	/*
-	 * Extract the name from within the %$(NAME) string.
-	 */
-
-	r = p+3;
-	copylen = MIN((q-r),(sizeof(envname)-1));
-	strncpy(envname,r,copylen);
-	envname[copylen] = '\0';
-
-	if ((envval = getenv(envname)) == NULL) {
-		DEBUG(0,("expand_env_var: Environment variable [%s] not set\n", envname));
-		return 2;
-	}
-
-	/*
-	 * Copy the full %$(NAME) into envname so it
-	 * can be replaced.
-	 */
-
-	copylen = MIN((q+1-p),(sizeof(envname)-1));
-	strncpy(envname,p,copylen);
-	envname[copylen] = '\0';
-	string_sub(p,envname,envval,len);
-	return 0; /* Allow the environment contents to be parsed. */
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -116,36 +74,8 @@ static size_t expand_env_var(char *p, in
 
 static char *automount_path(char *user_name)
 {
-	static pstring server_path;
-
-	/* use the passwd entry as the default */
-	/* this will be the default if WITH_AUTOMOUNT is not used or fails */
-
-	pstrcpy(server_path, get_user_home_dir(user_name));
-
-#if (defined(HAVE_NETGROUP) && defined (WITH_AUTOMOUNT))
-
-	if (lp_nis_home_map()) {
-		char *home_path_start;
-		char *automount_value = automount_lookup(user_name);
-
-		if(strlen(automount_value) > 0) {
-			home_path_start = strchr(automount_value,':');
-			if (home_path_start != NULL) {
-				DEBUG(5, ("NIS lookup succeeded.  Home path is: %s\n",
-						home_path_start?(home_path_start+1):""));
-				pstrcpy(server_path, home_path_start+1);
-			}
-		} else {
-			/* NIS key lookup failed: default to user home directory from password file */
-			DEBUG(5, ("NIS lookup failed. Using Home path from passwd file. Home path is: %s\n", server_path ));
-		}
-	}
-#endif
-
-	DEBUG(4,("Home server path: %s\n", server_path));
-
-	return server_path;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -156,33 +86,8 @@ static char *automount_path(char *user_n
 
 static char *automount_server(char *user_name)
 {
-	extern pstring global_myname;
-	static pstring server_name;
-
-	/* use the local machine name as the default */
-	/* this will be the default if WITH_AUTOMOUNT is not used or fails */
-	if (*local_machine)
-		pstrcpy(server_name, local_machine);
-	else
-		pstrcpy(server_name, global_myname);
-
-#if (defined(HAVE_NETGROUP) && defined (WITH_AUTOMOUNT))
-
-	if (lp_nis_home_map()) {
-	        int home_server_len;
-		char *automount_value = automount_lookup(user_name);
-		home_server_len = strcspn(automount_value,":");
-		DEBUG(5, ("NIS lookup succeeded.  Home server length: %d\n",home_server_len));
-		if (home_server_len > sizeof(pstring))
-			home_server_len = sizeof(pstring);
-		strncpy(server_name, automount_value, home_server_len);
-                server_name[home_server_len] = '\0';
-	}
-#endif
-
-	DEBUG(4,("Home server: %s\n", server_name));
-
-	return server_name;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /****************************************************************************
@@ -327,28 +232,8 @@ void standard_sub_conn(connection_struct
 
 void standard_sub_home(int snum, char *user, char *str, int len)
 {
-	char *p, *s;
-
-	for (s=str; (p=strchr(s, '%'));s=p) {
-		int l = len - (int)(p-str);
-		
-		switch (*(p+1)) {
-		case 'S': 
-			string_sub(p,"%S", user, l); 
-			break;
-		case 'p': 
-			string_sub(p,"%p", automount_path(user), l); 
-			break;
-		case '\0': 
-			p++; 
-			break; /* don't run off the end of the string */
-			
-		default: p+=2; 
-			break;
-		}
-	}
-
-	standard_sub_advanced(snum, user, "", -1, str, len);
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /****************************************************************************
@@ -377,7 +262,8 @@ void standard_sub_snum(int snum, char *s
 
 void standard_sub_vuser(char *str, int len, user_struct *vuser)
 {
-	standard_sub_advanced(-1, vuser->user.unix_name, "", -1, str, len);
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -386,5 +272,6 @@ void standard_sub_vuser(char *str, int l
 
 void standard_sub_vsnum(char *str, int len, user_struct *vuser, int snum)
 {
-	standard_sub_advanced(snum, vuser->user.unix_name, "", -1, str, len);
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
diff -pruwN samba-2.2.12/source/lib/sysacls.c samba-2.2.12-livebox/lib/sysacls.c
--- samba-2.2.12/source/lib/sysacls.c	2004-08-12 20:24:24.000000000 +0200
+++ samba-2.2.12-livebox/lib/sysacls.c	2010-03-31 11:45:59.000000000 +0200
@@ -72,7 +72,8 @@
 
 int sys_acl_get_entry( SMB_ACL_T the_acl, int entry_id, SMB_ACL_ENTRY_T *entry_p)
 {
-	return acl_get_entry( the_acl, entry_id, entry_p);
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 int sys_acl_get_tag_type( SMB_ACL_ENTRY_T entry_d, SMB_ACL_TAG_T *tag_type_p)
@@ -82,12 +83,14 @@ int sys_acl_get_tag_type( SMB_ACL_ENTRY_
 
 int sys_acl_get_permset( SMB_ACL_ENTRY_T entry_d, SMB_ACL_PERMSET_T *permset_p)
 {
-	return acl_get_permset( entry_d, permset_p);
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 void *sys_acl_get_qualifier( SMB_ACL_ENTRY_T entry_d)
 {
-	return acl_get_qualifier( entry_d);
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 SMB_ACL_T sys_acl_get_file( const char *path_p, SMB_ACL_TYPE_T type)
@@ -97,17 +100,20 @@ SMB_ACL_T sys_acl_get_file( const char *
 
 SMB_ACL_T sys_acl_get_fd(int fd)
 {
-	return acl_get_fd(fd);
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 int sys_acl_clear_perms(SMB_ACL_PERMSET_T permset)
 {
-	return acl_clear_perms(permset);
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 int sys_acl_add_perm( SMB_ACL_PERMSET_T permset, SMB_ACL_PERM_T perm)
 {
-	return acl_add_perm(permset, perm);
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 int sys_acl_get_perm( SMB_ACL_PERMSET_T permset, SMB_ACL_PERM_T perm)
@@ -118,15 +124,18 @@ int sys_acl_get_perm( SMB_ACL_PERMSET_T
 	 * non-POSIX.1e functions are denoted by a _np (non-portable)
 	 * suffix.
 	 */
-	return acl_get_perm_np(permset, perm);
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 #else
-	return acl_get_perm(permset, perm);
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 #endif
 }
 
 char *sys_acl_to_text( SMB_ACL_T the_acl, ssize_t *plen)
 {
-	return acl_to_text( the_acl, plen);
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 SMB_ACL_T sys_acl_init( int count)
@@ -176,7 +185,8 @@ int sys_acl_delete_def_file(const char *
 
 int sys_acl_free_text(char *text)
 {
-	return acl_free(text);
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 int sys_acl_free_acl(SMB_ACL_T the_acl) 
@@ -278,51 +288,50 @@ SMB_ACL_T sys_acl_init( int count)
 
 int sys_acl_create_entry( SMB_ACL_T *pacl, SMB_ACL_ENTRY_T *pentry)
 {
-	SMB_ACL_ENTRY_T entry;
-
-	if ((entry = acl_create_entry(pacl)) == NULL) {
-		return -1;
-	}
-
-	*pentry = entry;
-	return 0;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 int sys_acl_set_tag_type( SMB_ACL_ENTRY_T entry, SMB_ACL_TAG_T tagtype)
 {
-	return acl_set_tag_type(entry, tagtype);
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 int sys_acl_set_qualifier( SMB_ACL_ENTRY_T entry, void *qual)
 {
-	return acl_set_qualifier(entry, qual);
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 int sys_acl_set_permset( SMB_ACL_ENTRY_T entry, SMB_ACL_PERMSET_T permset)
 {
-	return acl_set_permset(entry, permset);
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 int sys_acl_valid( SMB_ACL_T theacl )
 {
-	acl_entry_t	entry;
-
-	return acl_valid(theacl, &entry);
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 int sys_acl_set_file( const char *name, SMB_ACL_TYPE_T acltype, SMB_ACL_T theacl)
 {
-	return acl_set_file((char *)name, acltype, theacl);
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 int sys_acl_set_fd( int fd, SMB_ACL_T theacl)
 {
-	return acl_set_fd(fd, ACL_TYPE_ACCESS, theacl);
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 int sys_acl_delete_def_file(const char *name)
 {
-	return acl_delete_def_file((char *)name);
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 int sys_acl_free_text(char *text)
@@ -337,12 +346,14 @@ int sys_acl_free_text(char *text)
 
 int sys_acl_free_acl(SMB_ACL_T the_acl) 
 {
-	return acl_free(the_acl);
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 int sys_acl_free_qualifier(void *qual, SMB_ACL_TAG_T tagtype)
 {
-	return acl_free_qualifier(qual, tagtype);
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 #elif defined(HAVE_UNIXWARE_ACLS) || defined(HAVE_SOLARIS_ACLS)
diff -pruwN samba-2.2.12/source/libsmb/cliconnect.c samba-2.2.12-livebox/libsmb/cliconnect.c
--- samba-2.2.12/source/libsmb/cliconnect.c	2004-08-12 20:24:26.000000000 +0200
+++ samba-2.2.12-livebox/libsmb/cliconnect.c	2010-03-31 11:45:59.000000000 +0200
@@ -46,65 +46,8 @@ static const struct {
 static BOOL cli_session_setup_lanman2(struct cli_state *cli, const char *user, 
 				      const char *pass, int passlen)
 {
-	fstring pword;
-	char *p;
-
-	if (passlen > sizeof(pword)-1) {
-		return False;
-	}
-
-	/* if in share level security then don't send a password now */
-	if (!(cli->sec_mode & 1)) {
-		passlen = 0;
-	}
-
-	if (passlen > 0 && (cli->sec_mode & 2) && passlen != 24) {
-		/* Encrypted mode needed, and non encrypted password supplied. */
-		passlen = 24;
-		clistr_push(cli, pword, pass, -1, STR_CONVERT|STR_TERMINATE);
-		SMBencrypt((uchar *)pword,cli->cryptkey,(uchar *)pword);
-	} else if ((cli->sec_mode & 2) && passlen == 24) {
-		/* Encrypted mode needed, and encrypted password supplied. */
-		memcpy(pword, pass, passlen);
-	} else if (passlen > 0) {
-		/* Plaintext mode needed, assume plaintext supplied. */
-		passlen = clistr_push(cli, pword, pass, -1, STR_CONVERT|STR_TERMINATE);
-	}
-
-	/* send a session setup command */
-	memset(cli->outbuf,'\0',smb_size);
-	set_message(cli->outbuf,10, 0, True);
-	SCVAL(cli->outbuf,smb_com,SMBsesssetupX);
-	cli_setup_packet(cli);
-	
-	SCVAL(cli->outbuf,smb_vwv0,0xFF);
-	SSVAL(cli->outbuf,smb_vwv2,cli->max_xmit);
-	SSVAL(cli->outbuf,smb_vwv3,2);
-	SSVAL(cli->outbuf,smb_vwv4,1);
-	SIVAL(cli->outbuf,smb_vwv5,cli->sesskey);
-	SSVAL(cli->outbuf,smb_vwv7,passlen);
-
-	p = smb_buf(cli->outbuf);
-	memcpy(p,pword,passlen);
-	p += passlen;
-	p += clistr_push(cli, p, user, -1, STR_TERMINATE);
-	cli_setup_bcc(cli, p);
-
-	cli_send_smb(cli);
-	if (!cli_receive_smb(cli))
-		return False;
-
-	show_msg(cli->inbuf);
-
-	if (cli_is_error(cli)) {
-		return False;
-	}
-	
-	/* use the returned vuid from now on */
-	cli->vuid = SVAL(cli->inbuf,smb_uid);	
-	fstrcpy(cli->user_name, user);
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/DEBUG(1,("function ommited\n"));
 }
 
 /****************************************************************************
@@ -187,52 +130,8 @@ static BOOL cli_session_setup_guest(stru
 static BOOL cli_session_setup_plaintext(struct cli_state *cli, const char *user, 
 					const char *pass, const char *workgroup)
 {
-	uint32 capabilities = cli_session_setup_capabilities(cli);
-	fstring pword;
-	int passlen;
-	char *p;
-
-	passlen = clistr_push(cli, pword, pass, sizeof(pword), STR_TERMINATE|STR_CONVERT);
-
-	set_message(cli->outbuf,13,0,True);
-	SCVAL(cli->outbuf,smb_com,SMBsesssetupX);
-	cli_setup_packet(cli);
-			
-	SCVAL(cli->outbuf,smb_vwv0,0xFF);
-	SSVAL(cli->outbuf,smb_vwv2,CLI_BUFFER_SIZE);
-	SSVAL(cli->outbuf,smb_vwv3,2);
-	SSVAL(cli->outbuf,smb_vwv4,cli->pid);
-	SIVAL(cli->outbuf,smb_vwv5,cli->sesskey);
-	SSVAL(cli->outbuf,smb_vwv7,passlen);
-	SSVAL(cli->outbuf,smb_vwv8,0);
-	SIVAL(cli->outbuf,smb_vwv11,capabilities); 
-	p = smb_buf(cli->outbuf);
-	memcpy(p, pword, passlen);
-	p += passlen;
-	p += clistr_push(cli, p, user, -1, STR_TERMINATE|STR_CONVERT); /* username */
-	p += clistr_push(cli, p, workgroup, -1, STR_TERMINATE|STR_CONVERT); /* workgroup */
-	p += clistr_push(cli, p, "Unix", -1, STR_TERMINATE|STR_CONVERT);
-	p += clistr_push(cli, p, "Samba", -1, STR_TERMINATE|STR_CONVERT);
-	cli_setup_bcc(cli, p);
-
-	cli_send_smb(cli);
-	if (!cli_receive_smb(cli))
-	      return False;
-	
-	show_msg(cli->inbuf);
-	
-	if (cli_is_error(cli)) {
-		return False;
-	}
-
-	cli->vuid = SVAL(cli->inbuf,smb_uid);
-	p = smb_buf(cli->inbuf);
-	p += clistr_pull(cli, cli->server_os, p, sizeof(fstring), -1, STR_TERMINATE);
-	p += clistr_pull(cli, cli->server_type, p, sizeof(fstring), -1, STR_TERMINATE);
-	p += clistr_pull(cli, cli->server_domain, p, sizeof(fstring), -1, STR_TERMINATE);
-	fstrcpy(cli->user_name, user);
-
-	return True;
+DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 
@@ -245,72 +144,8 @@ static BOOL cli_session_setup_nt1(struct
 				  const char *ntpass, int ntpasslen,
 				  const char *workgroup)
 {
-	uint32 capabilities = cli_session_setup_capabilities(cli);
-	fstring pword, ntpword;
-	char *p;
-
-	if (passlen > sizeof(pword)-1 || ntpasslen > sizeof(ntpword)-1) {
-		return False;
-	}
-
-	if (passlen != 24) {
-		/* non encrypted password supplied. */
-		passlen = 24;
-		ntpasslen = 24;
-		clistr_push(cli, pword, pass, sizeof(pword), STR_TERMINATE|STR_CONVERT);
-		clistr_push(cli, ntpword, ntpass, sizeof(ntpword), STR_TERMINATE|STR_CONVERT);
-		SMBencrypt((uchar *)pword,cli->cryptkey,(uchar *)pword);
-		SMBNTencrypt((uchar *)ntpword,cli->cryptkey,(uchar *)ntpword);
-	} else {
-		memcpy(pword, pass, passlen);
-		memcpy(ntpword, ntpass, ntpasslen);
-	}
-
-	/* send a session setup command */
-	memset(cli->outbuf,'\0',smb_size);
-
-	set_message(cli->outbuf,13,0,True);
-	SCVAL(cli->outbuf,smb_com,SMBsesssetupX);
-	cli_setup_packet(cli);
-			
-	SCVAL(cli->outbuf,smb_vwv0,0xFF);
-	SSVAL(cli->outbuf,smb_vwv2,CLI_BUFFER_SIZE);
-	SSVAL(cli->outbuf,smb_vwv3,2);
-	SSVAL(cli->outbuf,smb_vwv4,cli->pid);
-	SIVAL(cli->outbuf,smb_vwv5,cli->sesskey);
-	SSVAL(cli->outbuf,smb_vwv7,passlen);
-	SSVAL(cli->outbuf,smb_vwv8,ntpasslen);
-	SIVAL(cli->outbuf,smb_vwv11,capabilities); 
-	p = smb_buf(cli->outbuf);
-	memcpy(p,pword,passlen); p += passlen;
-	memcpy(p,ntpword,ntpasslen); p += ntpasslen;
-	p += clistr_push(cli, p, user, -1, STR_TERMINATE|STR_UPPER|STR_CONVERT);
-	p += clistr_push(cli, p, workgroup, -1, STR_TERMINATE|STR_UPPER|STR_CONVERT);
-	p += clistr_push(cli, p, "Unix", -1, STR_TERMINATE|STR_CONVERT);
-	p += clistr_push(cli, p, "Samba", -1, STR_TERMINATE|STR_CONVERT);
-	cli_setup_bcc(cli, p);
-
-	cli_send_smb(cli);
-	if (!cli_receive_smb(cli))
-		return False;
-
-	show_msg(cli->inbuf);
-
-	if (cli_is_error(cli)) {
-		return False;
-	}
-	
-	/* use the returned vuid from now on */
-	cli->vuid = SVAL(cli->inbuf,smb_uid);
-	
-	p = smb_buf(cli->inbuf);
-	p += clistr_pull(cli, cli->server_os, p, sizeof(fstring), -1, STR_TERMINATE);
-	p += clistr_pull(cli, cli->server_type, p, sizeof(fstring), -1, STR_TERMINATE);
-	p += clistr_pull(cli, cli->server_domain, p, sizeof(fstring), -1, STR_TERMINATE);
-
-	fstrcpy(cli->user_name, user);
-
-	return True;
+DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /****************************************************************************
@@ -485,17 +320,8 @@ BOOL cli_send_tconX(struct cli_state *cl
 
 BOOL cli_tdis(struct cli_state *cli)
 {
-	memset(cli->outbuf,'\0',smb_size);
-	set_message(cli->outbuf,0,0,True);
-	SCVAL(cli->outbuf,smb_com,SMBtdis);
-	SSVAL(cli->outbuf,smb_tid,cli->cnum);
-	cli_setup_packet(cli);
-	
-	cli_send_smb(cli);
-	if (!cli_receive_smb(cli))
-		return False;
-	
-	return !cli_is_error(cli);
+DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 
@@ -505,29 +331,8 @@ BOOL cli_tdis(struct cli_state *cli)
 
 void cli_negprot_send(struct cli_state *cli)
 {
-	char *p;
-	int numprots;
-
-	memset(cli->outbuf,'\0',smb_size);
-
-	/* setup the protocol strings */
-	set_message(cli->outbuf,0,0,True);
-
-	p = smb_buf(cli->outbuf);
-	for (numprots=0;
-	     prots[numprots].name && prots[numprots].prot<=cli->protocol;
-	     numprots++) {
-		*p++ = 2;
-		p += clistr_push(cli, p, prots[numprots].name, -1, STR_CONVERT|STR_TERMINATE);
-	}
-
-	SCVAL(cli->outbuf,smb_com,SMBnegprot);
-	cli_setup_bcc(cli, p);
-	cli_setup_packet(cli);
-
-	SCVAL(smb_buf(cli->outbuf),0,2);
-
-	cli_send_smb(cli);
+DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 
@@ -799,114 +604,8 @@ BOOL cli_establish_connection(struct cli
 				const char *service, const char *service_type,
 				BOOL do_shutdown, BOOL do_tcon)
 {
-	DEBUG(5,("cli_establish_connection: %s connecting to %s (%s) - %s [%s]\n",
-		          nmb_namestr(calling), nmb_namestr(called), inet_ntoa(*dest_ip),
-	              cli->user_name, cli->domain));
-
-	/* establish connection */
-
-	if ((!cli->initialised))
-		return False;
-
-	if (cli->fd == -1) {
-		if (!cli_connect(cli, dest_host, dest_ip)) {
-			DEBUG(1,("cli_establish_connection: failed to connect to %s (%s)\n",
-					  nmb_namestr(called), inet_ntoa(*dest_ip)));
-			return False;
-		}
-	}
-
-	if (!cli_session_request(cli, calling, called)) {
-		DEBUG(1,("failed session request\n"));
-		if (do_shutdown)
-			cli_shutdown(cli);
-		return False;
-	}
-
-	if (!cli_negprot(cli)) {
-		DEBUG(1,("failed negprot\n"));
-		if (do_shutdown)
-          		cli_shutdown(cli);
-		return False;
-	}
-
-	if (cli->pwd.cleartext || cli->pwd.null_pwd) {
-		fstring passwd;
-		int pass_len;
-
-		if (cli->pwd.null_pwd) {
-			/* attempt null session */
-			passwd[0] = 0;
-			pass_len = 1;
-		} else {
-			/* attempt clear-text session */
-			pwd_get_cleartext(&(cli->pwd), passwd);
-			pass_len = strlen(passwd);
-		}
-
-		/* attempt clear-text session */
-		if (!cli_session_setup(cli, cli->user_name,
-	                       passwd, pass_len,
-	                       NULL, 0,
-	                       cli->domain)) {
-			DEBUG(1,("failed session setup\n"));
-			if (do_shutdown)
-				cli_shutdown(cli);
-			return False;
-		}
-		if (do_tcon) {
-			if (!cli_send_tconX(cli, service, service_type,
-			                    (char*)passwd, strlen(passwd))) {
-				DEBUG(1,("failed tcon_X\n"));
-				if (do_shutdown)
-					cli_shutdown(cli);
-				return False;
-			}
-		}
-	} else {
-		/* attempt encrypted session */
-		unsigned char nt_sess_pwd[24];
-		unsigned char lm_sess_pwd[24];
-
-		/* creates (storing a copy of) and then obtains a 24 byte password OWF */
-		pwd_make_lm_nt_owf(&cli->pwd, cli->cryptkey);
-		pwd_get_lm_nt_owf(&cli->pwd, lm_sess_pwd, nt_sess_pwd);
-
-		/* attempt encrypted session */
-		if (!cli_session_setup(cli, cli->user_name,
-	                       (char*)lm_sess_pwd, sizeof(lm_sess_pwd),
-	                       (char*)nt_sess_pwd, sizeof(nt_sess_pwd),
-	                       cli->domain)) {
-			DEBUG(1,("failed session setup\n"));
-			if (do_shutdown)
-		              cli_shutdown(cli);
-			return False;
-		}
-
-    		DEBUG(1,("session setup ok\n"));
-    
-    		if (*cli->server_domain || *cli->server_os || *cli->server_type) {
-    			DEBUG(1,("Domain=[%s] OS=[%s] Server=[%s]\n",
-				 cli->server_domain,
-				 cli->server_os,
-				 cli->server_type));
-    		}
-		
-		if (do_tcon) {
-			if (!cli_send_tconX(cli, service, service_type,
-			                    (char*)nt_sess_pwd, sizeof(nt_sess_pwd))) {
-				DEBUG(1,("failed tcon_X\n"));
-				if (do_shutdown)
-					cli_shutdown(cli);
-				return False;
-			}
-		}
-	}
-
-	if (do_shutdown)
-		cli_shutdown(cli);
-
-	return True;
+DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /****************************************************************************
@@ -916,16 +615,8 @@ BOOL cli_establish_connection(struct cli
 static void init_creds(struct ntuser_creds *creds, const char* username,
 		       const char* domain, const char* password, int pass_len)
 {
-	ZERO_STRUCTP(creds);
-
-	pwd_set_cleartext(&creds->pwd, password);
-
-	fstrcpy(creds->user_name, username);
-	fstrcpy(creds->domain, domain);
-
-	if (!*username) {
-		creds->pwd.null_pwd = True;
-	}
+DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /****************************************************************************
@@ -939,92 +630,8 @@ NTSTATUS cli_full_connection(struct cli_
 			     const char *user, const char *domain, 
 			     const char *password, int pass_len) 
 {
-	struct ntuser_creds creds;
-	NTSTATUS nt_status;
-	struct nmb_name calling;
-	struct nmb_name called;
-	struct cli_state *cli;
-	struct in_addr ip;
-	
-	if (!output_cli)
-		DEBUG(0, ("output_cli is NULL!?!"));
-
-	*output_cli = NULL;
-	
-	make_nmb_name(&calling, my_name, 0x0);
-	make_nmb_name(&called , dest_host, 0x20);
-
-again:
-
-	if (!(cli = cli_initialise(NULL)))
-		return NT_STATUS_NO_MEMORY;
-	
-	if (cli_set_port(cli, port) != port) {
-		cli_shutdown(cli);
-		return NT_STATUS_UNSUCCESSFUL;
-	}
-
-	ip = *dest_ip;
-	
-	DEBUG(3,("Connecting to host=%s share=%s\n", dest_host, service));
-	
-	if (!cli_connect(cli, dest_host, &ip)) {
-		DEBUG(1,("cli_establish_connection: failed to connect to %s (%s)\n",
-			 nmb_namestr(&called), inet_ntoa(*dest_ip)));
-		cli_shutdown(cli);
-		return NT_STATUS_UNSUCCESSFUL;
-	}
-
-	if (!cli_session_request(cli, &calling, &called)) {
-		char *p;
-		DEBUG(1,("session request to %s failed (%s)\n", 
-			 called.name, cli_errstr(cli)));
-		cli_shutdown(cli);
-		if ((p=strchr(called.name, '.')) && !is_ipaddress(called.name)) {
-			*p = 0;
-			goto again;
-		}
-		if (strcmp(called.name, "*SMBSERVER")) {
-			make_nmb_name(&called , "*SMBSERVER", 0x20);
-			goto again;
-		}
-		return NT_STATUS_UNSUCCESSFUL;
-	}
-
-	if (!cli_negprot(cli)) {
-		DEBUG(1,("failed negprot\n"));
-		nt_status = NT_STATUS_UNSUCCESSFUL;
-		cli_shutdown(cli);
-		return nt_status;
-	}
-
-	if (!cli_session_setup(cli, user, password, pass_len, password, pass_len, 
-			       domain)) {
-		DEBUG(1,("failed session setup\n"));
-		nt_status = cli_nt_error(cli);
-		cli_shutdown(cli);
-		if (NT_STATUS_IS_OK(nt_status)) 
-			nt_status = NT_STATUS_UNSUCCESSFUL;
-		return nt_status;
-	} 
-
-	if (service) {
-		if (!cli_send_tconX(cli, service, service_type,
-				    password, pass_len)) {
-			DEBUG(1,("failed tcon_X\n"));
-			nt_status = cli_nt_error(cli);
-			cli_shutdown(cli);
-			if (NT_STATUS_IS_OK(nt_status)) 
-				nt_status = NT_STATUS_UNSUCCESSFUL;
-			return nt_status;
-		}
-	}
-
-	init_creds(&creds, user, domain, password, pass_len);
-	cli_init_creds(cli, &creds);
-
-	*output_cli = cli;
-	return NT_STATUS_OK;
+DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /****************************************************************************
diff -pruwN samba-2.2.12/source/libsmb/clidgram.c samba-2.2.12-livebox/libsmb/clidgram.c
--- samba-2.2.12/source/libsmb/clidgram.c	2004-08-12 20:24:25.000000000 +0200
+++ samba-2.2.12-livebox/libsmb/clidgram.c	2010-03-31 11:45:59.000000000 +0200
@@ -36,70 +36,8 @@ int cli_send_mailslot(int dgram_sock, BO
 		      struct in_addr dest_ip, struct in_addr src_ip,
 		      int dest_port, int src_port)
 {
-  struct packet_struct p;
-  struct dgram_packet *dgram = &p.packet.dgram;
-  char *ptr, *p2;
-  char tmp[4];
-
-  memset((char *)&p, '\0', sizeof(p));
-
-  /*
-   * Next, build the DGRAM ...
-   */
-
-  /* DIRECT GROUP or UNIQUE datagram. */
-  dgram->header.msg_type = unique ? 0x10 : 0x11; 
-  dgram->header.flags.node_type = M_NODE;
-  dgram->header.flags.first = True;
-  dgram->header.flags.more = False;
-  dgram->header.dgm_id = ((unsigned)time(NULL)%(unsigned)0x7FFF) + ((unsigned)sys_getpid()%(unsigned)100);
-  dgram->header.source_ip.s_addr = src_ip.s_addr;
-  /*fprintf(stderr, "Source IP = %0X\n", dgram->header.source_ip); */
-  dgram->header.source_port = ntohs(src_port);
-  fprintf(stderr, "Source Port = %0X\n", dgram->header.source_port);
-  dgram->header.dgm_length = 0; /* Let build_dgram() handle this. */
-  dgram->header.packet_offset = 0;
-  
-  make_nmb_name(&dgram->source_name,srcname,src_type);
-  make_nmb_name(&dgram->dest_name,dstname,dest_type);
-
-  ptr = &dgram->data[0];
-
-  /* Setup the smb part. */
-  ptr -= 4; /* XXX Ugliness because of handling of tcp SMB length. */
-  memcpy(tmp,ptr,4);
-  set_message(ptr,17,17 + len,True);
-  memcpy(ptr,tmp,4);
-
-  SCVAL(ptr,smb_com,SMBtrans);
-  SSVAL(ptr,smb_vwv1,len);
-  SSVAL(ptr,smb_vwv11,len);
-  SSVAL(ptr,smb_vwv12,70 + strlen(mailslot));
-  SSVAL(ptr,smb_vwv13,3);
-  SSVAL(ptr,smb_vwv14,1);
-  SSVAL(ptr,smb_vwv15,1);
-  SSVAL(ptr,smb_vwv16,2);
-  p2 = smb_buf(ptr);
-  pstrcpy(p2,mailslot);
-  p2 = skip_string(p2,1);
-
-  memcpy(p2,buf,len);
-  p2 += len;
-
-  dgram->datasize = PTR_DIFF(p2,ptr+4); /* +4 for tcp length. */
-
-  p.ip = dest_ip;
-  p.port = dest_port;
-  p.fd = dgram_sock;
-  p.timestamp = time(NULL);
-  p.packet_type = DGRAM_PACKET;
-
-  DEBUG(4,("send_mailslot: Sending to mailslot %s from %s IP %s ", mailslot,
-                    nmb_namestr(&dgram->source_name), inet_ntoa(src_ip)));
-  DEBUG(4,("to %s IP %s\n", nmb_namestr(&dgram->dest_name), inet_ntoa(dest_ip)));
-
-  return send_packet(&p);
-
+DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*
@@ -107,28 +45,8 @@ int cli_send_mailslot(int dgram_sock, BO
  */
 int cli_get_response(int dgram_sock, BOOL unique, const char *mailslot, char *buf, int bufsiz)
 {
-  struct packet_struct *packet;
-
-  packet = receive_dgram_packet(dgram_sock, 5, mailslot);
-
-  if (packet) { /* We got one, pull what we want out of the SMB data ... */
-
-    struct dgram_packet *dgram = &packet->packet.dgram;
-
-    /*
-     * We should probably parse the SMB, but for now, we will pull what
-     * from fixed, known locations ...
-     */
-
-    /* Copy the data to buffer, respecting sizes ... */
-
-    memcpy(buf, &dgram->data[92], MIN(bufsiz, (dgram->datasize - 92)));
-
-  }
-  else 
-    return -1;
-
-  return 0;
+DEBUG(1,("function ommited\n"));
+/* function omited*/
 
 }
 
@@ -140,109 +58,8 @@ static char cli_backup_list[1024];
 
 int cli_get_backup_list(const char *myname, const char *send_to_name)
 {
-  char outbuf[15];
-  char *p;
-  struct in_addr sendto_ip, my_ip;
-  int dgram_sock;
-  struct sockaddr_in sock_out;
-  socklen_t name_size;
-
-  if (!resolve_name(send_to_name, &sendto_ip, 0x1d)) {
-
-    DEBUG(0, ("Could not resolve name: %s<1D>\n", send_to_name));
-    return False;
-
-  }
-
-  my_ip.s_addr = inet_addr("0.0.0.0");
- 
-  if (!resolve_name(myname, &my_ip, 0x00)) { /* FIXME: Call others here */
-
-    DEBUG(0, ("Could not resolve name: %s<00>\n", myname));
-
-  }
-
-  if ((dgram_sock = open_socket_out(SOCK_DGRAM, &sendto_ip, 138, LONG_CONNECT_TIMEOUT)) < 0) {
-
-    DEBUG(4, ("open_sock_out failed ..."));
-    return False;
-
-  }
-
-  /* Make it a broadcast socket ... */
-
-  set_socket_options(dgram_sock, "SO_BROADCAST");
-
-  /* Make it non-blocking??? */
-
-  if (fcntl(dgram_sock, F_SETFL, O_NONBLOCK) < 0) {
-
-    DEBUG(0, ("Unable to set non blocking on dgram sock\n"));
-
-  }
-
-  /* Now, bind a local addr to it ... Try port 138 first ... */
-
-  memset((char *)&sock_out, '\0', sizeof(sock_out));
-  sock_out.sin_addr.s_addr = INADDR_ANY;
-  sock_out.sin_port = htons(138);
-  sock_out.sin_family = AF_INET;
-
-  if (bind(dgram_sock, (struct sockaddr *)&sock_out, sizeof(sock_out)) < 0) {
-
-    /* Try again on any port ... */
-
-    sock_out.sin_port = INADDR_ANY;
-
-    if (bind(dgram_sock, (struct sockaddr *)&sock_out, sizeof(sock_out)) < 0) {
-
-      DEBUG(4, ("failed to bind socket to address ...\n"));
-      return False;
-	
-    }
-
-  }
-
-  /* Now, figure out what socket name we were bound to. We want the port */
-
-  name_size = sizeof(sock_out);
-
-  getsockname(dgram_sock, (struct sockaddr *)&sock_out, &name_size);
-
-  DEBUG(5, ("Socket bound to IP:%s, port: %d\n", inet_ntoa(sock_out.sin_addr), ntohs(sock_out.sin_port)));
-
-  /* Now, build the request */
-
-  memset(cli_backup_list, '\0', sizeof(cli_backup_list));
-  memset(outbuf, '\0', sizeof(outbuf));
-
-  p = outbuf;
-
-  SCVAL(p, 0, ANN_GetBackupListReq);
-  p++;
-
-  SCVAL(p, 0, 1); /* Count pointer ... */
-  p++;
-
-  SIVAL(p, 0, 1); /* The sender's token ... */
-  p += 4;
-
-  cli_send_mailslot(dgram_sock, True, "\\MAILSLOT\\BROWSE", outbuf, 
-		    PTR_DIFF(p, outbuf), myname, 0, send_to_name, 
-		    0x1d, sendto_ip, my_ip, 138, sock_out.sin_port);
-
-  /* We should check the error and return if we got one */
-
-  /* Now, get the response ... */
-
-  cli_get_response(dgram_sock, True, "\\MAILSLOT\\BROWSE", cli_backup_list, sizeof(cli_backup_list));
-
-  /* Should check the response here ... FIXME */
-
-  close(dgram_sock);
-
-  return True;
-
+DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*
@@ -252,19 +69,8 @@ int cli_get_backup_list(const char *myna
 int cli_get_backup_server(char *my_name, char *target, char *servername, int namesize)
 {
 
-  /* Get the backup list first. We could pull this from the cache later */
-
-  cli_get_backup_list(my_name, target);  /* FIXME: Check the response */
-
-  if (!cli_backup_list[0]) { /* Empty list ... try again */
-
-    cli_get_backup_list(my_name, target);
-
-  }
-
-  strncpy(servername, cli_backup_list, MIN(16, namesize));
-
-  return True;
+DEBUG(1,("function ommited\n"));
+/* function omited*/
 
 }
 
diff -pruwN samba-2.2.12/source/libsmb/clientgen.c samba-2.2.12-livebox/libsmb/clientgen.c
--- samba-2.2.12/source/libsmb/clientgen.c	2004-08-12 20:24:25.000000000 +0200
+++ samba-2.2.12-livebox/libsmb/clientgen.c	2010-03-31 11:45:59.000000000 +0200
@@ -29,8 +29,8 @@
 
 int cli_set_port(struct cli_state *cli, int port)
 {
-	cli->port = port;
-	return port;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /****************************************************************************
@@ -147,16 +147,8 @@ void cli_setup_bcc(struct cli_state *cli
 
 void cli_init_creds(struct cli_state *cli, const struct ntuser_creds *usr)
 {
-        /* copy_nt_creds(&cli->usr, usr); */
-	safe_strcpy(cli->domain   , usr->domain   , sizeof(usr->domain   )-1);
-	safe_strcpy(cli->user_name, usr->user_name, sizeof(usr->user_name)-1);
-	memcpy(&cli->pwd, &usr->pwd, sizeof(usr->pwd));
-        cli->ntlmssp_flags = usr->ntlmssp_flags;
-        cli->ntlmssp_cli_flgs = usr != NULL ? usr->ntlmssp_flags : 0;
-
-        DEBUG(10,("cli_init_creds: user %s domain %s flgs: %x\nntlmssp_cli_flgs:%x\n",
-               cli->user_name, cli->domain,
-               cli->ntlmssp_flags,cli->ntlmssp_cli_flgs));
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /****************************************************************************
@@ -277,7 +269,8 @@ void cli_shutdown(struct cli_state *cli)
 
 void cli_sockopt(struct cli_state *cli, char *options)
 {
-	set_socket_options(cli->fd, options);
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /****************************************************************************
@@ -286,9 +279,8 @@ void cli_sockopt(struct cli_state *cli,
 
 uint16 cli_setpid(struct cli_state *cli, uint16 pid)
 {
-	uint16 ret = cli->pid;
-	cli->pid = pid;
-	return ret;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /****************************************************************************
@@ -297,16 +289,6 @@ uint16 cli_setpid(struct cli_state *cli,
 
 BOOL cli_send_keepalive(struct cli_state *cli)
 {
-        if (cli->fd == -1) {
-                DEBUG(3, ("cli_send_keepalive: fd == -1\n"));
-                return False;
-        }
-        if (!send_keepalive(cli->fd)) {
-                close(cli->fd);
-                cli->fd = -1;
-                DEBUG(0,("Error sending keepalive packet to client. (%s)\n",
-					strerror(errno) ));
-                return False;
-        }
-        return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/;
 }
diff -pruwN samba-2.2.12/source/libsmb/clifile.c samba-2.2.12-livebox/libsmb/clifile.c
--- samba-2.2.12/source/libsmb/clifile.c	2004-08-12 20:24:26.000000000 +0200
+++ samba-2.2.12-livebox/libsmb/clifile.c	2010-03-31 11:45:59.000000000 +0200
@@ -30,45 +30,8 @@
 
 static BOOL cli_link_internal(struct cli_state *cli, const char *fname_src, const char *fname_dst, BOOL hard_link)
 {
-	unsigned int data_len = 0;
-	unsigned int param_len = 0;
-	uint16 setup = TRANSACT2_SETPATHINFO;
-	char param[sizeof(pstring)+6];
-	pstring data;
-	char *rparam=NULL, *rdata=NULL;
-	char *p;
-
-	memset(param, 0, sizeof(param));
-	SSVAL(param,0,hard_link ? SMB_SET_FILE_UNIX_HLINK : SMB_SET_FILE_UNIX_LINK);
-	p = &param[6];
-
-	p += clistr_push(cli, p, fname_src, -1, STR_TERMINATE|STR_CONVERT);
-	param_len = PTR_DIFF(p, param);
-
-	p = data;
-	p += clistr_push(cli, p, fname_dst, -1, STR_TERMINATE|STR_CONVERT);
-	data_len = PTR_DIFF(p, data);
-
-	if (!cli_send_trans(cli, SMBtrans2,
-		NULL,                        /* name */
-		-1, 0,                          /* fid, flags */
-		&setup, 1, 0,                   /* setup, length, max */
-		param, param_len, 2,            /* param, length, max */
-		(char *)&data,  data_len, cli->max_xmit /* data, length, max */
-		)) {
-			return False;
-	}
-
-	if (!cli_receive_trans(cli, SMBtrans2,
-		&rparam, &param_len,
-		&rdata, &data_len)) {
-			return False;
-	}
-
-	SAFE_FREE(rdata);
-	SAFE_FREE(rparam);
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /****************************************************************************
@@ -77,27 +40,8 @@ static BOOL cli_link_internal(struct cli
 
 uint32  unix_perms_to_wire(mode_t perms)
 {
-        uint32 ret = 0;
-
-        ret |= ((perms & S_IXOTH) ?  UNIX_X_OTH : 0);
-        ret |= ((perms & S_IWOTH) ?  UNIX_W_OTH : 0);
-        ret |= ((perms & S_IROTH) ?  UNIX_R_OTH : 0);
-        ret |= ((perms & S_IXGRP) ?  UNIX_X_GRP : 0);
-        ret |= ((perms & S_IWGRP) ?  UNIX_W_GRP : 0);
-        ret |= ((perms & S_IRGRP) ?  UNIX_R_GRP : 0);
-        ret |= ((perms & S_IXUSR) ?  UNIX_X_USR : 0);
-        ret |= ((perms & S_IWUSR) ?  UNIX_W_USR : 0);
-        ret |= ((perms & S_IRUSR) ?  UNIX_R_USR : 0);
-#ifdef S_ISVTX
-        ret |= ((perms & S_ISVTX) ?  UNIX_STICKY : 0);
-#endif
-#ifdef S_ISGID
-        ret |= ((perms & S_ISGID) ?  UNIX_SET_GID : 0);
-#endif
-#ifdef S_ISUID
-        ret |= ((perms & S_ISUID) ?  UNIX_SET_UID : 0);
-#endif
-        return ret;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /****************************************************************************
@@ -106,7 +50,8 @@ uint32  unix_perms_to_wire(mode_t perms)
 
 BOOL cli_unix_symlink(struct cli_state *cli, const char *fname_src, const char *fname_dst)
 {
-	return cli_link_internal(cli, fname_src, fname_dst, False);
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /****************************************************************************
@@ -115,7 +60,8 @@ BOOL cli_unix_symlink(struct cli_state *
 
 BOOL cli_unix_hardlink(struct cli_state *cli, const char *fname_src, const char *fname_dst)
 {
-	return cli_link_internal(cli, fname_src, fname_dst, True);
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /****************************************************************************
@@ -124,48 +70,8 @@ BOOL cli_unix_hardlink(struct cli_state
 
 static BOOL cli_unix_chmod_chown_internal(struct cli_state *cli, const char *fname, uint32 mode, uint32 uid, uint32 gid)
 {
-	unsigned int data_len = 0;
-	unsigned int param_len = 0;
-	uint16 setup = TRANSACT2_SETPATHINFO;
-	char param[sizeof(pstring)+6];
-	char data[100];
-	char *rparam=NULL, *rdata=NULL;
-	char *p;
-
-	memset(param, 0, sizeof(param));
-	memset(data, 0, sizeof(data));
-	SSVAL(param,0,SMB_SET_FILE_UNIX_BASIC);
-	p = &param[6];
-
-	p += clistr_push(cli, p, fname, -1, STR_TERMINATE|STR_CONVERT);
-	param_len = PTR_DIFF(p, param);
-
-	SIVAL(data,40,uid);
-	SIVAL(data,48,gid);
-	SIVAL(data,84,mode);
-
-	data_len = 100;
-
-	if (!cli_send_trans(cli, SMBtrans2,
-		NULL,                        /* name */
-		-1, 0,                          /* fid, flags */
-		&setup, 1, 0,                   /* setup, length, max */
-		param, param_len, 2,            /* param, length, max */
-		(char *)&data,  data_len, cli->max_xmit /* data, length, max */
-		)) {
-			return False;
-	}
-
-	if (!cli_receive_trans(cli, SMBtrans2,
-		&rparam, &param_len,
-		&rdata, &data_len)) {
-			return False;
-	}
-
-	SAFE_FREE(rdata);
-	SAFE_FREE(rparam);
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /****************************************************************************
@@ -174,8 +80,8 @@ static BOOL cli_unix_chmod_chown_interna
 
 BOOL cli_unix_chmod(struct cli_state *cli, const char *fname, mode_t mode)
 {
-	return cli_unix_chmod_chown_internal(cli, fname, 
-		unix_perms_to_wire(mode), SMB_UID_NO_CHANGE, SMB_GID_NO_CHANGE);
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /****************************************************************************
@@ -184,7 +90,8 @@ BOOL cli_unix_chmod(struct cli_state *cl
 
 BOOL cli_unix_chown(struct cli_state *cli, const char *fname, uid_t uid, gid_t gid)
 {
-	return cli_unix_chmod_chown_internal(cli, fname, SMB_MODE_NO_CHANGE, (uint32)uid, (uint32)gid);
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /****************************************************************************
@@ -193,35 +100,8 @@ BOOL cli_unix_chown(struct cli_state *cl
 
 BOOL cli_rename(struct cli_state *cli, const char *fname_src, const char *fname_dst)
 {
-	char *p;
-
-	memset(cli->outbuf,'\0',smb_size);
-	memset(cli->inbuf,'\0',smb_size);
-
-	set_message(cli->outbuf,1, 0, True);
-
-	SCVAL(cli->outbuf,smb_com,SMBmv);
-	SSVAL(cli->outbuf,smb_tid,cli->cnum);
-	cli_setup_packet(cli);
-
-	SSVAL(cli->outbuf,smb_vwv0,aSYSTEM | aHIDDEN | aDIR);
-
-	p = smb_buf(cli->outbuf);
-	*p++ = 4;
-	p += clistr_push(cli, p, fname_src, -1, STR_TERMINATE|STR_CONVERT);
-	*p++ = 4;
-	p += clistr_push(cli, p, fname_dst, -1, STR_TERMINATE|STR_CONVERT);
-
-	cli_setup_bcc(cli, p);
-
-	cli_send_smb(cli);
-	if (!cli_receive_smb(cli))
-		return False;
-
-	if (cli_is_error(cli))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /****************************************************************************
@@ -230,34 +110,8 @@ BOOL cli_rename(struct cli_state *cli, c
 
 BOOL cli_unlink(struct cli_state *cli, const char *fname)
 {
-	char *p;
-
-	memset(cli->outbuf,'\0',smb_size);
-	memset(cli->inbuf,'\0',smb_size);
-
-	set_message(cli->outbuf,1, 0,True);
-
-	SCVAL(cli->outbuf,smb_com,SMBunlink);
-	SSVAL(cli->outbuf,smb_tid,cli->cnum);
-	cli_setup_packet(cli);
-
-	SSVAL(cli->outbuf,smb_vwv0,aSYSTEM | aHIDDEN);
-  
-	p = smb_buf(cli->outbuf);
-	*p++ = 4;      
-	p += clistr_push(cli, p, fname, -1, STR_TERMINATE|STR_CONVERT);
-
-	cli_setup_bcc(cli, p);
-	cli_send_smb(cli);
-	if (!cli_receive_smb(cli)) {
-		return False;
-	}
-
-	if (cli_is_error(cli)) {
-		return False;
-	}
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /****************************************************************************
@@ -266,33 +120,8 @@ BOOL cli_unlink(struct cli_state *cli, c
 
 BOOL cli_mkdir(struct cli_state *cli, const char *dname)
 {
-	char *p;
-
-	memset(cli->outbuf,'\0',smb_size);
-	memset(cli->inbuf,'\0',smb_size);
-
-	set_message(cli->outbuf,0, 0,True);
-
-	SCVAL(cli->outbuf,smb_com,SMBmkdir);
-	SSVAL(cli->outbuf,smb_tid,cli->cnum);
-	cli_setup_packet(cli);
-
-	p = smb_buf(cli->outbuf);
-	*p++ = 4;      
-	p += clistr_push(cli, p, dname, -1, STR_TERMINATE|STR_CONVERT);
-
-	cli_setup_bcc(cli, p);
-
-	cli_send_smb(cli);
-	if (!cli_receive_smb(cli)) {
-		return False;
-	}
-
-	if (cli_is_error(cli)) {
-		return False;
-	}
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /****************************************************************************
@@ -301,33 +130,8 @@ BOOL cli_mkdir(struct cli_state *cli, co
 
 BOOL cli_rmdir(struct cli_state *cli, const char *dname)
 {
-	char *p;
-
-	memset(cli->outbuf,'\0',smb_size);
-	memset(cli->inbuf,'\0',smb_size);
-
-	set_message(cli->outbuf,0, 0, True);
-
-	SCVAL(cli->outbuf,smb_com,SMBrmdir);
-	SSVAL(cli->outbuf,smb_tid,cli->cnum);
-	cli_setup_packet(cli);
-
-	p = smb_buf(cli->outbuf);
-	*p++ = 4;      
-	p += clistr_push(cli, p, dname, -1, STR_TERMINATE|STR_CONVERT);
-
-	cli_setup_bcc(cli, p);
-
-	cli_send_smb(cli);
-	if (!cli_receive_smb(cli)) {
-		return False;
-	}
-
-	if (cli_is_error(cli)) {
-		return False;
-	}
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /****************************************************************************
@@ -336,39 +140,8 @@ BOOL cli_rmdir(struct cli_state *cli, co
 
 int cli_nt_delete_on_close(struct cli_state *cli, int fnum, BOOL flag)
 {
-	unsigned int data_len = 1;
-	unsigned int param_len = 6;
-	uint16 setup = TRANSACT2_SETFILEINFO;
-	pstring param;
-	unsigned char data;
-	char *rparam=NULL, *rdata=NULL;
-
-	memset(param, 0, param_len);
-	SSVAL(param,0,fnum);
-	SSVAL(param,2,SMB_SET_FILE_DISPOSITION_INFO);
-
-	data = flag ? 1 : 0;
-
-	if (!cli_send_trans(cli, SMBtrans2,
-		NULL,                        /* name */
-		-1, 0,                          /* fid, flags */
-		&setup, 1, 0,                   /* setup, length, max */
-		param, param_len, 2,            /* param, length, max */
-		(char *)&data,  data_len, cli->max_xmit /* data, length, max */
-		)) {
-			return False;
-	}
-
-	if (!cli_receive_trans(cli, SMBtrans2,
-		&rparam, &param_len,
-		&rdata, &data_len)) {
-			return False;
-	}
-
-	SAFE_FREE(rdata);
-	SAFE_FREE(rparam);
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /****************************************************************************
@@ -445,76 +218,8 @@ int cli_nt_create(struct cli_state *cli,
 
 int cli_open(struct cli_state *cli, const char *fname, int flags, int share_mode)
 {
-	char *p;
-	unsigned openfn=0;
-	unsigned accessmode=0;
-
-	if (flags & O_CREAT)
-		openfn |= (1<<4);
-	if (!(flags & O_EXCL)) {
-		if (flags & O_TRUNC)
-			openfn |= (1<<1);
-		else
-			openfn |= (1<<0);
-	}
-
-	accessmode = (share_mode<<4);
-
-	if ((flags & O_ACCMODE) == O_RDWR) {
-		accessmode |= 2;
-	} else if ((flags & O_ACCMODE) == O_WRONLY) {
-		accessmode |= 1;
-	} 
-
-#if defined(O_SYNC)
-	if ((flags & O_SYNC) == O_SYNC) {
-		accessmode |= (1<<14);
-	}
-#endif /* O_SYNC */
-
-	if (share_mode == DENY_FCB) {
-		accessmode = 0xFF;
-	}
-
-	memset(cli->outbuf,'\0',smb_size);
-	memset(cli->inbuf,'\0',smb_size);
-
-	set_message(cli->outbuf,15,0,True);
-
-	SCVAL(cli->outbuf,smb_com,SMBopenX);
-	SSVAL(cli->outbuf,smb_tid,cli->cnum);
-	cli_setup_packet(cli);
-
-	SSVAL(cli->outbuf,smb_vwv0,0xFF);
-	SSVAL(cli->outbuf,smb_vwv2,0);  /* no additional info */
-	SSVAL(cli->outbuf,smb_vwv3,accessmode);
-	SSVAL(cli->outbuf,smb_vwv4,aSYSTEM | aHIDDEN);
-	SSVAL(cli->outbuf,smb_vwv5,0);
-	SSVAL(cli->outbuf,smb_vwv8,openfn);
-
-	if (cli->use_oplocks) {
-		/* if using oplocks then ask for a batch oplock via
-                   core and extended methods */
-		SCVAL(cli->outbuf,smb_flg, CVAL(cli->outbuf,smb_flg)|
-			FLAG_REQUEST_OPLOCK|FLAG_REQUEST_BATCH_OPLOCK);
-		SSVAL(cli->outbuf,smb_vwv2,SVAL(cli->outbuf,smb_vwv2) | 6);
-	}
-  
-	p = smb_buf(cli->outbuf);
-	p += clistr_push(cli, p, fname, -1, STR_TERMINATE|STR_CONVERT);
-
-	cli_setup_bcc(cli, p);
-
-	cli_send_smb(cli);
-	if (!cli_receive_smb(cli)) {
-		return -1;
-	}
-
-	if (cli_is_error(cli)) {
-		return -1;
-	}
-
-	return SVAL(cli->inbuf,smb_vwv2);
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /****************************************************************************
@@ -550,48 +255,8 @@ BOOL cli_close(struct cli_state *cli, in
 NTSTATUS cli_locktype(struct cli_state *cli, int fnum,
 		      uint32 offset, uint32 len, int timeout, unsigned char locktype)
 {
-	char *p;
-	int saved_timeout = cli->timeout;
-
-	memset(cli->outbuf,'\0',smb_size);
-	memset(cli->inbuf,'\0', smb_size);
-
-	set_message(cli->outbuf,8,0,True);
-
-	SCVAL(cli->outbuf,smb_com,SMBlockingX);
-	SSVAL(cli->outbuf,smb_tid,cli->cnum);
-	cli_setup_packet(cli);
-
-	SCVAL(cli->outbuf,smb_vwv0,0xFF);
-	SSVAL(cli->outbuf,smb_vwv2,fnum);
-	SCVAL(cli->outbuf,smb_vwv3,locktype);
-	SIVALS(cli->outbuf, smb_vwv4, timeout);
-	SSVAL(cli->outbuf,smb_vwv6,0);
-	SSVAL(cli->outbuf,smb_vwv7,1);
-
-	p = smb_buf(cli->outbuf);
-	SSVAL(p, 0, cli->pid);
-	SIVAL(p, 2, offset);
-	SIVAL(p, 6, len);
-
-	p += 10;
-
-	cli_setup_bcc(cli, p);
-
-	cli_send_smb(cli);
-
-	if (timeout != 0) {
-		cli->timeout = (timeout == -1) ? 0x7FFFFFFF : (timeout + 2*1000);
-	}
-
-	if (!cli_receive_smb(cli)) {
-		cli->timeout = saved_timeout;
-		return NT_STATUS_UNSUCCESSFUL;
-	}
-
-	cli->timeout = saved_timeout;
-
-	return cli_nt_error(cli);
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /****************************************************************************
@@ -601,53 +266,8 @@ NTSTATUS cli_locktype(struct cli_state *
 BOOL cli_lock(struct cli_state *cli, int fnum, 
 	      uint32 offset, uint32 len, int timeout, enum brl_type lock_type)
 {
-	char *p;
-	int saved_timeout = cli->timeout;
-
-	memset(cli->outbuf,'\0',smb_size);
-	memset(cli->inbuf,'\0', smb_size);
-
-	set_message(cli->outbuf,8,0,True);
-
-	SCVAL(cli->outbuf,smb_com,SMBlockingX);
-	SSVAL(cli->outbuf,smb_tid,cli->cnum);
-	cli_setup_packet(cli);
-
-	SCVAL(cli->outbuf,smb_vwv0,0xFF);
-	SSVAL(cli->outbuf,smb_vwv2,fnum);
-	SCVAL(cli->outbuf,smb_vwv3,(lock_type == READ_LOCK? 1 : 0));
-	SIVALS(cli->outbuf, smb_vwv4, timeout);
-	SSVAL(cli->outbuf,smb_vwv6,0);
-	SSVAL(cli->outbuf,smb_vwv7,1);
-
-	p = smb_buf(cli->outbuf);
-	SSVAL(p, 0, cli->pid);
-	SIVAL(p, 2, offset);
-	SIVAL(p, 6, len);
-
-	p += 10;
-
-	cli_setup_bcc(cli, p);
-
-	cli_send_smb(cli);
-
-	cli->timeout = (timeout == -1) ? 0x7FFFFFFF : (timeout + 2*1000);
-	if (timeout != 0) {
-		cli->timeout = (timeout == -1) ? 0x7FFFFFFF : (timeout + 2*1000);
-	}
-
-	if (!cli_receive_smb(cli)) {
-		cli->timeout = saved_timeout;
-		return False;
-	}
-
-	cli->timeout = saved_timeout;
-
-	if (cli_is_error(cli)) {
-		return False;
-	}
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /****************************************************************************
@@ -656,40 +276,8 @@ BOOL cli_lock(struct cli_state *cli, int
 
 BOOL cli_unlock(struct cli_state *cli, int fnum, uint32 offset, uint32 len)
 {
-	char *p;
-
-	memset(cli->outbuf,'\0',smb_size);
-	memset(cli->inbuf,'\0',smb_size);
-
-	set_message(cli->outbuf,8,0,True);
-
-	SCVAL(cli->outbuf,smb_com,SMBlockingX);
-	SSVAL(cli->outbuf,smb_tid,cli->cnum);
-	cli_setup_packet(cli);
-
-	SCVAL(cli->outbuf,smb_vwv0,0xFF);
-	SSVAL(cli->outbuf,smb_vwv2,fnum);
-	SCVAL(cli->outbuf,smb_vwv3,0);
-	SIVALS(cli->outbuf, smb_vwv4, 0);
-	SSVAL(cli->outbuf,smb_vwv6,1);
-	SSVAL(cli->outbuf,smb_vwv7,0);
-
-	p = smb_buf(cli->outbuf);
-	SSVAL(p, 0, cli->pid);
-	SIVAL(p, 2, offset);
-	SIVAL(p, 6, len);
-	p += 10;
-	cli_setup_bcc(cli, p);
-	cli_send_smb(cli);
-	if (!cli_receive_smb(cli)) {
-		return False;
-	}
-
-	if (cli_is_error(cli)) {
-		return False;
-	}
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /****************************************************************************
@@ -699,60 +287,8 @@ BOOL cli_unlock(struct cli_state *cli, i
 BOOL cli_lock64(struct cli_state *cli, int fnum, 
 		SMB_BIG_UINT offset, SMB_BIG_UINT len, int timeout, enum brl_type lock_type)
 {
-	char *p;
-        int saved_timeout = cli->timeout;
-	int ltype;
-
-	if (! (cli->capabilities & CAP_LARGE_FILES)) {
-		return cli_lock(cli, fnum, offset, len, timeout, lock_type);
-	}
-
-	ltype = (lock_type == READ_LOCK? 1 : 0);
-	ltype |= LOCKING_ANDX_LARGE_FILES;
-
-	memset(cli->outbuf,'\0',smb_size);
-	memset(cli->inbuf,'\0', smb_size);
-
-	set_message(cli->outbuf,8,0,True);
-
-	SCVAL(cli->outbuf,smb_com,SMBlockingX);
-	SSVAL(cli->outbuf,smb_tid,cli->cnum);
-	cli_setup_packet(cli);
-
-	SCVAL(cli->outbuf,smb_vwv0,0xFF);
-	SSVAL(cli->outbuf,smb_vwv2,fnum);
-	SCVAL(cli->outbuf,smb_vwv3,ltype);
-	SIVALS(cli->outbuf, smb_vwv4, timeout);
-	SSVAL(cli->outbuf,smb_vwv6,0);
-	SSVAL(cli->outbuf,smb_vwv7,1);
-
-	p = smb_buf(cli->outbuf);
-	SIVAL(p, 0, cli->pid);
-	SOFF_T_R(p, 4, offset);
-	SOFF_T_R(p, 12, len);
-	p += 20;
-
-	cli_setup_bcc(cli, p);
-	cli_send_smb(cli);
-
-        cli->timeout = (timeout == -1) ? 0x7FFFFFFF : (timeout + 2*1000);
-
-	if (timeout != 0) {
-		cli->timeout = (timeout == -1) ? 0x7FFFFFFF : (timeout + 5*1000);
-	}
-
-	if (!cli_receive_smb(cli)) {
-                cli->timeout = saved_timeout;
-		return False;
-	}
-
-	cli->timeout = saved_timeout;
-
-	if (cli_is_error(cli)) {
-		return False;
-	}
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /****************************************************************************
@@ -761,44 +297,8 @@ BOOL cli_lock64(struct cli_state *cli, i
 
 BOOL cli_unlock64(struct cli_state *cli, int fnum, SMB_BIG_UINT offset, SMB_BIG_UINT len)
 {
-	char *p;
-
-	if (! (cli->capabilities & CAP_LARGE_FILES)) {
-		return cli_unlock(cli, fnum, offset, len);
-	}
-
-	memset(cli->outbuf,'\0',smb_size);
-	memset(cli->inbuf,'\0',smb_size);
-
-	set_message(cli->outbuf,8,0,True);
-
-	SCVAL(cli->outbuf,smb_com,SMBlockingX);
-	SSVAL(cli->outbuf,smb_tid,cli->cnum);
-	cli_setup_packet(cli);
-
-	SCVAL(cli->outbuf,smb_vwv0,0xFF);
-	SSVAL(cli->outbuf,smb_vwv2,fnum);
-	SCVAL(cli->outbuf,smb_vwv3,LOCKING_ANDX_LARGE_FILES);
-	SIVALS(cli->outbuf, smb_vwv4, 0);
-	SSVAL(cli->outbuf,smb_vwv6,1);
-	SSVAL(cli->outbuf,smb_vwv7,0);
-
-	p = smb_buf(cli->outbuf);
-	SIVAL(p, 0, cli->pid);
-	SOFF_T_R(p, 4, offset);
-	SOFF_T_R(p, 12, len);
-	p += 20;
-	cli_setup_bcc(cli, p);
-	cli_send_smb(cli);
-	if (!cli_receive_smb(cli)) {
-		return False;
-	}
-
-	if (cli_is_error(cli)) {
-		return False;
-	}
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /****************************************************************************
@@ -809,47 +309,8 @@ BOOL cli_getattrE(struct cli_state *cli,
 		  uint16 *attr, SMB_BIG_UINT *size, 
 		  time_t *c_time, time_t *a_time, time_t *m_time)
 {
-	memset(cli->outbuf,'\0',smb_size);
-	memset(cli->inbuf,'\0',smb_size);
-
-	set_message(cli->outbuf,1,0,True);
-
-	SCVAL(cli->outbuf,smb_com,SMBgetattrE);
-	SSVAL(cli->outbuf,smb_tid,cli->cnum);
-	cli_setup_packet(cli);
-
-	SSVAL(cli->outbuf,smb_vwv0,fd);
-
-	cli_send_smb(cli);
-	if (!cli_receive_smb(cli)) {
-		return False;
-	}
-	
-	if (cli_is_error(cli)) {
-		return False;
-	}
-
-	if (size) {
-		*size = IVAL(cli->inbuf, smb_vwv6);
-	}
-
-	if (attr) {
-		*attr = SVAL(cli->inbuf,smb_vwv10);
-	}
-
-	if (c_time) {
-		*c_time = make_unix_date3(cli->inbuf+smb_vwv0);
-	}
-
-	if (a_time) {
-		*a_time = make_unix_date3(cli->inbuf+smb_vwv2);
-	}
-
-	if (m_time) {
-		*m_time = make_unix_date3(cli->inbuf+smb_vwv4);
-	}
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /****************************************************************************
@@ -859,46 +320,8 @@ BOOL cli_getattrE(struct cli_state *cli,
 BOOL cli_getatr(struct cli_state *cli, const char *fname, 
 		uint16 *attr, size_t *size, time_t *t)
 {
-	char *p;
-
-	memset(cli->outbuf,'\0',smb_size);
-	memset(cli->inbuf,'\0',smb_size);
-
-	set_message(cli->outbuf,0,0,True);
-
-	SCVAL(cli->outbuf,smb_com,SMBgetatr);
-	SSVAL(cli->outbuf,smb_tid,cli->cnum);
-	cli_setup_packet(cli);
-
-	p = smb_buf(cli->outbuf);
-	*p++ = 4;
-	p += clistr_push(cli, p, fname, -1, STR_TERMINATE|STR_CONVERT);
-
-	cli_setup_bcc(cli, p);
-
-	cli_send_smb(cli);
-	if (!cli_receive_smb(cli)) {
-		return False;
-	}
-	
-	if (cli_is_error(cli)) {
-		return False;
-	}
-
-	if (size) {
-		*size = IVAL(cli->inbuf, smb_vwv3);
-	}
-
-	if (t) {
-		*t = make_unix_date3(cli->inbuf+smb_vwv1);
-	}
-
-	if (attr) {
-		*attr = SVAL(cli->inbuf,smb_vwv0);
-	}
-
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /****************************************************************************
@@ -907,37 +330,8 @@ BOOL cli_getatr(struct cli_state *cli, c
 
 BOOL cli_setatr(struct cli_state *cli, const char *fname, uint16 attr, time_t t)
 {
-	char *p;
-
-	memset(cli->outbuf,'\0',smb_size);
-	memset(cli->inbuf,'\0',smb_size);
-
-	set_message(cli->outbuf,8,0,True);
-
-	SCVAL(cli->outbuf,smb_com,SMBsetatr);
-	SSVAL(cli->outbuf,smb_tid,cli->cnum);
-	cli_setup_packet(cli);
-
-	SSVAL(cli->outbuf,smb_vwv0, attr);
-	put_dos_date3(cli->outbuf,smb_vwv1, t);
-
-	p = smb_buf(cli->outbuf);
-	*p++ = 4;
-	p += clistr_push(cli, p, fname, -1, STR_TERMINATE|STR_CONVERT);
-	*p++ = 4;
-
-	cli_setup_bcc(cli, p);
-
-	cli_send_smb(cli);
-	if (!cli_receive_smb(cli)) {
-		return False;
-	}
-	
-	if (cli_is_error(cli)) {
-		return False;
-	}
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /****************************************************************************
@@ -946,32 +340,8 @@ BOOL cli_setatr(struct cli_state *cli, c
 
 BOOL cli_chkpath(struct cli_state *cli, const char *path)
 {
-	pstring path2;
-	char *p;
-	
-	safe_strcpy(path2,path,sizeof(pstring));
-	trim_string(path2,NULL,"\\");
-	if (!*path2) *path2 = '\\';
-	
-	memset(cli->outbuf,'\0',smb_size);
-	set_message(cli->outbuf,0,0,True);
-	SCVAL(cli->outbuf,smb_com,SMBchkpth);
-	SSVAL(cli->outbuf,smb_tid,cli->cnum);
-	cli_setup_packet(cli);
-	p = smb_buf(cli->outbuf);
-	*p++ = 4;
-	p += clistr_push(cli, p, path2, -1, STR_TERMINATE|STR_CONVERT);
-
-	cli_setup_bcc(cli, p);
-
-	cli_send_smb(cli);
-	if (!cli_receive_smb(cli)) {
-		return False;
-	}
-
-	if (cli_is_error(cli)) return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /****************************************************************************
@@ -980,22 +350,8 @@ BOOL cli_chkpath(struct cli_state *cli,
 
 BOOL cli_dskattr(struct cli_state *cli, int *bsize, int *total, int *avail)
 {
-	memset(cli->outbuf,'\0',smb_size);
-	set_message(cli->outbuf,0,0,True);
-	SCVAL(cli->outbuf,smb_com,SMBdskattr);
-	SSVAL(cli->outbuf,smb_tid,cli->cnum);
-	cli_setup_packet(cli);
-
-	cli_send_smb(cli);
-	if (!cli_receive_smb(cli)) {
-		return False;
-	}
-
-	*bsize = SVAL(cli->inbuf,smb_vwv1)*SVAL(cli->inbuf,smb_vwv2);
-	*total = SVAL(cli->inbuf,smb_vwv0);
-	*avail = SVAL(cli->inbuf,smb_vwv3);
-	
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /****************************************************************************
@@ -1004,49 +360,6 @@ BOOL cli_dskattr(struct cli_state *cli,
 
 int cli_ctemp(struct cli_state *cli, const char *path, char **tmp_path)
 {
-	int len;
-	char *p;
-
-	memset(cli->outbuf,'\0',smb_size);
-	memset(cli->inbuf,'\0',smb_size);
-
-	set_message(cli->outbuf,3,0,True);
-
-	SCVAL(cli->outbuf,smb_com,SMBctemp);
-	SSVAL(cli->outbuf,smb_tid,cli->cnum);
-	cli_setup_packet(cli);
-
-	SSVAL(cli->outbuf,smb_vwv0,0);
-	SIVALS(cli->outbuf,smb_vwv1,-1);
-
-	p = smb_buf(cli->outbuf);
-	*p++ = 4;
-	p += clistr_push(cli, p, path, -1, STR_TERMINATE|STR_CONVERT);
-
-	cli_setup_bcc(cli, p);
-
-	cli_send_smb(cli);
-	if (!cli_receive_smb(cli)) {
-		return -1;
-	}
-
-	if (cli_is_error(cli)) {
-		return -1;
-	}
-
-	/* despite the spec, the result has a -1, followed by
-	   length, followed by name */
-	p = smb_buf(cli->inbuf);
-	p += 4;
-	len = smb_buflen(cli->inbuf) - 4;
-	if (len <= 0) return -1;
-
-	if (tmp_path) {
-		pstring path2;
-		clistr_pull(cli, path2, p, 
-			    sizeof(path2), len, STR_ASCII);
-		*tmp_path = strdup(path2);
-	}
-
-	return SVAL(cli->inbuf,smb_vwv0);
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
diff -pruwN samba-2.2.12/source/libsmb/clilist.c samba-2.2.12-livebox/libsmb/clilist.c
--- samba-2.2.12/source/libsmb/clilist.c	2004-08-12 20:24:25.000000000 +0200
+++ samba-2.2.12-livebox/libsmb/clilist.c	2010-03-31 11:45:59.000000000 +0200
@@ -33,100 +33,8 @@ by NT and 2 is used by OS/2
 static int interpret_long_filename(struct cli_state *cli,
 				   int level,char *p,file_info *finfo)
 {
-	extern file_info def_finfo;
-	file_info finfo2;
-	int len;
-	char *base = p;
-
-	if (!finfo) finfo = &finfo2;
-
-	memcpy(finfo,&def_finfo,sizeof(*finfo));
-
-	switch (level)
-		{
-		case 1: /* OS/2 understands this */
-			/* these dates are converted to GMT by
-                           make_unix_date */
-			finfo->ctime = make_unix_date2(p+4);
-			finfo->atime = make_unix_date2(p+8);
-			finfo->mtime = make_unix_date2(p+12);
-			finfo->size = IVAL(p,16);
-			finfo->mode = CVAL(p,24);
-			len = CVAL(p, 26);
-			p += 27;
-			p += clistr_align_in(cli, p, 0);
-			p += clistr_pull(cli, finfo->name, p,
-				    sizeof(finfo->name),
-				    len, 
-				    STR_TERMINATE);
-			return PTR_DIFF(p, base);
-
-		case 2: /* this is what OS/2 uses mostly */
-			/* these dates are converted to GMT by
-                           make_unix_date */
-			finfo->ctime = make_unix_date2(p+4);
-			finfo->atime = make_unix_date2(p+8);
-			finfo->mtime = make_unix_date2(p+12);
-			finfo->size = IVAL(p,16);
-			finfo->mode = CVAL(p,24);
-			len = CVAL(p, 30);
-			p += 31;
-			/* check for unisys! */
-			p += clistr_pull(cli, finfo->name, p,
-					 sizeof(finfo->name),
-					 len, 
-					 STR_NOALIGN);
-			return PTR_DIFF(p, base) + 1;
-			
-		case 260: /* NT uses this, but also accepts 2 */
-		{
-			int namelen, slen;
-			p += 4; /* next entry offset */
-			p += 4; /* fileindex */
-				
-			/* these dates appear to arrive in a
-			   weird way. It seems to be localtime
-			   plus the serverzone given in the
-			   initial connect. This is GMT when
-			   DST is not in effect and one hour
-			   from GMT otherwise. Can this really
-			   be right??
-			   
-			   I suppose this could be called
-			   kludge-GMT. Is is the GMT you get
-			   by using the current DST setting on
-			   a different localtime. It will be
-			   cheap to calculate, I suppose, as
-			   no DST tables will be needed */
-			
-			finfo->ctime = interpret_long_date(p); p += 8;
-			finfo->atime = interpret_long_date(p); p += 8;
-			finfo->mtime = interpret_long_date(p); p += 8; p += 8;
-			finfo->size = IVAL2_TO_SMB_BIG_UINT(p,0); p += 8;
-			p += 8; /* alloc size */
-			finfo->mode = CVAL(p,0); p += 4;
-			namelen = IVAL(p,0); p += 4;
-			p += 4; /* EA size */
-			slen = SVAL(p, 0);
-			p += 2; 
-			{
-				/* stupid NT bugs. grr */
-				int flags = 0;
-				if (p[1] == 0 && namelen > 1) flags |= STR_UNICODE;
-				clistr_pull(cli, finfo->short_name, p,
-					    sizeof(finfo->short_name),
-					    slen, flags);
-			}
-			p += 24; /* short name? */	  
-			clistr_pull(cli, finfo->name, p,
-				    sizeof(finfo->name),
-				    namelen, 0);
-			return SVAL(base, 0);
-		}
-		}
-	
-	DEBUG(1,("Unknown long filename format %d\n",level));
-	return(SVAL(p,0));
+DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 
@@ -136,172 +44,8 @@ static int interpret_long_filename(struc
 int cli_list_new(struct cli_state *cli,const char *Mask,uint16 attribute, 
 		 void (*fn)(file_info *, const char *, void *), void *state)
 {
-	int max_matches = 512;
-	int info_level;
-	char *p, *p2;
-	pstring mask;
-	file_info finfo;
-	int i;
-	char *tdl, *dirlist = NULL;
-	int dirlist_len = 0;
-	int total_received = -1;
-	BOOL First = True;
-	int ff_searchcount=0;
-	int ff_eos=0;
-	int ff_lastname=0;
-	int ff_dir_handle=0;
-	int loop_count = 0;
-	char *rparam=NULL, *rdata=NULL;
-	unsigned int param_len, data_len;	
-	uint16 setup;
-	pstring param;
-
-	/* NT uses 260, OS/2 uses 2. Both accept 1. */
-	info_level = (cli->capabilities&CAP_NT_SMBS)?260:1;
-
-	pstrcpy(mask,Mask);
-	
-	while (ff_eos == 0) {
-		loop_count++;
-		if (loop_count > 200) {
-			DEBUG(0,("Error: Looping in FIND_NEXT??\n"));
-			break;
-		}
-
-		if (First) {
-			setup = TRANSACT2_FINDFIRST;
-			SSVAL(param,0,attribute); /* attribute */
-			SSVAL(param,2,max_matches); /* max count */
-			SSVAL(param,4,4+2);	/* resume required + close on end */
-			SSVAL(param,6,info_level); 
-			SIVAL(param,8,0);
-			p = param+12;
-			p += clistr_push(cli, param+12, mask, -1, 
-					 STR_TERMINATE|STR_CONVERT);
-		} else {
-			setup = TRANSACT2_FINDNEXT;
-			SSVAL(param,0,ff_dir_handle);
-			SSVAL(param,2,max_matches); /* max count */
-			SSVAL(param,4,info_level); 
-			SIVAL(param,6,0); /* ff_resume_key */
-			SSVAL(param,10,8+4+2);	/* continue + resume required + close on end */
-			p = param+12;
-			p += clistr_push(cli, param+12, mask, -1, 
-					 STR_TERMINATE|STR_CONVERT);
-		}
-
-		param_len = PTR_DIFF(p, param);
-
-		if (!cli_send_trans(cli, SMBtrans2, 
-				    NULL,                   /* Name */
-				    -1, 0,                  /* fid, flags */
-				    &setup, 1, 0,           /* setup, length, max */
-				    param, param_len, 10,   /* param, length, max */
-				    NULL, 0, 
-				    cli->max_xmit /* data, length, max */
-				    )) {
-			break;
-		}
-
-		if (!cli_receive_trans(cli, SMBtrans2, 
-				       &rparam, &param_len,
-				       &rdata, &data_len) &&
-                    cli_is_dos_error(cli)) {
-			/* we need to work around a Win95 bug - sometimes
-			   it gives ERRSRV/ERRerror temprarily */
-			uint8 eclass;
-			uint32 ecode;
-			cli_dos_error(cli, &eclass, &ecode);
-			if (eclass != ERRSRV || ecode != ERRerror) break;
-			msleep(100);
-			continue;
-		}
-
-                if (cli_is_error(cli) || !rdata || !rparam) 
-			break;
-
-		if (total_received == -1) total_received = 0;
-
-		/* parse out some important return info */
-		p = rparam;
-		if (First) {
-			ff_dir_handle = SVAL(p,0);
-			ff_searchcount = SVAL(p,2);
-			ff_eos = SVAL(p,4);
-			ff_lastname = SVAL(p,8);
-		} else {
-			ff_searchcount = SVAL(p,0);
-			ff_eos = SVAL(p,2);
-			ff_lastname = SVAL(p,6);
-		}
-
-		if (ff_searchcount == 0) 
-			break;
-
-		/* point to the data bytes */
-		p = rdata;
-
-		/* we might need the lastname for continuations */
-		if (ff_lastname > 0) {
-			switch(info_level)
-				{
-				case 260:
-					clistr_pull(cli, mask, p+ff_lastname,
-						    sizeof(mask), 
-						    data_len-ff_lastname,
-						    STR_TERMINATE);
-					break;
-				case 1:
-					clistr_pull(cli, mask, p+ff_lastname+1,
-						    sizeof(mask), 
-						    -1,
-						    STR_TERMINATE);
-					break;
-				}
-		} else {
-			pstrcpy(mask,"");
-		}
- 
-		/* and add them to the dirlist pool */
-		tdl = Realloc(dirlist,dirlist_len + data_len);
-
-		if (!tdl) {
-			DEBUG(0,("cli_list_new: Failed to expand dirlist\n"));
-			break;
-		}
-		else dirlist = tdl;
-
-		/* put in a length for the last entry, to ensure we can chain entries 
-		   into the next packet */
-		for (p2=p,i=0;i<(ff_searchcount-1);i++)
-			p2 += interpret_long_filename(cli,info_level,p2,NULL);
-		SSVAL(p2,0,data_len - PTR_DIFF(p2,p));
-
-		/* grab the data for later use */
-		memcpy(dirlist+dirlist_len,p,data_len);
-		dirlist_len += data_len;
-
-		total_received += ff_searchcount;
-
-		SAFE_FREE(rdata);
-		SAFE_FREE(rparam);
-
-		DEBUG(3,("received %d entries (eos=%d)\n",
-			 ff_searchcount,ff_eos));
-
-		if (ff_searchcount > 0) loop_count = 0;
-
-		First = False;
-	}
-
-	for (p=dirlist,i=0;i<total_received;i++) {
-		p += interpret_long_filename(cli,info_level,p,&finfo);
-		fn(&finfo, Mask, state);
-	}
-
-	/* free up the dirlist buffer */
-	SAFE_FREE(dirlist);
-	return(total_received);
+DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 
@@ -312,21 +56,8 @@ The length of the structure is returned
 ****************************************************************************/
 static int interpret_short_filename(struct cli_state *cli, char *p,file_info *finfo)
 {
-	extern file_info def_finfo;
-
-	*finfo = def_finfo;
-
-	finfo->mode = CVAL(p,21);
-	
-	/* this date is converted to GMT by make_unix_date */
-	finfo->ctime = make_unix_date(p+22);
-	finfo->mtime = finfo->atime = finfo->ctime;
-	finfo->size = (SMB_BIG_UINT) IVAL(p,26); /* This returns a 4 byte length, not 8 */
-	clistr_pull(cli, finfo->name, p+30, sizeof(finfo->name), 12, STR_ASCII);
-	if (strcmp(finfo->name, "..") && strcmp(finfo->name, "."))
-		fstrcpy(finfo->short_name,finfo->name);
-	
-	return(DIR_STRUCT_SIZE);
+DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 
@@ -339,116 +70,8 @@ static int interpret_short_filename(stru
 int cli_list_old(struct cli_state *cli,const char *Mask,uint16 attribute, 
 		 void (*fn)(file_info *, const char *, void *), void *state)
 {
-	char *p;
-	int received = 0;
-	BOOL first = True;
-	char status[21];
-	int num_asked = (cli->max_xmit - 100)/DIR_STRUCT_SIZE;
-	int num_received = 0;
-	int i;
-	char *tdl, *dirlist = NULL;
-	pstring mask;
-	
-	ZERO_ARRAY(status);
-
-	pstrcpy(mask,Mask);
-  
-	while (1) {
-		memset(cli->outbuf,'\0',smb_size);
-		memset(cli->inbuf,'\0',smb_size);
-
-		set_message(cli->outbuf,2,0,True);
-
-		SCVAL(cli->outbuf,smb_com,SMBsearch);
-
-		SSVAL(cli->outbuf,smb_tid,cli->cnum);
-		cli_setup_packet(cli);
-
-		SSVAL(cli->outbuf,smb_vwv0,num_asked);
-		SSVAL(cli->outbuf,smb_vwv1,attribute);
-  
-		p = smb_buf(cli->outbuf);
-		*p++ = 4;
-      
-		p += clistr_push(cli, p, first?mask:"", -1, STR_TERMINATE|STR_CONVERT);
-		*p++ = 5;
-		if (first) {
-			SSVAL(p,0,0);
-			p += 2;
-		} else {
-			SSVAL(p,0,21);
-			p += 2;
-			memcpy(p,status,21);
-			p += 21;
-		}
-
-		cli_setup_bcc(cli, p);
-		cli_send_smb(cli);
-		if (!cli_receive_smb(cli)) break;
-
-		received = SVAL(cli->inbuf,smb_vwv0);
-		if (received <= 0) break;
-
-		first = False;
-
-		tdl = Realloc(dirlist,(num_received + received)*DIR_STRUCT_SIZE);
-
-		if (!tdl) {
-			DEBUG(0,("cli_list_old: failed to expand dirlist"));
-			SAFE_FREE(dirlist);
-			return 0;
-		}
-		else dirlist = tdl;
-
-		p = smb_buf(cli->inbuf) + 3;
-
-		memcpy(dirlist+num_received*DIR_STRUCT_SIZE,
-		       p,received*DIR_STRUCT_SIZE);
-		
-		memcpy(status,p + ((received-1)*DIR_STRUCT_SIZE),21);
-		
-		num_received += received;
-		
-		if (cli_is_error(cli)) break;
-	}
-
-	if (!first) {
-		memset(cli->outbuf,'\0',smb_size);
-		memset(cli->inbuf,'\0',smb_size);
-
-		set_message(cli->outbuf,2,0,True);
-		SCVAL(cli->outbuf,smb_com,SMBfclose);
-		SSVAL(cli->outbuf,smb_tid,cli->cnum);
-		cli_setup_packet(cli);
-
-		SSVAL(cli->outbuf, smb_vwv0, 0); /* find count? */
-		SSVAL(cli->outbuf, smb_vwv1, attribute);
-
-		p = smb_buf(cli->outbuf);
-		*p++ = 4;
-		fstrcpy(p, "");
-		p += strlen(p) + 1;
-		*p++ = 5;
-		SSVAL(p, 0, 21);
-		p += 2;
-		memcpy(p,status,21);
-		p += 21;
-		
-		cli_setup_bcc(cli, p);
-		cli_send_smb(cli);
-		if (!cli_receive_smb(cli)) {
-			DEBUG(0,("Error closing search: %s\n",cli_errstr(cli)));
-		}
-	}
-
-	for (p=dirlist,i=0;i<num_received;i++) {
-		file_info finfo;
-		p += interpret_short_filename(cli, p,&finfo);
-		fn(&finfo, Mask, state);
-	}
-
-	SAFE_FREE(dirlist);
-	return(num_received);
+DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 
@@ -459,8 +82,6 @@ int cli_list_old(struct cli_state *cli,c
 int cli_list(struct cli_state *cli,const char *Mask,uint16 attribute, 
 	     void (*fn)(file_info *, const char *, void *), void *state)
 {
-	if (cli->protocol <= PROTOCOL_LANMAN1) {
-		return cli_list_old(cli, Mask, attribute, fn, state);
-	}
-	return cli_list_new(cli, Mask, attribute, fn, state);
+DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
diff -pruwN samba-2.2.12/source/libsmb/climessage.c samba-2.2.12-livebox/libsmb/climessage.c
--- samba-2.2.12/source/libsmb/climessage.c	2004-08-12 20:24:25.000000000 +0200
+++ samba-2.2.12-livebox/libsmb/climessage.c	2010-03-31 11:45:59.000000000 +0200
@@ -30,34 +30,8 @@ start a message sequence
 BOOL cli_message_start(struct cli_state *cli, char *host, char *username, 
 			      int *grp)
 {
-	char *p;
-
-	/* send a SMBsendstrt command */
-	memset(cli->outbuf,'\0',smb_size);
-	set_message(cli->outbuf,0,0,True);
-	SCVAL(cli->outbuf,smb_com,SMBsendstrt);
-	SSVAL(cli->outbuf,smb_tid,cli->cnum);
-	cli_setup_packet(cli);
-	
-	p = smb_buf(cli->outbuf);
-	*p++ = 4;
-	p += clistr_push(cli, p, username, -1, STR_TERMINATE);
-	*p++ = 4;
-	p += clistr_push(cli, p, host, -1, STR_TERMINATE);
-	
-	cli_setup_bcc(cli, p);
-	
-	cli_send_smb(cli);	
-	
-	if (!cli_receive_smb(cli)) {
-		return False;
-	}
-
-	if (cli_is_error(cli)) return False;
-
-	*grp = SVAL(cli->inbuf,smb_vwv0);
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 
@@ -66,32 +40,8 @@ send a message
 ****************************************************************************/
 BOOL cli_message_text(struct cli_state *cli, char *msg, int len, int grp)
 {
-	char *p;
-
-	memset(cli->outbuf,'\0',smb_size);
-	set_message(cli->outbuf,1,0,True);
-	SCVAL(cli->outbuf,smb_com,SMBsendtxt);
-	SSVAL(cli->outbuf,smb_tid,cli->cnum);
-	cli_setup_packet(cli);
-
-	SSVAL(cli->outbuf,smb_vwv0,grp);
-	
-	p = smb_buf(cli->outbuf);
-	*p++ = 1;
-	SSVAL(p,0,len); p += 2;
-	memcpy(p,msg,len);
-	p += len;
-
-	cli_setup_bcc(cli, p);
-	cli_send_smb(cli);
-
-	if (!cli_receive_smb(cli)) {
-		return False;
-	}
-
-	if (cli_is_error(cli)) return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }      
 
 /****************************************************************************
@@ -99,23 +49,7 @@ end a message
 ****************************************************************************/
 BOOL cli_message_end(struct cli_state *cli, int grp)
 {
-	memset(cli->outbuf,'\0',smb_size);
-	set_message(cli->outbuf,1,0,True);
-	SCVAL(cli->outbuf,smb_com,SMBsendend);
-	SSVAL(cli->outbuf,smb_tid,cli->cnum);
-
-	SSVAL(cli->outbuf,smb_vwv0,grp);
-
-	cli_setup_packet(cli);
-	
-	cli_send_smb(cli);
-
-	if (!cli_receive_smb(cli)) {
-		return False;
-	}
-
-	if (cli_is_error(cli)) return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }      
 
diff -pruwN samba-2.2.12/source/libsmb/clioplock.c samba-2.2.12-livebox/libsmb/clioplock.c
--- samba-2.2.12/source/libsmb/clioplock.c	2004-08-12 20:24:25.000000000 +0200
+++ samba-2.2.12-livebox/libsmb/clioplock.c	2010-03-31 11:45:59.000000000 +0200
@@ -28,34 +28,8 @@ send an ack for an oplock break request
 ****************************************************************************/
 BOOL cli_oplock_ack(struct cli_state *cli, int fnum, unsigned char level)
 {
-	char *oldbuf = cli->outbuf;
-	pstring buf;
-	BOOL ret;
-
-	cli->outbuf = buf;
-
-        memset(buf,'\0',smb_size);
-        set_message(buf,8,0,True);
-
-        SCVAL(buf,smb_com,SMBlockingX);
-	SSVAL(buf,smb_tid, cli->cnum);
-        cli_setup_packet(cli);
-	SSVAL(buf,smb_vwv0,0xFF);
-	SSVAL(buf,smb_vwv1,0);
-	SSVAL(buf,smb_vwv2,fnum);
-	if (level == 1)
-		SSVAL(buf,smb_vwv3,0x102); /* levelII oplock break ack */
-	else
-		SSVAL(buf,smb_vwv3,2); /* exclusive oplock break ack */
-	SIVAL(buf,smb_vwv4,0); /* timoeut */
-	SSVAL(buf,smb_vwv6,0); /* unlockcount */
-	SSVAL(buf,smb_vwv7,0); /* lockcount */
-
-        ret = cli_send_smb(cli);	
-
-	cli->outbuf = oldbuf;
-
-	return ret;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 
@@ -65,5 +39,6 @@ set the oplock handler for a connection
 void cli_oplock_handler(struct cli_state *cli, 
 			BOOL (*handler)(struct cli_state *, int, unsigned char))
 {
-	cli->oplock_handler = handler;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
diff -pruwN samba-2.2.12/source/libsmb/cliprint.c samba-2.2.12-livebox/libsmb/cliprint.c
--- samba-2.2.12/source/libsmb/cliprint.c	2004-08-12 20:24:26.000000000 +0200
+++ samba-2.2.12-livebox/libsmb/cliprint.c	2010-03-31 11:45:59.000000000 +0200
@@ -31,19 +31,8 @@
 static const char *fix_char_ptr(unsigned int datap, unsigned int converter, 
 			  char *rdata, int rdrcnt)
 {
-	if (datap == 0)	{	/* turn NULL pointers into zero length strings */
-		return "";
-	} else {
-		unsigned int offset = datap - converter;
-
-		if (offset >= rdrcnt) {
-			DEBUG(1,("bad char ptr: datap=%u, converter=%u rdrcnt=%d>",
-				 datap, converter, rdrcnt));
-			return "<ERROR>";
-		} else {
-			return &rdata[offset];
-		}
-	}
+	DEBUG(1,("function ommited/n"));
+/* function omited*/
 }
 
 
@@ -53,69 +42,8 @@ call fn() on each entry in a print queue
 int cli_print_queue(struct cli_state *cli, 
 		    void (*fn)(struct print_job_info *))
 {
-	char *rparam = NULL;
-	char *rdata = NULL;
-	char *p;
-	int rdrcnt, rprcnt;
-	pstring param;
-	int result_code=0;
-	int i = -1;
-	
-	memset(param,'\0',sizeof(param));
-
-	p = param;
-	SSVAL(p,0,76);         /* API function number 76 (DosPrintJobEnum) */
-	p += 2;
-	pstrcpy(p,"zWrLeh");   /* parameter description? */
-	p = skip_string(p,1);
-	pstrcpy(p,"WWzWWDDzz");  /* returned data format */
-	p = skip_string(p,1);
-	pstrcpy(p,cli->share);    /* name of queue */
-	p = skip_string(p,1);
-	SSVAL(p,0,2);   /* API function level 2, PRJINFO_2 data structure */
-	SSVAL(p,2,1000); /* size of bytes of returned data buffer */
-	p += 4;
-	pstrcpy(p,"");   /* subformat */
-	p = skip_string(p,1);
-
-	DEBUG(4,("doing cli_print_queue for %s\n", cli->share));
-
-	if (cli_api(cli, 
-		    param, PTR_DIFF(p,param), 1024,  /* Param, length, maxlen */
-		    NULL, 0, CLI_BUFFER_SIZE,            /* data, length, maxlen */
-		    &rparam, &rprcnt,                /* return params, length */
-		    &rdata, &rdrcnt)) {               /* return data, length */
-		int converter;
-		result_code = SVAL(rparam,0);
-		converter = SVAL(rparam,2);       /* conversion factor */
-
-		if (result_code == 0) {
-			struct print_job_info job;
-			
-			p = rdata; 
-
-			for (i = 0; i < SVAL(rparam,4); ++i) {
-				job.id = SVAL(p,0);
-				job.priority = SVAL(p,2);
-				fstrcpy(job.user,
-					fix_char_ptr(SVAL(p,4), converter, 
-						     rdata, rdrcnt));
-				job.t = make_unix_date3(p + 12);
-				job.size = IVAL(p,16);
-				fstrcpy(job.name,fix_char_ptr(SVAL(p,24), 
-							      converter, 
-							      rdata, rdrcnt));
-				fn(&job);				
-				p += 28;
-			}
-		}
-	}
-
-	/* If any parameters or data were returned, free the storage. */
-	SAFE_FREE(rparam);
-	SAFE_FREE(rdata);
-
-	return i;
+	DEBUG(1,("function ommited/n"));
+/* function omited*/
 }
 
 /****************************************************************************
@@ -123,36 +51,8 @@ int cli_print_queue(struct cli_state *cl
   ****************************************************************************/
 int cli_printjob_del(struct cli_state *cli, int job)
 {
-	char *rparam = NULL;
-	char *rdata = NULL;
-	char *p;
-	int rdrcnt,rprcnt, ret = -1;
-	pstring param;
-
-	memset(param,'\0',sizeof(param));
-
-	p = param;
-	SSVAL(p,0,81);		/* DosPrintJobDel() */
-	p += 2;
-	pstrcpy(p,"W");
-	p = skip_string(p,1);
-	pstrcpy(p,"");
-	p = skip_string(p,1);
-	SSVAL(p,0,job);     
-	p += 2;
-	
-	if (cli_api(cli, 
-		    param, PTR_DIFF(p,param), 1024,  /* Param, length, maxlen */
-		    NULL, 0, CLI_BUFFER_SIZE,            /* data, length, maxlen */
-		    &rparam, &rprcnt,                /* return params, length */
-		    &rdata, &rdrcnt)) {               /* return data, length */
-		ret = SVAL(rparam,0);
-	}
-
-	SAFE_FREE(rparam);
-	SAFE_FREE(rdata);
-
-	return ret;
+	DEBUG(1,("function ommited/n"));
+/* function omited*/
 }
 
 
diff -pruwN samba-2.2.12/source/libsmb/clirap.c samba-2.2.12-livebox/libsmb/clirap.c
--- samba-2.2.12/source/libsmb/clirap.c	2004-08-12 20:24:26.000000000 +0200
+++ samba-2.2.12-livebox/libsmb/clirap.c	2010-03-31 11:45:59.000000000 +0200
@@ -55,17 +55,8 @@ BOOL cli_api(struct cli_state *cli,
 	     char **rparam, unsigned int *rprcnt,
 	     char **rdata, unsigned int *rdrcnt)
 {
-  cli_send_trans(cli,SMBtrans,
-                 PIPE_LANMAN,             /* Name */
-                 0,0,                     /* fid, flags */
-                 NULL,0,0,                /* Setup, length, max */
-                 param, prcnt, mprcnt,    /* Params, length, max */
-                 data, drcnt, mdrcnt      /* Data, length, max */ 
-                );
-
-  return (cli_receive_trans(cli,SMBtrans,
-                            rparam, rprcnt,
-                            rdata, rdrcnt));
+DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 
@@ -74,59 +65,8 @@ perform a NetWkstaUserLogon
 ****************************************************************************/
 BOOL cli_NetWkstaUserLogon(struct cli_state *cli,char *user, char *workstation)
 {
-	char *rparam = NULL;
-	char *rdata = NULL;
-	char *p;
-	int rdrcnt,rprcnt;
-	pstring param;
-
-	memset(param, 0, sizeof(param));
-	
-	/* send a SMBtrans command with api NetWkstaUserLogon */
-	p = param;
-	SSVAL(p,0,132); /* api number */
-	p += 2;
-	pstrcpy(p,"OOWb54WrLh");
-	p = skip_string(p,1);
-	pstrcpy(p,"WB21BWDWWDDDDDDDzzzD");
-	p = skip_string(p,1);
-	SSVAL(p,0,1);
-	p += 2;
-	pstrcpy(p,user);
-	strupper(p);
-	p += 21;
-	p++;
-	p += 15;
-	p++; 
-	pstrcpy(p, workstation); 
-	strupper(p);
-	p += 16;
-	SSVAL(p, 0, CLI_BUFFER_SIZE);
-	p += 2;
-	SSVAL(p, 0, CLI_BUFFER_SIZE);
-	p += 2;
-	
-	if (cli_api(cli, 
-                    param, PTR_DIFF(p,param),1024,  /* param, length, max */
-                    NULL, 0, CLI_BUFFER_SIZE,           /* data, length, max */
-                    &rparam, &rprcnt,               /* return params, return size */
-                    &rdata, &rdrcnt                 /* return data, return size */
-                   )) {
-		cli->rap_error = rparam? SVAL(rparam,0) : -1;
-		p = rdata;
-		
-		if (cli->rap_error == 0) {
-			DEBUG(4,("NetWkstaUserLogon success\n"));
-			cli->privileges = SVAL(p, 24);
-			fstrcpy(cli->eff_name,p+2);
-		} else {
-			DEBUG(1,("NetwkstaUserLogon gave error %d\n", cli->rap_error));
-		}
-	}
-	
-	SAFE_FREE(rparam);
-	SAFE_FREE(rdata);
-	return (cli->rap_error == 0);
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /****************************************************************************
@@ -134,67 +74,8 @@ call a NetShareEnum - try and browse ava
 ****************************************************************************/
 int cli_RNetShareEnum(struct cli_state *cli, void (*fn)(const char *, uint32, const char *, void *), void *state)
 {
-	char *rparam = NULL;
-	char *rdata = NULL;
-	char *p;
-	int rdrcnt,rprcnt;
-	pstring param;
-	int count = -1;
-
-	/* now send a SMBtrans command with api RNetShareEnum */
-	p = param;
-	SSVAL(p,0,0); /* api number */
-	p += 2;
-	pstrcpy(p,"WrLeh");
-	p = skip_string(p,1);
-	pstrcpy(p,"B13BWz");
-	p = skip_string(p,1);
-	SSVAL(p,0,1);
-	/*
-	 * Win2k needs a *smaller* buffer than 0xFFFF here -
-	 * it returns "out of server memory" with 0xFFFF !!! JRA.
-	 */
-	SSVAL(p,2,0xFFE0);
-	p += 4;
-	
-	if (cli_api(cli, 
-		    param, PTR_DIFF(p,param), 1024,  /* Param, length, maxlen */
-		    NULL, 0, 0xFFE0,            /* data, length, maxlen - Win2k needs a small buffer here too ! */
-		    &rparam, &rprcnt,                /* return params, length */
-		    &rdata, &rdrcnt))                /* return data, length */
-		{
-			int res = rparam? SVAL(rparam,0) : -1;
-			
-			if (res == 0 || res == ERRmoredata) {
-				int converter=SVAL(rparam,2);
-				int i;
-				
-				count=SVAL(rparam,4);
-				p = rdata;
-				
-				for (i=0;i<count;i++,p+=20) {
-					char *sname = p;
-					int type = SVAL(p,14);
-					int comment_offset = IVAL(p,16) & 0xFFFF;
-					const char *cmnt = comment_offset?(rdata+comment_offset-converter):"";
-					pstring s1, s2;
-
-					pstrcpy(s1, dos_to_unix_static(sname));
-					pstrcpy(s2, dos_to_unix_static(cmnt));
-
-					fn(s1, type, s2, state);
-				}
-			} else {
-				DEBUG(4,("NetShareEnum res=%d\n", res));
-			}      
-		} else {
-			DEBUG(4,("NetShareEnum failed\n"));
-		}
-  
-	SAFE_FREE(rparam);
-	SAFE_FREE(rdata);
-	
-	return count;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 
@@ -209,69 +90,8 @@ BOOL cli_NetServerEnum(struct cli_state
 		       void (*fn)(const char *, uint32, const char *, void *),
 		       void *state)
 {
-	char *rparam = NULL;
-	char *rdata = NULL;
-	int rdrcnt,rprcnt;
-	char *p;
-	pstring param;
-	int uLevel = 1;
-	int count = -1;
-
-	/* send a SMBtrans command with api NetServerEnum */
-	p = param;
-	SSVAL(p,0,0x68); /* api number */
-	p += 2;
-	pstrcpy(p,"WrLehDz");
-	p = skip_string(p,1);
-  
-	pstrcpy(p,"B16BBDz");
-
-	p = skip_string(p,1);
-	SSVAL(p,0,uLevel);
-	SSVAL(p,2,CLI_BUFFER_SIZE);
-	p += 4;
-	SIVAL(p,0,stype);
-	p += 4;
-
-	p += clistr_push(cli, p, workgroup, -1,
-		STR_TERMINATE | STR_CONVERT | STR_ASCII);
-
-	if (cli_api(cli, 
-                    param, PTR_DIFF(p,param), 8,        /* params, length, max */
-                    NULL, 0, CLI_BUFFER_SIZE,               /* data, length, max */
-                    &rparam, &rprcnt,                   /* return params, return size */
-                    &rdata, &rdrcnt                     /* return data, return size */
-                   )) {
-		int res = rparam? SVAL(rparam,0) : -1;
-			
-		if (res == 0 || res == ERRmoredata) {
-			int i;
-			int converter=SVAL(rparam,2);
-
-			count=SVAL(rparam,4);
-			p = rdata;
-					
-			for (i = 0;i < count;i++, p += 26) {
-				char *sname = p;
-				int comment_offset = (IVAL(p,22) & 0xFFFF)-converter;
-				const char *cmnt = comment_offset?(rdata+comment_offset):"";
-				pstring s1, s2;
-
-				if (comment_offset < 0 || comment_offset > rdrcnt) continue;
-
-				stype = IVAL(p,18) & ~SV_TYPE_LOCAL_LIST_ONLY;
-
-				pstrcpy(s1, dos_to_unix_static(sname));
-				pstrcpy(s2, dos_to_unix_static(cmnt));
-				fn(s1, stype, s2, state);
-			}
-		}
-	}
-  
-	SAFE_FREE(rparam);
-	SAFE_FREE(rdata);
-	
-	return(count > 0);
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 
@@ -282,86 +102,8 @@ Send a SamOEMChangePassword command
 BOOL cli_oem_change_password(struct cli_state *cli, const char *user, const char *new_password,
                              const char *old_password)
 {
-  char param[16+sizeof(fstring)];
-  char data[532];
-  char *p = param;
-  fstring upper_case_old_pw;
-  fstring upper_case_new_pw;
-  unsigned char old_pw_hash[16];
-  unsigned char new_pw_hash[16];
-  unsigned int data_len;
-  unsigned int param_len = 0;
-  char *rparam = NULL;
-  char *rdata = NULL;
-  int rprcnt, rdrcnt;
-  pstring dos_new_password;
-
-  if (strlen(user) >= sizeof(fstring)-1) {
-    DEBUG(0,("cli_oem_change_password: user name %s is too long.\n", user));
-    return False;
-  }
-
-  SSVAL(p,0,214); /* SamOEMChangePassword command. */
-  p += 2;
-  pstrcpy(p, "zsT");
-  p = skip_string(p,1);
-  pstrcpy(p, "B516B16");
-  p = skip_string(p,1);
-  pstrcpy(p,user);
-  p = skip_string(p,1);
-  SSVAL(p,0,532);
-  p += 2;
-
-  param_len = PTR_DIFF(p,param);
-
-  /*
-   * Get the Lanman hash of the old password, we
-   * use this as the key to make_oem_passwd_hash().
-   */
-  memset(upper_case_old_pw, '\0', sizeof(upper_case_old_pw));
-  clistr_push(cli, upper_case_old_pw, old_password, -1,STR_CONVERT|STR_TERMINATE|STR_UPPER|STR_ASCII);
-  E_P16((uchar *)upper_case_old_pw, old_pw_hash);
-
-  clistr_push(cli, dos_new_password, new_password, -1, STR_CONVERT|STR_TERMINATE|STR_ASCII);
-
-  if (!make_oem_passwd_hash( data, dos_new_password, old_pw_hash, False))
-    return False;
-
-  /* 
-   * Now place the old password hash in the data.
-   */
-  memset(upper_case_new_pw, '\0', sizeof(upper_case_new_pw));
-  clistr_push(cli, upper_case_new_pw, new_password, -1, STR_CONVERT|STR_TERMINATE|STR_UPPER|STR_ASCII);
-
-  E_P16((uchar *)upper_case_new_pw, new_pw_hash);
-
-  E_old_pw_hash( new_pw_hash, old_pw_hash, (uchar *)&data[516]);
-
-  data_len = 532;
-    
-  if (cli_send_trans(cli,SMBtrans,
-                    PIPE_LANMAN,                          /* name */
-                    0,0,                                  /* fid, flags */
-                    NULL,0,0,                             /* setup, length, max */
-                    param,param_len,2,                    /* param, length, max */
-                    data,data_len,0                       /* data, length, max */
-                   ) == False) {
-    DEBUG(0,("cli_oem_change_password: Failed to send password change for user %s\n",
-              user ));
-    return False;
-  }
-
-  if (cli_receive_trans(cli,SMBtrans,
-                       &rparam, &rprcnt,
-                       &rdata, &rdrcnt)) {
-    if (rparam)
-      cli->rap_error = SVAL(rparam,0);
-  }
-
-  SAFE_FREE(rparam);
-  SAFE_FREE(rdata);
-
-  return (cli->rap_error == 0);
+DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 
@@ -372,75 +114,8 @@ BOOL cli_qpathinfo(struct cli_state *cli
 		   time_t *c_time, time_t *a_time, time_t *m_time, 
 		   size_t *size, uint16 *mode)
 {
-	unsigned int data_len = 0;
-	unsigned int param_len = 0;
-	uint16 setup = TRANSACT2_QPATHINFO;
-	pstring param;
-	char *rparam=NULL, *rdata=NULL;
-	int count=8;
-	BOOL ret;
-	time_t (*date_fn)(void *);
-	char *p;
-
-	p = param;
-	memset(p, 0, 6);
-	SSVAL(p, 0, SMB_INFO_STANDARD);
-	p += 6;
-	p += clistr_push(cli, p, fname, sizeof(pstring)-6, STR_TERMINATE|STR_CONVERT );
-
-	param_len = PTR_DIFF(p, param);
-
-	do {
-		ret = (cli_send_trans(cli, SMBtrans2, 
-				      NULL,           /* Name */
-				      -1, 0,          /* fid, flags */
-				      &setup, 1, 0,   /* setup, length, max */
-				      param, param_len, 10, /* param, length, max */
-				      NULL, data_len, cli->max_xmit /* data, length, max */
-				      ) &&
-		       cli_receive_trans(cli, SMBtrans2, 
-					 &rparam, &param_len,
-					 &rdata, &data_len));
-		if (!ret && cli_is_dos_error(cli)) {
-			/* we need to work around a Win95 bug - sometimes
-			   it gives ERRSRV/ERRerror temprarily */
-			uint8 eclass;
-			uint32 ecode;
-			cli_dos_error(cli, &eclass, &ecode);
-			if (eclass != ERRSRV || ecode != ERRerror) break;
-			msleep(100);
-		}
-	} while (count-- && ret==False);
-
-	if (!ret || !rdata || data_len < 22) {
-		return False;
-	}
-
-	if (cli->win95) {
-		date_fn = make_unix_date;
-	} else {
-		date_fn = make_unix_date2;
-	}
-
-	if (c_time) {
-		*c_time = date_fn(rdata+0);
-	}
-	if (a_time) {
-		*a_time = date_fn(rdata+4);
-	}
-	if (m_time) {
-		*m_time = date_fn(rdata+8);
-	}
-	if (size) {
-		*size = IVAL(rdata, 12);
-	}
-	if (mode) {
-		*mode = SVAL(rdata,l1_attrFile);
-	}
-
-	SAFE_FREE(rdata);
-	SAFE_FREE(rparam);
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /****************************************************************************
@@ -451,66 +126,8 @@ BOOL cli_qpathinfo2(struct cli_state *cl
 		    time_t *w_time, size_t *size, uint16 *mode,
 		    SMB_INO_T *ino)
 {
-	unsigned int data_len = 0;
-	unsigned int param_len = 0;
-	uint16 setup = TRANSACT2_QPATHINFO;
-	pstring param;
-	char *rparam=NULL, *rdata=NULL;
-	char *p;
-
-	p = param;
-	memset(p, 0, 6);
-	SSVAL(p, 0, SMB_QUERY_FILE_ALL_INFO);
-	p += 6;
-	p += clistr_push(cli, p, fname, sizeof(pstring)-6, STR_TERMINATE|STR_CONVERT );
-
-	param_len = PTR_DIFF(p, param);
-
-	if (!cli_send_trans(cli, SMBtrans2, 
-                            NULL,                         /* name */
-                            -1, 0,                        /* fid, flags */
-                            &setup, 1, 0,                 /* setup, length, max */
-                            param, param_len, 10,         /* param, length, max */
-                            NULL, data_len, cli->max_xmit /* data, length, max */
-                           )) {
-		return False;
-	}
-
-	if (!cli_receive_trans(cli, SMBtrans2,
-                               &rparam, &param_len,
-                               &rdata, &data_len)) {
-		return False;
-	}
-
-	if (!rdata || data_len < 22) {
-		return False;
-	}
-
-	if (c_time) {
-		*c_time = interpret_long_date(rdata+0) - cli->serverzone;
-	}
-	if (a_time) {
-		*a_time = interpret_long_date(rdata+8) - cli->serverzone;
-	}
-	if (m_time) {
-		*m_time = interpret_long_date(rdata+16) - cli->serverzone;
-	}
-	if (w_time) {
-		*w_time = interpret_long_date(rdata+24) - cli->serverzone;
-	}
-	if (mode) {
-		*mode = SVAL(rdata, 32);
-	}
-	if (size) {
-		*size = IVAL(rdata, 48);
-	}
-	if (ino) {
-		*ino = IVAL(rdata, 64);
-	}
-
-	SAFE_FREE(rdata);
-	SAFE_FREE(rparam);
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 
@@ -522,67 +139,8 @@ BOOL cli_qfileinfo(struct cli_state *cli
 		   time_t *c_time, time_t *a_time, time_t *m_time, 
 		   time_t *w_time, SMB_INO_T *ino)
 {
-	unsigned int data_len = 0;
-	unsigned int param_len = 0;
-	uint16 setup = TRANSACT2_QFILEINFO;
-	pstring param;
-	char *rparam=NULL, *rdata=NULL;
-
-	/* if its a win95 server then fail this - win95 totally screws it
-	   up */
-	if (cli->win95) return False;
-
-	param_len = 4;
-
-	memset(param, 0, param_len);
-	SSVAL(param, 0, fnum);
-	SSVAL(param, 2, SMB_QUERY_FILE_ALL_INFO);
-
-	if (!cli_send_trans(cli, SMBtrans2, 
-                            NULL,                           /* name */
-                            -1, 0,                          /* fid, flags */
-                            &setup, 1, 0,                   /* setup, length, max */
-                            param, param_len, 2,            /* param, length, max */
-                            NULL, data_len, cli->max_xmit   /* data, length, max */
-                           )) {
-		return False;
-	}
-
-	if (!cli_receive_trans(cli, SMBtrans2,
-                               &rparam, &param_len,
-                               &rdata, &data_len)) {
-		return False;
-	}
-
-	if (!rdata || data_len < 68) {
-		return False;
-	}
-
-	if (c_time) {
-		*c_time = interpret_long_date(rdata+0) - cli->serverzone;
-	}
-	if (a_time) {
-		*a_time = interpret_long_date(rdata+8) - cli->serverzone;
-	}
-	if (m_time) {
-		*m_time = interpret_long_date(rdata+16) - cli->serverzone;
-	}
-	if (w_time) {
-		*w_time = interpret_long_date(rdata+24) - cli->serverzone;
-	}
-	if (mode) {
-		*mode = SVAL(rdata, 32);
-	}
-	if (size) {
-		*size = IVAL(rdata, 48);
-	}
-	if (ino) {
-		*ino = IVAL(rdata, 64);
-	}
-
-	SAFE_FREE(rdata);
-	SAFE_FREE(rparam);
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /****************************************************************************
@@ -590,43 +148,8 @@ send a qfileinfo call
 ****************************************************************************/
 BOOL cli_qfileinfo_test(struct cli_state *cli, int fnum, int level, char *outdata)
 {
-	unsigned int data_len = 0;
-	unsigned int param_len = 0;
-	uint16 setup = TRANSACT2_QFILEINFO;
-	pstring param;
-	char *rparam=NULL, *rdata=NULL;
-
-	/* if its a win95 server then fail this - win95 totally screws it
-	   up */
-	if (cli->win95) return False;
-
-	param_len = 4;
-
-	memset(param, 0, param_len);
-	SSVAL(param, 0, fnum);
-	SSVAL(param, 2, level);
-
-	if (!cli_send_trans(cli, SMBtrans2, 
-                            NULL,                           /* name */
-                            -1, 0,                          /* fid, flags */
-                            &setup, 1, 0,                   /* setup, length, max */
-                            param, param_len, 2,            /* param, length, max */
-                            NULL, data_len, cli->max_xmit   /* data, length, max */
-                           )) {
-		return False;
-	}
-
-	if (!cli_receive_trans(cli, SMBtrans2,
-                               &rparam, &param_len,
-                               &rdata, &data_len)) {
-		return False;
-	}
-
-	memcpy(outdata, rdata, data_len);
-
-	SAFE_FREE(rdata);
-	SAFE_FREE(rparam);
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /****************************************************************************
@@ -635,60 +158,6 @@ BOOL cli_qfileinfo_test(struct cli_state
 
 NTSTATUS cli_qpathinfo_alt_name(struct cli_state *cli, const char *fname, fstring alt_name)
 {
-	unsigned int data_len = 0;
-	unsigned int param_len = 0;
-	uint16 setup = TRANSACT2_QPATHINFO;
-	pstring param;
-	char *rparam=NULL, *rdata=NULL;
-	int count=8;
-	char *p;
-	BOOL ret;
-	int len;
-
-	p = param;
-	memset(p, 0, 6);
-	SSVAL(p, 0, SMB_QUERY_FILE_ALT_NAME_INFO);
-	p += 6;
-	p += clistr_push(cli, p, fname, sizeof(pstring)-6, STR_TERMINATE|STR_CONVERT);
-
-	param_len = PTR_DIFF(p, param);
-
-	do {
-		ret = (cli_send_trans(cli, SMBtrans2, 
-				      NULL,           /* Name */
-				      -1, 0,          /* fid, flags */
-				      &setup, 1, 0,   /* setup, length, max */
-				      param, param_len, 10, /* param, length, max */
-				      NULL, data_len, cli->max_xmit /* data, length, max */
-				      ) &&
-		       cli_receive_trans(cli, SMBtrans2, 
-					 &rparam, &param_len,
-					 &rdata, &data_len));
-		if (!ret && cli_is_dos_error(cli)) {
-			/* we need to work around a Win95 bug - sometimes
-			   it gives ERRSRV/ERRerror temprarily */
-			uint8 eclass;
-			uint32 ecode;
-			cli_dos_error(cli, &eclass, &ecode);
-			if (eclass != ERRSRV || ecode != ERRerror) break;
-			msleep(100);
-		}
-	} while (count-- && ret==False);
-
-	if (!ret || !rdata || data_len < 4) {
-		return NT_STATUS_UNSUCCESSFUL;
-	}
-
-	len = IVAL(rdata, 0);
-
-	if (len > data_len - 4) {
-		return NT_STATUS_INVALID_NETWORK_RESPONSE;
-	}
-
-	clistr_pull(cli, alt_name, rdata+4, sizeof(fstring), len, 0);
-
-	SAFE_FREE(rdata);
-	SAFE_FREE(rparam);
-
-	return NT_STATUS_OK;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
diff -pruwN samba-2.2.12/source/libsmb/clireadwrite.c samba-2.2.12-livebox/libsmb/clireadwrite.c
--- samba-2.2.12/source/libsmb/clireadwrite.c	2004-08-12 20:24:26.000000000 +0200
+++ samba-2.2.12-livebox/libsmb/clireadwrite.c	2010-03-31 11:45:59.000000000 +0200
@@ -71,22 +71,8 @@ Issue a single SMBreadraw and don't wait
 static BOOL cli_issue_readraw(struct cli_state *cli, int fnum, off_t offset, 
 			   size_t size, int i)
 {
-	memset(cli->outbuf,'\0',smb_size);
-	memset(cli->inbuf,'\0',smb_size);
-
-	set_message(cli->outbuf,10,0,True);
-		
-	SCVAL(cli->outbuf,smb_com,SMBreadbraw);
-	SSVAL(cli->outbuf,smb_tid,cli->cnum);
-	cli_setup_packet(cli);
-
-	SSVAL(cli->outbuf,smb_vwv0,fnum);
-	SIVAL(cli->outbuf,smb_vwv1,offset);
-	SSVAL(cli->outbuf,smb_vwv2,size);
-	SSVAL(cli->outbuf,smb_vwv3,size);
-	SSVAL(cli->outbuf,smb_mid,cli->mid + i);
-
-	return cli_send_smb(cli);
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /****************************************************************************
@@ -174,60 +160,8 @@ ssize_t cli_read(struct cli_state *cli,
 
 ssize_t cli_readraw(struct cli_state *cli, int fnum, char *buf, off_t offset, size_t size)
 {
-	char *p;
-	int size2;
-	size_t readsize;
-	ssize_t total = 0;
-
-	if (size == 0) 
-		return 0;
-
-	/*
-	 * Set readsize to the maximum size we can handle in one readraw.
-	 */
-
-	readsize = 0xFFFF;
-
-	while (total < size) {
-		readsize = MIN(readsize, size-total);
-
-		/* Issue a read and receive a reply */
-
-		if (!cli_issue_readraw(cli, fnum, offset, readsize, 0))
-			return -1;
-
-		if (!client_receive_smb(cli->fd, cli->inbuf, cli->timeout))
-			return -1;
-
-		size2 = smb_len(cli->inbuf);
-
-		if (size2 > readsize) {
-			DEBUG(5,("server returned more than we wanted!\n"));
-			return -1;
-		} else if (size2 < 0) {
-			DEBUG(5,("read return < 0!\n"));
-			return -1;
-		}
-
-		/* Copy data into buffer */
-
-		if (size2) {
-			p = cli->inbuf + 4;
-			memcpy(buf + total, p, size2);
-		}
-
-		total += size2;
-		offset += size2;
-
-		/*
-		 * If the server returned less than we asked for we're at EOF.
-		 */
-
-		if (size2 < readsize)
-			break;
-	}
-
-	return total;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /****************************************************************************
@@ -237,65 +171,8 @@ issue a single SMBwrite and don't wait f
 static BOOL cli_issue_write(struct cli_state *cli, int fnum, off_t offset, uint16 mode, char *buf,
 			    size_t size, int i)
 {
-	char *p;
-	BOOL bigoffset = False;
-
-	if (size > cli->bufsize) {
-		cli->outbuf = realloc(cli->outbuf, size + 1024);
-		cli->inbuf = realloc(cli->inbuf, size + 1024);
-		if (cli->outbuf == NULL || cli->inbuf == NULL)
-			return False;
-		cli->bufsize = size + 1024;
-	}
-
-	memset(cli->outbuf,'\0',smb_size);
-	memset(cli->inbuf,'\0',smb_size);
-
-	if ((SMB_BIG_UINT)offset >> 32) 
-		bigoffset = True;
-
-	if (bigoffset)
-		set_message(cli->outbuf,14,0,True);
-	else
-		set_message(cli->outbuf,12,0,True);
-	
-	SCVAL(cli->outbuf,smb_com,SMBwriteX);
-	SSVAL(cli->outbuf,smb_tid,cli->cnum);
-	cli_setup_packet(cli);
-	
-	SCVAL(cli->outbuf,smb_vwv0,0xFF);
-	SSVAL(cli->outbuf,smb_vwv2,fnum);
-
-	SIVAL(cli->outbuf,smb_vwv3,offset);
-	SIVAL(cli->outbuf,smb_vwv5,0);
-	SSVAL(cli->outbuf,smb_vwv7,mode);
-
-	/*
-	 * THe following is still wrong ...
-	 */
-	SSVAL(cli->outbuf,smb_vwv8,(mode & 0x0008) ? size : 0);
-	SSVAL(cli->outbuf,smb_vwv9,((size>>16)&1));
-	SSVAL(cli->outbuf,smb_vwv10,size);
-	SSVAL(cli->outbuf,smb_vwv11,
-	      smb_buf(cli->outbuf) - smb_base(cli->outbuf));
-
-#ifdef LARGE_SMB_OFF_T
-        /*
-	 * We only want to do the following if we understand large offsets
-	 * otherwise the compiler is likely to get upset with us
-	 */
-	if (bigoffset)
-		SIVAL(cli->outbuf,smb_vwv12,(offset>>32) & 0xffffffff);
-#endif /* LARGE_SMB_OFF_T */
-
-	p = smb_base(cli->outbuf) + SVAL(cli->outbuf,smb_vwv11);
-	memcpy(p, buf, size);
-	cli_setup_bcc(cli, p+size);
-
-	SSVAL(cli->outbuf,smb_mid,cli->mid + i);
-	
-	show_msg(cli->outbuf);
-	return cli_send_smb(cli);
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /****************************************************************************
@@ -310,43 +187,8 @@ ssize_t cli_write(struct cli_state *cli,
 		  int fnum, uint16 write_mode,
 		  char *buf, off_t offset, size_t size)
 {
-	int bwritten = 0;
-	int issued = 0;
-	int received = 0;
-	int mpx = MAX(cli->max_mux-1, 1);
-	int block = (cli->max_xmit - (smb_size+32)) & ~1023;
-	int blocks = (size + (block-1)) / block;
-
-	while (received < blocks) {
-
-		while ((issued - received < mpx) && (issued < blocks)) {
-			int bsent = issued * block;
-			int size1 = MIN(block, size - bsent);
-
-			if (!cli_issue_write(cli, fnum, offset + bsent,
-			                write_mode,
-			                buf + bsent,
-					size1, issued))
-				return -1;
-			issued++;
-		}
-
-		if (!cli_receive_smb(cli))
-			return bwritten;
-
-		received++;
-
-		if (cli_is_error(cli))
-			break;
-
-		bwritten += SVAL(cli->inbuf, smb_vwv2);
-		bwritten += (((int)(SVAL(cli->inbuf, smb_vwv4)))>>16);
-	}
-
-	while (received < issued && cli_receive_smb(cli))
-		received++;
-	
-	return bwritten;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /****************************************************************************
@@ -356,51 +198,6 @@ ssize_t cli_write(struct cli_state *cli,
 ssize_t cli_smbwrite(struct cli_state *cli,
 		     int fnum, char *buf, off_t offset, size_t size1)
 {
-	char *p;
-	ssize_t total = 0;
-
-	do {
-		size_t size = MIN(size1, cli->max_xmit - 48);
-		
-		memset(cli->outbuf,'\0',smb_size);
-		memset(cli->inbuf,'\0',smb_size);
-
-		set_message(cli->outbuf,5, 0,True);
-
-		SCVAL(cli->outbuf,smb_com,SMBwrite);
-		SSVAL(cli->outbuf,smb_tid,cli->cnum);
-		cli_setup_packet(cli);
-		
-		SSVAL(cli->outbuf,smb_vwv0,fnum);
-		SSVAL(cli->outbuf,smb_vwv1,size);
-		SIVAL(cli->outbuf,smb_vwv2,offset);
-		SSVAL(cli->outbuf,smb_vwv4,0);
-		
-		p = smb_buf(cli->outbuf);
-		*p++ = 1;
-		SSVAL(p, 0, size); p += 2;
-		memcpy(p, buf, size); p += size;
-
-		cli_setup_bcc(cli, p);
-		
-		if (!cli_send_smb(cli))
-			return -1;
-
-		if (!cli_receive_smb(cli))
-			return -1;
-		
-		if (cli_is_error(cli))
-			return -1;
-
-		size = SVAL(cli->inbuf,smb_vwv0);
-		if (size == 0)
-			break;
-
-		size1 -= size;
-		total += size;
-		offset += size;
-
-	} while (size1);
-
-	return total;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
diff -pruwN samba-2.2.12/source/libsmb/clisecdesc.c samba-2.2.12-livebox/libsmb/clisecdesc.c
--- samba-2.2.12/source/libsmb/clisecdesc.c	2004-08-12 20:24:25.000000000 +0200
+++ samba-2.2.12-livebox/libsmb/clisecdesc.c	2010-03-31 11:45:59.000000000 +0200
@@ -27,49 +27,8 @@
 SEC_DESC *cli_query_secdesc(struct cli_state *cli, int fnum, 
 			    TALLOC_CTX *mem_ctx)
 {
-	char param[8];
-	char *rparam=NULL, *rdata=NULL;
-	int rparam_count=0, rdata_count=0;
-	prs_struct pd;
-	SEC_DESC *psd = NULL;
-
-	SIVAL(param, 0, fnum);
-	SSVAL(param, 4, 0x7);
-
-	if (!cli_send_nt_trans(cli, 
-			       NT_TRANSACT_QUERY_SECURITY_DESC, 
-			       0, 
-			       NULL, 0, 0,
-			       param, 8, 4,
-			       NULL, 0, 0x10000)) {
-		DEBUG(1,("Failed to send NT_TRANSACT_QUERY_SECURITY_DESC\n"));
-		goto cleanup;
-	}
-
-
-	if (!cli_receive_nt_trans(cli, 
-				  &rparam, &rparam_count,
-				  &rdata, &rdata_count)) {
-		DEBUG(1,("Failed to recv NT_TRANSACT_QUERY_SECURITY_DESC\n"));
-		goto cleanup;
-	}
-
-	prs_init(&pd, rdata_count, mem_ctx, UNMARSHALL);
-	prs_append_data(&pd, rdata, rdata_count);
-	pd.data_offset = 0;
-
-	if (!sec_io_desc("sd data", &psd, &pd, 1)) {
-		DEBUG(1,("Failed to parse secdesc\n"));
-		goto cleanup;
-	}
-
- cleanup:
-
-	SAFE_FREE(rparam);
-	SAFE_FREE(rdata);
-
-	prs_mem_free(&pd);
-	return psd;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /****************************************************************************
@@ -77,56 +36,6 @@ SEC_DESC *cli_query_secdesc(struct cli_s
  ****************************************************************************/
 BOOL cli_set_secdesc(struct cli_state *cli, int fnum, SEC_DESC *sd)
 {
-	char param[8];
-	char *rparam=NULL, *rdata=NULL;
-	int rparam_count=0, rdata_count=0;
-	TALLOC_CTX *mem_ctx;
-	prs_struct pd;
-	BOOL ret = False;
-
-	if ((mem_ctx = talloc_init()) == NULL) {
-		DEBUG(0,("talloc_init failed.\n"));
-		goto cleanup;
-	}
-
-	prs_init(&pd, 0, mem_ctx, MARSHALL);
-	prs_give_memory(&pd, NULL, 0, True);
-
-	if (!sec_io_desc("sd data", &sd, &pd, 1)) {
-		DEBUG(1,("Failed to marshall secdesc\n"));
-		goto cleanup;
-	}
-
-	SIVAL(param, 0, fnum);
-	SSVAL(param, 4, 0x7);
-
-	if (!cli_send_nt_trans(cli, 
-			       NT_TRANSACT_SET_SECURITY_DESC, 
-			       0, 
-			       NULL, 0, 0,
-			       param, 8, 0,
-			       pd.data_p, pd.data_offset, 0)) {
-		DEBUG(1,("Failed to send NT_TRANSACT_SET_SECURITY_DESC\n"));
-		goto cleanup;
-	}
-
-
-	if (!cli_receive_nt_trans(cli, 
-				  &rparam, &rparam_count,
-				  &rdata, &rdata_count)) {
-		DEBUG(1,("NT_TRANSACT_SET_SECURITY_DESC failed\n"));
-		goto cleanup;
-	}
-
-	ret = True;
-
-  cleanup:
-
-	SAFE_FREE(rparam);
-	SAFE_FREE(rdata);
-
-	talloc_destroy(mem_ctx);
-
-	prs_mem_free(&pd);
-	return ret;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
diff -pruwN samba-2.2.12/source/libsmb/clitrans.c samba-2.2.12-livebox/libsmb/clitrans.c
--- samba-2.2.12/source/libsmb/clitrans.c	2004-08-12 20:24:26.000000000 +0200
+++ samba-2.2.12-livebox/libsmb/clitrans.c	2010-03-31 11:45:59.000000000 +0200
@@ -307,94 +307,8 @@ BOOL cli_send_nt_trans(struct cli_state
 		       char *param, unsigned int lparam, unsigned int mparam,
 		       char *data, unsigned int ldata, unsigned int mdata)
 {
-	unsigned int i;
-	unsigned int this_ldata,this_lparam;
-	unsigned int tot_data=0,tot_param=0;
-	char *outdata,*outparam;
-
-	this_lparam = MIN(lparam,cli->max_xmit - (500+lsetup*2)); /* hack */
-	this_ldata = MIN(ldata,cli->max_xmit - (500+lsetup*2+this_lparam));
-
-	memset(cli->outbuf,'\0',smb_size);
-	set_message(cli->outbuf,19+lsetup,0,True);
-	SCVAL(cli->outbuf,smb_com,SMBnttrans);
-	SSVAL(cli->outbuf,smb_tid, cli->cnum);
-	cli_setup_packet(cli);
-
-	outparam = smb_buf(cli->outbuf)+3;
-	outdata = outparam+this_lparam;
-
-	/* primary request */
-	SCVAL(cli->outbuf,smb_nt_MaxSetupCount,msetup);
-	SCVAL(cli->outbuf,smb_nt_Flags,flags);
-	SIVAL(cli->outbuf,smb_nt_TotalParameterCount, lparam);
-	SIVAL(cli->outbuf,smb_nt_TotalDataCount, ldata);
-	SIVAL(cli->outbuf,smb_nt_MaxParameterCount, mparam);
-	SIVAL(cli->outbuf,smb_nt_MaxDataCount, mdata);
-	SIVAL(cli->outbuf,smb_nt_ParameterCount, this_lparam);
-	SIVAL(cli->outbuf,smb_nt_ParameterOffset, smb_offset(outparam,cli->outbuf));
-	SIVAL(cli->outbuf,smb_nt_DataCount, this_ldata);
-	SIVAL(cli->outbuf,smb_nt_DataOffset, smb_offset(outdata,cli->outbuf));
-	SIVAL(cli->outbuf,smb_nt_SetupCount, lsetup);
-	SIVAL(cli->outbuf,smb_nt_Function, function);
-	for (i=0;i<lsetup;i++)		/* setup[] */
-		SSVAL(cli->outbuf,smb_nt_SetupStart+i*2,setup[i]);
-	
-	if (this_lparam)			/* param[] */
-		memcpy(outparam,param,this_lparam);
-	if (this_ldata)			/* data[] */
-		memcpy(outdata,data,this_ldata);
-
-	cli_setup_bcc(cli, outdata+this_ldata);
-
-	show_msg(cli->outbuf);
-	if (!cli_send_smb(cli))
-		return False;
-
-	if (this_ldata < ldata || this_lparam < lparam) {
-		/* receive interim response */
-		if (!cli_receive_smb(cli) || cli_is_error(cli))
-			return(False);
-
-		tot_data = this_ldata;
-		tot_param = this_lparam;
-		
-		while (tot_data < ldata || tot_param < lparam)  {
-			this_lparam = MIN(lparam-tot_param,cli->max_xmit - 500); /* hack */
-			this_ldata = MIN(ldata-tot_data,cli->max_xmit - (500+this_lparam));
-
-			set_message(cli->outbuf,18,0,True);
-			SCVAL(cli->outbuf,smb_com,SMBnttranss);
-
-			/* XXX - these should probably be aligned */
-			outparam = smb_buf(cli->outbuf);
-			outdata = outparam+this_lparam;
-			
-			/* secondary request */
-			SIVAL(cli->outbuf,smb_nts_TotalParameterCount,lparam);
-			SIVAL(cli->outbuf,smb_nts_TotalDataCount,ldata);
-			SIVAL(cli->outbuf,smb_nts_ParameterCount,this_lparam);
-			SIVAL(cli->outbuf,smb_nts_ParameterOffset,smb_offset(outparam,cli->outbuf));
-			SIVAL(cli->outbuf,smb_nts_ParameterDisplacement,tot_param);
-			SIVAL(cli->outbuf,smb_nts_DataCount,this_ldata);
-			SIVAL(cli->outbuf,smb_nts_DataOffset,smb_offset(outdata,cli->outbuf));
-			SIVAL(cli->outbuf,smb_nts_DataDisplacement,tot_data);
-			if (this_lparam)			/* param[] */
-				memcpy(outparam,param+tot_param,this_lparam);
-			if (this_ldata)			/* data[] */
-				memcpy(outdata,data+tot_data,this_ldata);
-			cli_setup_bcc(cli, outdata+this_ldata);
-			
-			show_msg(cli->outbuf);
-			if (!cli_send_smb(cli))
-				return False;
-			
-			tot_data += this_ldata;
-			tot_param += this_lparam;
-		}
-	}
-
-	return(True);
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 
@@ -407,158 +321,6 @@ BOOL cli_receive_nt_trans(struct cli_sta
 			  char **param, unsigned int *param_len,
 			  char **data, unsigned int *data_len)
 {
-	unsigned int total_data=0;
-	unsigned int total_param=0;
-	unsigned int this_data,this_param;
-	uint8 eclass;
-	uint32 ecode;
-	char *tdata;
-	char *tparam;
-
-	*data_len = *param_len = 0;
-
-	if (!cli_receive_smb(cli))
-		return False;
-
-	show_msg(cli->inbuf);
-	
-	/* sanity check */
-	if (CVAL(cli->inbuf,smb_com) != SMBnttrans) {
-		DEBUG(0,("Expected SMBnttrans response, got command 0x%02x\n",
-			 CVAL(cli->inbuf,smb_com)));
-		return(False);
-	}
-
-	/*
-	 * An NT RPC pipe call can return ERRDOS, ERRmoredata
-	 * to a trans call. This is not an error and should not
-	 * be treated as such.
-	 */
-	if (cli_is_dos_error(cli)) {
-                cli_dos_error(cli, &eclass, &ecode);
-		if (cli->nt_pipe_fnum == 0 || !(eclass == ERRDOS && ecode == ERRmoredata))
-			return(False);
-	}
-
-	/* parse out the lengths */
-	total_data = SVAL(cli->inbuf,smb_ntr_TotalDataCount);
-	total_param = SVAL(cli->inbuf,smb_ntr_TotalParameterCount);
-
-	/* allocate it */
-	if (total_data) {
-		tdata = Realloc(*data,total_data);
-		if (!tdata) {
-			DEBUG(0,("cli_receive_nt_trans: failed to enlarge data buffer to %d\n",total_data));
-			return False;
-		} else {
-			*data = tdata;
-		}
-	}
-
-	if (total_param) {
-		tparam = Realloc(*param,total_param);
-		if (!tparam) {
-			DEBUG(0,("cli_receive_nt_trans: failed to enlarge param buffer to %d\n", total_param));
-			return False;
-		} else {
-			*param = tparam;
-		}
-	}
-
-	while (1)  {
-		this_data = SVAL(cli->inbuf,smb_ntr_DataCount);
-		this_param = SVAL(cli->inbuf,smb_ntr_ParameterCount);
-
-		if (this_data + *data_len > total_data ||
-		    this_param + *param_len > total_param) {
-			DEBUG(1,("Data overflow in cli_receive_nt_trans\n"));
-			return False;
-		}
-
-		if (this_data + *data_len < this_data ||
-				this_data + *data_len < *data_len ||
-				this_param + *param_len < this_param ||
-				this_param + *param_len < *param_len) {
-			DEBUG(1,("Data overflow in cli_receive_nt_trans\n"));
-			return False;
-		}
-
-		if (this_data) {
-			unsigned int data_offset_out = SVAL(cli->inbuf,smb_ntr_DataDisplacement);
-			unsigned int data_offset_in = SVAL(cli->inbuf,smb_ntr_DataOffset);
-
-			if (data_offset_out > total_data ||
-					data_offset_out + this_data > total_data ||
-					data_offset_out + this_data < data_offset_out ||
-					data_offset_out + this_data < this_data) {
-				DEBUG(1,("Data overflow in cli_receive_nt_trans\n"));
-				return False;
-			}
-			if (data_offset_in > cli->bufsize ||
-					data_offset_in + this_data >  cli->bufsize ||
-					data_offset_in + this_data < data_offset_in ||
-					data_offset_in + this_data < this_data) {
-				DEBUG(1,("Data overflow in cli_receive_nt_trans\n"));
-				return False;
-			}
-
-			memcpy(*data + data_offset_out, smb_base(cli->inbuf) + data_offset_in, this_data);
-		}
-
-		if (this_param) {
-			unsigned int param_offset_out = SVAL(cli->inbuf,smb_ntr_ParameterDisplacement);
-			unsigned int param_offset_in = SVAL(cli->inbuf,smb_ntr_ParameterOffset);
-
-			if (param_offset_out > total_param ||
-					param_offset_out + this_param > total_param ||
-					param_offset_out + this_param < param_offset_out ||
-					param_offset_out + this_param < this_param) {
-				DEBUG(1,("Param overflow in cli_receive_nt_trans\n"));
-				return False;
-			}
-			if (param_offset_in > cli->bufsize ||
-					param_offset_in + this_param >  cli->bufsize ||
-					param_offset_in + this_param < param_offset_in ||
-					param_offset_in + this_param < this_param) {
-				DEBUG(1,("Param overflow in cli_receive_nt_trans\n"));
-				return False;
-			}
-
-			memcpy(*param + param_offset_out, smb_base(cli->inbuf) + param_offset_in, this_param);
-		}
-
-		*data_len += this_data;
-		*param_len += this_param;
-
-		if (total_data <= *data_len && total_param <= *param_len)
-			break;
-		
-		if (!cli_receive_smb(cli))
-			return False;
-
-		show_msg(cli->inbuf);
-		
-		/* sanity check */
-		if (CVAL(cli->inbuf,smb_com) != SMBnttrans) {
-			DEBUG(0,("Expected SMBnttrans response, got command 0x%02x\n",
-				 CVAL(cli->inbuf,smb_com)));
-			return(False);
-		}
-		if (cli_is_dos_error(cli)) {
-                        cli_dos_error(cli, &eclass, &ecode);
-			if(cli->nt_pipe_fnum == 0 || 
-                           !(eclass == ERRDOS && ecode == ERRmoredata))
-				return(False);
-		}
-		/* parse out the total lengths again - they can shrink! */
-		if (SVAL(cli->inbuf,smb_ntr_TotalDataCount) < total_data)
-			total_data = SVAL(cli->inbuf,smb_ntr_TotalDataCount);
-		if (SVAL(cli->inbuf,smb_ntr_TotalParameterCount) < total_param)
-			total_param = SVAL(cli->inbuf,smb_ntr_TotalParameterCount);
-		
-		if (total_data <= *data_len && total_param <= *param_len)
-			break;
-	}
-	
-	return(True);
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
diff -pruwN samba-2.2.12/source/libsmb/credentials.c samba-2.2.12-livebox/libsmb/credentials.c
--- samba-2.2.12/source/libsmb/credentials.c	2004-08-12 20:24:26.000000000 +0200
+++ samba-2.2.12-livebox/libsmb/credentials.c	2010-03-31 11:45:59.000000000 +0200
@@ -26,11 +26,8 @@ represent a credential as a string
 ****************************************************************************/
 char *credstr(const uchar *cred)
 {
-	static fstring buf;
-	slprintf(buf, sizeof(buf) - 1, "%02X%02X%02X%02X%02X%02X%02X%02X",
-		cred[0], cred[1], cred[2], cred[3], 
-		cred[4], cred[5], cred[6], cred[7]);
-	return buf;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 
@@ -45,24 +42,8 @@ Output:
 void cred_session_key(const DOM_CHAL *clnt_chal, const DOM_CHAL *srv_chal, const uchar *pass,
 			uchar session_key[8])
 {
-	uint32 sum[2];
-	unsigned char sum2[8];
-
-	sum[0] = IVAL(clnt_chal->data, 0) + IVAL(srv_chal->data, 0);
-	sum[1] = IVAL(clnt_chal->data, 4) + IVAL(srv_chal->data, 4);
-
-	SIVAL(sum2,0,sum[0]);
-	SIVAL(sum2,4,sum[1]);
-
-	cred_hash1(session_key, sum2,pass);
-
-	/* debug output */
-	DEBUG(4,("cred_session_key\n"));
-
-	DEBUG(5,("	clnt_chal: %s\n", credstr(clnt_chal->data)));
-	DEBUG(5,("	srv_chal : %s\n", credstr(srv_chal->data)));
-	DEBUG(5,("	clnt+srv : %s\n", credstr(sum2)));
-	DEBUG(5,("	sess_key : %s\n", credstr(session_key)));
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 
@@ -80,21 +61,8 @@ Output:
 void cred_create(uchar session_key[8], DOM_CHAL *stor_cred, UTIME timestamp, 
 		 DOM_CHAL *cred)
 {
-	DOM_CHAL time_cred;
-
-	SIVAL(time_cred.data, 0, IVAL(stor_cred->data, 0) + timestamp.time);
-	SIVAL(time_cred.data, 4, IVAL(stor_cred->data, 4));
-
-	cred_hash2(cred->data, time_cred.data, session_key);
-
-	/* debug output*/
-	DEBUG(4,("cred_create\n"));
-
-	DEBUG(5,("	sess_key : %s\n", credstr(session_key)));
-	DEBUG(5,("	stor_cred: %s\n", credstr(stor_cred->data)));
-	DEBUG(5,("	timestamp: %x\n"    , timestamp.time));
-	DEBUG(5,("	timecred : %s\n", credstr(time_cred.data)));
-	DEBUG(5,("	calc_cred: %s\n", credstr(cred->data)));
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 
@@ -114,26 +82,8 @@ Output:
 int cred_assert(DOM_CHAL *cred, uchar session_key[8], DOM_CHAL *stored_cred,
 		UTIME timestamp)
 {
-	DOM_CHAL cred2;
-
-	cred_create(session_key, stored_cred, timestamp, &cred2);
-
-	/* debug output*/
-	DEBUG(4,("cred_assert\n"));
-
-	DEBUG(5,("	challenge : %s\n", credstr(cred->data)));
-	DEBUG(5,("	calculated: %s\n", credstr(cred2.data)));
-
-	if (memcmp(cred->data, cred2.data, 8) == 0)
-	{
-		DEBUG(5, ("credentials check ok\n"));
-		return True;
-	}
-	else
-	{
-		DEBUG(5, ("credentials check wrong\n"));
-		return False;
-	}
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 
@@ -143,30 +93,8 @@ int cred_assert(DOM_CHAL *cred, uchar se
 BOOL clnt_deal_with_creds(uchar sess_key[8],
 			  DOM_CRED *sto_clnt_cred, DOM_CRED *rcv_srv_cred)
 {
-	UTIME new_clnt_time;
-	uint32 new_cred;
-
-	DEBUG(5,("clnt_deal_with_creds: %d\n", __LINE__));
-
-	/* increment client time by one second */
-	new_clnt_time.time = sto_clnt_cred->timestamp.time + 1;
-
-	/* check that the received server credentials are valid */
-	if (!cred_assert(&rcv_srv_cred->challenge, sess_key,
-			 &sto_clnt_cred->challenge, new_clnt_time))
-	{
-		return False;
-	}
-
-	/* first 4 bytes of the new seed is old client 4 bytes + clnt time + 1 */
-	new_cred = IVAL(sto_clnt_cred->challenge.data, 0);
-	new_cred += new_clnt_time.time;
-
-	/* store new seed in client credentials */
-	SIVAL(sto_clnt_cred->challenge.data, 0, new_cred);
-
-	DEBUG(5,("	new clnt cred: %s\n", credstr(sto_clnt_cred->challenge.data)));
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 
@@ -177,40 +105,6 @@ BOOL deal_with_creds(uchar sess_key[8],
 		     DOM_CRED *sto_clnt_cred, 
 		     DOM_CRED *rcv_clnt_cred, DOM_CRED *rtn_srv_cred)
 {
-	UTIME new_clnt_time;
-	uint32 new_cred;
-
-	DEBUG(5,("deal_with_creds: %d\n", __LINE__));
-
-	/* check that the received client credentials are valid */
-	if (!cred_assert(&rcv_clnt_cred->challenge, sess_key,
-                    &sto_clnt_cred->challenge, rcv_clnt_cred->timestamp))
-	{
-		return False;
-	}
-
-	/* increment client time by one second */
-	new_clnt_time.time = rcv_clnt_cred->timestamp.time + 1;
-
-	/* first 4 bytes of the new seed is old client 4 bytes + clnt time + 1 */
-	new_cred = IVAL(sto_clnt_cred->challenge.data, 0);
-	new_cred += new_clnt_time.time;
-
-	DEBUG(5,("deal_with_creds: new_cred[0]=%x\n", new_cred));
-
-	/* doesn't matter that server time is 0 */
-	rtn_srv_cred->timestamp.time = 0;
-
-	DEBUG(5,("deal_with_creds: new_clnt_time=%x\n", new_clnt_time.time));
-
-	/* create return credentials for inclusion in the reply */
-	cred_create(sess_key, &sto_clnt_cred->challenge, new_clnt_time,
-	            &rtn_srv_cred->challenge);
-	
-	DEBUG(5,("deal_with_creds: clnt_cred=%s\n", credstr(sto_clnt_cred->challenge.data)));
-
-	/* store new seed in client credentials */
-	SIVAL(sto_clnt_cred->challenge.data, 0, new_cred);
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
diff -pruwN samba-2.2.12/source/libsmb/errormap.c samba-2.2.12-livebox/libsmb/errormap.c
--- samba-2.2.12/source/libsmb/errormap.c	2004-08-12 20:24:26.000000000 +0200
+++ samba-2.2.12-livebox/libsmb/errormap.c	2010-03-31 11:45:59.000000000 +0200
@@ -1428,22 +1428,8 @@ convert a NT status code to a dos class/
  *****************************************************************************/
 void ntstatus_to_dos(NTSTATUS ntstatus, uint8 *eclass, uint32 *ecode)
 {
-	int i;
-	if (NT_STATUS_IS_OK(ntstatus)) {
-		*eclass = 0;
-		*ecode = 0;
-		return;
-	}
-	for (i=0; NT_STATUS_V(ntstatus_to_dos_map[i].ntstatus); i++) {
-		if (NT_STATUS_V(ntstatus) == 
-		    NT_STATUS_V(ntstatus_to_dos_map[i].ntstatus)) {
-			*eclass = ntstatus_to_dos_map[i].dos_class;
-			*ecode = ntstatus_to_dos_map[i].dos_code;
-			return;
-		}
-	}
-	*eclass = ERRHRD;
-	*ecode = ERRgeneral;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 
diff -pruwN samba-2.2.12/source/libsmb/namecache.c samba-2.2.12-livebox/libsmb/namecache.c
--- samba-2.2.12/source/libsmb/namecache.c	2004-08-12 20:24:25.000000000 +0200
+++ samba-2.2.12-livebox/libsmb/namecache.c	2010-03-31 11:45:59.000000000 +0200
@@ -39,34 +39,8 @@ BOOL namecache_enable(void)
 	/* Check if we have been here before, or name caching disabled
            by setting the name cache timeout to zero. */ 
 
-	if (done_namecache_init)
-		return False;
-
-	done_namecache_init = True;
-
-	if (lp_name_cache_timeout() == 0) {
-		DEBUG(5, ("namecache_init: disabling netbios name cache\n"));
-		return False;
-	}
-
-	/* Open namecache tdb in read/write or readonly mode */
-
-	namecache_tdb = tdb_open_log(
-		lock_path("namecache.tdb"), 0,
-		TDB_DEFAULT, O_RDWR | O_CREAT, 0644);
-
-	if (!namecache_tdb) {
-		DEBUG(5, ("namecache_init: could not open %s\n",
-			  lock_path("namecache.tdb")));
-		return False;
-	}
-
-	DEBUG(5, ("namecache_init: enabling netbios namecache, timeout %d "
-		  "seconds\n", lp_name_cache_timeout()));
-
-	enable_namecache = True;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /* Return a key for a name and name type.  The caller must free
@@ -74,15 +48,8 @@ BOOL namecache_enable(void)
 
 static TDB_DATA namecache_key(const char *name, int name_type)
 {
-	TDB_DATA retval;
-	char *keystr;
-
-	asprintf(&keystr, "%s#%02X", strupper_static(name), name_type);
-
-	retval.dsize = strlen(keystr) + 1;
-	retval.dptr = keystr;
-
-	return retval;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /* Return a data value for an IP list.  The caller must free
@@ -91,27 +58,8 @@ static TDB_DATA namecache_key(const char
 static TDB_DATA namecache_value(struct in_addr *ip_list, int num_names, 
 				time_t expiry)
 {
-	TDB_DATA retval;
-	struct nc_value *value;
-	int size = sizeof(struct nc_value);
-
-	if (num_names > 0)
-		size += sizeof(struct in_addr) * (num_names-1);
-
-	value = (struct nc_value *)malloc(size);
-
-	memset(value, 0, size);
-
-	value->expiry = expiry;
-	value->count = num_names;
-
-	if (ip_list)
-		memcpy(value->ip_list, ip_list, sizeof(struct in_addr) * num_names);
-
-	retval.dptr = (char *)value;
-	retval.dsize = size;
-
-	return retval;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /* Store a name in the name cache */
@@ -119,39 +67,8 @@ static TDB_DATA namecache_value(struct i
 void namecache_store(const char *name, int name_type,
 		     int num_names, struct in_addr *ip_list)
 {
-	TDB_DATA key, value;
-	time_t expiry;
-	int i;
-
-	if (!enable_namecache)
-		return;
-
-	DEBUG(5, ("namecache_store: storing %d address%s for %s#%02x: ",
-		  num_names, num_names == 1 ? "": "es", name, name_type));
-
-	for (i = 0; i < num_names; i++) 
-		DEBUGADD(5, ("%s%s", inet_ntoa(ip_list[i]),
-			     i == (num_names - 1) ? "" : ", "));
-
-	DEBUGADD(5, ("\n"));
-
-	key = namecache_key(name, name_type);
-
-	/* Cache pdc location or dc lists for only a little while
-	   otherwise if we lock on to a bad DC we can potentially be
-	   out of action for the entire cache timeout time! */
-
-	if (name_type != 0x1b || name_type != 0x1c)
-		expiry = time(NULL) + 10;
-	else
-		expiry = time(NULL) + lp_name_cache_timeout();
-
-	value = namecache_value(ip_list, num_names, expiry);
-
-	tdb_store(namecache_tdb, key, value, TDB_REPLACE);
-
-	free(key.dptr);
-	free(value.dptr);
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /* Look up a name in the name cache.  Return a mallocated list of IP
@@ -250,16 +167,6 @@ done:
 
 void namecache_flush(void)
 {
-	int result;
-
-	if (!namecache_tdb)
-		return;
-
-	result = tdb_traverse(namecache_tdb, tdb_traverse_delete_fn, NULL);
-
-	if (result == -1)
-		DEBUG(5, ("namecache_flush: error deleting cache entries\n"));
-	else
-		DEBUG(5, ("namecache_flush: deleted %d cache entr%s\n", 
-			  result, result == 1 ? "y" : "ies"));
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
diff -pruwN samba-2.2.12/source/libsmb/namequery.c samba-2.2.12-livebox/libsmb/namequery.c
--- samba-2.2.12/source/libsmb/namequery.c	2004-08-12 20:24:25.000000000 +0200
+++ samba-2.2.12-livebox/libsmb/namequery.c	2010-03-31 11:45:59.000000000 +0200
@@ -47,25 +47,8 @@ static int generate_trn_id(void)
 
 static struct node_status *parse_node_status(char *p, int *num_names)
 {
-	struct node_status *ret;
-	int i;
-
-	*num_names = CVAL(p,0);
-
-	if (*num_names == 0) return NULL;
-
-	ret = (struct node_status *)malloc(sizeof(struct node_status)* (*num_names));
-	if (!ret) return NULL;
-
-	p++;
-	for (i=0;i< *num_names;i++) {
-		StrnCpy(ret[i].name,p,15);
-		trim_string(ret[i].name,NULL," ");
-		ret[i].type = CVAL(p,15);
-		ret[i].flags = p[16];
-		p += 18;
-	}
-	return ret;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /****************************************************************************
@@ -76,82 +59,8 @@ static struct node_status *parse_node_st
 struct node_status *node_status_query(int fd,struct nmb_name *name,
 				      struct in_addr to_ip, int *num_names)
 {
-	BOOL found=False;
-	int retries = 2;
-	int retry_time = 2000;
-	struct timeval tval;
-	struct packet_struct p;
-	struct packet_struct *p2;
-	struct nmb_packet *nmb = &p.packet.nmb;
-	struct node_status *ret;
-
-	ZERO_STRUCT(p);
-
-	nmb->header.name_trn_id = generate_trn_id();
-	nmb->header.opcode = 0;
-	nmb->header.response = False;
-	nmb->header.nm_flags.bcast = False;
-	nmb->header.nm_flags.recursion_available = False;
-	nmb->header.nm_flags.recursion_desired = False;
-	nmb->header.nm_flags.trunc = False;
-	nmb->header.nm_flags.authoritative = False;
-	nmb->header.rcode = 0;
-	nmb->header.qdcount = 1;
-	nmb->header.ancount = 0;
-	nmb->header.nscount = 0;
-	nmb->header.arcount = 0;
-	nmb->question.question_name = *name;
-	nmb->question.question_type = 0x21;
-	nmb->question.question_class = 0x1;
-
-	p.ip = to_ip;
-	p.port = NMB_PORT;
-	p.fd = fd;
-	p.timestamp = time(NULL);
-	p.packet_type = NMB_PACKET;
-	
-	GetTimeOfDay(&tval);
-  
-	if (!send_packet(&p)) 
-		return NULL;
-
-	retries--;
-
-	while (1) {
-		struct timeval tval2;
-		GetTimeOfDay(&tval2);
-		if (TvalDiff(&tval,&tval2) > retry_time) {
-			if (!retries)
-				break;
-			if (!found && !send_packet(&p))
-				return NULL;
-			GetTimeOfDay(&tval);
-			retries--;
-		}
-
-		if ((p2=receive_nmb_packet(fd,90,nmb->header.name_trn_id))) {     
-			struct nmb_packet *nmb2 = &p2->packet.nmb;
-			debug_nmb_packet(p2);
-			
-			if (nmb2->header.opcode != 0 ||
-			    nmb2->header.nm_flags.bcast ||
-			    nmb2->header.rcode ||
-			    !nmb2->header.ancount ||
-			    nmb2->answers->rr_type != 0x21) {
-				/* XXXX what do we do with this? could be a
-				   redirect, but we'll discard it for the
-				   moment */
-				free_packet(p2);
-				continue;
-			}
-
-			ret = parse_node_status(&nmb2->answers->rdata[0], num_names);
-			free_packet(p2);
-			return ret;
-		}
-	}
-	
-	return NULL;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 
@@ -163,35 +72,8 @@ return the matched name in *name
 
 BOOL name_status_find(const char *q_name, int q_type, int type, struct in_addr to_ip, char *name)
 {
-	struct node_status *status;
-	struct nmb_name nname;
-	int count, i;
-	int sock;
-
-	sock = open_socket_in(SOCK_DGRAM, 0, 3, interpret_addr(lp_socket_address()), True);
-	if (sock == -1)
-		return False;
-
-	/* W2K PDC's seem not to respond to '*'#0. JRA */
-	make_nmb_name(&nname, q_name, q_type);
-	status = node_status_query(sock, &nname, to_ip, &count);
-	close(sock);
-	if (!status)
-		return False;
-
-	for (i=0;i<count;i++) {
-		if (status[i].type == type)
-			break;
-	}
-	if (i == count)
-		return False;
-
-	StrnCpy(name, status[i].name, 15);
-
-	dos_to_unix(name);
-
-	SAFE_FREE(status);
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /****************************************************************************
@@ -202,87 +84,8 @@ BOOL name_register(int fd, const char *n
 		   BOOL bcast, 
 		   struct in_addr to_ip, int *count)
 {
-  int retries = 3;
-  struct timeval tval;
-  struct packet_struct p;
-  struct packet_struct *p2;
-  struct nmb_packet *nmb = &p.packet.nmb;
-  struct in_addr register_ip;
-
-  DEBUG(4, ("name_register: %s as %s on %s\n", name, inet_ntoa(name_ip), inet_ntoa(to_ip)));
-
-  register_ip.s_addr = name_ip.s_addr;  /* Fix this ... */
-  
-  memset((char *)&p, '\0', sizeof(p));
-
-  *count = 0;
-
-  nmb->header.name_trn_id = generate_trn_id();
-  nmb->header.opcode = opcode;
-  nmb->header.response = False;
-  nmb->header.nm_flags.bcast = False;
-  nmb->header.nm_flags.recursion_available = False;
-  nmb->header.nm_flags.recursion_desired = True;  /* ? */
-  nmb->header.nm_flags.trunc = False;
-  nmb->header.nm_flags.authoritative = True;
-
-  nmb->header.qdcount = 1;
-  nmb->header.ancount = 0;
-  nmb->header.nscount = 0;
-  nmb->header.arcount = 1;
-
-  make_nmb_name(&nmb->question.question_name, name, name_type);
-
-  nmb->question.question_type = 0x20;
-  nmb->question.question_class = 0x1;
-
-  /* Now, create the additional stuff for a registration request */
-
-  if ((nmb->additional = (struct res_rec *)malloc(sizeof(struct res_rec))) == NULL) {
-
-    DEBUG(0, ("name_register: malloc fail for additional record.\n"));
-    return False;
-
-  }
-
-  memset((char *)nmb->additional, '\0', sizeof(struct res_rec));
-
-  nmb->additional->rr_name  = nmb->question.question_name;
-  nmb->additional->rr_type  = RR_TYPE_NB;
-  nmb->additional->rr_class = RR_CLASS_IN;
-
-  /* See RFC 1002, sections 5.1.1.1, 5.1.1.2 and 5.1.1.3 */
-  if (nmb->header.nm_flags.bcast)
-    nmb->additional->ttl = PERMANENT_TTL;
-  else
-    nmb->additional->ttl = lp_max_ttl();
-
-  nmb->additional->rdlength = 6;
-
-  nmb->additional->rdata[0] = NB_MFLAG & 0xFF;
-
-  /* Set the address for the name we are registering. */
-  putip(&nmb->additional->rdata[2], &register_ip);
-
-  p.ip = to_ip;
-  p.port = NMB_PORT;
-  p.fd = fd;
-  p.timestamp = time(NULL);
-  p.packet_type = NMB_PACKET;
-
-  GetTimeOfDay(&tval);
-
-  if (!send_packet(&p))
-    return False;
-
-  retries--;
-
-  if ((p2 = receive_nmb_packet(fd, 10, nmb->header.name_trn_id))) {
-    debug_nmb_packet(p2);
-    SAFE_FREE(p2);  /* No memory leaks ... */
-  }
-
-  return True;
+DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /****************************************************************************
@@ -484,84 +287,8 @@ FILE *startlmhosts(const char *fname)
 
 BOOL getlmhostsent( FILE *fp, pstring name, int *name_type, struct in_addr *ipaddr)
 {
-  pstring line;
-
-  while(!feof(fp) && !ferror(fp)) {
-    pstring ip,flags,extra;
-    const char *ptr;
-    char *ptr1;
-    int count = 0;
-
-    *name_type = -1;
-
-    if (!fgets_slash(line,sizeof(pstring),fp))
-      continue;
-
-    if (*line == '#')
-      continue;
-
-    pstrcpy(ip,"");
-    pstrcpy(name,"");
-    pstrcpy(flags,"");
-
-    ptr = line;
-
-    if (next_token(&ptr,ip   ,NULL,sizeof(ip)))
-      ++count;
-    if (next_token(&ptr,name ,NULL, sizeof(pstring)))
-      ++count;
-    if (next_token(&ptr,flags,NULL, sizeof(flags)))
-      ++count;
-    if (next_token(&ptr,extra,NULL, sizeof(extra)))
-      ++count;
-
-    if (count <= 0)
-      continue;
-
-    if (count > 0 && count < 2)
-    {
-      DEBUG(0,("getlmhostsent: Ill formed hosts line [%s]\n",line));
-      continue;
-    }
-
-    if (count >= 4)
-    {
-      DEBUG(0,("getlmhostsent: too many columns in lmhosts file (obsolete syntax)\n"));
-      continue;
-    }
-
-    DEBUG(4, ("getlmhostsent: lmhost entry: %s %s %s\n", ip, name, flags));
-
-    if (strchr(flags,'G') || strchr(flags,'S'))
-    {
-      DEBUG(0,("getlmhostsent: group flag in lmhosts ignored (obsolete)\n"));
-      continue;
-    }
-
-    *ipaddr = *interpret_addr2(ip);
-
-    /* Extra feature. If the name ends in '#XX', where XX is a hex number,
-       then only add that name type. */
-    if((ptr1 = strchr(name, '#')) != NULL)
-    {
-      char *endptr;
-
-      ptr1++;
-      *name_type = (int)strtol(ptr1, &endptr, 16);
-
-      if(!*ptr1 || (endptr == ptr1))
-      {
-        DEBUG(0,("getlmhostsent: invalid name %s containing '#'.\n", name));
-        continue;
-      }
-
-      *(--ptr1) = '\0'; /* Truncate at the '#' */
-    }
-
-    return True;
-  }
-
-  return False;
+  DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /********************************************************
@@ -570,7 +297,8 @@ BOOL getlmhostsent( FILE *fp, pstring na
 
 void endlmhosts(FILE *fp)
 {
-  fclose(fp);
+ DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 BOOL name_register_wins(const char *name, int name_type)
@@ -1008,7 +736,8 @@ BOOL resolve_name(const char *name, stru
 BOOL resolve_name_2(const char *name, struct in_addr **return_ip, int *count, int name_type)
 {
 
-	return internal_resolve_name(name, name_type, return_ip, count);
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 
 } 
 
@@ -1020,40 +749,8 @@ BOOL resolve_name_2(const char *name, st
 BOOL resolve_srv_name(const char* srv_name, fstring dest_host,
                                 struct in_addr *ip)
 {
-        BOOL ret;
-        const char *sv_name = srv_name;
-
-        DEBUG(10,("resolve_srv_name: %s\n", srv_name));
-
-        if (srv_name == NULL || strequal("\\\\.", srv_name))
-        {
-                extern pstring global_myname;
-                fstrcpy(dest_host, global_myname);
-                ip = interpret_addr2("127.0.0.1");
-                return True;
-        }
-
-        if (strnequal("\\\\", srv_name, 2))
-        {
-                sv_name = &srv_name[2];
-        }
-
-        fstrcpy(dest_host, sv_name);
-        /* treat the '*' name specially - it is a magic name for the PDC */
-        if (strcmp(dest_host,"*") == 0) {
-                extern pstring global_myname;
-                ret = resolve_name(lp_workgroup(), ip, 0x1B);
-                lookup_dc_name(global_myname, lp_workgroup(), ip, dest_host);
-        } else {
-                ret = resolve_name(dest_host, ip, 0x20);
-        }
-        
-        if (is_ipaddress(dest_host))
-        {
-                fstrcpy(dest_host, "*SMBSERVER");
-        }
-        
-        return ret;
+DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 
@@ -1063,22 +760,8 @@ BOOL resolve_srv_name(const char* srv_na
 
 BOOL find_master_ip(char *group, struct in_addr *master_ip)
 {
-	struct in_addr *ip_list = NULL;
-	int count = 0;
-
-	if (internal_resolve_name(group, 0x1D, &ip_list, &count)) {
-		*master_ip = ip_list[0];
-		SAFE_FREE(ip_list);
-		return True;
-	}
-	if(internal_resolve_name(group, 0x1B, &ip_list, &count)) {
-		*master_ip = ip_list[0];
-		SAFE_FREE(ip_list);
-		return True;
-	}
-
-	SAFE_FREE(ip_list);
-	return False;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /********************************************************
@@ -1088,203 +771,8 @@ BOOL find_master_ip(char *group, struct
 BOOL lookup_dc_name(const char *srcname, const char *domain, 
 		    struct in_addr *dc_ip, char *ret_name)
 {
-#if !defined(I_HATE_WINDOWS_REPLY_CODE)
-
-	fstring dc_name;
-	BOOL ret;
-
-	/*
-	 * Due to the fact win WinNT *sucks* we must do a node status
-	 * query here... JRA.
-	 */
-
-	*dc_name = '\0';
-
-	ret = name_status_find(domain, 0x1c, 0x20, *dc_ip, dc_name);
-
-	if(ret && *dc_name) {
-		fstrcpy(ret_name, dc_name);
-		return True;
-	}
-
-	return False;
-
-#else /* defined(I_HATE_WINDOWS_REPLY_CODE) */
-
-JRA - This code is broken with BDC rollover - we need to do a full
-NT GETDC call, UNICODE, NT domain SID and uncle tom cobbley and all...
-
-	int retries = 3;
-	int retry_time = 2000;
-	struct timeval tval;
-	struct packet_struct p;
-	struct dgram_packet *dgram = &p.packet.dgram;
-	char *ptr,*p2;
-	char tmp[4];
-	int len;
-	struct sockaddr_in sock_name;
-	int sock_len = sizeof(sock_name);
-	const char *mailslot = NET_LOGON_MAILSLOT;
-	char *mailslot_name;
-	char buffer[1024];
-	char *bufp;
-	int dgm_id = generate_trn_id();
-	int sock = open_socket_in(SOCK_DGRAM, 0, 3, interpret_addr(lp_socket_address()), True );
-	
-	if(sock == -1)
-		return False;
-	
-	/* Find out the transient UDP port we have been allocated. */
-	if(getsockname(sock, (struct sockaddr *)&sock_name, &sock_len)<0) {
-		DEBUG(0,("lookup_dc_name: Failed to get local UDP port. Error was %s\n",
-			 strerror(errno)));
-		close(sock);
-		return False;
-	}
-
-	/*
-	 * Create the request data.
-	 */
-
-	memset(buffer,'\0',sizeof(buffer));
-	bufp = buffer;
-	SSVAL(bufp,0,QUERYFORPDC);
-	bufp += 2;
-	fstrcpy(bufp,srcname);
-	bufp += (strlen(bufp) + 1);
-	slprintf(bufp, sizeof(fstring)-1, "\\MAILSLOT\\NET\\GETDC%d", dgm_id);
-	mailslot_name = bufp;
-	bufp += (strlen(bufp) + 1);
-	bufp = ALIGN2(bufp, buffer);
-	bufp += dos_PutUniCode(bufp, srcname, sizeof(buffer) - (bufp - buffer) - 1, True);
-	SIVAL(bufp,0,1);
-	SSVAL(bufp,4,0xFFFF); 
-	SSVAL(bufp,6,0xFFFF); 
-	bufp += 8;
-	len = PTR_DIFF(bufp,buffer);
-
-	memset((char *)&p,'\0',sizeof(p));
-
-	/* DIRECT GROUP or UNIQUE datagram. */
-	dgram->header.msg_type = 0x10;
-	dgram->header.flags.node_type = M_NODE;
-	dgram->header.flags.first = True;
-	dgram->header.flags.more = False;
-	dgram->header.dgm_id = dgm_id;
-	dgram->header.source_ip = *iface_ip(*pdc_ip);
-	dgram->header.source_port = ntohs(sock_name.sin_port);
-	dgram->header.dgm_length = 0; /* Let build_dgram() handle this. */
-	dgram->header.packet_offset = 0;
-	
-	make_nmb_name(&dgram->source_name,srcname,0);
-	make_nmb_name(&dgram->dest_name,domain,0x1C);
-	
-	ptr = &dgram->data[0];
-	
-	/* Setup the smb part. */
-	ptr -= 4; /* XXX Ugliness because of handling of tcp SMB length. */
-	memcpy(tmp,ptr,4);
-	set_message(ptr,17,17 + len,True);
-	memcpy(ptr,tmp,4);
-
-	CVAL(ptr,smb_com) = SMBtrans;
-	SSVAL(ptr,smb_vwv1,len);
-	SSVAL(ptr,smb_vwv11,len);
-	SSVAL(ptr,smb_vwv12,70 + strlen(mailslot));
-	SSVAL(ptr,smb_vwv13,3);
-	SSVAL(ptr,smb_vwv14,1);
-	SSVAL(ptr,smb_vwv15,1);
-	SSVAL(ptr,smb_vwv16,2);
-	p2 = smb_buf(ptr);
-	pstrcpy(p2,mailslot);
-	p2 = skip_string(p2,1);
-	
-	memcpy(p2,buffer,len);
-	p2 += len;
-	
-	dgram->datasize = PTR_DIFF(p2,ptr+4); /* +4 for tcp length. */
-	
-	p.ip = *pdc_ip;
-	p.port = DGRAM_PORT;
-	p.fd = sock;
-	p.timestamp = time(NULL);
-	p.packet_type = DGRAM_PACKET;
-	
-	GetTimeOfDay(&tval);
-	
-	if (!send_packet(&p)) {
-		DEBUG(0,("lookup_dc_name: send_packet failed.\n"));
-		close(sock);
-		return False;
-	}
-	
-	retries--;
-	
-	while (1) {
-		struct timeval tval2;
-		struct packet_struct *p_ret;
-		
-		GetTimeOfDay(&tval2);
-		if (TvalDiff(&tval,&tval2) > retry_time) {
-			if (!retries)
-				break;
-			if (!send_packet(&p)) {
-				DEBUG(0,("lookup_dc_name: send_packet failed.\n"));
-				close(sock);
-				return False;
-			}
-			GetTimeOfDay(&tval);
-			retries--;
-		}
-
-		if ((p_ret = receive_dgram_packet(sock,90,mailslot_name))) {
-			struct dgram_packet *dgram2 = &p_ret->packet.dgram;
-			char *buf;
-			char *buf2;
-
-			buf = &dgram2->data[0];
-			buf -= 4;
-
-			if (CVAL(buf,smb_com) != SMBtrans) {
-				DEBUG(0,("lookup_dc_name: datagram type %u != SMBtrans(%u)\n", (unsigned int)
-					 CVAL(buf,smb_com), (unsigned int)SMBtrans ));
-				free_packet(p_ret);
-				continue;
-			}
-			
-			len = SVAL(buf,smb_vwv11);
-			buf2 = smb_base(buf) + SVAL(buf,smb_vwv12);
-			
-			if (len <= 0) {
-				DEBUG(0,("lookup_dc_name: datagram len < 0 (%d)\n", len ));
-				free_packet(p_ret);
-				continue;
-			}
-
-			DEBUG(4,("lookup_dc_name: datagram reply from %s to %s IP %s for %s of type %d len=%d\n",
-				 nmb_namestr(&dgram2->source_name),nmb_namestr(&dgram2->dest_name),
-				 inet_ntoa(p_ret->ip), smb_buf(buf),SVAL(buf2,0),len));
-
-			if(SVAL(buf2,0) != QUERYFORPDC_R) {
-				DEBUG(0,("lookup_dc_name: datagram type (%u) != QUERYFORPDC_R(%u)\n",
-					 (unsigned int)SVAL(buf,0), (unsigned int)QUERYFORPDC_R ));
-				free_packet(p_ret);
-				continue;
-			}
-
-			buf2 += 2;
-			/* Note this is safe as it is a bounded strcpy. */
-			fstrcpy(ret_name, buf2);
-			ret_name[sizeof(fstring)-1] = '\0';
-			close(sock);
-			free_packet(p_ret);
-			return True;
-		}
-	}
-	
-	close(sock);
-	return False;
-#endif /* defined(I_HATE_WINDOWS_REPLY_CODE) */
+DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 
@@ -1294,68 +782,8 @@ NT GETDC call, UNICODE, NT domain SID an
 
 BOOL get_dc_list(BOOL pdc_only, const char *group, struct in_addr **ip_list, int *count)
 {
-	int name_type = pdc_only ? 0x1B : 0x1C;
-
-	/*
-	 * If it's our domain then
-	 * use the 'password server' parameter.
-	 */
-
-	if (strequal(group, lp_workgroup())) {
-		const char *p;
-		char *pserver = lp_passwordserver();
-		fstring name;
-		int num_addresses = 0;
-		struct in_addr *return_iplist = NULL;
-
-		if (! *pserver)
-			return internal_resolve_name(group, name_type, ip_list, count);
-
-		p = pserver;
-		while (next_token(&p,name,LIST_SEP,sizeof(name))) {
-			if (strequal(name, "*")) {
-				/*
-				 * Use 1C followed by 1B. This shouldn't work but with
-				 * broken WINS servers it might. JRA.
-				 */
-				if (!pdc_only && internal_resolve_name(group, 0x1C, ip_list, count))
-					return True;
-				return internal_resolve_name(group, 0x1B, ip_list, count);
-			}
-			num_addresses++;
-		}
-		if (num_addresses == 0)
-			return internal_resolve_name(group, name_type, ip_list, count);
-
-		return_iplist = (struct in_addr *)malloc(num_addresses * sizeof(struct in_addr));
-		if(return_iplist == NULL) {
-			DEBUG(3,("get_dc_list: malloc fail !\n"));
-			return False;
-		}
-		p = pserver;
-		*count = 0;
-		while (next_token(&p,name,LIST_SEP,sizeof(name))) {
-			struct in_addr *more_ip, *tmp;
-			int count_more;
-			if (resolve_name_2( name, &more_ip, &count_more, 0x20) == False)
-				continue;
-			tmp = (struct in_addr *)realloc(return_iplist,(num_addresses + count_more) * sizeof(struct in_addr));
-			if (return_iplist == NULL) {
-				DEBUG(3, ("realloc failed with %d addresses\n", num_addresses + count_more));
-				SAFE_FREE(return_iplist);
-				SAFE_FREE(more_ip);
-				return False;
-			}
-			return_iplist = tmp;
-			memmove(&return_iplist[(*count)], more_ip, count_more * sizeof(struct in_addr));
-			SAFE_FREE(more_ip); /* Done with this ... */
-			*count += count_more;
-			num_addresses += count_more - 1;
-		}
-		*ip_list = return_iplist;
-		return (*count != 0);
-	} else
-		return internal_resolve_name(group, name_type, ip_list, count);
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /********************************************************
@@ -1364,5 +792,6 @@ BOOL get_dc_list(BOOL pdc_only, const ch
 
 BOOL get_lmb_list(struct in_addr **ip_list, int *count)
 {
-	return internal_resolve_name( MSBROWSE, 0x1, ip_list, count);
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
diff -pruwN samba-2.2.12/source/libsmb/nterr.c samba-2.2.12-livebox/libsmb/nterr.c
--- samba-2.2.12/source/libsmb/nterr.c	2004-08-12 20:24:26.000000000 +0200
+++ samba-2.2.12-livebox/libsmb/nterr.c	2010-03-31 11:45:59.000000000 +0200
@@ -563,7 +563,8 @@ const char *get_nt_error_msg(NTSTATUS nt
 
 const char *nt_errstr(NTSTATUS nt_code)
 {
-	return get_nt_error_msg(nt_code);
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*****************************************************************************
@@ -572,18 +573,6 @@ const char *nt_errstr(NTSTATUS nt_code)
 
 const char *get_nt_error_c_code(NTSTATUS nt_code)
 {
-        static pstring out;
-        int idx = 0;
-
-	while (nt_errs[idx].nt_errstr != NULL) {
-		if (NT_STATUS_V(nt_errs[idx].nt_errcode) == 
-                    NT_STATUS_V(nt_code)) {
-                        return nt_errs[idx].nt_errstr;
-		}
-		idx++;
-	}
-
-	slprintf(out, sizeof(out), "NT_STATUS(0x%08x)", NT_STATUS_V(nt_code));
-
-        return out;
+DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
diff -pruwN samba-2.2.12/source/libsmb/pwd_cache.c samba-2.2.12-livebox/libsmb/pwd_cache.c
--- samba-2.2.12/source/libsmb/pwd_cache.c	2004-08-12 20:24:25.000000000 +0200
+++ samba-2.2.12-livebox/libsmb/pwd_cache.c	2010-03-31 11:45:59.000000000 +0200
@@ -27,15 +27,8 @@
 
 void pwd_init(struct pwd_info *pwd)
 {
-	memset((char *)pwd->password  , '\0', sizeof(pwd->password  ));
-	memset((char *)pwd->smb_lm_pwd, '\0', sizeof(pwd->smb_lm_pwd));
-	memset((char *)pwd->smb_nt_pwd, '\0', sizeof(pwd->smb_nt_pwd));
-	memset((char *)pwd->smb_lm_owf, '\0', sizeof(pwd->smb_lm_owf));
-	memset((char *)pwd->smb_nt_owf, '\0', sizeof(pwd->smb_nt_owf));
-
-	pwd->null_pwd  = True; /* safest option... */
-	pwd->cleartext = False;
-	pwd->crypted   = False;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /****************************************************************************
@@ -44,7 +37,8 @@ void pwd_init(struct pwd_info *pwd)
 
 BOOL pwd_is_nullpwd(const struct pwd_info *pwd)
 {
-        return pwd->null_pwd;
+DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /****************************************************************************
@@ -53,31 +47,8 @@ BOOL pwd_is_nullpwd(const struct pwd_inf
 
 BOOL pwd_compare(struct pwd_info *pwd1, struct pwd_info *pwd2)
 {
-	if (pwd1->cleartext && pwd2->cleartext) {
-		if (strequal(pwd1->password, pwd2->password))
-			return True;
-	}
-	if (pwd1->null_pwd && pwd2->null_pwd)
-		return True;
-
-	if (!pwd1->null_pwd  && !pwd2->null_pwd &&
-	    !pwd1->cleartext && !pwd2->cleartext) {
-#ifdef DEBUG_PASSWORD
-		DEBUG(100,("pwd compare: nt#\n"));
-		dump_data(100, pwd1->smb_nt_pwd, 16);
-		dump_data(100, pwd2->smb_nt_pwd, 16);
-#endif
-		if (memcmp(pwd1->smb_nt_pwd, pwd2->smb_nt_pwd, 16) == 0)
-			return True;
-#ifdef DEBUG_PASSWORD
-		DEBUG(100,("pwd compare: lm#\n"));
-		dump_data(100, pwd1->smb_lm_pwd, 16);
-		dump_data(100, pwd2->smb_lm_pwd, 16);
-#endif
-		if (memcmp(pwd1->smb_lm_pwd, pwd2->smb_lm_pwd, 16) == 0)
-			return True;
-	}
-	return False;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /****************************************************************************
@@ -86,29 +57,8 @@ BOOL pwd_compare(struct pwd_info *pwd1,
 
 void pwd_read(struct pwd_info *pwd, char *passwd_report, BOOL do_encrypt)
 {
-	/* grab a password */
-	char *user_pass;
-
-	pwd_init(pwd);
-
-	user_pass = (char*)getpass(passwd_report);
-
-	/*
-	 * Do not assume that an empty string is a NULL password.
-	 * If you do this will break the session key generation for
-	 * and account with an emtpy password.  If you wish to use
-	 * a NULL password, use the -N option to smbclient and rpcclient
-	 * --jerry
-	 */
-#if 0
-	if (user_pass == NULL || user_pass[0] == 0)
-		pwd_set_nullpwd(pwd);
-	else if (do_encrypt)
-#endif
-	if (do_encrypt)
-		pwd_make_lm_nt_16(pwd, user_pass);
-	else
-		pwd_set_cleartext(pwd, user_pass);
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /****************************************************************************
@@ -117,11 +67,8 @@ void pwd_read(struct pwd_info *pwd, char
 
 void pwd_set_nullpwd(struct pwd_info *pwd)
 {
-	pwd_init(pwd);
-
-	pwd->cleartext = False;
-	pwd->null_pwd  = True;
-	pwd->crypted   = False;
+DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /****************************************************************************
@@ -130,12 +77,8 @@ void pwd_set_nullpwd(struct pwd_info *pw
 
 void pwd_set_cleartext(struct pwd_info *pwd, const char *clr)
 {
-	pwd_init(pwd);
-	fstrcpy(pwd->password, clr);
-	unix_to_dos(pwd->password);
-	pwd->cleartext = True;
-	pwd->null_pwd  = False;
-	pwd->crypted   = False;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /****************************************************************************
@@ -144,12 +87,8 @@ void pwd_set_cleartext(struct pwd_info *
 
 void pwd_get_cleartext(struct pwd_info *pwd, char *clr)
 {
-	if (pwd->cleartext) {
-		fstrcpy(clr, pwd->password);
-		dos_to_unix(clr);
-	} else {
-		clr[0] = 0;
-	}
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /****************************************************************************
@@ -158,21 +97,8 @@ void pwd_get_cleartext(struct pwd_info *
 
 void pwd_set_lm_nt_16(struct pwd_info *pwd, uchar lm_pwd[16], uchar nt_pwd[16])
 {
-	pwd_init(pwd);
-
-	if (lm_pwd)
-		memcpy(pwd->smb_lm_pwd, lm_pwd, 16);
-	else
-		memset((char *)pwd->smb_lm_pwd, '\0', 16);
-
-	if (nt_pwd)
-		memcpy(pwd->smb_nt_pwd, nt_pwd, 16);
-	else
-		memset((char *)pwd->smb_nt_pwd, '\0', 16);
-
-	pwd->null_pwd  = False;
-	pwd->cleartext = False;
-	pwd->crypted   = False;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /****************************************************************************
@@ -181,10 +107,8 @@ void pwd_set_lm_nt_16(struct pwd_info *p
 
 void pwd_get_lm_nt_16(struct pwd_info *pwd, uchar lm_pwd[16], uchar nt_pwd[16])
 {
-	if (lm_pwd != NULL)
-		memcpy(lm_pwd, pwd->smb_lm_pwd, 16);
-	if (nt_pwd != NULL)
-		memcpy(nt_pwd, pwd->smb_nt_pwd, 16);
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /****************************************************************************
@@ -193,17 +117,8 @@ void pwd_get_lm_nt_16(struct pwd_info *p
 
 void pwd_make_lm_nt_16(struct pwd_info *pwd, char *clr)
 {
-	pstring dos_passwd;
-
-	pwd_init(pwd);
-
-	pstrcpy(dos_passwd, clr);
-	unix_to_dos(dos_passwd);
-
-	nt_lm_owf_gen(dos_passwd, pwd->smb_nt_pwd, pwd->smb_lm_pwd);
-	pwd->null_pwd  = False;
-	pwd->cleartext = False;
-	pwd->crypted = False;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /****************************************************************************
@@ -212,31 +127,8 @@ void pwd_make_lm_nt_16(struct pwd_info *
 
 void pwd_make_lm_nt_owf(struct pwd_info *pwd, uchar cryptkey[8])
 {
-
-#ifdef DEBUG_PASSWORD
-	DEBUG(100,("client cryptkey: "));
-	dump_data(100, (char *)cryptkey, 8);
-#endif
-
-	SMBOWFencrypt(pwd->smb_nt_pwd, cryptkey, pwd->smb_nt_owf);
-
-#ifdef DEBUG_PASSWORD
-	DEBUG(100,("nt_owf_passwd: "));
-	dump_data(100, (char *)pwd->smb_nt_owf, sizeof(pwd->smb_nt_owf));
-	DEBUG(100,("nt_sess_pwd: "));
-	dump_data(100, (char *)pwd->smb_nt_pwd, sizeof(pwd->smb_nt_pwd));
-#endif
-
-	SMBOWFencrypt(pwd->smb_lm_pwd, cryptkey, pwd->smb_lm_owf);
-
-#ifdef DEBUG_PASSWORD
-	DEBUG(100,("lm_owf_passwd: "));
-	dump_data(100, (char *)pwd->smb_lm_owf, sizeof(pwd->smb_lm_owf));
-	DEBUG(100,("lm_sess_pwd: "));
-	dump_data(100, (char *)pwd->smb_lm_pwd, sizeof(pwd->smb_lm_pwd));
-#endif
-
-	pwd->crypted = True;
+DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /****************************************************************************
@@ -245,8 +137,6 @@ void pwd_make_lm_nt_owf(struct pwd_info
 
 void pwd_get_lm_nt_owf(struct pwd_info *pwd, uchar lm_owf[24], uchar nt_owf[24])
 {
-	if (lm_owf != NULL)
-		memcpy(lm_owf, pwd->smb_lm_owf, 24);
-	if (nt_owf != NULL)
-		memcpy(nt_owf, pwd->smb_nt_owf, 24);
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
diff -pruwN samba-2.2.12/source/libsmb/smbdes.c samba-2.2.12-livebox/libsmb/smbdes.c
--- samba-2.2.12/source/libsmb/smbdes.c	2004-08-12 20:24:25.000000000 +0200
+++ samba-2.2.12-livebox/libsmb/smbdes.c	2010-03-31 11:45:59.000000000 +0200
@@ -149,252 +149,93 @@ static uchar sbox[8][4][16] = {
 
 static void permute(char *out, char *in, uchar *p, int n)
 {
-	int i;
-	for (i=0;i<n;i++)
-		out[i] = in[p[i]-1];
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 static void lshift(char *d, int count, int n)
 {
-	char out[64];
-	int i;
-	for (i=0;i<n;i++)
-		out[i] = d[(i+count)%n];
-	for (i=0;i<n;i++)
-		d[i] = out[i];
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 static void concat(char *out, char *in1, char *in2, int l1, int l2)
 {
-	while (l1--)
-		*out++ = *in1++;
-	while (l2--)
-		*out++ = *in2++;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 static void xor(char *out, char *in1, char *in2, int n)
 {
-	int i;
-	for (i=0;i<n;i++)
-		out[i] = in1[i] ^ in2[i];
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 static void dohash(char *out, char *in, char *key, int forw)
 {
-	int i, j, k;
-	char pk1[56];
-	char c[28];
-	char d[28];
-	char cd[56];
-	char ki[16][48];
-	char pd1[64];
-	char l[32], r[32];
-	char rl[64];
-
-	permute(pk1, key, perm1, 56);
-
-	for (i=0;i<28;i++)
-		c[i] = pk1[i];
-	for (i=0;i<28;i++)
-		d[i] = pk1[i+28];
-
-	for (i=0;i<16;i++) {
-		lshift(c, sc[i], 28);
-		lshift(d, sc[i], 28);
-
-		concat(cd, c, d, 28, 28); 
-		permute(ki[i], cd, perm2, 48); 
-	}
-
-	permute(pd1, in, perm3, 64);
-
-	for (j=0;j<32;j++) {
-		l[j] = pd1[j];
-		r[j] = pd1[j+32];
-	}
-
-	for (i=0;i<16;i++) {
-		char er[48];
-		char erk[48];
-		char b[8][6];
-		char cb[32];
-		char pcb[32];
-		char r2[32];
-
-		permute(er, r, perm4, 48);
-
-		xor(erk, er, ki[forw ? i : 15 - i], 48);
-
-		for (j=0;j<8;j++)
-			for (k=0;k<6;k++)
-				b[j][k] = erk[j*6 + k];
-
-		for (j=0;j<8;j++) {
-			int m, n;
-			m = (b[j][0]<<1) | b[j][5];
-
-			n = (b[j][1]<<3) | (b[j][2]<<2) | (b[j][3]<<1) | b[j][4]; 
-
-			for (k=0;k<4;k++) 
-				b[j][k] = (sbox[j][m][n] & (1<<(3-k)))?1:0; 
-		}
-
-		for (j=0;j<8;j++)
-			for (k=0;k<4;k++)
-				cb[j*4+k] = b[j][k];
-		permute(pcb, cb, perm5, 32);
-
-		xor(r2, l, pcb, 32);
-
-		for (j=0;j<32;j++)
-			l[j] = r[j];
-
-		for (j=0;j<32;j++)
-			r[j] = r2[j];
-	}
-
-	concat(rl, r, l, 32, 32);
-
-	permute(out, rl, perm6, 64);
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 static void str_to_key(const unsigned char *str,unsigned char *key)
 {
-	int i;
-
-	key[0] = str[0]>>1;
-	key[1] = ((str[0]&0x01)<<6) | (str[1]>>2);
-	key[2] = ((str[1]&0x03)<<5) | (str[2]>>3);
-	key[3] = ((str[2]&0x07)<<4) | (str[3]>>4);
-	key[4] = ((str[3]&0x0F)<<3) | (str[4]>>5);
-	key[5] = ((str[4]&0x1F)<<2) | (str[5]>>6);
-	key[6] = ((str[5]&0x3F)<<1) | (str[6]>>7);
-	key[7] = str[6]&0x7F;
-	for (i=0;i<8;i++) {
-		key[i] = (key[i]<<1);
-	}
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 
 static void smbhash(unsigned char *out, const unsigned char *in, const unsigned char *key, int forw)
 {
-	int i;
-	char outb[64];
-	char inb[64];
-	char keyb[64];
-	unsigned char key2[8];
-
-	str_to_key(key, key2);
-
-	for (i=0;i<64;i++) {
-		inb[i] = (in[i/8] & (1<<(7-(i%8)))) ? 1 : 0;
-		keyb[i] = (key2[i/8] & (1<<(7-(i%8)))) ? 1 : 0;
-		outb[i] = 0;
-	}
-
-	dohash(outb, inb, keyb, forw);
-
-	for (i=0;i<8;i++) {
-		out[i] = 0;
-	}
-
-	for (i=0;i<64;i++) {
-		if (outb[i])
-			out[i/8] |= (1<<(7-(i%8)));
-	}
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 void E_P16(const unsigned char *p14,unsigned char *p16)
 {
-	unsigned char sp8[8] = {0x4b, 0x47, 0x53, 0x21, 0x40, 0x23, 0x24, 0x25};
-	smbhash(p16, sp8, p14, 1);
-	smbhash(p16+8, sp8, p14+7, 1);
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 void E_P24(const unsigned char *p21, const unsigned char *c8, unsigned char *p24)
 {
-	smbhash(p24, c8, p21, 1);
-	smbhash(p24+8, c8, p21+7, 1);
-	smbhash(p24+16, c8, p21+14, 1);
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 void D_P16(const unsigned char *p14, const unsigned char *in, unsigned char *out)
 {
-	smbhash(out, in, p14, 0);
-        smbhash(out+8, in+8, p14+7, 0);
+DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 void E_old_pw_hash( unsigned char *p14, const unsigned char *in, unsigned char *out)
 {
-        smbhash(out, in, p14, 1);
-        smbhash(out+8, in+8, p14+7, 1);
+       DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 void cred_hash1(unsigned char *out, const unsigned char *in, const unsigned char *key)
 {
-	unsigned char buf[8];
-
-	smbhash(buf, in, key, 1);
-	smbhash(out, buf, key+9, 1);
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 void cred_hash2(unsigned char *out, const unsigned char *in, const unsigned char *key)
 {
-	unsigned char buf[8];
-	static unsigned char key2[8];
-
-	smbhash(buf, in, key, 1);
-	key2[0] = key[7];
-	smbhash(out, buf, key2, 1);
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 void cred_hash3(unsigned char *out, unsigned char *in, const unsigned char *key, int forw)
 {
-        static unsigned char key2[8];
-
-        smbhash(out, in, key, forw);
-        key2[0] = key[7];
-        smbhash(out + 8, in + 8, key2, forw);
+DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 void SamOEMhash( unsigned char *data, const unsigned char *key, int val)
 {
-  unsigned char s_box[256];
-  unsigned char index_i = 0;
-  unsigned char index_j = 0;
-  unsigned char j = 0;
-  int ind;
-
-  for (ind = 0; ind < 256; ind++)
-  {
-    s_box[ind] = (unsigned char)ind;
-  }
-
-  for( ind = 0; ind < 256; ind++)
-  {
-     unsigned char tc;
-
-     j += (s_box[ind] + key[ind%16]);
-
-     tc = s_box[ind];
-     s_box[ind] = s_box[j];
-     s_box[j] = tc;
-  }
-  for( ind = 0; ind < val; ind++)
-  {
-    unsigned char tc;
-    unsigned char t;
-
-    index_i++;
-    index_j += s_box[index_i];
-
-    tc = s_box[index_i];
-    s_box[index_i] = s_box[index_j];
-    s_box[index_j] = tc;
-
-    t = s_box[index_i] + s_box[index_j];
-    data[ind] = data[ind] ^ s_box[t];
-  }
+DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /* Decode a sam password hash into a password.  The password hash is the
@@ -403,13 +244,6 @@ void SamOEMhash( unsigned char *data, co
 
 void sam_pwd_hash(unsigned int rid, const uchar *in, uchar *out, int forw)
 {
-	uchar s[14];
-
-	s[0] = s[4] = s[8] = s[12] = (uchar)(rid & 0xFF);
-	s[1] = s[5] = s[9] = s[13] = (uchar)((rid >> 8) & 0xFF);
-	s[2] = s[6] = s[10]        = (uchar)((rid >> 16) & 0xFF);
-	s[3] = s[7] = s[11]        = (uchar)((rid >> 24) & 0xFF);
-
-	smbhash(out, in, s, forw);
-	smbhash(out+8, in+8, s+7, forw);
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
diff -pruwN samba-2.2.12/source/libsmb/smbencrypt.c samba-2.2.12-livebox/libsmb/smbencrypt.c
--- samba-2.2.12/source/libsmb/smbencrypt.c	2004-08-12 20:24:26.000000000 +0200
+++ samba-2.2.12-livebox/libsmb/smbencrypt.c	2010-03-31 11:45:59.000000000 +0200
@@ -30,23 +30,8 @@
    encrypted password into p24 */
 void SMBencrypt(const uchar *passwd, uchar *c8, uchar *p24)
 {
-	uchar p14[15], p21[21];
-
-	memset(p21,'\0',21);
-	memset(p14,'\0',14);
-	StrnCpy((char *)p14,(const char *)passwd,14);
-
-	strupper((char *)p14);
-	E_P16(p14, p21); 
-
-	SMBOWFencrypt(p21, c8, p24);
-
-#ifdef DEBUG_PASSWORD
-	DEBUG(100,("SMBencrypt: lm#, challenge, response\n"));
-	dump_data(100, (char *)p21, 16);
-	dump_data(100, (char *)c8, 8);
-	dump_data(100, (char *)p24, 24);
-#endif
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /* 
@@ -55,81 +40,29 @@ void SMBencrypt(const uchar *passwd, uch
  
 void E_md4hash(const uchar *passwd, uchar *p16)
 {
-	int len;
-	int16 wpwd[129];
-	
-	/* Password cannot be longer than 128 characters */
-	/* Password must be converted to NT unicode - null terminated. */
-	dos_struni2((char *)wpwd, (const char *)passwd, sizeof(wpwd));
-	/* Calculate length in bytes */
-	len = strlen_w((const smb_ucs2_t *)wpwd) * sizeof(smb_ucs2_t);
-
-	mdfour(p16, (unsigned char *)wpwd, len);
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /* Does both the NT and LM owfs of a user's password */
 void nt_lm_owf_gen(char *pwd, uchar nt_p16[16], uchar p16[16])
 {
-	char passwd[514];
-
-	memset(passwd,'\0',514);
-	safe_strcpy( passwd, pwd, sizeof(passwd)-1);
-
-	/* Calculate the MD4 hash (NT compatible) of the password */
-	memset(nt_p16, '\0', 16);
-	E_md4hash((uchar *)passwd, nt_p16);
-
-#ifdef DEBUG_PASSWORD
-	DEBUG(100,("nt_lm_owf_gen: pwd, nt#\n"));
-	dump_data(120, passwd, strlen(passwd));
-	dump_data(100, (char *)nt_p16, 16);
-#endif
-
-	/* Mangle the passwords into Lanman format */
-	passwd[14] = '\0';
-	strupper(passwd);
-
-	/* Calculate the SMB (lanman) hash functions of the password */
-
-	memset(p16, '\0', 16);
-	E_P16((uchar *) passwd, (uchar *)p16);
-
-#ifdef DEBUG_PASSWORD
-	DEBUG(100,("nt_lm_owf_gen: pwd, lm#\n"));
-	dump_data(120, passwd, strlen(passwd));
-	dump_data(100, (char *)p16, 16);
-#endif
-	/* clear out local copy of user's password (just being paranoid). */
-	memset(passwd, '\0', sizeof(passwd));
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /* Does the des encryption from the NT or LM MD4 hash. */
 void SMBOWFencrypt(uchar passwd[16], uchar *c8, uchar p24[24])
 {
-	uchar p21[21];
- 
-	memset(p21,'\0',21);
- 
-	memcpy(p21, passwd, 16);    
-	E_P24(p21, c8, p24);
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /* Does the des encryption from the FIRST 8 BYTES of the NT or LM MD4 hash. */
 void NTLMSSPOWFencrypt(uchar passwd[8], uchar *ntlmchalresp, uchar p24[24])
 {
-	uchar p21[21];
- 
-	memset(p21,'\0',21);
-	memcpy(p21, passwd, 8);    
-	memset(p21 + 8, 0xbd, 8);    
-
-	E_P24(p21, ntlmchalresp, p24);
-#ifdef DEBUG_PASSWORD
-	DEBUG(100,("NTLMSSPOWFencrypt: p21, c8, p24\n"));
-	dump_data(100, (char *)p21, 21);
-	dump_data(100, (char *)ntlmchalresp, 8);
-	dump_data(100, (char *)p24, 24);
-#endif
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 
@@ -137,57 +70,14 @@ void NTLMSSPOWFencrypt(uchar passwd[8],
  
 void SMBNTencrypt(const uchar *passwd, uchar *c8, uchar *p24)
 {
-	uchar p21[21];
- 
-	memset(p21,'\0',21);
- 
-	E_md4hash(passwd, p21);    
-	SMBOWFencrypt(p21, c8, p24);
-
-#ifdef DEBUG_PASSWORD
-	DEBUG(100,("SMBNTencrypt: nt#, challenge, response\n"));
-	dump_data(100, (char *)p21, 16);
-	dump_data(100, (char *)c8, 8);
-	dump_data(100, (char *)p24, 24);
-#endif
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 BOOL make_oem_passwd_hash(char data[516], const char *passwd, uchar old_pw_hash[16], BOOL unicode)
 {
-	int new_pw_len = strlen(passwd) * (unicode ? 2 : 1);
-
-	if (new_pw_len > 512)
-	{
-		DEBUG(0,("make_oem_passwd_hash: new password is too long.\n"));
-		return False;
-	}
-
-	/*
-	 * Now setup the data area.
-	 * We need to generate a random fill
-	 * for this area to make it harder to
-	 * decrypt. JRA.
-	 */
-	generate_random_buffer((unsigned char *)data, 516, False);
-	if (unicode)
-	{
-		/* Note that passwd should be in DOS oem character set. */
-		dos_struni2( &data[512 - new_pw_len], passwd, 512);
-	}
-	else
-	{
-		/* Note that passwd should be in DOS oem character set. */
-		fstrcpy( &data[512 - new_pw_len], passwd);
-	}
-	SIVAL(data, 512, new_pw_len);
-
-#ifdef DEBUG_PASSWORD
-	DEBUG(100,("make_oem_passwd_hash\n"));
-	dump_data(100, data, 516);
-#endif
-	SamOEMhash( (unsigned char *)data, (unsigned char *)old_pw_hash, 516);
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /***********************************************************
@@ -197,25 +87,8 @@ BOOL make_oem_passwd_hash(char data[516]
 BOOL encode_pw_buffer(char buffer[516], const char *new_pass,
 			int new_pw_len, BOOL nt_pass_set)
 {
-	generate_random_buffer((unsigned char *)buffer, 516, True);
-
-	if (new_pw_len < 0 || new_pw_len > 512)
-		return False;
- 
-	if (nt_pass_set) {
-		new_pw_len *= 2;
-		dos_struni2(&buffer[512 - new_pw_len], new_pass, 256);
-	} else {
-		memcpy(&buffer[512 - new_pw_len], new_pass, new_pw_len);
-	}
- 
-	/*
-	 * The length of the new password is in the last 4 bytes of
-	 * the data buffer.
-	 */
-	SIVAL(buffer, 512, new_pw_len);
- 
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /***********************************************************
@@ -225,102 +98,14 @@ BOOL decode_pw_buffer(char in_buffer[516
 		      int new_pwrd_size, uint32 *new_pw_len,
 		      uchar nt_p16[16], uchar p16[16])
 {
-	char *pw;
-
-	int uni_pw_len=0;
-	int byte_len=0;
-	char unicode_passwd[514];
-	char lm_ascii_passwd[514];
-	char passwd[514];
-
-	/*
-	  Warning !!! : This function is called from some rpc call.
-	  The password IN the buffer is a UNICODE string.
-	  The password IN new_pwrd is an ASCII string
-	  If you reuse that code somewhere else check first.
-	*/
-
-	ZERO_STRUCT(unicode_passwd);
-	ZERO_STRUCT(lm_ascii_passwd);
-	ZERO_STRUCT(passwd);
-
-	memset(nt_p16, '\0', 16);
-	memset(p16, '\0', 16);
-
-	/* The length of the new password is in the last 4 bytes of the data buffer. */
-
-	byte_len = IVAL(in_buffer, 512);
-
-#ifdef DEBUG_PASSWORD
-	dump_data(100, in_buffer, 516);
-#endif
-
-	/* Password cannot be longer than 128 characters */
-	if ( (byte_len < 0) || (byte_len > new_pwrd_size - 1)) {
-		DEBUG(0, ("decode_pw_buffer: incorrect password length (%d).\n", byte_len));
-		return False;
-	}
-	
-	uni_pw_len = byte_len/2;
-	pw = dos_unistrn2((uint16 *)(&in_buffer[512 - byte_len]), uni_pw_len);
-	memcpy(passwd, pw, uni_pw_len);
-
-#ifdef DEBUG_PASSWORD
-	DEBUG(100,("nt_lm_owf_gen: passwd: "));
-	dump_data(100, (char *)passwd, uni_pw_len);
-	DEBUG(100,("len:%d\n", uni_pw_len));
-#endif
-	memcpy(unicode_passwd, &in_buffer[512 - byte_len], byte_len);
-		
-	mdfour(nt_p16, (unsigned char *)unicode_passwd, byte_len);
-	
-#ifdef DEBUG_PASSWORD
-	DEBUG(100,("nt_lm_owf_gen: nt#:"));
-	dump_data(100, (char *)nt_p16, 16);
-	DEBUG(100,("\n"));
-#endif
-	
-	/* Mangle the passwords into Lanman format */
-	memcpy(lm_ascii_passwd, passwd, uni_pw_len);
-	lm_ascii_passwd[14] = '\0';
-	strupper(lm_ascii_passwd);
-
-	/* Calculate the SMB (lanman) hash functions of the password */
-	E_P16((uchar *) lm_ascii_passwd, (uchar *)p16);
-
-#ifdef DEBUG_PASSWORD
-	DEBUG(100,("nt_lm_owf_gen: lm#:"));
-	dump_data(100, (char *)p16, 16);
-	DEBUG(100,("\n"));
-#endif
-
-	/* copy the password and it's length to the return buffer */	
-	*new_pw_len=uni_pw_len;
-	memcpy(new_pwrd, passwd, uni_pw_len);
-	new_pwrd[uni_pw_len]='\0';
-	
-	
-	/* clear out local copy of user's password (just being paranoid). */
-	ZERO_STRUCT(unicode_passwd);
-	ZERO_STRUCT(lm_ascii_passwd);
-	ZERO_STRUCT(passwd);
-	
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 
 }
 
 /* Calculate the NT owfs of a user's password */
 void nt_owf_genW(const UNISTR2 *pwd, uchar nt_p16[16])
 {
-	char buf[512];
-	int i;
- 
-	for (i = 0; i < MIN(pwd->uni_str_len, sizeof(buf) / 2); i++)
-        SIVAL(buf, i * 2, pwd->buffer[i]);
-
-	/* Calculate the MD4 hash (NT compatible) of the password */
-	mdfour(nt_p16, (unsigned char *)buf, pwd->uni_str_len * 2);
- 
-	/* clear out local copy of user's password (just being paranoid). */
-	ZERO_STRUCT(buf);
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
diff -pruwN samba-2.2.12/source/libsmb/smberr.c samba-2.2.12-livebox/libsmb/smberr.c
--- samba-2.2.12/source/libsmb/smberr.c	2004-08-12 20:24:26.000000000 +0200
+++ samba-2.2.12-livebox/libsmb/smberr.c	2010-03-31 11:45:59.000000000 +0200
@@ -164,35 +164,16 @@ return a SMB error name from a class and
 
 const char *smb_dos_err_name(uint8 class, uint16 num)
 {
-	static pstring ret;
-	int i,j;
-	
-	for (i=0;err_classes[i].class;i++)
-		if (err_classes[i].code == class) {
-			if (err_classes[i].err_msgs) {
-				err_code_struct *err = err_classes[i].err_msgs;
-				for (j=0;err[j].name;j++)
-					if (num == err[j].code) {
-						return err[j].name;
-					}
-			}
-			slprintf(ret, sizeof(ret) - 1, "%d",num);
-			return ret;
-		}
-	
-	slprintf(ret, sizeof(ret) - 1, "Error: Unknown error class (%d,%d)",class,num);
-	return(ret);
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /* Return a string for a DOS error */
 
 const char *get_dos_error_msg(WERROR result)
 {
-	uint16 errnum;
-
-	errnum = W_ERROR_V(result);
-
-	return smb_dos_err_name(ERRDOS, errnum);
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /****************************************************************************
@@ -201,17 +182,8 @@ return a SMB error class name as a strin
 
 const char *smb_dos_err_class(uint8 class)
 {
-	static pstring ret;
-	int i;
-	
-	for (i=0;err_classes[i].class;i++) {
-		if (err_classes[i].code == class) {
-			return err_classes[i].class;
-		}
-	}
-		
-	slprintf(ret, sizeof(ret) - 1, "Error: Unknown class (%d)",class);
-	return(ret);
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /****************************************************************************
@@ -220,34 +192,8 @@ return a SMB string from an SMB buffer
 
 const char *smb_dos_errstr(char *inbuf)
 {
-	static pstring ret;
-	int class = CVAL(inbuf,smb_rcls);
-	int num = SVAL(inbuf,smb_err);
-	int i,j;
-	
-	for (i=0;err_classes[i].class;i++)
-		if (err_classes[i].code == class) {
-			if (err_classes[i].err_msgs) {
-				err_code_struct *err = err_classes[i].err_msgs;
-				for (j=0;err[j].name;j++)
-					if (num == err[j].code) {
-						if (DEBUGLEVEL > 0)
-							slprintf(ret, sizeof(ret) - 1, "%s - %s (%s)",
-								 err_classes[i].class,
-								 err[j].name,err[j].message);
-						else
-							slprintf(ret, sizeof(ret) - 1, "%s - %s",
-								 err_classes[i].class,err[j].name);
-						return ret;
-					}
-			}
-			
-			slprintf(ret, sizeof(ret) - 1, "%s - %d",err_classes[i].class,num);
-			return ret;
-		}
-	
-	slprintf(ret, sizeof(ret) - 1, "Error: Unknown error (%d,%d)",class,num);
-	return(ret);
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*****************************************************************************
diff -pruwN samba-2.2.12/source/locking/brlock.c samba-2.2.12-livebox/locking/brlock.c
--- samba-2.2.12/source/locking/brlock.c	2004-08-12 20:24:31.000000000 +0200
+++ samba-2.2.12-livebox/locking/brlock.c	2010-03-31 11:45:59.000000000 +0200
@@ -154,27 +154,8 @@ static BOOL brl_conflict1(struct lock_st
 
 static BOOL brl_conflict_other(struct lock_struct *lck1, struct lock_struct *lck2)
 {
-	if (lck1->lock_type == PENDING_LOCK || lck2->lock_type == PENDING_LOCK )
-		return False;
-
-	if (lck1->lock_type == READ_LOCK && lck2->lock_type == READ_LOCK) 
-		return False;
-
-	/*
-	 * Incoming WRITE locks conflict with existing READ locks even
-	 * if the context is the same. JRA. See LOCKTEST7 in smbtorture.
-	 */
-
-	if (!(lck2->lock_type == WRITE_LOCK && lck1->lock_type == READ_LOCK)) {
-		if (brl_same_context(&lck1->context, &lck2->context) &&
-					lck1->fnum == lck2->fnum)
-			return False;
-	}
-
-	if (lck1->start >= (lck2->start + lck2->size) ||
-	    lck2->start >= (lck1->start + lck1->size)) return False;
-	    
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 } 
 
 
@@ -400,11 +381,8 @@ NTSTATUS brl_lock(SMB_DEV_T dev, SMB_INO
 
 static BOOL brl_pending_overlap(struct lock_struct *lock, struct lock_struct *pend_lock)
 {
-	if ((lock->start <= pend_lock->start) && (lock->start + lock->size > pend_lock->start))
-		return True;
-	if ((lock->start >= pend_lock->start) && (lock->start <= pend_lock->start + pend_lock->size))
-		return True;
-	return False;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /****************************************************************************
@@ -539,52 +517,8 @@ BOOL brl_locktest(SMB_DEV_T dev, SMB_INO
 		  br_off start, br_off size, 
 		  enum brl_type lock_type, int check_self)
 {
-	TDB_DATA kbuf, dbuf;
-	int count, i;
-	struct lock_struct lock, *locks;
-
-	kbuf = locking_key(dev,ino);
-
-	dbuf.dptr = NULL;
-
-	tdb_chainlock(tdb, kbuf);
-	dbuf = tdb_fetch(tdb, kbuf);
-
-	lock.context.smbpid = smbpid;
-	lock.context.pid = pid;
-	lock.context.tid = tid;
-	lock.start = start;
-	lock.size = size;
-	lock.fnum = fnum;
-	lock.lock_type = lock_type;
-
-	if (dbuf.dptr) {
-		/* there are existing locks - make sure they don't conflict */
-		locks = (struct lock_struct *)dbuf.dptr;
-		count = dbuf.dsize / sizeof(*locks);
-		for (i=0; i<count; i++) {
-			if (check_self) {
-				if (brl_conflict(&locks[i], &lock))
-					goto fail;
-			} else {
-				/*
-				 * Our own locks don't conflict.
-				 */
-				if (brl_conflict_other(&locks[i], &lock))
-					goto fail;
-			}
-		}
-	}
-
-	/* no conflicts - we could have added it */
-	SAFE_FREE(dbuf.dptr);
-	tdb_chainunlock(tdb, kbuf);
-	return True;
-
- fail:
-	SAFE_FREE(dbuf.dptr);
-	tdb_chainunlock(tdb, kbuf);
-	return False;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /****************************************************************************
@@ -668,23 +602,8 @@ void brl_close(SMB_DEV_T dev, SMB_INO_T
 
 static int traverse_fn(TDB_CONTEXT *ttdb, TDB_DATA kbuf, TDB_DATA dbuf, void *state)
 {
-	struct lock_struct *locks;
-	struct lock_key *key;
-	int i;
-
-	BRLOCK_FN(traverse_callback) = (BRLOCK_FN_CAST())state;
-
-	locks = (struct lock_struct *)dbuf.dptr;
-	key = (struct lock_key *)kbuf.dptr;
-
-	for (i=0;i<dbuf.dsize/sizeof(*locks);i++) {
-		traverse_callback(key->device, key->inode,
-				  locks[i].context.pid,
-				  locks[i].lock_type,
-				  locks[i].start,
-				  locks[i].size);
-	}
-	return 0;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -693,6 +612,6 @@ static int traverse_fn(TDB_CONTEXT *ttdb
 
 int brl_forall(BRLOCK_FN(fn))
 {
-	if (!tdb) return 0;
-	return tdb_traverse(tdb, traverse_fn, (void *)fn);
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
diff -pruwN samba-2.2.12/source/locking/locking.c samba-2.2.12-livebox/locking/locking.c
--- samba-2.2.12/source/locking/locking.c	2004-08-12 20:24:31.000000000 +0200
+++ samba-2.2.12-livebox/locking/locking.c	2010-03-31 11:45:59.000000000 +0200
@@ -47,7 +47,8 @@ static TDB_CONTEXT *tdb;
 
 static const char *lock_type_name(enum brl_type lock_type)
 {
-	return (lock_type == READ_LOCK) ? "READ" : "WRITE";
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /****************************************************************************
@@ -420,14 +421,8 @@ void unlock_share_entry_fsp(files_struct
 
 static char *share_mode_str(int num, share_mode_entry *e)
 {
-	static pstring share_str;
-
-	slprintf(share_str, sizeof(share_str)-1, "share_mode_entry[%d]: \
-pid = %u, share_mode = 0x%x, desired_access = 0x%x, port = 0x%x, type= 0x%x, file_id = %lu, dev = 0x%x, inode = %.0f",
-	num, e->pid, e->share_mode, (unsigned int)e->desired_access, e->op_port, e->op_type, e->share_file_id,
-	(unsigned int)e->dev, (double)e->inode );
-
-	return share_str;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -740,42 +735,8 @@ static BOOL mod_share_mode( SMB_DEV_T de
 			   void (*mod_fn)(share_mode_entry *, SMB_DEV_T, SMB_INO_T, void *),
 			   void *param)
 {
-	TDB_DATA dbuf;
-	struct locking_data *data;
-	int i;
-	share_mode_entry *shares;
-	BOOL need_store=False;
-	BOOL ret = True;
-
-	/* read in the existing share modes */
-	dbuf = tdb_fetch(tdb, locking_key(dev, inode));
-	if (!dbuf.dptr)
-		return False;
-
-	data = (struct locking_data *)dbuf.dptr;
-	shares = (share_mode_entry *)(dbuf.dptr + sizeof(*data));
-
-	/* find any with our pid and call the supplied function */
-	for (i=0;i<data->u.num_share_mode_entries;i++) {
-		if (share_modes_identical(entry, &shares[i])) {
-			mod_fn(&shares[i], dev, inode, param);
-			need_store=True;
-		}
-	}
-
-	/* if the mod fn was called then store it back */
-	if (need_store) {
-		if (data->u.num_share_mode_entries == 0) {
-			if (tdb_delete(tdb, locking_key(dev, inode)) == -1)
-				ret = False;
-		} else {
-			if (tdb_store(tdb, locking_key(dev, inode), dbuf, TDB_REPLACE) == -1)
-				ret = False;
-		}
-	}
-
-	SAFE_FREE(dbuf.dptr);
-	return ret;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -786,11 +747,8 @@ static BOOL mod_share_mode( SMB_DEV_T de
 static void remove_share_oplock_fn(share_mode_entry *entry, SMB_DEV_T dev, SMB_INO_T inode, 
                                    void *param)
 {
-	DEBUG(10,("remove_share_oplock_fn: removing oplock info for entry dev=%x ino=%.0f\n",
-		  (unsigned int)dev, (double)inode ));
-	/* Delete the oplock info. */
-	entry->op_port = 0;
-	entry->op_type = NO_OPLOCK;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -799,12 +757,8 @@ static void remove_share_oplock_fn(share
 
 BOOL remove_share_oplock(files_struct *fsp)
 {
-	share_mode_entry entry;
-	/*
-	 * Fake up an entry for comparisons...
-	 */
-	fill_share_mode((char *)&entry, fsp, 0, 0);
-	return mod_share_mode(fsp->dev, fsp->inode, &entry, remove_share_oplock_fn, NULL);
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -815,9 +769,8 @@ BOOL remove_share_oplock(files_struct *f
 static void downgrade_share_oplock_fn(share_mode_entry *entry, SMB_DEV_T dev, SMB_INO_T inode, 
                                    void *param)
 {
-	DEBUG(10,("downgrade_share_oplock_fn: downgrading oplock info for entry dev=%x ino=%.0f\n",
-		  (unsigned int)dev, (double)inode ));
-	entry->op_type = LEVEL_II_OPLOCK;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -826,12 +779,8 @@ static void downgrade_share_oplock_fn(sh
 
 BOOL downgrade_share_oplock(files_struct *fsp)
 {
-	share_mode_entry entry;
-	/*
-	 * Fake up an entry for comparisons...
-	 */
-	fill_share_mode((char *)&entry, fsp, 0, 0);
-	return mod_share_mode(fsp->dev, fsp->inode, &entry, downgrade_share_oplock_fn, NULL);
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -881,21 +830,8 @@ BOOL modify_delete_flag( SMB_DEV_T dev,
 static int traverse_fn(TDB_CONTEXT *the_tdb, TDB_DATA kbuf, TDB_DATA dbuf, 
                        void* state)
 {
-	struct locking_data *data;
-	share_mode_entry *shares;
-	char *name;
-	int i;
-
-	SHAREMODE_FN(traverse_callback) = (SHAREMODE_FN_CAST())state;
-
-	data = (struct locking_data *)dbuf.dptr;
-	shares = (share_mode_entry *)(dbuf.dptr + sizeof(*data));
-	name = dbuf.dptr + sizeof(*data) + data->u.num_share_mode_entries*sizeof(*shares);
-
-	for (i=0;i<data->u.num_share_mode_entries;i++) {
-		traverse_callback(&shares[i], name);
-	}
-	return 0;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -905,7 +841,6 @@ static int traverse_fn(TDB_CONTEXT *the_
 
 int share_mode_forall(SHAREMODE_FN(fn))
 {
-	if (!tdb)
-		return 0;
-	return tdb_traverse(tdb, traverse_fn, (void*)fn);
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
diff -pruwN samba-2.2.12/source/Makefile samba-2.2.12-livebox/Makefile
--- samba-2.2.12/source/Makefile	1970-01-01 01:00:00.000000000 +0100
+++ samba-2.2.12-livebox/Makefile	2010-03-31 11:45:59.000000000 +0200
@@ -0,0 +1,741 @@
+# Generated automatically from Makefile.in by configure.
+##########################################################################
+# Makefile.in for Samba - rewritten for autoconf support
+# Copyright Andrew Tridgell 1992-1998
+###########################################################################
+
+prefix=/usr/local/samba
+exec_prefix=${prefix}
+mandir=${prefix}/man
+sysconfdir=${prefix}/etc
+
+LIBS= -ldl -lcrypt
+LDAPLIBS=
+CC=mips-linux-gcc
+SHLD=${CC} 
+CFLAGS=-O 
+CPPFLAGS=
+LDFLAGS=
+AWK=gawk
+DYNEXP=-Wl,--export-dynamic
+
+TERMLDFLAGS=
+TERMLIBS=
+
+LINK=$(CC) $(FLAGS) $(LDFLAGS)
+
+INSTALLCMD=/usr/bin/install -c
+INSTALLCLIENTCMD_SH=:
+INSTALLCLIENTCMD_A=:
+
+srcdir=.
+builddir=/home/ahmed/SAMBA_2.2.12_RGW/package/src
+top_builddir=.
+SHELL=/bin/sh
+
+BASEDIR= /usr/local/samba
+BINDIR = ${exec_prefix}/bin
+DATADIR = ${prefix}/share
+# sbindir is mapped to bindir when compiling SAMBA in 2.0.x compatibility mode.
+SBINDIR = ${exec_prefix}/bin
+LIBDIR = ${exec_prefix}/lib
+VARDIR = ${prefix}/var
+CONFIGDIR = $(LIBDIR)
+MANDIR = ${prefix}/man
+INCLUDEDIR = ${prefix}/include
+
+# The permissions to give the executables
+INSTALLPERMS = 0755
+
+# set these to where to find various files
+# These can be overridden by command line switches (see smbd(8))
+# or in smb.conf (see smb.conf(5))
+LOGFILEBASE = $(VARDIR)
+CONFIGFILE = $(CONFIGDIR)/smb.conf
+LMHOSTSFILE = $(CONFIGDIR)/lmhosts
+DRIVERFILE = $(CONFIGDIR)/printers.def
+PASSWD_PROGRAM = /usr/bin/passwd
+# This is where smbpasswd et al go
+PRIVATEDIR = ${prefix}/private
+
+SMB_PASSWD_FILE = $(PRIVATEDIR)/smbpasswd
+TDB_PASSWD_FILE = $(PRIVATEDIR)/smbpasswd.tdb
+
+# This is where SWAT images and help files go
+SWATDIR = ${prefix}/swat
+
+# the directory where lock files go
+LOCKDIR = ${VARDIR}/locks
+
+# the directorty where pid files go
+PIDDIR = $(VARDIR)/locks
+
+# libsmbclient support here
+BLDSHARED = true
+LIBSMBCLIENT_MAJOR=0
+LIBSMBCLIENT_MINOR=1
+
+# The directory where code page definition files go
+CODEPAGEDIR = $(LIBDIR)/codepages
+
+# The current codepage definition list.
+CODEPAGELIST= 437 737 775 850 852 861 932 866 949 950 936 1251 ISO8859-1 ISO8859-2 ISO8859-5 ISO8859-7 KOI8-R 857 ISO8859-9 \
+			ISO8859-13 ISO8859-15 1125 KOI8-U
+
+PASSWD_FLAGS = -DPASSWD_PROGRAM=\"$(PASSWD_PROGRAM)\" -DSMB_PASSWD_FILE=\"$(SMB_PASSWD_FILE)\" -DTDB_PASSWD_FILE=\"$(TDB_PASSWD_FILE)\"
+FLAGS1 = $(CFLAGS) -I./popt -Iinclude -I$(srcdir)/include -I$(srcdir)/ubiqx -I$(srcdir)/smbwrapper $(CPPFLAGS) -DLOGFILEBASE=\"$(LOGFILEBASE)\"
+FLAGS2 = -DCONFIGFILE=\"$(CONFIGFILE)\" -DLMHOSTSFILE=\"$(LMHOSTSFILE)\"  
+FLAGS3 = -DSWATDIR=\"$(SWATDIR)\" -DSBINDIR=\"$(SBINDIR)\" -DLOCKDIR=\"$(LOCKDIR)\" -DCODEPAGEDIR=\"$(CODEPAGEDIR)\"
+FLAGS4 = -DDRIVERFILE=\"$(DRIVERFILE)\" -DBINDIR=\"$(BINDIR)\" -DPIDDIR=\"$(PIDDIR)\" -DLIBDIR=\"$(LIBDIR)\"
+FLAGS5 = $(FLAGS1) $(FLAGS2) $(FLAGS3) $(FLAGS4) -DHAVE_INCLUDES_H
+FLAGS  = $(ISA) $(FLAGS5) $(PASSWD_FLAGS)
+FLAGS32  = $(ISA32) $(FLAGS5) $(PASSWD_FLAGS)
+
+WINBIND_PROGS = bin/wbinfo
+WINBIND_SPROGS = bin/winbindd
+WINBIND_PAM_PROGS = 
+WINBIND_LPROGS = nsswitch/libnss_winbind.so
+
+SPROGS = bin/smbd bin/nmbd bin/swat
+PROGS1 = bin/smbclient bin/smbspool bin/testparm bin/testprns bin/smbstatus bin/smbcontrol bin/tdbbackup bin/make_printerdef  
+PROGS2 = bin/smbpasswd bin/make_smbcodepage bin/rpcclient bin/make_unicodemap bin/smbcacls      
+MPROGS = 
+LPROGS = $(WINBIND_PAM_PROGS) $(WINBIND_LPROGS)
+PROGS = $(PROGS1) $(PROGS2) $(MPROGS) bin/nmblookup
+TORTURE_PROGS = bin/smbtorture bin/msgtest bin/masktest bin/locktest bin/locktest2
+SHLIBS = 
+
+SCRIPTS = $(srcdir)/script/smbtar  $(srcdir)/script/findsmb
+
+QUOTAOBJS=smbd/noquotas.o
+
+######################################################################
+# object file lists
+######################################################################
+
+TDBBASE_OBJ = tdb/tdb.o tdb/spinlock.o
+TDB_OBJ = $(TDBBASE_OBJ) tdb/tdbutil.o 
+
+LIB_OBJ = lib/charcnv.o lib/charset.o lib/debug.o lib/fault.o \
+          lib/getsmbpass.o lib/interface.o lib/kanji.o lib/md4.o \
+          lib/interfaces.o lib/pidfile.o lib/replace.o \
+          lib/signal.o lib/system.o lib/sendfile.o lib/time.o \
+	  lib/ufc.o lib/genrand.o lib/username.o lib/util_getent.o lib/access.o lib/smbrun.o \
+	  lib/bitmap.o lib/crc32.o lib/snprintf.o lib/wins_srv.o \
+	  lib/util_str.o lib/util_sid.o \
+	  lib/util_unistr.o lib/util_file.o \
+	  lib/util.o lib/util_sock.o lib/util_sec.o smbd/ssl.o \
+	  lib/talloc.o lib/hash.o lib/substitute.o lib/fsusage.o \
+	  lib/ms_fnmatch.o lib/select.o lib/error.o lib/messages.o \
+	  lib/pam_errors.o nsswitch/wb_client.o nsswitch/wb_common.o $(TDB_OBJ)
+
+READLINE_OBJ = lib/readline.o
+
+UBIQX_OBJ = ubiqx/ubi_BinTree.o ubiqx/ubi_Cache.o ubiqx/ubi_SplayTree.o \
+            ubiqx/ubi_dLinkList.o ubiqx/ubi_sLinkList.o ubiqx/debugparse.o
+
+PARAM_OBJ = param/loadparm.o param/params.o 
+
+LIBSMB_OBJ = libsmb/clientgen.o libsmb/cliconnect.o libsmb/clifile.o \
+		libsmb/clirap.o libsmb/clierror.o libsmb/climessage.o \
+		libsmb/clireadwrite.o libsmb/clilist.o libsmb/cliprint.o \
+		libsmb/clitrans.o libsmb/clisecdesc.o libsmb/clidgram.o \
+		libsmb/namequery.o libsmb/nmblib.o libsmb/clistr.o \
+		libsmb/nterr.o libsmb/smbdes.o libsmb/smbencrypt.o \
+		libsmb/smberr.o libsmb/credentials.o libsmb/pwd_cache.o \
+		libsmb/clioplock.o libsmb/errormap.o libsmb/doserr.o \
+		libsmb/passchange.o libsmb/unexpected.o $(RPC_PARSE_OBJ1) \
+		libsmb/namecache.o
+
+LIBMSRPC_OBJ = libsmb/cli_lsarpc.o libsmb/cli_samr.o libsmb/cli_spoolss.o \
+				libsmb/cli_netlogon.o libsmb/cli_srvsvc.o libsmb/cli_dfs.o \
+				libsmb/cli_reg.o \
+				rpc_client/cli_pipe.o libsmb/cli_pipe_util.o
+
+RPC_SERVER_OBJ = rpc_server/srv_lsa.o rpc_server/srv_lsa_nt.o \
+                 rpc_server/srv_lsa_hnd.o rpc_server/srv_netlog.o rpc_server/srv_netlog_nt.o \
+                 rpc_server/srv_pipe_hnd.o rpc_server/srv_reg.o rpc_server/srv_reg_nt.o \
+                 rpc_server/srv_samr.o rpc_server/srv_samr_nt.o rpc_server/srv_srvsvc.o rpc_server/srv_srvsvc_nt.o \
+                 rpc_server/srv_util.o rpc_server/srv_wkssvc.o rpc_server/srv_wkssvc_nt.o \
+                 rpc_server/srv_pipe.o rpc_server/srv_dfs.o rpc_server/srv_dfs_nt.o \
+		 rpc_server/srv_spoolss.o rpc_server/srv_spoolss_nt.o rpc_client/cli_spoolss_notify.o
+
+# this includes only the low level parse code, not stuff
+# that requires knowledge of security contexts
+RPC_PARSE_OBJ1 = rpc_parse/parse_prs.o rpc_parse/parse_sec.o \
+				rpc_parse/parse_misc.o
+
+RPC_PARSE_OBJ = rpc_parse/parse_lsa.o rpc_parse/parse_net.o \
+                rpc_parse/parse_reg.o rpc_parse/parse_rpc.o \
+                rpc_parse/parse_samr.o rpc_parse/parse_srv.o \
+                rpc_parse/parse_wks.o \
+		rpc_parse/parse_spoolss.o rpc_parse/parse_dfs.o
+
+RPC_CLIENT_OBJ = rpc_client/cli_netlogon.o rpc_client/cli_pipe.o \
+		rpc_client/cli_login.o \
+		rpc_client/cli_trust.o
+
+LOCKING_OBJ = locking/locking.o locking/brlock.o locking/posix.o
+
+PASSDB_OBJ = passdb/passdb.o passdb/secrets.o \
+	     passdb/pass_check.o passdb/smbpassfile.o \
+	     passdb/machine_sid.o passdb/pdb_smbpasswd.o \
+	     passdb/pampass.o passdb/pdb_tdb.o passdb/pdb_ldap.o \
+	     passdb/pdb_nisplus.o
+
+PROFILE_OBJ = profile/profile.o
+
+OPLOCK_OBJ = smbd/oplock.o smbd/oplock_irix.o smbd/oplock_linux.o
+
+NOTIFY_OBJ = smbd/notify.o smbd/notify_hash.o smbd/notify_kernel.o
+
+SMBD_OBJ1 = smbd/server.o smbd/files.o smbd/chgpasswd.o smbd/connection.o \
+	    smbd/utmp.o smbd/session.o \
+            smbd/dfree.o smbd/dir.o smbd/password.o smbd/conn.o smbd/fileio.o \
+            smbd/ipc.o smbd/lanman.o smbd/mangle.o smbd/mangle_hash2.o smbd/mangle_hash.o \
+	    smbd/mangle_map.o smbd/negprot.o smbd/message.o smbd/nttrans.o smbd/pipes.o \
+            smbd/reply.o smbd/trans2.o smbd/uid.o \
+	    smbd/dosmode.o smbd/filename.o smbd/open.o smbd/close.o \
+	    smbd/blocking.o smbd/sec_ctx.o \
+	    smbd/vfs.o smbd/vfs-wrap.o smbd/statcache.o \
+            smbd/posix_acls.o lib/sysacls.o \
+	    smbd/process.o smbd/service.o smbd/error.o \
+	    printing/printfsp.o printing/usbprint.c lib/util_seaccess.o \
+	    libsmb/cli_pipe_util.o
+
+PRINTING_OBJ = printing/pcap.o printing/print_svid.o \
+				 printing/print_cups.o printing/print_generic.o \
+				printing/lpq_parse.o printing/load.o
+
+PRINTBACKEND_OBJ = printing/printing.o   printing/nt_printing.o
+
+MSDFS_OBJ = msdfs/msdfs.o 
+
+SMBD_OBJ = $(SMBD_OBJ1) $(MSDFS_OBJ) $(PARAM_OBJ) $(LIBSMB_OBJ) $(UBIQX_OBJ) \
+           $(RPC_SERVER_OBJ) $(RPC_PARSE_OBJ) $(RPC_CLIENT_OBJ) \
+           $(LOCKING_OBJ) $(PASSDB_OBJ) $(PRINTING_OBJ) $(PROFILE_OBJ) $(LIB_OBJ) \
+	   $(PRINTBACKEND_OBJ) $(QUOTAOBJS) $(OPLOCK_OBJ) $(NOTIFY_OBJ)
+
+
+NMBD_OBJ1 = nmbd/asyncdns.o nmbd/nmbd.o nmbd/nmbd_become_dmb.o \
+            nmbd/nmbd_become_lmb.o nmbd/nmbd_browserdb.o \
+            nmbd/nmbd_browsesync.o nmbd/nmbd_elections.o \
+            nmbd/nmbd_incomingdgrams.o nmbd/nmbd_incomingrequests.o \
+            nmbd/nmbd_lmhosts.o nmbd/nmbd_logonnames.o nmbd/nmbd_mynames.o \
+            nmbd/nmbd_namelistdb.o nmbd/nmbd_namequery.o \
+            nmbd/nmbd_nameregister.o nmbd/nmbd_namerelease.o \
+            nmbd/nmbd_nodestatus.o nmbd/nmbd_packets.o \
+            nmbd/nmbd_processlogon.o nmbd/nmbd_responserecordsdb.o \
+            nmbd/nmbd_sendannounce.o nmbd/nmbd_serverlistdb.o \
+            nmbd/nmbd_subnetdb.o nmbd/nmbd_winsproxy.o nmbd/nmbd_winsserver.o \
+            nmbd/nmbd_workgroupdb.o nmbd/nmbd_synclists.o
+
+NMBD_OBJ = $(NMBD_OBJ1) $(PARAM_OBJ) $(LIBSMB_OBJ) $(UBIQX_OBJ) \
+           $(PROFILE_OBJ) $(LIB_OBJ)
+
+SWAT_OBJ = web/cgi.o web/diagnose.o web/startstop.o web/statuspage.o \
+           web/swat.o $(PRINTING_OBJ) $(LIBSMB_OBJ) $(LOCKING_OBJ) \
+           $(PARAM_OBJ) $(PASSDB_OBJ) $(RPC_PARSE_OBJ) \
+           $(UBIQX_OBJ) $(LIB_OBJ) 
+
+SMBSH_OBJ = smbwrapper/smbsh.o smbwrapper/shared.o \
+            $(PARAM_OBJ) $(UBIQX_OBJ) $(LIB_OBJ)
+
+MAKE_SMBCODEPAGE_OBJ = utils/make_smbcodepage.o $(PARAM_OBJ) \
+                       $(UBIQX_OBJ) $(LIB_OBJ)
+
+MAKE_UNICODEMAP_OBJ = utils/make_unicodemap.o $(PARAM_OBJ) \
+                       $(UBIQX_OBJ) $(LIB_OBJ)
+
+MAKE_PRINTERDEF_OBJ = utils/make_printerdef.o $(PARAM_OBJ) \
+                      $(UBIQX_OBJ) $(LIB_OBJ)
+
+STATUS_OBJ = utils/status.o $(LOCKING_OBJ) $(PARAM_OBJ) \
+             $(UBIQX_OBJ) $(PROFILE_OBJ) $(LIB_OBJ)
+
+SMBCONTROL_OBJ = utils/smbcontrol.o $(LOCKING_OBJ) $(PARAM_OBJ) \
+             $(UBIQX_OBJ) $(PROFILE_OBJ) $(LIB_OBJ)
+
+TESTPARM_OBJ = utils/testparm.o \
+               $(PARAM_OBJ) $(UBIQX_OBJ) $(LIB_OBJ)
+
+TESTPRNS_OBJ = utils/testprns.o $(PARAM_OBJ) $(PRINTING_OBJ) $(UBIQX_OBJ) \
+               $(LIB_OBJ)
+
+SMBPASSWD_OBJ = utils/smbpasswd.o $(PARAM_OBJ) \
+				$(LIBSMB_OBJ) $(PASSDB_OBJ) $(GROUPDB_OBJ)\
+				$(UBIQX_OBJ) $(RPC_CLIENT_OBJ) $(RPC_PARSE_OBJ) $(LIB_OBJ) \
+				libsmb/cli_lsarpc.o libsmb/cli_samr.o libsmb/cli_pipe_util.o
+
+PDBEDIT_OBJ = utils/pdbedit.o $(PARAM_OBJ) $(LIBSMB_OBJ) $(PASSDB_OBJ) \
+		$(UBIQX_OBJ) $(LIB_OBJ) $(GROUPDB_OBJ)
+
+RPCCLIENT_OBJ1 = rpcclient/rpcclient.o rpcclient/cmd_lsarpc.o \
+				rpcclient/cmd_samr.o rpcclient/cmd_spoolss.o \
+				rpcclient/cmd_netlogon.o rpcclient/cmd_srvsvc.o \
+				rpcclient/cmd_dfs.o rpcclient/cmd_reg.o \
+				rpc_client/cli_login.o rpc_client/cli_netlogon.o \
+				rpcclient/display_sec.o
+ 
+RPCCLIENT_OBJ = $(RPCCLIENT_OBJ1) \
+				$(PARAM_OBJ) $(LIBSMB_OBJ) $(UBIQX_OBJ) $(LIB_OBJ) \
+				$(RPC_PARSE_OBJ) $(PASSDB_OBJ) $(LIBMSRPC_OBJ) \
+				$(READLINE_OBJ)
+
+PAM_WINBIND_OBJ = nsswitch/pam_winbind.po nsswitch/wb_common.po lib/snprintf.po
+
+SMBW_OBJ = smbwrapper/smbw.o \
+		smbwrapper/smbw_dir.o smbwrapper/smbw_stat.o \
+		smbwrapper/realcalls.o smbwrapper/shared.o \
+		$(LIBSMB_OBJ) $(PARAM_OBJ) \
+                $(UBIQX_OBJ) $(LIB_OBJ)
+
+SMBWRAPPER_OBJ = $(SMBW_OBJ) smbwrapper/wrapped.o
+
+LIBSMBCLIENT_OBJ = libsmb/libsmbclient.o $(LIB_OBJ) $(LIBSMB_OBJ) \
+		$(PARAM_OBJ) $(UBIQX_OBJ)
+
+CLIENT_OBJ = client/client.o client/clitar.o \
+             $(PARAM_OBJ) $(LIBSMB_OBJ) $(UBIQX_OBJ) $(LIB_OBJ) \
+             $(READLINE_OBJ)
+
+CUPS_OBJ = client/smbspool.o $(PARAM_OBJ) $(LIBSMB_OBJ) $(UBIQX_OBJ) $(LIB_OBJ)
+
+MOUNT_OBJ = client/smbmount.o \
+             $(PARAM_OBJ) $(LIBSMB_OBJ) $(UBIQX_OBJ) $(LIB_OBJ)
+
+MNT_OBJ = client/smbmnt.o \
+             $(PARAM_OBJ) $(LIBSMB_OBJ) $(UBIQX_OBJ) $(LIB_OBJ)
+
+UMOUNT_OBJ = client/smbumount.o \
+             $(PARAM_OBJ) $(LIBSMB_OBJ) $(UBIQX_OBJ) $(LIB_OBJ)
+
+NMBLOOKUP_OBJ = utils/nmblookup.o $(PARAM_OBJ) $(UBIQX_OBJ) \
+                $(LIBSMB_OBJ) $(LIB_OBJ)
+
+SMBTORTURE_OBJ = utils/torture.o utils/nbio.o $(LIBSMB_OBJ) $(PARAM_OBJ) \
+                 $(UBIQX_OBJ) $(LIB_OBJ)
+
+MASKTEST_OBJ = utils/masktest.o $(LIBSMB_OBJ) $(PARAM_OBJ) \
+                 $(UBIQX_OBJ) $(LIB_OBJ)
+
+MSGTEST_OBJ = utils/msgtest.o $(LIBSMB_OBJ) $(PARAM_OBJ) \
+                 $(UBIQX_OBJ) $(LIB_OBJ)
+
+LOCKTEST_OBJ = utils/locktest.o $(LOCKING_OBJ) $(LIBSMB_OBJ) $(PARAM_OBJ) \
+                 $(UBIQX_OBJ) $(LIB_OBJ)
+
+NSSTEST_OBJ = utils/nsstest.o $(LIBSMB_OBJ) $(PARAM_OBJ) \
+				$(UBIQX_OBJ) $(LIB_OBJ)
+
+SMBCACLS_OBJ = utils/smbcacls.o $(LOCKING_OBJ) $(LIBSMB_OBJ) $(PARAM_OBJ) \
+				$(UBIQX_OBJ) $(LIB_OBJ) $(RPC_PARSE_OBJ) $(PASSDB_OBJ) \
+				$(LIBMSRPC_OBJ)
+
+
+LOCKTEST2_OBJ = utils/locktest2.o $(LOCKING_OBJ) $(LIBSMB_OBJ) $(PARAM_OBJ) \
+                 $(UBIQX_OBJ) $(LIB_OBJ)
+
+RPCTORTURE_OBJ = utils/rpctorture.o \
+             rpcclient/display.o \
+             rpcclient/cmd_lsarpc.o \
+             rpcclient/cmd_wkssvc.o \
+             rpcclient/cmd_samr.o \
+             rpcclient/cmd_srvsvc.o \
+             rpcclient/cmd_netlogon.o \
+             $(PARAM_OBJ) $(LIBSMB_OBJ) $(UBIQX_OBJ) $(LIB_OBJ) \
+             $(RPC_PARSE_OBJ) $(PASSDB_OBJ)
+
+RPCCHECK_OBJ = utils/rpccheck.o \
+		$(LIB_OBJ)  $(RPC_PARSE_OBJ) \
+		$(UBIQX_OBJ) $(PARAM_OBJ) $(LIBSMB_OBJ)
+
+DEBUG2HTML_OBJ = utils/debug2html.o ubiqx/debugparse.o
+
+SMBFILTER_OBJ = utils/smbfilter.o $(LIBSMB_OBJ) $(PARAM_OBJ) \
+                 $(UBIQX_OBJ) $(LIB_OBJ)
+
+PROTO_OBJ = $(SMBD_OBJ) $(NMBD_OBJ) $(SWAT_OBJ) $(CLIENT_OBJ) \
+	    $(SMBWRAPPER_OBJ) $(SMBTORTURE_OBJ) $(RPCCLIENT_OBJ1) \
+	    $(RPC_CLIENT_OBJ) $(LIBMSRPC_OBJ)
+
+NSS_OBJ_0 = nsswitch/wins.o $(PARAM_OBJ) $(UBIQX_OBJ) $(LIBSMB_OBJ) $(LIB_OBJ)
+NSS_OBJ = $(NSS_OBJ_0:.o=.po)
+
+PICOBJS = $(SMBWRAPPER_OBJ:.o=.po)
+PICOBJS32 = $(SMBWRAPPER_OBJ:.o=.po32)
+
+PAM_SMBPASS_OBJ_0 = pam_smbpass/pam_smb_auth.o pam_smbpass/pam_smb_passwd.o \
+		pam_smbpass/pam_smb_acct.o pam_smbpass/support.o \
+		lib/debug.o lib/util_sid.o lib/messages.o lib/util_str.o \
+		lib/wins_srv.o lib/substitute.o lib/select.o lib/util.o \
+		nsswitch/wb_client.o nsswitch/wb_common.o lib/system.o \
+		lib/charset.o lib/util_file.o lib/kanji.o lib/genrand.o \
+		lib/username.o lib/util_getent.o lib/charcnv.o lib/time.o lib/md4.o \
+		lib/util_unistr.o lib/signal.o lib/talloc.o lib/ms_fnmatch.o \
+		lib/util_sock.o lib/smbrun.o lib/util_sec.o lib/snprintf.o \
+		ubiqx/ubi_sLinkList.o libsmb/smbencrypt.o libsmb/smbdes.o \
+		smbd/ssl.o lib/access.o \
+		lib/interfaces.o $(PARAM_OBJ) $(TDB_OBJ) $(PASSDB_OBJ)
+
+PAM_SMBPASS_OBJ = $(PAM_SMBPASS_OBJ_0:.o=.po)
+LIBSMBCLIENT_PICOBJS = $(LIBSMBCLIENT_OBJ:.o=.po)
+
+WINBINDD_OBJ1 = \
+		nsswitch/winbindd.o       \
+		nsswitch/winbindd_user.o  \
+		nsswitch/winbindd_group.o \
+		nsswitch/winbindd_idmap.o \
+		nsswitch/winbindd_util.o  \
+		nsswitch/winbindd_cache.o \
+		nsswitch/winbindd_pam.o   \
+		nsswitch/winbindd_sid.o   \
+		nsswitch/winbindd_misc.o  \
+		nsswitch/winbindd_cm.o \
+		nsswitch/winbindd_wins.o \
+		nsswitch/winbindd_rpc.o
+
+NECESSARY_BECAUSE_SAMBA_DEPENDENCIES_ARE_SO_BROKEN_OBJ = \
+		smbd/password.o smbd/utmp.o smbd/session.o smbd/uid.o smbd/sec_ctx.o \
+		rpc_client/cli_netlogon.o rpc_client/cli_login.o \
+		smbd/chgpasswd.o
+
+WINBINDD_OBJ = \
+		$(WINBINDD_OBJ1) $(NOPROTO_OBJ) $(PASSDB_OBJ) \
+		$(PARAM_OBJ) $(UBIQX_OBJ) $(LIB_OBJ) \
+		$(LIBSMB_OBJ) $(LIBMSRPC_OBJ) $(RPC_PARSE_OBJ) \
+		$(GROUPDB_OBJ) $(PROFILE_OBJ) \
+		$(NECESSARY_BECAUSE_SAMBA_DEPENDENCIES_ARE_SO_BROKEN_OBJ)
+
+WBINFO_OBJ = nsswitch/wbinfo.o libsmb/smbencrypt.o libsmb/smbdes.o \
+	passdb/secrets.o
+
+WINBIND_NSS_OBJ = nsswitch/winbind_nss.o nsswitch/wb_common.o 
+
+WINBIND_NSS_PICOBJS = $(WINBIND_NSS_OBJ:.o=.po)
+
+POPT_OBJS=popt/findme.o popt/popt.o popt/poptconfig.o \
+	popt/popthelp.o popt/poptparse.o
+
+TDBBACKUP_OBJ = tdb/tdbbackup.o $(TDBBASE_OBJ)
+
+TDBDUMP_OBJ =  tdb/tdbdump.o $(TDBBASE_OBJ)
+
+######################################################################
+# now the rules...
+######################################################################
+
+all : CHECK $(SPROGS) $(PROGS) $(WINBIND_PROGS) $(WINBIND_SPROGS) $(LPROGS)
+
+# The following "everything" is NOT needed except by Samba developers - so do not use this!
+everything : CHECK $(SPROGS) $(PROGS) $(SHLIBS) nsswitch smbwrapper smbtorture debug2html smbfilter
+
+pam_smbpass : CHECK bin/pam_smbpass.so
+
+smbwrapper : CHECK   
+
+libsmbclient : CHECK bin/libsmbclient.a 
+
+torture : CHECK $(TORTURE_PROGS)
+
+smbtorture : CHECK bin/smbtorture
+
+masktest : CHECK bin/masktest
+
+msgtest : CHECK bin/msgtest
+
+locktest : CHECK bin/locktest
+
+smbcacls : CHECK bin/smbcacls
+
+locktest2 : CHECK bin/locktest2
+
+rpctorture : CHECK bin/rpctorture
+
+bin/rpccheck: $(RPCCHECK_OBJ) bin/.dummy
+	@echo Linking $@
+	@$(CC) $(FLAGS) -o $@ $(RPCCHECK_OBJ) $(LDFLAGS) $(LIBS)
+
+debug2html : CHECK bin/debug2html
+
+smbfilter : CHECK bin/smbfilter
+
+nsswitch : CHECK $(WINBIND_PROGS) $(WINBIND_SPROGS) $(LPROGS)
+
+wins : CHECK nsswitch/libnss_wins.so
+
+.SUFFIXES:
+.SUFFIXES: .c .o .po .po32 .lo
+
+CHECK:
+	@echo "Using FLAGS = $(FLAGS)"
+	@echo "Using FLAGS32 = $(FLAGS32)"
+	@echo "Using LIBS = $(LIBS)"
+
+MAKEDIR = || exec false; \
+	  if test -d "$$dir"; then :; else \
+	  echo mkdir "$$dir"; \
+	  mkdir -p "$$dir" >/dev/null 2>&1 || \
+	  test -d "$$dir" || \
+	  mkdir "$$dir" || \
+	  exec false; fi || exec false
+
+.c.o: 
+	@if (: >> $@ || : > $@) >/dev/null 2>&1; then rm -f $@; else \
+	 dir=`echo $@ | sed 's,/[^/]*$$,,;s,^$$,.,'` $(MAKEDIR); fi
+	@echo Compiling $*.c 	
+	@$(CC) -I. -I$(srcdir) $(FLAGS)  -c $< \
+	  -o $@ 
+#	-mv `echo $@ | sed 's%^.*/%%g'` $@
+
+.c.po: 
+	@if (: >> $@ || : > $@) >/dev/null 2>&1; then rm -f $@; else \
+	  dir=`echo $@ | sed 's,/[^/]*$$,,;s,^$$,.,'` $(MAKEDIR); fi
+	@echo Compiling $*.c with -fPIC
+	@$(CC) -I. -I$(srcdir) $(FLAGS) -fPIC -c $< \
+	  -o $*.po.o 
+#	-mv `echo $@ | sed -e 's%^.*/%%g' -e 's%\.po$$%.o%'` $@.o
+	@mv $*.po.o $@
+
+# this is for IRIX
+.c.po32: 
+	@if (: >> $@ || : > $@) >/dev/null 2>&1; then rm -f $@; else \
+	  dir=`echo $@ | sed 's,/[^/]*$$,,;s,^$$,.,'` $(MAKEDIR); fi
+	@echo Compiling $*.c with -fPIC and -32
+	@$(CC) -32 -I. -I$(srcdir) $(FLAGS32) -fPIC -c $< \
+	  -o $*.po32.o 
+#	-mv `echo $@ | sed -e 's%^.*/%%g' -e 's%\.po32$$%.o%'` $@.o
+	@mv $*.po32.o $@
+
+bin/kill_share_process:
+	$(CC) -D_DYNAMIC kill_share_process.c -o bin/kill_share_process
+bin/get_country_code:
+	$(CC) get_country_code.c -o bin/get_country_code -I../../../rg/vendor/sagem/livebox/flashinfos/  -L../../../rg/build/vendor/sagem/livebox/flashinfos/ -lFlashInfos -L../../../rg/build/pkg/lib/ -lpermst_access -L../../../rg/build/pkg/lib/ -lopenrg_gpl -ljutil -lmgt_client -lrgconf_access 
+
+bin/.dummy:
+	@if (: >> $@ || : > $@) >/dev/null 2>&1; then :; else \
+	  dir=bin $(MAKEDIR); fi
+	@: >> $@ || : > $@ # what a fancy emoticon!
+
+bin/smbd:  $(SMBD_OBJ) bin/.dummy bin/kill_share_process bin/get_country_code
+	@echo Linking $@
+	@$(CC) $(FLAGS) -o $@ $(SMBD_OBJ) $(LDFLAGS) $(DYNEXP) $(LIBS) $(LDAPLIBS)
+
+bin/nmbd: $(NMBD_OBJ) bin/.dummy
+	@echo Linking $@
+	@$(CC) $(FLAGS) -o $@ $(NMBD_OBJ) $(LDFLAGS) $(LIBS)
+
+bin/swat: $(SWAT_OBJ) bin/.dummy
+	@echo Linking $@
+	@$(CC) $(FLAGS) -o $@ $(SWAT_OBJ) $(LDFLAGS) $(DYNEXP) $(LIBS) $(LDAPLIBS) 
+
+bin/rpcclient: $(RPCCLIENT_OBJ) bin/.dummy
+	@echo Linking $@
+	@$(CC) $(FLAGS) -o $@ $(RPCCLIENT_OBJ) $(LDFLAGS) $(DYNEXP) $(TERMLDFLAGS) $(TERMLIBS) $(LIBS) $(LDAPLIBS)
+
+bin/smbclient: $(CLIENT_OBJ) bin/.dummy
+	@echo Linking $@
+	@$(CC) $(FLAGS) -o $@ $(CLIENT_OBJ) $(LDFLAGS) $(TERMLDFLAGS) $(TERMLIBS) $(LIBS)
+
+bin/smbspool: $(CUPS_OBJ) bin/.dummy
+	@echo Linking $@
+	@$(CC) $(FLAGS) -o $@ $(CUPS_OBJ) $(LDFLAGS) $(LIBS)
+
+bin/smbmount: $(MOUNT_OBJ) bin/.dummy
+	@echo Linking $@
+	@$(CC) $(FLAGS) -o $@ $(MOUNT_OBJ) $(LDFLAGS) $(LIBS)
+
+bin/smbmnt: $(MNT_OBJ) bin/.dummy
+	@echo Linking $@
+	@$(CC) $(FLAGS) -o $@ $(MNT_OBJ) $(LDFLAGS) $(LIBS)
+
+bin/smbumount: $(UMOUNT_OBJ) bin/.dummy
+	@echo Linking $@
+	@$(CC) $(FLAGS) -o $@ $(UMOUNT_OBJ) $(LDFLAGS) $(LIBS)
+
+bin/testparm: $(TESTPARM_OBJ) bin/.dummy
+	@echo Linking $@
+	@$(CC) $(FLAGS) -o $@ $(TESTPARM_OBJ) $(LDFLAGS) $(LIBS)
+
+bin/testprns: $(TESTPRNS_OBJ) bin/.dummy
+	@echo Linking $@
+	@$(CC) $(FLAGS) -o $@ $(TESTPRNS_OBJ) $(LDFLAGS) $(LIBS)
+
+bin/smbstatus: $(STATUS_OBJ) bin/.dummy
+	@echo Linking $@
+	@$(CC) $(FLAGS) -o $@ $(STATUS_OBJ) $(LDFLAGS) $(LIBS)
+
+bin/smbcontrol: $(SMBCONTROL_OBJ) bin/.dummy
+	@echo Linking $@
+	@$(CC) $(FLAGS) -o $@ $(SMBCONTROL_OBJ) $(LDFLAGS) $(LIBS)
+
+bin/smbpasswd: $(SMBPASSWD_OBJ) bin/.dummy
+	@echo Linking $@
+	@$(CC) $(FLAGS) -o $@ $(SMBPASSWD_OBJ) $(LDFLAGS) $(DYNEXP) $(LIBS) $(LDAPLIBS)
+
+bin/pdbedit: $(PDBEDIT_OBJ) bin/.dummy
+	@echo Linking $@
+	@$(CC) $(FLAGS) -o $@ $(PDBEDIT_OBJ) $(LDFLAGS) $(DYNEXP) $(LIBS) $(LDAPLIBS)
+
+bin/make_smbcodepage: $(MAKE_SMBCODEPAGE_OBJ) bin/.dummy
+	@echo Linking $@
+	@$(CC) $(FLAGS) -o $@ $(MAKE_SMBCODEPAGE_OBJ) $(LDFLAGS) $(LIBS)
+
+bin/make_unicodemap: $(MAKE_UNICODEMAP_OBJ) bin/.dummy
+	@echo Linking $@
+	@$(CC) $(FLAGS) -o $@ $(MAKE_UNICODEMAP_OBJ) $(LDFLAGS) $(LIBS)
+
+bin/nmblookup: $(NMBLOOKUP_OBJ) bin/.dummy
+	@echo Linking $@
+	@$(CC) $(FLAGS) -o $@ $(NMBLOOKUP_OBJ) $(LDFLAGS) $(LIBS)
+
+bin/make_printerdef: $(MAKE_PRINTERDEF_OBJ) bin/.dummy
+	@echo Linking $@
+	@$(CC) $(FLAGS) -o $@ $(MAKE_PRINTERDEF_OBJ) $(LDFLAGS) $(LIBS)
+
+bin/smbtorture: $(SMBTORTURE_OBJ) bin/.dummy
+	@echo Linking $@
+	@$(CC) $(FLAGS) -o $@ $(SMBTORTURE_OBJ) $(LDFLAGS) $(LIBS)
+
+bin/masktest: $(MASKTEST_OBJ) bin/.dummy
+	@echo Linking $@
+	@$(CC) $(FLAGS) -o $@ $(MASKTEST_OBJ) $(LDFLAGS) $(LIBS)
+
+bin/msgtest: $(MSGTEST_OBJ) bin/.dummy
+	@echo Linking $@
+	@$(CC) $(FLAGS) -o $@ $(MSGTEST_OBJ) $(LDFLAGS) $(LIBS)
+
+bin/smbcacls: $(SMBCACLS_OBJ) bin/.dummy
+	@echo Linking $@
+	@$(CC) $(FLAGS) -o $@ $(SMBCACLS_OBJ) $(LDFLAGS) $(DYNEXP) $(LIBS) $(LDAPLIBS)
+
+bin/locktest: $(LOCKTEST_OBJ) bin/.dummy
+	@echo Linking $@
+	@$(CC) $(FLAGS) -o $@ $(LOCKTEST_OBJ) $(LDFLAGS) $(LIBS)
+
+bin/locktest2: $(LOCKTEST2_OBJ) bin/.dummy
+	@echo Linking $@
+	@$(CC) $(FLAGS) -o $@ $(LOCKTEST2_OBJ) $(LDFLAGS) $(LIBS)
+
+bin/nsstest: $(NSSTEST_OBJ) bin/.dummy
+	@echo Linking $@
+	@$(CC) $(FLAGS) -o $@ $(NSSTEST_OBJ) $(LDFLAGS) $(LIBS)
+
+bin/rpctorture: $(RPCTORTURE_OBJ) bin/.dummy
+	@echo Linking $@
+	@$(CC) $(FLAGS) -o $@ $(RPCTORTURE_OBJ) $(LDFLAGS) $(DYNEXP) $(LIBS)
+
+bin/debug2html: $(DEBUG2HTML_OBJ) bin/.dummy
+	@echo Linking $@
+	@$(CC) $(FLAGS) -o $@ $(DEBUG2HTML_OBJ) $(LDFLAGS) $(LIBS)
+
+bin/smbfilter: $(SMBFILTER_OBJ) bin/.dummy
+	@echo Linking $@
+	@$(CC) $(FLAGS) -o $@ $(SMBFILTER_OBJ) $(LDFLAGS) $(LIBS)
+
+
+bin/smbw_sample: $(SMBW_OBJ) utils/smbw_sample.o bin/.dummy
+	@echo Linking $@
+	@$(CC) $(FLAGS) -o $@ $(SMBW_OBJ) utils/smbw_sample.o $(LDFLAGS) $(LIBS)
+
+bin/smbsh: $(SMBSH_OBJ) bin/.dummy
+	@echo Linking $@
+	@$(CC) $(FLAGS) -o $@ $(SMBSH_OBJ) $(LDFLAGS) $(LIBS)
+
+bin/smbwrapper.so: $(PICOBJS) bin/.dummy
+	@echo Linking shared library $@
+	@$(SHLD) -shared -o $@ $(PICOBJS) $(LDFLAGS) $(LIBS) \
+		-Wl,-soname=`basename $@`
+
+bin/smbwrapper.32.so: $(PICOBJS32) bin/.dummy
+	@echo Linking shared library $@
+	@$(SHLD) -32 -shared -o $@ $(PICOBJS32) $(LDFLAGS) $(LIBS) \
+		-Wl,-soname=`basename $@`
+
+bin/libsmbclient.so: $(LIBSMBCLIENT_PICOBJS) bin/.dummy
+	@echo Linking libsmbclient shared library $@
+	@$(SHLD) -shared -o $@ $(LIBSMBCLIENT_PICOBJS) $(LDFLAGS) $(LIBS) \
+		-Wl,-soname=`basename $@`.$(LIBSMBCLIENT_MAJOR)
+
+bin/libsmbclient.a: $(LIBSMBCLIENT_PICOBJS) bin/.dummy
+	@echo Linking libsmbclient non-shared library $@
+	@-$(AR) -rc $@ $(LIBSMBCLIENT_PICOBJS)
+
+bin/pam_smbpass.so: $(PAM_SMBPASS_OBJ) bin/.dummy
+	@echo Linking shared library $@
+	$(SHLD) -shared -o $@ $(PAM_SMBPASS_OBJ) $(LDFLAGS) -lpam $(DYNEXP) $(LIBS) $(LDAPLIBS) -lc \
+		-Wl,-soname=`basename $@`
+
+nsswitch/libnss_wins.so: $(NSS_OBJ)
+	@echo "Linking $@"
+	@$(SHLD) -shared -o $@ $(NSS_OBJ) -lc \
+		-Wl,-soname=`basename $@`
+
+bin/winbindd: $(WINBINDD_OBJ) bin/.dummy
+	@echo Linking $@
+	@$(LINK) -o $@ $(WINBINDD_OBJ) $(DYNEXP) $(LIBS) $(LDAPLIBS)
+
+nsswitch/libns_winbind.so: $(WINBIND_NSS_PICOBJS)
+	@echo "Linking $@"
+	@$(SHLD) -shared -o $@ $(WINBIND_NSS_PICOBJS)  \
+		-Wl,-soname=`basename $@`
+
+nsswitch/libnss_winbind.so: $(WINBIND_NSS_PICOBJS)
+	@echo "Linking $@"
+	@$(SHLD) -shared -o $@ $(WINBIND_NSS_PICOBJS)  \
+		-Wl,-soname=`basename $@`
+
+nsswitch/pam_winbind.so: $(PAM_WINBIND_OBJ)
+	@echo Linking $@
+	@$(SHLD) -shared -o $@ $(PAM_WINBIND_OBJ) \
+		-Wl,-soname=`basename $@`
+
+bin/wbinfo: $(WBINFO_OBJ) $(PARAM_OBJ) $(LIB_OBJ) $(NOPROTO_OBJ) \
+			$(UBIQX_OBJ) $(POPT_OBJS) bin/.dummy
+	@echo Linking $@
+	@$(LINK) -o $@ $(WBINFO_OBJ) $(PARAM_OBJ) $(LIB_OBJ) $(NOPROTO_OBJ) \
+		$(UBIQX_OBJ) $(LIBS) $(POPT_OBJS)
+
+bin/tdbbackup: $(TDBBACKUP_OBJ) bin/.dummy
+	@echo Linking $@
+	@$(CC) $(FLAGS) -o $@ $(TDBBACKUP_OBJ)
+
+bin/tdbdump: $(TDBDUMP_OBJ)  bin/.dummy
+	@echo Linking $@
+	@$(CC) $(FLAGS) -o $@ $(TDBDUMP_OBJ)
+
+
+clean: 
+	-rm -f core */*~ *~ */*.o */*.po */*.po32 */*.so* */*.a
+
+winbindd_proto:
+	@cd $(srcdir) && $(SHELL) script/mkproto.sh $(AWK) \
+		-h _WINBINDD_PROTO_H_ nsswitch/winbindd_proto.h \
+		$(WINBINDD_OBJ1)
+
+proto: 
+	@echo rebuilding include/proto.h
+	@cd $(srcdir) && $(AWK) -f script/mkproto.awk `echo $(PROTO_OBJ) | tr ' ' '\n' | sed -e 's/\.o/\.c/g' | sort -u | egrep -v 'ubiqx/|wrapped'` > include/proto.h
+
+etags:
+	etags `find $(srcdir) -name "*.[ch]" | grep -v /CVS/`
+
+ctags:
+	ctags `find $(srcdir) -name "*.[ch]" | grep -v /CVS/`
+
+distclean: clean
+	-rm -f config.log $(PROGS) $(SPROGS) $(WINBIND_PROGS) $(WINBIND_SPROGS) $(LPROGS) bin/.dummy
+	-rm -f bin/*
+	-rmdir bin
+
+
+# this target is really just for my use. It only works on a limited
+# range of machines and is used to produce a list of potentially
+# dead (ie. unused) functions in the code. (tridge)
+finddead:
+	nm */*.o |grep 'U ' | awk '{print $$2}' | sort -u > nmused.txt
+	nm */*.o |grep 'T ' | awk '{print $$3}' | sort -u > nmfns.txt
+	comm -13 nmused.txt nmfns.txt 
+
+
+
diff -pruwN samba-2.2.12/source/Makefile.in samba-2.2.12-livebox/Makefile.in
--- samba-2.2.12/source/Makefile.in	2004-08-12 20:24:19.000000000 +0200
+++ samba-2.2.12-livebox/Makefile.in	1970-01-01 01:00:00.000000000 +0100
@@ -1,803 +0,0 @@
-##########################################################################
-# Makefile.in for Samba - rewritten for autoconf support
-# Copyright Andrew Tridgell 1992-1998
-###########################################################################
-
-prefix=@prefix@
-exec_prefix=@exec_prefix@
-mandir=@mandir@
-sysconfdir=@sysconfdir@
-
-LIBS=@LIBS@
-LDAPLIBS=@LDAPLIBS@
-CC=@CC@
-SHLD=@SHLD@ 
-CFLAGS=@CFLAGS@
-CPPFLAGS=@CPPFLAGS@
-LDFLAGS=@LDFLAGS@
-AWK=@AWK@
-DYNEXP=@DYNEXP@
-
-TERMLDFLAGS=@TERMLDFLAGS@
-TERMLIBS=@TERMLIBS@
-
-LINK=$(CC) $(FLAGS) $(LDFLAGS)
-
-INSTALLCMD=@INSTALL@
-INSTALLCLIENTCMD_SH=@INSTALLCLIENTCMD_SH@
-INSTALLCLIENTCMD_A=@INSTALLCLIENTCMD_A@
-
-VPATH=@srcdir@
-srcdir=@srcdir@
-builddir=@builddir@
-top_builddir=.
-SHELL=/bin/sh
-
-BASEDIR= @prefix@
-BINDIR = @bindir@
-DATADIR = @datadir@
-# sbindir is mapped to bindir when compiling SAMBA in 2.0.x compatibility mode.
-SBINDIR = @sbindir@
-LIBDIR = @libdir@
-VARDIR = @localstatedir@
-CONFIGDIR = @configdir@
-MANDIR = @mandir@
-INCLUDEDIR = @includedir@
-
-# The permissions to give the executables
-INSTALLPERMS = 0755
-
-# set these to where to find various files
-# These can be overridden by command line switches (see smbd(8))
-# or in smb.conf (see smb.conf(5))
-LOGFILEBASE = @logfilebase@
-CONFIGFILE = $(CONFIGDIR)/smb.conf
-LMHOSTSFILE = $(CONFIGDIR)/lmhosts
-DRIVERFILE = $(CONFIGDIR)/printers.def
-PASSWD_PROGRAM = @passwd_program@
-# This is where smbpasswd et al go
-PRIVATEDIR = @privatedir@
-
-SMB_PASSWD_FILE = $(PRIVATEDIR)/smbpasswd
-TDB_PASSWD_FILE = $(PRIVATEDIR)/smbpasswd.tdb
-
-# This is where SWAT images and help files go
-SWATDIR = @swatdir@
-
-# the directory where lock files go
-LOCKDIR = @lockdir@
-
-# the directorty where pid files go
-PIDDIR = @piddir@
-
-# libsmbclient support here
-BLDSHARED = @BLDSHARED@
-LIBSMBCLIENT_MAJOR=0
-LIBSMBCLIENT_MINOR=1
-
-# The directory where code page definition files go
-CODEPAGEDIR = @codepagedir@
-
-# The current codepage definition list.
-CODEPAGELIST= 437 737 775 850 852 861 932 866 949 950 936 1251 ISO8859-1 ISO8859-2 ISO8859-5 ISO8859-7 KOI8-R 857 ISO8859-9 \
-			ISO8859-13 ISO8859-15 1125 KOI8-U
-
-PASSWD_FLAGS = -DPASSWD_PROGRAM=\"$(PASSWD_PROGRAM)\" -DSMB_PASSWD_FILE=\"$(SMB_PASSWD_FILE)\" -DTDB_PASSWD_FILE=\"$(TDB_PASSWD_FILE)\"
-FLAGS1 = $(CFLAGS) @FLAGS1@ -Iinclude -I$(srcdir)/include -I$(srcdir)/ubiqx -I$(srcdir)/smbwrapper $(CPPFLAGS) -DLOGFILEBASE=\"$(LOGFILEBASE)\"
-FLAGS2 = -DCONFIGFILE=\"$(CONFIGFILE)\" -DLMHOSTSFILE=\"$(LMHOSTSFILE)\"  
-FLAGS3 = -DSWATDIR=\"$(SWATDIR)\" -DSBINDIR=\"$(SBINDIR)\" -DLOCKDIR=\"$(LOCKDIR)\" -DCODEPAGEDIR=\"$(CODEPAGEDIR)\"
-FLAGS4 = -DDRIVERFILE=\"$(DRIVERFILE)\" -DBINDIR=\"$(BINDIR)\" -DPIDDIR=\"$(PIDDIR)\" -DLIBDIR=\"$(LIBDIR)\"
-FLAGS5 = $(FLAGS1) $(FLAGS2) $(FLAGS3) $(FLAGS4) -DHAVE_INCLUDES_H
-FLAGS  = $(ISA) $(FLAGS5) $(PASSWD_FLAGS)
-FLAGS32  = $(ISA32) $(FLAGS5) $(PASSWD_FLAGS)
-
-WINBIND_PROGS = @WINBIND_TARGETS@
-WINBIND_SPROGS = @WINBIND_STARGETS@
-WINBIND_PAM_PROGS = @WINBIND_PAM_TARGETS@
-WINBIND_LPROGS = @WINBIND_LTARGETS@
-
-SPROGS = bin/smbd bin/nmbd bin/swat
-PROGS1 = bin/smbclient bin/smbspool bin/testparm bin/testprns bin/smbstatus bin/smbcontrol bin/tdbbackup bin/make_printerdef @RUNPROG@ 
-PROGS2 = bin/smbpasswd bin/make_smbcodepage bin/rpcclient bin/make_unicodemap bin/smbcacls @WRAPPROG@ @WRAP@ @WRAP32@ @PAM_MOD@ @PDBEDIT@ @LIBSMBCLIENT@
-MPROGS = @MPROGS@
-LPROGS = $(WINBIND_PAM_PROGS) $(WINBIND_LPROGS)
-PROGS = $(PROGS1) $(PROGS2) $(MPROGS) bin/nmblookup
-TORTURE_PROGS = bin/smbtorture bin/msgtest bin/masktest bin/locktest bin/locktest2
-SHLIBS = @LIBSMBCLIENT@
-
-SCRIPTS = $(srcdir)/script/smbtar  $(srcdir)/script/findsmb
-
-QUOTAOBJS=@QUOTAOBJS@
-
-######################################################################
-# object file lists
-######################################################################
-
-TDBBASE_OBJ = tdb/tdb.o tdb/spinlock.o
-TDB_OBJ = $(TDBBASE_OBJ) tdb/tdbutil.o 
-
-LIB_OBJ = lib/charcnv.o lib/charset.o lib/debug.o lib/fault.o \
-          lib/getsmbpass.o lib/interface.o lib/kanji.o lib/md4.o \
-          lib/interfaces.o lib/pidfile.o lib/replace.o \
-          lib/signal.o lib/system.o lib/sendfile.o lib/time.o \
-	  lib/ufc.o lib/genrand.o lib/username.o lib/util_getent.o lib/access.o lib/smbrun.o \
-	  lib/bitmap.o lib/crc32.o lib/snprintf.o lib/wins_srv.o \
-	  lib/util_str.o lib/util_sid.o \
-	  lib/util_unistr.o lib/util_file.o \
-	  lib/util.o lib/util_sock.o lib/util_sec.o smbd/ssl.o \
-	  lib/talloc.o lib/hash.o lib/substitute.o lib/fsusage.o \
-	  lib/ms_fnmatch.o lib/select.o lib/error.o lib/messages.o \
-	  lib/pam_errors.o nsswitch/wb_client.o nsswitch/wb_common.o $(TDB_OBJ)
-
-READLINE_OBJ = lib/readline.o
-
-UBIQX_OBJ = ubiqx/ubi_BinTree.o ubiqx/ubi_Cache.o ubiqx/ubi_SplayTree.o \
-            ubiqx/ubi_dLinkList.o ubiqx/ubi_sLinkList.o ubiqx/debugparse.o
-
-PARAM_OBJ = param/loadparm.o param/params.o 
-
-LIBSMB_OBJ = libsmb/clientgen.o libsmb/cliconnect.o libsmb/clifile.o \
-		libsmb/clirap.o libsmb/clierror.o libsmb/climessage.o \
-		libsmb/clireadwrite.o libsmb/clilist.o libsmb/cliprint.o \
-		libsmb/clitrans.o libsmb/clisecdesc.o libsmb/clidgram.o \
-		libsmb/namequery.o libsmb/nmblib.o libsmb/clistr.o \
-		libsmb/nterr.o libsmb/smbdes.o libsmb/smbencrypt.o \
-		libsmb/smberr.o libsmb/credentials.o libsmb/pwd_cache.o \
-		libsmb/clioplock.o libsmb/errormap.o libsmb/doserr.o \
-		libsmb/passchange.o libsmb/unexpected.o $(RPC_PARSE_OBJ1) \
-		libsmb/namecache.o
-
-LIBMSRPC_OBJ = libsmb/cli_lsarpc.o libsmb/cli_samr.o libsmb/cli_spoolss.o \
-				libsmb/cli_netlogon.o libsmb/cli_srvsvc.o libsmb/cli_dfs.o \
-				libsmb/cli_reg.o \
-				rpc_client/cli_pipe.o libsmb/cli_pipe_util.o
-
-RPC_SERVER_OBJ = rpc_server/srv_lsa.o rpc_server/srv_lsa_nt.o \
-                 rpc_server/srv_lsa_hnd.o rpc_server/srv_netlog.o rpc_server/srv_netlog_nt.o \
-                 rpc_server/srv_pipe_hnd.o rpc_server/srv_reg.o rpc_server/srv_reg_nt.o \
-                 rpc_server/srv_samr.o rpc_server/srv_samr_nt.o rpc_server/srv_srvsvc.o rpc_server/srv_srvsvc_nt.o \
-                 rpc_server/srv_util.o rpc_server/srv_wkssvc.o rpc_server/srv_wkssvc_nt.o \
-                 rpc_server/srv_pipe.o rpc_server/srv_dfs.o rpc_server/srv_dfs_nt.o \
-		 rpc_server/srv_spoolss.o rpc_server/srv_spoolss_nt.o rpc_client/cli_spoolss_notify.o
-
-# this includes only the low level parse code, not stuff
-# that requires knowledge of security contexts
-RPC_PARSE_OBJ1 = rpc_parse/parse_prs.o rpc_parse/parse_sec.o \
-				rpc_parse/parse_misc.o
-
-RPC_PARSE_OBJ = rpc_parse/parse_lsa.o rpc_parse/parse_net.o \
-                rpc_parse/parse_reg.o rpc_parse/parse_rpc.o \
-                rpc_parse/parse_samr.o rpc_parse/parse_srv.o \
-                rpc_parse/parse_wks.o \
-		rpc_parse/parse_spoolss.o rpc_parse/parse_dfs.o
-
-RPC_CLIENT_OBJ = rpc_client/cli_netlogon.o rpc_client/cli_pipe.o \
-		rpc_client/cli_login.o \
-		rpc_client/cli_trust.o
-
-LOCKING_OBJ = locking/locking.o locking/brlock.o locking/posix.o
-
-PASSDB_OBJ = passdb/passdb.o passdb/secrets.o \
-	     passdb/pass_check.o passdb/smbpassfile.o \
-	     passdb/machine_sid.o passdb/pdb_smbpasswd.o \
-	     passdb/pampass.o passdb/pdb_tdb.o passdb/pdb_ldap.o \
-	     passdb/pdb_nisplus.o
-
-PROFILE_OBJ = profile/profile.o
-
-OPLOCK_OBJ = smbd/oplock.o smbd/oplock_irix.o smbd/oplock_linux.o
-
-NOTIFY_OBJ = smbd/notify.o smbd/notify_hash.o smbd/notify_kernel.o
-
-SMBD_OBJ1 = smbd/server.o smbd/files.o smbd/chgpasswd.o smbd/connection.o \
-	    smbd/utmp.o smbd/session.o \
-            smbd/dfree.o smbd/dir.o smbd/password.o smbd/conn.o smbd/fileio.o \
-            smbd/ipc.o smbd/lanman.o smbd/mangle.o smbd/mangle_hash2.o smbd/mangle_hash.o \
-	    smbd/mangle_map.o smbd/negprot.o smbd/message.o smbd/nttrans.o smbd/pipes.o \
-            smbd/reply.o smbd/trans2.o smbd/uid.o \
-	    smbd/dosmode.o smbd/filename.o smbd/open.o smbd/close.o \
-	    smbd/blocking.o smbd/sec_ctx.o \
-	    smbd/vfs.o smbd/vfs-wrap.o smbd/statcache.o \
-            smbd/posix_acls.o lib/sysacls.o \
-	    smbd/process.o smbd/service.o smbd/error.o \
-	    printing/printfsp.o lib/util_seaccess.o \
-	    libsmb/cli_pipe_util.o
-
-PRINTING_OBJ = printing/pcap.o printing/print_svid.o \
-				 printing/print_cups.o printing/print_generic.o \
-				printing/lpq_parse.o printing/load.o
-
-PRINTBACKEND_OBJ = printing/printing.o printing/nt_printing.o
-
-MSDFS_OBJ = msdfs/msdfs.o 
-
-SMBD_OBJ = $(SMBD_OBJ1) $(MSDFS_OBJ) $(PARAM_OBJ) $(LIBSMB_OBJ) $(UBIQX_OBJ) \
-           $(RPC_SERVER_OBJ) $(RPC_PARSE_OBJ) $(RPC_CLIENT_OBJ) \
-           $(LOCKING_OBJ) $(PASSDB_OBJ) $(PRINTING_OBJ) $(PROFILE_OBJ) $(LIB_OBJ) \
-	   $(PRINTBACKEND_OBJ) $(QUOTAOBJS) $(OPLOCK_OBJ) $(NOTIFY_OBJ)
-
-
-NMBD_OBJ1 = nmbd/asyncdns.o nmbd/nmbd.o nmbd/nmbd_become_dmb.o \
-            nmbd/nmbd_become_lmb.o nmbd/nmbd_browserdb.o \
-            nmbd/nmbd_browsesync.o nmbd/nmbd_elections.o \
-            nmbd/nmbd_incomingdgrams.o nmbd/nmbd_incomingrequests.o \
-            nmbd/nmbd_lmhosts.o nmbd/nmbd_logonnames.o nmbd/nmbd_mynames.o \
-            nmbd/nmbd_namelistdb.o nmbd/nmbd_namequery.o \
-            nmbd/nmbd_nameregister.o nmbd/nmbd_namerelease.o \
-            nmbd/nmbd_nodestatus.o nmbd/nmbd_packets.o \
-            nmbd/nmbd_processlogon.o nmbd/nmbd_responserecordsdb.o \
-            nmbd/nmbd_sendannounce.o nmbd/nmbd_serverlistdb.o \
-            nmbd/nmbd_subnetdb.o nmbd/nmbd_winsproxy.o nmbd/nmbd_winsserver.o \
-            nmbd/nmbd_workgroupdb.o nmbd/nmbd_synclists.o
-
-NMBD_OBJ = $(NMBD_OBJ1) $(PARAM_OBJ) $(LIBSMB_OBJ) $(UBIQX_OBJ) \
-           $(PROFILE_OBJ) $(LIB_OBJ)
-
-SWAT_OBJ = web/cgi.o web/diagnose.o web/startstop.o web/statuspage.o \
-           web/swat.o $(PRINTING_OBJ) $(LIBSMB_OBJ) $(LOCKING_OBJ) \
-           $(PARAM_OBJ) $(PASSDB_OBJ) $(RPC_PARSE_OBJ) \
-           $(UBIQX_OBJ) $(LIB_OBJ) 
-
-SMBSH_OBJ = smbwrapper/smbsh.o smbwrapper/shared.o \
-            $(PARAM_OBJ) $(UBIQX_OBJ) $(LIB_OBJ)
-
-MAKE_SMBCODEPAGE_OBJ = utils/make_smbcodepage.o $(PARAM_OBJ) \
-                       $(UBIQX_OBJ) $(LIB_OBJ)
-
-MAKE_UNICODEMAP_OBJ = utils/make_unicodemap.o $(PARAM_OBJ) \
-                       $(UBIQX_OBJ) $(LIB_OBJ)
-
-MAKE_PRINTERDEF_OBJ = utils/make_printerdef.o $(PARAM_OBJ) \
-                      $(UBIQX_OBJ) $(LIB_OBJ)
-
-STATUS_OBJ = utils/status.o $(LOCKING_OBJ) $(PARAM_OBJ) \
-             $(UBIQX_OBJ) $(PROFILE_OBJ) $(LIB_OBJ)
-
-SMBCONTROL_OBJ = utils/smbcontrol.o $(LOCKING_OBJ) $(PARAM_OBJ) \
-             $(UBIQX_OBJ) $(PROFILE_OBJ) $(LIB_OBJ)
-
-TESTPARM_OBJ = utils/testparm.o \
-               $(PARAM_OBJ) $(UBIQX_OBJ) $(LIB_OBJ)
-
-TESTPRNS_OBJ = utils/testprns.o $(PARAM_OBJ) $(PRINTING_OBJ) $(UBIQX_OBJ) \
-               $(LIB_OBJ)
-
-SMBPASSWD_OBJ = utils/smbpasswd.o $(PARAM_OBJ) \
-				$(LIBSMB_OBJ) $(PASSDB_OBJ) $(GROUPDB_OBJ)\
-				$(UBIQX_OBJ) $(RPC_CLIENT_OBJ) $(RPC_PARSE_OBJ) $(LIB_OBJ) \
-				libsmb/cli_lsarpc.o libsmb/cli_samr.o libsmb/cli_pipe_util.o
-
-PDBEDIT_OBJ = utils/pdbedit.o $(PARAM_OBJ) $(LIBSMB_OBJ) $(PASSDB_OBJ) \
-		$(UBIQX_OBJ) $(LIB_OBJ) $(GROUPDB_OBJ)
-
-RPCCLIENT_OBJ1 = rpcclient/rpcclient.o rpcclient/cmd_lsarpc.o \
-				rpcclient/cmd_samr.o rpcclient/cmd_spoolss.o \
-				rpcclient/cmd_netlogon.o rpcclient/cmd_srvsvc.o \
-				rpcclient/cmd_dfs.o rpcclient/cmd_reg.o \
-				rpc_client/cli_login.o rpc_client/cli_netlogon.o \
-				rpcclient/display_sec.o
- 
-RPCCLIENT_OBJ = $(RPCCLIENT_OBJ1) \
-				$(PARAM_OBJ) $(LIBSMB_OBJ) $(UBIQX_OBJ) $(LIB_OBJ) \
-				$(RPC_PARSE_OBJ) $(PASSDB_OBJ) $(LIBMSRPC_OBJ) \
-				$(READLINE_OBJ)
-
-PAM_WINBIND_OBJ = nsswitch/pam_winbind.po nsswitch/wb_common.po lib/snprintf.po
-
-SMBW_OBJ = smbwrapper/smbw.o \
-		smbwrapper/smbw_dir.o smbwrapper/smbw_stat.o \
-		smbwrapper/realcalls.o smbwrapper/shared.o \
-		$(LIBSMB_OBJ) $(PARAM_OBJ) \
-                $(UBIQX_OBJ) $(LIB_OBJ)
-
-SMBWRAPPER_OBJ = $(SMBW_OBJ) smbwrapper/wrapped.o
-
-LIBSMBCLIENT_OBJ = libsmb/libsmbclient.o $(LIB_OBJ) $(LIBSMB_OBJ) \
-		$(PARAM_OBJ) $(UBIQX_OBJ)
-
-CLIENT_OBJ = client/client.o client/clitar.o \
-             $(PARAM_OBJ) $(LIBSMB_OBJ) $(UBIQX_OBJ) $(LIB_OBJ) \
-             $(READLINE_OBJ)
-
-CUPS_OBJ = client/smbspool.o $(PARAM_OBJ) $(LIBSMB_OBJ) $(UBIQX_OBJ) $(LIB_OBJ)
-
-MOUNT_OBJ = client/smbmount.o \
-             $(PARAM_OBJ) $(LIBSMB_OBJ) $(UBIQX_OBJ) $(LIB_OBJ)
-
-MNT_OBJ = client/smbmnt.o \
-             $(PARAM_OBJ) $(LIBSMB_OBJ) $(UBIQX_OBJ) $(LIB_OBJ)
-
-UMOUNT_OBJ = client/smbumount.o \
-             $(PARAM_OBJ) $(LIBSMB_OBJ) $(UBIQX_OBJ) $(LIB_OBJ)
-
-NMBLOOKUP_OBJ = utils/nmblookup.o $(PARAM_OBJ) $(UBIQX_OBJ) \
-                $(LIBSMB_OBJ) $(LIB_OBJ)
-
-SMBTORTURE_OBJ = utils/torture.o utils/nbio.o $(LIBSMB_OBJ) $(PARAM_OBJ) \
-                 $(UBIQX_OBJ) $(LIB_OBJ)
-
-MASKTEST_OBJ = utils/masktest.o $(LIBSMB_OBJ) $(PARAM_OBJ) \
-                 $(UBIQX_OBJ) $(LIB_OBJ)
-
-MSGTEST_OBJ = utils/msgtest.o $(LIBSMB_OBJ) $(PARAM_OBJ) \
-                 $(UBIQX_OBJ) $(LIB_OBJ)
-
-LOCKTEST_OBJ = utils/locktest.o $(LOCKING_OBJ) $(LIBSMB_OBJ) $(PARAM_OBJ) \
-                 $(UBIQX_OBJ) $(LIB_OBJ)
-
-NSSTEST_OBJ = utils/nsstest.o $(LIBSMB_OBJ) $(PARAM_OBJ) \
-				$(UBIQX_OBJ) $(LIB_OBJ)
-
-SMBCACLS_OBJ = utils/smbcacls.o $(LOCKING_OBJ) $(LIBSMB_OBJ) $(PARAM_OBJ) \
-				$(UBIQX_OBJ) $(LIB_OBJ) $(RPC_PARSE_OBJ) $(PASSDB_OBJ) \
-				$(LIBMSRPC_OBJ)
-
-
-LOCKTEST2_OBJ = utils/locktest2.o $(LOCKING_OBJ) $(LIBSMB_OBJ) $(PARAM_OBJ) \
-                 $(UBIQX_OBJ) $(LIB_OBJ)
-
-RPCTORTURE_OBJ = utils/rpctorture.o \
-             rpcclient/display.o \
-             rpcclient/cmd_lsarpc.o \
-             rpcclient/cmd_wkssvc.o \
-             rpcclient/cmd_samr.o \
-             rpcclient/cmd_srvsvc.o \
-             rpcclient/cmd_netlogon.o \
-             $(PARAM_OBJ) $(LIBSMB_OBJ) $(UBIQX_OBJ) $(LIB_OBJ) \
-             $(RPC_PARSE_OBJ) $(PASSDB_OBJ)
-
-RPCCHECK_OBJ = utils/rpccheck.o \
-		$(LIB_OBJ)  $(RPC_PARSE_OBJ) \
-		$(UBIQX_OBJ) $(PARAM_OBJ) $(LIBSMB_OBJ)
-
-DEBUG2HTML_OBJ = utils/debug2html.o ubiqx/debugparse.o
-
-SMBFILTER_OBJ = utils/smbfilter.o $(LIBSMB_OBJ) $(PARAM_OBJ) \
-                 $(UBIQX_OBJ) $(LIB_OBJ)
-
-PROTO_OBJ = $(SMBD_OBJ) $(NMBD_OBJ) $(SWAT_OBJ) $(CLIENT_OBJ) \
-	    $(SMBWRAPPER_OBJ) $(SMBTORTURE_OBJ) $(RPCCLIENT_OBJ1) \
-	    $(RPC_CLIENT_OBJ) $(LIBMSRPC_OBJ)
-
-NSS_OBJ_0 = nsswitch/wins.o $(PARAM_OBJ) $(UBIQX_OBJ) $(LIBSMB_OBJ) $(LIB_OBJ)
-NSS_OBJ = $(NSS_OBJ_0:.o=.po)
-
-PICOBJS = $(SMBWRAPPER_OBJ:.o=.po)
-PICOBJS32 = $(SMBWRAPPER_OBJ:.o=.po32)
-
-PAM_SMBPASS_OBJ_0 = pam_smbpass/pam_smb_auth.o pam_smbpass/pam_smb_passwd.o \
-		pam_smbpass/pam_smb_acct.o pam_smbpass/support.o \
-		lib/debug.o lib/util_sid.o lib/messages.o lib/util_str.o \
-		lib/wins_srv.o lib/substitute.o lib/select.o lib/util.o \
-		nsswitch/wb_client.o nsswitch/wb_common.o lib/system.o \
-		lib/charset.o lib/util_file.o lib/kanji.o lib/genrand.o \
-		lib/username.o lib/util_getent.o lib/charcnv.o lib/time.o lib/md4.o \
-		lib/util_unistr.o lib/signal.o lib/talloc.o lib/ms_fnmatch.o \
-		lib/util_sock.o lib/smbrun.o lib/util_sec.o lib/snprintf.o \
-		ubiqx/ubi_sLinkList.o libsmb/smbencrypt.o libsmb/smbdes.o \
-		smbd/ssl.o lib/access.o \
-		lib/interfaces.o $(PARAM_OBJ) $(TDB_OBJ) $(PASSDB_OBJ)
-
-PAM_SMBPASS_OBJ = $(PAM_SMBPASS_OBJ_0:.o=.po)
-LIBSMBCLIENT_PICOBJS = $(LIBSMBCLIENT_OBJ:.o=.po)
-
-WINBINDD_OBJ1 = \
-		nsswitch/winbindd.o       \
-		nsswitch/winbindd_user.o  \
-		nsswitch/winbindd_group.o \
-		nsswitch/winbindd_idmap.o \
-		nsswitch/winbindd_util.o  \
-		nsswitch/winbindd_cache.o \
-		nsswitch/winbindd_pam.o   \
-		nsswitch/winbindd_sid.o   \
-		nsswitch/winbindd_misc.o  \
-		nsswitch/winbindd_cm.o \
-		nsswitch/winbindd_wins.o \
-		nsswitch/winbindd_rpc.o
-
-NECESSARY_BECAUSE_SAMBA_DEPENDENCIES_ARE_SO_BROKEN_OBJ = \
-		smbd/password.o smbd/utmp.o smbd/session.o smbd/uid.o smbd/sec_ctx.o \
-		rpc_client/cli_netlogon.o rpc_client/cli_login.o \
-		smbd/chgpasswd.o
-
-WINBINDD_OBJ = \
-		$(WINBINDD_OBJ1) $(NOPROTO_OBJ) $(PASSDB_OBJ) \
-		$(PARAM_OBJ) $(UBIQX_OBJ) $(LIB_OBJ) \
-		$(LIBSMB_OBJ) $(LIBMSRPC_OBJ) $(RPC_PARSE_OBJ) \
-		$(GROUPDB_OBJ) $(PROFILE_OBJ) \
-		$(NECESSARY_BECAUSE_SAMBA_DEPENDENCIES_ARE_SO_BROKEN_OBJ)
-
-WBINFO_OBJ = nsswitch/wbinfo.o libsmb/smbencrypt.o libsmb/smbdes.o \
-	passdb/secrets.o
-
-WINBIND_NSS_OBJ = nsswitch/winbind_nss.o nsswitch/wb_common.o @WINBIND_NSS_EXTRA_OBJS@
-
-WINBIND_NSS_PICOBJS = $(WINBIND_NSS_OBJ:.o=.po)
-
-POPT_OBJS=popt/findme.o popt/popt.o popt/poptconfig.o \
-	popt/popthelp.o popt/poptparse.o
-
-TDBBACKUP_OBJ = tdb/tdbbackup.o $(TDBBASE_OBJ)
-
-TDBDUMP_OBJ =  tdb/tdbdump.o $(TDBBASE_OBJ)
-
-######################################################################
-# now the rules...
-######################################################################
-
-all : CHECK $(SPROGS) $(PROGS) $(WINBIND_PROGS) $(WINBIND_SPROGS) $(LPROGS)
-
-# The following "everything" is NOT needed except by Samba developers - so do not use this!
-everything : CHECK $(SPROGS) $(PROGS) $(SHLIBS) nsswitch smbwrapper smbtorture debug2html smbfilter
-
-pam_smbpass : CHECK bin/pam_smbpass.@SHLIBEXT@
-
-smbwrapper : CHECK @WRAPPROG@ @WRAP@ @WRAP32@
-
-libsmbclient : CHECK bin/libsmbclient.a @LIBSMBCLIENT_SHARED@
-
-torture : CHECK $(TORTURE_PROGS)
-
-smbtorture : CHECK bin/smbtorture
-
-masktest : CHECK bin/masktest
-
-msgtest : CHECK bin/msgtest
-
-locktest : CHECK bin/locktest
-
-smbcacls : CHECK bin/smbcacls
-
-locktest2 : CHECK bin/locktest2
-
-rpctorture : CHECK bin/rpctorture
-
-bin/rpccheck: $(RPCCHECK_OBJ) bin/.dummy
-	@echo Linking $@
-	@$(CC) $(FLAGS) -o $@ $(RPCCHECK_OBJ) $(LDFLAGS) $(LIBS)
-
-debug2html : CHECK bin/debug2html
-
-smbfilter : CHECK bin/smbfilter
-
-nsswitch : CHECK $(WINBIND_PROGS) $(WINBIND_SPROGS) $(LPROGS)
-
-wins : CHECK nsswitch/libnss_wins.@SHLIBEXT@
-
-.SUFFIXES:
-.SUFFIXES: .c .o .po .po32 .lo
-
-CHECK:
-	@echo "Using FLAGS = $(FLAGS)"
-	@echo "Using FLAGS32 = $(FLAGS32)"
-	@echo "Using LIBS = $(LIBS)"
-
-MAKEDIR = || exec false; \
-	  if test -d "$$dir"; then :; else \
-	  echo mkdir "$$dir"; \
-	  mkdir -p "$$dir" >/dev/null 2>&1 || \
-	  test -d "$$dir" || \
-	  mkdir "$$dir" || \
-	  exec false; fi || exec false
-
-.c.o: 
-	@if (: >> $@ || : > $@) >/dev/null 2>&1; then rm -f $@; else \
-	 dir=`echo $@ | sed 's,/[^/]*$$,,;s,^$$,.,'` $(MAKEDIR); fi
-	@echo Compiling $*.c
-	@$(CC) -I. -I$(srcdir) $(FLAGS) -c $< \
-	  -o $@ 
-@BROKEN_CC@	-mv `echo $@ | sed 's%^.*/%%g'` $@
-
-.c.po: 
-	@if (: >> $@ || : > $@) >/dev/null 2>&1; then rm -f $@; else \
-	  dir=`echo $@ | sed 's,/[^/]*$$,,;s,^$$,.,'` $(MAKEDIR); fi
-	@echo Compiling $*.c with @PICFLAG@
-	@$(CC) -I. -I$(srcdir) $(FLAGS) @PICFLAG@ -c $< \
-	  -o $*.@PICSUFFIX@ 
-@BROKEN_CC@	-mv `echo $@ | sed -e 's%^.*/%%g' -e 's%\.po$$%.o%'` $@.o
-	@mv $*.po.o $@
-
-# this is for IRIX
-.c.po32: 
-	@if (: >> $@ || : > $@) >/dev/null 2>&1; then rm -f $@; else \
-	  dir=`echo $@ | sed 's,/[^/]*$$,,;s,^$$,.,'` $(MAKEDIR); fi
-	@echo Compiling $*.c with @PICFLAG@ and -32
-	@$(CC) -32 -I. -I$(srcdir) $(FLAGS32) @PICFLAG@ -c $< \
-	  -o $*.po32.o 
-@BROKEN_CC@	-mv `echo $@ | sed -e 's%^.*/%%g' -e 's%\.po32$$%.o%'` $@.o
-	@mv $*.po32.o $@
-
-bin/.dummy:
-	@if (: >> $@ || : > $@) >/dev/null 2>&1; then :; else \
-	  dir=bin $(MAKEDIR); fi
-	@: >> $@ || : > $@ # what a fancy emoticon!
-
-bin/smbd: $(SMBD_OBJ) bin/.dummy
-	@echo Linking $@
-	@$(CC) $(FLAGS) -o $@ $(SMBD_OBJ) $(LDFLAGS) $(DYNEXP) $(LIBS) $(LDAPLIBS)
-
-bin/nmbd: $(NMBD_OBJ) bin/.dummy
-	@echo Linking $@
-	@$(CC) $(FLAGS) -o $@ $(NMBD_OBJ) $(LDFLAGS) $(LIBS)
-
-bin/swat: $(SWAT_OBJ) bin/.dummy
-	@echo Linking $@
-	@$(CC) $(FLAGS) -o $@ $(SWAT_OBJ) $(LDFLAGS) $(DYNEXP) $(LIBS) $(LDAPLIBS) 
-
-bin/rpcclient: $(RPCCLIENT_OBJ) bin/.dummy
-	@echo Linking $@
-	@$(CC) $(FLAGS) -o $@ $(RPCCLIENT_OBJ) $(LDFLAGS) $(DYNEXP) $(TERMLDFLAGS) $(TERMLIBS) $(LIBS) $(LDAPLIBS)
-
-bin/smbclient: $(CLIENT_OBJ) bin/.dummy
-	@echo Linking $@
-	@$(CC) $(FLAGS) -o $@ $(CLIENT_OBJ) $(LDFLAGS) $(TERMLDFLAGS) $(TERMLIBS) $(LIBS)
-
-bin/smbspool: $(CUPS_OBJ) bin/.dummy
-	@echo Linking $@
-	@$(CC) $(FLAGS) -o $@ $(CUPS_OBJ) $(LDFLAGS) $(LIBS)
-
-bin/smbmount: $(MOUNT_OBJ) bin/.dummy
-	@echo Linking $@
-	@$(CC) $(FLAGS) -o $@ $(MOUNT_OBJ) $(LDFLAGS) $(LIBS)
-
-bin/smbmnt: $(MNT_OBJ) bin/.dummy
-	@echo Linking $@
-	@$(CC) $(FLAGS) -o $@ $(MNT_OBJ) $(LDFLAGS) $(LIBS)
-
-bin/smbumount: $(UMOUNT_OBJ) bin/.dummy
-	@echo Linking $@
-	@$(CC) $(FLAGS) -o $@ $(UMOUNT_OBJ) $(LDFLAGS) $(LIBS)
-
-bin/testparm: $(TESTPARM_OBJ) bin/.dummy
-	@echo Linking $@
-	@$(CC) $(FLAGS) -o $@ $(TESTPARM_OBJ) $(LDFLAGS) $(LIBS)
-
-bin/testprns: $(TESTPRNS_OBJ) bin/.dummy
-	@echo Linking $@
-	@$(CC) $(FLAGS) -o $@ $(TESTPRNS_OBJ) $(LDFLAGS) $(LIBS)
-
-bin/smbstatus: $(STATUS_OBJ) bin/.dummy
-	@echo Linking $@
-	@$(CC) $(FLAGS) -o $@ $(STATUS_OBJ) $(LDFLAGS) $(LIBS)
-
-bin/smbcontrol: $(SMBCONTROL_OBJ) bin/.dummy
-	@echo Linking $@
-	@$(CC) $(FLAGS) -o $@ $(SMBCONTROL_OBJ) $(LDFLAGS) $(LIBS)
-
-bin/smbpasswd: $(SMBPASSWD_OBJ) bin/.dummy
-	@echo Linking $@
-	@$(CC) $(FLAGS) -o $@ $(SMBPASSWD_OBJ) $(LDFLAGS) $(DYNEXP) $(LIBS) $(LDAPLIBS)
-
-bin/pdbedit: $(PDBEDIT_OBJ) bin/.dummy
-	@echo Linking $@
-	@$(CC) $(FLAGS) -o $@ $(PDBEDIT_OBJ) $(LDFLAGS) $(DYNEXP) $(LIBS) $(LDAPLIBS)
-
-bin/make_smbcodepage: $(MAKE_SMBCODEPAGE_OBJ) bin/.dummy
-	@echo Linking $@
-	@$(CC) $(FLAGS) -o $@ $(MAKE_SMBCODEPAGE_OBJ) $(LDFLAGS) $(LIBS)
-
-bin/make_unicodemap: $(MAKE_UNICODEMAP_OBJ) bin/.dummy
-	@echo Linking $@
-	@$(CC) $(FLAGS) -o $@ $(MAKE_UNICODEMAP_OBJ) $(LDFLAGS) $(LIBS)
-
-bin/nmblookup: $(NMBLOOKUP_OBJ) bin/.dummy
-	@echo Linking $@
-	@$(CC) $(FLAGS) -o $@ $(NMBLOOKUP_OBJ) $(LDFLAGS) $(LIBS)
-
-bin/make_printerdef: $(MAKE_PRINTERDEF_OBJ) bin/.dummy
-	@echo Linking $@
-	@$(CC) $(FLAGS) -o $@ $(MAKE_PRINTERDEF_OBJ) $(LDFLAGS) $(LIBS)
-
-bin/smbtorture: $(SMBTORTURE_OBJ) bin/.dummy
-	@echo Linking $@
-	@$(CC) $(FLAGS) -o $@ $(SMBTORTURE_OBJ) $(LDFLAGS) $(LIBS)
-
-bin/masktest: $(MASKTEST_OBJ) bin/.dummy
-	@echo Linking $@
-	@$(CC) $(FLAGS) -o $@ $(MASKTEST_OBJ) $(LDFLAGS) $(LIBS)
-
-bin/msgtest: $(MSGTEST_OBJ) bin/.dummy
-	@echo Linking $@
-	@$(CC) $(FLAGS) -o $@ $(MSGTEST_OBJ) $(LDFLAGS) $(LIBS)
-
-bin/smbcacls: $(SMBCACLS_OBJ) bin/.dummy
-	@echo Linking $@
-	@$(CC) $(FLAGS) -o $@ $(SMBCACLS_OBJ) $(LDFLAGS) $(DYNEXP) $(LIBS) $(LDAPLIBS)
-
-bin/locktest: $(LOCKTEST_OBJ) bin/.dummy
-	@echo Linking $@
-	@$(CC) $(FLAGS) -o $@ $(LOCKTEST_OBJ) $(LDFLAGS) $(LIBS)
-
-bin/locktest2: $(LOCKTEST2_OBJ) bin/.dummy
-	@echo Linking $@
-	@$(CC) $(FLAGS) -o $@ $(LOCKTEST2_OBJ) $(LDFLAGS) $(LIBS)
-
-bin/nsstest: $(NSSTEST_OBJ) bin/.dummy
-	@echo Linking $@
-	@$(CC) $(FLAGS) -o $@ $(NSSTEST_OBJ) $(LDFLAGS) $(LIBS)
-
-bin/rpctorture: $(RPCTORTURE_OBJ) bin/.dummy
-	@echo Linking $@
-	@$(CC) $(FLAGS) -o $@ $(RPCTORTURE_OBJ) $(LDFLAGS) $(DYNEXP) $(LIBS)
-
-bin/debug2html: $(DEBUG2HTML_OBJ) bin/.dummy
-	@echo Linking $@
-	@$(CC) $(FLAGS) -o $@ $(DEBUG2HTML_OBJ) $(LDFLAGS) $(LIBS)
-
-bin/smbfilter: $(SMBFILTER_OBJ) bin/.dummy
-	@echo Linking $@
-	@$(CC) $(FLAGS) -o $@ $(SMBFILTER_OBJ) $(LDFLAGS) $(LIBS)
-
-
-bin/smbw_sample: $(SMBW_OBJ) utils/smbw_sample.o bin/.dummy
-	@echo Linking $@
-	@$(CC) $(FLAGS) -o $@ $(SMBW_OBJ) utils/smbw_sample.o $(LDFLAGS) $(LIBS)
-
-bin/smbsh: $(SMBSH_OBJ) bin/.dummy
-	@echo Linking $@
-	@$(CC) $(FLAGS) -o $@ $(SMBSH_OBJ) $(LDFLAGS) $(LIBS)
-
-bin/smbwrapper.@SHLIBEXT@: $(PICOBJS) bin/.dummy
-	@echo Linking shared library $@
-	@$(SHLD) @LDSHFLAGS@ -o $@ $(PICOBJS) $(LDFLAGS) $(LIBS) \
-		@SONAMEFLAG@`basename $@`
-
-bin/smbwrapper.32.@SHLIBEXT@: $(PICOBJS32) bin/.dummy
-	@echo Linking shared library $@
-	@$(SHLD) -32 @LDSHFLAGS@ -o $@ $(PICOBJS32) $(LDFLAGS) $(LIBS) \
-		@SONAMEFLAG@`basename $@`
-
-bin/libsmbclient.@SHLIBEXT@: $(LIBSMBCLIENT_PICOBJS) bin/.dummy
-	@echo Linking libsmbclient shared library $@
-	@$(SHLD) @LDSHFLAGS@ -o $@ $(LIBSMBCLIENT_PICOBJS) $(LDFLAGS) $(LIBS) \
-		@SONAMEFLAG@`basename $@`.$(LIBSMBCLIENT_MAJOR)
-
-bin/libsmbclient.a: $(LIBSMBCLIENT_PICOBJS) bin/.dummy
-	@echo Linking libsmbclient non-shared library $@
-	@-$(AR) -rc $@ $(LIBSMBCLIENT_PICOBJS)
-
-bin/pam_smbpass.@SHLIBEXT@: $(PAM_SMBPASS_OBJ) bin/.dummy
-	@echo Linking shared library $@
-	$(SHLD) @LDSHFLAGS@ -o $@ $(PAM_SMBPASS_OBJ) $(LDFLAGS) -lpam $(DYNEXP) $(LIBS) $(LDAPLIBS) -lc \
-		@SONAMEFLAG@`basename $@`
-
-nsswitch/libnss_wins.so: $(NSS_OBJ)
-	@echo "Linking $@"
-	@$(SHLD) @LDSHFLAGS@ -o $@ $(NSS_OBJ) -lc \
-		@SONAMEFLAG@`basename $@`
-
-bin/winbindd: $(WINBINDD_OBJ) bin/.dummy
-	@echo Linking $@
-	@$(LINK) -o $@ $(WINBINDD_OBJ) $(DYNEXP) $(LIBS) $(LDAPLIBS)
-
-nsswitch/libns_winbind.so: $(WINBIND_NSS_PICOBJS)
-	@echo "Linking $@"
-	@$(SHLD) @LDSHFLAGS@ -o $@ $(WINBIND_NSS_PICOBJS) @WINBIND_NSS_EXTRA_LIBS@ \
-		@SONAMEFLAG@`basename $@`
-
-nsswitch/libnss_winbind.so: $(WINBIND_NSS_PICOBJS)
-	@echo "Linking $@"
-	@$(SHLD) @LDSHFLAGS@ -o $@ $(WINBIND_NSS_PICOBJS) @WINBIND_NSS_EXTRA_LIBS@ \
-		@SONAMEFLAG@`basename $@`
-
-nsswitch/pam_winbind.so: $(PAM_WINBIND_OBJ)
-	@echo Linking $@
-	@$(SHLD) @LDSHFLAGS@ -o $@ $(PAM_WINBIND_OBJ) \
-		@SONAMEFLAG@`basename $@`
-
-bin/wbinfo: $(WBINFO_OBJ) $(PARAM_OBJ) $(LIB_OBJ) $(NOPROTO_OBJ) \
-			$(UBIQX_OBJ) @BUILD_POPT@ bin/.dummy
-	@echo Linking $@
-	@$(LINK) -o $@ $(WBINFO_OBJ) $(PARAM_OBJ) $(LIB_OBJ) $(NOPROTO_OBJ) \
-		$(UBIQX_OBJ) $(LIBS) @BUILD_POPT@
-
-bin/tdbbackup: $(TDBBACKUP_OBJ) bin/.dummy
-	@echo Linking $@
-	@$(CC) $(FLAGS) -o $@ $(TDBBACKUP_OBJ)
-
-bin/tdbdump: $(TDBDUMP_OBJ)  bin/.dummy
-	@echo Linking $@
-	@$(CC) $(FLAGS) -o $@ $(TDBDUMP_OBJ)
-
-install: installbin installman installscripts installcp installswat
-
-installdirs:
-	$(SHELL) $(srcdir)/install-sh -d -m $(INSTALLPERMS) $(BASEDIR)
-	$(SHELL) $(srcdir)/install-sh -d -m $(INSTALLPERMS) $(SBINDIR)
-	$(SHELL) $(srcdir)/install-sh -d -m $(INSTALLPERMS) $(BINDIR)
-	$(SHELL) $(srcdir)/install-sh -d -m $(INSTALLPERMS) $(LIBDIR)
-	$(SHELL) $(srcdir)/install-sh -d -m $(INSTALLPERMS) $(VARDIR)
-	$(SHELL) $(srcdir)/install-sh -d -m $(INSTALLPERMS) $(PIDDIR)
-	$(SHELL) $(srcdir)/install-sh -d -m $(INSTALLPERMS) $(CODEPAGEDIR)
-
-installservers: all installdirs
-	@$(SHELL) $(srcdir)/script/installbin.sh $(INSTALLPERMS) $(BASEDIR) $(SBINDIR) $(LIBDIR) $(VARDIR) $(SPROGS)
-
-installbin: all installdirs
-	@$(SHELL) $(srcdir)/script/installbin.sh $(INSTALLPERMS) $(BASEDIR) $(SBINDIR) $(LIBDIR) $(VARDIR) $(SPROGS) $(WINBIND_SPROGS)
-	@$(SHELL) $(srcdir)/script/installbin.sh $(INSTALLPERMS) $(BASEDIR) $(BINDIR) $(LIBDIR) $(VARDIR) $(PROGS) $(WINBIND_PROGS)
-
-installscripts: installdirs
-	@$(SHELL) $(srcdir)/script/installscripts.sh $(INSTALLPERMS) $(BINDIR) $(SCRIPTS)
-
-installcp: installdirs installbin
-	@$(SHELL) $(srcdir)/script/installcp.sh $(srcdir) $(LIBDIR) $(CODEPAGEDIR) $(BINDIR) $(CODEPAGELIST)
-
-installswat: installdirs
-	@$(SHELL) $(srcdir)/script/installswat.sh $(SWATDIR) $(srcdir)
-
-installclientlib:
-	-$(INSTALLCLIENTCMD_SH) bin/libsmbclient.@SHLIBEXT@
-	-$(INSTALLCLIENTCMD_A) bin/libsmbclient.a
-	-$(INSTALLCMD) -d ${prefix}/include
-	-$(INSTALLCMD) include/libsmbclient.h ${prefix}/include
-
-# revert to the previously installed version
-revert:
-	@$(SHELL) $(srcdir)/script/revert.sh $(SBINDIR) $(SPROGS) ${WINBIND_SPROGS}
-	@$(SHELL) $(srcdir)/script/revert.sh $(BINDIR) $(PROGS) $(SCRIPTS) ${WINBIND_PROGS}
-
-installman:
-	@$(SHELL) $(srcdir)/script/installman.sh $(MANDIR) $(srcdir) "@ROFF@"
-
-uninstall: uninstallman uninstallbin uninstallscripts uninstallcp
-
-uninstallman:
-	@$(SHELL) $(srcdir)/script/uninstallman.sh $(MANDIR) $(srcdir)
-
-uninstallbin:
-	@$(SHELL) $(srcdir)/script/uninstallbin.sh $(INSTALLPERMS) $(BASEDIR) $(SBINDIR) $(LIBDIR) $(VARDIR) $(SPROGS) $(WINBIND_SPROGS)
-	@$(SHELL) $(srcdir)/script/uninstallbin.sh $(INSTALLPERMS) $(BASEDIR) $(BINDIR) $(LIBDIR) $(VARDIR) $(PROGS) $(WINBIND_PROGS)
-
-uninstallscripts:
-	@$(SHELL) $(srcdir)/script/uninstallscripts.sh $(INSTALLPERMS) $(BINDIR) $(SCRIPTS)
-
-uninstallcp:
-	@$(SHELL) $(srcdir)/script/uninstallcp.sh $(CODEPAGEDIR) $(CODEPAGELIST)
-
-clean: 
-	-rm -f core */*~ *~ */*.o */*.po */*.po32 */*.@SHLIBEXT@* */*.a
-
-winbindd_proto:
-	@cd $(srcdir) && $(SHELL) script/mkproto.sh $(AWK) \
-		-h _WINBINDD_PROTO_H_ nsswitch/winbindd_proto.h \
-		$(WINBINDD_OBJ1)
-
-proto: 
-	@echo rebuilding include/proto.h
-	@cd $(srcdir) && $(AWK) -f script/mkproto.awk `echo $(PROTO_OBJ) | tr ' ' '\n' | sed -e 's/\.o/\.c/g' | sort -u | egrep -v 'ubiqx/|wrapped'` > include/proto.h
-
-etags:
-	etags `find $(srcdir) -name "*.[ch]" | grep -v /CVS/`
-
-ctags:
-	ctags `find $(srcdir) -name "*.[ch]" | grep -v /CVS/`
-
-realclean: clean
-	-rm -f config.log $(PROGS) $(SPROGS) $(WINBIND_PROGS) $(WINBIND_SPROGS) $(LPROGS) bin/.dummy
-	-rm -f bin/*
-	-rmdir bin
-
-distclean: realclean
-	-rm -f include/config.h Makefile
-	-rm -f config.status config.cache so_locations
-	-rm -rf .deps
-
-# this target is really just for my use. It only works on a limited
-# range of machines and is used to produce a list of potentially
-# dead (ie. unused) functions in the code. (tridge)
-finddead:
-	nm */*.o |grep 'U ' | awk '{print $$2}' | sort -u > nmused.txt
-	nm */*.o |grep 'T ' | awk '{print $$3}' | sort -u > nmfns.txt
-	comm -13 nmused.txt nmfns.txt 
-
-
-# when configure.in is updated, reconfigure
-$(srcdir)/configure: $(srcdir)/configure.in
-	@echo "WARNING: you need to rerun autoconf"
-
-config.status: $(srcdir)/configure
-	@echo "WARNING: you need to run configure"
-
-Makefile: $(srcdir)/Makefile.in config.status
-	@echo "WARNING: you need to run ./config.status"
diff -pruwN samba-2.2.12/source/msdfs/msdfs.c samba-2.2.12-livebox/msdfs/msdfs.c
--- samba-2.2.12/source/msdfs/msdfs.c	2004-08-12 20:24:35.000000000 +0200
+++ samba-2.2.12-livebox/msdfs/msdfs.c	2010-03-31 11:45:59.000000000 +0200
@@ -118,7 +118,7 @@ static BOOL parse_symlink(char* buf,stru
 	if (!strequal(prot, "msdfs"))
 		return False;
 
-	/* No referral list requested. Just yes/no. */
+	/* No referral list requested. Just yes\no. */
 	if (!preflist) 
 		return True;
 
@@ -590,74 +590,8 @@ static int setup_ver3_dfs_referral(char*
 
 int setup_dfs_referral(char* pathname, int max_referral_level, char** ppdata)
 {
-	struct junction_map junction;
-	int consumedcnt;
-	BOOL self_referral = False;
-	pstring buf;
-	int reply_size = 0;
-	char *pathnamep = pathname;
-
-	ZERO_STRUCT(junction);
-
-	/* get the junction entry */
-	if (!pathnamep)
-		return -1;
-
-	/* Trim pathname sent by client so it begins with only one backslash.
-	   Two backslashes confuse some dfs clients
-	 */
-	while (strlen(pathnamep) > 1 && pathnamep[0] == '\\'
-	       && pathnamep[1] == '\\')
-		pathnamep++;
-
-	pstrcpy(buf, pathnamep);
-	if (!get_referred_path(buf, &junction, &consumedcnt,
-			       &self_referral))
-		return -1;
-	
-	if (!self_referral)
-	{
-		pathnamep[consumedcnt] = '\0';
-
-		if( DEBUGLVL( 3 ) ) {
-			int i=0;
-			dbgtext("setup_dfs_referral: Path %s to alternate path(s):",pathnamep);
-			for(i=0;i<junction.referral_count;i++)
-				dbgtext(" %s",junction.referral_list[i].alternate_path);
-			dbgtext(".\n");
-		}
-	}
-	
-	/* create the referral depeding on version */
-	DEBUG(10,("max_referral_level :%d\n",max_referral_level));
-	if(max_referral_level<2 || max_referral_level>3)
-		max_referral_level = 2;
-
-	switch(max_referral_level) {
-	case 2:
-		{
-		reply_size = setup_ver2_dfs_referral(pathnamep, ppdata, &junction, 
-						     consumedcnt, self_referral);
-		SAFE_FREE(junction.referral_list);
-		break;
-		}
-	case 3:
-		{
-		reply_size = setup_ver3_dfs_referral(pathnamep, ppdata, &junction, 
-						     consumedcnt, self_referral);
-		SAFE_FREE(junction.referral_list);
-		break;
-		}
-	default:
-		{
-		DEBUG(0,("setup_dfs_referral: Invalid dfs referral version: %d\n", max_referral_level));
-		return -1;
-		}
-	}
-      
-	DEBUG(10,("DFS Referral pdata:\n"));
-	dump_data(10,*ppdata,reply_size);
-	return reply_size;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 int dfs_path_error(char* inbuf, char* outbuf)
@@ -886,7 +820,8 @@ int enum_msdfs_links(struct junction_map
 		    struct referral** reflistpp, int* refcntp,
 		    SMB_STRUCT_STAT *sbufp)
 {
-	return False;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 #endif
diff -pruwN samba-2.2.12/source/nsswitch/wb_client.c samba-2.2.12-livebox/nsswitch/wb_client.c
--- samba-2.2.12/source/nsswitch/wb_client.c	2004-08-12 20:24:23.000000000 +0200
+++ samba-2.2.12-livebox/nsswitch/wb_client.c	2010-03-31 11:45:59.000000000 +0200
@@ -1,12 +1,12 @@
 /* 
-   Unix SMB/CIFS implementation.
+   Unix SMB\CIFS implementation.
 
    winbind client code
 
    Copyright (C) Tim Potter 2000
    Copyright (C) Andrew Tridgell 2000
    
-   This library is free software; you can redistribute it and/or
+   This library is free software; you can redistribute it and\or
    modify it under the terms of the GNU Library General Public
    License as published by the Free Software Foundation; either
    version 2 of the License, or (at your option) any later version.
@@ -83,68 +83,14 @@ BOOL winbind_lookup_sid(DOM_SID *sid,
 			fstring dom_name, fstring name, 
                         enum SID_NAME_USE *name_type)
 {
-	struct winbindd_request request;
-	struct winbindd_response response;
-	NSS_STATUS result;
-	fstring sid_str;
-	
-	/* Initialise request */
-
-	ZERO_STRUCT(request);
-	ZERO_STRUCT(response);
-
-	sid_to_string(sid_str, sid);
-	fstrcpy(request.data.sid, sid_str);
-	
-	/* Make request */
-
-	result = winbindd_request(WINBINDD_LOOKUPSID, &request, &response);
-
-	/* Copy out result */
-
-	if (result == NSS_STATUS_SUCCESS) {
-		fstrcpy(dom_name, response.data.name.dom_name);
-		fstrcpy(name, response.data.name.name);
-		*name_type = (enum SID_NAME_USE)response.data.name.type;
-
-		DEBUG(10, ("winbind_lookup_sid: SUCCESS: SID %s -> %s %s\n", 
-                           sid_str, dom_name, name));
-	}
-
-	return (result == NSS_STATUS_SUCCESS);
+	DEBUG(1, ("********** winbind_lookup_sid ommited************\n"));
 }
 
 /* Call winbindd to convert SID to uid */
 
 BOOL winbind_sid_to_uid(uid_t *puid, DOM_SID *sid)
 {
-	struct winbindd_request request;
-	struct winbindd_response response;
-	int result;
-	fstring sid_str;
-
-	if (!puid)
-		return False;
-
-	/* Initialise request */
-
-	ZERO_STRUCT(request);
-	ZERO_STRUCT(response);
-
-	sid_to_string(sid_str, sid);
-	fstrcpy(request.data.sid, sid_str);
-	
-	/* Make request */
-
-	result = winbindd_request(WINBINDD_SID_TO_UID, &request, &response);
-
-	/* Copy out result */
-
-	if (result == NSS_STATUS_SUCCESS) {
-		*puid = response.data.uid;
-	}
-
-	return (result == NSS_STATUS_SUCCESS);
+	DEBUG(1, ("********** winbind_sid_to_uid ommited************\n"));
 }
 
 /* Call winbindd to convert uid to sid */
@@ -184,66 +130,14 @@ BOOL winbind_uid_to_sid(DOM_SID *sid, ui
 
 BOOL winbind_sid_to_gid(gid_t *pgid, DOM_SID *sid)
 {
-	struct winbindd_request request;
-	struct winbindd_response response;
-	int result;
-	fstring sid_str;
-
-	if (!pgid)
-		return False;
-
-	/* Initialise request */
-
-	ZERO_STRUCT(request);
-	ZERO_STRUCT(response);
-
-	sid_to_string(sid_str, sid);
-	fstrcpy(request.data.sid, sid_str);
-	
-	/* Make request */
-
-	result = winbindd_request(WINBINDD_SID_TO_GID, &request, &response);
-
-	/* Copy out result */
-
-	if (result == NSS_STATUS_SUCCESS) {
-		*pgid = response.data.gid;
-	}
-
-	return (result == NSS_STATUS_SUCCESS);
+	DEBUG(1, ("********** winbind_sid_to_gid ommited************\n"));
 }
 
 /* Call winbindd to convert gid to sid */
 
 BOOL winbind_gid_to_sid(DOM_SID *sid, gid_t gid)
 {
-	struct winbindd_request request;
-	struct winbindd_response response;
-	int result;
-
-	if (!sid)
-		return False;
-
-	/* Initialise request */
-
-	ZERO_STRUCT(request);
-	ZERO_STRUCT(response);
-
-	request.data.gid = gid;
-
-	/* Make request */
-
-	result = winbindd_request(WINBINDD_GID_TO_SID, &request, &response);
-
-	/* Copy out result */
-
-	if (result == NSS_STATUS_SUCCESS) {
-		string_to_sid(sid, response.data.sid.sid);
-	} else {
-		sid_copy(sid, &global_sid_NULL);
-	}
-
-	return (result == NSS_STATUS_SUCCESS);
+	DEBUG(1, ("********** winbind_gid_to_sid ommited************\n"));
 }
 
 /* Fetch the list of groups a user is a member of from winbindd.  This is
@@ -251,28 +145,7 @@ BOOL winbind_gid_to_sid(DOM_SID *sid, gi
 
 static int wb_getgroups(const char *user, gid_t **groups)
 {
-	struct winbindd_request request;
-	struct winbindd_response response;
-	int result;
-
-	/* Call winbindd */
-
-	fstrcpy(request.data.username, user);
-
-	ZERO_STRUCT(response);
-
-	result = winbindd_request(WINBINDD_GETGROUPS, &request, &response);
-
-	if (result == NSS_STATUS_SUCCESS) {
-		
-		/* Return group list.  Don't forget to free the group list
-		   when finished. */
-
-		*groups = (gid_t *)response.extra_data;
-		return response.data.num_entries;
-	}
-
-	return -1;
+	DEBUG(1, ("********** wb_getgroups ommited************\n"));
 }
 
 /* Call winbindd to initialise group membership.  This is necessary for
@@ -356,39 +229,7 @@ int winbind_initgroups(char *user, gid_t
 
 int winbind_getgroups(const char *user, int size, gid_t *list)
 {
-	gid_t *groups = NULL;
-	int result, i;
-
-	/*
-	 * Don't do the lookup if the name has no separator _and_ we are not in
-	 * 'winbind use default domain' mode.
-	 */
-
-	if (!(strchr(user, *lp_winbind_separator()) || lp_winbind_use_default_domain()))
-		return -1;
-
-	/* Fetch list of groups */
-
-	result = wb_getgroups(user, &groups);
-
-	if (size == 0)
-		goto done;
-
-	if (result > size) {
-		result = -1;
-		errno = EINVAL; /* This is what getgroups() does */
-		goto done;
-	}
-
-	/* Copy list of groups across */
-
-	for (i = 0; i < result; i++) {
-		list[i] = groups[i];
-	}
-
- done:
-	SAFE_FREE(groups);
-	return result;
+	DEBUG(1, ("********** winbind_getgroups ommited************\n"));
 }
 
 /* Utility function. Convert a uid_t to a name if possible. */
@@ -418,53 +259,19 @@ BOOL winbind_uidtoname(fstring name, uid
 
 BOOL winbind_gidtoname(fstring name, gid_t gid)
 {
-	DOM_SID sid;
-	fstring dom_name;
-	fstring group_name;
-	enum SID_NAME_USE name_type;
-
-	if (!winbind_gid_to_sid(&sid, gid))
-		return False;
-	if (!winbind_lookup_sid(&sid, dom_name, group_name, &name_type))
-		return False;
-
-	if (name_type != SID_NAME_DOM_GRP)
-		return False;
-
-	slprintf(name, sizeof(fstring)-1, "%s%s%s", dom_name, 
-                 lp_winbind_separator(), group_name);
-
-	return True;
+	DEBUG(1, ("********** winbind_gidtoname ommited************\n"));
 }
 
 /* Utility function. Convert a name to a uid_t if possible. */
 
 BOOL winbind_nametouid(uid_t *puid, const char *name)
 {
-	DOM_SID sid;
-	enum SID_NAME_USE name_type;
-
-	if (!winbind_lookup_name(NULL, name, &sid, &name_type))
-                return False;
-
-	if (name_type != SID_NAME_USER)
-		return False;
-
-	return winbind_sid_to_uid(puid, &sid);
+	DEBUG(1, ("********** winbind_nametouid ommited************\n"));
 }
 
 /* Utility function. Convert a name to a gid_t if possible. */
 
 BOOL winbind_nametogid(gid_t *pgid, const char *gname)
 {
-	DOM_SID g_sid;
-	enum SID_NAME_USE name_type;
-
-	if (!winbind_lookup_name(NULL, gname, &g_sid, &name_type))
-                return False;
-
-	if (name_type != SID_NAME_DOM_GRP)
-		return False;
-
-	return winbind_sid_to_gid(pgid, &g_sid);
+	DEBUG(1, ("********** winbind_nametogid ommited************\n"));
 }
Les fichiers binaires samba-2.2.12/source/nsswitch/wb_common.po et samba-2.2.12-livebox/nsswitch/wb_common.po sont différents.
Les fichiers binaires samba-2.2.12/source/nsswitch/winbind_nss.po et samba-2.2.12-livebox/nsswitch/winbind_nss.po sont différents.
diff -pruwN samba-2.2.12/source/passdb/pampass.c samba-2.2.12-livebox/passdb/pampass.c
--- samba-2.2.12/source/passdb/pampass.c	2004-08-12 20:24:27.000000000 +0200
+++ samba-2.2.12-livebox/passdb/pampass.c	2010-03-31 11:45:59.000000000 +0200
@@ -779,26 +779,8 @@ BOOL smb_pam_close_session(char *user, c
 
 NTSTATUS smb_pam_accountcheck(const char * user)
 {
-	NTSTATUS nt_status = NT_STATUS_ACCOUNT_DISABLED;
-	pam_handle_t *pamh = NULL;
-	struct pam_conv *pconv = NULL;
-
-	/* Ignore PAM if told to. */
-
-	if (!lp_obey_pam_restrictions())
-		return NT_STATUS_OK;
-
-	if ((pconv = smb_setup_pam_conv(smb_pam_conv, user, NULL, NULL)) == NULL)
-		return NT_STATUS_NO_MEMORY;
-
-	if (!smb_pam_start(&pamh, user, NULL, pconv))
-		return NT_STATUS_ACCOUNT_DISABLED;
-
-	if (!NT_STATUS_IS_OK(nt_status = smb_pam_account(pamh, user)))
-		DEBUG(0, ("smb_pam_accountcheck: PAM: Account Validation Failed - Rejecting User %s!\n", user));
-
-	smb_pam_end(pamh, pconv);
-	return nt_status;
+	  DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*
@@ -881,12 +863,14 @@ NTSTATUS smb_pam_accountcheck(const char
 /* If PAM not used, also no PAM restrictions on sessions. */
 BOOL smb_pam_claim_session(char *user, char *tty, char *rhost)
 {
-	return True;
+	  DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /* If PAM not used, also no PAM restrictions on sessions. */
 BOOL smb_pam_close_session(char *in_user, char *tty, char *rhost)
 {
-	return True;
+	  DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 #endif /* WITH_PAM */
diff -pruwN samba-2.2.12/source/passdb/passdb.c samba-2.2.12-livebox/passdb/passdb.c
--- samba-2.2.12/source/passdb/passdb.c	2004-08-12 20:24:27.000000000 +0200
+++ samba-2.2.12-livebox/passdb/passdb.c	2010-03-31 11:45:59.000000000 +0200
@@ -50,6 +50,7 @@ BOOL initialize_password_db(BOOL reload)
 	 */
 	return True;
 	
+	
 }
 
 /*************************************************************
@@ -327,16 +328,8 @@ uint16 pdb_decode_acct_ctrl(const char *
 
 void pdb_sethexpwd(char *p, unsigned char *pwd, uint16 acct_ctrl)
 {
-	if (pwd != NULL) {
-		int i;
-		for (i = 0; i < 16; i++)
-			slprintf(&p[i*2], 3, "%02X", pwd[i]);
-	} else {
-		if (acct_ctrl & ACB_PWNOTREQ)
-			safe_strcpy(p, "NO PASSWORDXXXXXXXXXXXXXXXXXXXXX", 33);
-		else
-			safe_strcpy(p, "XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX", 33);
-	}
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*************************************************************
@@ -346,30 +339,8 @@ void pdb_sethexpwd(char *p, unsigned cha
 
 BOOL pdb_gethexpwd(char *p, unsigned char *pwd)
 {
-	int i;
-	unsigned char   lonybble, hinybble;
-	const char           *hexchars = "0123456789ABCDEF";
-	char           *p1, *p2;
-	
-	if (!p)
-		return (False);
-	
-	for (i = 0; i < 32; i += 2) {
-		hinybble = toupper(p[i]);
-		lonybble = toupper(p[i + 1]);
-
-		p1 = strchr(hexchars, hinybble);
-		p2 = strchr(hexchars, lonybble);
-
-		if (!p1 || !p2)
-			return (False);
-
-		hinybble = PTR_DIFF(p1, hexchars);
-		lonybble = PTR_DIFF(p2, hexchars);
-
-		pwd[i / 2] = (hinybble << 4) | lonybble;
-	}
-	return (True);
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -378,24 +349,8 @@ BOOL pdb_gethexpwd(char *p, unsigned cha
 
 BOOL pdb_name_to_rid(char *user_name, uint32 *u_rid, uint32 *g_rid)
 {
-	struct passwd *pw = Get_Pwnam(user_name, False);
-
-	if (u_rid == NULL || g_rid == NULL || user_name == NULL)
-		return False;
-
-	if (!pw) {
-		DEBUG(1,("Username %s is invalid on this system\n", user_name));
-		return False;
-	}
-
-	/* turn the unix UID into a Domain RID.  this is what the posix
-	   sub-system does (adds 1000 to the uid) */
-	*u_rid = pdb_uid_to_user_rid(pw->pw_uid);
-
-	/* absolutely no idea what to do about the unix GID to Domain RID mapping */
-	*g_rid = pdb_gid_to_group_rid(pw->pw_gid);
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -404,7 +359,8 @@ BOOL pdb_name_to_rid(char *user_name, ui
 
 uid_t pdb_user_rid_to_uid(uint32 user_rid)
 {
-	return (uid_t)(((user_rid & (~USER_RID_TYPE))- 1000)/RID_MULTIPLIER);
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -413,7 +369,8 @@ uid_t pdb_user_rid_to_uid(uint32 user_ri
 
 gid_t pdb_user_rid_to_gid(uint32 user_rid)
 {
-	return (uid_t)(((user_rid & (~GROUP_RID_TYPE))- 1000)/RID_MULTIPLIER);
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -472,100 +429,8 @@ BOOL pdb_rid_is_user(uint32 rid)
 
 BOOL local_lookup_rid(uint32 rid, char *name, enum SID_NAME_USE *psid_name_use)
 {
-	BOOL is_user = pdb_rid_is_user(rid);
-
-	*psid_name_use = SID_NAME_UNKNOWN;
-
-	DEBUG(5,("local_lookup_rid: looking up %s RID %u.\n", is_user ? "user" :
-			"group", (unsigned int)rid));
-
-	if(is_user) {
-		if(rid == DOMAIN_USER_RID_ADMIN) {
-			const char *p = lp_admin_users(-1);
-			*psid_name_use = SID_NAME_USER;
-			if(!next_token(&p, name, NULL, sizeof(fstring)))
-				fstrcpy(name, "Administrator");
-		} else if (rid == DOMAIN_USER_RID_GUEST) {
-			const char *p = lp_guestaccount(-1);
-			*psid_name_use = SID_NAME_USER;
-			if(!next_token(&p, name, NULL, sizeof(fstring)))
-				fstrcpy(name, "Guest");
-		} else {
-			uid_t uid;
-			struct passwd *pass;
-			
-			/*
-			 * Don't try to convert the rid to a name if 
-			 * running in appliance mode
-			 */
-			if (lp_hide_local_users())
-				return False;
-			
-			uid = pdb_user_rid_to_uid(rid);
-			pass = sys_getpwuid(uid);
-
-			*psid_name_use = SID_NAME_USER;
-
-			DEBUG(5,("local_lookup_rid: looking up uid %u %s\n", (unsigned int)uid,
-				pass ? "succeeded" : "failed" ));
-
-			if(!pass) {
-				slprintf(name, sizeof(fstring)-1, "unix_user.%u", (unsigned int)uid);
-				return True;
-			}
-
-			fstrcpy(name, pass->pw_name);
-
-			DEBUG(5,("local_lookup_rid: found user %s for rid %u\n", name,
-				(unsigned int)rid ));
-		}
-
-	} else {
-		gid_t gid;
-		struct group *gr; 
-
-		/* 
-		 * Don't try to convert the rid to a name if running
-		 * in appliance mode
-		 */
-		
-		if (lp_hide_local_users()) 
-			return False;
-		
-		gid = pdb_user_rid_to_gid(rid);
-		gr = getgrgid(gid);
-
-		*psid_name_use = SID_NAME_ALIAS;
-
-		DEBUG(5,("local_local_rid: looking up gid %u %s\n", (unsigned int)gid,
-			gr ? "succeeded" : "failed" ));
-
-		if(!gr) {
-			switch (rid) {
-			case DOMAIN_GROUP_RID_ADMINS:
-				fstrcpy(name, "Domain Admins");
-				return True;
-			case DOMAIN_GROUP_RID_USERS:
-				fstrcpy(name, "Domain Users");
-				return True;
-			case DOMAIN_GROUP_RID_GUESTS:
-				fstrcpy(name, "Domain Guests");
-				return True;
-			case BUILTIN_ALIAS_RID_USERS:
-				fstrcpy(name, "Users");
-				return True;
-			}
-			slprintf(name, sizeof(fstring)-1, "unix_group.%u", (unsigned int)gid);
-			return True;
-		}
-
-		fstrcpy( name, gr->gr_name);
-
-		DEBUG(5,("local_lookup_rid: found group %s for rid %u\n", name,
-			(unsigned int)rid ));
-	}
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -709,49 +574,14 @@ DOM_SID *local_gid_to_sid(DOM_SID *psid,
 
 BOOL local_sid_to_gid(gid_t *pgid, DOM_SID *psid, enum SID_NAME_USE *name_type)
 {
-    extern DOM_SID global_sam_sid;
-	DOM_SID dom_sid;
-	uint32 rid;
-	fstring str;
-	struct group *grp;
-
-	*name_type = SID_NAME_UNKNOWN;
-
-	sid_copy(&dom_sid, psid);
-	sid_split_rid(&dom_sid, &rid);
-
-	/*
-	 * We can only convert to a gid if this is our local
-	 * Domain SID (ie. we are the controling authority).
-	 */
-
-	if (!sid_equal(&global_sam_sid, &dom_sid))
-		return False;
-
-	if (pdb_rid_is_user(rid))
-		return False;
-
-	*pgid = pdb_user_rid_to_gid(rid);
-
-	/*
-	 * Ensure this gid really does exist.
-	 */
-
-	if(!(grp = getgrgid(*pgid)))
-		return False;
-
-	*name_type = SID_NAME_ALIAS;
-
-	DEBUG(10,("local_sid_to_gid: SID %s -> gid (%u) (%s).\n", sid_to_string( str, psid),
-		(unsigned int)*pgid, grp->gr_name ));
-
-	return True;
+DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 static void select_name(pstring string, const UNISTR2 *from)
 {
-	if (from->buffer != 0)
-		unistr2_to_dos(string, from, sizeof(pstring));
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*************************************************************
@@ -761,39 +591,8 @@ static void select_name(pstring string,
 void copy_id23_to_sam_passwd(SAM_ACCOUNT *to, SAM_USER_INFO_23 *from)
 {
 
-	if (from == NULL || to == NULL) 
-		return;
-
-	to->logon_time = nt_time_to_unix(&from->logon_time);
-	to->logoff_time = nt_time_to_unix(&from->logoff_time);
-	to->kickoff_time = nt_time_to_unix(&from->kickoff_time);
-	to->pass_last_set_time = nt_time_to_unix(&from->pass_last_set_time);
-	to->pass_can_change_time = nt_time_to_unix(&from->pass_can_change_time);
-	to->pass_must_change_time = nt_time_to_unix(&from->pass_must_change_time);
-
-	select_name(to->username    , &from->uni_user_name   );
-	select_name(to->full_name   , &from->uni_full_name   );
-	select_name(to->home_dir    , &from->uni_home_dir    );
-	select_name(to->dir_drive   , &from->uni_dir_drive   );
-	select_name(to->logon_script, &from->uni_logon_script);
-	select_name(to->profile_path, &from->uni_profile_path);
-	select_name(to->acct_desc   , &from->uni_acct_desc   );
-	select_name(to->workstations, &from->uni_workstations);
-	select_name(to->unknown_str , &from->uni_unknown_str );
-	select_name(to->munged_dial , &from->uni_munged_dial );
-
-	to->user_rid = from->user_rid;
-	to->group_rid = from->group_rid;
-
-	to->acct_ctrl = from->acb_info;
-	to->unknown_3 = from->unknown_3;
-
-	to->logon_divs = from->logon_divs;
-	to->hours_len = from->logon_hrs.len;
-	memcpy(to->hours, from->logon_hrs.hours, MAX_HOURS_LEN);
-
-	to->unknown_5 = from->unknown_5;
-	to->unknown_6 = from->unknown_6;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*************************************************************
@@ -802,42 +601,8 @@ void copy_id23_to_sam_passwd(SAM_ACCOUNT
 
 void copy_id21_to_sam_passwd(SAM_ACCOUNT *to, SAM_USER_INFO_21 *from)
 {
-	if (from == NULL || to == NULL) 
-		return;
-
-	to->logon_time = nt_time_to_unix(&from->logon_time);
-	to->logoff_time = nt_time_to_unix(&from->logoff_time);
-	to->kickoff_time = nt_time_to_unix(&from->kickoff_time);
-	to->pass_last_set_time = nt_time_to_unix(&from->pass_last_set_time);
-	to->pass_can_change_time = nt_time_to_unix(&from->pass_can_change_time);
-	to->pass_must_change_time = nt_time_to_unix(&from->pass_must_change_time);
-
-	select_name(to->username    , &from->uni_user_name   );
-	select_name(to->full_name   , &from->uni_full_name   );
-	select_name(to->home_dir    , &from->uni_home_dir    );
-	select_name(to->dir_drive   , &from->uni_dir_drive   );
-	select_name(to->logon_script, &from->uni_logon_script);
-	select_name(to->profile_path, &from->uni_profile_path);
-	select_name(to->acct_desc   , &from->uni_acct_desc   );
-	select_name(to->workstations, &from->uni_workstations);
-	select_name(to->unknown_str , &from->uni_unknown_str );
-	select_name(to->munged_dial , &from->uni_munged_dial );
-
-	to->user_rid = from->user_rid;
-	to->group_rid = from->group_rid;
-	
-	/* FIXME!!  Do we need to copy the passwords here as well?
-	   I don't know.  Need to figure this out   --jerry */
-
-	to->acct_ctrl = from->acb_info;
-	to->unknown_3 = from->unknown_3;
-
-	to->logon_divs = from->logon_divs;
-	to->hours_len = from->logon_hrs.len;
-	memcpy(to->hours, from->logon_hrs.hours, MAX_HOURS_LEN);
-
-	to->unknown_5 = from->unknown_5;
-	to->unknown_6 = from->unknown_6;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 #if 0	/* JERRY */
@@ -876,145 +641,8 @@ BOOL local_password_change(const char *u
 			   char *err_str, size_t err_str_len,
 			   char *msg_str, size_t msg_str_len)
 {
-	struct passwd  *pwd = NULL;
-	SAM_ACCOUNT 	*sam_pass=NULL;
-
-	*err_str = '\0';
-	*msg_str = '\0';
-
-	if (local_flags & LOCAL_ADD_USER) {
-	
-		/*
-		 * Check for a local account - if we're adding only.
-		 */
-	
-		if(!(pwd = sys_getpwnam(user_name))) {
-			slprintf(err_str, err_str_len - 1, "User %s does not \
-exist in system password file (usually /etc/passwd). Cannot add \
-account without a valid local system user.\n", user_name);
-			return False;
-		}
-	}
-
-	/* Get the smb passwd entry for this user */
-	pdb_init_sam(&sam_pass);
-	if(local_flags & LOCAL_DELETE_USER) {
-		if (!pdb_delete_sam_account(user_name)) {
-			slprintf(err_str,err_str_len-1, "Failed to delete entry for user %s.\n", user_name);
-			pdb_free_sam(sam_pass);
-			return False;
-		}
-		slprintf(msg_str, msg_str_len-1, "Deleted user %s.\n", user_name);
-		pdb_free_sam(sam_pass);
-		return True;
-	}
-	if(!pdb_getsampwnam(sam_pass, user_name)) {
-		pdb_free_sam(sam_pass);
-		
-		if(!(local_flags & LOCAL_ADD_USER)) {
-			slprintf(err_str, err_str_len-1,"Failed to find entry for user %s.\n", user_name);
-			return False;
-		}
-
-		sam_pass = NULL;
-		if (!pdb_init_sam_pw(&sam_pass, sys_getpwnam(user_name))) {
-			return False;
-		}
-
-		/* Set account flags. Note that the default is non-expiring accounts */
-		pdb_set_acct_ctrl(sam_pass,(local_flags & LOCAL_TRUST_ACCOUNT) ? ACB_WSTRUST : ACB_NORMAL|ACB_PWNOEXP);
-
-		if (local_flags & LOCAL_DISABLE_USER)
-			pdb_set_acct_ctrl (sam_pass, pdb_get_acct_ctrl(sam_pass)|ACB_DISABLED);
-
-		if (local_flags & LOCAL_SET_NO_PASSWORD) {
-			pdb_set_acct_ctrl (sam_pass, pdb_get_acct_ctrl(sam_pass)|ACB_PWNOTREQ);
-		} else {
-			/* set the passwords here.  if we get to here it means
-			   we have a valid, active account */
-			if (!pdb_set_plaintext_passwd (sam_pass, new_passwd)) {
-				pdb_free_sam(sam_pass);
-				return False;
-			}
-		}
-
-		/* Remember to set the "last changed time". */
-		pdb_set_pass_last_set_time(sam_pass, time(NULL));
-
-		if (pdb_add_sam_account(sam_pass)) {
-			slprintf(msg_str, msg_str_len-1, "Added user %s.\n", user_name);
-			pdb_free_sam(sam_pass);
-			return True;
-		} else {
-			slprintf(err_str, err_str_len-1, "Failed to add entry for user %s.\n", user_name);
-			pdb_free_sam(sam_pass);
-			return False;
-		}
-	} else {
-		/* the entry already existed */
-		local_flags &= ~LOCAL_ADD_USER;
-		slprintf(msg_str, msg_str_len-1, "Password changed for user %s.\n", user_name );
-	}
-
-	/*
-	 * We are root - just write the new password
-	 * and the valid last change time.
-	 */
-
-	if(local_flags & LOCAL_DISABLE_USER) {
-		pdb_set_acct_ctrl (sam_pass, pdb_get_acct_ctrl(sam_pass)|ACB_DISABLED);
-	} else if (local_flags & LOCAL_ENABLE_USER) {
-		if(pdb_get_lanman_passwd(sam_pass) == NULL) {
-			if (!pdb_set_plaintext_passwd (sam_pass, new_passwd)) {
-				pdb_free_sam(sam_pass);
-				return False;
-			}
-		}
-		pdb_set_acct_ctrl (sam_pass, pdb_get_acct_ctrl(sam_pass)&(~ACB_DISABLED));
-	} else if (local_flags & LOCAL_SET_NO_PASSWORD) {
-		pdb_set_acct_ctrl (sam_pass, pdb_get_acct_ctrl(sam_pass)|ACB_PWNOTREQ);
-		/* This is needed to preserve ACB_PWNOTREQ in mod_smbfilepwd_entry */
-		if (!pdb_set_lanman_passwd (sam_pass, NULL)) {
-			pdb_free_sam(sam_pass);
-			return False;
-		}
-		if (!pdb_set_nt_passwd(sam_pass, NULL)) {
-			pdb_free_sam(sam_pass);
-			return False;
-		}
-	} else {
-		/*
-		 * If we're dealing with setting a completely empty user account
-		 * ie. One with a password of 'XXXX', but not set disabled (like
-		 * an account created from scratch) then if the old password was
-		 * 'XX's then getsmbpwent will have set the ACB_DISABLED flag.
-		 * We remove that as we're giving this user their first password
-		 * and the decision hasn't really been made to disable them (ie.
-		 * don't create them disabled). JRA.
-		 */
-		if ((pdb_get_lanman_passwd(sam_pass)==NULL) && (pdb_get_acct_ctrl(sam_pass)&ACB_DISABLED))
-			pdb_set_acct_ctrl (sam_pass, pdb_get_acct_ctrl(sam_pass)&(~ACB_DISABLED));
-		pdb_set_acct_ctrl (sam_pass, pdb_get_acct_ctrl(sam_pass)&(~ACB_PWNOTREQ));
-		if (!pdb_set_plaintext_passwd (sam_pass, new_passwd)) {
-			pdb_free_sam(sam_pass);
-			return False;	
-		}
-	}
-	
-	if(!pdb_update_sam_account(sam_pass, True)) {
-		slprintf(err_str, err_str_len-1, "Failed to modify entry for user %s.\n", user_name);
-		pdb_free_sam(sam_pass);
-		return False;
-	}
-	if(local_flags & LOCAL_DISABLE_USER)
-		slprintf(msg_str, msg_str_len-1, "Disabled user %s.\n", user_name);
-	else if (local_flags & LOCAL_ENABLE_USER)
-		slprintf(msg_str, msg_str_len-1, "Enabled user %s.\n", user_name);
-	else if (local_flags & LOCAL_SET_NO_PASSWORD)
-		slprintf(msg_str, msg_str_len-1, "User %s password set to none.\n", user_name);
-
-	pdb_free_sam(sam_pass);
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*********************************************************************
@@ -1023,106 +651,80 @@ account without a valid local system use
 
 uint16 pdb_get_acct_ctrl (SAM_ACCOUNT *sampass)
 {
-	if (sampass)
-		return (sampass->acct_ctrl);
-	else
-		return (ACB_DISABLED);
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 time_t pdb_get_logon_time (SAM_ACCOUNT *sampass)
 {
-	if (sampass)
-		return (sampass->logon_time);
-	else
-		return (0);
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 time_t pdb_get_logoff_time (SAM_ACCOUNT *sampass)
 {
-	if (sampass)
-		return (sampass->logoff_time);
-	else
-		return (-1);
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 time_t pdb_get_kickoff_time (SAM_ACCOUNT *sampass)
 {
-	if (sampass)
-		return (sampass->kickoff_time);
-	else
-		return (-1);
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 time_t pdb_get_pass_last_set_time (SAM_ACCOUNT *sampass)
 {
-	if (sampass)
-		return (sampass->pass_last_set_time);
-	else
-		return (-1);
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 time_t pdb_get_pass_can_change_time (SAM_ACCOUNT *sampass)
 {
-	if (sampass)
-		return (sampass->pass_can_change_time);
-	else
-		return (-1);
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 time_t pdb_get_pass_must_change_time (SAM_ACCOUNT *sampass)
 {
-	if (sampass)
-		return (sampass->pass_must_change_time);
-	else
-		return (-1);
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 uint16 pdb_get_logon_divs (SAM_ACCOUNT *sampass)
 {
-	if (sampass)
-		return (sampass->logon_divs);
-	else
-		return (-1);
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 uint32 pdb_get_hours_len (SAM_ACCOUNT *sampass)
 {
-	if (sampass)
-		return (sampass->hours_len);
-	else
-		return (-1);
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 uint8* pdb_get_hours (SAM_ACCOUNT *sampass)
 {
-	if (sampass)
-		return (sampass->hours);
-	else
-		return (NULL);
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 uint8* pdb_get_nt_passwd (SAM_ACCOUNT *sampass)
 {
-	if (sampass)
-		return (sampass->nt_pw);
-	else
-		return (NULL);
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 uint8* pdb_get_lanman_passwd (SAM_ACCOUNT *sampass)
 {
-	if (sampass)
-		return (sampass->lm_pw);
-	else
-		return (NULL);
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 uint32 pdb_get_user_rid (SAM_ACCOUNT *sampass)
 {
-	if (sampass)
-		return (sampass->user_rid);
-	else
-		return (-1);
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 uint32 pdb_get_group_rid (SAM_ACCOUNT *sampass)
@@ -1135,130 +737,98 @@ uint32 pdb_get_group_rid (SAM_ACCOUNT *s
 
 uid_t pdb_get_uid (SAM_ACCOUNT *sampass)
 {
-	if (sampass)
-		return (sampass->uid);
-	else
-		return ((uid_t)-1);
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 gid_t pdb_get_gid (SAM_ACCOUNT *sampass)
 {
-	if (sampass)
-		return (sampass->gid);
-	else
-		return ((gid_t)-1);
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 char* pdb_get_username (SAM_ACCOUNT *sampass)
 {
-	if (sampass)
-		return (sampass->username);
-	else
-		return (NULL);
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 char* pdb_get_domain (SAM_ACCOUNT *sampass)
 {
-	if (sampass)
-		return (sampass->domain);
-	else
-		return (NULL);
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 char* pdb_get_nt_username (SAM_ACCOUNT *sampass)
 {
-	if (sampass)
-		return (sampass->nt_username);
-	else
-		return (NULL);
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 char* pdb_get_fullname (SAM_ACCOUNT *sampass)
 {
-	if (sampass)
-		return (sampass->full_name);
-	else
-		return (NULL);
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 char* pdb_get_homedir (SAM_ACCOUNT *sampass)
 {
-	if (sampass)
-		return (sampass->home_dir);
-	else
-		return (NULL);
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 char* pdb_get_dirdrive (SAM_ACCOUNT *sampass)
 {
-	if (sampass)
-		return (sampass->dir_drive);
-	else
-		return (NULL);
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 char* pdb_get_logon_script (SAM_ACCOUNT *sampass)
 {
-	if (sampass)
-		return (sampass->logon_script);
-	else
-		return (NULL);
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 char* pdb_get_profile_path (SAM_ACCOUNT *sampass)
 {
-	if (sampass)
-		return (sampass->profile_path);
-	else
-		return (NULL);
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 char* pdb_get_acct_desc (SAM_ACCOUNT *sampass)
 {
-	if (sampass)
-		return (sampass->acct_desc);
-	else
-		return (NULL);
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 char* pdb_get_workstations (SAM_ACCOUNT *sampass)
 {
-	if (sampass)
-		return (sampass->workstations);
-	else
-		return (NULL);
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 char* pdb_get_munged_dial (SAM_ACCOUNT *sampass)
 {
-	if (sampass)
-		return (sampass->munged_dial);
-	else
-		return (NULL);
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 uint32 pdb_get_unknown3 (SAM_ACCOUNT *sampass)
 {
-	if (sampass)
-		return (sampass->unknown_3);
-	else
-		return (-1);
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 uint32 pdb_get_unknown5 (SAM_ACCOUNT *sampass)
 {
-	if (sampass)
-		return (sampass->unknown_5);
-	else
-		return (-1);
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 uint32 pdb_get_unknown6 (SAM_ACCOUNT *sampass)
 {
-	if (sampass)
-		return (sampass->unknown_6);
-	else
-		return (-1);
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*********************************************************************
@@ -1267,137 +837,86 @@ uint32 pdb_get_unknown6 (SAM_ACCOUNT *sa
 
 BOOL pdb_set_acct_ctrl (SAM_ACCOUNT *sampass, uint16 flags)
 {
-	if (!sampass)
-		return False;
-		
-	if (sampass) {
-		sampass->acct_ctrl = flags;
-		return True;
-	}
-	
-	return False;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 BOOL pdb_set_logon_time (SAM_ACCOUNT *sampass, time_t mytime)
 {
-	if (!sampass)
-		return False;
-
-	sampass->logon_time = mytime;
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 BOOL pdb_set_logoff_time (SAM_ACCOUNT *sampass, time_t mytime)
 {
-	if (!sampass)
-		return False;
-
-	sampass->logoff_time = mytime;
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 BOOL pdb_set_kickoff_time (SAM_ACCOUNT *sampass, time_t mytime)
 {
-	if (!sampass)
-		return False;
-
-	sampass->kickoff_time = mytime;
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 BOOL pdb_set_pass_can_change_time (SAM_ACCOUNT *sampass, time_t mytime)
 {
-	if (!sampass)
-		return False;
-
-	sampass->pass_can_change_time = mytime;
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 BOOL pdb_set_pass_must_change_time (SAM_ACCOUNT *sampass, time_t mytime)
 {
-	if (!sampass)
-		return False;
-
-	sampass->pass_must_change_time = mytime;
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 BOOL pdb_set_pass_last_set_time (SAM_ACCOUNT *sampass, time_t mytime)
 {
-	if (!sampass)
-		return False;
-
-	sampass->pass_last_set_time = mytime;
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 BOOL pdb_set_hours_len (SAM_ACCOUNT *sampass, uint32 len)
 {
-	if (!sampass)
-		return False;
-
-	sampass->hours_len = len;
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 BOOL pdb_set_logon_divs (SAM_ACCOUNT *sampass, uint16 hours)
 {
-	if (!sampass)
-		return False;
-
-	sampass->logon_divs = hours;
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 BOOL pdb_set_init_flag (SAM_ACCOUNT *sampass, uint32 flag)
 {
-	if (!sampass)
-		return False;
-	
-	sampass->init_flag |= flag;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 BOOL pdb_set_uid (SAM_ACCOUNT *sampass, uid_t uid)
 {
-	if (!sampass)
-		return False;
-
-	sampass->uid = uid;
-	sampass->init_flag |= FLAG_SAM_UID; 
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 BOOL pdb_set_gid (SAM_ACCOUNT *sampass, gid_t gid)
 {
-	if (!sampass)
-		return False;
-
-	sampass->gid = gid;	
-	sampass->init_flag |= FLAG_SAM_GID; 
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 BOOL pdb_set_user_rid (SAM_ACCOUNT *sampass, uint32 rid)
 {
-	if (!sampass)
-		return False;
-
-	sampass->user_rid = rid;
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 BOOL pdb_set_group_rid (SAM_ACCOUNT *sampass, uint32 grid)
 {
-	if (!sampass)
-		return False;
-
-	sampass->group_rid = grid;
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*********************************************************************
@@ -1406,15 +925,8 @@ BOOL pdb_set_group_rid (SAM_ACCOUNT *sam
 
 BOOL pdb_set_username(SAM_ACCOUNT *sampass, char *username)
 {	
-	if (!sampass)
-		return False;
-	*sampass->username = '\0';
-	if (!username)
-		return False;
-
-	StrnCpy (sampass->username, username, sizeof(sampass->username)-1);
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*********************************************************************
@@ -1423,15 +935,8 @@ BOOL pdb_set_username(SAM_ACCOUNT *sampa
 
 BOOL pdb_set_domain(SAM_ACCOUNT *sampass, char *domain)
 {	
-	if (!sampass)
-		return False;
-	*sampass->domain = '\0';
-	if (!domain)
-		return False;
-
-	StrnCpy (sampass->domain, domain, sizeof(sampass->domain)-1);
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*********************************************************************
@@ -1440,15 +945,8 @@ BOOL pdb_set_domain(SAM_ACCOUNT *sampass
 
 BOOL pdb_set_nt_username(SAM_ACCOUNT *sampass, char *nt_username)
 {
-	if (!sampass)
-		return False;
-	*sampass->nt_username = '\0';
-	if (!nt_username)
-		return False;
-
-	StrnCpy (sampass->nt_username, nt_username, sizeof(sampass->nt_username) -1);
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*********************************************************************
@@ -1457,15 +955,8 @@ BOOL pdb_set_nt_username(SAM_ACCOUNT *sa
 
 BOOL pdb_set_fullname(SAM_ACCOUNT *sampass, char *fullname)
 {
-	if (!sampass)
-		return False;
-	*sampass->full_name = '\0';
-	if (!fullname)
-		return False;
-
-	StrnCpy (sampass->full_name, fullname, sizeof(sampass->full_name)-1);
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*********************************************************************
@@ -1474,18 +965,8 @@ BOOL pdb_set_fullname(SAM_ACCOUNT *sampa
 
 BOOL pdb_set_logon_script(SAM_ACCOUNT *sampass, char *logon_script, BOOL store)
 {
-	if (!sampass)
-		return False;
-	*sampass->logon_script = '\0';
-	if (!logon_script)
-		return False;
-
-	StrnCpy (sampass->logon_script, logon_script, sizeof(sampass->logon_script)-1);
-
-	if (store)
-		pdb_set_init_flag(sampass, FLAG_SAM_LOGONSCRIPT);
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*********************************************************************
@@ -1494,18 +975,8 @@ BOOL pdb_set_logon_script(SAM_ACCOUNT *s
 
 BOOL pdb_set_profile_path (SAM_ACCOUNT *sampass, char *profile_path, BOOL store)
 {
-	if (!sampass)
-		return False;
-	*sampass->profile_path = '\0';
-	if (!profile_path)
-		return False;
-	
-	StrnCpy (sampass->profile_path, profile_path, sizeof(sampass->profile_path)-1);
-
-	if (store)
-		pdb_set_init_flag(sampass, FLAG_SAM_PROFILE);
-	
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*********************************************************************
@@ -1514,18 +985,8 @@ BOOL pdb_set_profile_path (SAM_ACCOUNT *
 
 BOOL pdb_set_dir_drive (SAM_ACCOUNT *sampass, char *dir_drive, BOOL store)
 {
-	if (!sampass)
-		return False;
-	*sampass->dir_drive = '\0';
-	if (!dir_drive)
-		return False;
-
-	StrnCpy (sampass->dir_drive, dir_drive, sizeof(sampass->dir_drive)-1);
-	
-	if (store)
-		pdb_set_init_flag(sampass, FLAG_SAM_DRIVE);
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*********************************************************************
@@ -1534,18 +995,8 @@ BOOL pdb_set_dir_drive (SAM_ACCOUNT *sam
 
 BOOL pdb_set_homedir (SAM_ACCOUNT *sampass, char *homedir, BOOL store)
 {
-	if (!sampass)
-		return False;
-	*sampass->home_dir = '\0';
-	if (!homedir)
-		return False;
-	
-	StrnCpy (sampass->home_dir, homedir, sizeof(sampass->home_dir)-1);
-
-	if (store)
-		pdb_set_init_flag(sampass, FLAG_SAM_SMBHOME);
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*********************************************************************
@@ -1554,15 +1005,8 @@ BOOL pdb_set_homedir (SAM_ACCOUNT *sampa
 
 BOOL pdb_set_acct_desc (SAM_ACCOUNT *sampass, char *acct_desc)
 {
-	if (!sampass)
-		return False;
-	*sampass->acct_desc = '\0';
-	if (!acct_desc)
-		return False;
-	
-	StrnCpy (sampass->acct_desc, acct_desc, sizeof(sampass->acct_desc)-1);
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*********************************************************************
@@ -1571,15 +1015,8 @@ BOOL pdb_set_acct_desc (SAM_ACCOUNT *sam
 
 BOOL pdb_set_workstations (SAM_ACCOUNT *sampass, char *workstations)
 {
-	if (!sampass)
-		return False;
-	*sampass->workstations = '\0';
-	if (!workstations)
-		return False;
-
-	StrnCpy (sampass->workstations, workstations, sizeof(sampass->workstations)-1);
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*********************************************************************
@@ -1588,15 +1025,8 @@ BOOL pdb_set_workstations (SAM_ACCOUNT *
 
 BOOL pdb_set_munged_dial (SAM_ACCOUNT *sampass, char *munged_dial)
 {
-	if (!sampass)
-		return False;
-	*sampass->munged_dial = '\0';
-	if (!munged_dial)
-		return False;
-
-	StrnCpy (sampass->munged_dial, munged_dial, sizeof(sampass->munged_dial)-1);
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*********************************************************************
@@ -1669,66 +1099,32 @@ BOOL pdb_set_lanman_passwd (SAM_ACCOUNT
 
 BOOL pdb_set_plaintext_passwd (SAM_ACCOUNT *sampass, const char *plaintext)
 {
-	uchar new_lanman_p16[16];
-	uchar new_nt_p16[16];
-	fstring dos_plaintext;
-
-	if (!sampass || !plaintext)
-		return False;
-	
-	fstrcpy(dos_plaintext, unix_to_dos_static(plaintext));
-
-	nt_lm_owf_gen (dos_plaintext, new_nt_p16, new_lanman_p16);
-
-	if (!pdb_set_nt_passwd (sampass, new_nt_p16)) 
-		return False;
-
-	if (!pdb_set_lanman_passwd (sampass, new_lanman_p16)) 
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 BOOL pdb_set_unknown_3 (SAM_ACCOUNT *sampass, uint32 unkn)
 {
-	if (!sampass)
-		return False;
-
-	sampass->unknown_3 = unkn;
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 BOOL pdb_set_unknown_5 (SAM_ACCOUNT *sampass, uint32 unkn)
 {
-	if (!sampass)
-		return False;
-
-	sampass->unknown_5 = unkn;
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 BOOL pdb_set_unknown_6 (SAM_ACCOUNT *sampass, uint32 unkn)
 {
-	if (!sampass)
-		return False;
-
-	sampass->unknown_6 = unkn;
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 BOOL pdb_set_hours (SAM_ACCOUNT *sampass, uint8 *hours)
 {
-	if (!sampass)
-		return False;
-
-	if (!hours) {
-		memset ((char *)sampass->hours, 0, MAX_HOURS_LEN);
-		return True;
-	}
-	
-	memcpy (sampass->hours, hours, MAX_HOURS_LEN);
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /***************************************************************************
diff -pruwN samba-2.2.12/source/passdb/secrets.c samba-2.2.12-livebox/passdb/secrets.c
--- samba-2.2.12/source/passdb/secrets.c	2004-08-12 20:24:27.000000000 +0200
+++ samba-2.2.12-livebox/passdb/secrets.c	2010-03-31 11:45:59.000000000 +0200
@@ -83,12 +83,8 @@ BOOL secrets_store(const char *key, cons
  */
 BOOL secrets_delete(const char *key)
 {
-	TDB_DATA kbuf;
-	if (!tdb)
-		return False;
-	kbuf.dptr = key;
-	kbuf.dsize = strlen(key);
-	return tdb_delete(tdb, kbuf) == 0;
+	  DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 BOOL secrets_store_domain_sid(const char *domain, DOM_SID *sid)
@@ -133,17 +129,8 @@ form a key for fetching a domain trust p
 
 const char *trust_keystr(const char *domain)
 {
-	static fstring keystr;
-	fstring dos_domain;
-
-	fstrcpy(dos_domain, domain);
-	unix_to_dos(dos_domain);
-
-	slprintf(keystr,sizeof(keystr)-1,"%s/%s", 
-		 SECRETS_MACHINE_ACCT_PASS, dos_domain);
-
-	strupper(keystr);
-	return keystr;
+	  DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /************************************************************************
@@ -152,14 +139,8 @@ const char *trust_keystr(const char *dom
 
 BOOL secrets_lock_trust_account_password(const char *domain, BOOL dolock)
 {
-	if (!tdb)
-		return False;
-
-	if (dolock)
-		return (tdb_lock_bystring(tdb, trust_keystr(domain),0) == 0);
-	else
-		tdb_unlock_bystring(tdb, trust_keystr(domain));
-	return True;
+	  DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /************************************************************************
@@ -171,17 +152,8 @@ BOOL secrets_lock_trust_account_password
 BOOL secrets_fetch_trust_account_password(const char *domain, uint8 ret_pwd[16],
 					  time_t *pass_last_set_time)
 {
-	struct machine_acct_pass *pass;
-	size_t size;
-
-	if (!(pass = secrets_fetch(trust_keystr(domain), &size)) || 
-	    size != sizeof(*pass))
-		return False;
-
-	if (pass_last_set_time) *pass_last_set_time = pass->mod_time;
-	memcpy(ret_pwd, pass->hash, 16);
-	SAFE_FREE(pass);
-	return True;
+	  DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /************************************************************************
@@ -190,12 +162,8 @@ BOOL secrets_fetch_trust_account_passwor
 
 BOOL secrets_store_trust_account_password(const char *domain, uint8 new_pwd[16])
 {
-	struct machine_acct_pass pass;
-
-	pass.mod_time = time(NULL);
-	memcpy(pass.hash, new_pwd, 16);
-
-	return secrets_store(trust_keystr(domain), (void *)&pass, sizeof(pass));
+	  DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /************************************************************************
@@ -204,7 +172,8 @@ BOOL secrets_store_trust_account_passwor
 
 BOOL trust_password_delete(const char *domain)
 {
-	return secrets_delete(trust_keystr(domain));
+	  DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -238,43 +207,14 @@ void reset_globals_after_fork(void)
 
 BOOL secrets_store_ldap_pw(const char* dn, const char* pw)
 {
-	fstring key;
-	char *p;
-	
-	pstrcpy(key, dn);
-	for (p=key; *p; p++)
-		if (*p == ',') *p = '/';
-	
-	return secrets_store(key, pw, strlen(pw));
+	  DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 BOOL fetch_ldap_pw(const char *dn, char* pw, int len)
 {
-	fstring key;
-	char *p;
-	void *data = NULL;
-	size_t size;
-	
-	pstrcpy(key, dn);
-	for (p=key; *p; p++)
-		if (*p == ',') *p = '/';
-	
-	data=secrets_fetch(key, &size);
-	if (!size) {
-		DEBUG(0,("fetch_ldap_pw: no ldap secret retrieved!\n"));
-		return False;
-	}
-	
-	if (size > len-1)
-	{
-		DEBUG(0,("fetch_ldap_pw: ldap secret is too long (%d > %d)!\n", size, len-1));
-		return False;
-	}
-
-	memcpy(pw, data, size);
-	pw[size] = '\0';
-	
-	return True;
+	  DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*
@@ -283,16 +223,8 @@ BOOL fetch_ldap_pw(const char *dn, char*
 */
 BOOL secrets_named_mutex(const char *name, unsigned int timeout)
 {
-	int ret;
-
-	if (!message_init())
-		return False;
-
-	ret = tdb_lock_bystring(tdb, name, timeout);
-	if (ret == 0)
-		DEBUG(10,("secrets_named_mutex: got mutex for %s\n", name ));
-
-	return (ret == 0);
+	  DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*
@@ -300,6 +232,6 @@ BOOL secrets_named_mutex(const char *nam
 */
 void secrets_named_mutex_release(const char *name)
 {
-	tdb_unlock_bystring(tdb, name);
-	DEBUG(10,("secrets_named_mutex: released mutex for %s\n", name ));
+	  DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
diff -pruwN samba-2.2.12/source/passdb/smbpassfile.c samba-2.2.12-livebox/passdb/smbpassfile.c
--- samba-2.2.12/source/passdb/smbpassfile.c	2004-08-12 20:24:27.000000000 +0200
+++ samba-2.2.12-livebox/passdb/smbpassfile.c	2010-03-31 11:45:59.000000000 +0200
@@ -39,20 +39,8 @@ static FILE *mach_passwd_fp;
 
 static BOOL pw_file_lock(int fd, int type, int secs, int *plock_depth)
 {
-  if (fd < 0)
-    return False;
-
-  if(*plock_depth == 0) {
-    if (!do_file_lock(fd, secs, type)) {
-      DEBUG(10,("pw_file_lock: locking file failed, error = %s.\n",
-                 strerror(errno)));
-      return False;
-    }
-  }
-
-  (*plock_depth)++;
-
-  return True;
+DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /***************************************************************
@@ -61,18 +49,8 @@ static BOOL pw_file_lock(int fd, int typ
 
 static BOOL pw_file_unlock(int fd, int *plock_depth)
 {
-  BOOL ret=True;
-
-  if(*plock_depth == 1)
-    ret = do_file_lock(fd, 5, F_UNLCK);
-
-  if (*plock_depth > 0)
-    (*plock_depth)--;
-
-  if(!ret)
-    DEBUG(10,("pw_file_unlock: unlocking file failed, error = %s.\n",
-                 strerror(errno)));
-  return ret;
+DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /************************************************************************
@@ -142,10 +120,8 @@ static BOOL trust_password_file_lock(cha
 
 static BOOL trust_password_file_unlock(void)
 {
-  BOOL ret = pw_file_unlock(fileno(mach_passwd_fp), &mach_passwd_lock_depth);
-  if(mach_passwd_lock_depth == 0)
-    fclose(mach_passwd_fp);
-  return ret;
+DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /************************************************************************
@@ -156,16 +132,8 @@ static BOOL trust_password_file_unlock(v
 
 static BOOL trust_password_file_delete( char *domain, char *name )
 {
-  pstring mac_file;
-  int ret;
-
-  get_trust_account_file_name( domain, name, mac_file);
-  if(sys_ftruncate(fileno(mach_passwd_fp),(SMB_OFF_T)0) == -1) {
-    DEBUG(0,("trust_password_file_delete: Failed to truncate file %s (%s)\n",
-        mac_file, strerror(errno) ));
-  }
-  ret = unlink( mac_file );
-  return (ret != -1);
+DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /************************************************************************
@@ -176,97 +144,8 @@ static BOOL trust_password_file_delete(
 
 static BOOL get_trust_account_password_from_file( unsigned char *ret_pwd, time_t *pass_last_set_time)
 {
-  char linebuf[256];
-  char *p;
-  int i;
-  SMB_STRUCT_STAT st;
-  linebuf[0] = '\0';
-
-  *pass_last_set_time = (time_t)0;
-  memset(ret_pwd, '\0', 16);
-
-  if(sys_fstat(fileno(mach_passwd_fp), &st) == -1) {
-    DEBUG(0,("get_trust_account_password: Failed to stat file. Error was %s.\n",
-              strerror(errno) )); 
-    return False;
-  }
-
-  /*
-   * If size is zero, another smbd has migrated this file
-   * to the secrets.tdb file, and we are in a race condition.
-   * Just ignore the file.
-   */
-
-  if (st.st_size == 0)
-    return False;
-
-  if(sys_fseek( mach_passwd_fp, (SMB_OFF_T)0, SEEK_SET) == -1) {
-    DEBUG(0,("get_trust_account_password: Failed to seek to start of file. Error was %s.\n",
-              strerror(errno) ));
-    return False;
-  } 
-
-  fgets(linebuf, sizeof(linebuf), mach_passwd_fp);
-  if(ferror(mach_passwd_fp)) {
-    DEBUG(0,("get_trust_account_password: Failed to read password. Error was %s.\n",
-              strerror(errno) ));
-    return False;
-  }
-
-  if(linebuf[strlen(linebuf)-1] == '\n')
-    linebuf[strlen(linebuf)-1] = '\0';
-
-  /*
-   * The length of the line read
-   * must be 45 bytes ( <---XXXX 32 bytes-->:TLC-12345678
-   */
-
-  if(strlen(linebuf) != 45) {
-    DEBUG(0,("get_trust_account_password: Malformed trust password file (wrong length \
-- was %d, should be 45).\n", (int)strlen(linebuf)));
-#ifdef DEBUG_PASSWORD
-    DEBUG(100,("get_trust_account_password: line = |%s|\n", linebuf));
-#endif
-    return False;
-  }
-
-  /*
-   * Get the hex password.
-   */
-
-  if (!pdb_gethexpwd((char *)linebuf, ret_pwd) || linebuf[32] != ':' || 
-         strncmp(&linebuf[33], "TLC-", 4)) {
-    DEBUG(0,("get_trust_account_password: Malformed trust password file (incorrect format).\n"));
-#ifdef DEBUG_PASSWORD
-    DEBUG(100,("get_trust_account_password: line = |%s|\n", linebuf));
-#endif
-    return False;
-  }
-
-  /*
-   * Get the last changed time.
-   */
-  p = &linebuf[37];
-
-  for(i = 0; i < 8; i++) {
-    if(p[i] == '\0' || !isxdigit((int)p[i])) {
-      DEBUG(0,("get_trust_account_password: Malformed trust password file (no timestamp).\n"));
-#ifdef DEBUG_PASSWORD
-      DEBUG(100,("get_trust_account_password: line = |%s|\n", linebuf));
-#endif
-      return False;
-    }
-  }
-
-  /*
-   * p points at 8 characters of hex digits -
-   * read into a time_t as the seconds since
-   * 1970 that the password was last changed.
-   */
-
-  *pass_last_set_time = (time_t)strtol(p, NULL, 16);
-
-  return True;
+DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /************************************************************************
diff -pruwN samba-2.2.12/source/printing/printing.c samba-2.2.12-livebox/printing/printing.c
--- samba-2.2.12/source/printing/printing.c	2004-08-12 20:24:22.000000000 +0200
+++ samba-2.2.12-livebox/printing/printing.c	2010-03-31 11:45:59.000000000 +0200
@@ -41,7 +41,6 @@ struct printif *current_printif = &gener
 /* the open printing.tdb database */
 static TDB_CONTEXT *tdb;
 static pid_t local_pid;
-
 static int get_queue_status(int, print_status_struct *);
 
 /****************************************************************************
@@ -686,7 +685,8 @@ BOOL print_job_delete(struct current_use
 	   owns their job. */
 
 	if (!owner && 
-	    !print_access_check(user, snum, JOB_ACCESS_ADMINISTER)) {
+	    !print_access_check(user, snum, JOB_ACCESS_ADMINISTER)) 
+    {
 		DEBUG(3, ("delete denied by security descriptor\n"));
 		*errcode = WERR_ACCESS_DENIED;
 		return False;
@@ -828,6 +828,7 @@ int print_job_write(int jobid, const cha
 		pjob->size += size;
 		print_job_store(jobid, pjob);
 	}
+
 	return return_code;
 }
 
@@ -940,6 +941,7 @@ int print_job_start(struct current_user
 	int next_jobid;
 	user_struct *vuser;
 	int njobs = 0;
+    char * printer_name;
 
 	errno = 0;
 
@@ -1034,9 +1036,18 @@ int print_job_start(struct current_user
 	tdb_store_int32(tdb, "INFO/nextjob", jobid);
 
 	/* we have a job entry - now create the spool file */
-	slprintf(pjob.filename, sizeof(pjob.filename)-1, "%s/%s%.6d.XXXXXX", 
-		 path, PRINT_SPOOL_PREFIX, jobid);
-	pjob.fd = smb_mkstemp(pjob.filename);
+	slprintf(pjob.filename, sizeof(pjob.filename)-1, "%s/%s%.6d.XXXXXX",path, PRINT_SPOOL_PREFIX, jobid);
+	//modified by maaoui wael in 14/12/2007
+    
+    	
+	
+	/*the parameter printer name in the smb.conf contain the printer path*/
+
+	pjob.fd= usbPrintOpen(PRINTERNAME(snum));
+	
+	
+	//end of modification
+	
 
 	if (pjob.fd == -1) {
 		if (errno == EACCES) {
@@ -1122,7 +1133,13 @@ BOOL print_job_end(int jobid, BOOL norma
 
 	if (normal_close && (sys_fstat(pjob->fd, &sbuf) == 0)) {
 		pjob->size = sbuf.st_size;
-		close(pjob->fd);
+		//modified by maaoui wael in 14/12/2007
+        
+        /*the parameter printer name in the smb.conf contain the printer path*/
+		
+	
+		usbPrintClose(pjob->fd, PRINTERNAME(snum));
+				//end of modification 
 		pjob->fd = -1;
 	} else {
 
@@ -1130,9 +1147,11 @@ BOOL print_job_end(int jobid, BOOL norma
 		 * Not a normal close or we couldn't stat the job file,
 		 * so something has gone wrong. Cleanup.
 		 */
-		close(pjob->fd);
+		//modified by maaoui wael in 14/12/2007
+		usbPrintClose(pjob->fd, PRINTERNAME(snum));
+		//end of modification
 		pjob->fd = -1;
-		DEBUG(3,("print_job_end: failed to stat file for jobid %d\n", jobid ));
+		DEBUG(0,("print_job_end: failed to stat file for jobid %d\n", jobid ));
 		goto fail;
 	}
 
@@ -1422,19 +1441,22 @@ BOOL print_queue_resume(struct current_u
 
 BOOL print_queue_purge(struct current_user *user, int snum, WERROR *errcode)
 {
-	print_queue_struct *queue;
+/*	print_queue_struct *queue;
 	print_status_struct status;
 	char *printer_name;
 	int njobs, i;
 	BOOL can_job_admin;
 
-	/* Force and update so the count is accurate (i.e. not a cached count) */
+	// Force and update so the count is accurate (i.e. not a cached count)  
 	print_queue_update(snum);
 	
 	can_job_admin = print_access_check(user, snum, JOB_ACCESS_ADMINISTER);
 	njobs = print_queue_status(snum, &queue, &status);
 
-	for (i=0;i<njobs;i++) {
+	DEBUG(0,("print_queue_purge: njobs = %d\n",njobs));
+
+	//modified by Wael MAAOUI in 17/12/2007
+	/* for (i=0;i<njobs;i++) {
 		BOOL owner = is_owner(user, queue[i].job);
 
 		if (owner || can_job_admin) {
@@ -1443,12 +1465,14 @@ BOOL print_queue_purge(struct current_us
 	}
 
 	safe_free(queue);
+	//end of modification
 
-	/* Send a printer notify message */
+	// Send a printer notify message
 
 	printer_name = PRINTERNAME(snum);
 
-	send_queue_message(printer_name, 0, PRINTER_CHANGE_JOB);
+	send_queue_message(printer_name, 0, PRINTER_CHANGE_JOB);*/
 
 	return True;
+	
 }
diff -pruwN samba-2.2.12/source/printing/usbprint.c samba-2.2.12-livebox/printing/usbprint.c
--- samba-2.2.12/source/printing/usbprint.c	1970-01-01 01:00:00.000000000 +0100
+++ samba-2.2.12-livebox/printing/usbprint.c	2010-03-31 11:45:59.000000000 +0200
@@ -0,0 +1,110 @@
+/**
+ * @file 	usbprint.c
+ * @author 	MAAOUI Wael
+ * @date 	2007-11-22
+ *
+ * @brief  	module to manage usb printer
+ *
+ * @par 	Modifications
+ *
+ *
+ * @par 	Licences
+ *   		Copyright (C) 2000-2007 SAFRAN
+ *   		All rights reserved
+ *
+ */
+////////////////////////////////////////////////////////////////////////////////////////////////////
+
+/**
+ * Include necessary standard headers...
+ */
+#include <stdlib.h>
+#include <stdio.h>
+#include <unistd.h>
+#include <fcntl.h>
+#include <sys/stat.h>
+#include <sys/file.h>
+#include <sys/types.h>
+
+ /**
+ * Include necessary custom headers...
+ */
+
+
+
+#define PREFIX_LOCK_FILE  		    "/var/lock/lock_"
+#define PREFIX_DEVICE_NODE          "usblp"
+#define LOCK_FILE_LENGTH            32
+#define USB_PRINTER                 "/dev/usblp0" /* USB Port */
+#define LOCK_FILE 		    "/var/lock/lock_usblp0"
+
+int usbPrintOpen(const char * p_printer_path);
+void usbPrintClose(int fd, const char * p_printer_path);
+static void get_lock_file(const char * p_printer_path, char lock_file[LOCK_FILE_LENGTH]);
+
+
+/*******************************************************************************
+* Public  Functions implementation
+*******************************************************************************/
+
+ /**
+  * @brief 		open usb device and create the file lock
+  * @param 		p_printer_path : a pointer to the printer path to get the name
+  *                             of the lock file
+  * @returns 	the file descriptor of the printer device node
+  **/
+int usbPrintOpen(const char * p_printer_path)
+{  
+	struct stat state;
+    char lock_file [LOCK_FILE_LENGTH] = PREFIX_LOCK_FILE;
+	int usb_fd = -1;             /* usb file descriptor */
+   
+   get_lock_file(p_printer_path, lock_file);
+    	
+	if (lstat(lock_file,&state) != 0)
+	{	
+		creat(lock_file,S_IRWXU);
+		usb_fd = open(p_printer_path,O_WRONLY|O_SYNC);
+	}
+    
+	return usb_fd; 
+      
+}
+
+ /**
+  * @brief 		close usb device and delete the lock file
+  * @param 		fd : the file descriptor of the printer device node
+  * @param      p_printer_path : a pointer to the printer path to get the name
+  *                             of the file lock
+  * @returns 	none
+  **/
+void usbPrintClose(int fd, const char * p_printer_path)
+{
+    char lock_file [LOCK_FILE_LENGTH] = PREFIX_LOCK_FILE;
+    
+    close(fd);
+    get_lock_file(p_printer_path, lock_file);
+    unlink(lock_file);
+}
+
+
+
+/*******************************************************************************
+* local  Functions implementation
+*******************************************************************************/
+
+ /**
+  * @brief      return the name of the lock file
+  * @param      p_printer_path : a pointer to the printer path
+  * @param      p_lock_file    : a pointer to the lock file
+  * @returns    none
+  **/
+static void get_lock_file(const char * p_printer_path, char * p_lock_file)
+{
+    char * device_node;
+    
+    device_node = strrchr(p_printer_path, '/') + 1;
+    strncat(p_lock_file,device_node,strlen(device_node));
+    
+}
+
diff -pruwN samba-2.2.12/source/profile/profile.c samba-2.2.12-livebox/profile/profile.c
--- samba-2.2.12/source/profile/profile.c	2004-08-12 20:24:34.000000000 +0200
+++ samba-2.2.12-livebox/profile/profile.c	2010-03-31 11:45:59.000000000 +0200
@@ -45,34 +45,8 @@ receive a set profile level message
 ****************************************************************************/
 void profile_message(int msg_type, pid_t src, void *buf, size_t len)
 {
-        int level;
-
-	memcpy(&level, buf, sizeof(int));
-#ifdef WITH_PROFILE
-	switch (level) {
-	case 0:		/* turn off profiling */
-		do_profile_flag = False;
-		do_profile_times = False;
-		DEBUG(1,("INFO: Profiling turned OFF from pid %d\n", (int)src));
-		break;
-	case 1:		/* turn on counter profiling only */
-		do_profile_flag = True;
-		do_profile_times = False;
-		DEBUG(1,("INFO: Profiling counts turned ON from pid %d\n", (int)src));
-		break;
-	case 2:		/* turn on complete profiling */
-		do_profile_flag = True;
-		do_profile_times = True;
-		DEBUG(1,("INFO: Full profiling turned ON from pid %d\n", (int)src));
-		break;
-	case 3:		/* reset profile values */
-		memset((char *)profile_p, 0, sizeof(*profile_p));
-		DEBUG(1,("INFO: Profiling values cleared from pid %d\n", (int)src));
-		break;
-	}
-#else /* ndef WITH_PROFILE */
-	DEBUG(1,("INFO: Profiling support unavailable in this build.\n"));
-#endif /* WITH_PROFILE */
+DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /****************************************************************************
@@ -80,15 +54,8 @@ receive a request profile level message
 ****************************************************************************/
 void reqprofile_message(int msg_type, pid_t src, void *buf, size_t len)
 {
-        int level;
-
-#ifdef WITH_PROFILE
-	level = 1 + (do_profile_flag?2:0) + (do_profile_times?4:0);
-#else
-	level = 0;
-#endif
-	DEBUG(1,("INFO: Received REQ_PROFILELEVEL message from PID %u\n",(unsigned int)src));
-	message_send_pid(src, MSG_PROFILELEVEL, &level, sizeof(int), True);
+DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
diff -pruwN samba-2.2.12/source/rpc_client/cli_login.c samba-2.2.12-livebox/rpc_client/cli_login.c
--- samba-2.2.12/source/rpc_client/cli_login.c	2004-08-12 20:24:19.000000000 +0200
+++ samba-2.2.12-livebox/rpc_client/cli_login.c	2010-03-31 11:45:59.000000000 +0200
@@ -32,48 +32,8 @@ Initialize domain session credentials.
 
 NTSTATUS cli_nt_setup_creds(struct cli_state *cli, unsigned char mach_pwd[16])
 {
-	NTSTATUS result;
-	DOM_CHAL clnt_chal;
-	DOM_CHAL srv_chal;
-
-	UTIME zerotime;
-
-	/******************* Request Challenge ********************/
-
-	generate_random_buffer( clnt_chal.data, 8, False);
-	
-	/* Send a client challenge; receive a server challenge */
-	if (!cli_net_req_chal(cli, &clnt_chal, &srv_chal)) {
-		DEBUG(0,("cli_nt_setup_creds: request challenge failed\n"));
-		return NT_STATUS_UNSUCCESSFUL;
-	}
-
-	/**************** Long-term Session key **************/
-
-	/* calculate the session key */
-	cred_session_key(&clnt_chal, &srv_chal, (uchar *)mach_pwd, cli->sess_key);
-	memset((char *)cli->sess_key+8, '\0', 8);
-
-	/******************* Authenticate 2 ********************/
-
-	/* Calculate auth-2 credentials */
-	zerotime.time = 0;
-	cred_create(cli->sess_key, &clnt_chal, zerotime, &(cli->clnt_cred.challenge));
-
-	/*  
-	 * Send client auth-2 challenge.
-	 * Receive an auth-2 challenge response and check it.
-	 */
-
-	result = cli_net_auth2(cli, (lp_server_role() == ROLE_DOMAIN_MEMBER) ?
-			SEC_CHAN_WKSTA : SEC_CHAN_BDC, 0x000001ff, &srv_chal);
-  
-	if (!NT_STATUS_IS_OK(result)) {
-		DEBUG(0,("cli_nt_setup_creds: auth2 challenge failed\n"));
-		return result;
-	}
-
-	return NT_STATUS_OK;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /****************************************************************************
@@ -82,19 +42,8 @@ NTSTATUS cli_nt_setup_creds(struct cli_s
 
 BOOL cli_nt_srv_pwset(struct cli_state *cli, unsigned char *new_hashof_mach_pwd)
 {
-	unsigned char processed_new_pwd[16];
-
-	DEBUG(5,("cli_nt_srv_pwset: %d\n", __LINE__));
-
-#ifdef DEBUG_PASSWORD
-	dump_data(6, (char *)new_hashof_mach_pwd, 16);
-#endif
-
-	/* Process the new password. */
-	cred_hash3( processed_new_pwd, new_hashof_mach_pwd, cli->sess_key, 1);
-
-	/* Send client srv_pwset challenge */
-	return cli_net_srv_pwset(cli, processed_new_pwd);
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /****************************************************************************
@@ -108,54 +57,8 @@ NTSTATUS cli_nt_login_interactive(struct
 				uint32 smb_userid_low, char *unix_password,
 				NET_ID_INFO_CTR *ctr, NET_USER_INFO_3 *user_info3)
 {
-	fstring dos_password, dos_username, dos_domain;
-	uchar lm_owf_user_pwd[16];
-	uchar nt_owf_user_pwd[16];
-	NTSTATUS ret;
-
-	DEBUG(5,("cli_nt_login_interactive: %d\n", __LINE__));
-
-	fstrcpy(dos_password, unix_password);
-	unix_to_dos(dos_password);
-	fstrcpy(dos_username, unix_username);
-	unix_to_dos(dos_username);
-	fstrcpy(dos_domain, unix_domain);
-	unix_to_dos(dos_domain);
-
-	nt_lm_owf_gen(dos_password, nt_owf_user_pwd, lm_owf_user_pwd);
-
-#ifdef DEBUG_PASSWORD
-
-	DEBUG(100,("nt owf of user password: "));
-	dump_data(100, (char *)lm_owf_user_pwd, 16);
-
-	DEBUG(100,("nt owf of user password: "));
-	dump_data(100, (char *)nt_owf_user_pwd, 16);
-
-#endif
-
-	DEBUG(5,("cli_nt_login_interactive: %d\n", __LINE__));
-
-	/* indicate an "interactive" login */
-	ctr->switch_value = INTERACTIVE_LOGON_TYPE;
-
-	/* Create the structure needed for SAM logon. */
-	init_id_info1(&ctr->auth.id1, dos_domain, 0, 
-		smb_userid_low, 0,
-		dos_username, cli->clnt_name_slash,
-		(char *)cli->sess_key, lm_owf_user_pwd, nt_owf_user_pwd);
-
-	/* Ensure we overwrite all the plaintext password equivalents. */
-	memset(lm_owf_user_pwd, '\0', sizeof(lm_owf_user_pwd));
-	memset(nt_owf_user_pwd, '\0', sizeof(nt_owf_user_pwd));
-
-	/* Send client sam-logon request - update credentials on success. */
-	ret = cli_net_sam_logon(cli, ctr, user_info3);
-
-	memset(ctr->auth.id1.lm_owf.data, '\0', sizeof(lm_owf_user_pwd));
-	memset(ctr->auth.id1.nt_owf.data, '\0', sizeof(nt_owf_user_pwd));
-
-	return ret;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /****************************************************************************
@@ -169,28 +72,8 @@ NTSTATUS cli_nt_login_network(struct cli
 				const char *lm_chal_resp, const char *nt_chal_resp,
 				NET_ID_INFO_CTR *ctr, NET_USER_INFO_3 *user_info3)
 {
-	fstring dos_wksta_name, dos_username, dos_domain;
-	DEBUG(5,("cli_nt_login_network: %d\n", __LINE__));
-	/* indicate a "network" login */
-	ctr->switch_value = NET_LOGON_TYPE;
-
-	fstrcpy(dos_wksta_name, cli->clnt_name_slash);
-	unix_to_dos(dos_wksta_name);
-
-	fstrcpy(dos_username, unix_username);
-	unix_to_dos(dos_username);
-
-	fstrcpy(dos_domain, unix_domain);
-	unix_to_dos(dos_domain);
-
-	/* Create the structure needed for SAM logon. */
-	init_id_info2(&ctr->auth.id2, dos_domain, 0, smb_userid_low, 0,
-		dos_username, dos_wksta_name,
-		(const uchar *)lm_chal, (const uchar *)lm_chal_resp, lm_chal_resp ? 24 : 0,
-		(const uchar *)nt_chal_resp, nt_chal_resp ? 24 : 0 );
-
-	/* Send client sam-logon request - update credentials on success. */
-	return cli_net_sam_logon(cli, ctr, user_info3);
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /****************************************************************************
@@ -199,8 +82,6 @@ NT Logoff.
 
 BOOL cli_nt_logoff(struct cli_state *cli, NET_ID_INFO_CTR *ctr)
 {
-	DEBUG(5,("cli_nt_logoff: %d\n", __LINE__));
-
-	/* Send client sam-logoff request - update credentials on success. */
-	return cli_net_sam_logoff(cli, ctr);
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
diff -pruwN samba-2.2.12/source/rpc_client/cli_netlogon.c samba-2.2.12-livebox/rpc_client/cli_netlogon.c
--- samba-2.2.12/source/rpc_client/cli_netlogon.c	2004-08-12 20:24:19.000000000 +0200
+++ samba-2.2.12-livebox/rpc_client/cli_netlogon.c	2010-03-31 11:45:59.000000000 +0200
@@ -34,17 +34,8 @@ Generate the next creds to use.
 
 static void gen_next_creds( struct cli_state *cli, DOM_CRED *new_clnt_cred)
 {
-  /*
-   * Create the new client credentials.
-   */
-
-  cli->clnt_cred.timestamp.time = time(NULL);
-
-  memcpy(new_clnt_cred, &cli->clnt_cred, sizeof(*new_clnt_cred));
-
-  /* Calculate the new credentials. */
-  cred_create(cli->sess_key, &(cli->clnt_cred.challenge),
-              new_clnt_cred->timestamp, &(new_clnt_cred->challenge));
+DEBUG(1,("function ommited\n"));
+/* function omited*/
 
 }
 
@@ -116,88 +107,8 @@ encrypt of the server challenge original
 NTSTATUS cli_net_auth2(struct cli_state *cli, uint16 sec_chan, 
                    uint32 neg_flags, DOM_CHAL *srv_chal)
 {
-  prs_struct rbuf;
-  prs_struct buf; 
-  NET_Q_AUTH_2 q_a;
-  BOOL ok = False;
-  NTSTATUS result = NT_STATUS_UNSUCCESSFUL;
-
-  prs_init(&buf , 1024, cli->mem_ctx, MARSHALL);
-  prs_init(&rbuf, 0,    cli->mem_ctx, UNMARSHALL);
-
-  /* create and send a MSRPC command with api NET_AUTH2 */
-
-  DEBUG(4,("cli_net_auth2: srv:%s acct:%s sc:%x mc: %s chal %s neg: %x\n",
-	   cli->srv_name_slash, cli->mach_acct, sec_chan, global_myname,
-	   credstr(cli->clnt_cred.challenge.data), neg_flags));
-
-  /* store the parameters */
-  init_q_auth_2(&q_a, unix_to_dos_static(cli->srv_name_slash), cli->mach_acct, 
-		sec_chan, global_myname, &cli->clnt_cred.challenge, neg_flags);
-
-  /* turn parameters into data stream */
-  if(!net_io_q_auth_2("", &q_a,  &buf, 0)) {
-    DEBUG(0,("cli_net_auth2: Error : failed to marshall NET_Q_AUTH_2 struct.\n"));
-    prs_mem_free(&buf);
-    prs_mem_free(&rbuf);
-    return result;
-  }
-
-  /* send the data on \PIPE\ */
-  if (rpc_api_pipe_req(cli, NET_AUTH2, &buf, &rbuf))
-  {
-    NET_R_AUTH_2 r_a;
-
-    ok = net_io_r_auth_2("", &r_a, &rbuf, 0);
-    result = r_a.status;
-		
-    if (ok && !NT_STATUS_IS_OK(result))
-    {
-      /* report error code */
-      DEBUG(0,("cli_net_auth2: Error %s\n", get_nt_error_msg(result)));
-      ok = False;
-    }
-
-    if (ok)
-    {
-      /* 
-       * Check the returned value using the initial
-       * server received challenge.
-       */
-      UTIME zerotime;
-
-      zerotime.time = 0;
-      if(cred_assert( &r_a.srv_chal, cli->sess_key, srv_chal, zerotime) == 0) {
-        /*
-         * Server replied with bad credential. Fail.
-         */
-        DEBUG(0,("cli_net_auth2: server %s replied with bad credential (bad machine \
-password ?).\n", cli->desthost ));
-        ok = False;
-      }
-    }
-
-#if 0
-    /*
-     * Try commenting this out to see if this makes the connect
-     * work for a NT 3.51 PDC. JRA.
-     */
-
-    if (ok && r_a.srv_flgs.neg_flags != q_a.clnt_flgs.neg_flags)
-    {
-      /* report different neg_flags */
-      DEBUG(0,("cli_net_auth2: error neg_flags (q,r) differ - (%x,%x)\n",
-          q_a.clnt_flgs.neg_flags, r_a.srv_flgs.neg_flags));
-      ok = False;
-    }
-#endif
-
-  }
-
-  prs_mem_free(&buf);
-  prs_mem_free(&rbuf);
-
-  return result;
+DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /****************************************************************************
@@ -207,58 +118,8 @@ server response. These are used to gener
 
 BOOL cli_net_req_chal(struct cli_state *cli, DOM_CHAL *clnt_chal, DOM_CHAL *srv_chal)
 {
-  prs_struct rbuf;
-  prs_struct buf; 
-  NET_Q_REQ_CHAL q_c;
-  BOOL valid_chal = False;
-
-  prs_init(&buf , 1024, cli->mem_ctx, MARSHALL);
-  prs_init(&rbuf, 0, cli->mem_ctx, UNMARSHALL);
-
-  /* create and send a MSRPC command with api NET_REQCHAL */
-
-  DEBUG(4,("cli_net_req_chal: LSA Request Challenge from %s to %s: %s\n",
-         cli->desthost, global_myname, credstr(clnt_chal->data)));
-
-  /* store the parameters */
-  init_q_req_chal(&q_c, unix_to_dos_static(cli->srv_name_slash), 
-		  global_myname, clnt_chal);
-
-  /* turn parameters into data stream */
-  if(!net_io_q_req_chal("", &q_c,  &buf, 0)) {
-    DEBUG(0,("cli_net_req_chal: Error : failed to marshall NET_Q_REQ_CHAL struct.\n"));
-    prs_mem_free(&buf);
-    prs_mem_free(&rbuf);
-    return False;
-  }
-
-  /* send the data on \PIPE\ */
-  if (rpc_api_pipe_req(cli, NET_REQCHAL, &buf, &rbuf))
-  {
-    NET_R_REQ_CHAL r_c;
-    BOOL ok;
-
-    ok = net_io_r_req_chal("", &r_c, &rbuf, 0);
-		
-    if (ok && !NT_STATUS_IS_OK(r_c.status))
-    {
-      /* report error code */
-      DEBUG(0,("cli_net_req_chal: Error %s\n", get_nt_error_msg(r_c.status)));
-      ok = False;
-    }
-
-    if (ok)
-    {
-      /* ok, at last: we're happy. return the challenge */
-      memcpy(srv_chal, r_c.srv_chal.data, sizeof(srv_chal->data));
-      valid_chal = True;
-    }
-  }
-
-  prs_mem_free(&buf);
-  prs_mem_free(&rbuf);
-
-  return valid_chal;
+DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /***************************************************************************
@@ -267,67 +128,8 @@ LSA Server Password Set.
 
 BOOL cli_net_srv_pwset(struct cli_state *cli, uint8 hashed_mach_pwd[16])
 {
-  prs_struct rbuf;
-  prs_struct buf; 
-  DOM_CRED new_clnt_cred;
-  NET_Q_SRV_PWSET q_s;
-  BOOL ok = False;
-  uint16 sec_chan_type = 2;
-
-  gen_next_creds( cli, &new_clnt_cred);
-
-  prs_init(&buf , 1024, cli->mem_ctx, MARSHALL);
-  prs_init(&rbuf, 0,    cli->mem_ctx, UNMARSHALL);
-
-  /* create and send a MSRPC command with api NET_SRV_PWSET */
-
-  DEBUG(4,("cli_net_srv_pwset: srv:%s acct:%s sc: %d mc: %s clnt %s %x\n",
-           cli->srv_name_slash, cli->mach_acct, sec_chan_type, global_myname,
-           credstr(new_clnt_cred.challenge.data), new_clnt_cred.timestamp.time));
-
-  /* store the parameters */
-  init_q_srv_pwset(&q_s, unix_to_dos_static(cli->srv_name_slash), 
-		   cli->mach_acct, sec_chan_type, global_myname, 
-		   &new_clnt_cred, (char *)hashed_mach_pwd);
-
-  /* turn parameters into data stream */
-  if(!net_io_q_srv_pwset("", &q_s,  &buf, 0)) {
-    DEBUG(0,("cli_net_srv_pwset: Error : failed to marshall NET_Q_SRV_PWSET struct.\n"));
-    prs_mem_free(&buf);
-    prs_mem_free(&rbuf);
-    return False;
-  }
-
-  /* send the data on \PIPE\ */
-  if (rpc_api_pipe_req(cli, NET_SRVPWSET, &buf, &rbuf))
-  {
-    NET_R_SRV_PWSET r_s;
-
-    ok = net_io_r_srv_pwset("", &r_s, &rbuf, 0);
-		
-    if (ok && !NT_STATUS_IS_OK(r_s.status))
-    {
-      /* report error code */
-      DEBUG(0,("cli_net_srv_pwset: %s\n", get_nt_error_msg(r_s.status)));
-      ok = False;
-    }
-
-    /* Update the credentials. */
-    if (ok && !clnt_deal_with_creds(cli->sess_key, &(cli->clnt_cred), &(r_s.srv_cred)))
-    {
-      /*
-       * Server replied with bad credential. Fail.
-       */
-      DEBUG(0,("cli_net_srv_pwset: server %s replied with bad credential (bad machine \
-password ?).\n", cli->desthost ));
-      ok = False;
-    }
-  }
-
-  prs_mem_free(&buf);
-  prs_mem_free(&rbuf);
-
-  return ok;
+DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /***************************************************************************
@@ -339,97 +141,8 @@ static NTSTATUS cli_net_sam_logon_intern
 					   NET_USER_INFO_3 *user_info3, 
 					   uint16 validation_level)
 {
-	DOM_CRED new_clnt_cred;
-	DOM_CRED dummy_rtn_creds;
-	prs_struct rbuf;
-	prs_struct buf; 
-	NET_Q_SAM_LOGON q_s;
-	NET_R_SAM_LOGON r_s;
-	NTSTATUS retval = NT_STATUS_OK;
-
-	gen_next_creds( cli, &new_clnt_cred);
-
-	prs_init(&buf , 1024, cli->mem_ctx, MARSHALL);
-	prs_init(&rbuf, 0,    cli->mem_ctx, UNMARSHALL);
-
-	/* create and send a MSRPC command with api NET_SAMLOGON */
-
-	DEBUG(4,("cli_net_sam_logon_internal: srv:%s mc:%s clnt %s %x ll: %d\n",
-             cli->srv_name_slash, global_myname, 
-             credstr(new_clnt_cred.challenge.data), cli->clnt_cred.timestamp.time,
-             ctr->switch_value));
-
-	memset(&dummy_rtn_creds, '\0', sizeof(dummy_rtn_creds));
-	dummy_rtn_creds.timestamp.time = time(NULL);
-
-	/* store the parameters */
-	q_s.validation_level = validation_level;
-	init_sam_info(&q_s.sam_id, unix_to_dos_static(cli->srv_name_slash), 
-		global_myname, &new_clnt_cred, &dummy_rtn_creds, 
-		ctr->switch_value, ctr);
-
-	/* turn parameters into data stream */
-	if(!net_io_q_sam_logon("", &q_s,  &buf, 0)) {
-		DEBUG(0,("cli_net_sam_logon_internal: Error : failed to marshall NET_Q_SAM_LOGON struct.\n"));
-		retval = NT_STATUS_NO_MEMORY;
-		goto out;
-	}
-
-	/* send the data on \PIPE\ */
-	if (!rpc_api_pipe_req(cli, NET_SAMLOGON, &buf, &rbuf)) {
-		DEBUG(0,("cli_net_sam_logon_internal: Error rpc_api_pipe_req failed.\n"));
-                retval = NT_STATUS_UNSUCCESSFUL;
-		goto out;
-	}
-
-	r_s.user = user_info3;
-
-	if(!net_io_r_sam_logon("", &r_s, &rbuf, 0)) {
-		DEBUG(0,("cli_net_sam_logon_internal: Error : failed to unmarshal NET_R_SAM_LOGON struct.\n"));
-		retval = NT_STATUS_NO_MEMORY;
-		goto out;
-	}
-		
-	retval = r_s.status;
-
-	/*
-	 * Don't treat NT_STATUS_INVALID_INFO_CLASS as an error - we will re-issue
-	 * the call.
-	 */
-	
-	if (NT_STATUS_V(retval) == NT_STATUS_V(NT_STATUS_INVALID_INFO_CLASS)) {
-		goto out;
-	}
-
-	if (!NT_STATUS_IS_OK(retval)) {
-		/* report error code */
-		DEBUG(0,("cli_net_sam_logon_internal: %s\n", get_nt_error_msg(r_s.status)));
-		goto out;
-    }
-
-    /* Update the credentials. */
-    if (!clnt_deal_with_creds(cli->sess_key, &cli->clnt_cred, &r_s.srv_creds)) {
-		/*
-		 * Server replied with bad credential. Fail.
-		 */
-		DEBUG(0,("cli_net_sam_logon_internal: server %s replied with bad credential (bad machine \
-password ?).\n", cli->desthost ));
-		retval = NT_STATUS_WRONG_PASSWORD;
-    }
-
-    if (r_s.switch_value != validation_level) {
-		/* report different switch_value */
-		DEBUG(0,("cli_net_sam_logon: switch_value of %x expected %x\n", (unsigned int)validation_level,
-					(unsigned int)r_s.switch_value));
-		retval = NT_STATUS_INVALID_PARAMETER;
-    }
-
-  out:
-
-	prs_mem_free(&buf);
-	prs_mem_free(&rbuf);
-
-	return retval;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /***************************************************************************
@@ -439,29 +152,8 @@ LSA SAM Logon - interactive or network.
 NTSTATUS cli_net_sam_logon(struct cli_state *cli, NET_ID_INFO_CTR *ctr, 
                          NET_USER_INFO_3 *user_info3)
 {
-	uint16 validation_level=3;
-	NTSTATUS result;
-
-	result = cli_net_sam_logon_internal(cli, ctr, user_info3, 
-                                            validation_level);
-
-	if (NT_STATUS_IS_OK(result)) {
-		DEBUG(10,("cli_net_sam_logon: Success \n"));
-	} else if (NT_STATUS_V(result) == NT_STATUS_V(NT_STATUS_INVALID_INFO_CLASS)) {
-		DEBUG(10,("cli_net_sam_logon: STATUS INVALID INFO CLASS \n"));
-
-		validation_level=2;
-
-		/*
-		 * Since this is the second time we call this function, don't care
-		 * for the error. If its error, return False. 
-		 */
-
-		result = cli_net_sam_logon_internal(cli, ctr, user_info3,
-                                                    validation_level);
-	}
-
-	return result;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /***************************************************************************
@@ -475,67 +167,6 @@ I can be sure). JRA.
 ****************************************************************************/
 BOOL cli_net_sam_logoff(struct cli_state *cli, NET_ID_INFO_CTR *ctr)
 {
-  DOM_CRED new_clnt_cred;
-  DOM_CRED dummy_rtn_creds;
-  prs_struct rbuf;
-  prs_struct buf; 
-  NET_Q_SAM_LOGOFF q_s;
-  BOOL ok = False;
-
-  gen_next_creds( cli, &new_clnt_cred);
-
-  prs_init(&buf , 1024, cli->mem_ctx, MARSHALL);
-  prs_init(&rbuf, 0,    cli->mem_ctx, UNMARSHALL);
-
-  /* create and send a MSRPC command with api NET_SAMLOGOFF */
-
-  DEBUG(4,("cli_net_sam_logoff: srv:%s mc:%s clnt %s %x ll: %d\n",
-            cli->srv_name_slash, global_myname,
-            credstr(new_clnt_cred.challenge.data), new_clnt_cred.timestamp.time,
-            ctr->switch_value));
-
-  memset(&dummy_rtn_creds, '\0', sizeof(dummy_rtn_creds));
-
-  init_sam_info(&q_s.sam_id, unix_to_dos_static(cli->srv_name_slash), 
-		global_myname, &new_clnt_cred, &dummy_rtn_creds, 
-		ctr->switch_value, ctr);
-
-  /* turn parameters into data stream */
-  if(!net_io_q_sam_logoff("", &q_s,  &buf, 0)) {
-    DEBUG(0,("cli_net_sam_logoff: Error : failed to marshall NET_Q_SAM_LOGOFF struct.\n"));
-    prs_mem_free(&buf);
-    prs_mem_free(&rbuf);
-    return False;
-  }
-
-  /* send the data on \PIPE\ */
-  if (rpc_api_pipe_req(cli, NET_SAMLOGOFF, &buf, &rbuf))
-  {
-    NET_R_SAM_LOGOFF r_s;
-
-    ok = net_io_r_sam_logoff("", &r_s, &rbuf, 0);
-		
-    if (ok && !NT_STATUS_IS_OK(r_s.status))
-    {
-      /* report error code */
-      DEBUG(0,("cli_net_sam_logoff: %s\n", get_nt_error_msg(r_s.status)));
-      ok = False;
-    }
-
-    /* Update the credentials. */
-    if (ok && !clnt_deal_with_creds(cli->sess_key, &(cli->clnt_cred), &(r_s.srv_creds)))
-    {
-      /*
-       * Server replied with bad credential. Fail.
-       */
-      DEBUG(0,("cli_net_sam_logoff: server %s replied with bad credential (bad machine \
-password ?).\n", cli->desthost ));
-      ok = False;
-    }
-  }
-
-  prs_mem_free(&buf);
-  prs_mem_free(&rbuf);
-
-  return ok;
+DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
diff -pruwN samba-2.2.12/source/rpc_client/cli_pipe.c samba-2.2.12-livebox/rpc_client/cli_pipe.c
--- samba-2.2.12/source/rpc_client/cli_pipe.c	2004-08-12 20:24:19.000000000 +0200
+++ samba-2.2.12-livebox/rpc_client/cli_pipe.c	2010-03-31 11:45:59.000000000 +0200
@@ -134,28 +134,8 @@ static BOOL rpc_check_hdr(prs_struct *rd
 
 static void NTLMSSPcalc_ap( struct cli_state *cli, unsigned char *data, uint32 len)
 {
-	unsigned char *hash = cli->ntlmssp_hash;
-	unsigned char index_i = hash[256];
-	unsigned char index_j = hash[257];
-	int ind;
-
-	for( ind = 0; ind < len; ind++) {
-		unsigned char tc;
-		unsigned char t;
-
-		index_i++;
-		index_j += hash[index_i];
-
-		tc = hash[index_i];
-		hash[index_i] = hash[index_j];
-		hash[index_j] = tc;
-
-		t = hash[index_i] + hash[index_j];
-		data[ind] = data[ind] ^ hash[t];
-	}
-
-	hash[256] = index_i;
-	hash[257] = index_j;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /****************************************************************************
@@ -176,124 +156,8 @@ static void NTLMSSPcalc_ap( struct cli_s
 
 static BOOL rpc_auth_pipe(struct cli_state *cli, prs_struct *rdata, int len, int auth_len)
 {
-	/*
-	 * The following is that length of the data we must sign or seal.
-	 * This doesn't include the RPC headers or the auth_len or the RPC_HDR_AUTH_LEN
-	 * preceeding the auth_data.
-	 */
-
-	int data_len = len - RPC_HEADER_LEN - RPC_HDR_RESP_LEN - RPC_HDR_AUTH_LEN - auth_len;
-
-	/*
-	 * The start of the data to sign/seal is just after the RPC headers.
-	 */
-	char *reply_data = prs_data_p(rdata) + RPC_HEADER_LEN + RPC_HDR_REQ_LEN;
-
-	BOOL auth_verify = ((cli->ntlmssp_srv_flgs & NTLMSSP_NEGOTIATE_SIGN) != 0);
-	BOOL auth_seal = ((cli->ntlmssp_srv_flgs & NTLMSSP_NEGOTIATE_SEAL) != 0);
-
-	DEBUG(5,("rpc_auth_pipe: len: %d auth_len: %d verify %s seal %s\n",
-	          len, auth_len, BOOLSTR(auth_verify), BOOLSTR(auth_seal)));
-
-	/*
-	 * Unseal any sealed data in the PDU, not including the
-	 * 8 byte auth_header or the auth_data.
-	 */
-
-	if (auth_seal) {
-		DEBUG(10,("rpc_auth_pipe: unseal\n"));
-		dump_data(100, reply_data, data_len);
-		NTLMSSPcalc_ap(cli, (uchar*)reply_data, data_len);
-		dump_data(100, reply_data, data_len);
-	}
-
-	if (auth_verify || auth_seal) {
-		RPC_HDR_AUTH rhdr_auth; 
-		prs_struct auth_req;
-		char data[RPC_HDR_AUTH_LEN];
-		/*
-		 * We set dp to be the end of the packet, minus the auth_len
-		 * and the length of the header that preceeds the auth_data.
-		 */
-		char *dp = prs_data_p(rdata) + len - auth_len - RPC_HDR_AUTH_LEN;
-
-		if(dp - prs_data_p(rdata) > prs_data_size(rdata)) {
-			DEBUG(0,("rpc_auth_pipe: auth data > data size !\n"));
-			return False;
-		}
-
-		memcpy(data, dp, sizeof(data));
-		
-		prs_init(&auth_req , 0, cli->mem_ctx, UNMARSHALL);
-
-		/* The endianness must be preserved... JRA. */
-
-		prs_set_endian_data(&auth_req, rdata->bigendian_data);
-
-		prs_give_memory(&auth_req, data, RPC_HDR_AUTH_LEN, False);
-
-		/*
-		 * Unmarshall the 8 byte auth_header that comes before the
-		 * auth data.
-		 */
-
-		if(!smb_io_rpc_hdr_auth("hdr_auth", &rhdr_auth, &auth_req, 0)) {
-			DEBUG(0,("rpc_auth_pipe: unmarshalling RPC_HDR_AUTH failed.\n"));
-			return False;
-		}
-
-		if (!rpc_hdr_auth_chk(&rhdr_auth)) {
-			DEBUG(0,("rpc_auth_pipe: rpc_hdr_auth_chk failed.\n"));
-			return False;
-		}
-	}
-
-	/*
-	 * Now unseal and check the auth verifier in the auth_data at
-	 * then end of the packet. The 4 bytes skipped in the unseal
-	 * seem to be a buffer pointer preceeding the sealed data.
-	 */
-
-	if (auth_verify) {
-		RPC_AUTH_NTLMSSP_CHK chk;
-		uint32 crc32;
-		prs_struct auth_verf;
-		char data[RPC_AUTH_NTLMSSP_CHK_LEN];
-		char *dp = prs_data_p(rdata) + len - auth_len;
-
-		if(dp - prs_data_p(rdata) > prs_data_size(rdata)) {
-			DEBUG(0,("rpc_auth_pipe: auth data > data size !\n"));
-			return False;
-		}
-
-		DEBUG(10,("rpc_auth_pipe: verify\n"));
-		dump_data(100, dp, auth_len);
-		NTLMSSPcalc_ap(cli, (uchar*)(dp+4), auth_len - 4);
-
-		memcpy(data, dp, RPC_AUTH_NTLMSSP_CHK_LEN);
-		dump_data(100, data, auth_len);
-
-		prs_init(&auth_verf, 0, cli->mem_ctx, UNMARSHALL);
-
-		/* The endinness must be preserved. JRA. */
-		prs_set_endian_data( &auth_verf, rdata->bigendian_data);
-
-		prs_give_memory(&auth_verf, data, RPC_AUTH_NTLMSSP_CHK_LEN, False);
-
-		if(!smb_io_rpc_auth_ntlmssp_chk("auth_sign", &chk, &auth_verf, 0)) {
-			DEBUG(0,("rpc_auth_pipe: unmarshalling RPC_AUTH_NTLMSSP_CHK failed.\n"));
-			return False;
-		}
-
-		crc32 = crc32_calc_buffer(reply_data, data_len);
-
-		if (!rpc_auth_ntlmssp_chk(&chk, crc32 , cli->ntlmssp_seq_num)) {
-			DEBUG(0,("rpc_auth_pipe: rpc_auth_ntlmssp_chk failed.\n"));
-			return False;
-		}
-		cli->ntlmssp_seq_num++;
-	}
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 
@@ -644,84 +508,8 @@ static BOOL create_rpc_bind_resp(struct
 				uint32 rpc_call_id,
 				prs_struct *rpc_out)
 {
-	unsigned char lm_owf[24];
-	unsigned char nt_owf[24];
-	RPC_HDR hdr;
-	RPC_HDR_AUTHA hdr_autha;
-	RPC_AUTH_VERIFIER auth_verifier;
-	RPC_AUTH_NTLMSSP_RESP ntlmssp_resp;
-	char buffer[4096];
-	prs_struct auth_info;
-
-	/*
-	 * Marshall the variable length data into a temporary parse
-	 * struct, pointing into a 4k local buffer.
-	 */
-	prs_init(&auth_info, 0, prs_get_mem_context(rpc_out), MARSHALL);
-
-	/*
-	 * Use the 4k buffer to store the auth info.
-	 */
-
-	prs_give_memory( &auth_info, buffer, sizeof(buffer), False);
-
-	/*
-	 * Create the variable length auth_data.
-	 */
-
- 	init_rpc_auth_verifier(&auth_verifier, "NTLMSSP", NTLMSSP_AUTH);
-
-	pwd_get_lm_nt_owf(pwd, lm_owf, nt_owf);
-			
-	init_rpc_auth_ntlmssp_resp(&ntlmssp_resp,
-			         lm_owf, nt_owf,
-			         domain, user_name, my_name,
-			         ntlmssp_cli_flgs);
-
-	/*
-	 * Marshall the variable length auth_data into a temp parse_struct.
-	 */
-
-	if(!smb_io_rpc_auth_verifier("auth_verifier", &auth_verifier, &auth_info, 0)) {
-		DEBUG(0,("create_rpc_bind_resp: failed to marshall RPC_AUTH_VERIFIER.\n"));
-		return False;
-	}
-
-	if(!smb_io_rpc_auth_ntlmssp_resp("ntlmssp_resp", &ntlmssp_resp, &auth_info, 0)) {
-		DEBUG(0,("create_rpc_bind_resp: failed to marshall RPC_AUTH_NTLMSSP_RESP.\n"));
-		return False;
-	}
-
-	/* Create the request RPC_HDR */
-	init_rpc_hdr(&hdr, RPC_BINDRESP, 0x0, rpc_call_id,
-			RPC_HEADER_LEN + RPC_HDR_AUTHA_LEN + prs_offset(&auth_info),
-			prs_offset(&auth_info) );
-
-	/* Marshall it. */
-	if(!smb_io_rpc_hdr("hdr", &hdr, rpc_out, 0)) {
-		DEBUG(0,("create_rpc_bind_resp: failed to marshall RPC_HDR.\n"));
-		return False;
-	}
-
-	/* Create the request RPC_HDR_AUTHA */
-	init_rpc_hdr_autha(&hdr_autha, MAX_PDU_FRAG_LEN, MAX_PDU_FRAG_LEN,
-			NTLMSSP_AUTH_TYPE, NTLMSSP_AUTH_LEVEL, 0x00);
-
-	if(!smb_io_rpc_hdr_autha("hdr_autha", &hdr_autha, rpc_out, 0)) {
-		DEBUG(0,("create_rpc_bind_resp: failed to marshall RPC_HDR_AUTHA.\n"));
-		return False;
-	}
-
-	/*
-	 * Append the auth data to the outgoing buffer.
-	 */
-
-	if(!prs_append_prs_data(rpc_out, &auth_info)) {
-		DEBUG(0,("create_rpc_bind_req: failed to grow parse struct to add auth.\n"));
-		return False;
-	}
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 
@@ -899,42 +687,8 @@ BOOL rpc_api_pipe_req(struct cli_state *
 
 static BOOL rpc_pipe_set_hnd_state(struct cli_state *cli, const char *pipe_name, uint16 device_state)
 {
-	BOOL state_set = False;
-	char param[2];
-	uint16 setup[2]; /* only need 2 uint16 setup parameters */
-	char *rparam = NULL;
-	char *rdata = NULL;
-	uint32 rparam_len, rdata_len;
-
-	if (pipe_name == NULL)
-		return False;
-
-	DEBUG(5,("Set Handle state Pipe[%x]: %s - device state:%x\n",
-	cli->nt_pipe_fnum, pipe_name, device_state));
-
-	/* create parameters: device state */
-	SSVAL(param, 0, device_state);
-
-	/* create setup parameters. */
-	setup[0] = 0x0001; 
-	setup[1] = cli->nt_pipe_fnum; /* pipe file handle.  got this from an SMBOpenX. */
-
-	/* send the data on \PIPE\ */
-	if (cli_api_pipe(cli, "\\PIPE\\",
-	            setup, 2, 0,                /* setup, length, max */
-	            param, 2, 0,                /* param, length, max */
-	            NULL, 0, 1024,              /* data, length, max */
-	            &rparam, &rparam_len,        /* return param, length */
-	            &rdata, &rdata_len))         /* return data, length */
-	{
-		DEBUG(5, ("Set Handle state: return OK\n"));
-		state_set = True;
-	}
-
-	SAFE_FREE(rparam);
-	SAFE_FREE(rdata);
-
-	return state_set;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /****************************************************************************
@@ -1020,85 +774,8 @@ static BOOL check_bind_response(RPC_HDR_
 
 static BOOL rpc_send_auth_reply(struct cli_state *cli, prs_struct *rdata, uint32 rpc_call_id)
 {
-	RPC_HDR_AUTH rhdr_auth;
-	RPC_AUTH_VERIFIER rhdr_verf;
-	RPC_AUTH_NTLMSSP_CHAL rhdr_chal;
-	char buffer[MAX_PDU_FRAG_LEN];
-	prs_struct rpc_out;
-	ssize_t ret;
-
-	unsigned char p24[24];
-	unsigned char lm_owf[24];
-	unsigned char lm_hash[16];
-
-	if(!smb_io_rpc_hdr_auth("", &rhdr_auth, rdata, 0)) {
-		DEBUG(0,("rpc_send_auth_reply: Failed to unmarshall RPC_HDR_AUTH.\n"));
-		return False;
-	}
-	if(!smb_io_rpc_auth_verifier("", &rhdr_verf, rdata, 0)) {
-		DEBUG(0,("rpc_send_auth_reply: Failed to unmarshall RPC_AUTH_VERIFIER.\n"));
-		return False;
-	}
-	if(!smb_io_rpc_auth_ntlmssp_chal("", &rhdr_chal, rdata, 0)) {
-		DEBUG(0,("rpc_send_auth_reply: Failed to unmarshall RPC_AUTH_NTLMSSP_CHAL.\n"));
-		return False;
-	}
-
-	cli->ntlmssp_cli_flgs = rhdr_chal.neg_flags;
-
-	pwd_make_lm_nt_owf(&cli->pwd, rhdr_chal.challenge);
-
-	prs_init(&rpc_out, 0, cli->mem_ctx, MARSHALL);
-
-	prs_give_memory( &rpc_out, buffer, sizeof(buffer), False);
-
-	create_rpc_bind_resp(&cli->pwd, cli->domain,
-	                     cli->user_name, global_myname, 
-	                     cli->ntlmssp_cli_flgs, rpc_call_id,
-	                     &rpc_out);
-			                    
-	pwd_get_lm_nt_owf(&cli->pwd, lm_owf, NULL);
-	pwd_get_lm_nt_16(&cli->pwd, lm_hash, NULL);
-
-	NTLMSSPOWFencrypt(lm_hash, lm_owf, p24);
-
-	{
-		unsigned char j = 0;
-		int ind;
-		unsigned char k2[8];
-
-		memcpy(k2, p24, 5);
-		k2[5] = 0xe5;
-		k2[6] = 0x38;
-		k2[7] = 0xb0;
-
-		for (ind = 0; ind < 256; ind++)
-			cli->ntlmssp_hash[ind] = (unsigned char)ind;
-
-		for( ind = 0; ind < 256; ind++) {
-			unsigned char tc;
-
-			j += (cli->ntlmssp_hash[ind] + k2[ind%8]);
-
-			tc = cli->ntlmssp_hash[ind];
-			cli->ntlmssp_hash[ind] = cli->ntlmssp_hash[j];
-			cli->ntlmssp_hash[j] = tc;
-		}
-
-		cli->ntlmssp_hash[256] = 0;
-		cli->ntlmssp_hash[257] = 0;
-	}
-
-	memset((char *)lm_hash, '\0', sizeof(lm_hash));
-
-	if ((ret = cli_write(cli, cli->nt_pipe_fnum, 0x8, prs_data_p(&rpc_out), 
-			0, (size_t)prs_offset(&rpc_out))) != (ssize_t)prs_offset(&rpc_out)) {
-		DEBUG(0,("rpc_send_auth_reply: cli_write failed. Return was %d\n", (int)ret));
-		return False;
-	}
-
-	cli->ntlmssp_srv_flgs = rhdr_chal.neg_flags;
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /****************************************************************************
@@ -1182,7 +859,8 @@ BOOL rpc_pipe_bind(struct cli_state *cli
 
 void cli_nt_set_ntlmssp_flgs(struct cli_state *cli, uint32 ntlmssp_flgs)
 {
-	cli->ntlmssp_cli_flgs = ntlmssp_flgs;
+DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 
diff -pruwN samba-2.2.12/source/rpc_client/cli_trust.c samba-2.2.12-livebox/rpc_client/cli_trust.c
--- samba-2.2.12/source/rpc_client/cli_trust.c	2004-08-12 20:24:19.000000000 +0200
+++ samba-2.2.12-livebox/rpc_client/cli_trust.c	2010-03-31 11:45:59.000000000 +0200
@@ -34,133 +34,8 @@ static BOOL modify_trust_password( char
                           unsigned char orig_trust_passwd_hash[16],
                           unsigned char new_trust_passwd_hash[16])
 {
-  struct cli_state cli;
-  NTSTATUS result;
-  DOM_SID domain_sid;
-
-  /*
-   * Ensure we have the domain SID for this domain.
-   */
-
-  if (!secrets_fetch_domain_sid(domain, &domain_sid)) {
-    DEBUG(0, ("domain_client_validate: unable to fetch domain sid.\n"));
-    return False;
-  }
-
-  ZERO_STRUCT(cli);
-  if(cli_initialise(&cli) == NULL) {
-    DEBUG(0,("modify_trust_password: unable to initialize client connection.\n"));
-    return False;
-  }
-
-  if(!resolve_name( remote_machine, &cli.dest_ip, 0x20)) {
-    DEBUG(0,("modify_trust_password: Can't resolve address for %s\n", remote_machine));
-    cli_shutdown(&cli);
-    return False;
-  }
-
-  if (ismyip(cli.dest_ip)) {
-    DEBUG(0,("modify_trust_password: Machine %s is one of our addresses. Cannot add \
-to ourselves.\n", remote_machine));
-    cli_shutdown(&cli);
-    return False;
-  }
-
-  if (!cli_connect(&cli, remote_machine, &cli.dest_ip)) {
-    DEBUG(0,("modify_trust_password: unable to connect to SMB server on \
-machine %s. Error was : %s.\n", remote_machine, cli_errstr(&cli) ));
-    cli_shutdown(&cli);
-    return False;
-  }
-  
-  if (!attempt_netbios_session_request(&cli, global_myname, remote_machine, &cli.dest_ip)) {
-    DEBUG(0,("modify_trust_password: machine %s rejected the NetBIOS session request.\n", 
-      remote_machine ));
-    cli_shutdown(&cli);
-    return False;
-  }
-
-  cli.protocol = PROTOCOL_NT1;
-    
-  if (!cli_negprot(&cli)) {
-    DEBUG(0,("modify_trust_password: machine %s rejected the negotiate protocol. \
-Error was : %s.\n", remote_machine, cli_errstr(&cli) ));
-    cli_shutdown(&cli);
-    return False;
-  }
-
-  if (cli.protocol != PROTOCOL_NT1) {
-    DEBUG(0,("modify_trust_password: machine %s didn't negotiate NT protocol.\n", 
-            remote_machine));
-    cli_shutdown(&cli);
-    return False;
-  }
-    
-  /*
-   * Do an anonymous session setup.
-   */
-    
-  if (!cli_session_setup(&cli, "", "", 0, "", 0, "")) {
-    DEBUG(0,("modify_trust_password: machine %s rejected the session setup. \
-Error was : %s.\n", remote_machine, cli_errstr(&cli) ));
-    cli_shutdown(&cli);
-    return False;
-  }
-    
-  if (!(cli.sec_mode & 1)) {
-    DEBUG(0,("modify_trust_password: machine %s isn't in user level security mode\n",
-          remote_machine));
-    cli_shutdown(&cli);
-    return False;
-  }
-    
-  if (!cli_send_tconX(&cli, "IPC$", "IPC", "", 1)) {
-    DEBUG(0,("modify_trust_password: machine %s rejected the tconX on the IPC$ share. \
-Error was : %s.\n", remote_machine, cli_errstr(&cli) ));
-    cli_shutdown(&cli);
-    return False;
-  }
-
-  /*
-   * Ok - we have an anonymous connection to the IPC$ share.
-   * Now start the NT Domain stuff :-).
-   */
-
-  if(cli_nt_session_open(&cli, PIPE_NETLOGON) == False) {
-    DEBUG(0,("modify_trust_password: unable to open the domain client session to \
-machine %s. Error was : %s.\n", remote_machine, cli_errstr(&cli)));
-    cli_nt_session_close(&cli);
-    cli_ulogoff(&cli);
-    cli_shutdown(&cli);
-    return False;
-  } 
-  
-  result = cli_nt_setup_creds(&cli, orig_trust_passwd_hash);
-
-  if (!NT_STATUS_IS_OK(result)) {
-    DEBUG(0,("modify_trust_password: unable to setup the PDC credentials to machine \
-%s. Error was : %s.\n", remote_machine, get_nt_error_msg(result)));
-    cli_nt_session_close(&cli);
-    cli_ulogoff(&cli);
-    cli_shutdown(&cli);
-    return False;
-  } 
-
-  if( cli_nt_srv_pwset( &cli,new_trust_passwd_hash ) == False) {
-    DEBUG(0,("modify_trust_password: unable to change password for machine %s in domain \
-%s to Domain controller %s. Error was %s.\n", global_myname, domain, remote_machine, 
-                            cli_errstr(&cli)));
-    cli_close(&cli, cli.nt_pipe_fnum);
-    cli_ulogoff(&cli);
-    cli_shutdown(&cli);
-    return False;
-  }
-
-  cli_nt_session_close(&cli);
-  cli_ulogoff(&cli);
-  cli_shutdown(&cli);
-
-  return True;
+DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /************************************************************************
@@ -171,80 +46,6 @@ machine %s. Error was : %s.\n", remote_m
 
 BOOL change_trust_account_password( char *domain, const char *remote_machine_list)
 {
-  fstring remote_machine;
-  unsigned char old_trust_passwd_hash[16];
-  unsigned char new_trust_passwd_hash[16];
-  time_t lct;
-  BOOL res = False;
-
-  if(!secrets_fetch_trust_account_password(domain, old_trust_passwd_hash, &lct)) {
-    DEBUG(0,("change_trust_account_password: unable to read the machine \
-account password for domain %s.\n", domain));
-    return False;
-  }
-
-  /*
-   * Create the new (random) password.
-   */
-  generate_random_buffer( new_trust_passwd_hash, 16, True);
-
-  while(remote_machine_list && 
-	next_token(&remote_machine_list, remote_machine, 
-		   LIST_SEP, sizeof(remote_machine))) {
-    strupper(remote_machine);
-    if(strequal(remote_machine, "*")) {
-
-      /*
-       * We have been asked to dynamcially determine the IP addresses of the PDC.
-       */
-
-      struct in_addr *ip_list = NULL;
-      int count = 0;
-      int i;
-
-      /* Use the PDC *only* for this. */
-      if(!get_dc_list(True, domain, &ip_list, &count))
-        continue;
-
-      /*
-       * Try and connect to the PDC/BDC list in turn as an IP
-       * address used as a string.
-       */
-
-      for(i = 0; i < count; i++) {
-        fstring dc_name;
-        if(!lookup_dc_name(global_myname, domain, &ip_list[i], dc_name))
-          continue;
-        if((res = modify_trust_password( domain, dc_name,
-                                         old_trust_passwd_hash, new_trust_passwd_hash)))
-          break;
-      }
-
-      SAFE_FREE(ip_list);
-
-    } else {
-      res = modify_trust_password( domain, remote_machine,
-                                   old_trust_passwd_hash, new_trust_passwd_hash);
-    }
-
-    if(res) {
-      DEBUG(0,("%s : change_trust_account_password: Changed password for \
-domain %s.\n", timestring(False), domain));
-      /*
-       * Return the result of trying to write the new password
-       * back into the trust account file.
-       */
-      res = secrets_store_trust_account_password(domain, new_trust_passwd_hash);
-      memset(new_trust_passwd_hash, 0, 16);
-      memset(old_trust_passwd_hash, 0, 16);
-      return res;
-    }
-  }
-
-  memset(new_trust_passwd_hash, 0, 16);
-  memset(old_trust_passwd_hash, 0, 16);
-
-  DEBUG(0,("%s : change_trust_account_password: Failed to change password for \
-domain %s.\n", timestring(False), domain));
-  return False;
+DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
diff -pruwN samba-2.2.12/source/rpc_parse/parse_dfs.c samba-2.2.12-livebox/rpc_parse/parse_dfs.c
--- samba-2.2.12/source/rpc_parse/parse_dfs.c	2004-08-12 20:24:27.000000000 +0200
+++ samba-2.2.12-livebox/rpc_parse/parse_dfs.c	2010-03-31 11:45:59.000000000 +0200
@@ -32,7 +32,8 @@ Make a DFS_Q_DFS_QUERY structure
 
 void init_dfs_q_dfs_exist(DFS_Q_DFS_EXIST *q_d)
 {
-	q_d->dummy = 0;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*************************************************************
@@ -41,33 +42,17 @@ void init_dfs_q_dfs_exist(DFS_Q_DFS_EXIS
 
 BOOL dfs_io_q_dfs_exist(const char *desc, DFS_Q_DFS_EXIST *q_d, prs_struct *ps, int depth)
 {
-	if(q_d == NULL)
-		return False;
-  
-	prs_debug(ps, depth, desc, "dfs_io_q_dfs_exist");
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
-  
 /*************************************************************
  Read/write a DFS_R_DFS_EXIST structure
  ************************************************************/
 
 BOOL dfs_io_r_dfs_exist(const char *desc, DFS_R_DFS_EXIST *q_d, prs_struct *ps, int depth)
 {
-	if(q_d == NULL)
-		return False;
-  
-	prs_debug(ps, depth, desc, "dfs_io_r_dfs_exist");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_uint32("exist flag", ps, 0, &q_d->status))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
   
 /******************************************************************* 
@@ -77,12 +62,8 @@ Make a DFS_Q_DFS_REMOVE structure
 BOOL init_dfs_q_dfs_remove(DFS_Q_DFS_REMOVE *q_d, const char *entrypath, 
 			   const char *servername, const char *sharename)
 {
-	DEBUG(5,("init_dfs_q_dfs_remove\n"));
-	init_unistr2(&q_d->DfsEntryPath, entrypath,  strlen(entrypath)+1);
-	init_unistr2(&q_d->ServerName,   servername, strlen(servername)+1);
-	init_unistr2(&q_d->ShareName,    sharename,  strlen(sharename)+1);
-	q_d->ptr_ServerName = q_d->ptr_ShareName = 1;
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /******************************************************************* 
@@ -91,38 +72,8 @@ Read/write a DFS_Q_DFS_REMOVE structure
 
 BOOL dfs_io_q_dfs_remove(const char *desc, DFS_Q_DFS_REMOVE *q_d, prs_struct *ps, int depth)
 {
-	if(q_d == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "dfs_io_q_dfs_remove");
-	depth++;
-  
-	if(!prs_align(ps))
-		return False;
-  
-	if(!smb_io_unistr2("DfsEntryPath",&q_d->DfsEntryPath, 1, ps, depth))
-		return False;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_uint32("ptr_ServerName", ps, depth, &q_d->ptr_ServerName))
-		return False;
-	if(q_d->ptr_ServerName)
-		if (!smb_io_unistr2("ServerName",&q_d->ServerName, q_d->ptr_ServerName, ps, depth))
-			return False;
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_uint32("ptr_ShareName", ps, depth, &q_d->ptr_ShareName))
-		return False;
-	if(q_d->ptr_ShareName)
-		if (!smb_io_unistr2("ShareName",&q_d->ShareName,  q_d->ptr_ShareName, ps, depth))
-			return False;
-	if(!prs_align(ps))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /******************************************************************* 
@@ -131,16 +82,8 @@ Read/write a DFS_R_DFS_REMOVE structure
 
 BOOL dfs_io_r_dfs_remove(const char *desc, DFS_R_DFS_REMOVE *r_d, prs_struct *ps, int depth)
 {
-	if(r_d == NULL)	
-		return False;
-
-	prs_debug(ps, depth, desc, "dfs_io_r_dfs_remove");
-	depth++;
-
-	if(!prs_werror("status", ps, depth, &r_d->status))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /******************************************************************* 
@@ -150,20 +93,8 @@ Make a DFS_Q_DFS_ADD structure
 BOOL init_dfs_q_dfs_add(DFS_Q_DFS_ADD *q_d, const char *entrypath, const char *servername,
 			const char *sharename, const char *comment, uint32 flags)
 {
-	DEBUG(5,("init_dfs_q_dfs_add\n"));
-	q_d->ptr_DfsEntryPath = q_d->ptr_ServerName = q_d->ptr_ShareName = 1;
-	init_unistr2(&q_d->DfsEntryPath, entrypath,  strlen(entrypath)+1);
-	init_unistr2(&q_d->ServerName,   servername, strlen(servername)+1);
-	init_unistr2(&q_d->ShareName,    sharename,  strlen(sharename)+1);
-	if(comment != NULL) {
-		init_unistr2(&q_d->Comment,      comment,    strlen(comment)+1);
-		q_d->ptr_Comment = 1;
-	} else {
-		q_d->ptr_Comment = 0;
-	}
-
-	q_d->Flags = flags;
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /************************************************************
@@ -172,43 +103,8 @@ BOOL init_dfs_q_dfs_add(DFS_Q_DFS_ADD *q
 
 BOOL dfs_io_q_dfs_add(const char *desc, DFS_Q_DFS_ADD *q_d, prs_struct *ps, int depth)
 {
-	if(q_d == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "dfs_io_q_dfs_add");
-	depth++;
-  
-	if(!prs_align(ps))
-		return False;
-  
-	if(!smb_io_unistr2("DfsEntryPath",&q_d->DfsEntryPath, 1, ps, depth))
-		return False;
-	if(!prs_align(ps))
-		return False;
-
-	if(!smb_io_unistr2("ServerName",&q_d->ServerName, 1, ps, depth))
-		return False;
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_uint32("ptr_ShareName", ps, depth, &q_d->ptr_ShareName))
-		return False;
-	if(!smb_io_unistr2("ShareName",&q_d->ShareName,  1, ps, depth))
-		return False;
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_uint32("ptr_Comment", ps, depth, &q_d->ptr_Comment))
-		return False;
-	if(!smb_io_unistr2("",&q_d->Comment, q_d->ptr_Comment , ps, depth))
-		return False;
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_uint32("Flags", ps, depth, &q_d->Flags))
-		return True;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /************************************************************
@@ -217,29 +113,16 @@ BOOL dfs_io_q_dfs_add(const char *desc,
 
 BOOL dfs_io_r_dfs_add(const char *desc, DFS_R_DFS_ADD *r_d, prs_struct *ps, int depth)
 {
-	if(r_d == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "dfs_io_r_dfs_add");
-	depth++;
-
-	if(!prs_werror("status", ps, depth, &r_d->status))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 BOOL init_dfs_q_dfs_get_info(DFS_Q_DFS_GET_INFO *q_d, const char *entrypath,
 			     const char *servername, const char *sharename, 
 			     uint32 info_level)
 {
-	DEBUG(5,("init_dfs_q2_get_info\n"));
-	init_unistr2(&q_d->uni_path, entrypath,  strlen(entrypath)+1);
-	init_unistr2(&q_d->uni_server,   servername, strlen(servername)+1);
-	init_unistr2(&q_d->uni_share,    sharename,  strlen(sharename)+1);
-	q_d->level = info_level;
-	q_d->ptr_server = q_d->ptr_share = 1;
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /************************************************************
@@ -248,38 +131,8 @@ BOOL init_dfs_q_dfs_get_info(DFS_Q_DFS_G
 
 BOOL dfs_io_q_dfs_get_info(const char* desc, DFS_Q_DFS_GET_INFO* q_i, prs_struct* ps, int depth)
 {
-	if(q_i == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "dfs_io_q_dfs_get_info");
-	depth++;
-
-	if(!smb_io_unistr2("",&q_i->uni_path, 1, ps, depth))
-		return False;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_uint32("ptr_server", ps, depth, &q_i->ptr_server))
-		return False;
-
-	if(q_i->ptr_server)
-		if (!smb_io_unistr2("",&q_i->uni_server, q_i->ptr_server, ps, depth))
-			return False;
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_uint32("ptr_share", ps, depth, &q_i->ptr_share))
-		return False;
-	if(q_i->ptr_share)
-		if(!smb_io_unistr2("", &q_i->uni_share, q_i->ptr_share, ps, depth))
-			return False;
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_uint32("level", ps, depth, &q_i->level))
-		return False;
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /************************************************************
@@ -288,19 +141,8 @@ BOOL dfs_io_q_dfs_get_info(const char* d
 
 BOOL dfs_io_r_dfs_get_info(const char* desc, DFS_R_DFS_GET_INFO* r_i, prs_struct* ps, int depth)
 {
-	if(r_i == NULL)
-		return False;
-  
-	if(!prs_uint32("level", ps, depth, &r_i->level))
-		return False;
-	if(!prs_uint32("ptr_ctr", ps, depth, &r_i->ptr_ctr))
-		return False;
-
-	if(!dfs_io_dfs_info_ctr("", &r_i->ctr, 1, r_i->level, ps, depth))
-		return False;
-	if(!prs_werror("status", ps, depth, &r_i->status))
-		return False;
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 			   
 /************************************************************
@@ -308,17 +150,8 @@ BOOL dfs_io_r_dfs_get_info(const char* d
  ************************************************************/
 BOOL init_dfs_q_dfs_enum(DFS_Q_DFS_ENUM *q_d, uint32 level, DFS_INFO_CTR *ctr)
 {
-	q_d->level = level;
-	q_d->maxpreflen = -1;
-	q_d->ptr_buffer = 1;
-	q_d->level2 = level;
-  
-	q_d->ptr_num_entries = 1;
-	q_d->num_entries = 0;
-	q_d->num_entries2 = 0;
-	q_d->reshnd.ptr_hnd = 1;
-	q_d->reshnd.handle = 0;
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
   
 /************************************************************
@@ -327,35 +160,8 @@ BOOL init_dfs_q_dfs_enum(DFS_Q_DFS_ENUM
 
 BOOL dfs_io_q_dfs_enum(const char *desc, DFS_Q_DFS_ENUM *q_d, prs_struct *ps, int depth)
 {
-	if(q_d == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "dfs_io_q_dfs_enum");
-	depth++;
-  
-	if(!prs_align(ps))
-		return False;
-  
-	if(!prs_uint32("level", ps, depth, &q_d->level))
-		return False;
-	if(!prs_uint32("maxpreflen", ps, depth, &q_d->maxpreflen))
-		return False;
-	if(!prs_uint32("ptr_buffer", ps, depth, &q_d->ptr_buffer))
-		return False;
-	if(!prs_uint32("level2", ps, depth, &q_d->level2))
-		return False;
-	if(!prs_uint32("level3", ps, depth, &q_d->level2))
-		return False;
-  
-	if(!prs_uint32("ptr_num_entries", ps, depth, &q_d->ptr_num_entries))
-		return False;
-	if(!prs_uint32("num_entries", ps, depth, &q_d->num_entries))
-		return False;
-	if(!prs_uint32("num_entries2", ps, depth, &q_d->num_entries2))
-		return False;
-	if(!smb_io_enum_hnd("resume_hnd",&q_d->reshnd, ps, depth))
-		return False;
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /************************************************************
@@ -364,98 +170,8 @@ BOOL dfs_io_q_dfs_enum(const char *desc,
 
 BOOL dfs_io_dfs_info_ctr(const char *desc, DFS_INFO_CTR* ctr, uint32 num_entries, uint32 level, prs_struct* ps, int depth)
 {
-	int i=0;
-
-	switch(level) {
-	case 1:
-		depth++;
-		/* should depend on whether marshalling or unmarshalling! */
-		if(UNMARSHALLING(ps)) {
-			ctr->dfs.info1 = (DFS_INFO_1 *)prs_alloc_mem(ps, sizeof(DFS_INFO_1)*num_entries);
-			if (!ctr->dfs.info1)
-				return False;
-		}
-
-		for(i=0;i<num_entries;i++) {
-			if(!prs_uint32("ptr_entrypath",ps, depth, &ctr->dfs.info1[i].ptr_entrypath))
-				return False;
-		}
-		for(i=0;i<num_entries;i++) {
-			if(!smb_io_unistr2("", &ctr->dfs.info1[i].entrypath, ctr->dfs.info1[i].ptr_entrypath, ps, depth))
-				return False;
-			if(!prs_align(ps))
-				return False;
-		}
-		depth--;
-		break;
-	case 2:
-		depth++;
-		if(UNMARSHALLING(ps)) {
-			ctr->dfs.info2 = (DFS_INFO_2 *)prs_alloc_mem(ps, num_entries*sizeof(DFS_INFO_2));
-			if (!ctr->dfs.info2)
-				return False;
-		}
-
-		for(i=0;i<num_entries;i++) {
-			if(!prs_uint32("ptr_entrypath", ps, depth, &ctr->dfs.info2[i].ptr_entrypath))
-				return False;
-			if(!prs_uint32("ptr_comment", ps, depth, &ctr->dfs.info2[i].ptr_comment))
-				return False;
-			if(!prs_uint32("state", ps, depth, &ctr->dfs.info2[i].state))
-				return False;
-			if(!prs_uint32("num_storages", ps, depth, &ctr->dfs.info2[i].num_storages))
-				return False;
-		}
-		for(i=0;i<num_entries;i++) {
-			if(!smb_io_unistr2("", &ctr->dfs.info2[i].entrypath, ctr->dfs.info2[i].ptr_entrypath, ps, depth))
-				return False;
-			if(!prs_align(ps))
-				return False;
-			if(!smb_io_unistr2("",&ctr->dfs.info2[i].comment, ctr->dfs.info2[i].ptr_comment, ps, depth))
-				return False;
-			if(!prs_align(ps))
-				return False;
-		}
-		depth--;
-		break;
-	case 3:
-		depth++;
-		if(UNMARSHALLING(ps)) {
-			ctr->dfs.info3 = (DFS_INFO_3 *)prs_alloc_mem(ps, num_entries*sizeof(DFS_INFO_3));
-			if (!ctr->dfs.info3)
-				return False;
-		}
-
-		for(i=0;i<num_entries;i++) {
-			if(!prs_uint32("ptr_entrypath", ps, depth, &ctr->dfs.info3[i].ptr_entrypath))
-				return False;
-			if(!prs_uint32("ptr_comment", ps, depth, &ctr->dfs.info3[i].ptr_comment))
-				return False;
-			if(!prs_uint32("state", ps, depth, &ctr->dfs.info3[i].state))
-				return False;
-			if(!prs_uint32("num_storages", ps, depth, &ctr->dfs.info3[i].num_storages))
-				return False;
-			if(!prs_uint32("ptr_storages", ps, depth, &ctr->dfs.info3[i].ptr_storages))
-				return False;
-		}
-		for(i=0;i<num_entries;i++) {
-			if(!smb_io_unistr2("", &ctr->dfs.info3[i].entrypath, ctr->dfs.info3[i].ptr_entrypath, ps, depth))
-				return False;
-			if(!prs_align(ps))
-				return False;
-			if(!smb_io_unistr2("", &ctr->dfs.info3[i].comment, ctr->dfs.info3[i].ptr_comment, ps, depth))
-				return False;
-			if(!prs_align(ps))
-				return False;
-			if(!prs_uint32("num_storage_infos", ps, depth, &ctr->dfs.info3[i].num_storage_infos))
-				return False;
-
-			if(!dfs_io_dfs_storage_info("storage_info", &ctr->dfs.info3[i], ps, depth))
-				return False;
-		}
-	}
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /************************************************************
@@ -464,44 +180,8 @@ BOOL dfs_io_dfs_info_ctr(const char *des
 
 BOOL dfs_io_r_dfs_enum(const char *desc, DFS_R_DFS_ENUM *q_d, prs_struct *ps, int depth)
 {
-	DFS_INFO_CTR *ctr;
-	if(q_d == NULL)
-		return False;
-	ctr = q_d->ctr;
-	if(ctr == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "dfs_io_r_dfs_enum");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_uint32("ptr_buffer", ps, depth, &q_d->ptr_buffer))
-		return False;
-	if(!prs_uint32("level", ps, depth, &q_d->level))
-		return False;
-	if(!prs_uint32("level2", ps, depth, &ctr->switch_value))
-		return False;
-	if(!prs_uint32("ptr_num_entries", ps, depth, &q_d->ptr_num_entries))
-		return False;
-	if(q_d->ptr_num_entries)
-		if(!prs_uint32("num_entries", ps, depth, &q_d->num_entries))
-			return False;
-	if(!prs_uint32("ptr_num_entries2", ps, depth, &q_d->ptr_num_entries2))
-		return False;
-	if(q_d->ptr_num_entries2)
-		if(!prs_uint32("num_entries2", ps, depth, &ctr->num_entries))
-			return False;
-
-	if(!dfs_io_dfs_info_ctr("", ctr, q_d->num_entries, q_d->level, ps, depth))
-		return False;
-
-	if(!smb_io_enum_hnd("resume_hnd", &q_d->reshnd, ps, depth))
-		return False;
-	if(!prs_werror("status", ps, depth, &q_d->status))
-		return False;
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 BOOL dfs_io_dfs_storage_info(const char *desc, DFS_INFO_3* info3, prs_struct *ps, int depth)
diff -pruwN samba-2.2.12/source/rpc_parse/parse_lsa.c samba-2.2.12-livebox/rpc_parse/parse_lsa.c
--- samba-2.2.12/source/rpc_parse/parse_lsa.c	2004-08-12 20:24:27.000000000 +0200
+++ samba-2.2.12-livebox/rpc_parse/parse_lsa.c	2010-03-31 11:45:59.000000000 +0200
@@ -31,15 +31,8 @@ static BOOL lsa_io_trans_names(const cha
 void init_lsa_trans_name(LSA_TRANS_NAME *trn, UNISTR2 *uni_name,
 			 uint16 sid_name_use, const char *name, uint32 idx)
 {
-	int len_name = strlen(name);
-
-	if(len_name == 0)
-		len_name = 1;
-
-	trn->sid_name_use = sid_name_use;
-	init_uni_hdr(&trn->hdr_name, len_name);
-	init_unistr2(uni_name, name, len_name);
-	trn->domain_idx = idx;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -49,23 +42,8 @@ void init_lsa_trans_name(LSA_TRANS_NAME
 static BOOL lsa_io_trans_name(const char *desc, LSA_TRANS_NAME *trn, prs_struct *ps, 
 			      int depth)
 {
-	prs_debug(ps, depth, desc, "lsa_io_trans_name");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-	
-	if(!prs_uint16("sid_name_use", ps, depth, &trn->sid_name_use))
-		return False;
-	if(!prs_align(ps))
-		return False;
-	
-	if(!smb_io_unihdr ("hdr_name", &trn->hdr_name, ps, depth))
-		return False;
-	if(!prs_uint32("domain_idx  ", ps, depth, &trn->domain_idx))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -75,62 +53,8 @@ static BOOL lsa_io_trans_name(const char
 static BOOL lsa_io_dom_r_ref(const char *desc, DOM_R_REF *r_r, prs_struct *ps, 
 			     int depth)
 {
-	int i;
-
-	prs_debug(ps, depth, desc, "lsa_io_dom_r_ref");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-	
-	if(!prs_uint32("num_ref_doms_1", ps, depth, &r_r->num_ref_doms_1)) /* num referenced domains? */
-		return False;
-	if(!prs_uint32("ptr_ref_dom   ", ps, depth, &r_r->ptr_ref_dom)) /* undocumented buffer pointer. */
-		return False;
-	if(!prs_uint32("max_entries   ", ps, depth, &r_r->max_entries)) /* 32 - max number of entries */
-		return False;
-
-	SMB_ASSERT_ARRAY(r_r->hdr_ref_dom, r_r->num_ref_doms_1);
-
-	if (r_r->ptr_ref_dom != 0) {
-
-		if(!prs_uint32("num_ref_doms_2", ps, depth, &r_r->num_ref_doms_2)) /* 4 - num referenced domains? */
-			return False;
-
-		SMB_ASSERT_ARRAY(r_r->ref_dom, r_r->num_ref_doms_2);
-
-		for (i = 0; i < r_r->num_ref_doms_1; i++) {
-			fstring t;
-
-			slprintf(t, sizeof(t) - 1, "dom_ref[%d] ", i);
-			if(!smb_io_unihdr(t, &r_r->hdr_ref_dom[i].hdr_dom_name, ps, depth))
-				return False;
-
-			slprintf(t, sizeof(t) - 1, "sid_ptr[%d] ", i);
-			if(!prs_uint32(t, ps, depth, &r_r->hdr_ref_dom[i].ptr_dom_sid))
-				return False;
-		}
-
-		for (i = 0; i < r_r->num_ref_doms_2; i++) {
-			fstring t;
-
-			if (r_r->hdr_ref_dom[i].hdr_dom_name.buffer != 0) {
-				slprintf(t, sizeof(t) - 1, "dom_ref[%d] ", i);
-				if(!smb_io_unistr2(t, &r_r->ref_dom[i].uni_dom_name, True, ps, depth)) /* domain name unicode string */
-					return False;
-				if(!prs_align(ps))
-					return False;
-			}
-
-			if (r_r->hdr_ref_dom[i].ptr_dom_sid != 0) {
-				slprintf(t, sizeof(t) - 1, "sid_ptr[%d] ", i);
-				if(!smb_io_dom_sid2(t, &r_r->ref_dom[i].ref_dom, ps, depth)) /* referenced domain SIDs */
-					return False;
-			}
-		}
-	}
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -139,12 +63,8 @@ static BOOL lsa_io_dom_r_ref(const char
 
 void init_lsa_sec_qos(LSA_SEC_QOS *qos, uint16 imp_lev, uint8 ctxt, uint8 eff)
 {
-	DEBUG(5, ("init_lsa_sec_qos\n"));
-
-	qos->len = 0x0c; /* length of quality of service block, in bytes */
-	qos->sec_imp_level = imp_lev;
-	qos->sec_ctxt_mode = ctxt;
-	qos->effective_only = eff;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -154,34 +74,8 @@ void init_lsa_sec_qos(LSA_SEC_QOS *qos,
 static BOOL lsa_io_sec_qos(const char *desc,  LSA_SEC_QOS *qos, prs_struct *ps, 
 			   int depth)
 {
-	uint32 start;
-
-	prs_debug(ps, depth, desc, "lsa_io_obj_qos");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-	
-	start = prs_offset(ps);
-
-	/* these pointers had _better_ be zero, because we don't know
-	   what they point to!
-	 */
-	if(!prs_uint32("len           ", ps, depth, &qos->len)) /* 0x18 - length (in bytes) inc. the length field. */
-		return False;
-	if(!prs_uint16("sec_imp_level ", ps, depth, &qos->sec_imp_level ))
-		return False;
-	if(!prs_uint8 ("sec_ctxt_mode ", ps, depth, &qos->sec_ctxt_mode ))
-		return False;
-	if(!prs_uint8 ("effective_only", ps, depth, &qos->effective_only))
-		return False;
-
-	if (qos->len != prs_offset(ps) - start) {
-		DEBUG(3,("lsa_io_sec_qos: length %x does not match size %x\n",
-		         qos->len, prs_offset(ps) - start));
-	}
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -190,21 +84,8 @@ static BOOL lsa_io_sec_qos(const char *d
 
 void init_lsa_obj_attr(LSA_OBJ_ATTR *attr, uint32 attributes, LSA_SEC_QOS *qos)
 {
-	DEBUG(5, ("init_lsa_obj_attr\n"));
-
-	attr->len = 0x18; /* length of object attribute block, in bytes */
-	attr->ptr_root_dir = 0;
-	attr->ptr_obj_name = 0;
-	attr->attributes = attributes;
-	attr->ptr_sec_desc = 0;
-	
-	if (qos != NULL) {
-		attr->ptr_sec_qos = 1;
-		attr->sec_qos = qos;
-	} else {
-		attr->ptr_sec_qos = 0;
-		attr->sec_qos = NULL;
-	}
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -214,51 +95,8 @@ void init_lsa_obj_attr(LSA_OBJ_ATTR *att
 static BOOL lsa_io_obj_attr(const char *desc, LSA_OBJ_ATTR *attr, prs_struct *ps, 
 			    int depth)
 {
-	uint32 start;
-
-	prs_debug(ps, depth, desc, "lsa_io_obj_attr");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-	
-	start = prs_offset(ps);
-
-	/* these pointers had _better_ be zero, because we don't know
-	   what they point to!
-	 */
-	if(!prs_uint32("len         ", ps, depth, &attr->len)) /* 0x18 - length (in bytes) inc. the length field. */
-		return False;
-	if(!prs_uint32("ptr_root_dir", ps, depth, &attr->ptr_root_dir)) /* 0 - root directory (pointer) */
-		return False;
-	if(!prs_uint32("ptr_obj_name", ps, depth, &attr->ptr_obj_name)) /* 0 - object name (pointer) */
-		return False;
-	if(!prs_uint32("attributes  ", ps, depth, &attr->attributes)) /* 0 - attributes (undocumented) */
-		return False;
-	if(!prs_uint32("ptr_sec_desc", ps, depth, &attr->ptr_sec_desc)) /* 0 - security descriptior (pointer) */
-		return False;
-	if(!prs_uint32("ptr_sec_qos ", ps, depth, &attr->ptr_sec_qos )) /* security quality of service (pointer) */
-		return False;
-
-	/* code commented out as it's not necessary true (tested with hyena). JFM, 11/22/2001 */
-#if 0
-	if (attr->len != prs_offset(ps) - start) {
-		DEBUG(3,("lsa_io_obj_attr: length %x does not match size %x\n",
-		         attr->len, prs_offset(ps) - start));
-		return False;
-	}
-#endif
-
-	if (attr->ptr_sec_qos != 0) {
-		if (UNMARSHALLING(ps))
-			if (!(attr->sec_qos = (LSA_SEC_QOS *)prs_alloc_mem(ps,sizeof(LSA_SEC_QOS))))
-				return False;
-
-		if(!lsa_io_sec_qos("sec_qos", attr->sec_qos, ps, depth))
-			return False;
-	}
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 
@@ -270,15 +108,8 @@ void init_q_open_pol(LSA_Q_OPEN_POL *r_q
 		     uint32 attributes, uint32 desired_access,
 		     LSA_SEC_QOS *qos)
 {
-	DEBUG(5, ("init_open_pol: attr:%d da:%d\n", attributes, 
-		  desired_access));
-
-	r_q->ptr = 1; /* undocumented pointer */
-
-	r_q->des_access = desired_access;
-
-	r_q->system_name = system_name;
-	init_lsa_obj_attr(&r_q->attr, attributes, qos);
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -288,23 +119,8 @@ void init_q_open_pol(LSA_Q_OPEN_POL *r_q
 BOOL lsa_io_q_open_pol(const char *desc, LSA_Q_OPEN_POL *r_q, prs_struct *ps, 
 		       int depth)
 {
-	prs_debug(ps, depth, desc, "lsa_io_q_open_pol");
-	depth++;
-
-	if(!prs_uint32("ptr       ", ps, depth, &r_q->ptr))
-		return False;
-	if(!prs_uint16("system_name", ps, depth, &r_q->system_name))
-		return False;
-	if(!prs_align( ps ))
-		return False;
-
-	if(!lsa_io_obj_attr("", &r_q->attr, ps, depth))
-		return False;
-
-	if(!prs_uint32("des_access", ps, depth, &r_q->des_access))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -314,16 +130,8 @@ BOOL lsa_io_q_open_pol(const char *desc,
 BOOL lsa_io_r_open_pol(const char *desc, LSA_R_OPEN_POL *r_p, prs_struct *ps, 
 		       int depth)
 {
-	prs_debug(ps, depth, desc, "lsa_io_r_open_pol");
-	depth++;
-
-	if(!smb_io_pol_hnd("", &r_p->pol, ps, depth))
-		return False;
-
-	if(!prs_ntstatus("status", ps, depth, &r_p->status))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -334,17 +142,8 @@ void init_q_open_pol2(LSA_Q_OPEN_POL2 *r
 			uint32 attributes, uint32 desired_access,
 			LSA_SEC_QOS *qos)
 {
-	DEBUG(5, ("init_q_open_pol2: attr:%d da:%d\n", attributes, 
-		  desired_access));
-
-	r_q->ptr = 1; /* undocumented pointer */
-
-	r_q->des_access = desired_access;
-
-	init_unistr2(&r_q->uni_server_name, server_name, 
-		     strlen(server_name) + 1);
-
-	init_lsa_obj_attr(&r_q->attr, attributes, qos);
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -354,21 +153,8 @@ void init_q_open_pol2(LSA_Q_OPEN_POL2 *r
 BOOL lsa_io_q_open_pol2(const char *desc, LSA_Q_OPEN_POL2 *r_q, prs_struct *ps, 
 			int depth)
 {
-	prs_debug(ps, depth, desc, "lsa_io_q_open_pol2");
-	depth++;
-
-	if(!prs_uint32("ptr       ", ps, depth, &r_q->ptr))
-		return False;
-
-	if(!smb_io_unistr2 ("", &r_q->uni_server_name, r_q->ptr, ps, depth))
-		return False;
-	if(!lsa_io_obj_attr("", &r_q->attr, ps, depth))
-		return False;
-
-	if(!prs_uint32("des_access", ps, depth, &r_q->des_access))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -378,16 +164,8 @@ BOOL lsa_io_q_open_pol2(const char *desc
 BOOL lsa_io_r_open_pol2(const char *desc, LSA_R_OPEN_POL2 *r_p, prs_struct *ps, 
 			int depth)
 {
-	prs_debug(ps, depth, desc, "lsa_io_r_open_pol2");
-	depth++;
-
-	if(!smb_io_pol_hnd("", &r_p->pol, ps, depth))
-		return False;
-
-	if(!prs_ntstatus("status", ps, depth, &r_p->status))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -397,12 +175,8 @@ makes an LSA_Q_QUERY_SEC_OBJ structure.
 void init_q_query_sec_obj(LSA_Q_QUERY_SEC_OBJ *q_q, const POLICY_HND *hnd, 
 			  uint32 sec_info)
 {
-	DEBUG(5, ("init_q_query_sec_obj\n"));
-
-	q_q->pol = *hnd;
-	q_q->sec_info = sec_info;
-
-	return;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -412,16 +186,8 @@ void init_q_query_sec_obj(LSA_Q_QUERY_SE
 BOOL lsa_io_q_query_sec_obj(const char *desc, LSA_Q_QUERY_SEC_OBJ *q_q, 
 			    prs_struct *ps, int depth)
 {
-	prs_debug(ps, depth, desc, "lsa_io_q_query_sec_obj");
-	depth++;
-
-	if (!smb_io_pol_hnd("", &q_q->pol, ps, depth))
-		return False;
-
-	if (!prs_uint32("sec_info", ps, depth, &q_q->sec_info))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 } 
 
 /*******************************************************************
@@ -431,24 +197,8 @@ BOOL lsa_io_q_query_sec_obj(const char *
 BOOL lsa_io_r_query_sec_obj(const char *desc, LSA_R_QUERY_SEC_OBJ *r_u, 
 			    prs_struct *ps, int depth)
 {
-	prs_debug(ps, depth, desc, "lsa_io_r_query_sec_obj");
-	depth++;
-
-	if (!prs_align(ps))
-		return False;
-
-	if (!prs_uint32("ptr", ps, depth, &r_u->ptr))
-		return False;
-
-	if (r_u->ptr != 0) {
-		if (!sec_io_desc_buf("sec", &r_u->buf, ps, depth))
-			return False;
-	}
-
-	if (!prs_ntstatus("status", ps, depth, &r_u->status))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -457,11 +207,8 @@ BOOL lsa_io_r_query_sec_obj(const char *
 
 void init_q_query(LSA_Q_QUERY_INFO *q_q, POLICY_HND *hnd, uint16 info_class)
 {
-	DEBUG(5, ("init_q_query\n"));
-
-	memcpy(&q_q->pol, hnd, sizeof(q_q->pol));
-
-	q_q->info_class = info_class;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -471,16 +218,8 @@ void init_q_query(LSA_Q_QUERY_INFO *q_q,
 BOOL lsa_io_q_query(const char *desc, LSA_Q_QUERY_INFO *q_q, prs_struct *ps, 
 		    int depth)
 {
-	prs_debug(ps, depth, desc, "lsa_io_q_query");
-	depth++;
-
-	if(!smb_io_pol_hnd("", &q_q->pol, ps, depth))
-		return False;
-
-	if(!prs_uint16("info_class", ps, depth, &q_q->info_class))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -489,13 +228,8 @@ makes an LSA_Q_ENUM_TRUST_DOM structure.
 BOOL init_q_enum_trust_dom(LSA_Q_ENUM_TRUST_DOM * q_e, POLICY_HND *pol,
 			   uint32 enum_context, uint32 preferred_len)
 {
-	DEBUG(5, ("init_q_enum_trust_dom\n"));
-
-	q_e->pol = *pol;
-	q_e->enum_context = enum_context;
-	q_e->preferred_len = preferred_len;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -505,18 +239,8 @@ BOOL init_q_enum_trust_dom(LSA_Q_ENUM_TR
 BOOL lsa_io_q_enum_trust_dom(const char *desc, LSA_Q_ENUM_TRUST_DOM *q_e, 
 			     prs_struct *ps, int depth)
 {
-	prs_debug(ps, depth, desc, "lsa_io_q_enum_trust_dom");
-	depth++;
-
-	if(!smb_io_pol_hnd("", &q_e->pol, ps, depth))
-		return False;
-
-	if(!prs_uint32("enum_context ", ps, depth, &q_e->enum_context))
-		return False;
-	if(!prs_uint32("preferred_len", ps, depth, &q_e->preferred_len))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -527,36 +251,8 @@ void init_r_enum_trust_dom(TALLOC_CTX *c
 			   const char *domain_name, DOM_SID *domain_sid,
                            NTSTATUS status)
 {
-        DEBUG(5, ("init_r_enum_trust_dom\n"));
-	
-        r_e->enum_context = enum_context;
-	
-        if (NT_STATUS_IS_OK(status)) {
-                int len_domain_name = strlen(domain_name) + 1;
-		
-                r_e->num_domains  = 1;
-                r_e->ptr_enum_domains = 1;
-                r_e->num_domains2 = 1;
-		
-		if (!(r_e->hdr_domain_name = (UNIHDR2 *)talloc(ctx,sizeof(UNIHDR2))))
-			return;
-
-		if (!(r_e->uni_domain_name = (UNISTR2 *)talloc(ctx,sizeof(UNISTR2))))
-			return;
-
-		if (!(r_e->domain_sid = (DOM_SID2 *)talloc(ctx,sizeof(DOM_SID2))))
-			return;
-
-		init_uni_hdr2(&r_e->hdr_domain_name[0], len_domain_name);
-		init_unistr2 (&r_e->uni_domain_name[0], domain_name, 
-			      len_domain_name);
-		init_dom_sid2(&r_e->domain_sid[0], domain_sid);
-        } else {
-                r_e->num_domains = 0;
-                r_e->ptr_enum_domains = 0;
-        }
-	
-        r_e->status = status;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -566,56 +262,8 @@ void init_r_enum_trust_dom(TALLOC_CTX *c
 BOOL lsa_io_r_enum_trust_dom(const char *desc, LSA_R_ENUM_TRUST_DOM *r_e, 
 			     prs_struct *ps, int depth)
 {
-	prs_debug(ps, depth, desc, "lsa_io_r_enum_trust_dom");
-	depth++;
-
-	if(!prs_uint32("enum_context    ", ps, depth, &r_e->enum_context))
-		return False;
-	if(!prs_uint32("num_domains     ", ps, depth, &r_e->num_domains))
-		return False;
-	if(!prs_uint32("ptr_enum_domains", ps, depth, &r_e->ptr_enum_domains))
-		return False;
-
-	if (r_e->ptr_enum_domains) {
-		int i, num_domains;
-
-		if(!prs_uint32("num_domains2", ps, depth, &r_e->num_domains2))
-			return False;
-
-		num_domains = r_e->num_domains2;
-
-		if (UNMARSHALLING(ps)) {
-			if (!(r_e->hdr_domain_name = (UNIHDR2 *)prs_alloc_mem(ps,sizeof(UNIHDR2) * num_domains)))
-				return False;
-
-			if (!(r_e->uni_domain_name = (UNISTR2 *)prs_alloc_mem(ps,sizeof(UNISTR2) * num_domains)))
-				return False;
-
-			if (!(r_e->domain_sid = (DOM_SID2 *)prs_alloc_mem(ps,sizeof(DOM_SID2) * num_domains)))
-				return False;
-		}
-
-		for (i = 0; i < num_domains; i++) {
-			if(!smb_io_unihdr2 ("", &r_e->hdr_domain_name[i], ps, 
-					    depth))
-				return False;
-		}
-		
-		for (i = 0; i < num_domains; i++) {
-			if(!smb_io_unistr2 ("", &r_e->uni_domain_name[i],
-					    r_e->hdr_domain_name[i].buffer, 
-					    ps, depth))
-				return False;
-			if(!smb_io_dom_sid2("", &r_e->domain_sid[i], ps, 
-					    depth))
-				return False;
-		}
-	}
-
-	if(!prs_ntstatus("status", ps, depth, &r_e->status))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -624,39 +272,8 @@ reads or writes a dom query structure.
 
 static BOOL lsa_io_dom_query(const char *desc, DOM_QUERY *d_q, prs_struct *ps, int depth)
 {
-	if (d_q == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "lsa_io_dom_query");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_uint16("uni_dom_max_len", ps, depth, &d_q->uni_dom_max_len)) /* domain name string length * 2 */
-		return False;
-	if(!prs_uint16("uni_dom_str_len", ps, depth, &d_q->uni_dom_str_len)) /* domain name string length * 2 */
-		return False;
-
-	if(!prs_uint32("buffer_dom_name", ps, depth, &d_q->buffer_dom_name)) /* undocumented domain name string buffer pointer */
-		return False;
-	if(!prs_uint32("buffer_dom_sid ", ps, depth, &d_q->buffer_dom_sid)) /* undocumented domain SID string buffer pointer */
-		return False;
-
-	if(!smb_io_unistr2("unistr2", &d_q->uni_domain_name, d_q->buffer_dom_name, ps, depth)) /* domain name (unicode string) */
-		return False;
-
-	if(!prs_align(ps))
-		return False;
-
-	if (d_q->buffer_dom_sid != 0) {
-		if(!smb_io_dom_sid2("", &d_q->dom_sid, ps, depth)) /* domain SID */
-			return False;
-	} else {
-		memset((char *)&d_q->dom_sid, '\0', sizeof(d_q->dom_sid));
-	}
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -665,39 +282,8 @@ reads or writes a structure.
 
 static BOOL lsa_io_dom_query_2(const char *desc, DOM_QUERY_2 *d_q, prs_struct *ps, int depth)
 {
-	uint32 ptr = 1;
-
-	if (d_q == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "lsa_io_dom_query_2");
-	depth++;
-
-	if (!prs_align(ps))
-		return False;
-
-	if (!prs_uint32("auditing_enabled", ps, depth, &d_q->auditing_enabled))
-		return False;
-	if (!prs_uint32("ptr   ", ps, depth, &ptr))
-		return False;
-	if (!prs_uint32("count1", ps, depth, &d_q->count1))
-		return False;
-	if (!prs_uint32("count2", ps, depth, &d_q->count2))
-		return False;
-
-	if (UNMARSHALLING(ps)) {
-		d_q->auditsettings = (uint32 *)talloc_zero(ps->mem_ctx, d_q->count2 * sizeof(uint32));
-	}
-
-	if (d_q->auditsettings == NULL) {
-		DEBUG(1, ("lsa_io_dom_query_2: NULL auditsettings!\n"));
-		return False;
-	}
-
-	if (!prs_uint32s(False, "auditsettings", ps, depth, d_q->auditsettings, d_q->count2))
-		return False;
-
-    return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -706,7 +292,8 @@ static BOOL lsa_io_dom_query_2(const cha
 
 static BOOL lsa_io_dom_query_3(const char *desc, DOM_QUERY_3 *d_q, prs_struct *ps, int depth)
 {
-	return lsa_io_dom_query("", d_q, ps, depth);
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -715,7 +302,8 @@ static BOOL lsa_io_dom_query_3(const cha
 
 BOOL lsa_io_dom_query_5(const char *desc, DOM_QUERY_5 *d_q, prs_struct *ps, int depth)
 {
-	return lsa_io_dom_query("", d_q, ps, depth);
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -724,16 +312,8 @@ BOOL lsa_io_dom_query_5(const char *desc
 
 static BOOL lsa_io_dom_query_6(const char *desc, DOM_QUERY_6 *d_q, prs_struct *ps, int depth)
 {
-	if (d_q == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "lsa_io_dom_query_6");
-	depth++;
-
-	if (!prs_uint16("server_role", ps, depth, &d_q->server_role))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -743,49 +323,8 @@ static BOOL lsa_io_dom_query_6(const cha
 BOOL lsa_io_r_query(const char *desc, LSA_R_QUERY_INFO *r_q, prs_struct *ps,
 		    int depth)
 {
-	prs_debug(ps, depth, desc, "lsa_io_r_query");
-	depth++;
-
-	if(!prs_uint32("undoc_buffer", ps, depth, &r_q->undoc_buffer))
-		return False;
-
-	if (r_q->undoc_buffer != 0) {
-		if(!prs_uint16("info_class", ps, depth, &r_q->info_class))
-			return False;
-
-		if(!prs_align(ps))
-			return False;
-
-		switch (r_q->info_class) {
-		case 2:
-			if(!lsa_io_dom_query_2("", &r_q->dom.id2, ps, depth))
-				return False;
-			break;
-		case 3:
-			if(!lsa_io_dom_query_3("", &r_q->dom.id3, ps, depth))
-				return False;
-			break;
-		case 5:
-			if(!lsa_io_dom_query_5("", &r_q->dom.id5, ps, depth))
-				return False;
-			break;
-		case 6:
-			if(!lsa_io_dom_query_6("", &r_q->dom.id6, ps, depth))
-				return False;
-			break;
-		default:
-			/* PANIC! */
-			break;
-		}
-	}
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_ntstatus("status", ps, depth, &r_q->status))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -795,36 +334,8 @@ BOOL lsa_io_r_query(const char *desc, LS
 void init_lsa_sid_enum(TALLOC_CTX *mem_ctx, LSA_SID_ENUM *sen, 
 		       int num_entries, DOM_SID *sids)
 {
-	int i;
-
-	DEBUG(5, ("init_lsa_sid_enum\n"));
-
-	sen->num_entries  = num_entries;
-	sen->ptr_sid_enum = (num_entries != 0);
-	sen->num_entries2 = num_entries;
-
-	/* Allocate memory for sids and sid pointers */
-
-	if (num_entries == 0) return;
-
-	if ((sen->ptr_sid = (uint32 *)talloc_zero(mem_ctx, num_entries * 
-					     sizeof(uint32))) == NULL) {
-		DEBUG(3, ("init_lsa_sid_enum(): out of memory for ptr_sid\n"));
-		return;
-	}
-
-	if ((sen->sid = (DOM_SID2 *)talloc_zero(mem_ctx, num_entries * 
-					   sizeof(DOM_SID2))) == NULL) {
-		DEBUG(3, ("init_lsa_sid_enum(): out of memory for sids\n"));
-		return;
-	}
-
-	/* Copy across SIDs and SID pointers */
-
-	for (i = 0; i < num_entries; i++) {
-		sen->ptr_sid[i] = 1;
-		init_dom_sid2(&sen->sid[i], &sids[i]);
-	}
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -834,67 +345,8 @@ void init_lsa_sid_enum(TALLOC_CTX *mem_c
 static BOOL lsa_io_sid_enum(const char *desc, LSA_SID_ENUM *sen, prs_struct *ps, 
 			    int depth)
 {
-	int i;
-
-	prs_debug(ps, depth, desc, "lsa_io_sid_enum");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-	
-	if(!prs_uint32("num_entries ", ps, depth, &sen->num_entries))
-		return False;
-	if(!prs_uint32("ptr_sid_enum", ps, depth, &sen->ptr_sid_enum))
-		return False;
-
-	/*
-	   if the ptr is NULL, leave here. checked from a real w2k trace.
-	   JFM, 11/23/2001
-	 */
-	
-	if (sen->ptr_sid_enum==0)
-		return True;
-
-	if(!prs_uint32("num_entries2", ps, depth, &sen->num_entries2))
-		return False;
-
-	/* Mallocate memory if we're unpacking from the wire */
-
-	if (UNMARSHALLING(ps)) {
-		if ((sen->ptr_sid = (uint32 *)prs_alloc_mem( ps,
-			sen->num_entries * sizeof(uint32))) == NULL) {
-			DEBUG(3, ("init_lsa_sid_enum(): out of memory for "
-				  "ptr_sid\n"));
-			return False;
-		}
-
-		if ((sen->sid = (DOM_SID2 *)prs_alloc_mem( ps,
-			sen->num_entries * sizeof(DOM_SID2))) == NULL) {
-			DEBUG(3, ("init_lsa_sid_enum(): out of memory for "
-				  "sids\n"));
-			return False;
-		}
-	}
-
-	for (i = 0; i < sen->num_entries; i++) {	
-		fstring temp;
-
-		slprintf(temp, sizeof(temp) - 1, "ptr_sid[%d]", i);
-		if(!prs_uint32(temp, ps, depth, &sen->ptr_sid[i])) {
-			return False;
-		}
-	}
-
-	for (i = 0; i < sen->num_entries; i++) {
-		fstring temp;
-
-		slprintf(temp, sizeof(temp) - 1, "sid[%d]", i);
-		if(!smb_io_dom_sid2(temp, &sen->sid[i], ps, depth)) {
-			return False;
-		}
-	}
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -905,14 +357,8 @@ void init_q_lookup_sids(TALLOC_CTX *mem_
 			POLICY_HND *hnd, int num_sids, DOM_SID *sids,
 			uint16 level)
 {
-	DEBUG(5, ("init_r_enum_trust_dom\n"));
-
-	ZERO_STRUCTP(q_l);
-
-	memcpy(&q_l->pol, hnd, sizeof(q_l->pol));
-	init_lsa_sid_enum(mem_ctx, &q_l->sids, num_sids, sids);
-	
-	q_l->level.value = level;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -922,25 +368,8 @@ void init_q_lookup_sids(TALLOC_CTX *mem_
 BOOL lsa_io_q_lookup_sids(const char *desc, LSA_Q_LOOKUP_SIDS *q_s, prs_struct *ps,
 			  int depth)
 {
-	prs_debug(ps, depth, desc, "lsa_io_q_lookup_sids");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-	
-	if(!smb_io_pol_hnd("pol_hnd", &q_s->pol, ps, depth)) /* policy handle */
-		return False;
-	if(!lsa_io_sid_enum("sids   ", &q_s->sids, ps, depth)) /* sids to be looked up */
-		return False;
-	if(!lsa_io_trans_names("names  ", &q_s->names, ps, depth)) /* translated names */
-		return False;
-	if(!smb_io_lookup_level("switch ", &q_s->level, ps, depth)) /* lookup level */
-		return False;
-
-	if(!prs_uint32("mapped_count", ps, depth, &q_s->mapped_count))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -950,58 +379,8 @@ BOOL lsa_io_q_lookup_sids(const char *de
 static BOOL lsa_io_trans_names(const char *desc, LSA_TRANS_NAME_ENUM *trn,
                 prs_struct *ps, int depth)
 {
-	int i;
-
-	prs_debug(ps, depth, desc, "lsa_io_trans_names");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-   
-	if(!prs_uint32("num_entries    ", ps, depth, &trn->num_entries))
-		return False;
-	if(!prs_uint32("ptr_trans_names", ps, depth, &trn->ptr_trans_names))
-		return False;
-
-	if (trn->ptr_trans_names != 0) {
-		if(!prs_uint32("num_entries2   ", ps, depth, 
-			       &trn->num_entries2))
-			return False;
-
-		if (UNMARSHALLING(ps)) {
-			if ((trn->name = (LSA_TRANS_NAME *)
-			     prs_alloc_mem(ps, trn->num_entries * 
-				    sizeof(LSA_TRANS_NAME))) == NULL) {
-				return False;
-			}
-
-			if ((trn->uni_name = (UNISTR2 *)
-			     prs_alloc_mem(ps, trn->num_entries *
-				    sizeof(UNISTR2))) == NULL) {
-				return False;
-			}
-		}
-
-		for (i = 0; i < trn->num_entries2; i++) {
-			fstring t;
-			slprintf(t, sizeof(t) - 1, "name[%d] ", i);
-
-			if(!lsa_io_trans_name(t, &trn->name[i], ps, depth)) /* translated name */
-				return False;
-		}
-
-		for (i = 0; i < trn->num_entries2; i++) {
-			fstring t;
-			slprintf(t, sizeof(t) - 1, "name[%d] ", i);
-
-			if(!smb_io_unistr2(t, &trn->uni_name[i], trn->name[i].hdr_name.buffer, ps, depth))
-				return False;
-			if(!prs_align(ps))
-				return False;
-		}
-	}
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1011,32 +390,8 @@ static BOOL lsa_io_trans_names(const cha
 BOOL lsa_io_r_lookup_sids(const char *desc, LSA_R_LOOKUP_SIDS *r_s, 
 			  prs_struct *ps, int depth)
 {
-	prs_debug(ps, depth, desc, "lsa_io_r_lookup_sids");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-	
-	if(!prs_uint32("ptr_dom_ref", ps, depth, &r_s->ptr_dom_ref))
-		return False;
-
-	if (r_s->ptr_dom_ref != 0)
-		if(!lsa_io_dom_r_ref ("dom_ref", r_s->dom_ref, ps, depth)) /* domain reference info */
-			return False;
-
-	if(!lsa_io_trans_names("names  ", r_s->names, ps, depth)) /* translated names */
-		return False;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_uint32("mapped_count", ps, depth, &r_s->mapped_count))
-		return False;
-
-	if(!prs_ntstatus("status      ", ps, depth, &r_s->status))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1046,36 +401,8 @@ makes a structure.
 void init_q_lookup_names(TALLOC_CTX *mem_ctx, LSA_Q_LOOKUP_NAMES *q_l, 
 			 POLICY_HND *hnd, int num_names, const char **names)
 {
-	int i;
-
-	DEBUG(5, ("init_q_lookup_names\n"));
-
-	ZERO_STRUCTP(q_l);
-
-	q_l->pol = *hnd;
-	q_l->num_entries = num_names;
-	q_l->num_entries2 = num_names;
-	q_l->lookup_level = 1;
-
-	if ((q_l->uni_name = (UNISTR2 *)talloc_zero(
-		mem_ctx, num_names * sizeof(UNISTR2))) == NULL) {
-		DEBUG(3, ("init_q_lookup_names(): out of memory\n"));
-		return;
-	}
-
-	if ((q_l->hdr_name = (UNIHDR *)talloc_zero(
-		mem_ctx, num_names * sizeof(UNIHDR))) == NULL) {
-		DEBUG(3, ("init_q_lookup_names(): out of memory\n"));
-		return;
-	}
-
-	for (i = 0; i < num_names; i++) {
-		int len;
-		len = strlen(unix_to_dos_static(names[i]));
-
-		init_uni_hdr(&q_l->hdr_name[i], len);
-		init_unistr2(&q_l->uni_name[i], unix_to_dos_static(names[i]), len);
-	}
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1085,61 +412,8 @@ reads or writes a structure.
 BOOL lsa_io_q_lookup_names(const char *desc, LSA_Q_LOOKUP_NAMES *q_r, 
 			   prs_struct *ps, int depth)
 {
-	int i;
-
-	prs_debug(ps, depth, desc, "lsa_io_q_lookup_names");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!smb_io_pol_hnd("", &q_r->pol, ps, depth)) /* policy handle */
-		return False;
-
-	if(!prs_align(ps))
-		return False;
-	if(!prs_uint32("num_entries    ", ps, depth, &q_r->num_entries))
-		return False;
-	if(!prs_uint32("num_entries2   ", ps, depth, &q_r->num_entries2))
-		return False;
-
-	if (UNMARSHALLING(ps)) {
-		if (q_r->num_entries) {
-			if ((q_r->hdr_name = (UNIHDR *)prs_alloc_mem(ps,
-					q_r->num_entries * sizeof(UNIHDR))) == NULL)
-				return False;
-			if ((q_r->uni_name = (UNISTR2 *)prs_alloc_mem(ps,
-					q_r->num_entries * sizeof(UNISTR2))) == NULL)
-				return False;
-		}
-	}
-
-	for (i = 0; i < q_r->num_entries; i++) {
-		if(!prs_align(ps))
-			return False;
-		if(!smb_io_unihdr("hdr_name", &q_r->hdr_name[i], ps, depth)) /* pointer names */
-			return False;
-	}
-
-	for (i = 0; i < q_r->num_entries; i++) {
-		if(!prs_align(ps))
-			return False;
-		if(!smb_io_unistr2("dom_name", &q_r->uni_name[i], q_r->hdr_name[i].buffer, ps, depth)) /* names to be looked up */
-			return False;
-	}
-
-	if(!prs_align(ps))
-		return False;
-	if(!prs_uint32("num_trans_entries ", ps, depth, &q_r->num_trans_entries))
-		return False;
-	if(!prs_uint32("ptr_trans_sids ", ps, depth, &q_r->ptr_trans_sids))
-		return False;
-	if(!prs_uint32("lookup_level   ", ps, depth, &q_r->lookup_level))
-		return False;
-	if(!prs_uint32("mapped_count   ", ps, depth, &q_r->mapped_count))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1149,55 +423,8 @@ reads or writes a structure.
 BOOL lsa_io_r_lookup_names(const char *desc, LSA_R_LOOKUP_NAMES *r_r, 
 			   prs_struct *ps, int depth)
 {
-	int i;
-
-	prs_debug(ps, depth, desc, "lsa_io_r_lookup_names");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_uint32("ptr_dom_ref", ps, depth, &r_r->ptr_dom_ref))
-		return False;
-
-	if (r_r->ptr_dom_ref != 0)
-		if(!lsa_io_dom_r_ref("", r_r->dom_ref, ps, depth))
-			return False;
-
-	if(!prs_uint32("num_entries", ps, depth, &r_r->num_entries))
-		return False;
-	if(!prs_uint32("ptr_entries", ps, depth, &r_r->ptr_entries))
-		return False;
-
-	if (r_r->ptr_entries != 0) {
-		if(!prs_uint32("num_entries2", ps, depth, &r_r->num_entries2))
-			return False;
-
-		if (r_r->num_entries2 != r_r->num_entries) {
-			/* RPC fault */
-			return False;
-		}
-
-		if (UNMARSHALLING(ps)) {
-			if ((r_r->dom_rid = (DOM_RID2 *)prs_alloc_mem(ps, r_r->num_entries2 * sizeof(DOM_RID2)))
-			    == NULL) {
-				DEBUG(3, ("lsa_io_r_lookup_names(): out of memory\n"));
-				return False;
-			}
-		}
-
-		for (i = 0; i < r_r->num_entries2; i++)
-			if(!smb_io_dom_rid2("", &r_r->dom_rid[i], ps, depth)) /* domain RIDs being looked up */
-				return False;
-	}
-
-	if(!prs_uint32("mapped_count", ps, depth, &r_r->mapped_count))
-		return False;
-
-	if(!prs_ntstatus("status      ", ps, depth, &r_r->status))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 
@@ -1207,9 +434,8 @@ BOOL lsa_io_r_lookup_names(const char *d
 
 void init_lsa_q_close(LSA_Q_CLOSE *q_c, POLICY_HND *hnd)
 {
-	DEBUG(5, ("init_lsa_q_close\n"));
-
-	memcpy(&q_c->pol, hnd, sizeof(q_c->pol));
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1218,13 +444,8 @@ void init_lsa_q_close(LSA_Q_CLOSE *q_c,
 
 BOOL lsa_io_q_close(const char *desc, LSA_Q_CLOSE *q_c, prs_struct *ps, int depth)
 {
-	prs_debug(ps, depth, desc, "lsa_io_q_close");
-	depth++;
-
-	if(!smb_io_pol_hnd("", &q_c->pol, ps, depth))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1233,16 +454,8 @@ BOOL lsa_io_q_close(const char *desc, LS
 
 BOOL lsa_io_r_close(const char *desc,  LSA_R_CLOSE *r_c, prs_struct *ps, int depth)
 {
-	prs_debug(ps, depth, desc, "lsa_io_r_close");
-	depth++;
-
-	if(!smb_io_pol_hnd("", &r_c->pol, ps, depth))
-		return False;
-
-	if(!prs_ntstatus("status", ps, depth, &r_c->status))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1251,11 +464,8 @@ BOOL lsa_io_r_close(const char *desc,  L
 
 BOOL lsa_io_q_open_secret(const char *desc, LSA_Q_OPEN_SECRET *q_c, prs_struct *ps, int depth)
 {
-	prs_debug(ps, depth, desc, "lsa_io_q_open_secret");
-	depth++;
-
-	/* Don't bother to read or write at present... */
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1264,24 +474,8 @@ BOOL lsa_io_q_open_secret(const char *de
 
 BOOL lsa_io_r_open_secret(const char *desc, LSA_R_OPEN_SECRET *r_c, prs_struct *ps, int depth)
 {
-	prs_debug(ps, depth, desc, "lsa_io_r_open_secret");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-   
-	if(!prs_uint32("dummy1", ps, depth, &r_c->dummy1))
-		return False;
-	if(!prs_uint32("dummy2", ps, depth, &r_c->dummy2))
-		return False;
-	if(!prs_uint32("dummy3", ps, depth, &r_c->dummy3))
-		return False;
-	if(!prs_uint32("dummy4", ps, depth, &r_c->dummy4))
-		return False;
-	if(!prs_ntstatus("status", ps, depth, &r_c->status))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1290,12 +484,8 @@ BOOL lsa_io_r_open_secret(const char *de
 
 void init_q_enum_privs(LSA_Q_ENUM_PRIVS *q_q, POLICY_HND *hnd, uint32 enum_context, uint32 pref_max_length)
 {
-	DEBUG(5, ("init_q_enum_privs\n"));
-
-	memcpy(&q_q->pol, hnd, sizeof(q_q->pol));
-
-	q_q->enum_context = enum_context;
-	q_q->pref_max_length = pref_max_length;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1303,21 +493,8 @@ reads or writes a structure.
 ********************************************************************/
 BOOL lsa_io_q_enum_privs(const char *desc, LSA_Q_ENUM_PRIVS *q_q, prs_struct *ps, int depth)
 {
-	if (q_q == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "lsa_io_q_enum_privs");
-	depth++;
-
-	if (!smb_io_pol_hnd("", &q_q->pol, ps, depth))
-		return False;
-
-	if(!prs_uint32("enum_context   ", ps, depth, &q_q->enum_context))
-		return False;
-	if(!prs_uint32("pref_max_length", ps, depth, &q_q->pref_max_length))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1325,31 +502,8 @@ reads or writes a structure.
 ********************************************************************/
 static BOOL lsa_io_priv_entries(const char *desc, LSA_PRIV_ENTRY *entries, uint32 count, prs_struct *ps, int depth)
 {
-	uint32 i;
-
-	if (entries == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "lsa_io_priv_entries");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	for (i = 0; i < count; i++) {
-		if (!smb_io_unihdr("", &entries[i].hdr_name, ps, depth))
-			return False;
-		if(!prs_uint32("luid_low ", ps, depth, &entries[i].luid_low))
-			return False;
-		if(!prs_uint32("luid_high", ps, depth, &entries[i].luid_high))
-			return False;
-	}
-
-	for (i = 0; i < count; i++)
-		if (!smb_io_unistr2("", &entries[i].name, entries[i].hdr_name.buffer, ps, depth))
-			return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1359,20 +513,8 @@ static BOOL lsa_io_priv_entries(const ch
 void init_lsa_r_enum_privs(LSA_R_ENUM_PRIVS *r_u, uint32 enum_context,
 			  uint32 count, LSA_PRIV_ENTRY *entries)
 {
-	DEBUG(5, ("init_lsa_r_enum_privs\n"));
-
-	r_u->enum_context=enum_context;
-	r_u->count=count;
-	
-	if (entries!=NULL) {
-		r_u->ptr=1;
-		r_u->count1=count;
-		r_u->privs=entries;
-	} else {
-		r_u->ptr=0;
-		r_u->count1=0;
-		r_u->privs=NULL;
-	}		
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1380,56 +522,14 @@ reads or writes a structure.
 ********************************************************************/
 BOOL lsa_io_r_enum_privs(const char *desc, LSA_R_ENUM_PRIVS *r_q, prs_struct *ps, int depth)
 {
-	if (r_q == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "lsa_io_r_enum_privs");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_uint32("enum_context", ps, depth, &r_q->enum_context))
-		return False;
-	if(!prs_uint32("count", ps, depth, &r_q->count))
-		return False;
-	if(!prs_uint32("ptr", ps, depth, &r_q->ptr))
-		return False;
-
-	if (r_q->ptr) {
-		if(!prs_uint32("count1", ps, depth, &r_q->count1))
-			return False;
-
-		if (UNMARSHALLING(ps))
-			if (!(r_q->privs = (LSA_PRIV_ENTRY *)prs_alloc_mem(ps, sizeof(LSA_PRIV_ENTRY) * r_q->count1)))
-				return False;
-
-		if (!lsa_io_priv_entries("", r_q->privs, r_q->count1, ps, depth))
-			return False;
-	}
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_ntstatus("status", ps, depth, &r_q->status))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 void init_lsa_priv_get_dispname(LSA_Q_PRIV_GET_DISPNAME *trn, POLICY_HND *hnd, const char *name, uint16 lang_id, uint16 lang_id_sys)
 {
-	int len_name = strlen(name);
-
-	if(len_name == 0)
-		len_name = 1;
-
-	memcpy(&trn->pol, hnd, sizeof(trn->pol));
-
-	init_uni_hdr(&trn->hdr_name, len_name);
-	init_unistr2(&trn->name, name, len_name);
-	trn->lang_id = lang_id;
-	trn->lang_id_sys = lang_id_sys;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1437,30 +537,8 @@ reads or writes a structure.
 ********************************************************************/
 BOOL lsa_io_q_priv_get_dispname(const char *desc, LSA_Q_PRIV_GET_DISPNAME *q_q, prs_struct *ps, int depth)
 {
-	if (q_q == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "lsa_io_q_priv_get_dispname");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if (!smb_io_pol_hnd("", &q_q->pol, ps, depth))
-		return False;
-
-	if (!smb_io_unihdr("hdr_name", &q_q->hdr_name, ps, depth))
-		return False;
-
-	if (!smb_io_unistr2("name", &q_q->name, q_q->hdr_name.buffer, ps, depth))
-		return False;
-
-	if(!prs_uint16("lang_id    ", ps, depth, &q_q->lang_id))
-		return False;
-	if(!prs_uint16("lang_id_sys", ps, depth, &q_q->lang_id_sys))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1468,46 +546,14 @@ reads or writes a structure.
 ********************************************************************/
 BOOL lsa_io_r_priv_get_dispname(const char *desc, LSA_R_PRIV_GET_DISPNAME *r_q, prs_struct *ps, int depth)
 {
-	if (r_q == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "lsa_io_r_priv_get_dispname");
-	depth++;
-
-	if (!prs_align(ps))
-		return False;
-
-	if (!prs_uint32("ptr_info", ps, depth, &r_q->ptr_info))
-		return False;
-
-	if (r_q->ptr_info){
-		if (!smb_io_unihdr("hdr_name", &r_q->hdr_desc, ps, depth))
-			return False;
-
-		if (!smb_io_unistr2("desc", &r_q->desc, r_q->hdr_desc.buffer, ps, depth))
-			return False;
-	}
-/*
-	if(!prs_align(ps))
-		return False;
-*/
-	if(!prs_uint16("lang_id", ps, depth, &r_q->lang_id))
-		return False;
-
-	if(!prs_align(ps))
-		return False;
-	if(!prs_ntstatus("status", ps, depth, &r_q->status))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 void init_lsa_q_enum_accounts(LSA_Q_ENUM_ACCOUNTS *trn, POLICY_HND *hnd, uint32 enum_context, uint32 pref_max_length)
 {
-	memcpy(&trn->pol, hnd, sizeof(trn->pol));
-
-	trn->enum_context = enum_context;
-	trn->pref_max_length = pref_max_length;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1515,21 +561,8 @@ reads or writes a structure.
 ********************************************************************/
 BOOL lsa_io_q_enum_accounts(const char *desc, LSA_Q_ENUM_ACCOUNTS *q_q, prs_struct *ps, int depth)
 {
-	if (q_q == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "lsa_io_q_enum_accounts");
-	depth++;
-
-	if (!smb_io_pol_hnd("", &q_q->pol, ps, depth))
-		return False;
-
-	if(!prs_uint32("enum_context   ", ps, depth, &q_q->enum_context))
-		return False;
-	if(!prs_uint32("pref_max_length", ps, depth, &q_q->pref_max_length))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1538,18 +571,8 @@ BOOL lsa_io_q_enum_accounts(const char *
 
 void init_lsa_r_enum_accounts(LSA_R_ENUM_ACCOUNTS *r_u, uint32 enum_context)
 {
-	DEBUG(5, ("init_lsa_r_enum_accounts\n"));
-
-	r_u->enum_context=enum_context;
-	if (r_u->enum_context!=0) {
-		r_u->sids.num_entries=enum_context;
-		r_u->sids.ptr_sid_enum=1;
-		r_u->sids.num_entries2=enum_context;
-	} else {
-		r_u->sids.num_entries=0;
-		r_u->sids.ptr_sid_enum=0;
-		r_u->sids.num_entries2=0;
-	}
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1557,28 +580,8 @@ reads or writes a structure.
 ********************************************************************/
 BOOL lsa_io_r_enum_accounts(const char *desc, LSA_R_ENUM_ACCOUNTS *r_q, prs_struct *ps, int depth)
 {
-	if (r_q == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "lsa_io_r_enum_accounts");
-	depth++;
-
-	if (!prs_align(ps))
-		return False;
-
-	if(!prs_uint32("enum_context", ps, depth, &r_q->enum_context))
-		return False;
-
-	if (!lsa_io_sid_enum("sids", &r_q->sids, ps, depth))
-		return False;
-
-	if (!prs_align(ps))
-		return False;
-
-	if(!prs_ntstatus("status", ps, depth, &r_q->status))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 
@@ -1588,30 +591,8 @@ BOOL lsa_io_r_enum_accounts(const char *
 
 BOOL lsa_io_q_unk_get_connuser(const char *desc, LSA_Q_UNK_GET_CONNUSER *q_c, prs_struct *ps, int depth)
 {
-	prs_debug(ps, depth, desc, "lsa_io_q_unk_get_connuser");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-   
-	if(!prs_uint32("ptr_srvname", ps, depth, &q_c->ptr_srvname))
-		return False;
-
-	if(!smb_io_unistr2("uni2_srvname", &q_c->uni2_srvname, q_c->ptr_srvname, ps, depth)) /* server name to be looked up */
-		return False;
-
-	if (!prs_align(ps))
-	  return False;
-
-	if(!prs_uint32("unk1", ps, depth, &q_c->unk1))
-		return False;
-	if(!prs_uint32("unk2", ps, depth, &q_c->unk2))
-		return False;
-	if(!prs_uint32("unk3", ps, depth, &q_c->unk3))
-		return False;
-
-	/* Don't bother to read or write at present... */
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1620,47 +601,14 @@ BOOL lsa_io_q_unk_get_connuser(const cha
 
 BOOL lsa_io_r_unk_get_connuser(const char *desc, LSA_R_UNK_GET_CONNUSER *r_c, prs_struct *ps, int depth)
 {
-	prs_debug(ps, depth, desc, "lsa_io_r_unk_get_connuser");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-   
-	if(!prs_uint32("ptr_user_name", ps, depth, &r_c->ptr_user_name))
-		return False;
-	if(!smb_io_unihdr("hdr_user_name", &r_c->hdr_user_name, ps, depth))
-		return False;
-	if(!smb_io_unistr2("uni2_user_name", &r_c->uni2_user_name, r_c->ptr_user_name, ps, depth))
-		return False;
-
-	if (!prs_align(ps))
-	  return False;
-	
-	if(!prs_uint32("unk1", ps, depth, &r_c->unk1))
-		return False;
-
-	if(!prs_uint32("ptr_dom_name", ps, depth, &r_c->ptr_dom_name))
-		return False;
-	if(!smb_io_unihdr("hdr_dom_name", &r_c->hdr_dom_name, ps, depth))
-		return False;
-	if(!smb_io_unistr2("uni2_dom_name", &r_c->uni2_dom_name, r_c->ptr_dom_name, ps, depth))
-		return False;
-
-	if (!prs_align(ps))
-	  return False;
-	
-	if(!prs_ntstatus("status", ps, depth, &r_c->status))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 void init_lsa_q_open_account(LSA_Q_OPENACCOUNT *trn, POLICY_HND *hnd, DOM_SID *sid, uint32 desired_access)
 {
-	memcpy(&trn->pol, hnd, sizeof(trn->pol));
-
-	init_dom_sid2(&trn->sid, sid);
-	trn->access = desired_access;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1669,22 +617,8 @@ void init_lsa_q_open_account(LSA_Q_OPENA
 
 BOOL lsa_io_q_open_account(const char *desc, LSA_Q_OPENACCOUNT *r_c, prs_struct *ps, int depth)
 {
-	prs_debug(ps, depth, desc, "lsa_io_q_open_account");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
- 
-	if(!smb_io_pol_hnd("pol", &r_c->pol, ps, depth))
-		return False;
-
-	if(!smb_io_dom_sid2("sid", &r_c->sid, ps, depth)) /* domain SID */
-		return False;
-
- 	if(!prs_uint32("access", ps, depth, &r_c->access))
-		return False;
-  
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1693,25 +627,15 @@ BOOL lsa_io_q_open_account(const char *d
 
 BOOL lsa_io_r_open_account(const char *desc, LSA_R_OPENACCOUNT  *r_c, prs_struct *ps, int depth)
 {
-	prs_debug(ps, depth, desc, "lsa_io_r_open_account");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
- 
-	if(!smb_io_pol_hnd("pol", &r_c->pol, ps, depth))
-		return False;
-
-	if(!prs_ntstatus("status", ps, depth, &r_c->status))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 
 void init_lsa_q_enum_privsaccount(LSA_Q_ENUMPRIVSACCOUNT *trn, POLICY_HND *hnd)
 {
-	memcpy(&trn->pol, hnd, sizeof(trn->pol));
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 
 }
 
@@ -1721,16 +645,8 @@ void init_lsa_q_enum_privsaccount(LSA_Q_
 
 BOOL lsa_io_q_enum_privsaccount(const char *desc, LSA_Q_ENUMPRIVSACCOUNT *r_c, prs_struct *ps, int depth)
 {
-	prs_debug(ps, depth, desc, "lsa_io_q_enum_privsaccount");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
- 
-	if(!smb_io_pol_hnd("pol", &r_c->pol, ps, depth))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1739,19 +655,8 @@ BOOL lsa_io_q_enum_privsaccount(const ch
 
 BOOL lsa_io_luid(const char *desc, LUID *r_c, prs_struct *ps, int depth)
 {
-	prs_debug(ps, depth, desc, "lsa_io_luid");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
- 
-	if(!prs_uint32("low", ps, depth, &r_c->low))
-		return False;
-
-	if(!prs_uint32("high", ps, depth, &r_c->high))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1760,19 +665,8 @@ BOOL lsa_io_luid(const char *desc, LUID
 
 BOOL lsa_io_luid_attr(const char *desc, LUID_ATTR *r_c, prs_struct *ps, int depth)
 {
-	prs_debug(ps, depth, desc, "lsa_io_luid_attr");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
- 
-	if (!lsa_io_luid(desc, &r_c->luid, ps, depth))
-		return False;
-
-	if(!prs_uint32("attr", ps, depth, &r_c->attr))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1781,35 +675,14 @@ BOOL lsa_io_luid_attr(const char *desc,
 
 BOOL lsa_io_privilege_set(const char *desc, PRIVILEGE_SET *r_c, prs_struct *ps, int depth)
 {
-	uint32 i;
-
-	prs_debug(ps, depth, desc, "lsa_io_privilege_set");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
- 
-	if(!prs_uint32("count", ps, depth, &r_c->count))
-		return False;
-	if(!prs_uint32("control", ps, depth, &r_c->control))
-		return False;
-
-	for (i=0; i<r_c->count; i++) {
-		if (!lsa_io_luid_attr(desc, &r_c->set[i], ps, depth))
-			return False;
-	}
-	
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 void init_lsa_r_enum_privsaccount(LSA_R_ENUMPRIVSACCOUNT *r_u, LUID_ATTR *set, uint32 count, uint32 control)
 {
-	r_u->ptr=1;
-	r_u->count=count;
-	r_u->set.set=set;
-	r_u->set.count=count;
-	r_u->set.control=control;
-	DEBUG(10,("init_lsa_r_enum_privsaccount: %d %d privileges\n", r_u->count, r_u->set.count));
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1818,35 +691,8 @@ void init_lsa_r_enum_privsaccount(LSA_R_
 
 BOOL lsa_io_r_enum_privsaccount(const char *desc, LSA_R_ENUMPRIVSACCOUNT *r_c, prs_struct *ps, int depth)
 {
-	prs_debug(ps, depth, desc, "lsa_io_r_enum_privsaccount");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
- 
-	if(!prs_uint32("ptr", ps, depth, &r_c->ptr))
-		return False;
-
-	if (r_c->ptr!=0) {
-		if(!prs_uint32("count", ps, depth, &r_c->count))
-			return False;
-
-		/* malloc memory if unmarshalling here */
-
-		if (UNMARSHALLING(ps) && r_c->count!=0) {
-			if (!(r_c->set.set = (LUID_ATTR *)prs_alloc_mem(ps,sizeof(LUID_ATTR) * r_c->count)))
-				return False;
-
-		}
-		
-		if(!lsa_io_privilege_set(desc, &r_c->set, ps, depth))
-			return False;
-	}
-
-	if(!prs_ntstatus("status", ps, depth, &r_c->status))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 
@@ -1857,16 +703,8 @@ BOOL lsa_io_r_enum_privsaccount(const ch
 
 BOOL lsa_io_q_getsystemaccount(const char *desc, LSA_Q_GETSYSTEMACCOUNT  *r_c, prs_struct *ps, int depth)
 {
-	prs_debug(ps, depth, desc, "lsa_io_q_getsystemaccount");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
- 
-	if(!smb_io_pol_hnd("pol", &r_c->pol, ps, depth))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1875,19 +713,8 @@ BOOL lsa_io_q_getsystemaccount(const cha
 
 BOOL lsa_io_r_getsystemaccount(const char *desc, LSA_R_GETSYSTEMACCOUNT  *r_c, prs_struct *ps, int depth)
 {
-	prs_debug(ps, depth, desc, "lsa_io_r_getsystemaccount");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
- 
-	if(!prs_uint32("access", ps, depth, &r_c->access))
-		return False;
-
-	if(!prs_ntstatus("status", ps, depth, &r_c->status))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 
@@ -1897,19 +724,8 @@ BOOL lsa_io_r_getsystemaccount(const cha
 
 BOOL lsa_io_q_setsystemaccount(const char *desc, LSA_Q_SETSYSTEMACCOUNT  *r_c, prs_struct *ps, int depth)
 {
-	prs_debug(ps, depth, desc, "lsa_io_q_setsystemaccount");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
- 
-	if(!smb_io_pol_hnd("pol", &r_c->pol, ps, depth))
-		return False;
-
-	if(!prs_uint32("access", ps, depth, &r_c->access))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1918,29 +734,15 @@ BOOL lsa_io_q_setsystemaccount(const cha
 
 BOOL lsa_io_r_setsystemaccount(const char *desc, LSA_R_SETSYSTEMACCOUNT  *r_c, prs_struct *ps, int depth)
 {
-	prs_debug(ps, depth, desc, "lsa_io_r_setsystemaccount");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
- 
-	if(!prs_ntstatus("status", ps, depth, &r_c->status))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 
 void init_lsa_q_lookupprivvalue(LSA_Q_LOOKUPPRIVVALUE *trn, POLICY_HND *hnd, const char *name)
 {
-	int len_name = strlen(name);
-	memcpy(&trn->pol, hnd, sizeof(trn->pol));
-
-	if(len_name == 0)
-		len_name = 1;
-
-	init_uni_hdr(&trn->hdr_right, len_name);
-	init_unistr2(&trn->uni2_right, name, len_name);
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1949,20 +751,8 @@ void init_lsa_q_lookupprivvalue(LSA_Q_LO
 
 BOOL lsa_io_q_lookupprivvalue(const char *desc, LSA_Q_LOOKUPPRIVVALUE  *r_c, prs_struct *ps, int depth)
 {
-	prs_debug(ps, depth, desc, "lsa_io_q_lookupprivvalue");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
- 
-	if(!smb_io_pol_hnd("pol", &r_c->pol, ps, depth))
-		return False;
-	if(!smb_io_unihdr ("hdr_name", &r_c->hdr_right, ps, depth))
-		return False;
-	if(!smb_io_unistr2("uni2_right", &r_c->uni2_right, r_c->hdr_right.buffer, ps, depth))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1971,19 +761,8 @@ BOOL lsa_io_q_lookupprivvalue(const char
 
 BOOL lsa_io_r_lookupprivvalue(const char *desc, LSA_R_LOOKUPPRIVVALUE  *r_c, prs_struct *ps, int depth)
 {
-	prs_debug(ps, depth, desc, "lsa_io_r_lookupprivvalue");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-		
-	if(!lsa_io_luid("luid", &r_c->luid, ps, depth))
-		return False;
- 
-	if(!prs_ntstatus("status", ps, depth, &r_c->status))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 
@@ -1993,27 +772,8 @@ BOOL lsa_io_r_lookupprivvalue(const char
 
 BOOL lsa_io_q_addprivs(const char *desc, LSA_Q_ADDPRIVS *r_c, prs_struct *ps, int depth)
 {
-	prs_debug(ps, depth, desc, "lsa_io_q_addprivs");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
- 
-	if(!smb_io_pol_hnd("pol", &r_c->pol, ps, depth))
-		return False;
-	
-	if(!prs_uint32("count", ps, depth, &r_c->count))
-		return False;
-
-	if (UNMARSHALLING(ps) && r_c->count!=0) {
-		if (!(r_c->set.set = (LUID_ATTR *)prs_alloc_mem(ps,sizeof(LUID_ATTR) * r_c->count)))
-			return False;
-	}
-	
-	if(!lsa_io_privilege_set(desc, &r_c->set, ps, depth))
-		return False;
-	
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -2022,16 +782,8 @@ BOOL lsa_io_q_addprivs(const char *desc,
 
 BOOL lsa_io_r_addprivs(const char *desc, LSA_R_ADDPRIVS *r_c, prs_struct *ps, int depth)
 {
-	prs_debug(ps, depth, desc, "lsa_io_r_addprivs");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
- 
-	if(!prs_ntstatus("status", ps, depth, &r_c->status))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -2040,40 +792,8 @@ BOOL lsa_io_r_addprivs(const char *desc,
 
 BOOL lsa_io_q_removeprivs(const char *desc, LSA_Q_REMOVEPRIVS *r_c, prs_struct *ps, int depth)
 {
-	prs_debug(ps, depth, desc, "lsa_io_q_removeprivs");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
- 
-	if(!smb_io_pol_hnd("pol", &r_c->pol, ps, depth))
-		return False;
-	
-	if(!prs_uint32("allrights", ps, depth, &r_c->allrights))
-		return False;
-
-	if(!prs_uint32("ptr", ps, depth, &r_c->ptr))
-		return False;
-
-	/* 
-	 * JFM: I'm not sure at all if the count is inside the ptr
-	 * never seen one with ptr=0
-	 */
-
-	if (r_c->ptr!=0) {
-		if(!prs_uint32("count", ps, depth, &r_c->count))
-			return False;
-
-		if (UNMARSHALLING(ps) && r_c->count!=0) {
-			if (!(r_c->set.set = (LUID_ATTR *)prs_alloc_mem(ps,sizeof(LUID_ATTR) * r_c->count)))
-				return False;
-		}
-
-		if(!lsa_io_privilege_set(desc, &r_c->set, ps, depth))
-			return False;
-	}
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -2082,22 +802,12 @@ BOOL lsa_io_q_removeprivs(const char *de
 
 BOOL lsa_io_r_removeprivs(const char *desc, LSA_R_REMOVEPRIVS *r_c, prs_struct *ps, int depth)
 {
-	prs_debug(ps, depth, desc, "lsa_io_r_removeprivs");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
- 
-	if(!prs_ntstatus("status", ps, depth, &r_c->status))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 BOOL policy_handle_is_valid(const POLICY_HND *hnd)
 {
-	POLICY_HND zero_pol;
-
-	ZERO_STRUCT(zero_pol);
-	return ((memcmp(&zero_pol, hnd, sizeof(POLICY_HND)) == 0) ? False : True );
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
diff -pruwN samba-2.2.12/source/rpc_parse/parse_misc.c samba-2.2.12-livebox/rpc_parse/parse_misc.c
--- samba-2.2.12/source/rpc_parse/parse_misc.c	2004-08-12 20:24:27.000000000 +0200
+++ samba-2.2.12-livebox/rpc_parse/parse_misc.c	2010-03-31 11:45:59.000000000 +0200
@@ -92,19 +92,8 @@ TALLOC_CTX *get_talloc_ctx(void)
 
 static BOOL smb_io_utime(const char *desc, UTIME *t, prs_struct *ps, int depth)
 {
-	if (t == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "smb_io_utime");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-	
-	if(!prs_uint32 ("time", ps, depth, &t->time))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -113,21 +102,8 @@ static BOOL smb_io_utime(const char *des
 
 BOOL smb_io_time(const char *desc, NTTIME *nttime, prs_struct *ps, int depth)
 {
-	if (nttime == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "smb_io_time");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-	
-	if(!prs_uint32("low ", ps, depth, &nttime->low)) /* low part */
-		return False;
-	if(!prs_uint32("high", ps, depth, &nttime->high)) /* high part */
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -136,20 +112,8 @@ BOOL smb_io_time(const char *desc, NTTIM
 
 BOOL smb_io_lookup_level(const char *desc, LOOKUP_LEVEL *level, prs_struct *ps, int depth)
 {
-	if (level == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "smb_io_lookup_level");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-	if(!prs_uint16("value", ps, depth, &level->value))
-		return False;
-	if(!prs_align(ps))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -296,8 +260,8 @@ void init_dom_sid(DOM_SID *sid, const ch
 
 void init_dom_sid2(DOM_SID2 *sid2, const DOM_SID *sid)
 {
-	sid2->sid = *sid;
-	sid2->num_auths = sid2->sid.num_auths;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -306,22 +270,8 @@ void init_dom_sid2(DOM_SID2 *sid2, const
 
 BOOL smb_io_dom_sid2(const char *desc, DOM_SID2 *sid, prs_struct *ps, int depth)
 {
-	if (sid == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "smb_io_dom_sid2");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-	
-	if(!prs_uint32("num_auths", ps, depth, &sid->num_auths))
-		return False;
-
-	if(!smb_io_dom_sid("sid", &sid->sid, ps, depth))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -330,9 +280,8 @@ creates a STRHDR structure.
 
 void init_str_hdr(STRHDR *hdr, int max_len, int len, uint32 buffer)
 {
-	hdr->str_max_len = max_len;
-	hdr->str_str_len = len;
-	hdr->buffer      = buffer;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -341,22 +290,8 @@ void init_str_hdr(STRHDR *hdr, int max_l
 
 BOOL smb_io_strhdr(const char *desc,  STRHDR *hdr, prs_struct *ps, int depth)
 {
-	if (hdr == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "smb_io_strhdr");
-	depth++;
-
-	prs_align(ps);
-	
-	if(!prs_uint16("str_str_len", ps, depth, &hdr->str_str_len))
-		return False;
-	if(!prs_uint16("str_max_len", ps, depth, &hdr->str_max_len))
-		return False;
-	if(!prs_uint32("buffer     ", ps, depth, &hdr->buffer))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -365,9 +300,8 @@ BOOL smb_io_strhdr(const char *desc,  ST
 
 void init_uni_hdr(UNIHDR *hdr, int len)
 {
-	hdr->uni_str_len = 2 * len;
-	hdr->uni_max_len = 2 * len;
-	hdr->buffer      = len != 0 ? 1 : 0;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -401,8 +335,8 @@ BOOL smb_io_unihdr(const char *desc, UNI
 
 void init_buf_hdr(BUFHDR *hdr, int max_len, int len)
 {
-	hdr->buf_max_len = max_len;
-	hdr->buf_len     = len;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -412,23 +346,8 @@ void init_buf_hdr(BUFHDR *hdr, int max_l
 
 BOOL smb_io_hdrbuf_pre(const char *desc, BUFHDR *hdr, prs_struct *ps, int depth, uint32 *offset)
 {
-	(*offset) = prs_offset(ps);
-	if (ps->io) {
-
-		/* reading. */
-
-		if(!smb_io_hdrbuf(desc, hdr, ps, depth))
-			return False;
-
-	} else {
-
-		/* writing. */
-
-		if(!prs_set_offset(ps, prs_offset(ps) + (sizeof(uint32) * 2)))
-			return False;
-	}
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -439,22 +358,8 @@ BOOL smb_io_hdrbuf_pre(const char *desc,
 BOOL smb_io_hdrbuf_post(const char *desc, BUFHDR *hdr, prs_struct *ps, int depth, 
 				uint32 ptr_hdrbuf, uint32 max_len, uint32 len)
 {
-	if (!ps->io) {
-		/* writing: go back and do a retrospective job.  i hate this */
-
-		uint32 old_offset = prs_offset(ps);
-
-		init_buf_hdr(hdr, max_len, len);
-		if(!prs_set_offset(ps, ptr_hdrbuf))
-			return False;
-		if(!smb_io_hdrbuf(desc, hdr, ps, depth))
-			return False;
-
-		if(!prs_set_offset(ps, old_offset))
-			return False;
-	}
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -463,21 +368,8 @@ BOOL smb_io_hdrbuf_post(const char *desc
 
 BOOL smb_io_hdrbuf(const char *desc, BUFHDR *hdr, prs_struct *ps, int depth)
 {
-	if (hdr == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "smb_io_hdrbuf");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-	
-	if(!prs_uint32("buf_max_len", ps, depth, &hdr->buf_max_len))
-		return False;
-	if(!prs_uint32("buf_len    ", ps, depth, &hdr->buf_len))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -486,8 +378,8 @@ creates a UNIHDR2 structure.
 
 void init_uni_hdr2(UNIHDR2 *hdr, int len)
 {
-	init_uni_hdr(&hdr->unihdr, len);
-	hdr->buffer = (len > 0) ? 1 : 0;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -496,21 +388,8 @@ void init_uni_hdr2(UNIHDR2 *hdr, int len
 
 BOOL smb_io_unihdr2(const char *desc, UNIHDR2 *hdr2, prs_struct *ps, int depth)
 {
-	if (hdr2 == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "smb_io_unihdr2");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!smb_io_unihdr("hdr", &hdr2->unihdr, ps, depth))
-		return False;
-	if(!prs_uint32("buffer", ps, depth, &hdr2->buffer))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -566,13 +445,8 @@ BOOL smb_io_unistr(const char *desc, UNI
 
 static void create_buffer3(BUFFER3 *str, size_t len)
 {
-	if (len < MAX_BUFFERLEN)
-		len = MAX_BUFFERLEN;
-
-	str->buffer = talloc_zero(get_talloc_ctx(), len);
-	if (str->buffer == NULL)
-		smb_panic("create_buffer3: talloc fail\n");
-
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -581,14 +455,8 @@ static void create_buffer3(BUFFER3 *str,
 
 void init_buffer3_uint32(BUFFER3 *str, uint32 val)
 {
-	ZERO_STRUCTP(str);
-
-	/* set up string lengths. */
-	str->buf_max_len = sizeof(uint32);
-	str->buf_len     = sizeof(uint32);
-
-	create_buffer3(str, sizeof(uint32));
-	SIVAL(str->buffer, 0, val);
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -597,16 +465,8 @@ void init_buffer3_uint32(BUFFER3 *str, u
 
 void init_buffer3_str(BUFFER3 *str, char *buf, int len)
 {
-	ZERO_STRUCTP(str);
-
-	/* set up string lengths. */
-	str->buf_max_len = len * 2;
-	str->buf_len     = len * 2;
-
-	create_buffer3(str, str->buf_max_len);
-
-	/* store the string (null-terminated 8 bit chars into 16 bit chars) */
-	dos_struni2((char *)str->buffer, buf, str->buf_max_len);
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -615,9 +475,8 @@ void init_buffer3_str(BUFFER3 *str, char
 
 void init_buffer3_hex(BUFFER3 *str, char *buf)
 {
-	ZERO_STRUCTP(str);
-	create_buffer3(str, strlen(buf));
-	str->buf_max_len = str->buf_len = strhex_to_str((char *)str->buffer, sizeof(str->buffer), buf);
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -626,15 +485,8 @@ void init_buffer3_hex(BUFFER3 *str, char
 
 void init_buffer3_bytes(BUFFER3 *str, uint8 *buf, int len)
 {
-	ZERO_STRUCTP(str);
-
-	/* max buffer size (allocated size) */
-	str->buf_max_len = len;
-	if (buf != NULL) {
-		create_buffer3(str, len);
-		memcpy(str->buffer, buf, len);
-	}
-	str->buf_len = buf != NULL ? len : 0;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -645,31 +497,8 @@ void init_buffer3_bytes(BUFFER3 *str, ui
 
 BOOL smb_io_buffer3(const char *desc, BUFFER3 *buf3, prs_struct *ps, int depth)
 {
-	if (buf3 == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "smb_io_buffer3");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-	
-	if(!prs_uint32("uni_max_len", ps, depth, &buf3->buf_max_len))
-		return False;
-
-	if (UNMARSHALLING(ps)) {
-		buf3->buffer = (unsigned char *)prs_alloc_mem(ps, buf3->buf_max_len);
-		if (buf3->buffer == NULL)
-			return False;
-	}
-
-	if(!prs_uint8s(True, "buffer     ", ps, depth, buf3->buffer, buf3->buf_max_len))
-		return False;
-
-	if(!prs_uint32("buf_len    ", ps, depth, &buf3->buf_len))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -702,21 +531,8 @@ BOOL smb_io_buffer5(const char *desc, BU
 
 void init_buffer2(BUFFER2 *str, uint8 *buf, int len)
 {
-	ZERO_STRUCTP(str);
-
-	/* max buffer size (allocated size) */
-	str->buf_max_len = len;
-	str->undoc       = 0;
-	str->buf_len = buf != NULL ? len : 0;
-
-	if (buf != NULL) {
-		if (len < MAX_BUFFERLEN)
-			len = MAX_BUFFERLEN;
-		str->buffer = talloc_zero(get_talloc_ctx(), len);
-		if (str->buffer == NULL)
-			smb_panic("init_buffer2: talloc fail\n");
-		memcpy(str->buffer, buf, MIN(str->buf_len, len));
-	}
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -727,38 +543,8 @@ void init_buffer2(BUFFER2 *str, uint8 *b
 
 BOOL smb_io_buffer2(const char *desc, BUFFER2 *buf2, uint32 buffer, prs_struct *ps, int depth)
 {
-	if (buf2 == NULL)
-		return False;
-
-	if (buffer) {
-
-		prs_debug(ps, depth, desc, "smb_io_buffer2");
-		depth++;
-
-		if(!prs_align(ps))
-			return False;
-		
-		if(!prs_uint32("uni_max_len", ps, depth, &buf2->buf_max_len))
-			return False;
-		if(!prs_uint32("undoc      ", ps, depth, &buf2->undoc))
-			return False;
-		if(!prs_uint32("buf_len    ", ps, depth, &buf2->buf_len))
-			return False;
-
-		/* buffer advanced by indicated length of string
-		   NOT by searching for null-termination */
-
-		if(!prs_buffer2(True, "buffer     ", ps, depth, buf2))
-			return False;
-
-	} else {
-
-		prs_debug(ps, depth, desc, "smb_io_buffer2 - NULL");
-		depth++;
-		memset((char *)buf2, '\0', sizeof(*buf2));
-
-	}
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -823,22 +609,8 @@ void copy_unistr2(UNISTR2 *str, const UN
 
 void init_string2(STRING2 *str, const char *buf, int max_len, int str_len)
 {
-	int alloc_len = 0;
-
-	/* set up string lengths. */
-	str->str_max_len = max_len;
-	str->undoc       = 0;
-	str->str_str_len = str_len;
-
-	/* store the string */
-	if(str_len != 0) {
-		if (str_len < MAX_STRINGLEN)
-			alloc_len = MAX_STRINGLEN;
-		str->buffer = talloc_zero(get_talloc_ctx(), alloc_len);
-		if (str->buffer == NULL)
-			smb_panic("init_string2: malloc fail\n");
-		memcpy(str->buffer, buf, str_len);
-  }
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -850,38 +622,8 @@ void init_string2(STRING2 *str, const ch
 
 BOOL smb_io_string2(const char *desc, STRING2 *str2, uint32 buffer, prs_struct *ps, int depth)
 {
-	if (str2 == NULL)
-		return False;
-
-	if (buffer) {
-
-		prs_debug(ps, depth, desc, "smb_io_string2");
-		depth++;
-
-		if(!prs_align(ps))
-			return False;
-		
-		if(!prs_uint32("str_max_len", ps, depth, &str2->str_max_len))
-			return False;
-		if(!prs_uint32("undoc      ", ps, depth, &str2->undoc))
-			return False;
-		if(!prs_uint32("str_str_len", ps, depth, &str2->str_str_len))
-			return False;
-
-		/* buffer advanced by indicated length of string
-		   NOT by searching for null-termination */
-		if(!prs_string2(True, "buffer     ", ps, depth, str2))
-			return False;
-
-	} else {
-
-		prs_debug(ps, depth, desc, "smb_io_string2 - NULL");
-		depth++;
-		memset((char *)str2, '\0', sizeof(*str2));
-
-	}
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -925,37 +667,8 @@ void init_unistr2(UNISTR2 *str, const ch
 void init_unistr2_from_unistr (UNISTR2 *to, UNISTR *from)
 {
 
-	uint32 i;
-
-	/* the destination UNISTR2 should never be NULL.
-	   if it is it is a programming error */
-
-	/* if the source UNISTR is NULL, then zero out
-	   the destination string and return */
-	ZERO_STRUCTP (to);
-	if ((from == NULL) || (from->buffer == NULL))
-		return;
-
-	/* get the length; UNISTR must be NULL terminated */
-	i = 0;
-	while ((from->buffer)[i]!='\0')
-		i++;
-	i++;	/* one more to catch the terminating NULL */
-		/* is this necessary -- jerry?  I need to think */
-
-	/* set up string lengths; uni_max_len is set to i+1
-           because we need to account for the final NULL termination */
-	to->uni_max_len = i;
-	to->undoc       = 0;
-	to->uni_str_len = i;
-
-	/* allocate the space and copy the string buffer */
-	to->buffer = (uint16 *)talloc_zero(get_talloc_ctx(), sizeof(uint16)*(to->uni_str_len));
-	if (to->buffer == NULL)
-		smb_panic("init_unistr2_from_unistr: malloc fail\n");
-	memcpy(to->buffer, from->buffer, to->uni_max_len*sizeof(uint16));
-		
-	return;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 
@@ -1008,9 +721,8 @@ BOOL smb_io_unistr2(const char *desc, UN
 
 void init_dom_rid2(DOM_RID2 *rid2, uint32 rid, uint8 type, uint32 idx)
 {
-	rid2->type    = type;
-	rid2->rid     = rid;
-	rid2->rid_idx = idx;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1019,25 +731,8 @@ void init_dom_rid2(DOM_RID2 *rid2, uint3
 
 BOOL smb_io_dom_rid2(const char *desc, DOM_RID2 *rid2, prs_struct *ps, int depth)
 {
-	if (rid2 == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "smb_io_dom_rid2");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-   
-	if(!prs_uint8("type   ", ps, depth, &rid2->type))
-		return False;
-	if(!prs_align(ps))
-		return False;
-	if(!prs_uint32("rid    ", ps, depth, &rid2->rid))
-		return False;
-	if(!prs_uint32("rid_idx", ps, depth, &rid2->rid_idx))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1046,11 +741,8 @@ creates a DOM_RID3 structure.
 
 void init_dom_rid3(DOM_RID3 *rid3, uint32 rid, uint8 type)
 {
-    rid3->rid      = rid;
-    rid3->type1    = type;
-    rid3->ptr_type = 0x1; /* non-zero, basically. */
-    rid3->type2    = 0x1;
-    rid3->unk      = type;
+DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1059,27 +751,8 @@ reads or writes a DOM_RID3 structure.
 
 BOOL smb_io_dom_rid3(const char *desc, DOM_RID3 *rid3, prs_struct *ps, int depth)
 {
-	if (rid3 == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "smb_io_dom_rid3");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_uint32("rid     ", ps, depth, &rid3->rid))
-		return False;
-	if(!prs_uint32("type1   ", ps, depth, &rid3->type1))
-		return False;
-	if(!prs_uint32("ptr_type", ps, depth, &rid3->ptr_type))
-		return False;
-	if(!prs_uint32("type2   ", ps, depth, &rid3->type2))
-		return False;
-	if(!prs_uint32("unk     ", ps, depth, &rid3->unk))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1088,9 +761,8 @@ BOOL smb_io_dom_rid3(const char *desc, D
 
 void init_dom_rid4(DOM_RID4 *rid4, uint16 unknown, uint16 attr, uint32 rid)
 {
-    rid4->unknown = unknown;
-    rid4->attr    = attr;
-    rid4->rid     = rid;
+DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1099,21 +771,8 @@ void init_dom_rid4(DOM_RID4 *rid4, uint1
 
 static void init_clnt_srv(DOM_CLNT_SRV *log, const char *logon_srv, const char *comp_name)
 {
-	DEBUG(5,("init_clnt_srv: %d\n", __LINE__));
-
-	if (logon_srv != NULL) {
-		log->undoc_buffer = 1;
-		init_unistr2(&log->uni_logon_srv, logon_srv, strlen(logon_srv)+1);
-	} else {
-		log->undoc_buffer = 0;
-	}
-
-	if (comp_name != NULL) {
-		log->undoc_buffer2 = 1;
-		init_unistr2(&log->uni_comp_name, comp_name, strlen(comp_name)+1);
-	} else {
-		log->undoc_buffer2 = 0;
-	}
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1122,35 +781,8 @@ static void init_clnt_srv(DOM_CLNT_SRV *
 
 static BOOL smb_io_clnt_srv(const char *desc, DOM_CLNT_SRV *log, prs_struct *ps, int depth)
 {
-	if (log == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "smb_io_clnt_srv");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-	
-	if(!prs_uint32("undoc_buffer ", ps, depth, &log->undoc_buffer))
-		return False;
-
-	if (log->undoc_buffer != 0) {
-		if(!smb_io_unistr2("unistr2", &log->uni_logon_srv, log->undoc_buffer, ps, depth))
-			return False;
-	}
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_uint32("undoc_buffer2", ps, depth, &log->undoc_buffer2))
-		return False;
-
-	if (log->undoc_buffer2 != 0) {
-		if(!smb_io_unistr2("unistr2", &log->uni_comp_name, log->undoc_buffer2, ps, depth))
-			return False;
-	}
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1160,16 +792,8 @@ static BOOL smb_io_clnt_srv(const char *
 void init_log_info(DOM_LOG_INFO *log, const char *logon_srv, const char *acct_name,
 		uint16 sec_chan, const char *comp_name)
 {
-	DEBUG(5,("make_log_info %d\n", __LINE__));
-
-	log->undoc_buffer = 1;
-
-	init_unistr2(&log->uni_logon_srv, logon_srv, strlen(logon_srv)+1);
-	init_unistr2(&log->uni_acct_name, acct_name, strlen(acct_name)+1);
-
-	log->sec_chan = sec_chan;
-
-	init_unistr2(&log->uni_comp_name, comp_name, strlen(comp_name)+1);
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1178,30 +802,8 @@ void init_log_info(DOM_LOG_INFO *log, co
 
 BOOL smb_io_log_info(const char *desc, DOM_LOG_INFO *log, prs_struct *ps, int depth)
 {
-	if (log == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "smb_io_log_info");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-	
-	if(!prs_uint32("undoc_buffer", ps, depth, &log->undoc_buffer))
-		return False;
-
-	if(!smb_io_unistr2("unistr2", &log->uni_logon_srv, True, ps, depth))
-		return False;
-	if(!smb_io_unistr2("unistr2", &log->uni_acct_name, True, ps, depth))
-		return False;
-
-	if(!prs_uint16("sec_chan", ps, depth, &log->sec_chan))
-		return False;
-
-	if(!smb_io_unistr2("unistr2", &log->uni_comp_name, True, ps, depth))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1210,19 +812,8 @@ BOOL smb_io_log_info(const char *desc, D
 
 BOOL smb_io_chal(const char *desc, DOM_CHAL *chal, prs_struct *ps, int depth)
 {
-	if (chal == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "smb_io_chal");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-	
-	if(!prs_uint8s (False, "data", ps, depth, chal->data, 8))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1231,22 +822,8 @@ BOOL smb_io_chal(const char *desc, DOM_C
 
 BOOL smb_io_cred(const char *desc,  DOM_CRED *cred, prs_struct *ps, int depth)
 {
-	if (cred == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "smb_io_cred");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!smb_io_chal ("", &cred->challenge, ps, depth))
-		return False;
-
-	if(!smb_io_utime("", &cred->timestamp, ps, depth))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1257,16 +834,8 @@ void init_clnt_info2(DOM_CLNT_INFO2 *cln
 				const char *logon_srv, const char *comp_name,
 				DOM_CRED *clnt_cred)
 {
-	DEBUG(5,("make_clnt_info: %d\n", __LINE__));
-
-	init_clnt_srv(&(clnt->login), logon_srv, comp_name);
-
-	if (clnt_cred != NULL) {
-		clnt->ptr_cred = 1;
-		memcpy(&(clnt->cred), clnt_cred, sizeof(clnt->cred));
-	} else {
-		clnt->ptr_cred = 0;
-	}
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1275,27 +844,8 @@ void init_clnt_info2(DOM_CLNT_INFO2 *cln
 
 BOOL smb_io_clnt_info2(const char *desc, DOM_CLNT_INFO2 *clnt, prs_struct *ps, int depth)
 {
-	if (clnt == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "smb_io_clnt_info2");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-	
-	if(!smb_io_clnt_srv("", &clnt->login, ps, depth))
-		return False;
-
-	if(!prs_align(ps))
-		return False;
-	
-	if(!prs_uint32("ptr_cred", ps, depth, &clnt->ptr_cred))
-		return False;
-	if(!smb_io_cred("", &clnt->cred, ps, depth))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1307,10 +857,8 @@ void init_clnt_info(DOM_CLNT_INFO *clnt,
 		uint16 sec_chan, const char *comp_name,
 				DOM_CRED *cred)
 {
-	DEBUG(5,("make_clnt_info\n"));
-
-	init_log_info(&clnt->login, logon_srv, acct_name, sec_chan, comp_name);
-	memcpy(&clnt->cred, cred, sizeof(clnt->cred));
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1319,21 +867,8 @@ void init_clnt_info(DOM_CLNT_INFO *clnt,
 
 BOOL smb_io_clnt_info(const char *desc,  DOM_CLNT_INFO *clnt, prs_struct *ps, int depth)
 {
-	if (clnt == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "smb_io_clnt_info");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-	
-	if(!smb_io_log_info("", &clnt->login, ps, depth))
-		return False;
-	if(!smb_io_cred("", &clnt->cred, ps, depth))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1342,10 +877,8 @@ BOOL smb_io_clnt_info(const char *desc,
 
 void init_logon_id(DOM_LOGON_ID *log, uint32 log_id_low, uint32 log_id_high)
 {
-	DEBUG(5,("make_logon_id: %d\n", __LINE__));
-
-	log->low  = log_id_low;
-	log->high = log_id_high;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1354,21 +887,8 @@ void init_logon_id(DOM_LOGON_ID *log, ui
 
 BOOL smb_io_logon_id(const char *desc, DOM_LOGON_ID *log, prs_struct *ps, int depth)
 {
-	if (log == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "smb_io_logon_id");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-	
-	if(!prs_uint32("low ", ps, depth, &log->low ))
-		return False;
-	if(!prs_uint32("high", ps, depth, &log->high))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1377,12 +897,8 @@ BOOL smb_io_logon_id(const char *desc, D
 
 void init_owf_info(OWF_INFO *hash, uint8 data[16])
 {
-	DEBUG(5,("init_owf_info: %d\n", __LINE__));
-	
-	if (data != NULL)
-		memcpy(hash->data, data, sizeof(hash->data));
-	else
-		memset((char *)hash->data, '\0', sizeof(hash->data));
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1391,19 +907,8 @@ void init_owf_info(OWF_INFO *hash, uint8
 
 BOOL smb_io_owf_info(const char *desc, OWF_INFO *hash, prs_struct *ps, int depth)
 {
-	if (hash == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "smb_io_owf_info");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-	
-	if(!prs_uint8s (False, "data", ps, depth, hash->data, 16))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1412,21 +917,8 @@ BOOL smb_io_owf_info(const char *desc, O
 
 BOOL smb_io_gid(const char *desc,  DOM_GID *gid, prs_struct *ps, int depth)
 {
-	if (gid == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "smb_io_gid");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-	
-	if(!prs_uint32("g_rid", ps, depth, &gid->g_rid))
-		return False;
-	if(!prs_uint32("attr ", ps, depth, &gid->attr))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1467,29 +959,8 @@ BOOL smb_io_pol_hnd(const char *desc, PO
 
 void init_unistr3(UNISTR3 *str, const char *buf)
 {
-	size_t len;
-
-	if (buf == NULL) {
-		str->uni_str_len=0;
-		str->str.buffer = NULL;
-		return;
-	}
-
-	len = strlen(buf) + 1;
-
-	str->uni_str_len=len;
-
-	if (len < MAX_UNISTRLEN)
-		len = MAX_UNISTRLEN;
-
-	len *= sizeof(uint16);
-
-	str->str.buffer = (uint16 *)talloc_zero(get_talloc_ctx(), len);
-	if (str->str.buffer == NULL)
-		smb_panic("init_unistr3: malloc fail\n");
-
-	/* store the string (null-terminated copy) */
-	dos_struni2((char *)str->str.buffer, buf, len);
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1498,25 +969,8 @@ void init_unistr3(UNISTR3 *str, const ch
 
 BOOL smb_io_unistr3(const char *desc, UNISTR3 *name, prs_struct *ps, int depth)
 {
-	if (name == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "smb_io_unistr3");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-	
-	if(!prs_uint32("uni_str_len", ps, depth, &name->uni_str_len))
-		return False;
-
-	/* don't know if len is specified by uni_str_len member... */
-	/* assume unicode string is unicode-null-terminated, instead */
-
-	if(!prs_unistr3(True, "unistr", name, ps, depth))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 
@@ -1525,8 +979,8 @@ BOOL smb_io_unistr3(const char *desc, UN
  ********************************************************************/
 BOOL prs_uint64(const char *name, prs_struct *ps, int depth, UINT64_S *data64)
 {
-	return prs_uint32(name, ps, depth+1, &data64->low) &&
-		prs_uint32(name, ps, depth+1, &data64->high);
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1534,15 +988,8 @@ reads or writes a BUFHDR2 structure.
 ********************************************************************/
 BOOL smb_io_bufhdr2(const char *desc, BUFHDR2 *hdr, prs_struct *ps, int depth)
 {
-	prs_debug(ps, depth, desc, "smb_io_bufhdr2");
-	depth++;
-
-	prs_align(ps);
-	prs_uint32("info_level", ps, depth, &(hdr->info_level));
-	prs_uint32("length    ", ps, depth, &(hdr->length    ));
-	prs_uint32("buffer    ", ps, depth, &(hdr->buffer    ));
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1550,20 +997,8 @@ reads or writes a BUFFER4 structure.
 ********************************************************************/
 BOOL smb_io_buffer4(const char *desc, BUFFER4 *buf4, uint32 buffer, prs_struct *ps, int depth)
 {
-	prs_debug(ps, depth, desc, "smb_io_buffer4");
-	depth++;
-
-	prs_align(ps);
-	prs_uint32("buf_len", ps, depth, &(buf4->buf_len));
-
-	if (buf4->buf_len > MAX_BUFFERLEN)
-	{
-		buf4->buf_len = MAX_BUFFERLEN;
-	}
-
-	prs_uint8s(True, "buffer", ps, depth, buf4->buffer, buf4->buf_len);
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1572,15 +1007,8 @@ creates a UNIHDR structure.
 
 BOOL make_uni_hdr(UNIHDR *hdr, int len)
 {
-	if (hdr == NULL)
-	{
-		return False;
-	}
-	hdr->uni_str_len = 2 * len;
-	hdr->uni_max_len = 2 * len;
-	hdr->buffer      = len != 0 ? 1 : 0;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1588,9 +1016,6 @@ creates a BUFHDR2 structure.
 ********************************************************************/
 BOOL make_bufhdr2(BUFHDR2 *hdr, uint32 info_level, uint32 length, uint32 buffer)
 {
-	hdr->info_level = info_level;
-	hdr->length     = length;
-	hdr->buffer     = buffer;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
diff -pruwN samba-2.2.12/source/rpc_parse/parse_net.c samba-2.2.12-livebox/rpc_parse/parse_net.c
--- samba-2.2.12/source/rpc_parse/parse_net.c	2004-08-12 20:24:27.000000000 +0200
+++ samba-2.2.12-livebox/rpc_parse/parse_net.c	2010-03-31 11:45:59.000000000 +0200
@@ -29,19 +29,8 @@
 
 static BOOL net_io_neg_flags(const char *desc, NEG_FLAGS *neg, prs_struct *ps, int depth)
 {
-	if (neg == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "net_io_neg_flags");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-	
-	if(!prs_uint32("neg_flags", ps, depth, &neg->neg_flags))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -50,13 +39,8 @@ static BOOL net_io_neg_flags(const char
 
 static void init_netinfo_3(NETLOGON_INFO_3 *info, uint32 flags, uint32 logon_attempts)
 {
-	info->flags          = flags;
-	info->logon_attempts = logon_attempts;
-	info->reserved_1     = 0x0;
-	info->reserved_2     = 0x0;
-	info->reserved_3     = 0x0;
-	info->reserved_4     = 0x0;
-	info->reserved_5     = 0x0;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -65,31 +49,8 @@ static void init_netinfo_3(NETLOGON_INFO
 
 static BOOL net_io_netinfo_3(const char *desc,  NETLOGON_INFO_3 *info, prs_struct *ps, int depth)
 {
-	if (info == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "net_io_netinfo_3");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_uint32("flags         ", ps, depth, &info->flags))
-		return False;
-	if(!prs_uint32("logon_attempts", ps, depth, &info->logon_attempts))
-		return False;
-	if(!prs_uint32("reserved_1    ", ps, depth, &info->reserved_1))
-		return False;
-	if(!prs_uint32("reserved_2    ", ps, depth, &info->reserved_2))
-		return False;
-	if(!prs_uint32("reserved_3    ", ps, depth, &info->reserved_3))
-		return False;
-	if(!prs_uint32("reserved_4    ", ps, depth, &info->reserved_4))
-		return False;
-	if(!prs_uint32("reserved_5    ", ps, depth, &info->reserved_5))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 
@@ -99,8 +60,8 @@ static BOOL net_io_netinfo_3(const char
 
 static void init_netinfo_1(NETLOGON_INFO_1 *info, uint32 flags, uint32 pdc_status)
 {
-	info->flags      = flags;
-	info->pdc_status = pdc_status;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -109,21 +70,8 @@ static void init_netinfo_1(NETLOGON_INFO
 
 static BOOL net_io_netinfo_1(const char *desc, NETLOGON_INFO_1 *info, prs_struct *ps, int depth)
 {
-	if (info == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "net_io_netinfo_1");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-	
-	if(!prs_uint32("flags     ", ps, depth, &info->flags))
-		return False;
-	if(!prs_uint32("pdc_status", ps, depth, &info->pdc_status))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -133,16 +81,8 @@ static BOOL net_io_netinfo_1(const char
 static void init_netinfo_2(NETLOGON_INFO_2 *info, uint32 flags, uint32 pdc_status,
 				uint32 tc_status, const char *trusted_dc_name)
 {
-	int len_dc_name = strlen(trusted_dc_name);
-	info->flags      = flags;
-	info->pdc_status = pdc_status;
-	info->ptr_trusted_dc_name = 1;
-	info->tc_status  = tc_status;
-
-	if (trusted_dc_name != NULL)
-		init_unistr2(&info->uni_trusted_dc_name, trusted_dc_name, len_dc_name+1);
-	else
-		init_unistr2(&info->uni_trusted_dc_name, "", 1);
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -151,33 +91,8 @@ static void init_netinfo_2(NETLOGON_INFO
 
 static BOOL net_io_netinfo_2(const char *desc, NETLOGON_INFO_2 *info, prs_struct *ps, int depth)
 {
-	if (info == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "net_io_netinfo_2");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-	
-	if(!prs_uint32("flags              ", ps, depth, &info->flags))
-		return False;
-	if(!prs_uint32("pdc_status         ", ps, depth, &info->pdc_status))
-		return False;
-	if(!prs_uint32("ptr_trusted_dc_name", ps, depth, &info->ptr_trusted_dc_name))
-		return False;
-	if(!prs_uint32("tc_status          ", ps, depth, &info->tc_status))
-		return False;
-
-	if (info->ptr_trusted_dc_name != 0) {
-		if(!smb_io_unistr2("unistr2", &info->uni_trusted_dc_name, info->ptr_trusted_dc_name, ps, depth))
-			return False;
-	}
-
-	if(!prs_align(ps))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -186,32 +101,8 @@ static BOOL net_io_netinfo_2(const char
 
 BOOL net_io_q_logon_ctrl2(const char *desc, NET_Q_LOGON_CTRL2 *q_l, prs_struct *ps, int depth)
 {
-	if (q_l == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "net_io_q_logon_ctrl2");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_uint32("ptr          ", ps, depth, &q_l->ptr))
-		return False;
-
-	if(!smb_io_unistr2 ("", &q_l->uni_server_name, q_l->ptr, ps, depth))
-		return False;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_uint32("function_code", ps, depth, &q_l->function_code))
-		return False;
-	if(!prs_uint32("query_level  ", ps, depth, &q_l->query_level))
-		return False;
-	if(!prs_uint32("switch_value ", ps, depth, &q_l->switch_value))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -221,13 +112,8 @@ BOOL net_io_q_logon_ctrl2(const char *de
 void init_net_q_logon_ctrl2(NET_Q_LOGON_CTRL2 *q_l, const char *srv_name,
 			    uint32 query_level)
 {
-	DEBUG(5,("init_q_logon_ctrl2\n"));
-
-	q_l->function_code = 0x01;
-	q_l->query_level = query_level;
-	q_l->switch_value  = 0x01;
-
-	init_unistr2(&q_l->uni_server_name, srv_name, strlen(srv_name) + 1);
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -239,36 +125,8 @@ void init_net_r_logon_ctrl2(NET_R_LOGON_
 			    uint32 logon_attempts, uint32 tc_status, 
 			    const char *trusted_domain_name)
 {
-	DEBUG(5,("init_r_logon_ctrl2\n"));
-
-	r_l->switch_value  = query_level; /* should only be 0x1 */
-
-	switch (query_level) {
-	case 1:
-		r_l->ptr = 1; /* undocumented pointer */
-		init_netinfo_1(&r_l->logon.info1, flags, pdc_status);	
-		r_l->status = NT_STATUS_OK;
-		break;
-	case 2:
-		r_l->ptr = 1; /* undocumented pointer */
-		init_netinfo_2(&r_l->logon.info2, flags, pdc_status,
-		               tc_status, trusted_domain_name);	
-		r_l->status = NT_STATUS_OK;
-		break;
-	case 3:
-		r_l->ptr = 1; /* undocumented pointer */
-		init_netinfo_3(&r_l->logon.info3, flags, logon_attempts);	
-		r_l->status = NT_STATUS_OK;
-		break;
-	default:
-		DEBUG(2,("init_r_logon_ctrl2: unsupported switch value %d\n",
-			r_l->switch_value));
-		r_l->ptr = 0; /* undocumented pointer */
-
-		/* take a guess at an error code... */
-		r_l->status = NT_STATUS_INVALID_INFO_CLASS;
-		break;
-	}
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -277,42 +135,8 @@ void init_net_r_logon_ctrl2(NET_R_LOGON_
 
 BOOL net_io_r_logon_ctrl2(const char *desc, NET_R_LOGON_CTRL2 *r_l, prs_struct *ps, int depth)
 {
-	if (r_l == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "net_io_r_logon_ctrl2");
-	depth++;
-
-	if(!prs_uint32("switch_value ", ps, depth, &r_l->switch_value))
-		return False;
-	if(!prs_uint32("ptr          ", ps, depth, &r_l->ptr))
-		return False;
-
-	if (r_l->ptr != 0) {
-		switch (r_l->switch_value) {
-		case 1:
-			if(!net_io_netinfo_1("", &r_l->logon.info1, ps, depth))
-				return False;
-			break;
-		case 2:
-			if(!net_io_netinfo_2("", &r_l->logon.info2, ps, depth))
-				return False;
-			break;
-		case 3:
-			if(!net_io_netinfo_3("", &r_l->logon.info3, ps, depth))
-				return False;
-			break;
-		default:
-			DEBUG(2,("net_io_r_logon_ctrl2: unsupported switch value %d\n",
-				r_l->switch_value));
-			break;
-		}
-	}
-
-	if(!prs_ntstatus("status       ", ps, depth, &r_l->status))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -322,27 +146,8 @@ BOOL net_io_r_logon_ctrl2(const char *de
 BOOL net_io_q_logon_ctrl(const char *desc, NET_Q_LOGON_CTRL *q_l, prs_struct *ps, 
 			 int depth)
 {
-	prs_debug(ps, depth, desc, "net_io_q_logon_ctrl");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_uint32("ptr          ", ps, depth, &q_l->ptr))
-		return False;
-
-	if(!smb_io_unistr2 ("", &q_l->uni_server_name, q_l->ptr, ps, depth))
-		return False;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_uint32("function_code", ps, depth, &q_l->function_code))
-		return False;
-	if(!prs_uint32("query_level  ", ps, depth, &q_l->query_level))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -352,12 +157,8 @@ BOOL net_io_q_logon_ctrl(const char *des
 void init_net_q_logon_ctrl(NET_Q_LOGON_CTRL *q_l, const char *srv_name,
 			   uint32 query_level)
 {
-	DEBUG(5,("init_q_logon_ctrl\n"));
-
-	q_l->function_code = 0x01; /* ??? */
-	q_l->query_level = query_level;
-
-	init_unistr2(&q_l->uni_server_name, srv_name, strlen(srv_name) + 1);
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -367,25 +168,8 @@ void init_net_q_logon_ctrl(NET_Q_LOGON_C
 void init_net_r_logon_ctrl(NET_R_LOGON_CTRL *r_l, uint32 query_level,
 			   uint32 flags, uint32 pdc_status)
 {
-	DEBUG(5,("init_r_logon_ctrl\n"));
-
-	r_l->switch_value  = query_level; /* should only be 0x1 */
-
-	switch (query_level) {
-	case 1:
-		r_l->ptr = 1; /* undocumented pointer */
-		init_netinfo_1(&r_l->logon.info1, flags, pdc_status);	
-		r_l->status = NT_STATUS_OK;
-		break;
-	default:
-		DEBUG(2,("init_r_logon_ctrl: unsupported switch value %d\n",
-			r_l->switch_value));
-		r_l->ptr = 0; /* undocumented pointer */
-
-		/* take a guess at an error code... */
-		r_l->status = NT_STATUS_INVALID_INFO_CLASS;
-		break;
-	}
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -395,31 +179,8 @@ void init_net_r_logon_ctrl(NET_R_LOGON_C
 BOOL net_io_r_logon_ctrl(const char *desc, NET_R_LOGON_CTRL *r_l, prs_struct *ps, 
 			 int depth)
 {
-	prs_debug(ps, depth, desc, "net_io_r_logon_ctrl");
-	depth++;
-
-	if(!prs_uint32("switch_value ", ps, depth, &r_l->switch_value))
-		return False;
-	if(!prs_uint32("ptr          ", ps, depth, &r_l->ptr))
-		return False;
-
-	if (r_l->ptr != 0) {
-		switch (r_l->switch_value) {
-		case 1:
-			if(!net_io_netinfo_1("", &r_l->logon.info1, ps, depth))
-				return False;
-			break;
-		default:
-			DEBUG(2,("net_io_r_logon_ctrl: unsupported switch value %d\n",
-				r_l->switch_value));
-			break;
-		}
-	}
-
-	if(!prs_ntstatus("status       ", ps, depth, &r_l->status))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -429,27 +190,8 @@ BOOL net_io_r_logon_ctrl(const char *des
 void init_r_trust_dom(NET_R_TRUST_DOM_LIST *r_t,
 			uint32 num_doms, const char *dom_name)
 {
-	int i = 0;
-
-	DEBUG(5,("init_r_trust_dom\n"));
-
-	for (i = 0; i < MAX_TRUST_DOMS; i++) {
-		r_t->uni_trust_dom_name[i].uni_str_len = 0;
-		r_t->uni_trust_dom_name[i].uni_max_len = 0;
-	}
-	if (num_doms > MAX_TRUST_DOMS)
-		num_doms = MAX_TRUST_DOMS;
-
-	for (i = 0; i < num_doms; i++) {
-		fstring domain_name;
-		fstrcpy(domain_name, dom_name);
-		strupper(domain_name);
-		init_unistr2(&r_t->uni_trust_dom_name[i], domain_name, strlen(domain_name)+1);
-		/* the use of UNISTR2 here is non-standard. */
-		r_t->uni_trust_dom_name[i].undoc = 0x1;
-	}
-	
-	r_t->status = NT_STATUS_OK;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -458,49 +200,8 @@ void init_r_trust_dom(NET_R_TRUST_DOM_LI
 
 BOOL net_io_r_trust_dom(const char *desc, NET_R_TRUST_DOM_LIST *r_t, prs_struct *ps, int depth)
 {
-	uint32 value;
-
-	if (r_t == NULL)
-		 return False;
-
-	prs_debug(ps, depth, desc, "net_io_r_trust_dom");
-	depth++;
-
-	/* temporary code to give a valid response */
-	value=2;
-	if(!prs_uint32("status", ps, depth, &value))
-		 return False;
-
-	value=1;
-	if(!prs_uint32("status", ps, depth, &value))
-		 return False;
-	value=2;
-	if(!prs_uint32("status", ps, depth, &value))
-		 return False;
-
-	value=0;
-	if(!prs_uint32("status", ps, depth, &value))
-		 return False;
-
-	value=0;
-	if(!prs_uint32("status", ps, depth, &value))
-		 return False;
-
-/* old non working code */
-#if 0
-	int i;
-
-	for (i = 0; i < MAX_TRUST_DOMS; i++) {
-		if (r_t->uni_trust_dom_name[i].uni_str_len == 0)
-			break;
-		if(!smb_io_unistr2("", &r_t->uni_trust_dom_name[i], True, ps, depth))
-			 return False;
-	}
-
-	if(!prs_ntstatus("status", ps, depth, &r_t->status))
-		 return False;
-#endif
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 
@@ -510,18 +211,8 @@ BOOL net_io_r_trust_dom(const char *desc
 
 BOOL net_io_q_trust_dom(const char *desc, NET_Q_TRUST_DOM_LIST *q_l, prs_struct *ps, int depth)
 {
-	if (q_l == NULL)
-		 return False;
-
-	prs_debug(ps, depth, desc, "net_io_q_trust_dom");
-	depth++;
-
-	if(!prs_uint32("ptr          ", ps, depth, &q_l->ptr))
-		 return False;
-	if(!smb_io_unistr2 ("", &q_l->uni_server_name, q_l->ptr, ps, depth))
-		 return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -532,16 +223,8 @@ void init_q_req_chal(NET_Q_REQ_CHAL *q_c
 				const char *logon_srv, const char *logon_clnt,
 				DOM_CHAL *clnt_chal)
 {
-	DEBUG(5,("init_q_req_chal: %d\n", __LINE__));
-
-	q_c->undoc_buffer = 1; /* don't know what this buffer is */
-
-	init_unistr2(&q_c->uni_logon_srv, logon_srv , strlen(logon_srv )+1);
-	init_unistr2(&q_c->uni_logon_clnt, logon_clnt, strlen(logon_clnt)+1);
-
-	memcpy(q_c->clnt_chal.data, clnt_chal->data, sizeof(clnt_chal->data));
-
-	DEBUG(5,("init_q_req_chal: %d\n", __LINE__));
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -550,36 +233,8 @@ void init_q_req_chal(NET_Q_REQ_CHAL *q_c
 
 BOOL net_io_q_req_chal(const char *desc,  NET_Q_REQ_CHAL *q_c, prs_struct *ps, int depth)
 {
-	int old_align;
-
-	if (q_c == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "net_io_q_req_chal");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-    
-	if(!prs_uint32("undoc_buffer", ps, depth, &q_c->undoc_buffer))
-		return False;
-
-	if(!smb_io_unistr2("", &q_c->uni_logon_srv, True, ps, depth)) /* logon server unicode string */
-		return False;
-	if(!smb_io_unistr2("", &q_c->uni_logon_clnt, True, ps, depth)) /* logon client unicode string */
-		return False;
-
-	old_align = ps->align;
-	ps->align = 0;
-	/* client challenge is _not_ aligned after the unicode strings */
-	if(!smb_io_chal("", &q_c->clnt_chal, ps, depth)) {
-		/* client challenge */
-		ps->align = old_align;
-		return False;
-	}
-	ps->align = old_align;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -588,22 +243,8 @@ BOOL net_io_q_req_chal(const char *desc,
 
 BOOL net_io_r_req_chal(const char *desc, NET_R_REQ_CHAL *r_c, prs_struct *ps, int depth)
 {
-	if (r_c == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "net_io_r_req_chal");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-    
-	if(!smb_io_chal("", &r_c->srv_chal, ps, depth)) /* server challenge */
-		return False;
-
-	if(!prs_ntstatus("status", ps, depth, &r_c->status))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 
@@ -613,29 +254,8 @@ BOOL net_io_r_req_chal(const char *desc,
 
 BOOL net_io_q_auth(const char *desc, NET_Q_AUTH *q_a, prs_struct *ps, int depth)
 {
-	int old_align;
-	if (q_a == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "net_io_q_auth");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-    
-	if(!smb_io_log_info ("", &q_a->clnt_id, ps, depth)) /* client identification info */
-		return False;
-	/* client challenge is _not_ aligned */
-	old_align = ps->align;
-	ps->align = 0;
-	if(!smb_io_chal("", &q_a->clnt_chal, ps, depth)) {
-		/* client-calculated credentials */
-		ps->align = old_align;
-		return False;
-	}
-	ps->align = old_align;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -644,22 +264,8 @@ BOOL net_io_q_auth(const char *desc, NET
 
 BOOL net_io_r_auth(const char *desc, NET_R_AUTH *r_a, prs_struct *ps, int depth)
 {
-	if (r_a == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "net_io_r_auth");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-    
-	if(!smb_io_chal("", &r_a->srv_chal, ps, depth)) /* server challenge */
-		return False;
-
-	if(!prs_ntstatus("status", ps, depth, &r_a->status))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -670,13 +276,8 @@ void init_q_auth_2(NET_Q_AUTH_2 *q_a,
 		const char *logon_srv, const char *acct_name, uint16 sec_chan, const char *comp_name,
 		DOM_CHAL *clnt_chal, uint32 clnt_flgs)
 {
-	DEBUG(5,("init_q_auth_2: %d\n", __LINE__));
-
-	init_log_info(&q_a->clnt_id, logon_srv, acct_name, sec_chan, comp_name);
-	memcpy(q_a->clnt_chal.data, clnt_chal->data, sizeof(clnt_chal->data));
-	q_a->clnt_flgs.neg_flags = clnt_flgs;
-
-	DEBUG(5,("init_q_auth_2: %d\n", __LINE__));
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -685,31 +286,8 @@ void init_q_auth_2(NET_Q_AUTH_2 *q_a,
 
 BOOL net_io_q_auth_2(const char *desc, NET_Q_AUTH_2 *q_a, prs_struct *ps, int depth)
 {
-	int old_align;
-	if (q_a == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "net_io_q_auth_2");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-    
-	if(!smb_io_log_info ("", &q_a->clnt_id, ps, depth)) /* client identification info */
-		return False;
-	/* client challenge is _not_ aligned */
-	old_align = ps->align;
-	ps->align = 0;
-	if(!smb_io_chal("", &q_a->clnt_chal, ps, depth)) {
-		/* client-calculated credentials */
-		ps->align = old_align;
-		return False;
-	}
-	ps->align = old_align;
-	if(!net_io_neg_flags("", &q_a->clnt_flgs, ps, depth))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -718,24 +296,8 @@ BOOL net_io_q_auth_2(const char *desc, N
 
 BOOL net_io_r_auth_2(const char *desc, NET_R_AUTH_2 *r_a, prs_struct *ps, int depth)
 {
-	if (r_a == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "net_io_r_auth_2");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-    
-	if(!smb_io_chal("", &r_a->srv_chal, ps, depth)) /* server challenge */
-		return False;
-	if(!net_io_neg_flags("", &r_a->srv_flgs, ps, depth))
-		return False;
-
-	if(!prs_ntstatus("status", ps, depth, &r_a->status))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 
@@ -746,11 +308,8 @@ BOOL net_io_r_auth_2(const char *desc, N
 void init_q_srv_pwset(NET_Q_SRV_PWSET *q_s, const char *logon_srv, const char *acct_name, 
                 uint16 sec_chan, const char *comp_name, DOM_CRED *cred, char nt_cypher[16])
 {
-	DEBUG(5,("init_q_srv_pwset\n"));
-
-	init_clnt_info(&q_s->clnt_id, logon_srv, acct_name, sec_chan, comp_name, cred);
-
-	memcpy(q_s->pwd, nt_cypher, sizeof(q_s->pwd)); 
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -759,21 +318,8 @@ void init_q_srv_pwset(NET_Q_SRV_PWSET *q
 
 BOOL net_io_q_srv_pwset(const char *desc, NET_Q_SRV_PWSET *q_s, prs_struct *ps, int depth)
 {
-	if (q_s == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "net_io_q_srv_pwset");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-    
-	if(!smb_io_clnt_info("", &q_s->clnt_id, ps, depth)) /* client identification/authentication info */
-		return False;
-	if(!prs_uint8s (False, "pwd", ps, depth, q_s->pwd, 16)) /* new password - undocumented */
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -782,22 +328,8 @@ BOOL net_io_q_srv_pwset(const char *desc
 
 BOOL net_io_r_srv_pwset(const char *desc, NET_R_SRV_PWSET *r_s, prs_struct *ps, int depth)
 {
-	if (r_s == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "net_io_r_srv_pwset");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-    
-	if(!smb_io_cred("", &r_s->srv_cred, ps, depth)) /* server challenge */
-		return False;
-
-	if(!prs_ntstatus("status", ps, depth, &r_s->status))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*************************************************************************
@@ -806,39 +338,8 @@ BOOL net_io_r_srv_pwset(const char *desc
 
 static int init_dom_sid2s(TALLOC_CTX *ctx, const char *sids_str, DOM_SID2 **ppsids)
 {
-	const char *ptr;
-	pstring s2;
-	int count = 0;
-
-	DEBUG(4,("init_dom_sid2s: %s\n", sids_str ? sids_str:""));
-
-	*ppsids = NULL;
-
-	if(sids_str) {
-		int number;
-		DOM_SID2 *sids;
-
-		/* Count the number of SIDs. */
-		for (count = 0, ptr = sids_str; 
-	   	  next_token(&ptr, s2, NULL, sizeof(s2)); count++)
-			;
-
-		/* Now allocate space for them. */
-		*ppsids = (DOM_SID2 *)talloc_zero(ctx, count * sizeof(DOM_SID2));
-		if (*ppsids == NULL)
-			return 0;
-
-		sids = *ppsids;
-
-		for (number = 0, ptr = sids_str; 
-	   	  next_token(&ptr, s2, NULL, sizeof(s2)); number++) {
-			DOM_SID tmpsid;
-			string_to_sid(&tmpsid, s2);
-			init_dom_sid2(&sids[number], &tmpsid);
-		}
-	}
-
-	return count;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -851,61 +352,8 @@ void init_id_info1(NET_ID_INFO_1 *id, co
 				const char *sess_key,
 				unsigned char lm_cypher[16], unsigned char nt_cypher[16])
 {
-	int len_domain_name = strlen(domain_name);
-	int len_user_name   = strlen(user_name  );
-	int len_wksta_name  = strlen(wksta_name );
-
-	unsigned char lm_owf[16];
-	unsigned char nt_owf[16];
-
-	DEBUG(5,("init_id_info1: %d\n", __LINE__));
-
-	id->ptr_id_info1 = 1;
-
-	init_uni_hdr(&id->hdr_domain_name, len_domain_name);
-
-	id->param_ctrl = param_ctrl;
-	init_logon_id(&id->logon_id, log_id_low, log_id_high);
-
-	init_uni_hdr(&id->hdr_user_name, len_user_name);
-	init_uni_hdr(&id->hdr_wksta_name, len_wksta_name);
-
-	if (lm_cypher && nt_cypher) {
-		unsigned char key[16];
-#ifdef DEBUG_PASSWORD
-		DEBUG(100,("lm cypher:"));
-		dump_data(100, (char *)lm_cypher, 16);
-
-		DEBUG(100,("nt cypher:"));
-		dump_data(100, (char *)nt_cypher, 16);
-#endif
-
-		memset(key, 0, 16);
-		memcpy(key, sess_key, 8);
-
-		memcpy(lm_owf, lm_cypher, 16);
-		SamOEMhash(lm_owf, key, 16);
-		memcpy(nt_owf, nt_cypher, 16);
-		SamOEMhash(nt_owf, key, 16);
-
-#ifdef DEBUG_PASSWORD
-		DEBUG(100,("encrypt of lm owf password:"));
-		dump_data(100, (char *)lm_owf, 16);
-
-		DEBUG(100,("encrypt of nt owf password:"));
-		dump_data(100, (char *)nt_owf, 16);
-#endif
-		/* set up pointers to cypher blocks */
-		lm_cypher = lm_owf;
-		nt_cypher = nt_owf;
-	}
-
-	init_owf_info(&id->lm_owf, lm_cypher);
-	init_owf_info(&id->nt_owf, nt_cypher);
-
-	init_unistr2(&id->uni_domain_name, domain_name, len_domain_name);
-	init_unistr2(&id->uni_user_name, user_name, len_user_name);
-	init_unistr2(&id->uni_wksta_name, wksta_name, len_wksta_name);
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -914,49 +362,8 @@ void init_id_info1(NET_ID_INFO_1 *id, co
 
 static BOOL net_io_id_info1(const char *desc,  NET_ID_INFO_1 *id, prs_struct *ps, int depth)
 {
-	if (id == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "net_io_id_info1");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-	
-	if(!prs_uint32("ptr_id_info1", ps, depth, &id->ptr_id_info1))
-		return False;
-
-	if (id->ptr_id_info1 != 0) {
-		if(!smb_io_unihdr("unihdr", &id->hdr_domain_name, ps, depth))
-			return False;
-
-		if(!prs_uint32("param_ctrl", ps, depth, &id->param_ctrl))
-			return False;
-		if(!smb_io_logon_id("", &id->logon_id, ps, depth))
-			return False;
-
-		if(!smb_io_unihdr("unihdr", &id->hdr_user_name, ps, depth))
-			return False;
-		if(!smb_io_unihdr("unihdr", &id->hdr_wksta_name, ps, depth))
-			return False;
-
-		if(!smb_io_owf_info("", &id->lm_owf, ps, depth))
-			return False;
-		if(!smb_io_owf_info("", &id->nt_owf, ps, depth))
-			return False;
-
-		if(!smb_io_unistr2("unistr2", &id->uni_domain_name,
-				id->hdr_domain_name.buffer, ps, depth))
-			return False;
-		if(!smb_io_unistr2("unistr2", &id->uni_user_name,
-				id->hdr_user_name.buffer, ps, depth))
-			return False;
-		if(!smb_io_unistr2("unistr2", &id->uni_wksta_name,
-				id->hdr_wksta_name.buffer, ps, depth))
-			return False;
-	}
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -982,45 +389,8 @@ void init_id_info2(NET_ID_INFO_2 * id, c
 		   const uchar * lm_chal_resp, int lm_chal_resp_len,
 		   const uchar * nt_chal_resp, int nt_chal_resp_len)
 {
-	int len_domain_name = strlen(domain_name);
-	int len_user_name   = strlen(user_name  );
-	int len_wksta_name  = strlen(wksta_name );
-	unsigned char lm_owf[24];
-	unsigned char nt_owf[128];
-
-	DEBUG(5,("init_id_info2: %d\n", __LINE__));
-
-	id->ptr_id_info2 = 1;
-
-	init_uni_hdr(&id->hdr_domain_name, len_domain_name);
-
-	id->param_ctrl = param_ctrl;
-	init_logon_id(&id->logon_id, log_id_low, log_id_high);
-
-	init_uni_hdr(&id->hdr_user_name, len_user_name);
-	init_uni_hdr(&id->hdr_wksta_name, len_wksta_name);
-
-	if (nt_chal_resp) {
-		/* oops.  can only send what-ever-it-is direct */
-		memcpy(nt_owf, nt_chal_resp, MIN(sizeof(nt_owf), nt_chal_resp_len));
-		nt_chal_resp = nt_owf;
-	}
-	if (lm_chal_resp) {
-		/* oops.  can only send what-ever-it-is direct */
-		memcpy(lm_owf, lm_chal_resp, MIN(sizeof(lm_owf), lm_chal_resp_len));
-		lm_chal_resp = lm_owf;
-	}
-
-	memcpy(id->lm_chal, lm_challenge, sizeof(id->lm_chal));
-	init_str_hdr(&id->hdr_nt_chal_resp, nt_chal_resp_len, nt_chal_resp_len, (nt_chal_resp != NULL) ? 1 : 0);
-	init_str_hdr(&id->hdr_lm_chal_resp, lm_chal_resp_len, lm_chal_resp_len, (lm_chal_resp != NULL) ? 1 : 0);
-
-	init_unistr2(&id->uni_domain_name, domain_name, len_domain_name);
-	init_unistr2(&id->uni_user_name, user_name, len_user_name);
-	init_unistr2(&id->uni_wksta_name, wksta_name, len_wksta_name);
-
-	init_string2(&id->nt_chal_resp, (const char *)nt_chal_resp, nt_chal_resp_len, nt_chal_resp_len);
-	init_string2(&id->lm_chal_resp, (const char *)lm_chal_resp, lm_chal_resp_len, lm_chal_resp_len);
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 
 }
 
@@ -1030,58 +400,8 @@ void init_id_info2(NET_ID_INFO_2 * id, c
 
 static BOOL net_io_id_info2(const char *desc,  NET_ID_INFO_2 *id, prs_struct *ps, int depth)
 {
-	if (id == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "net_io_id_info2");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-	
-	if(!prs_uint32("ptr_id_info2", ps, depth, &id->ptr_id_info2))
-		return False;
-
-	if (id->ptr_id_info2 != 0) {
-		if(!smb_io_unihdr("unihdr", &id->hdr_domain_name, ps, depth))
-			return False;
-
-		if(!prs_uint32("param_ctrl", ps, depth, &id->param_ctrl))
-			return False;
-		if(!smb_io_logon_id("", &id->logon_id, ps, depth))
-			return False;
-
-		if(!smb_io_unihdr("unihdr", &id->hdr_user_name, ps, depth))
-			return False;
-		if(!smb_io_unihdr("unihdr", &id->hdr_wksta_name, ps, depth))
-			return False;
-
-		if(!prs_uint8s (False, "lm_chal", ps, depth, id->lm_chal, 8)) /* lm 8 byte challenge */
-			return False;
-
-		if(!smb_io_strhdr("hdr_nt_chal_resp", &id->hdr_nt_chal_resp, ps, depth))
-			return False;
-		if(!smb_io_strhdr("hdr_lm_chal_resp", &id->hdr_lm_chal_resp, ps, depth))
-			return False;
-
-		if(!smb_io_unistr2("uni_domain_name", &id->uni_domain_name,
-				id->hdr_domain_name.buffer, ps, depth))
-			return False;
-		if(!smb_io_unistr2("uni_user_name  ", &id->uni_user_name,
-				id->hdr_user_name.buffer, ps, depth))
-			return False;
-		if(!smb_io_unistr2("uni_wksta_name ", &id->uni_wksta_name,
-				id->hdr_wksta_name.buffer, ps, depth))
-			return False;
-		if(!smb_io_string2("nt_chal_resp", &id->nt_chal_resp,
-				id->hdr_nt_chal_resp.buffer, ps, depth))
-			return False;
-		if(!smb_io_string2("lm_chal_resp", &id->lm_chal_resp,
-				id->hdr_lm_chal_resp.buffer, ps, depth))
-			return False;
-	}
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 
@@ -1094,19 +414,8 @@ void init_sam_info(DOM_SAM_INFO *sam,
 				DOM_CRED *rtn_cred, uint16 logon_level,
 				NET_ID_INFO_CTR *ctr)
 {
-	DEBUG(5,("init_sam_info: %d\n", __LINE__));
-
-	init_clnt_info2(&sam->client, logon_srv, comp_name, clnt_cred);
-
-	if (rtn_cred != NULL) {
-		sam->ptr_rtn_cred = 1;
-		memcpy(&sam->rtn_cred, rtn_cred, sizeof(sam->rtn_cred));
-	} else {
-		sam->ptr_rtn_cred = 0;
-	}
-
-	sam->logon_level  = logon_level;
-	sam->ctr          = ctr;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1115,41 +424,8 @@ void init_sam_info(DOM_SAM_INFO *sam,
 
 static BOOL net_io_id_info_ctr(const char *desc, NET_ID_INFO_CTR **pp_ctr, prs_struct *ps, int depth)
 {
-	NET_ID_INFO_CTR *ctr = *pp_ctr;
-
-	prs_debug(ps, depth, desc, "smb_io_sam_info");
-	depth++;
-
-	if (UNMARSHALLING(ps)) {
-		ctr = *pp_ctr = (NET_ID_INFO_CTR *)prs_alloc_mem(ps, sizeof(NET_ID_INFO_CTR));
-		if (ctr == NULL)
-			return False;
-	}
-	
-	if (ctr == NULL)
-		return False;
-
-	/* don't 4-byte align here! */
-
-	if(!prs_uint16("switch_value ", ps, depth, &ctr->switch_value))
-		return False;
-
-	switch (ctr->switch_value) {
-	case 1:
-		if(!net_io_id_info1("", &ctr->auth.id1, ps, depth))
-			return False;
-		break;
-	case 2:
-		if(!net_io_id_info2("", &ctr->auth.id2, ps, depth))
-			return False;
-		break;
-	default:
-		/* PANIC! */
-		DEBUG(4,("smb_io_sam_info: unknown switch_value!\n"));
-		break;
-	}
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1158,32 +434,8 @@ static BOOL net_io_id_info_ctr(const cha
 
 static BOOL smb_io_sam_info(const char *desc, DOM_SAM_INFO *sam, prs_struct *ps, int depth)
 {
-	if (sam == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "smb_io_sam_info");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-	
-	if(!smb_io_clnt_info2("", &sam->client, ps, depth))
-		return False;
-
-	if(!prs_uint32("ptr_rtn_cred ", ps, depth, &sam->ptr_rtn_cred))
-		return False;
-	if(!smb_io_cred("", &sam->rtn_cred, ps, depth))
-		return False;
-
-	if(!prs_uint16("logon_level  ", ps, depth, &sam->logon_level))
-		return False;
-
-	if (sam->logon_level != 0) {
-		if(!net_io_id_info_ctr("logon_info", &sam->ctr, ps, depth))
-			return False;
-	}
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*************************************************************************
@@ -1197,117 +449,8 @@ void init_net_user_info3(TALLOC_CTX *ctx
  			 const char *logon_srv, const char *logon_dom,
 			 DOM_SID *dom_sid, const char *other_sids)
 {
-	/* only cope with one "other" sid, right now. */
-	/* need to count the number of space-delimited sids */
-	int i;
-	int num_other_sids = 0;
-	
-	NTTIME 		logon_time, logoff_time, kickoff_time,
-			pass_last_set_time, pass_can_change_time,
-			pass_must_change_time;
-
-	int 		len_user_name, len_full_name, len_home_dir,
-			len_dir_drive, len_logon_script, len_profile_path;
-			
-	const char*		user_name = pdb_get_username(sampw);
-	const char*		full_name = pdb_get_fullname(sampw);
-	const char*		home_dir  = pdb_get_homedir(sampw);
-	const char*		dir_drive = pdb_get_dirdrive(sampw);
-	const char*		logon_script = pdb_get_logon_script(sampw);
-	const char*		profile_path = pdb_get_profile_path(sampw);
-
-	int len_logon_srv    = strlen(logon_srv);
-	int len_logon_dom    = strlen(logon_dom);
-
-	len_user_name    = strlen(user_name   );
-	len_full_name    = strlen(full_name   );
-	len_home_dir     = strlen(home_dir    );
-	len_dir_drive    = strlen(dir_drive   );
-	len_logon_script = strlen(logon_script);
-	len_profile_path = strlen(profile_path);
-
-
-	ZERO_STRUCTP(usr);
-
-	usr->ptr_user_info = 1; /* yes, we're bothering to put USER_INFO data here */
-
-
-	/* Create NTTIME structs */
-	unix_to_nt_time (&logon_time, 		pdb_get_logon_time(sampw));
-	unix_to_nt_time (&logoff_time, 		TIME_T_MAX);
-	unix_to_nt_time (&kickoff_time, 	TIME_T_MAX);
-	unix_to_nt_time (&pass_last_set_time, 	pdb_get_pass_last_set_time(sampw));
-	unix_to_nt_time (&pass_can_change_time,	pdb_get_pass_can_change_time(sampw));
-	unix_to_nt_time (&pass_must_change_time,pdb_get_pass_must_change_time(sampw));
-
-	usr->logon_time            = logon_time;
-	usr->logoff_time           = logoff_time;
-	usr->kickoff_time          = kickoff_time;
-	usr->pass_last_set_time    = pass_last_set_time;
-	usr->pass_can_change_time  = pass_can_change_time;
-	usr->pass_must_change_time = pass_must_change_time;
-
-	init_uni_hdr(&usr->hdr_user_name, len_user_name);
-	init_uni_hdr(&usr->hdr_full_name, len_full_name);
-	init_uni_hdr(&usr->hdr_logon_script, len_logon_script);
-	init_uni_hdr(&usr->hdr_profile_path, len_profile_path);
-	init_uni_hdr(&usr->hdr_home_dir, len_home_dir);
-	init_uni_hdr(&usr->hdr_dir_drive, len_dir_drive);
-
-	usr->logon_count = logon_count;
-	usr->bad_pw_count = bad_pw_count;
-
-	usr->user_rid = pdb_get_user_rid(sampw);
-	usr->group_rid = pdb_get_group_rid(sampw);
-	usr->num_groups = num_groups+1;
-
-	usr->buffer_groups = 1; /* indicates fill in groups, below, even if there are none */
-	usr->user_flgs = user_flgs;
-
-	if (sess_key != NULL)
-		memcpy(usr->user_sess_key, sess_key, sizeof(usr->user_sess_key));
-	else
-		memset((char *)usr->user_sess_key, '\0', sizeof(usr->user_sess_key));
-
-	init_uni_hdr(&usr->hdr_logon_srv, len_logon_srv);
-	init_uni_hdr(&usr->hdr_logon_dom, len_logon_dom);
-
-	usr->buffer_dom_id = dom_sid ? 1 : 0; /* yes, we're bothering to put a domain SID in */
-
-	memset((char *)usr->padding, '\0', sizeof(usr->padding));
-
-	num_other_sids = init_dom_sid2s(ctx, other_sids, &usr->other_sids);
-
-	usr->num_other_sids = num_other_sids;
-	usr->buffer_other_sids = (num_other_sids != 0) ? 1 : 0; 
-	
-	init_unistr2(&usr->uni_user_name, user_name, len_user_name);
-	init_unistr2(&usr->uni_full_name, full_name, len_full_name);
-	init_unistr2(&usr->uni_logon_script, logon_script, len_logon_script);
-	init_unistr2(&usr->uni_profile_path, profile_path, len_profile_path);
-	init_unistr2(&usr->uni_home_dir, home_dir, len_home_dir);
-	init_unistr2(&usr->uni_dir_drive, dir_drive, len_dir_drive);
-
-	/* always have at least one group == the user's primary group */
-	usr->num_groups2 = num_groups+1;
-
-	usr->gids = (DOM_GID *)talloc_zero(ctx,sizeof(DOM_GID) * (num_groups+1));
-	if (usr->gids == NULL)
-		return;
-
-	/* primary group **MUST** go first.  NT4's winmsd.exe will give
-	   "The Network statistics are currently not available.  9-5"
-	   What the heck is this?     -- jerry  */
-	usr->gids[0].g_rid = usr->group_rid;
-	usr->gids[0].attr  = 0x07;
-	for (i = 0; i < num_groups; i++) 
-		usr->gids[i+1] = gids[i];	
-		
-	init_unistr2(&usr->uni_logon_srv, logon_srv, len_logon_srv);
-	init_unistr2(&usr->uni_logon_dom, logon_dom, len_logon_dom);
-
-	init_dom_sid2(&usr->dom_sid, dom_sid);
-	/* "other" sids are set up above */
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1320,158 +463,8 @@ void init_net_user_info3(TALLOC_CTX *ctx
 
 static BOOL net_io_user_info3(const char *desc, NET_USER_INFO_3 *usr, prs_struct *ps, int depth, uint16 validation_level)
 {
-	int i;
-
-	if (usr == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "lsa_io_lsa_user_info");
-	depth++;
-
-	if (UNMARSHALLING(ps))
-		ZERO_STRUCTP(usr);
-
-	if(!prs_align(ps))
-		return False;
-	
-	if(!prs_uint32("ptr_user_info ", ps, depth, &usr->ptr_user_info))
-		return False;
-
-	if (usr->ptr_user_info == 0)
-		return True;
-
-	if(!smb_io_time("logon time", &usr->logon_time, ps, depth)) /* logon time */
-		return False;
-	if(!smb_io_time("logoff time", &usr->logoff_time, ps, depth)) /* logoff time */
-		return False;
-	if(!smb_io_time("kickoff time", &usr->kickoff_time, ps, depth)) /* kickoff time */
-		return False;
-	if(!smb_io_time("last set time", &usr->pass_last_set_time, ps, depth)) /* password last set time */
-		return False;
-	if(!smb_io_time("can change time", &usr->pass_can_change_time , ps, depth)) /* password can change time */
-		return False;
-	if(!smb_io_time("must change time", &usr->pass_must_change_time, ps, depth)) /* password must change time */
-		return False;
-
-	if(!smb_io_unihdr("unihdr", &usr->hdr_user_name, ps, depth)) /* username unicode string header */
-		return False;
-	if(!smb_io_unihdr("unihdr", &usr->hdr_full_name, ps, depth)) /* user's full name unicode string header */
-		return False;
-	if(!smb_io_unihdr("unihdr", &usr->hdr_logon_script, ps, depth)) /* logon script unicode string header */
-		return False;
-	if(!smb_io_unihdr("unihdr", &usr->hdr_profile_path, ps, depth)) /* profile path unicode string header */
-		return False;
-	if(!smb_io_unihdr("unihdr", &usr->hdr_home_dir, ps, depth)) /* home directory unicode string header */
-		return False;
-	if(!smb_io_unihdr("unihdr", &usr->hdr_dir_drive, ps, depth)) /* home directory drive unicode string header */
-		return False;
-
-	if(!prs_uint16("logon_count   ", ps, depth, &usr->logon_count))  /* logon count */
-		return False;
-	if(!prs_uint16("bad_pw_count  ", ps, depth, &usr->bad_pw_count)) /* bad password count */
-		return False;
-
-	if(!prs_uint32("user_rid      ", ps, depth, &usr->user_rid))       /* User RID */
-		return False;
-	if(!prs_uint32("group_rid     ", ps, depth, &usr->group_rid))      /* Group RID */
-		return False;
-	if(!prs_uint32("num_groups    ", ps, depth, &usr->num_groups))    /* num groups */
-		return False;
-	if(!prs_uint32("buffer_groups ", ps, depth, &usr->buffer_groups)) /* undocumented buffer pointer to groups. */
-		return False;
-	if(!prs_uint32("user_flgs     ", ps, depth, &usr->user_flgs))     /* user flags */
-		return False;
-
-	if(!prs_uint8s(False, "user_sess_key", ps, depth, usr->user_sess_key, 16)) /* unused user session key */
-		return False;
-
-	if(!smb_io_unihdr("unihdr", &usr->hdr_logon_srv, ps, depth)) /* logon server unicode string header */
-		return False;
-	if(!smb_io_unihdr("unihdr", &usr->hdr_logon_dom, ps, depth)) /* logon domain unicode string header */
-		return False;
-
-	if(!prs_uint32("buffer_dom_id ", ps, depth, &usr->buffer_dom_id)) /* undocumented logon domain id pointer */
-		return False;
-	if(!prs_uint8s (False, "padding       ", ps, depth, usr->padding, 40)) /* unused padding bytes? */
-		return False;
-
-	if (validation_level == 3) {
-		if(!prs_uint32("num_other_sids", ps, depth, &usr->num_other_sids)) /* 0 - num_sids */
-			return False;
-		if(!prs_uint32("buffer_other_sids", ps, depth, &usr->buffer_other_sids)) /* NULL - undocumented pointer to SIDs. */
-			return False;
-	} else {
-		if (UNMARSHALLING(ps)) {
-			usr->num_other_sids = 0;
-			usr->buffer_other_sids = 0;
-		}
-	}
-		
-	if(!smb_io_unistr2("unistr2", &usr->uni_user_name, usr->hdr_user_name.buffer, ps, depth)) /* username unicode string */
-		return False;
-	if(!smb_io_unistr2("unistr2", &usr->uni_full_name, usr->hdr_full_name.buffer, ps, depth)) /* user's full name unicode string */
-		return False;
-	if(!smb_io_unistr2("unistr2", &usr->uni_logon_script, usr->hdr_logon_script.buffer, ps, depth)) /* logon script unicode string */
-		return False;
-	if(!smb_io_unistr2("unistr2", &usr->uni_profile_path, usr->hdr_profile_path.buffer, ps, depth)) /* profile path unicode string */
-		return False;
-	if(!smb_io_unistr2("unistr2", &usr->uni_home_dir, usr->hdr_home_dir.buffer, ps, depth)) /* home directory unicode string */
-		return False;
-	if(!smb_io_unistr2("unistr2", &usr->uni_dir_drive, usr->hdr_dir_drive.buffer, ps, depth)) /* home directory drive unicode string */
-		return False;
-
-	if(!prs_align(ps))
-		return False;
-	if(!prs_uint32("num_groups2   ", ps, depth, &usr->num_groups2))        /* num groups */
-		return False;
-
-	if (UNMARSHALLING(ps) && usr->num_groups2 > 0) {
-		usr->gids = (DOM_GID *)prs_alloc_mem(ps, sizeof(DOM_GID)*usr->num_groups2);
-		if (usr->gids == NULL)
-			return False;
-	}
-
-	for (i = 0; i < usr->num_groups2; i++) {
-		if(!smb_io_gid("", &usr->gids[i], ps, depth)) /* group info */
-			return False;
-	}
-
-	if(!smb_io_unistr2("unistr2", &usr->uni_logon_srv, usr->hdr_logon_srv.buffer, ps, depth)) /* logon server unicode string */
-		return False;
-	if(!smb_io_unistr2("unistr2", &usr->uni_logon_dom, usr->hdr_logon_srv.buffer, ps, depth)) /* logon domain unicode string */
-		return False;
-
-	if(!smb_io_dom_sid2("", &usr->dom_sid, ps, depth))           /* domain SID */
-		return False;
-
-	if (usr->num_other_sids) {
-
-		if (UNMARSHALLING(ps)) {
-			usr->other_sids = (DOM_SID2 *)prs_alloc_mem(ps, sizeof(DOM_SID2)*usr->num_other_sids);
-			if (usr->other_sids == NULL)
-				return False;
-		}
-	
-		if(!prs_uint32("num_other_groups", ps, depth, &usr->num_other_groups))
-			return False;
-
-		if (UNMARSHALLING(ps) && usr->num_other_groups > 0) {
-			usr->other_gids = (DOM_GID *)prs_alloc_mem(ps, sizeof(DOM_GID)*usr->num_other_groups);
-			if (usr->other_gids == NULL)
-				return False;
-		}
-	
-		for (i = 0; i < usr->num_other_groups; i++) {
-			if(!smb_io_gid("", &usr->other_gids[i], ps, depth)) /* other GIDs */
-				return False;
-		}
-		for (i = 0; i < usr->num_other_sids; i++) {
-			if(!smb_io_dom_sid2("", &usr->other_sids[i], ps, depth)) /* other domain SIDs */
-				return False;
-		}
-	}
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1480,22 +473,8 @@ static BOOL net_io_user_info3(const char
 
 BOOL net_io_q_sam_logon(const char *desc, NET_Q_SAM_LOGON *q_l, prs_struct *ps, int depth)
 {
-	if (q_l == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "net_io_q_sam_logon");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-	
-	if(!smb_io_sam_info("", &q_l->sam_id, ps, depth))
-		return False;
-
-	if(!prs_uint16("validation_level", ps, depth, &q_l->validation_level))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1504,42 +483,8 @@ BOOL net_io_q_sam_logon(const char *desc
 
 BOOL net_io_r_sam_logon(const char *desc, NET_R_SAM_LOGON *r_l, prs_struct *ps, int depth)
 {
-	if (r_l == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "net_io_r_sam_logon");
-	depth++;
-
-	if(!prs_uint32("buffer_creds", ps, depth, &r_l->buffer_creds)) /* undocumented buffer pointer */
-		return False;
-	if(!smb_io_cred("", &r_l->srv_creds, ps, depth)) /* server credentials.  server time stamp appears to be ignored. */
-		return False;
-
-	if(!prs_uint16("switch_value", ps, depth, &r_l->switch_value))
-		return False;
-	if(!prs_align(ps))
-		return False;
-
-#if 1 /* W2k always needs this - even for bad passwd. JRA */
-	if(!net_io_user_info3("", r_l->user, ps, depth, r_l->switch_value))
-		return False;
-#else
-	if (r_l->switch_value != 0) {
-		if(!net_io_user_info3("", r_l->user, ps, depth, r_l->switch_value))
-			return False;
-	}
-#endif
-
-	if(!prs_uint32("auth_resp   ", ps, depth, &r_l->auth_resp)) /* 1 - Authoritative response; 0 - Non-Auth? */
-		return False;
-
-	if(!prs_ntstatus("status      ", ps, depth, &r_l->status))
-		return False;
-
-	if(!prs_align(ps))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1548,19 +493,8 @@ BOOL net_io_r_sam_logon(const char *desc
 
 BOOL net_io_q_sam_logoff(const char *desc,  NET_Q_SAM_LOGOFF *q_l, prs_struct *ps, int depth)
 {
-	if (q_l == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "net_io_q_sam_logoff");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-	
-	if(!smb_io_sam_info("", &q_l->sam_id, ps, depth))           /* domain SID */
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1569,24 +503,8 @@ BOOL net_io_q_sam_logoff(const char *des
 
 BOOL net_io_r_sam_logoff(const char *desc, NET_R_SAM_LOGOFF *r_l, prs_struct *ps, int depth)
 {
-	if (r_l == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "net_io_r_sam_logoff");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-	
-	if(!prs_uint32("buffer_creds", ps, depth, &r_l->buffer_creds)) /* undocumented buffer pointer */
-		return False;
-	if(!smb_io_cred("", &r_l->srv_creds, ps, depth)) /* server credentials.  server time stamp appears to be ignored. */
-		return False;
-
-	if(!prs_ntstatus("status      ", ps, depth, &r_l->status))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1596,25 +514,8 @@ BOOL init_net_q_sam_sync(NET_Q_SAM_SYNC
                          const char *cli_name, DOM_CRED * cli_creds, 
                          DOM_CRED *ret_creds, uint32 database_id)
 {
-	DEBUG(5, ("init_q_sam_sync\n"));
-
-	init_unistr2(&q_s->uni_srv_name, srv_name, strlen(srv_name) + 1);
-	init_unistr2(&q_s->uni_cli_name, cli_name, strlen(cli_name) + 1);
-
-        if (cli_creds)
-                memcpy(&q_s->cli_creds, cli_creds, sizeof(q_s->cli_creds));
-
-	if (cli_creds)
-                memcpy(&q_s->ret_creds, ret_creds, sizeof(q_s->ret_creds));
-	else
-                memset(&q_s->ret_creds, 0, sizeof(q_s->ret_creds));
-
-	q_s->database_id = database_id;
-	q_s->restart_state = 0;
-	q_s->sync_context = 0;
-	q_s->max_size = 0xffff;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1623,30 +524,8 @@ reads or writes a structure.
 BOOL net_io_q_sam_sync(const char *desc, NET_Q_SAM_SYNC * q_s, prs_struct *ps,
 		       int depth)
 {
-	prs_debug(ps, depth, desc, "net_io_q_sam_sync");
-	depth++;
-
-	if (!smb_io_unistr2("", &q_s->uni_srv_name, True, ps, depth))
-                return False;
-	if (!smb_io_unistr2("", &q_s->uni_cli_name, True, ps, depth))
-                return False;
-
-	if (!smb_io_cred("", &q_s->cli_creds, ps, depth))
-                return False;
-	if (!smb_io_cred("", &q_s->ret_creds, ps, depth))
-                return False;
-
-	if (!prs_uint32("database_id  ", ps, depth, &q_s->database_id))
-                return False;
-	if (!prs_uint32("restart_state", ps, depth, &q_s->restart_state))
-                return False;
-	if (!prs_uint32("sync_context ", ps, depth, &q_s->sync_context))
-                return False;
-
-	if (!prs_uint32("max_size", ps, depth, &q_s->max_size))
-                return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1655,28 +534,8 @@ reads or writes a structure.
 static BOOL net_io_sam_delta_hdr(const char *desc, SAM_DELTA_HDR * delta,
 				 prs_struct *ps, int depth)
 {
-	prs_debug(ps, depth, desc, "net_io_sam_delta_hdr");
-	depth++;
-
-	if (!prs_uint16("type", ps, depth, &delta->type))
-                return False;
-	if (!prs_uint16("type2", ps, depth, &delta->type2))
-                return False;
-	if (!prs_uint32("target_rid", ps, depth, &delta->target_rid))
-                return False;
-
-	if (!prs_uint32("type3", ps, depth, &delta->type3))
-                return False;
-
-        /* Not sure why we need this but it seems to be necessary to get
-           sam deltas working. */
-
-        if (delta->type != 0x16) {
-                if (!prs_uint32("ptr_delta", ps, depth, &delta->ptr_delta))
-                        return False;
-        }
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1685,22 +544,8 @@ reads or writes a structure.
 static BOOL net_io_sam_delta_stamp(const char *desc, SAM_DELTA_STAMP *info,
                                    prs_struct *ps, int depth)
 {
-	prs_debug(ps, depth, desc, "net_io_sam_delta_stamp");
-	depth++;
-
-        if (!prs_uint32("seqnum", ps, depth, &info->seqnum))
-                return False;
-        if (!prs_uint32("dom_mod_count_ptr", ps, depth, 
-                        &info->dom_mod_count_ptr))
-                return False;
-
-        if (info->dom_mod_count_ptr) {
-                if (!prs_uint64("dom_mod_count", ps, depth,
-                                &info->dom_mod_count))
-                        return False;
-        }
-
-        return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1709,53 +554,8 @@ reads or writes a structure.
 static BOOL net_io_sam_domain_info(const char *desc, SAM_DOMAIN_INFO * info,
 				   prs_struct *ps, int depth)
 {
-	prs_debug(ps, depth, desc, "net_io_sam_domain_info");
-	depth++;
-
-	if (!smb_io_unihdr("hdr_dom_name", &info->hdr_dom_name, ps, depth))
-                return False;
-	if (!smb_io_unihdr("hdr_oem_info", &info->hdr_oem_info, ps, depth))
-                return False;
-
-        if (!prs_uint64("force_logoff", ps, depth, &info->force_logoff))
-                return False;
-	if (!prs_uint16("min_pwd_len", ps, depth, &info->min_pwd_len))
-                return False;
-	if (!prs_uint16("pwd_history_len", ps, depth, &info->pwd_history_len))
-                return False;
-	if (!prs_uint64("max_pwd_age", ps, depth, &info->max_pwd_age))
-                return False;
-	if (!prs_uint64("min_pwd_age", ps, depth, &info->min_pwd_age))
-                return False;
-	if (!prs_uint64("dom_mod_count", ps, depth, &info->dom_mod_count))
-                return False;
-	if (!smb_io_time("creation_time", &info->creation_time, ps, depth))
-                return False;
-
-	if (!smb_io_bufhdr2("hdr_sec_desc", &info->hdr_sec_desc, ps, depth))
-                return False;
-	if (!smb_io_unihdr("hdr_unknown", &info->hdr_unknown, ps, depth))
-                return False;
-
-	if (ps->data_offset + 40 > ps->buffer_size)
-                return False;
-        ps->data_offset += 40;
-
-	if (!smb_io_unistr2("uni_dom_name", &info->uni_dom_name,
-                            info->hdr_dom_name.buffer, ps, depth))
-                return False;
-	if (!smb_io_unistr2("buf_oem_info", &info->buf_oem_info,
-                            info->hdr_oem_info.buffer, ps, depth))
-                return False;
-
-	if (!smb_io_buffer4("buf_sec_desc", &info->buf_sec_desc,
-                            info->hdr_sec_desc.buffer, ps, depth))
-                return False;
-	if (!smb_io_unistr2("buf_unknown", &info->buf_unknown,
-                            info->hdr_unknown.buffer, ps, depth))
-                return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1764,33 +564,8 @@ reads or writes a structure.
 static BOOL net_io_sam_group_info(const char *desc, SAM_GROUP_INFO * info,
 				  prs_struct *ps, int depth)
 {
-	prs_debug(ps, depth, desc, "net_io_sam_group_info");
-	depth++;
-
-	if (!smb_io_unihdr("hdr_grp_name", &info->hdr_grp_name, ps, depth))
-                return False;
-	if (!smb_io_gid("gid", &info->gid, ps, depth))
-                return False;
-	if (!smb_io_unihdr("hdr_grp_desc", &info->hdr_grp_desc, ps, depth))
-                return False;
-	if (!smb_io_bufhdr2("hdr_sec_desc", &info->hdr_sec_desc, ps, depth))
-                return False;
-
-        if (ps->data_offset + 48 > ps->buffer_size)
-                return False;
-	ps->data_offset += 48;
-
-	if (!smb_io_unistr2("uni_grp_name", &info->uni_grp_name,
-                            info->hdr_grp_name.buffer, ps, depth))
-                return False;
-	if (!smb_io_unistr2("uni_grp_desc", &info->uni_grp_desc,
-                            info->hdr_grp_desc.buffer, ps, depth))
-                return False;
-	if (!smb_io_buffer4("buf_sec_desc", &info->buf_sec_desc,
-                            info->hdr_sec_desc.buffer, ps, depth))
-                return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1799,28 +574,8 @@ reads or writes a structure.
 static BOOL net_io_sam_passwd_info(const char *desc, SAM_PWD * pwd,
 				   prs_struct *ps, int depth)
 {
-	prs_debug(ps, depth, desc, "net_io_sam_passwd_info");
-	depth++;
-
-	if (!prs_uint32("unk_0 ", ps, depth, &pwd->unk_0))
-                return False;
-
-	if (!smb_io_unihdr("hdr_lm_pwd", &pwd->hdr_lm_pwd, ps, depth))
-                return False;
-	if (!prs_uint8s(False, "buf_lm_pwd", ps, depth, pwd->buf_lm_pwd, 16))
-                return False;
-
-	if (!smb_io_unihdr("hdr_nt_pwd", &pwd->hdr_nt_pwd, ps, depth))
-                return False;
-	if (!prs_uint8s(False, "buf_nt_pwd", ps, depth, pwd->buf_nt_pwd, 16))
-                return False;
-
-	if (!smb_io_unihdr("", &pwd->hdr_empty_lm, ps, depth))
-                return False;
-	if (!smb_io_unihdr("", &pwd->hdr_empty_nt, ps, depth))
-                return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1839,68 +594,8 @@ BOOL make_sam_account_info(SAM_ACCOUNT_I
 			   const UNISTR2 *wkstas,
 			   const UNISTR2 *unk_str, const UNISTR2 *mung_dial)
 {
-	int len_user_name = user_name != NULL ? user_name->uni_str_len : 0;
-	int len_full_name = full_name != NULL ? full_name->uni_str_len : 0;
-	int len_home_dir = home_dir != NULL ? home_dir->uni_str_len : 0;
-	int len_dir_drive = dir_drive != NULL ? dir_drive->uni_str_len : 0;
-	int len_logon_script = log_scr != NULL ? log_scr->uni_str_len : 0;
-	int len_profile_path = prof_path != NULL ? prof_path->uni_str_len : 0;
-	int len_description = desc != NULL ? desc->uni_str_len : 0;
-	int len_workstations = wkstas != NULL ? wkstas->uni_str_len : 0;
-	int len_unknown_str = unk_str != NULL ? unk_str->uni_str_len : 0;
-	int len_munged_dial = mung_dial != NULL ? mung_dial->uni_str_len : 0;
-
-	DEBUG(5, ("make_sam_account_info\n"));
-
-	make_uni_hdr(&info->hdr_acct_name, len_user_name);
-	make_uni_hdr(&info->hdr_full_name, len_full_name);
-	make_uni_hdr(&info->hdr_home_dir, len_home_dir);
-	make_uni_hdr(&info->hdr_dir_drive, len_dir_drive);
-	make_uni_hdr(&info->hdr_logon_script, len_logon_script);
-	make_uni_hdr(&info->hdr_profile, len_profile_path);
-	make_uni_hdr(&info->hdr_acct_desc, len_description);
-	make_uni_hdr(&info->hdr_workstations, len_workstations);
-	make_uni_hdr(&info->hdr_comment, len_unknown_str);
-	make_uni_hdr(&info->hdr_parameters, len_munged_dial);
-
-	/* not present */
-	make_bufhdr2(&info->hdr_sec_desc, 0, 0, 0);
-
-	info->user_rid = user_rid;
-	info->group_rid = group_rid;
-
-	init_nt_time(&info->logon_time);
-	init_nt_time(&info->logoff_time);
-	init_nt_time(&info->pwd_last_set_time);
-	init_nt_time(&info->acct_expiry_time);
-
-	info->logon_divs = 0xA8;
-	info->ptr_logon_hrs = 0;	/* Don't care right now */
-
-	info->bad_pwd_count = 0;
-	info->logon_count = 0;
-	info->acb_info = acb_info;
-	info->nt_pwd_present = 0;
-	info->lm_pwd_present = 0;
-	info->pwd_expired = 0;
-	info->country = 0;
-	info->codepage = 0;
-
-	info->unknown1 = 0x4EC;
-	info->unknown2 = 0;
-
-	copy_unistr2(&info->uni_acct_name, user_name);
-	copy_unistr2(&info->uni_full_name, full_name);
-	copy_unistr2(&info->uni_home_dir, home_dir);
-	copy_unistr2(&info->uni_dir_drive, dir_drive);
-	copy_unistr2(&info->uni_logon_script, log_scr);
-	copy_unistr2(&info->uni_profile, prof_path);
-	copy_unistr2(&info->uni_acct_desc, desc);
-	copy_unistr2(&info->uni_workstations, wkstas);
-	copy_unistr2(&info->uni_comment, unk_str);
-	copy_unistr2(&info->uni_parameters, mung_dial);
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1910,188 +605,8 @@ static BOOL net_io_sam_account_info(cons
 				    SAM_ACCOUNT_INFO * info, prs_struct *ps,
 				    int depth)
 {
-	BUFHDR2 hdr_priv_data;
-	uint32 i;
-
-	prs_debug(ps, depth, desc, "net_io_sam_account_info");
-	depth++;
-
-	if (!smb_io_unihdr("hdr_acct_name", &info->hdr_acct_name, ps, depth))
-                return False;
-	if (!smb_io_unihdr("hdr_full_name", &info->hdr_full_name, ps, depth))
-                return False;
-
-	if (!prs_uint32("user_rid ", ps, depth, &info->user_rid))
-                return False;
-	if (!prs_uint32("group_rid", ps, depth, &info->group_rid))
-                return False;
-
-	if (!smb_io_unihdr("hdr_home_dir ", &info->hdr_home_dir, ps, depth))
-                return False;
-	if (!smb_io_unihdr("hdr_dir_drive", &info->hdr_dir_drive, ps, depth))
-                return False;
-	if (!smb_io_unihdr("hdr_logon_script", &info->hdr_logon_script, ps,
-                           depth))
-                return False;
-
-	if (!smb_io_unihdr("hdr_acct_desc", &info->hdr_acct_desc, ps, depth))
-                return False;
-	if (!smb_io_unihdr("hdr_workstations", &info->hdr_workstations, ps,
-                           depth))
-                return False;
-
-	if (!smb_io_time("logon_time", &info->logon_time, ps, depth))
-                return False;
-	if (!smb_io_time("logoff_time", &info->logoff_time, ps, depth))
-                return False;
-
-	if (!prs_uint32("logon_divs   ", ps, depth, &info->logon_divs))
-                return False;
-	if (!prs_uint32("ptr_logon_hrs", ps, depth, &info->ptr_logon_hrs))
-                return False;
-
-	if (!prs_uint16("bad_pwd_count", ps, depth, &info->bad_pwd_count))
-                return False;
-	if (!prs_uint16("logon_count", ps, depth, &info->logon_count))
-                return False;
-	if (!smb_io_time("pwd_last_set_time", &info->pwd_last_set_time, ps,
-                         depth))
-                return False;
-	if (!smb_io_time("acct_expiry_time", &info->acct_expiry_time, ps, 
-                         depth))
-                return False;
-
-	if (!prs_uint32("acb_info", ps, depth, &info->acb_info))
-                return False;
-	if (!prs_uint8s(False, "nt_pwd", ps, depth, info->nt_pwd, 16))
-                return False;
-	if (!prs_uint8s(False, "lm_pwd", ps, depth, info->lm_pwd, 16))
-                return False;
-	if (!prs_uint8("lm_pwd_present", ps, depth, &info->lm_pwd_present))
-                return False;
-	if (!prs_uint8("nt_pwd_present", ps, depth, &info->nt_pwd_present))
-                return False;
-	if (!prs_uint8("pwd_expired", ps, depth, &info->pwd_expired))
-                return False;
-
-	if (!smb_io_unihdr("hdr_comment", &info->hdr_comment, ps, depth))
-                return False;
-	if (!smb_io_unihdr("hdr_parameters", &info->hdr_parameters, ps, 
-                           depth))
-                return False;
-	if (!prs_uint16("country", ps, depth, &info->country))
-                return False;
-	if (!prs_uint16("codepage", ps, depth, &info->codepage))
-                return False;
-
-	if (!smb_io_bufhdr2("hdr_priv_data", &hdr_priv_data, ps, depth))
-                return False;
-	if (!smb_io_bufhdr2("hdr_sec_desc", &info->hdr_sec_desc, ps, depth))
-                return False;
-	if (!smb_io_unihdr("hdr_profile", &info->hdr_profile, ps, depth))
-                return False;
-
-	for (i = 0; i < 3; i++)
-	{
-		if (!smb_io_unihdr("hdr_reserved", &info->hdr_reserved[i], 
-                                   ps, depth))
-                        return False;                                          
-	}
-
-	for (i = 0; i < 4; i++)
-	{
-		if (!prs_uint32("dw_reserved", ps, depth, 
-                                &info->dw_reserved[i]))
-                        return False;
-	}
-
-	if (!smb_io_unistr2("uni_acct_name", &info->uni_acct_name,
-                            info->hdr_acct_name.buffer, ps, depth))
-                return False;
-	prs_align(ps);
-	if (!smb_io_unistr2("uni_full_name", &info->uni_full_name,
-                            info->hdr_full_name.buffer, ps, depth))
-                return False;
-	prs_align(ps);
-	if (!smb_io_unistr2("uni_home_dir ", &info->uni_home_dir,
-                            info->hdr_home_dir.buffer, ps, depth))
-                return False;
-	prs_align(ps);
-	if (!smb_io_unistr2("uni_dir_drive", &info->uni_dir_drive,
-                            info->hdr_dir_drive.buffer, ps, depth))
-                return False;
-	prs_align(ps);
-	if (!smb_io_unistr2("uni_logon_script", &info->uni_logon_script,
-                            info->hdr_logon_script.buffer, ps, depth))
-                return False;
-	prs_align(ps);
-	if (!smb_io_unistr2("uni_acct_desc", &info->uni_acct_desc,
-                            info->hdr_acct_desc.buffer, ps, depth))
-                return False;
-	prs_align(ps);
-	if (!smb_io_unistr2("uni_workstations", &info->uni_workstations,
-                            info->hdr_workstations.buffer, ps, depth))
-                return False;
-	prs_align(ps);
-
-	if (!prs_uint32("unknown1", ps, depth, &info->unknown1))
-                return False;
-	if (!prs_uint32("unknown2", ps, depth, &info->unknown2))
-                return False;
-
-	if (!smb_io_buffer4("buf_logon_hrs", &info->buf_logon_hrs,
-                            info->ptr_logon_hrs, ps, depth))
-                return False;
-	prs_align(ps);
-	if (!smb_io_unistr2("uni_comment", &info->uni_comment,
-                            info->hdr_comment.buffer, ps, depth))
-                return False;
-	prs_align(ps);
-	if (!smb_io_unistr2("uni_parameters", &info->uni_parameters,
-                            info->hdr_parameters.buffer, ps, depth))
-                return False;
-	prs_align(ps);
-	if (hdr_priv_data.buffer != 0)
-	{
-		int old_offset = 0;
-		uint32 len = 0x44;
-		if (!prs_uint32("pwd_len", ps, depth, &len))
-                        return False;
-		old_offset = ps->data_offset;
-		if (len == 0x44)
-		{
-			if (ps->io)
-			{
-				/* reading */
-                                if (!prs_hash1(ps, ps->data_offset, sess_key))
-                                        return False;
-			}
-			if (!net_io_sam_passwd_info("pass", &info->pass, 
-                                                    ps, depth))
-                                return False;
-
-			if (!ps->io)
-			{
-				/* writing */
-                                if (!prs_hash1(ps, old_offset, sess_key))
-                                        return False;
-			}
-		}
-                if (old_offset + len > ps->buffer_size)
-                        return False;
-		ps->data_offset = old_offset + len;
-	}
-	if (!smb_io_buffer4("buf_sec_desc", &info->buf_sec_desc,
-                            info->hdr_sec_desc.buffer, ps, depth))
-                return False;
-	prs_align(ps);
-	if (!smb_io_unistr2("uni_profile", &info->uni_profile,
-                            info->hdr_profile.buffer, ps, depth))
-                return False;
-
-	prs_align(ps);
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -2100,82 +615,8 @@ reads or writes a structure.
 static BOOL net_io_sam_group_mem_info(const char *desc, SAM_GROUP_MEM_INFO * info,
 				      prs_struct *ps, int depth)
 {
-	uint32 i;
-	fstring tmp;
-
-	prs_debug(ps, depth, desc, "net_io_sam_group_mem_info");
-	depth++;
-
-	prs_align(ps);
-	if (!prs_uint32("ptr_rids   ", ps, depth, &info->ptr_rids))
-                return False;
-	if (!prs_uint32("ptr_attribs", ps, depth, &info->ptr_attribs))
-                return False;
-	if (!prs_uint32("num_members", ps, depth, &info->num_members))
-                return False;
-
-        if (ps->data_offset + 16 > ps->buffer_size)
-                return False;
-	ps->data_offset += 16;
-
-	if (info->ptr_rids != 0)
-	{
-		if (!prs_uint32("num_members2", ps, depth, 
-                                &info->num_members2))
-                        return False;
-
-		if (info->num_members2 != info->num_members)
-		{
-			/* RPC fault */
-			return False;
-		}
-
-                info->rids = talloc(ps->mem_ctx, sizeof(uint32) *
-                                    info->num_members2);
-
-                if (info->rids == NULL) {
-                        DEBUG(0, ("out of memory allocating %d rids\n",
-                                  info->num_members2));
-                        return False;
-                }
-
-		for (i = 0; i < info->num_members2; i++)
-		{
-			slprintf(tmp, sizeof(tmp) - 1, "rids[%02d]", i);
-			if (!prs_uint32(tmp, ps, depth, &info->rids[i]))
-                                return False;
-		}
-	}
-
-	if (info->ptr_attribs != 0)
-	{
-		if (!prs_uint32("num_members3", ps, depth, 
-                                &info->num_members3))
-                        return False;
-		if (info->num_members3 != info->num_members)
-		{
-			/* RPC fault */
-			return False;
-		}
-
-                info->attribs = talloc(ps->mem_ctx, sizeof(uint32) *
-                                       info->num_members3);
-
-                if (info->attribs == NULL) {
-                        DEBUG(0, ("out of memory allocating %d attribs\n",
-                                  info->num_members3));
-                        return False;
-                }
-
-		for (i = 0; i < info->num_members3; i++)
-		{
-			slprintf(tmp, sizeof(tmp) - 1, "attribs[%02d]", i);
-			if (!prs_uint32(tmp, ps, depth, &info->attribs[i]))
-                                return False;
-		}
-	}
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -2184,33 +625,8 @@ reads or writes a structure.
 static BOOL net_io_sam_alias_info(const char *desc, SAM_ALIAS_INFO * info,
 				  prs_struct *ps, int depth)
 {
-	prs_debug(ps, depth, desc, "net_io_sam_alias_info");
-	depth++;
-
-	if (!smb_io_unihdr("hdr_als_name", &info->hdr_als_name, ps, depth))
-                return False;
-	if (!prs_uint32("als_rid", ps, depth, &info->als_rid))
-                return False;
-	if (!smb_io_bufhdr2("hdr_sec_desc", &info->hdr_sec_desc, ps, depth))
-                return False;
-	if (!smb_io_unihdr("hdr_als_desc", &info->hdr_als_desc, ps, depth))
-                return False;
-
-        if (ps->data_offset + 40 > ps->buffer_size)
-                return False;
-	ps->data_offset += 40;
-
-	if (!smb_io_unistr2("uni_als_name", &info->uni_als_name,
-                            info->hdr_als_name.buffer, ps, depth))
-                return False;
-	if (!smb_io_buffer4("buf_sec_desc", &info->buf_sec_desc,
-                            info->hdr_sec_desc.buffer, ps, depth))
-                return False;
-	if (!smb_io_unistr2("uni_als_desc", &info->uni_als_desc,
-                            info->hdr_als_name.buffer, ps, depth))
-                return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -2219,71 +635,8 @@ reads or writes a structure.
 static BOOL net_io_sam_alias_mem_info(const char *desc, SAM_ALIAS_MEM_INFO * info,
 				      prs_struct *ps, int depth)
 {
-	uint32 i;
-	fstring tmp;
-
-	prs_debug(ps, depth, desc, "net_io_sam_alias_mem_info");
-	depth++;
-
-	prs_align(ps);
-	if (!prs_uint32("num_members", ps, depth, &info->num_members))
-                return False;
-	if (!prs_uint32("ptr_members", ps, depth, &info->ptr_members))
-                return False;
-
-	if (info->ptr_members != 0)
-	{
-                if (ps->data_offset + 16 > ps->buffer_size)
-                        return False;
-                ps->data_offset += 16;
-
-		if (!prs_uint32("num_sids", ps, depth, &info->num_sids))
-                        return False;
-		if (info->num_sids != info->num_members)
-		{
-			/* RPC fault */
-			return False;
-		}
-
-                info->ptr_sids = talloc(ps->mem_ctx, sizeof(uint32) *
-                                        info->num_sids);
-                
-                if (info->ptr_sids == NULL) {
-                        DEBUG(0, ("out of memory allocating %d ptr_sids\n",
-                                  info->num_sids));
-                        return False;
-                }
-
-		for (i = 0; i < info->num_sids; i++)
-		{
-			slprintf(tmp, sizeof(tmp) - 1, "ptr_sids[%02d]", i);
-			if (!prs_uint32(tmp, ps, depth, &info->ptr_sids[i]))
-                                return False;
-		}
-
-                info->sids = talloc(ps->mem_ctx, sizeof(DOM_SID2) *
-                                    info->num_sids);
-
-                if (info->sids == NULL) {
-                        DEBUG(0, ("error allocating %d sids\n",
-                                  info->num_sids));
-                        return False;
-                }
-
-		for (i = 0; i < info->num_sids; i++)
-		{
-			if (info->ptr_sids[i] != 0)
-			{
-				slprintf(tmp, sizeof(tmp) - 1, "sids[%02d]",
-					 i);
-				if (!smb_io_dom_sid2(tmp, &info->sids[i], 
-                                                     ps, depth))
-                                        return False;
-			}
-		}
-	}
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -2293,76 +646,8 @@ static BOOL net_io_sam_delta_ctr(const c
 				 SAM_DELTA_CTR * delta, uint16 type,
 				 prs_struct *ps, int depth)
 {
-	prs_debug(ps, depth, desc, "net_io_sam_delta_ctr");
-	depth++;
-
-	switch (type)
-        {
-                /* Seen in sam deltas */
-
-                case SAM_DELTA_SAM_STAMP:
-                {
-                        if (!net_io_sam_delta_stamp("", &delta->stamp,
-                                                    ps, depth))
-                                return False;
-                        break;
-                }
-
-		case SAM_DELTA_DOMAIN_INFO:
-		{
-			if (!net_io_sam_domain_info("", &delta->domain_info,
-                                                    ps, depth))
-                                return False;
-			break;
-		}
-		case SAM_DELTA_GROUP_INFO:
-		{
-			if (!net_io_sam_group_info("", &delta->group_info,
-                                                   ps, depth))
-                                return False;
-			break;
-		}
-		case SAM_DELTA_ACCOUNT_INFO:
-		{
-			if (!net_io_sam_account_info("", sess_key,
-                                                     &delta->account_info,
-                                                     ps, depth))
-                                return False;
-			break;
-		}
-		case SAM_DELTA_GROUP_MEM:
-		{
-			if (!net_io_sam_group_mem_info("", 
-                                                       &delta->grp_mem_info,
-                                                       ps, depth))
-                                return False;
-			break;
-		}
-		case SAM_DELTA_ALIAS_INFO:
-		{
-                        if (!net_io_sam_alias_info("", &delta->alias_info,
-                                                   ps, depth))
-                                return False;
-			break;
-		}
-		case SAM_DELTA_ALIAS_MEM:
-		{
-			if (!net_io_sam_alias_mem_info("", 
-                                                       &delta->als_mem_info,
-                                                       ps, depth))
-                                return False;
-			break;
-		}
-		default:
-		{
-			DEBUG(0,
-			      ("Replication error: Unknown delta type 0x%x\n",
-			       type));
-			break;
-		}
-	}
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -2371,88 +656,8 @@ reads or writes a structure.
 BOOL net_io_r_sam_sync(const char *desc, uint8 sess_key[16],
 		       NET_R_SAM_SYNC * r_s, prs_struct *ps, int depth)
 {
-	uint32 i;
-
-	prs_debug(ps, depth, desc, "net_io_r_sam_sync");
-	depth++;
-
-	if (!smb_io_cred("srv_creds", &r_s->srv_creds, ps, depth))
-                return False;
-	if (!prs_uint32("sync_context", ps, depth, &r_s->sync_context))
-                return False;
-
-	if (!prs_uint32("ptr_deltas", ps, depth, &r_s->ptr_deltas))
-                return False;
-	if (r_s->ptr_deltas != 0)
-	{
-		if (!prs_uint32("num_deltas ", ps, depth, &r_s->num_deltas))
-                        return False;
-		if (!prs_uint32("ptr_deltas2", ps, depth, &r_s->ptr_deltas2))
-                        return False;
-		if (r_s->ptr_deltas2 != 0)
-		{
-			if (!prs_uint32("num_deltas2", ps, depth,
-                                        &r_s->num_deltas2))
-                                return False;
-
-			if (r_s->num_deltas2 != r_s->num_deltas)
-			{
-				/* RPC fault */
-				return False;
-			}
-
-                        if (r_s->num_deltas2 > 0) {
-                                r_s->hdr_deltas = (SAM_DELTA_HDR *)
-                                        talloc(ps->mem_ctx, r_s->num_deltas2 *
-                                               sizeof(SAM_DELTA_HDR));
-                          
-                                if (r_s->hdr_deltas == NULL) {
-                                        DEBUG(0, ("error tallocating memory "
-                                                  "for %d delta headers\n", 
-                                                  r_s->num_deltas2));
-                                        return False;
-                                }
-                        }
-
-			for (i = 0; i < r_s->num_deltas2; i++)
-			{
-				if (!net_io_sam_delta_hdr("", 
-                                                          &r_s->hdr_deltas[i],
-                                                          ps, depth))
-                                        return False;
-			}
-
-                        if (r_s->num_deltas2 > 0) {
-                                r_s->deltas = (SAM_DELTA_CTR *)
-                                        talloc(ps->mem_ctx, r_s->num_deltas2 *
-                                               sizeof(SAM_DELTA_CTR));
-
-                                if (r_s->deltas == NULL) {
-                                        DEBUG(0, ("error tallocating memory "
-                                                  "for %d deltas\n", 
-                                                  r_s->num_deltas2));
-                                        return False;
-                                }
-                        }
-
-			for (i = 0; i < r_s->num_deltas2; i++)
-			{
-				if (!net_io_sam_delta_ctr(
-                                        "", sess_key, &r_s->deltas[i],
-                                        r_s->hdr_deltas[i].type3,
-                                        ps, depth)) {
-                                        DEBUG(0, ("hmm, failed on i=%d\n", i));
-                                        return False;
-                                }
-			}
-		}
-	}
-
-	prs_align(ps);
-	if (!prs_ntstatus("status", ps, depth, &(r_s->status)))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -2462,20 +667,8 @@ BOOL init_net_q_sam_deltas(NET_Q_SAM_DEL
                            const char *cli_name, DOM_CRED *cli_creds, 
                            uint32 database_id, UINT64_S dom_mod_count)
 {
-	DEBUG(5, ("init_net_q_sam_deltas\n"));
-
-	init_unistr2(&q_s->uni_srv_name, srv_name, strlen(srv_name) + 1);
-	init_unistr2(&q_s->uni_cli_name, cli_name, strlen(cli_name) + 1);
-
-	memcpy(&q_s->cli_creds, cli_creds, sizeof(q_s->cli_creds));
-	memset(&q_s->ret_creds, 0, sizeof(q_s->ret_creds));
-
-	q_s->database_id = database_id;
-        q_s->dom_mod_count.low = dom_mod_count.low;
-        q_s->dom_mod_count.high = dom_mod_count.high;
-	q_s->max_size = 0xffff;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -2484,27 +677,8 @@ reads or writes a structure.
 BOOL net_io_q_sam_deltas(const char *desc, NET_Q_SAM_DELTAS *q_s, prs_struct *ps,
                          int depth)
 {
-	prs_debug(ps, depth, desc, "net_io_q_sam_deltas");
-	depth++;
-
-	if (!smb_io_unistr2("", &q_s->uni_srv_name, True, ps, depth))
-                return False;
-	if (!smb_io_unistr2("", &q_s->uni_cli_name, True, ps, depth))
-                return False;
-
-	if (!smb_io_cred("", &q_s->cli_creds, ps, depth))
-                return False;
-	if (!smb_io_cred("", &q_s->ret_creds, ps, depth))
-                return False;
-
-	if (!prs_uint32("database_id  ", ps, depth, &q_s->database_id))
-                return False;
-        if (!prs_uint64("dom_mod_count", ps, depth, &q_s->dom_mod_count))
-                return False;
-	if (!prs_uint32("max_size", ps, depth, &q_s->max_size))
-                return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -2513,77 +687,6 @@ reads or writes a structure.
 BOOL net_io_r_sam_deltas(const char *desc, uint8 sess_key[16],
                          NET_R_SAM_DELTAS *r_s, prs_struct *ps, int depth)
 {
-        int i;
-
-	prs_debug(ps, depth, desc, "net_io_r_sam_deltas");
-	depth++;
-
-	if (!smb_io_cred("srv_creds", &r_s->srv_creds, ps, depth))
-                return False;
-        if (!prs_uint64("dom_mod_count", ps, depth, &r_s->dom_mod_count))
-                return False;
-
-	if (!prs_uint32("ptr_deltas", ps, depth, &r_s->ptr_deltas))
-                return False;
-	if (!prs_uint32("num_deltas", ps, depth, &r_s->num_deltas))
-                return False;
-	if (!prs_uint32("ptr_deltas2", ps, depth, &r_s->num_deltas2))
-                return False;
-
-	if (r_s->num_deltas2 != 0)
-	{
-		if (!prs_uint32("num_deltas2 ", ps, depth, &r_s->num_deltas2))
-                        return False;
-
-		if (r_s->ptr_deltas != 0)
-		{
-                        if (r_s->num_deltas > 0) {
-                                r_s->hdr_deltas = (SAM_DELTA_HDR *)
-                                        talloc(ps->mem_ctx, r_s->num_deltas *
-                                               sizeof(SAM_DELTA_HDR));
-                                if (r_s->hdr_deltas == NULL) {
-                                        DEBUG(0, ("error tallocating memory "
-                                                  "for %d delta headers\n", 
-                                                  r_s->num_deltas));
-                                        return False;
-                                }
-                        }
-
-			for (i = 0; i < r_s->num_deltas; i++)
-			{
-				net_io_sam_delta_hdr("", &r_s->hdr_deltas[i],
-                                                      ps, depth);
-			}
-                        
-                        if (r_s->num_deltas > 0) {
-                                r_s->deltas = (SAM_DELTA_CTR *)
-                                        talloc(ps->mem_ctx, r_s->num_deltas *
-                                               sizeof(SAM_DELTA_CTR));
-
-                                if (r_s->deltas == NULL) {
-                                        DEBUG(0, ("error tallocating memory "
-                                                  "for %d deltas\n", 
-                                                  r_s->num_deltas));
-                                        return False;
-                                }
-                        }
-
-			for (i = 0; i < r_s->num_deltas; i++)
-			{
-				if (!net_io_sam_delta_ctr(
-                                        "", sess_key,
-                                        &r_s->deltas[i],
-                                        r_s->hdr_deltas[i].type2,
-                                        ps, depth))
-                                        
-                                        return False;
-			}
-		}
-	}
-
-	prs_align(ps);
-	if (!prs_ntstatus("status", ps, depth, &r_s->status))
-                return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
diff -pruwN samba-2.2.12/source/rpc_parse/parse_prs.c samba-2.2.12-livebox/rpc_parse/parse_prs.c
--- samba-2.2.12/source/rpc_parse/parse_prs.c	2004-08-12 20:24:27.000000000 +0200
+++ samba-2.2.12-livebox/rpc_parse/parse_prs.c	2010-03-31 11:45:59.000000000 +0200
@@ -99,18 +99,8 @@ BOOL prs_init(prs_struct *ps, uint32 siz
  ********************************************************************/
 BOOL prs_read(prs_struct *ps, int fd, size_t len, int timeout)
 {
-	BOOL ok;
-	size_t prev_size = ps->buffer_size;
-	if (!prs_grow(ps, len))
-		return False;
-
-	if (timeout > 0) {
-		ok = (read_with_timeout(fd, &ps->data_p[prev_size],
-		                            len, len,timeout) == len);
-	} else {
-		ok = (read_data(fd, &ps->data_p[prev_size], len) == len);
-	}
-	return ok;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -175,12 +165,8 @@ void prs_give_memory(prs_struct *ps, cha
 
 char *prs_take_memory(prs_struct *ps, uint32 *psize)
 {
-	char *ret = ps->data_p;
-	if(psize)
-		*psize = ps->buffer_size;
-	ps->is_dynamic = False;
-	prs_mem_free(ps);
-	return ret;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -447,13 +433,8 @@ BOOL prs_align_uint16(prs_struct *ps)
 
 BOOL prs_align_uint64(prs_struct *ps)
 {
-	BOOL ret;
-	uint8 old_align = ps->align;
-
-	ps->align = 8;
-	ret = prs_align(ps);
-	ps->align = old_align;
-	return ret;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -462,10 +443,8 @@ BOOL prs_align_uint64(prs_struct *ps)
 
 BOOL prs_align_needed(prs_struct *ps, uint32 needed)
 {
-	if (needed==0)
-		return True;
-	else
-		return prs_align(ps);
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -692,41 +671,8 @@ BOOL prs_uint8s(BOOL charmode, const cha
 
 BOOL prs_uint16s(BOOL charmode, const char *name, prs_struct *ps, int depth, uint16 *data16s, int len)
 {
-	int i;
-	char *q = prs_mem_get(ps, len * sizeof(uint16));
-	if (q == NULL)
-		return False;
-
-	if (UNMARSHALLING(ps)) {
-		if (ps->bigendian_data) {
-			for (i = 0; i < len; i++)
-				data16s[i] = RSVAL(q, 2*i);
-		} else {
-			for (i = 0; i < len; i++)
-				data16s[i] = SVAL(q, 2*i);
-		}
-	} else {
-		if (ps->bigendian_data) {
-			for (i = 0; i < len; i++)
-				RSSVAL(q, 2*i, data16s[i]);
-		} else {
-			for (i = 0; i < len; i++)
-				SSVAL(q, 2*i, data16s[i]);
-		}
-	}
-
-	DEBUG(5,("%s%04x %s: ", tab_depth(depth), ps->data_offset, name));
-	if (charmode)
-		print_asc(5, (unsigned char*)data16s, 2*len);
-	else {
-		for (i = 0; i < len; i++)
-			DEBUG(5,("%04x ", data16s[i]));
-	}
-    DEBUG(5,("\n"));
-
-	ps->data_offset += (len * sizeof(uint16));
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /******************************************************************
@@ -864,23 +810,8 @@ BOOL prs_buffer5(BOOL charmode, const ch
 
 BOOL prs_buffer2(BOOL charmode, const char *name, prs_struct *ps, int depth, BUFFER2 *str)
 {
-	char *p;
-	char *q = prs_mem_get(ps, str->buf_len);
-	if (q == NULL)
-		return False;
-
-	if (UNMARSHALLING(ps)) {
-		str->buffer = (uint16 *)prs_alloc_mem(ps,str->buf_len);
-		if (str->buffer == NULL)
-			return False;
-	}
-
-	p = (char *)str->buffer;
-
-	dbg_rw_punival(charmode, name, depth, ps, q, p, str->buf_len/2);
-	ps->data_offset += str->buf_len;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /******************************************************************
@@ -890,37 +821,8 @@ BOOL prs_buffer2(BOOL charmode, const ch
 
 BOOL prs_string2(BOOL charmode, const char *name, prs_struct *ps, int depth, STRING2 *str)
 {
-	int i;
-	char *q = prs_mem_get(ps, str->str_max_len);
-	if (q == NULL)
-		return False;
-
-	if (UNMARSHALLING(ps)) {
-		str->buffer = (unsigned char *)prs_alloc_mem(ps,str->str_max_len);
-		if (str->buffer == NULL)
-			return False;
-	}
-
-	if (UNMARSHALLING(ps)) {
-		for (i = 0; i < str->str_str_len; i++)
-			str->buffer[i] = CVAL(q,i);
-	} else {
-		for (i = 0; i < str->str_str_len; i++)
-			SCVAL(q, i, str->buffer[i]);
-	}
-
-    DEBUG(5,("%s%04x %s: ", tab_depth(depth), ps->data_offset, name));
-    if (charmode)
-		print_asc(5, (unsigned char*)str->buffer, str->str_str_len);
-	else {
-    	for (i = 0; i < str->str_str_len; i++)
-			DEBUG(5,("%02x ", str->buffer[i]));
-	}
-    DEBUG(5,("\n"));
-
-	ps->data_offset += str->str_str_len;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /******************************************************************
@@ -961,23 +863,8 @@ BOOL prs_unistr2(BOOL charmode, const ch
 
 BOOL prs_unistr3(BOOL charmode, const char *name, UNISTR3 *str, prs_struct *ps, int depth)
 {
-	char *p;
-	char *q = prs_mem_get(ps, str->uni_str_len * sizeof(uint16));
-	if (q == NULL)
-		return False;
-
-	if (UNMARSHALLING(ps)) {
-		str->str.buffer = (uint16 *)prs_alloc_mem(ps,str->uni_str_len * sizeof(uint16));
-		if (str->str.buffer == NULL)
-			return False;
-	}
-
-	p = (char *)str->str.buffer;
-
-	dbg_rw_punival(charmode, name, depth, ps, q, p, str->uni_str_len);
-	ps->data_offset += (str->uni_str_len * sizeof(uint16));
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1107,34 +994,8 @@ BOOL prs_unistr(const char *name, prs_st
 
 BOOL prs_string(const char *name, prs_struct *ps, int depth, char *str, int len, int max_buf_size)
 {
-	char *q;
-	int i;
-
-	len = MIN(len, (max_buf_size-1));
-
-	q = prs_mem_get(ps, len+1);
-	if (q == NULL)
-		return False;
-
-	for(i = 0; i < len; i++) {
-		if (UNMARSHALLING(ps))
-			str[i] = q[i];
-		else
-			q[i] = str[i];
-	}
-
-	/* The terminating null. */
-	str[i] = '\0';
-
-	if (MARSHALLING(ps)) {
-		q[i] = '\0';
-	}
-
-	ps->data_offset += len+1;
-
-	dump_data(5+depth, q, len);
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1257,21 +1118,6 @@ int tdb_prs_fetch(TDB_CONTEXT *tdb, char
  ********************************************************************/
 BOOL prs_hash1(prs_struct *ps, uint32 offset, uint8 sess_key[16])
 {
-	char *q;
-
-	q = prs_data_p(ps);
-        q = &q[offset];
-
-#ifdef DEBUG_PASSWORD
-	DEBUG(100, ("prs_hash1\n"));
-	dump_data(100, sess_key, 16);
-	dump_data(100, q, 68);
-#endif
-	SamOEMhash((uchar *) q, sess_key, 68);
-
-#ifdef DEBUG_PASSWORD
-	dump_data(100, q, 68);
-#endif
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
diff -pruwN samba-2.2.12/source/rpc_parse/parse_reg.c samba-2.2.12-livebox/rpc_parse/parse_reg.c
--- samba-2.2.12/source/rpc_parse/parse_reg.c	2004-08-12 20:24:27.000000000 +0200
+++ samba-2.2.12-livebox/rpc_parse/parse_reg.c	2010-03-31 11:45:59.000000000 +0200
@@ -32,10 +32,8 @@
 void init_reg_q_open_hkcr(REG_Q_OPEN_HKCR *q_o,
 				uint16 unknown_0, uint32 level)
 {
-	q_o->ptr = 1;
-	q_o->unknown_0 = unknown_0;
-	q_o->unknown_1 = 0x0; /* random - changes */
-	q_o->level = level;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -44,28 +42,8 @@ reads or writes a structure.
 
 BOOL reg_io_q_open_hkcr(const char *desc,  REG_Q_OPEN_HKCR *r_q, prs_struct *ps, int depth)
 {
-	if (r_q == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "reg_io_q_open_hkcr");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_uint32("ptr      ", ps, depth, &r_q->ptr))
-		return False;
-
-	if (r_q->ptr != 0) {
-		if(!prs_uint16("unknown_0", ps, depth, &r_q->unknown_0))
-			return False;
-		if(!prs_uint16("unknown_1", ps, depth, &r_q->unknown_1))
-			return False;
-		if(!prs_uint32("level    ", ps, depth, &r_q->level))
-			return False;
-	}
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 
@@ -75,22 +53,8 @@ reads or writes a structure.
 
 BOOL reg_io_r_open_hkcr(const char *desc,  REG_R_OPEN_HKCR *r_r, prs_struct *ps, int depth)
 {
-	if (r_r == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "reg_io_r_open_hkcr");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-	
-	if(!smb_io_pol_hnd("", &r_r->pol, ps, depth))
-		return False;
-
-	if(!prs_ntstatus("status", ps, depth, &r_r->status))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -100,10 +64,8 @@ BOOL reg_io_r_open_hkcr(const char *desc
 void init_reg_q_open_hklm(REG_Q_OPEN_HKLM * q_o,
 			  uint16 unknown_0, uint32 access_mask)
 {
-	q_o->ptr = 1;
-	q_o->unknown_0 = unknown_0;
-	q_o->unknown_1 = 0x0;	/* random - changes */
-	q_o->access_mask = access_mask;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 
 }
 
@@ -169,7 +131,8 @@ BOOL reg_io_r_open_hklm(const char *desc
 
 void init_reg_q_flush_key(REG_Q_FLUSH_KEY *q_u, POLICY_HND *pol)
 {
-	memcpy(&q_u->pol, pol, sizeof(q_u->pol));
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -199,19 +162,8 @@ reads or writes a structure.
 
 BOOL reg_io_r_flush_key(const char *desc,  REG_R_FLUSH_KEY *r_r, prs_struct *ps, int depth)
 {
-	if (r_r == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "reg_io_r_flush_key");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-	
-	if(!prs_ntstatus("status", ps, depth, &r_r->status))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -220,35 +172,8 @@ reads or writes SEC_DESC_BUF and SEC_DAT
 
 static BOOL reg_io_hdrbuf_sec(uint32 ptr, uint32 *ptr3, BUFHDR *hdr_sec, SEC_DESC_BUF *data, prs_struct *ps, int depth)
 {
-	if (ptr != 0) {
-		uint32 hdr_offset;
-		uint32 old_offset;
-		if(!smb_io_hdrbuf_pre("hdr_sec", hdr_sec, ps, depth, &hdr_offset))
-			return False;
-
-		old_offset = prs_offset(ps);
-
-		if (ptr3 != NULL) {
-			if(!prs_uint32("ptr3", ps, depth, ptr3))
-				return False;
-		}
-
-		if (ptr3 == NULL || *ptr3 != 0) {
-			if(!sec_io_desc_buf("data   ", &data, ps, depth)) /* JRA - this line is probably wrong... */
-				return False;
-		}
-
-		if(!smb_io_hdrbuf_post("hdr_sec", hdr_sec, ps, depth, hdr_offset,
-		                   data->max_len, data->len))
-				return False;
-		if(!prs_set_offset(ps, old_offset + data->len + sizeof(uint32) * ((ptr3 != NULL) ? 5 : 3)))
-			return False;
-
-		if(!prs_align(ps))
-			return False;
-	}
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -259,30 +184,8 @@ void init_reg_q_create_key(REG_Q_CREATE_
 				const char *name, const char *class, SEC_ACCESS *sam_access,
 				SEC_DESC_BUF *sec_buf)
 {
-	int len_name  = name  != NULL ? strlen(name ) + 1: 0;
-	int len_class = class != NULL ? strlen(class) + 1: 0;
-
-	ZERO_STRUCTP(q_c);
-
-	memcpy(&q_c->pnt_pol, hnd, sizeof(q_c->pnt_pol));
-
-	init_uni_hdr(&q_c->hdr_name, len_name);
-	init_unistr2(&q_c->uni_name, name, len_name);
-
-	init_uni_hdr(&q_c->hdr_class, len_class);
-	init_unistr2(&q_c->uni_class, class, len_class);
-
-	q_c->reserved = 0x00000000;
-	memcpy(&q_c->sam_access, sam_access, sizeof(q_c->sam_access));
-
-	q_c->ptr1 = 1;
-	q_c->sec_info = DACL_SECURITY_INFORMATION | SACL_SECURITY_INFORMATION;
-
-	q_c->data = sec_buf;
-	q_c->ptr2 = 1;
-	init_buf_hdr(&q_c->hdr_sec, sec_buf->len, sec_buf->len);
-	q_c->ptr3 = 1;
-	q_c->unknown_2 = 0x00000000;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -291,54 +194,8 @@ reads or writes a structure.
 
 BOOL reg_io_q_create_key(const char *desc,  REG_Q_CREATE_KEY *r_q, prs_struct *ps, int depth)
 {
-	if (r_q == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "reg_io_q_create_key");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-	
-	if(!smb_io_pol_hnd("", &r_q->pnt_pol, ps, depth))
-		return False;
-
-	if(!smb_io_unihdr ("", &r_q->hdr_name, ps, depth))
-		return False;
-	if(!smb_io_unistr2("", &r_q->uni_name, r_q->hdr_name.buffer, ps, depth))
-		return False;
-	if(!prs_align(ps))
-		return False;
-
-	if(!smb_io_unihdr ("", &r_q->hdr_class, ps, depth))
-		return False;
-	if(!smb_io_unistr2("", &r_q->uni_class, r_q->hdr_class.buffer, ps, depth))
-		return False;
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_uint32("reserved", ps, depth, &r_q->reserved))
-		return False;
-	if(!sec_io_access("sam_access", &r_q->sam_access, ps, depth))
-		return False;
-
-	if(!prs_uint32("ptr1", ps, depth, &r_q->ptr1))
-		return False;
-
-	if (r_q->ptr1 != 0) {
-		if(!prs_uint32("sec_info", ps, depth, &r_q->sec_info))
-			return False;
-	}
-
-	if(!prs_uint32("ptr2", ps, depth, &r_q->ptr2))
-		return False;
-	if(!reg_io_hdrbuf_sec(r_q->ptr2, &r_q->ptr3, &r_q->hdr_sec, r_q->data, ps, depth))
-		return False;
-
-	if(!prs_uint32("unknown_2", ps, depth, &r_q->unknown_2))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -347,24 +204,8 @@ reads or writes a structure.
 
 BOOL reg_io_r_create_key(const char *desc,  REG_R_CREATE_KEY *r_r, prs_struct *ps, int depth)
 {
-	if (r_r == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "reg_io_r_create_key");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-	
-	if(!smb_io_pol_hnd("", &r_r->key_pol, ps, depth))
-		return False;
-	if(!prs_uint32("unknown", ps, depth, &r_r->unknown))
-		return False;
-
-	if(!prs_ntstatus("status", ps, depth, &r_r->status))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 
@@ -375,13 +216,8 @@ BOOL reg_io_r_create_key(const char *des
 void init_reg_q_delete_val(REG_Q_DELETE_VALUE *q_c, POLICY_HND *hnd,
 				const char *name)
 {
-	int len_name  = name  != NULL ? strlen(name ) + 1: 0;
-	ZERO_STRUCTP(q_c);
-
-	memcpy(&q_c->pnt_pol, hnd, sizeof(q_c->pnt_pol));
-
-	init_uni_hdr(&q_c->hdr_name, len_name);
-	init_unistr2(&q_c->uni_name, name, len_name);
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -390,26 +226,8 @@ reads or writes a structure.
 
 BOOL reg_io_q_delete_val(const char *desc,  REG_Q_DELETE_VALUE *r_q, prs_struct *ps, int depth)
 {
-	if (r_q == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "reg_io_q_delete_val");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-	
-	if(!smb_io_pol_hnd("", &r_q->pnt_pol, ps, depth))
-		return False;
-
-	if(!smb_io_unihdr ("", &r_q->hdr_name, ps, depth))
-		return False;
-	if(!smb_io_unistr2("", &r_q->uni_name, r_q->hdr_name.buffer, ps, depth))
-		return False;
-	if(!prs_align(ps))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 
@@ -419,19 +237,8 @@ reads or writes a structure.
 
 BOOL reg_io_r_delete_val(const char *desc,  REG_R_DELETE_VALUE *r_r, prs_struct *ps, int depth)
 {
-	if (r_r == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "reg_io_r_delete_val");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-	
-	if(!prs_ntstatus("status", ps, depth, &r_r->status))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -441,13 +248,8 @@ BOOL reg_io_r_delete_val(const char *des
 void init_reg_q_delete_key(REG_Q_DELETE_KEY *q_c, POLICY_HND *hnd,
 				const char *name)
 {
-	int len_name  = name  != NULL ? strlen(name ) + 1: 0;
-	ZERO_STRUCTP(q_c);
-
-	memcpy(&q_c->pnt_pol, hnd, sizeof(q_c->pnt_pol));
-
-	init_uni_hdr(&q_c->hdr_name, len_name);
-	init_unistr2(&q_c->uni_name, name, len_name);
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -456,26 +258,8 @@ reads or writes a structure.
 
 BOOL reg_io_q_delete_key(const char *desc,  REG_Q_DELETE_KEY *r_q, prs_struct *ps, int depth)
 {
-	if (r_q == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "reg_io_q_delete_key");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-	
-	if(!smb_io_pol_hnd("", &r_q->pnt_pol, ps, depth))
-		return False;
-
-	if(!smb_io_unihdr ("", &r_q->hdr_name, ps, depth))
-		return False;
-	if(!smb_io_unistr2("", &r_q->uni_name, r_q->hdr_name.buffer, ps, depth))
-		return False;
-	if(!prs_align(ps))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -484,19 +268,8 @@ reads or writes a structure.
 
 BOOL reg_io_r_delete_key(const char *desc,  REG_R_DELETE_KEY *r_r, prs_struct *ps, int depth)
 {
-	if (r_r == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "reg_io_r_delete_key");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-	
-	if(!prs_ntstatus("status", ps, depth, &r_r->status))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -506,11 +279,8 @@ BOOL reg_io_r_delete_key(const char *des
 void init_reg_q_query_key(REG_Q_QUERY_KEY *q_o, POLICY_HND *hnd,
 				uint32 max_class_len)
 {
-	ZERO_STRUCTP(q_o);
-
-	memcpy(&q_o->pol, hnd, sizeof(q_o->pol));
-	init_uni_hdr(&q_o->hdr_class, max_class_len);
-	q_o->uni_class.uni_max_len = max_class_len;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -519,26 +289,8 @@ reads or writes a structure.
 
 BOOL reg_io_q_query_key(const char *desc,  REG_Q_QUERY_KEY *r_q, prs_struct *ps, int depth)
 {
-	if (r_q == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "reg_io_q_query_key");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-	
-	if(!smb_io_pol_hnd("", &r_q->pol, ps, depth))
-		return False;
-	if(!smb_io_unihdr ("", &r_q->hdr_class, ps, depth))
-		return False;
-	if(!smb_io_unistr2("", &r_q->uni_class, r_q->hdr_class.buffer, ps, depth))
-		return False;
-
-	if(!prs_align(ps))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 
@@ -548,44 +300,8 @@ reads or writes a structure.
 
 BOOL reg_io_r_query_key(const char *desc,  REG_R_QUERY_KEY *r_r, prs_struct *ps, int depth)
 {
-	if (r_r == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "reg_io_r_query_key");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-	
-	if(!smb_io_unihdr ("", &r_r->hdr_class, ps, depth))
-		return False;
-	if(!smb_io_unistr2("", &r_r->uni_class, r_r->hdr_class.buffer, ps, depth))
-		return False;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_uint32("num_subkeys   ", ps, depth, &r_r->num_subkeys))
-		return False;
-	if(!prs_uint32("max_subkeylen ", ps, depth, &r_r->max_subkeylen))
-		return False;
-	if(!prs_uint32("mak_subkeysize", ps, depth, &r_r->max_subkeysize))
-		return False;
-	if(!prs_uint32("num_values    ", ps, depth, &r_r->num_values))
-		return False;
-	if(!prs_uint32("max_valnamelen", ps, depth, &r_r->max_valnamelen))
-		return False;
-	if(!prs_uint32("max_valbufsize", ps, depth, &r_r->max_valbufsize))
-		return False;
-	if(!prs_uint32("sec_desc      ", ps, depth, &r_r->sec_desc))
-		return False;
-	if(!smb_io_time("mod_time     ", &r_r->mod_time, ps, depth))
-		return False;
-	
-	if(!prs_ntstatus("status", ps, depth, &r_r->status))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -594,7 +310,8 @@ BOOL reg_io_r_query_key(const char *desc
 
 void init_reg_q_unk_1a(REG_Q_UNK_1A *q_o, POLICY_HND *hnd)
 {
-	memcpy(&q_o->pol, hnd, sizeof(q_o->pol));
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -603,19 +320,8 @@ reads or writes a structure.
 
 BOOL reg_io_q_unk_1a(const char *desc,  REG_Q_UNK_1A *r_q, prs_struct *ps, int depth)
 {
-	if (r_q == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "reg_io_q_unk_1a");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-	
-	if(!smb_io_pol_hnd("", &r_q->pol, ps, depth))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -624,21 +330,8 @@ reads or writes a structure.
 
 BOOL reg_io_r_unk_1a(const char *desc,  REG_R_UNK_1A *r_r, prs_struct *ps, int depth)
 {
-	if (r_r == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "reg_io_r_unk_1a");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-	
-	if(!prs_uint32("unknown", ps, depth, &r_r->unknown))
-		return False;
-	if(!prs_ntstatus("status" , ps, depth, &r_r->status))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -648,10 +341,8 @@ BOOL reg_io_r_unk_1a(const char *desc,
 void init_reg_q_open_hku(REG_Q_OPEN_HKU *q_o,
 				uint16 unknown_0, uint32 level)
 {
-	q_o->ptr = 1;
-	q_o->unknown_0 = unknown_0;
-	q_o->unknown_1 = 0x0; /* random - changes */
-	q_o->level = level;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -660,28 +351,9 @@ reads or writes a structure.
 
 BOOL reg_io_q_open_hku(const char *desc,  REG_Q_OPEN_HKU *r_q, prs_struct *ps, int depth)
 {
-	if (r_q == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "reg_io_q_open_hku");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-	
-	if(!prs_uint32("ptr      ", ps, depth, &r_q->ptr))
-		return False;
-	if (r_q->ptr != 0) {
-		if(!prs_uint16("unknown_0", ps, depth, &r_q->unknown_0))
-			return False;
-		if(!prs_uint16("unknown_1", ps, depth, &r_q->unknown_1))
-			return False;
-		if(!prs_uint32("level    ", ps, depth, &r_q->level))
-			return False;
-	}
-
-	return True;
-}
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
+}
 
 /*******************************************************************
 reads or writes a structure.
@@ -689,22 +361,8 @@ reads or writes a structure.
 
 BOOL reg_io_r_open_hku(const char *desc,  REG_R_OPEN_HKU *r_r, prs_struct *ps, int depth)
 {
-	if (r_r == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "reg_io_r_open_hku");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-	
-	if(!smb_io_pol_hnd("", &r_r->pol, ps, depth))
-		return False;
-
-	if(!prs_ntstatus("status", ps, depth, &r_r->status))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -713,9 +371,8 @@ BOOL reg_io_r_open_hku(const char *desc,
 
 void init_reg_q_close(REG_Q_CLOSE *q_c, POLICY_HND *hnd)
 {
-	DEBUG(5,("init_reg_q_close\n"));
-
-	memcpy(&q_c->pol, hnd, sizeof(q_c->pol));
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -773,13 +430,8 @@ makes a structure.
 
 void init_reg_q_set_key_sec(REG_Q_SET_KEY_SEC *q_i, POLICY_HND *pol, SEC_DESC_BUF *sec_desc_buf)
 {
-	memcpy(&q_i->pol, pol, sizeof(q_i->pol));
-
-	q_i->sec_info = DACL_SECURITY_INFORMATION;
-
-	q_i->ptr = 1;
-	init_buf_hdr(&q_i->hdr_sec, sec_desc_buf->len, sec_desc_buf->len);
-	q_i->data = sec_desc_buf;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -788,27 +440,8 @@ reads or writes a structure.
 
 BOOL reg_io_q_set_key_sec(const char *desc,  REG_Q_SET_KEY_SEC *r_q, prs_struct *ps, int depth)
 {
-	if (r_q == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "reg_io_q_set_key_sec");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-	
-	if(!smb_io_pol_hnd("", &r_q->pol, ps, depth))
-		return False;
-
-	if(!prs_uint32("sec_info", ps, depth, &r_q->sec_info))
-		return False;
-	if(!prs_uint32("ptr    ", ps, depth, &r_q->ptr))
-		return False;
-
-	if(!reg_io_hdrbuf_sec(r_q->ptr, NULL, &r_q->hdr_sec, r_q->data, ps, depth))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -817,19 +450,8 @@ reads or writes a structure.
 
 BOOL reg_io_r_set_key_sec(const char *desc, REG_R_SET_KEY_SEC *r_q, prs_struct *ps, int depth)
 {
-	if (r_q == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "reg_io_r_set_key_sec");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-	
-	if(!prs_ntstatus("status", ps, depth, &r_q->status))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 
@@ -840,16 +462,8 @@ makes a structure.
 void init_reg_q_get_key_sec(REG_Q_GET_KEY_SEC *q_i, POLICY_HND *pol, 
 				uint32 sec_buf_size, SEC_DESC_BUF *psdb)
 {
-	memcpy(&q_i->pol, pol, sizeof(q_i->pol));
-
-	q_i->sec_info = OWNER_SECURITY_INFORMATION |
-	                GROUP_SECURITY_INFORMATION |
-	                DACL_SECURITY_INFORMATION;
-
-	q_i->ptr = psdb != NULL ? 1 : 0;
-	q_i->data = psdb;
-
-	init_buf_hdr(&q_i->hdr_sec, sec_buf_size, 0);
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -858,27 +472,8 @@ reads or writes a structure.
 
 BOOL reg_io_q_get_key_sec(const char *desc,  REG_Q_GET_KEY_SEC *r_q, prs_struct *ps, int depth)
 {
-	if (r_q == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "reg_io_q_get_key_sec");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-	
-	if(!smb_io_pol_hnd("", &r_q->pol, ps, depth))
-		return False;
-
-	if(!prs_uint32("sec_info", ps, depth, &r_q->sec_info))
-		return False;
-	if(!prs_uint32("ptr     ", ps, depth, &r_q->ptr))
-		return False;
-
-	if(!reg_io_hdrbuf_sec(r_q->ptr, NULL, &r_q->hdr_sec, r_q->data, ps, depth))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 #if 0
@@ -903,31 +498,8 @@ reads or writes a structure.
 
 BOOL reg_io_r_get_key_sec(const char *desc,  REG_R_GET_KEY_SEC *r_q, prs_struct *ps, int depth)
 {
-	if (r_q == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "reg_io_r_get_key_sec");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-	
-	if(!prs_uint32("ptr      ", ps, depth, &r_q->ptr))
-		return False;
-
-	if (r_q->ptr != 0) {
-		if(!smb_io_hdrbuf("", &r_q->hdr_sec, ps, depth))
-			return False;
-		if(!sec_io_desc_buf("", &r_q->data, ps, depth))
-			return False;
-		if(!prs_align(ps))
-			return False;
-	}
-
-	if(!prs_ntstatus("status", ps, depth, &r_q->status))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -936,31 +508,8 @@ makes a structure.
 
 BOOL init_reg_q_info(REG_Q_INFO *q_i, POLICY_HND *pol, char* val_name)
 {
-        int len_type = val_name != NULL ? strlen(val_name) + 1 : 0;
-
-        if (q_i == NULL)
-                return False;
-
-        q_i->pol = *pol;
-
-        init_uni_hdr(&(q_i->hdr_type), len_type);
-        init_unistr2(&(q_i->uni_type), val_name, len_type);
-
-        q_i->ptr_reserved = 1;
-        q_i->ptr_buf = 1;
-
-        q_i->ptr_bufsize = 1;
-        q_i->bufsize = 0;
-        q_i->buf_unk = 0;
-
-        q_i->unk1 = 0;
-        q_i->ptr_buflen = 1;
-        q_i->buflen = 0;
-
-        q_i->ptr_buflen2 = 1;
-        q_i->buflen2 = 0;
-
-        return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -969,56 +518,8 @@ reads or writes a structure.
 
 BOOL reg_io_q_info(const char *desc,  REG_Q_INFO *r_q, prs_struct *ps, int depth)
 {
-	if (r_q == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "reg_io_q_info");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-	
-	if(!smb_io_pol_hnd("", &r_q->pol, ps, depth))
-		return False;
-	if(!smb_io_unihdr ("", &r_q->hdr_type, ps, depth))
-		return False;
-	if(!smb_io_unistr2("", &r_q->uni_type, r_q->hdr_type.buffer, ps, depth))
-		return False;
-
-	if(!prs_align(ps))
-		return False;
-	
-	if(!prs_uint32("ptr_reserved", ps, depth, &(r_q->ptr_reserved)))
-		return False;
-
-	if(!prs_uint32("ptr_buf", ps, depth, &(r_q->ptr_buf)))
-		return False;
-
-	if(r_q->ptr_buf) {
-		if(!prs_uint32("ptr_bufsize", ps, depth, &(r_q->ptr_bufsize)))
-			return False;
-		if(!prs_uint32("bufsize", ps, depth, &(r_q->bufsize)))
-			return False;
-		if(!prs_uint32("buf_unk", ps, depth, &(r_q->buf_unk)))
-			return False;
-	}
-
-	if(!prs_uint32("unk1", ps, depth, &(r_q->unk1)))
-		return False;
-
-	if(!prs_uint32("ptr_buflen", ps, depth, &(r_q->ptr_buflen)))
-		return False;
-
-	if (r_q->ptr_buflen) {
-		if(!prs_uint32("buflen", ps, depth, &(r_q->buflen)))
-			return False;
-		if(!prs_uint32("ptr_buflen2", ps, depth, &(r_q->ptr_buflen2)))
-			return False;
-		if(!prs_uint32("buflen2", ps, depth, &(r_q->buflen2)))
-			return False;
-	}
-
- 	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1028,27 +529,8 @@ BOOL reg_io_q_info(const char *desc,  RE
 BOOL init_reg_r_info(uint32 include_keyval, REG_R_INFO *r_r,
 		     BUFFER2* buf, uint32 type, NTSTATUS status)
 {
-  if(r_r == NULL)
-    return False;
-
-  
-  r_r->ptr_type = 1;
-  r_r->type = type;
-
-  /* if include_keyval is not set, don't send the key value, just
-     the buflen data. probably used by NT5 to allocate buffer space - SK */
-  r_r->ptr_uni_val = include_keyval ? 1:0;
-  r_r->uni_val = buf;
-
-  r_r->ptr_max_len = 1;
-  r_r->buf_max_len = r_r->uni_val->buf_max_len;
-
-  r_r->ptr_len = 1;
-  r_r->buf_len = r_r->uni_val->buf_len;
-
-  r_r->status = status;
-
-  return True;
+DEBUG(1,("function ommited\n"));
+/* function omited*/
   
 }
 
@@ -1058,53 +540,8 @@ reads or writes a structure.
 
 BOOL reg_io_r_info(const char *desc, REG_R_INFO *r_r, prs_struct *ps, int depth)
 {
-	if (r_r == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "reg_io_r_info");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-	
-	if(!prs_uint32("ptr_type", ps, depth, &(r_r->ptr_type)))
-		return False;
-
-	if (r_r->ptr_type != 0) {
-		if(!prs_uint32("type", ps, depth, &r_r->type))
-			return False;
-	}
-
-	if(!prs_uint32("ptr_uni_val", ps, depth, &(r_r->ptr_uni_val)))
-		return False;
-
-	if(r_r->ptr_uni_val != 0) {
-		if(!smb_io_buffer2("uni_val", r_r->uni_val, r_r->ptr_uni_val, ps, depth))
-			return False;
-	}
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_uint32("ptr_max_len", ps, depth, &(r_r->ptr_max_len)))
-		return False;
-
-	if (r_r->ptr_max_len != 0) {
-		if(!prs_uint32("buf_max_len", ps, depth, &(r_r->buf_max_len)))
-		return False;
-	}
-
-	if(!prs_uint32("ptr_len", ps, depth, &(r_r->ptr_len)))
-		return False;
-	if (r_r->ptr_len != 0) {
-		if(!prs_uint32("buf_len", ps, depth, &(r_r->buf_len)))
-			return False;
-	}
-
-	if(!prs_ntstatus("status", ps, depth, &r_r->status))
-		return False;
-
- 	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1115,25 +552,8 @@ void init_reg_q_enum_val(REG_Q_ENUM_VALU
 				uint32 val_idx, uint32 max_val_len,
 				uint32 max_buf_len)
 {
-	ZERO_STRUCTP(q_i);
-
-	memcpy(&q_i->pol, pol, sizeof(q_i->pol));
-
-	q_i->val_index = val_idx;
-	init_uni_hdr(&q_i->hdr_name, max_val_len);
-	q_i->uni_name.uni_max_len = max_val_len;
-	
-	q_i->ptr_type = 1;
-	q_i->type = 0x0;
-
-	q_i->ptr_value = 1;
-	q_i->buf_value.buf_max_len = max_buf_len;
-
-	q_i->ptr1 = 1;
-	q_i->len_value1 = max_buf_len;
-
-	q_i->ptr2 = 1;
-	q_i->len_value2 = 0;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1142,56 +562,8 @@ reads or writes a structure.
 
 BOOL reg_io_q_enum_val(const char *desc,  REG_Q_ENUM_VALUE *q_q, prs_struct *ps, int depth)
 {
-	if (q_q == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "reg_io_q_enum_val");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-	
-	if(!smb_io_pol_hnd("", &q_q->pol, ps, depth))
-		return False;
-	
-	if(!prs_uint32("val_index", ps, depth, &q_q->val_index))
-		return False;
-	if(!smb_io_unihdr ("hdr_name", &q_q->hdr_name, ps, depth))
-		return False;
-	if(!smb_io_unistr2("uni_name", &q_q->uni_name, q_q->hdr_name.buffer, ps, depth))
-		return False;
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_uint32("ptr_type", ps, depth, &q_q->ptr_type))
-		return False;
-
-	if (q_q->ptr_type != 0) {
-		if(!prs_uint32("type", ps, depth, &q_q->type))
-			return False;
-	}
-
-	if(!prs_uint32("ptr_value", ps, depth, &q_q->ptr_value))
-		return False;
-	if(!smb_io_buffer2("buf_value", &q_q->buf_value, q_q->ptr_value, ps, depth))
-		return False;
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_uint32("ptr1", ps, depth, &q_q->ptr1))
-		return False;
-	if (q_q->ptr1 != 0) {
-		if(!prs_uint32("len_value1", ps, depth, &q_q->len_value1))
-			return False;
-	}
-	if(!prs_uint32("ptr2", ps, depth, &q_q->ptr2))
-		return False;
-	if (q_q->ptr2 != 0) {
-		if(!prs_uint32("len_value2", ps, depth, &q_q->len_value2))
-			return False;
-	}
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1200,55 +572,8 @@ reads or writes a structure.
 
 BOOL reg_io_r_enum_val(const char *desc,  REG_R_ENUM_VALUE *r_q, prs_struct *ps, int depth)
 {
-	if (r_q == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "reg_io_r_enum_val");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-	
-	if(!smb_io_unihdr ("hdr_name", &r_q->hdr_name, ps, depth))
-		return False;
-	if(!smb_io_unistr2("uni_name", &r_q->uni_name, r_q->hdr_name.buffer, ps, depth))
-		return False;
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_uint32("ptr_type", ps, depth, &r_q->ptr_type))
-		return False;
-
-	if (r_q->ptr_type != 0) {
-		if(!prs_uint32("type", ps, depth, &r_q->type))
-			return False;
-	}
-
-	if(!prs_uint32("ptr_value", ps, depth, &r_q->ptr_value))
-		return False;
-	if(!smb_io_buffer2("buf_value", r_q->buf_value, r_q->ptr_value, ps, depth))
-		return False;
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_uint32("ptr1", ps, depth, &r_q->ptr1))
-		return False;
-	if (r_q->ptr1 != 0) {
-		if(!prs_uint32("len_value1", ps, depth, &r_q->len_value1))
-			return False;
-	}
-
-	if(!prs_uint32("ptr2", ps, depth, &r_q->ptr2))
-		return False;
-	if (r_q->ptr2 != 0) {
-		if(!prs_uint32("len_value2", ps, depth, &r_q->len_value2))
-			return False;
-	}
-
-	if(!prs_ntstatus("status", ps, depth, &r_q->status))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1259,17 +584,8 @@ void init_reg_q_create_val(REG_Q_CREATE_
 				const char *val_name, uint32 type,
 				BUFFER3 *val)
 {
-	int val_len = strlen(val_name) + 1;
-
-	ZERO_STRUCTP(q_i);
-
-	memcpy(&q_i->pol, pol, sizeof(q_i->pol));
-
-	init_uni_hdr(&q_i->hdr_name, val_len);
-	init_unistr2(&q_i->uni_name, val_name, val_len);
-	
-	q_i->type      = type;
-	q_i->buf_value = val;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1278,33 +594,8 @@ reads or writes a structure.
 
 BOOL reg_io_q_create_val(const char *desc,  REG_Q_CREATE_VALUE *q_q, prs_struct *ps, int depth)
 {
-	if (q_q == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "reg_io_q_create_val");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-	
-	if(!smb_io_pol_hnd("", &q_q->pol, ps, depth))
-		return False;
-	
-	if(!smb_io_unihdr ("hdr_name", &q_q->hdr_name, ps, depth))
-		return False;
-	if(!smb_io_unistr2("uni_name", &q_q->uni_name, q_q->hdr_name.buffer, ps, depth))
-		return False;
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_uint32("type", ps, depth, &q_q->type))
-		return False;
-	if(!smb_io_buffer3("buf_value", q_q->buf_value, ps, depth))
-		return False;
-	if(!prs_align(ps))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1313,19 +604,8 @@ reads or writes a structure.
 
 BOOL reg_io_r_create_val(const char *desc,  REG_R_CREATE_VALUE *r_q, prs_struct *ps, int depth)
 {
-	if (r_q == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "reg_io_r_create_val");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-	
-	if(!prs_ntstatus("status", ps, depth, &r_q->status))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1334,21 +614,8 @@ makes a structure.
 
 void init_reg_q_enum_key(REG_Q_ENUM_KEY *q_i, POLICY_HND *pol, uint32 key_idx)
 {
-	memcpy(&q_i->pol, pol, sizeof(q_i->pol));
-
-	q_i->key_index = key_idx;
-	q_i->key_name_len = 0;
-	q_i->unknown_1 = 0x0414;
-
-	q_i->ptr1 = 1;
-	q_i->unknown_2 = 0x0000020A;
-	memset(q_i->pad1, 0, sizeof(q_i->pad1));
-
-	q_i->ptr2 = 1;
-	memset(q_i->pad2, 0, sizeof(q_i->pad2));
-
-	q_i->ptr3 = 1;
-	unix_to_nt_time(&q_i->time, 0);            /* current time? */
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1357,52 +624,8 @@ reads or writes a structure.
 
 BOOL reg_io_q_enum_key(const char *desc,  REG_Q_ENUM_KEY *q_q, prs_struct *ps, int depth)
 {
-	if (q_q == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "reg_io_q_enum_key");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-	
-	if(!smb_io_pol_hnd("", &q_q->pol, ps, depth))
-		return False;
-	
-	if(!prs_uint32("key_index", ps, depth, &q_q->key_index))
-		return False;
-	if(!prs_uint16("key_name_len", ps, depth, &q_q->key_name_len))
-		return False;
-	if(!prs_uint16("unknown_1", ps, depth, &q_q->unknown_1))
-		return False;
-
-	if(!prs_uint32("ptr1", ps, depth, &q_q->ptr1))
-		return False;
-
-	if (q_q->ptr1 != 0) {
-		if(!prs_uint32("unknown_2", ps, depth, &q_q->unknown_2))
-			return False;
-		if(!prs_uint8s(False, "pad1", ps, depth, q_q->pad1, sizeof(q_q->pad1)))
-			return False;
-	}
-
-	if(!prs_uint32("ptr2", ps, depth, &q_q->ptr2))
-		return False;
-
-	if (q_q->ptr2 != 0) {
-		if(!prs_uint8s(False, "pad2", ps, depth, q_q->pad2, sizeof(q_q->pad2)))
-			return False;
-	}
-
-	if(!prs_uint32("ptr3", ps, depth, &q_q->ptr3))
-		return False;
-
-	if (q_q->ptr3 != 0) {
-		if(!smb_io_time("", &q_q->time, ps, depth))
-			return False;
-	}
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1411,54 +634,8 @@ reads or writes a structure.
 
 BOOL reg_io_r_enum_key(const char *desc,  REG_R_ENUM_KEY *r_q, prs_struct *ps, int depth)
 {
-	if (r_q == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "reg_io_r_enum_key");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-	
-	if(!prs_uint16("key_name_len", ps, depth, &r_q->key_name_len))
-		return False;
-	if(!prs_uint16("unknown_1", ps, depth, &r_q->unknown_1))
-		return False;
-
-	if(!prs_uint32("ptr1", ps, depth, &r_q->ptr1))
-		return False;
-
-	if (r_q->ptr1 != 0) {
-		if(!prs_uint32("unknown_2", ps, depth, &r_q->unknown_2))
-			return False;
-		if(!prs_uint32("unknown_3", ps, depth, &r_q->unknown_3))
-			return False;
-		if(!smb_io_unistr3("key_name", &r_q->key_name, ps, depth))
-			return False;
-		if(!prs_align(ps))
-			return False;
-	}
-
-	if(!prs_uint32("ptr2", ps, depth, &r_q->ptr2))
-		return False;
-
-	if (r_q->ptr2 != 0) {
-		if(!prs_uint8s(False, "pad2", ps, depth, r_q->pad2, sizeof(r_q->pad2)))
-			return False;
-	}
-
-	if(!prs_uint32("ptr3", ps, depth, &r_q->ptr3))
-		return False;
-
-	if (r_q->ptr3 != 0) {
-		if(!smb_io_time("", &r_q->time, ps, depth))
-			return False;
-	}
-
-	if(!prs_ntstatus("status", ps, depth, &r_q->status))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1468,15 +645,8 @@ makes a structure.
 void init_reg_q_open_entry(REG_Q_OPEN_ENTRY *r_q, POLICY_HND *pol,
 				const char *key_name, uint32 unk)
 {
-	int len_name = strlen(key_name)+1;
-
-	memcpy(&r_q->pol, pol, sizeof(r_q->pol));
-
-	init_uni_hdr(&r_q->hdr_name, len_name);
-	init_unistr2(&r_q->uni_name, key_name, len_name);
-
-	r_q->unknown_0 = 0x00000000;
-	r_q->unknown_1 = unk;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1519,8 +689,8 @@ BOOL reg_io_q_open_entry(const char *des
 void init_reg_r_open_entry(REG_R_OPEN_ENTRY *r_r,
 			   POLICY_HND *pol, NTSTATUS status)
 {
-	memcpy(&r_r->pol, pol, sizeof(r_r->pol));
-	r_r->status = status;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1553,18 +723,8 @@ Inits a structure.
 void init_reg_q_shutdown(REG_Q_SHUTDOWN * q_s,
 			 const char *msg, uint32 timeout, uint16 flags)
 {
-	int msg_len;
-	msg_len = strlen(msg);
-
-	q_s->ptr_0 = 1;
-	q_s->ptr_1 = 1;
-	q_s->ptr_2 = 1;
-
-	init_uni_hdr(&(q_s->hdr_msg), msg_len);
-	init_unistr2(&(q_s->uni_msg), msg, msg_len);
-
-	q_s->timeout = timeout;
-	q_s->flags = flags;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 
 }
 
@@ -1574,35 +734,8 @@ reads or writes a structure.
 BOOL reg_io_q_shutdown(const char *desc, REG_Q_SHUTDOWN * q_s, prs_struct *ps,
 		       int depth)
 {
-	if (q_s == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "reg_io_q_shutdown");
-	depth++;
-
-	if (!prs_align(ps))
-		return False;
-
-	if (!prs_uint32("ptr_0", ps, depth, &(q_s->ptr_0)))
-		return False;
-	if (!prs_uint32("ptr_1", ps, depth, &(q_s->ptr_1)))
-		return False;
-	if (!prs_uint32("ptr_2", ps, depth, &(q_s->ptr_2)))
-		return False;
-
-	if (!smb_io_unihdr("hdr_msg", &(q_s->hdr_msg), ps, depth))
-		return False;
-	if (!smb_io_unistr2("uni_msg", &(q_s->uni_msg), q_s->hdr_msg.buffer, ps, depth))
-		return False;
-	if (!prs_align(ps))
-		return False;
-
-	if (!prs_uint32("timeout", ps, depth, &(q_s->timeout)))
-		return False;
-	if (!prs_uint16("flags  ", ps, depth, &(q_s->flags)))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1611,19 +744,8 @@ reads or writes a structure.
 BOOL reg_io_r_shutdown(const char *desc, REG_R_SHUTDOWN * r_s, prs_struct *ps,
 		       int depth)
 {
-	if (r_s == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "reg_io_r_shutdown");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_ntstatus("status", ps, depth, &r_s->status))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1642,22 +764,8 @@ reads or writes a structure.
 BOOL reg_io_q_abort_shutdown(const char *desc, REG_Q_ABORT_SHUTDOWN * q_s,
 			     prs_struct *ps, int depth)
 {
-	if (q_s == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "reg_io_q_abort_shutdown");
-	depth++;
-
-	if (!prs_align(ps))
-		return False;
-
-	if (!prs_uint32("ptr_server", ps, depth, &(q_s->ptr_server)))
-		return False;
-	if (q_s->ptr_server != 0)
-		if (!prs_uint16("server", ps, depth, &(q_s->server)))
-			return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1666,17 +774,6 @@ reads or writes a structure.
 BOOL reg_io_r_abort_shutdown(const char *desc, REG_R_ABORT_SHUTDOWN * r_s,
 			     prs_struct *ps, int depth)
 {
-	if (r_s == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "reg_io_r_abort_shutdown");
-	depth++;
-
-	if (!prs_align(ps))
-		return False;
-
-	if (!prs_ntstatus("status", ps, depth, &r_s->status))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
diff -pruwN samba-2.2.12/source/rpc_parse/parse_rpc.c samba-2.2.12-livebox/rpc_parse/parse_rpc.c
--- samba-2.2.12/source/rpc_parse/parse_rpc.c	2004-08-12 20:24:27.000000000 +0200
+++ samba-2.2.12-livebox/rpc_parse/parse_rpc.c	2010-03-31 11:45:59.000000000 +0200
@@ -1034,20 +1034,8 @@ BOOL smb_io_rpc_auth_ntlmssp_resp(const
 
 BOOL rpc_auth_ntlmssp_chk(RPC_AUTH_NTLMSSP_CHK *chk, uint32 crc32, uint32 seq_num)
 {
-	if (chk == NULL)
-		return False;
-
-	if (chk->crc32 != crc32 ||
-	    chk->ver   != NTLMSSP_SIGN_VERSION ||
-	    chk->seq_num != seq_num)
-	{
-		DEBUG(5,("verify failed - crc %x ver %x seq %d\n",
-			crc32, NTLMSSP_SIGN_VERSION, seq_num));
-		DEBUG(5,("verify expect - crc %x ver %x seq %d\n",
-			chk->crc32, chk->ver, chk->seq_num));
-		return False;
-	}
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1057,10 +1045,8 @@ BOOL rpc_auth_ntlmssp_chk(RPC_AUTH_NTLMS
 void init_rpc_auth_ntlmssp_chk(RPC_AUTH_NTLMSSP_CHK *chk,
 				uint32 ver, uint32 crc32, uint32 seq_num)
 {
-	chk->ver      = ver;
-	chk->reserved = 0x0;
-	chk->crc32    = crc32;
-	chk->seq_num  = seq_num;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1069,23 +1055,6 @@ void init_rpc_auth_ntlmssp_chk(RPC_AUTH_
 
 BOOL smb_io_rpc_auth_ntlmssp_chk(const char *desc, RPC_AUTH_NTLMSSP_CHK *chk, prs_struct *ps, int depth)
 {
-	if (chk == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "smb_io_rpc_auth_ntlmssp_chk");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_uint32("ver     ", ps, depth, &chk->ver))
-		return False;
-	if(!prs_uint32("reserved", ps, depth, &chk->reserved))
-		return False;
-	if(!prs_uint32("crc32   ", ps, depth, &chk->crc32))
-		return False;
-	if(!prs_uint32("seq_num ", ps, depth, &chk->seq_num))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
diff -pruwN samba-2.2.12/source/rpc_parse/parse_samr.c samba-2.2.12-livebox/rpc_parse/parse_samr.c
--- samba-2.2.12/source/rpc_parse/parse_samr.c	2004-08-12 20:24:28.000000000 +0200
+++ samba-2.2.12-livebox/rpc_parse/parse_samr.c	2010-03-31 11:45:59.000000000 +0200
@@ -7,7 +7,7 @@
  *  Copyright (C) Paul Ashton                  1997-2000,
  *  Copyright (C) Elrond                            2000,
  *  Copyright (C) Jeremy Allison                    2001
- *  Copyright (C) Jean Franois Micouleau      1998-2001.
+ *  Copyright (C) Jean Fran�ois Micouleau      1998-2001.
  *  
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the GNU General Public License as published by
@@ -34,9 +34,8 @@ inits a SAMR_Q_CLOSE_HND structure.
 
 void init_samr_q_close_hnd(SAMR_Q_CLOSE_HND * q_c, POLICY_HND *hnd)
 {
-	DEBUG(5, ("init_samr_q_close_hnd\n"));
-	
-	q_c->pol = *hnd;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -46,16 +45,8 @@ reads or writes a structure.
 BOOL samr_io_q_close_hnd(const char *desc, SAMR_Q_CLOSE_HND * q_u,
 			 prs_struct *ps, int depth)
 {
-	if (q_u == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "samr_io_q_close_hnd");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	return smb_io_pol_hnd("pol", &q_u->pol, ps, depth);
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -65,22 +56,8 @@ reads or writes a structure.
 BOOL samr_io_r_close_hnd(const char *desc, SAMR_R_CLOSE_HND * r_u,
 			 prs_struct *ps, int depth)
 {
-	if (r_u == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "samr_io_r_close_hnd");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!smb_io_pol_hnd("pol", &r_u->pol, ps, depth))
-		return False;
-
-	if(!prs_ntstatus("status", ps, depth, &r_u->status))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -90,14 +67,8 @@ inits a SAMR_Q_LOOKUP_DOMAIN structure.
 void init_samr_q_lookup_domain(SAMR_Q_LOOKUP_DOMAIN * q_u,
 			       POLICY_HND *pol, const char *dom_name)
 {
-	int len_name = strlen(dom_name);
-
-	DEBUG(5, ("init_samr_q_lookup_domain\n"));
-
-	q_u->connect_pol = *pol;
-
-	init_uni_hdr(&q_u->hdr_domain, len_name);
-	init_unistr2(&q_u->uni_domain, dom_name, len_name);
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -106,25 +77,8 @@ reads or writes a structure.
 BOOL samr_io_q_lookup_domain(const char *desc, SAMR_Q_LOOKUP_DOMAIN * q_u,
 			     prs_struct *ps, int depth)
 {
-	if (q_u == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "samr_io_q_lookup_domain");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!smb_io_pol_hnd("connect_pol", &q_u->connect_pol, ps, depth))
-		return False;
-
-	if(!smb_io_unihdr("hdr_domain", &q_u->hdr_domain, ps, depth))
-		return False;
-
-	if(!smb_io_unistr2("uni_domain", &q_u->uni_domain, q_u->hdr_domain.buffer, ps, depth))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -134,14 +88,8 @@ inits a SAMR_R_LOOKUP_DOMAIN structure.
 void init_samr_r_lookup_domain(SAMR_R_LOOKUP_DOMAIN * r_u,
 			       DOM_SID *dom_sid, NTSTATUS status)
 {
-	DEBUG(5, ("init_samr_r_lookup_domain\n"));
-
-	r_u->status = status;
-	r_u->ptr_sid = 0;
-	if (NT_STATUS_IS_OK(status)) {
-		r_u->ptr_sid = 1;
-		init_dom_sid2(&r_u->dom_sid, dom_sid);
-	}
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -151,29 +99,8 @@ reads or writes a structure.
 BOOL samr_io_r_lookup_domain(const char *desc, SAMR_R_LOOKUP_DOMAIN * r_u,
 			     prs_struct *ps, int depth)
 {
-	if (r_u == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "samr_io_r_lookup_domain");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_uint32("ptr", ps, depth, &r_u->ptr_sid))
-		return False;
-
-	if (r_u->ptr_sid != 0) {
-		if(!smb_io_dom_sid2("sid", &r_u->dom_sid, ps, depth))
-			return False;
-		if(!prs_align(ps))
-			return False;
-	}
-
-	if(!prs_ntstatus("status", ps, depth, &r_u->status))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -182,10 +109,8 @@ reads or writes a structure.
 
 void init_samr_q_unknown_2d(SAMR_Q_UNKNOWN_2D * q_u, POLICY_HND *dom_pol, DOM_SID *sid)
 {
-	DEBUG(5, ("samr_init_samr_q_unknown_2d\n"));
-
-	q_u->dom_pol = *dom_pol;
-	init_dom_sid2(&q_u->sid, sid);
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -195,25 +120,8 @@ reads or writes a structure.
 BOOL samr_io_q_unknown_2d(const char *desc, SAMR_Q_UNKNOWN_2D * q_u,
 			  prs_struct *ps, int depth)
 {
-	if (q_u == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "samr_io_q_unknown_2d");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!smb_io_pol_hnd("domain_pol", &q_u->dom_pol, ps, depth))
-		return False;
-
-	if(!smb_io_dom_sid2("sid", &q_u->sid, ps, depth))
-		return False;
-
-	if(!prs_align(ps))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -223,19 +131,8 @@ reads or writes a structure.
 BOOL samr_io_r_unknown_2d(const char *desc, SAMR_R_UNKNOWN_2D * r_u,
 			  prs_struct *ps, int depth)
 {
-	if (r_u == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "samr_io_r_unknown_2d");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_ntstatus("status", ps, depth, &r_u->status))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -246,11 +143,8 @@ void init_samr_q_open_domain(SAMR_Q_OPEN
 			     POLICY_HND *pol, uint32 flags,
 			     const DOM_SID *sid)
 {
-	DEBUG(5, ("samr_init_samr_q_open_domain\n"));
-
-	q_u->pol = *pol;
-	q_u->flags = flags;
-	init_dom_sid2(&q_u->dom_sid, sid);
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -260,25 +154,8 @@ reads or writes a structure.
 BOOL samr_io_q_open_domain(const char *desc, SAMR_Q_OPEN_DOMAIN * q_u,
 			   prs_struct *ps, int depth)
 {
-	if (q_u == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "samr_io_q_open_domain");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!smb_io_pol_hnd("pol", &q_u->pol, ps, depth))
-		return False;
-
-	if(!prs_uint32("flags", ps, depth, &q_u->flags))
-		return False;
-
-	if(!smb_io_dom_sid2("sid", &q_u->dom_sid, ps, depth))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -288,22 +165,8 @@ reads or writes a structure.
 BOOL samr_io_r_open_domain(const char *desc, SAMR_R_OPEN_DOMAIN * r_u,
 			   prs_struct *ps, int depth)
 {
-	if (r_u == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "samr_io_r_open_domain");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!smb_io_pol_hnd("domain_pol", &r_u->domain_pol, ps, depth))
-		return False;
-
-	if(!prs_ntstatus("status", ps, depth, &r_u->status))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -313,9 +176,8 @@ reads or writes a structure.
 void init_samr_q_get_usrdom_pwinfo(SAMR_Q_GET_USRDOM_PWINFO * q_u,
 				   POLICY_HND *user_pol)
 {
-	DEBUG(5, ("samr_init_samr_q_get_usrdom_pwinfo\n"));
-
-	q_u->user_pol = *user_pol;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -325,16 +187,8 @@ reads or writes a structure.
 BOOL samr_io_q_get_usrdom_pwinfo(const char *desc, SAMR_Q_GET_USRDOM_PWINFO * q_u,
 				 prs_struct *ps, int depth)
 {
-	if (q_u == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "samr_io_q_get_usrdom_pwinfo");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	return smb_io_pol_hnd("user_pol", &q_u->user_pol, ps, depth);
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -343,21 +197,8 @@ BOOL samr_io_q_get_usrdom_pwinfo(const c
 
 void init_samr_r_get_usrdom_pwinfo(SAMR_R_GET_USRDOM_PWINFO *r_u, NTSTATUS status)
 {
-	DEBUG(5, ("init_samr_r_get_usrdom_pwinfo\n"));
-	
-	r_u->unknown_0 = 0x0000;
-
-	/*
-	 * used to be 	
-	 * r_u->unknown_1 = 0x0015;
-	 * but for trusts.
-	 */
-	r_u->unknown_1 = 0x01D1;
-	r_u->unknown_1 = 0x0015;
-
-	r_u->unknown_2 = 0x00000000;
-
-	r_u->status = status;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -367,25 +208,8 @@ reads or writes a structure.
 BOOL samr_io_r_get_usrdom_pwinfo(const char *desc, SAMR_R_GET_USRDOM_PWINFO * r_u,
 				 prs_struct *ps, int depth)
 {
-	if (r_u == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "samr_io_r_get_usrdom_pwinfo");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_uint16("unknown_0", ps, depth, &r_u->unknown_0))
-		return False;
-	if(!prs_uint16("unknown_1", ps, depth, &r_u->unknown_1))
-		return False;
-	if(!prs_uint32("unknown_2", ps, depth, &r_u->unknown_2))
-		return False;
-	if(!prs_ntstatus("status   ", ps, depth, &r_u->status))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -395,10 +219,8 @@ reads or writes a structure.
 void init_samr_q_query_sec_obj(SAMR_Q_QUERY_SEC_OBJ * q_u,
 			       POLICY_HND *user_pol, uint32 sec_info)
 {
-	DEBUG(5, ("samr_init_samr_q_query_sec_obj\n"));
-
-	q_u->user_pol = *user_pol;
-	q_u->sec_info = sec_info;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 
@@ -409,22 +231,8 @@ reads or writes a structure.
 BOOL samr_io_q_query_sec_obj(const char *desc, SAMR_Q_QUERY_SEC_OBJ * q_u,
 			     prs_struct *ps, int depth)
 {
-	if (q_u == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "samr_io_q_query_sec_obj");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!smb_io_pol_hnd("user_pol", &q_u->user_pol, ps, depth))
-		return False;
-
-	if(!prs_uint32("sec_info", ps, depth, &q_u->sec_info))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -434,10 +242,8 @@ reads or writes a structure.
 void init_samr_q_query_dom_info(SAMR_Q_QUERY_DOMAIN_INFO * q_u,
 				POLICY_HND *domain_pol, uint16 switch_value)
 {
-	DEBUG(5, ("samr_init_samr_q_query_dom_info\n"));
-
-	q_u->domain_pol = *domain_pol;
-	q_u->switch_value = switch_value;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -447,22 +253,8 @@ reads or writes a structure.
 BOOL samr_io_q_query_dom_info(const char *desc, SAMR_Q_QUERY_DOMAIN_INFO * q_u,
 			      prs_struct *ps, int depth)
 {
-	if (q_u == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "samr_io_q_query_dom_info");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!smb_io_pol_hnd("domain_pol", &q_u->domain_pol, ps, depth))
-		return False;
-
-	if(!prs_uint16("switch_value", ps, depth, &q_u->switch_value))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 
@@ -472,8 +264,8 @@ inits a structure.
 
 void init_unk_info3(SAM_UNK_INFO_3 *u_3, NTTIME nt_logout)
 {
-	u_3->logout.low = nt_logout.low;
-	u_3->logout.high = nt_logout.high;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -483,16 +275,8 @@ reads or writes a structure.
 static BOOL sam_io_unk_info3(const char *desc, SAM_UNK_INFO_3 * u_3,
 			     prs_struct *ps, int depth)
 {
-	if (u_3 == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "sam_io_unk_info3");
-	depth++;
-
-	if(!smb_io_time("logout", &u_3->logout, ps, depth))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -501,9 +285,8 @@ inits a structure.
 
 void init_unk_info6(SAM_UNK_INFO_6 * u_6)
 {
-	u_6->unknown_0 = 0x00000000;
-	u_6->ptr_0 = 1;
-	memset(u_6->padding, 0, sizeof(u_6->padding));	/* 12 bytes zeros */
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -513,20 +296,8 @@ reads or writes a structure.
 static BOOL sam_io_unk_info6(const char *desc, SAM_UNK_INFO_6 * u_6,
 			     prs_struct *ps, int depth)
 {
-	if (u_6 == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "sam_io_unk_info6");
-	depth++;
-
-	if(!prs_uint32("unknown_0", ps, depth, &u_6->unknown_0)) /* 0x0000 0000 */
-		return False;
-	if(!prs_uint32("ptr_0", ps, depth, &u_6->ptr_0)) /* pointer to unknown structure */
-		return False;
-	if(!prs_uint8s(False, "padding", ps, depth, u_6->padding, sizeof(u_6->padding)))	/* 12 bytes zeros */
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -535,7 +306,8 @@ inits a structure.
 
 void init_unk_info7(SAM_UNK_INFO_7 * u_7)
 {
-	u_7->unknown_0 = 0x0003;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -563,12 +335,8 @@ inits a structure.
 
 void init_unk_info12(SAM_UNK_INFO_12 * u_12, NTTIME nt_lock_duration, NTTIME nt_reset_time, uint16 lockout)
 {
-	u_12->duration.low = nt_lock_duration.low;
-	u_12->duration.high = nt_lock_duration.high;
-	u_12->reset_count.low = nt_reset_time.low;
-	u_12->reset_count.high = nt_reset_time.high;
-
-	u_12->bad_attempt_lockout = lockout;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -578,20 +346,8 @@ reads or writes a structure.
 static BOOL sam_io_unk_info12(const char *desc, SAM_UNK_INFO_12 * u_12,
 			      prs_struct *ps, int depth)
 {
-	if (u_12 == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "sam_io_unk_info12");
-	depth++;
-
-	if(!smb_io_time("duration", &u_12->duration, ps, depth))
-		return False;
-	if(!smb_io_time("reset_count", &u_12->reset_count, ps, depth))
-		return False;
-	if(!prs_uint16("bad_attempt_lockout", ps, depth, &u_12->bad_attempt_lockout))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -599,11 +355,8 @@ inits a structure.
 ********************************************************************/
 void init_unk_info5(SAM_UNK_INFO_5 * u_5,const char *server)
 {
-	int len_server = strlen(server);
-
-	init_uni_hdr(&u_5->hdr_server, len_server);
-
-	init_unistr2(&u_5->uni_server, server, len_server);
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -613,19 +366,8 @@ reads or writes a structure.
 static BOOL sam_io_unk_info5(const char *desc, SAM_UNK_INFO_5 * u_5,
 			     prs_struct *ps, int depth)
 {
-	if (u_5 == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "sam_io_unk_info5");
-	depth++;
-
-	if(!smb_io_unihdr("hdr_server", &u_5->hdr_server, ps, depth))
-		return False;
-
-	if(!smb_io_unistr2("uni_server", &u_5->uni_server, u_5->hdr_server.buffer, ps, depth))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -635,31 +377,8 @@ void init_unk_info2(SAM_UNK_INFO_2 * u_2
 			const char *domain, const char *server,
 			uint32 seq_num, uint32 num_users, uint32 num_groups, uint32 num_alias)
 {
-	int len_domain = strlen(domain);
-	int len_server = strlen(server);
-
-	u_2->unknown_0 = 0x00000000;
-	u_2->unknown_1 = 0x80000000;
-	u_2->unknown_2 = 0x00000000;
-
-	u_2->ptr_0 = 1;
-	init_uni_hdr(&u_2->hdr_domain, len_domain);
-	init_uni_hdr(&u_2->hdr_server, len_server);
-
-	u_2->seq_num = seq_num;
-	u_2->unknown_3 = 0x00000000;
-
-	u_2->unknown_4 = 0x00000001;
-	u_2->unknown_5 = 0x00000003;
-	u_2->unknown_6 = 0x00000001;
-	u_2->num_domain_usrs = num_users;
-	u_2->num_domain_grps = num_groups;
-	u_2->num_local_grps = num_alias;
-
-	memset(u_2->padding, 0, sizeof(u_2->padding));	/* 12 bytes zeros */
-
-	init_unistr2(&u_2->uni_domain, domain, len_domain);
-	init_unistr2(&u_2->uni_server, server, len_server);
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -669,57 +388,8 @@ reads or writes a structure.
 static BOOL sam_io_unk_info2(const char *desc, SAM_UNK_INFO_2 * u_2,
 			     prs_struct *ps, int depth)
 {
-	if (u_2 == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "sam_io_unk_info2");
-	depth++;
-
-	if(!prs_uint32("unknown_0", ps, depth, &u_2->unknown_0)) /* 0x0000 0000 */
-		return False;
-	if(!prs_uint32("unknown_1", ps, depth, &u_2->unknown_1)) /* 0x8000 0000 */
-		return False;
-	if(!prs_uint32("unknown_2", ps, depth, &u_2->unknown_2))	/* 0x0000 0000 */
-		return False;
-
-	if(!prs_uint32("ptr_0", ps, depth, &u_2->ptr_0))
-		return False;
-	if(!smb_io_unihdr("hdr_domain", &u_2->hdr_domain, ps, depth))
-		return False;
-	if(!smb_io_unihdr("hdr_server", &u_2->hdr_server, ps, depth))
-		return False;
-
-	/* put all the data in here, at the moment, including what the above
-	   pointer is referring to
-	 */
-
-	if(!prs_uint32("seq_num ", ps, depth, &u_2->seq_num))	/* 0x0000 0099 or 0x1000 0000 */
-		return False;
-	if(!prs_uint32("unknown_3 ", ps, depth, &u_2->unknown_3))	/* 0x0000 0000 */
-		return False;
-
-	if(!prs_uint32("unknown_4 ", ps, depth, &u_2->unknown_4)) /* 0x0000 0001 */
-		return False;
-	if(!prs_uint32("unknown_5 ", ps, depth, &u_2->unknown_5)) /* 0x0000 0003 */
-		return False;
-	if(!prs_uint32("unknown_6 ", ps, depth, &u_2->unknown_6)) /* 0x0000 0001 */
-		return False;
-	if(!prs_uint32("num_domain_usrs ", ps, depth, &u_2->num_domain_usrs))
-		return False;
-	if(!prs_uint32("num_domain_grps", ps, depth, &u_2->num_domain_grps))
-		return False;
-	if(!prs_uint32("num_local_grps", ps, depth, &u_2->num_local_grps))
-		return False;
-
-	if(!prs_uint8s(False, "padding", ps, depth, u_2->padding,sizeof(u_2->padding)))
-		return False;
-
-	if(!smb_io_unistr2("uni_domain", &u_2->uni_domain, u_2->hdr_domain.buffer, ps, depth))
-		return False;
-	if(!smb_io_unistr2("uni_server", &u_2->uni_server, u_2->hdr_server.buffer, ps, depth))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -729,17 +399,8 @@ inits a structure.
 void init_unk_info1(SAM_UNK_INFO_1 *u_1, uint16 min_pass_len, uint16 pass_hist, 
 		    uint32 flag, NTTIME nt_expire, NTTIME nt_min_age)
 {
-	u_1->min_length_password = min_pass_len;
-	u_1->password_history = pass_hist;
-	u_1->flag = flag;
-	
-	/* password never expire */
-	u_1->expire.high = nt_expire.high;
-	u_1->expire.low = nt_expire.low;
-	
-	/* can change the password now */
-	u_1->min_passwordage.high = nt_min_age.high;
-	u_1->min_passwordage.low = nt_min_age.low;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 	
 }
 
@@ -750,24 +411,8 @@ reads or writes a structure.
 static BOOL sam_io_unk_info1(const char *desc, SAM_UNK_INFO_1 * u_1,
 			     prs_struct *ps, int depth)
 {
-	if (u_1 == NULL)
-	  return False;
-
-	prs_debug(ps, depth, desc, "sam_io_unk_info1");
-	depth++;
-
-	if(!prs_uint16("min_length_password", ps, depth, &u_1->min_length_password))
-		return False;
-	if(!prs_uint16("password_history", ps, depth, &u_1->password_history))
-		return False;
-	if(!prs_uint32("flag", ps, depth, &u_1->flag))
-		return False;
-	if(!smb_io_time("expire", &u_1->expire, ps, depth))
-		return False;
-	if(!smb_io_time("min_passwordage", &u_1->min_passwordage, ps, depth))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -778,17 +423,8 @@ void init_samr_r_query_dom_info(SAMR_R_Q
 				uint16 switch_value, SAM_UNK_CTR * ctr,
 				NTSTATUS status)
 {
-	DEBUG(5, ("init_samr_r_query_dom_info\n"));
-
-	r_u->ptr_0 = 0;
-	r_u->switch_value = 0;
-	r_u->status = status;	/* return status */
-
-	if (NT_STATUS_IS_OK(status)) {
-		r_u->switch_value = switch_value;
-		r_u->ptr_0 = 1;
-		r_u->ctr = ctr;
-	}
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -798,126 +434,32 @@ reads or writes a structure.
 BOOL samr_io_r_query_dom_info(const char *desc, SAMR_R_QUERY_DOMAIN_INFO * r_u,
 			      prs_struct *ps, int depth)
 {
-        if (r_u == NULL)
-		return False;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
+}
 
-	prs_debug(ps, depth, desc, "samr_io_r_query_dom_info");
-	depth++;
+/*******************************************************************
+reads or writes a SAMR_R_QUERY_SEC_OBJ structure.
+********************************************************************/
 
-	if(!prs_align(ps))
-		return False;
+BOOL samr_io_r_query_sec_obj(const char *desc, SAMR_R_QUERY_SEC_OBJ * r_u,
+			     prs_struct *ps, int depth)
+{
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
+}
 
-	if(!prs_uint32("ptr_0 ", ps, depth, &r_u->ptr_0))
-		return False;
+/*******************************************************************
+reads or writes a SAM_STR1 structure.
+********************************************************************/
 
-	if (r_u->ptr_0 != 0 && r_u->ctr != NULL) {
-		if(!prs_uint16("switch_value", ps, depth, &r_u->switch_value))
-			return False;
-		if(!prs_align(ps))
-			return False;
-
-		switch (r_u->switch_value) {
-		case 0x0c:
-			if(!sam_io_unk_info12("unk_inf12", &r_u->ctr->info.inf12, ps, depth))
-				return False;
-			break;
-		case 0x07:
-			if(!sam_io_unk_info7("unk_inf7",&r_u->ctr->info.inf7, ps,depth))
-				return False;
-			break;
-		case 0x06:
-			if(!sam_io_unk_info6("unk_inf6",&r_u->ctr->info.inf6, ps,depth))
-				return False;
-			break;
-		case 0x05:
-			if(!sam_io_unk_info5("unk_inf5",&r_u->ctr->info.inf5, ps,depth))
-				return False;
-			break;
-		case 0x03:
-			if(!sam_io_unk_info3("unk_inf3",&r_u->ctr->info.inf3, ps,depth))
-				return False;
-			break;
-		case 0x02:
-			if(!sam_io_unk_info2("unk_inf2",&r_u->ctr->info.inf2, ps,depth))
-				return False;
-			break;
-		case 0x01:
-			if(!sam_io_unk_info1("unk_inf1",&r_u->ctr->info.inf1, ps,depth))
-				return False;
-			break;
-		default:
-			DEBUG(0, ("samr_io_r_query_dom_info: unknown switch level 0x%x\n",
-				r_u->switch_value));
-			r_u->status = NT_STATUS_INVALID_INFO_CLASS;
-			return False;
-		}
-	}
-	
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_ntstatus("status", ps, depth, &r_u->status))
-		return False;
-	
-	return True;
-}
-
-/*******************************************************************
-reads or writes a SAMR_R_QUERY_SEC_OBJ structure.
-********************************************************************/
-
-BOOL samr_io_r_query_sec_obj(const char *desc, SAMR_R_QUERY_SEC_OBJ * r_u,
-			     prs_struct *ps, int depth)
-{
-	if (r_u == NULL)
-		return False;
-  
-	prs_debug(ps, depth, desc, "samr_io_r_query_sec_obj");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_uint32("ptr", ps, depth, &r_u->ptr))
-		return False;
-	if (r_u->ptr != 0) {
-		if(!sec_io_desc_buf("sec", &r_u->buf, ps, depth))
-			return False;
-	}
-
-	if(!prs_ntstatus("status", ps, depth, &r_u->status))
-		return False;
-
-	return True;
-}
-
-/*******************************************************************
-reads or writes a SAM_STR1 structure.
-********************************************************************/
-
-static BOOL sam_io_sam_str1(const char *desc, SAM_STR1 * sam, uint32 acct_buf,
-			    uint32 name_buf, uint32 desc_buf,
-			    prs_struct *ps, int depth)
-{
-	if (sam == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "sam_io_sam_str1");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-	if (!smb_io_unistr2("name", &sam->uni_acct_name, acct_buf, ps, depth))
-		return False;
-
-	if (!smb_io_unistr2("desc", &sam->uni_acct_desc, desc_buf, ps, depth))
-		return False;
-
-	if (!smb_io_unistr2("full", &sam->uni_full_name, name_buf, ps, depth))
-		return False;
-
-	return True;
-}
+static BOOL sam_io_sam_str1(const char *desc, SAM_STR1 * sam, uint32 acct_buf,
+			    uint32 name_buf, uint32 desc_buf,
+			    prs_struct *ps, int depth)
+{
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
+}
 
 /*******************************************************************
 inits a SAM_ENTRY1 structure.
@@ -928,17 +470,8 @@ static void init_sam_entry1(SAM_ENTRY1 *
 			    uint32 len_sam_desc, uint32 rid_user,
 			    uint16 acb_info)
 {
-	DEBUG(5, ("init_sam_entry1\n"));
-
-	ZERO_STRUCTP(sam);
-
-	sam->user_idx = user_idx;
-	sam->rid_user = rid_user;
-	sam->acb_info = acb_info;
-
-	init_uni_hdr(&sam->hdr_acct_name, len_sam_name);
-	init_uni_hdr(&sam->hdr_user_name, len_sam_full);
-	init_uni_hdr(&sam->hdr_user_desc, len_sam_desc);
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -948,34 +481,8 @@ reads or writes a SAM_ENTRY1 structure.
 static BOOL sam_io_sam_entry1(const char *desc, SAM_ENTRY1 * sam,
 			      prs_struct *ps, int depth)
 {
-	if (sam == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "sam_io_sam_entry1");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_uint32("user_idx ", ps, depth, &sam->user_idx))
-		return False;
-
-	if(!prs_uint32("rid_user ", ps, depth, &sam->rid_user))
-		return False;
-	if(!prs_uint16("acb_info ", ps, depth, &sam->acb_info))
-		return False;
-
-	if(!prs_align(ps))
-		return False;
-
-	if (!smb_io_unihdr("hdr_acct_name", &sam->hdr_acct_name, ps, depth))
-		return False;
-	if (!smb_io_unihdr("hdr_user_desc", &sam->hdr_user_desc, ps, depth))
-		return False;
-	if (!smb_io_unihdr("hdr_user_name", &sam->hdr_user_name, ps, depth))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -985,21 +492,8 @@ reads or writes a SAM_STR2 structure.
 static BOOL sam_io_sam_str2(const char *desc, SAM_STR2 * sam, uint32 acct_buf,
 			    uint32 desc_buf, prs_struct *ps, int depth)
 {
-	if (sam == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "sam_io_sam_str2");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!smb_io_unistr2("uni_srv_name", &sam->uni_srv_name, acct_buf, ps, depth)) /* account name unicode string */
-		return False;
-	if(!smb_io_unistr2("uni_srv_desc", &sam->uni_srv_desc, desc_buf, ps, depth))	/* account desc unicode string */
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1009,14 +503,8 @@ static void init_sam_entry2(SAM_ENTRY2 *
 			    uint32 len_sam_name, uint32 len_sam_desc,
 			    uint32 rid_user, uint16 acb_info)
 {
-	DEBUG(5, ("init_sam_entry2\n"));
-
-	sam->user_idx = user_idx;
-	sam->rid_user = rid_user;
-	sam->acb_info = acb_info;
-
-	init_uni_hdr(&sam->hdr_srv_name, len_sam_name);
-	init_uni_hdr(&sam->hdr_srv_desc, len_sam_desc);
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1026,32 +514,8 @@ reads or writes a SAM_ENTRY2 structure.
 static BOOL sam_io_sam_entry2(const char *desc, SAM_ENTRY2 * sam,
 			      prs_struct *ps, int depth)
 {
-	if (sam == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "sam_io_sam_entry2");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_uint32("user_idx ", ps, depth, &sam->user_idx))
-		return False;
-
-	if(!prs_uint32("rid_user ", ps, depth, &sam->rid_user))
-		return False;
-	if(!prs_uint16("acb_info ", ps, depth, &sam->acb_info))
-		return False;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!smb_io_unihdr("unihdr", &sam->hdr_srv_name, ps, depth))	/* account name unicode string header */
-		return False;
-	if(!smb_io_unihdr("unihdr", &sam->hdr_srv_desc, ps, depth))	/* account name unicode string header */
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1061,21 +525,8 @@ reads or writes a SAM_STR3 structure.
 static BOOL sam_io_sam_str3(const char *desc, SAM_STR3 * sam, uint32 acct_buf,
 			    uint32 desc_buf, prs_struct *ps, int depth)
 {
-	if (sam == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "sam_io_sam_str3");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!smb_io_unistr2("uni_grp_name", &sam->uni_grp_name, acct_buf, ps, depth))	/* account name unicode string */
-		return False;
-	if(!smb_io_unistr2("uni_grp_desc", &sam->uni_grp_desc, desc_buf, ps, depth))	/* account desc unicode string */
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1086,14 +537,8 @@ static void init_sam_entry3(SAM_ENTRY3 *
 			    uint32 len_grp_name, uint32 len_grp_desc,
 			    uint32 rid_grp)
 {
-	DEBUG(5, ("init_sam_entry3\n"));
-
-	sam->grp_idx = grp_idx;
-	sam->rid_grp = rid_grp;
-	sam->attr = 0x07;	/* group rid attributes - gets ignored by nt 4.0 */
-
-	init_uni_hdr(&sam->hdr_grp_name, len_grp_name);
-	init_uni_hdr(&sam->hdr_grp_desc, len_grp_desc);
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1103,29 +548,8 @@ reads or writes a SAM_ENTRY3 structure.
 static BOOL sam_io_sam_entry3(const char *desc, SAM_ENTRY3 * sam,
 			      prs_struct *ps, int depth)
 {
-	if (sam == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "sam_io_sam_entry3");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_uint32("grp_idx", ps, depth, &sam->grp_idx))
-		return False;
-
-	if(!prs_uint32("rid_grp", ps, depth, &sam->rid_grp))
-		return False;
-	if(!prs_uint32("attr   ", ps, depth, &sam->attr))
-		return False;
-
-	if(!smb_io_unihdr("unihdr", &sam->hdr_grp_name, ps, depth))	/* account name unicode string header */
-		return False;
-	if(!smb_io_unihdr("unihdr", &sam->hdr_grp_desc, ps, depth))	/* account name unicode string header */
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1135,10 +559,8 @@ inits a SAM_ENTRY4 structure.
 static void init_sam_entry4(SAM_ENTRY4 * sam, uint32 user_idx,
 			    uint32 len_acct_name)
 {
-	DEBUG(5, ("init_sam_entry4\n"));
-
-	sam->user_idx = user_idx;
-	init_str_hdr(&sam->hdr_acct_name, len_acct_name+1, len_acct_name, len_acct_name != 0);
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1148,21 +570,8 @@ reads or writes a SAM_ENTRY4 structure.
 static BOOL sam_io_sam_entry4(const char *desc, SAM_ENTRY4 * sam,
 			      prs_struct *ps, int depth)
 {
-	if (sam == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "sam_io_sam_entry4");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_uint32("user_idx", ps, depth, &sam->user_idx))
-		return False;
-	if(!smb_io_strhdr("strhdr", &sam->hdr_acct_name, ps, depth))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1172,11 +581,8 @@ inits a SAM_ENTRY5 structure.
 static void init_sam_entry5(SAM_ENTRY5 * sam, uint32 grp_idx,
 			    uint32 len_grp_name)
 {
-	DEBUG(5, ("init_sam_entry5\n"));
-
-	sam->grp_idx = grp_idx;
-	init_str_hdr(&sam->hdr_grp_name, len_grp_name, len_grp_name,
-		     len_grp_name != 0);
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1186,21 +592,8 @@ reads or writes a SAM_ENTRY5 structure.
 static BOOL sam_io_sam_entry5(const char *desc, SAM_ENTRY5 * sam,
 			      prs_struct *ps, int depth)
 {
-	if (sam == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "sam_io_sam_entry5");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_uint32("grp_idx", ps, depth, &sam->grp_idx))
-		return False;
-	if(!smb_io_strhdr("strhdr", &sam->hdr_grp_name, ps, depth))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1209,10 +602,8 @@ inits a SAM_ENTRY structure.
 
 void init_sam_entry(SAM_ENTRY * sam, uint32 len_sam_name, uint32 rid)
 {
-	DEBUG(10, ("init_sam_entry: %d %d\n", len_sam_name, rid));
-
-	sam->rid = rid;
-	init_uni_hdr(&sam->hdr_name, len_sam_name);
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1222,20 +613,8 @@ reads or writes a SAM_ENTRY structure.
 static BOOL sam_io_sam_entry(const char *desc, SAM_ENTRY * sam,
 			     prs_struct *ps, int depth)
 {
-	if (sam == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "sam_io_sam_entry");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-	if(!prs_uint32("rid", ps, depth, &sam->rid))
-		return False;
-	if(!smb_io_unihdr("unihdr", &sam->hdr_name, ps, depth))	/* account name unicode string header */
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1246,14 +625,8 @@ void init_samr_q_enum_dom_users(SAMR_Q_E
 				uint32 start_idx,
 				uint16 acb_mask, uint16 unk_1, uint32 size)
 {
-	DEBUG(5, ("init_samr_q_enum_dom_users\n"));
-
-	q_e->pol = *pol;
-
-	q_e->start_idx = start_idx;	/* zero indicates lots */
-	q_e->acb_mask = acb_mask;
-	q_e->unknown_1 = unk_1;
-	q_e->max_size = size;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1263,29 +636,8 @@ reads or writes a structure.
 BOOL samr_io_q_enum_dom_users(const char *desc, SAMR_Q_ENUM_DOM_USERS * q_e,
 			      prs_struct *ps, int depth)
 {
-	if (q_e == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "samr_io_q_enum_dom_users");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!smb_io_pol_hnd("domain_pol", &q_e->pol, ps, depth))
-		return False;
-
-	if(!prs_uint32("start_idx", ps, depth, &q_e->start_idx))
-		return False;
-	if(!prs_uint16("acb_mask ", ps, depth, &q_e->acb_mask))
-		return False;
-	if(!prs_uint16("unknown_1", ps, depth, &q_e->unknown_1))
-		return False;
-
-	if(!prs_uint32("max_size ", ps, depth, &q_e->max_size))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 
@@ -1296,22 +648,8 @@ inits a SAMR_R_ENUM_DOM_USERS structure.
 void init_samr_r_enum_dom_users(SAMR_R_ENUM_DOM_USERS * r_u,
 				uint32 next_idx, uint32 num_sam_entries)
 {
-	DEBUG(5, ("init_samr_r_enum_dom_users\n"));
-
-	r_u->next_idx = next_idx;
-
-	if (num_sam_entries != 0) {
-		r_u->ptr_entries1 = 1;
-		r_u->ptr_entries2 = 1;
-		r_u->num_entries2 = num_sam_entries;
-		r_u->num_entries3 = num_sam_entries;
-
-		r_u->num_entries4 = num_sam_entries;
-	} else {
-		r_u->ptr_entries1 = 0;
-		r_u->num_entries2 = num_sam_entries;
-		r_u->ptr_entries2 = 1;
-	}
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1321,63 +659,8 @@ reads or writes a structure.
 BOOL samr_io_r_enum_dom_users(const char *desc, SAMR_R_ENUM_DOM_USERS * r_u,
 			      prs_struct *ps, int depth)
 {
-	uint32 i;
-
-	if (r_u == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "samr_io_r_enum_dom_users");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_uint32("next_idx    ", ps, depth, &r_u->next_idx))
-		return False;
-	if(!prs_uint32("ptr_entries1", ps, depth, &r_u->ptr_entries1))
-		return False;
-
-	if (r_u->ptr_entries1 != 0) {
-		if(!prs_uint32("num_entries2", ps, depth, &r_u->num_entries2))
-			return False;
-		if(!prs_uint32("ptr_entries2", ps, depth, &r_u->ptr_entries2))
-			return False;
-		if(!prs_uint32("num_entries3", ps, depth, &r_u->num_entries3))
-			return False;
-
-		if (UNMARSHALLING(ps) && (r_u->num_entries2 != 0)) {
-			r_u->sam = (SAM_ENTRY *)prs_alloc_mem(ps,sizeof(SAM_ENTRY)*r_u->num_entries2);
-			r_u->uni_acct_name = (UNISTR2 *)prs_alloc_mem(ps,sizeof(UNISTR2)*r_u->num_entries2);
-		}
-
-		if ((r_u->sam == NULL || r_u->uni_acct_name == NULL) && r_u->num_entries2 != 0) {
-			DEBUG(0,("NULL pointers in SAMR_R_ENUM_DOM_USERS\n"));
-			r_u->num_entries4 = 0;
-			r_u->status = NT_STATUS_MEMORY_NOT_ALLOCATED;
-			return False;
-		}
-
-		for (i = 0; i < r_u->num_entries2; i++) {
-			if(!sam_io_sam_entry("", &r_u->sam[i], ps, depth))
-				return False;
-		}
-
-		for (i = 0; i < r_u->num_entries2; i++) {
-			if(!smb_io_unistr2("", &r_u->uni_acct_name[i],r_u->sam[i].hdr_name.buffer, ps,depth))
-				return False;
-		}
-
-	}
-
-	if(!prs_align(ps))
-		return False;
-		
-	if(!prs_uint32("num_entries4", ps, depth, &r_u->num_entries4))
-		return False;
-	if(!prs_ntstatus("status", ps, depth, &r_u->status))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1388,15 +671,8 @@ void init_samr_q_query_dispinfo(SAMR_Q_Q
 				uint16 switch_level, uint32 start_idx,
 				uint32 max_entries, uint32 max_size)
 {
-	DEBUG(5, ("init_samr_q_query_dispinfo\n"));
-
-	q_e->domain_pol = *pol;
-
-	q_e->switch_level = switch_level;
-
-	q_e->start_idx = start_idx;
-	q_e->max_entries = max_entries;
-	q_e->max_size = max_size;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1406,31 +682,8 @@ reads or writes a structure.
 BOOL samr_io_q_query_dispinfo(const char *desc, SAMR_Q_QUERY_DISPINFO * q_e,
 			      prs_struct *ps, int depth)
 {
-	if (q_e == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "samr_io_q_query_dispinfo");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!smb_io_pol_hnd("domain_pol", &q_e->domain_pol, ps, depth))
-		return False;
-
-	if(!prs_uint16("switch_level", ps, depth, &q_e->switch_level))
-		return False;
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_uint32("start_idx   ", ps, depth, &q_e->start_idx))
-		return False;
-	if(!prs_uint32("max_entries ", ps, depth, &q_e->max_entries))
-		return False;
-	if(!prs_uint32("max_size    ", ps, depth, &q_e->max_size))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1440,51 +693,8 @@ inits a SAM_DISPINFO_1 structure.
 NTSTATUS init_sam_dispinfo_1(TALLOC_CTX *ctx, SAM_DISPINFO_1 *sam, uint32 num_entries,
 			 uint32 start_idx, DISP_USER_INFO *disp_user_info)
 {
-	uint32 len_sam_name, len_sam_full, len_sam_desc;
-	uint32 i;
-
-	SAM_ACCOUNT *pwd = NULL;
-	ZERO_STRUCTP(sam);
-
-	DEBUG(10, ("init_sam_dispinfo_1: num_entries: %d\n", num_entries));
-
-	if (num_entries==0)
-		return NT_STATUS_OK;
-
-	sam->sam=(SAM_ENTRY1 *)talloc(ctx, num_entries*sizeof(SAM_ENTRY1));
-	if (!sam->sam)
-		return NT_STATUS_NO_MEMORY;
-
-	sam->str=(SAM_STR1 *)talloc(ctx, num_entries*sizeof(SAM_STR1));
-	if (!sam->str)
-		return NT_STATUS_NO_MEMORY;
-
-	ZERO_STRUCTP(sam->sam);
-	ZERO_STRUCTP(sam->str);
-
-	for (i = 0; i < num_entries ; i++) {
-		DEBUG(11, ("init_sam_dispinfo_1: entry: %d\n",i));
-		
-		pwd=disp_user_info[i+start_idx].sam;
-		
-		len_sam_name = strlen(unix_to_dos_static(pdb_get_username(pwd)));
-		len_sam_full = strlen(unix_to_dos_static(pdb_get_fullname(pwd)));
-		len_sam_desc = strlen(unix_to_dos_static(pdb_get_acct_desc(pwd)));
-
-		init_sam_entry1(&sam->sam[i], start_idx + i + 1,
-				len_sam_name, len_sam_full, len_sam_desc,
-				pdb_get_user_rid(pwd), pdb_get_acct_ctrl(pwd));
-
-		ZERO_STRUCTP(&sam->str[i].uni_acct_name);
-		ZERO_STRUCTP(&sam->str[i].uni_full_name);
-		ZERO_STRUCTP(&sam->str[i].uni_acct_desc);
-
-		init_unistr2(&sam->str[i].uni_acct_name, unix_to_dos_static(pdb_get_username(pwd)),  len_sam_name);
-		init_unistr2(&sam->str[i].uni_full_name, unix_to_dos_static(pdb_get_fullname(pwd)),  len_sam_full);
-		init_unistr2(&sam->str[i].uni_acct_desc, unix_to_dos_static(pdb_get_acct_desc(pwd)), len_sam_desc);
-	}
-
-	return NT_STATUS_OK;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1495,45 +705,8 @@ static BOOL sam_io_sam_dispinfo_1(const
 				  uint32 num_entries,
 				  prs_struct *ps, int depth)
 {
-	uint32 i;
-
-	prs_debug(ps, depth, desc, "sam_io_sam_dispinfo_1");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if (UNMARSHALLING(ps) && num_entries > 0) {
-
-		if ((sam->sam = (SAM_ENTRY1 *)
-		     prs_alloc_mem(ps, sizeof(SAM_ENTRY1) *
-				   num_entries)) == NULL) {
-			DEBUG(0, ("out of memory allocating SAM_ENTRY1\n"));
-			return False;
-		}
-
-		if ((sam->str = (SAM_STR1 *)
-		     prs_alloc_mem(ps, sizeof(SAM_STR1) * 
-				   num_entries)) == NULL) {
-			DEBUG(0, ("out of memory allocating SAM_STR1\n"));
-			return False;
-		}
-	}
-
-	for (i = 0; i < num_entries; i++) {
-		if(!sam_io_sam_entry1("", &sam->sam[i], ps, depth))
-			return False;
-	}
-
-	for (i = 0; i < num_entries; i++) {
-		if(!sam_io_sam_str1("", &sam->str[i],
-			      sam->sam[i].hdr_acct_name.buffer,
-			      sam->sam[i].hdr_user_name.buffer,
-			      sam->sam[i].hdr_user_desc.buffer, ps, depth))
-			return False;
-	}
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1543,45 +716,8 @@ inits a SAM_DISPINFO_2 structure.
 NTSTATUS init_sam_dispinfo_2(TALLOC_CTX *ctx, SAM_DISPINFO_2 *sam, uint32 num_entries,
 			 uint32 start_idx, DISP_USER_INFO *disp_user_info)
 {
-	uint32 len_sam_name, len_sam_desc;
-	uint32 i;
-
-	SAM_ACCOUNT *pwd = NULL;
-	ZERO_STRUCTP(sam);
-
-	DEBUG(10, ("init_sam_dispinfo_2: num_entries: %d\n", num_entries));
-
-	if (num_entries==0)
-		return NT_STATUS_OK;
-
-	if (!(sam->sam=(SAM_ENTRY2 *)talloc(ctx, num_entries*sizeof(SAM_ENTRY2))))
-		return NT_STATUS_NO_MEMORY;
-
-	if (!(sam->str=(SAM_STR2 *)talloc(ctx, num_entries*sizeof(SAM_STR2))))
-		return NT_STATUS_NO_MEMORY;
-
-	ZERO_STRUCTP(sam->sam);
-	ZERO_STRUCTP(sam->str);
-
-	for (i = 0; i < num_entries; i++) {
-		DEBUG(11, ("init_sam_dispinfo_2: entry: %d\n",i));
-		pwd=disp_user_info[i+start_idx].sam;
-
-		len_sam_name = strlen(unix_to_dos_static(pdb_get_username(pwd)));
-		len_sam_desc = strlen(unix_to_dos_static(pdb_get_acct_desc(pwd)));
-	  
-		init_sam_entry2(&sam->sam[i], start_idx + i + 1,
-			  len_sam_name, len_sam_desc,
-			  pdb_get_user_rid(pwd), pdb_get_acct_ctrl(pwd));
-	  
-		ZERO_STRUCTP(&sam->str[i].uni_srv_name);
-		ZERO_STRUCTP(&sam->str[i].uni_srv_desc);
-
-		init_unistr2(&sam->str[i].uni_srv_name, unix_to_dos_static(pdb_get_username(pwd)),  len_sam_name);
-		init_unistr2(&sam->str[i].uni_srv_desc, unix_to_dos_static(pdb_get_acct_desc(pwd)), len_sam_desc);
-	}
-
-	return NT_STATUS_OK;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1592,47 +728,8 @@ static BOOL sam_io_sam_dispinfo_2(const
 				  uint32 num_entries,
 				  prs_struct *ps, int depth)
 {
-	uint32 i;
-
-	if (sam == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "sam_io_sam_dispinfo_2");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if (UNMARSHALLING(ps) && num_entries > 0) {
-
-		if ((sam->sam = (SAM_ENTRY2 *)
-		     prs_alloc_mem(ps, sizeof(SAM_ENTRY2) *
-				   num_entries)) == NULL) {
-			DEBUG(0, ("out of memory allocating SAM_ENTRY2\n"));
-			return False;
-		}
-
-		if ((sam->str = (SAM_STR2 *)
-		     prs_alloc_mem(ps, sizeof(SAM_STR2) * 
-				   num_entries)) == NULL) {
-			DEBUG(0, ("out of memory allocating SAM_STR2\n"));
-			return False;
-		}
-	}
-
-	for (i = 0; i < num_entries; i++) {
-		if(!sam_io_sam_entry2("", &sam->sam[i], ps, depth))
-			return False;
-	}
-
-	for (i = 0; i < num_entries; i++) {
-		if(!sam_io_sam_str2("", &sam->str[i],
-			      sam->sam[i].hdr_srv_name.buffer,
-			      sam->sam[i].hdr_srv_desc.buffer, ps, depth))
-			return False;
-	}
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1642,40 +739,8 @@ inits a SAM_DISPINFO_3 structure.
 NTSTATUS init_sam_dispinfo_3(TALLOC_CTX *ctx, SAM_DISPINFO_3 *sam, uint32 num_entries,
 			 uint32 start_idx, DISP_GROUP_INFO *disp_group_info)
 {
-	uint32 len_sam_name, len_sam_desc;
-	uint32 i;
-
-	ZERO_STRUCTP(sam);
-
-	DEBUG(5, ("init_sam_dispinfo_3: num_entries: %d\n", num_entries));
-
-	if (num_entries==0)
-		return NT_STATUS_OK;
-
-	if (!(sam->sam=(SAM_ENTRY3 *)talloc(ctx, num_entries*sizeof(SAM_ENTRY3))))
-		return NT_STATUS_NO_MEMORY;
-
-	if (!(sam->str=(SAM_STR3 *)talloc(ctx, num_entries*sizeof(SAM_STR3))))
-		return NT_STATUS_NO_MEMORY;
-
-	ZERO_STRUCTP(sam->sam);
-	ZERO_STRUCTP(sam->str);
-
-	for (i = 0; i < num_entries; i++) {
-		DOMAIN_GRP *grp = disp_group_info[i+start_idx].grp;
-
-		DEBUG(11, ("init_sam_dispinfo_3: entry: %d\n",i));
-
-		len_sam_name = strlen(grp->name);
-		len_sam_desc = strlen(grp->comment);
-
-		init_sam_entry3(&sam->sam[i], start_idx + i + 1, len_sam_name, len_sam_desc, grp->rid);
-	  
-		init_unistr2(&sam->str[i].uni_grp_name, grp->name, len_sam_name);
-		init_unistr2(&sam->str[i].uni_grp_desc, grp->comment, len_sam_desc);
-	}
-
-	return NT_STATUS_OK;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1686,47 +751,8 @@ static BOOL sam_io_sam_dispinfo_3(const
 				  uint32 num_entries,
 				  prs_struct *ps, int depth)
 {
-	uint32 i;
-
-	if (sam == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "sam_io_sam_dispinfo_3");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if (UNMARSHALLING(ps) && num_entries > 0) {
-
-		if ((sam->sam = (SAM_ENTRY3 *)
-		     prs_alloc_mem(ps, sizeof(SAM_ENTRY3) *
-				   num_entries)) == NULL) {
-			DEBUG(0, ("out of memory allocating SAM_ENTRY3\n"));
-			return False;
-		}
-
-		if ((sam->str = (SAM_STR3 *)
-		     prs_alloc_mem(ps, sizeof(SAM_STR3) * 
-				   num_entries)) == NULL) {
-			DEBUG(0, ("out of memory allocating SAM_STR3\n"));
-			return False;
-		}
-	}
-
-	for (i = 0; i < num_entries; i++) {
-		if(!sam_io_sam_entry3("", &sam->sam[i], ps, depth))
-			return False;
-	}
-
-	for (i = 0; i < num_entries; i++) {
-		if(!sam_io_sam_str3("", &sam->str[i],
-			      sam->sam[i].hdr_grp_name.buffer,
-			      sam->sam[i].hdr_grp_desc.buffer, ps, depth))
-			return False;
-	}
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1736,39 +762,8 @@ inits a SAM_DISPINFO_4 structure.
 NTSTATUS init_sam_dispinfo_4(TALLOC_CTX *ctx, SAM_DISPINFO_4 *sam, uint32 num_entries,
 			 uint32 start_idx, DISP_USER_INFO *disp_user_info)
 {
-	uint32 len_sam_name;
-	uint32 i;
-
-	SAM_ACCOUNT *pwd = NULL;
-	ZERO_STRUCTP(sam);
-
-	DEBUG(5, ("init_sam_dispinfo_4: num_entries: %d\n", num_entries));
-
-	if (num_entries==0)
-		return NT_STATUS_OK;
-
-	if (!(sam->sam=(SAM_ENTRY4 *)talloc(ctx, num_entries*sizeof(SAM_ENTRY4))))
-		return NT_STATUS_NO_MEMORY;
-
-	if (!(sam->str=(SAM_STR4 *)talloc(ctx, num_entries*sizeof(SAM_STR4))))
-		return NT_STATUS_NO_MEMORY;
-
-	ZERO_STRUCTP(sam->sam);
-	ZERO_STRUCTP(sam->str);
-
-	for (i = 0; i < num_entries; i++) {
-		DEBUG(11, ("init_sam_dispinfo_2: entry: %d\n",i));
-		pwd=disp_user_info[i+start_idx].sam;
-
-		len_sam_name = strlen(unix_to_dos_static(pdb_get_username(pwd)));
-	  
-		init_sam_entry4(&sam->sam[i], start_idx + i + 1, len_sam_name);
-
-		init_string2(&sam->str[i].acct_name, unix_to_dos_static(pdb_get_username(pwd)),
-				len_sam_name+1, len_sam_name);
-	}
-	
-	return NT_STATUS_OK;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1779,46 +774,8 @@ static BOOL sam_io_sam_dispinfo_4(const
 				  uint32 num_entries,
 				  prs_struct *ps, int depth)
 {
-	uint32 i;
-
-	if (sam == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "sam_io_sam_dispinfo_4");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if (UNMARSHALLING(ps) && num_entries > 0) {
-
-		if ((sam->sam = (SAM_ENTRY4 *)
-		     prs_alloc_mem(ps, sizeof(SAM_ENTRY4) *
-				   num_entries)) == NULL) {
-			DEBUG(0, ("out of memory allocating SAM_ENTRY4\n"));
-			return False;
-		}
-
-		if ((sam->str = (SAM_STR4 *)
-		     prs_alloc_mem(ps, sizeof(SAM_STR4) * 
-				   num_entries)) == NULL) {
-			DEBUG(0, ("out of memory allocating SAM_STR4\n"));
-			return False;
-		}
-	}
-
-	for (i = 0; i < num_entries; i++) {
-		if(!sam_io_sam_entry4("", &sam->sam[i], ps, depth))
-			return False;
-	}
-
-	for (i = 0; i < num_entries; i++) {
-		if(!smb_io_string2("acct_name", &sam->str[i].acct_name,
-			     sam->sam[i].hdr_acct_name.buffer, ps, depth))
-			return False;
-	}
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1828,37 +785,8 @@ inits a SAM_DISPINFO_5 structure.
 NTSTATUS init_sam_dispinfo_5(TALLOC_CTX *ctx, SAM_DISPINFO_5 *sam, uint32 num_entries,
 			 uint32 start_idx, DISP_GROUP_INFO *disp_group_info)
 {
-	uint32 len_sam_name;
-	uint32 i;
-
-	ZERO_STRUCTP(sam);
-
-	DEBUG(5, ("init_sam_dispinfo_5: num_entries: %d\n", num_entries));
-
-	if (num_entries==0)
-		return NT_STATUS_OK;
-
-	if (!(sam->sam=(SAM_ENTRY5 *)talloc(ctx, num_entries*sizeof(SAM_ENTRY5))))
-		return NT_STATUS_NO_MEMORY;
-
-	if (!(sam->str=(SAM_STR5 *)talloc(ctx, num_entries*sizeof(SAM_STR5))))
-		return NT_STATUS_NO_MEMORY;
-
-	ZERO_STRUCTP(sam->sam);
-	ZERO_STRUCTP(sam->str);
-
-	for (i = 0; i < num_entries; i++) {
-		DOMAIN_GRP *grp = disp_group_info[i+start_idx].grp;
-
-		DEBUG(11, ("init_sam_dispinfo_5: entry: %d\n",i));
-
-		len_sam_name = strlen(grp->name);
-	  
-		init_sam_entry5(&sam->sam[i], start_idx + i + 1, len_sam_name);
-		init_string2(&sam->str[i].grp_name, grp->name, len_sam_name+1, len_sam_name);
-	}
-
-	return NT_STATUS_OK;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1869,46 +797,8 @@ static BOOL sam_io_sam_dispinfo_5(const
 				  uint32 num_entries,
 				  prs_struct *ps, int depth)
 {
-	uint32 i;
-
-	if (sam == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "sam_io_sam_dispinfo_5");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if (UNMARSHALLING(ps) && num_entries > 0) {
-
-		if ((sam->sam = (SAM_ENTRY5 *)
-		     prs_alloc_mem(ps, sizeof(SAM_ENTRY5) *
-				   num_entries)) == NULL) {
-			DEBUG(0, ("out of memory allocating SAM_ENTRY5\n"));
-			return False;
-		}
-
-		if ((sam->str = (SAM_STR5 *)
-		     prs_alloc_mem(ps, sizeof(SAM_STR5) * 
-				   num_entries)) == NULL) {
-			DEBUG(0, ("out of memory allocating SAM_STR5\n"));
-			return False;
-		}
-	}
-
-	for (i = 0; i < num_entries; i++) {
-		if(!sam_io_sam_entry5("", &sam->sam[i], ps, depth))
-			return False;
-	}
-
-	for (i = 0; i < num_entries; i++) {
-		if(!smb_io_string2("grp_name", &sam->str[i].grp_name,
-			     sam->sam[i].hdr_grp_name.buffer, ps, depth))
-			return False;
-	}
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1920,24 +810,8 @@ void init_samr_r_query_dispinfo(SAMR_R_Q
 				uint16 switch_level, SAM_DISPINFO_CTR * ctr,
 				NTSTATUS status)
 {
-	DEBUG(5, ("init_samr_r_query_dispinfo: level %d\n", switch_level));
-
-	r_u->total_size = total_size;
-
-	r_u->data_size = data_size;
-
-	r_u->switch_level = switch_level;
-	r_u->num_entries = num_entries;
-
-	if (num_entries==0)
-		r_u->ptr_entries = 0;
-	else
-		r_u->ptr_entries = 1;
-
-	r_u->num_entries2 = num_entries;
-	r_u->ctr = ctr;
-
-	r_u->status = status;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -1947,80 +821,8 @@ reads or writes a structure.
 BOOL samr_io_r_query_dispinfo(const char *desc, SAMR_R_QUERY_DISPINFO * r_u,
 			      prs_struct *ps, int depth)
 {
-	if (r_u == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "samr_io_r_query_dispinfo");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_uint32("total_size  ", ps, depth, &r_u->total_size))
-		return False;
-	if(!prs_uint32("data_size   ", ps, depth, &r_u->data_size))
-		return False;
-	if(!prs_uint16("switch_level", ps, depth, &r_u->switch_level))
-		return False;
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_uint32("num_entries ", ps, depth, &r_u->num_entries))
-		return False;
-	if(!prs_uint32("ptr_entries ", ps, depth, &r_u->ptr_entries))
-		return False;
-
-	if (r_u->ptr_entries==0) {
-		if(!prs_align(ps))
-			return False;
-		if(!prs_ntstatus("status", ps, depth, &r_u->status))
-			return False;
-
-		return True;
-	}
-
-	if(!prs_uint32("num_entries2", ps, depth, &r_u->num_entries2))
-		return False;
-
-	switch (r_u->switch_level) {
-	case 0x1:
-		if(!sam_io_sam_dispinfo_1("users", r_u->ctr->sam.info1,
-				r_u->num_entries, ps, depth))
-			return False;
-		break;
-	case 0x2:
-		if(!sam_io_sam_dispinfo_2("servers", r_u->ctr->sam.info2,
-				r_u->num_entries, ps, depth))
-			return False;
-		break;
-	case 0x3:
-		if(!sam_io_sam_dispinfo_3("groups", r_u->ctr->sam.info3,
-				    r_u->num_entries, ps, depth))
-			return False;
-		break;
-	case 0x4:
-		if(!sam_io_sam_dispinfo_4("user list",
-				    r_u->ctr->sam.info4,
-				    r_u->num_entries, ps, depth))
-			return False;
-		break;
-	case 0x5:
-		if(!sam_io_sam_dispinfo_5("group list",
-				    r_u->ctr->sam.info5,
-				    r_u->num_entries, ps, depth))
-			return False;
-		break;
-	default:
-		DEBUG(0,("samr_io_r_query_dispinfo: unknown switch value\n"));
-		break;
-	}
-	
-	if(!prs_align(ps))
-		return False;
-	if(!prs_ntstatus("status", ps, depth, &r_u->status))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -2031,11 +833,8 @@ void init_samr_q_open_group(SAMR_Q_OPEN_
 			    POLICY_HND *hnd,
 			    uint32 access_mask, uint32 rid)
 {
-	DEBUG(5, ("init_samr_q_open_group\n"));
-
-	q_c->domain_pol = *hnd;
-	q_c->access_mask = access_mask;
-	q_c->rid_group = rid;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -2045,24 +844,8 @@ reads or writes a structure.
 BOOL samr_io_q_open_group(const char *desc, SAMR_Q_OPEN_GROUP * q_u,
 			  prs_struct *ps, int depth)
 {
-	if (q_u == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "samr_io_q_open_group");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!smb_io_pol_hnd("domain_pol", &q_u->domain_pol, ps, depth))
-		return False;
-
-	if(!prs_uint32("access_mask", ps, depth, &q_u->access_mask))
-		return False;
-	if(!prs_uint32("rid_group", ps, depth, &q_u->rid_group))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -2072,22 +855,8 @@ reads or writes a structure.
 BOOL samr_io_r_open_group(const char *desc, SAMR_R_OPEN_GROUP * r_u,
 			  prs_struct *ps, int depth)
 {
-	if (r_u == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "samr_io_r_open_group");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!smb_io_pol_hnd("pol", &r_u->pol, ps, depth))
-		return False;
-
-	if(!prs_ntstatus("status", ps, depth, &r_u->status))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -2098,20 +867,8 @@ void init_samr_group_info1(GROUP_INFO1 *
 			   const char *acct_name, const char *acct_desc,
 			   uint32 num_members)
 {
-	int desc_len = acct_desc != NULL ? strlen(acct_desc) : 0;
-	int acct_len = acct_name != NULL ? strlen(acct_name) : 0;
-
-	DEBUG(5, ("init_samr_group_info1\n"));
-
-	init_uni_hdr(&gr1->hdr_acct_name, acct_len);
-
-	gr1->unknown_1 = 0x3;
-	gr1->num_members = num_members;
-
-	init_uni_hdr(&gr1->hdr_acct_desc, desc_len);
-
-	init_unistr2(&gr1->uni_acct_name, acct_name, acct_len);
-	init_unistr2(&gr1->uni_acct_desc, acct_desc, desc_len);
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -2121,35 +878,8 @@ reads or writes a structure.
 BOOL samr_io_group_info1(const char *desc, GROUP_INFO1 * gr1,
 			 prs_struct *ps, int depth)
 {
-	if (gr1 == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "samr_io_group_info1");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!smb_io_unihdr("hdr_acct_name", &gr1->hdr_acct_name, ps, depth))
-		return False;
-
-	if(!prs_uint32("unknown_1", ps, depth, &gr1->unknown_1))
-		return False;
-	if(!prs_uint32("num_members", ps, depth, &gr1->num_members))
-		return False;
-
-	if(!smb_io_unihdr("hdr_acct_desc", &gr1->hdr_acct_desc, ps, depth))
-		return False;
-
-	if(!smb_io_unistr2("uni_acct_name", &gr1->uni_acct_name,
-			   gr1->hdr_acct_name.buffer, ps, depth))
-		return False;
-
-	if(!smb_io_unistr2("uni_acct_desc", &gr1->uni_acct_desc,
-			   gr1->hdr_acct_desc.buffer, ps, depth))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -2158,9 +888,8 @@ inits a GROUP_INFO3 structure.
 
 void init_samr_group_info3(GROUP_INFO3 *gr3)
 {
-	DEBUG(5, ("init_samr_group_info3\n"));
-
-	gr3->unknown_1 = 0x3;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -2169,19 +898,8 @@ reads or writes a structure.
 
 BOOL samr_io_group_info3(const char *desc, GROUP_INFO3 *gr3, prs_struct *ps, int depth)
 {
-	if (gr3 == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "samr_io_group_info3");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_uint32("unknown_1", ps, depth, &gr3->unknown_1))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -2190,12 +908,8 @@ inits a GROUP_INFO4 structure.
 
 void init_samr_group_info4(GROUP_INFO4 * gr4, const char *acct_desc)
 {
-	int acct_len = acct_desc != NULL ? strlen(acct_desc) : 0;
-
-	DEBUG(5, ("init_samr_group_info4\n"));
-
-	init_uni_hdr(&gr4->hdr_acct_desc, acct_len);
-	init_unistr2(&gr4->uni_acct_desc, acct_desc, acct_len);
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -2205,22 +919,8 @@ reads or writes a structure.
 BOOL samr_io_group_info4(const char *desc, GROUP_INFO4 * gr4,
 			 prs_struct *ps, int depth)
 {
-	if (gr4 == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "samr_io_group_info4");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!smb_io_unihdr("hdr_acct_desc", &gr4->hdr_acct_desc, ps, depth))
-		return False;
-	if(!smb_io_unistr2("uni_acct_desc", &gr4->uni_acct_desc,
-			   gr4->hdr_acct_desc.buffer, ps, depth))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -2230,37 +930,8 @@ reads or writes a structure.
 static BOOL samr_group_info_ctr(const char *desc, GROUP_INFO_CTR **ctr,
 				prs_struct *ps, int depth)
 {
-	if (UNMARSHALLING(ps))
-		*ctr = (GROUP_INFO_CTR *)prs_alloc_mem(ps,sizeof(GROUP_INFO_CTR));
-
-	if (*ctr == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "samr_group_info_ctr");
-	depth++;
-
-	if(!prs_uint16("switch_value1", ps, depth, &(*ctr)->switch_value1))
-		return False;
-
-	switch ((*ctr)->switch_value1) {
-	case 1:
-		if(!samr_io_group_info1("group_info1", &(*ctr)->group.info1, ps, depth))
-			return False;
-		break;
-	case 3:
-		if(!samr_io_group_info3("group_info3", &(*ctr)->group.info3, ps, depth))
-			return False;
-		break;
-	case 4:
-		if(!samr_io_group_info4("group_info4", &(*ctr)->group.info4, ps, depth))
-			return False;
-		break;
-	default:
-		DEBUG(0,("samr_group_info_ctr: unsupported switch level\n"));
-		break;
-	}
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -2271,16 +942,8 @@ void init_samr_q_create_dom_group(SAMR_Q
 				  POLICY_HND *pol, const char *acct_desc,
 				  uint32 access_mask)
 {
-	int acct_len = acct_desc != NULL ? strlen(acct_desc) : 0;
-
-	DEBUG(5, ("init_samr_q_create_dom_group\n"));
-
-	q_e->pol = *pol;
-
-	init_uni_hdr(&q_e->hdr_acct_desc, acct_len);
-	init_unistr2(&q_e->uni_acct_desc, acct_desc, acct_len);
-
-	q_e->access_mask = access_mask;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -2290,30 +953,8 @@ reads or writes a structure.
 BOOL samr_io_q_create_dom_group(const char *desc, SAMR_Q_CREATE_DOM_GROUP * q_e,
 				prs_struct *ps, int depth)
 {
-	if (q_e == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "samr_io_q_create_dom_group");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!smb_io_pol_hnd("pol", &q_e->pol, ps, depth))
-		return False;
-
-	if(!smb_io_unihdr("hdr_acct_desc", &q_e->hdr_acct_desc, ps, depth))
-		return False;
-	if(!smb_io_unistr2("uni_acct_desc", &q_e->uni_acct_desc,
-		       q_e->hdr_acct_desc.buffer, ps, depth))
-		return False;
-
-	if(!prs_align(ps))
-		return False;
-	if(!prs_uint32("access", ps, depth, &q_e->access_mask))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -2323,24 +964,8 @@ reads or writes a structure.
 BOOL samr_io_r_create_dom_group(const char *desc, SAMR_R_CREATE_DOM_GROUP * r_u,
 				prs_struct *ps, int depth)
 {
-	if (r_u == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "samr_io_r_create_dom_group");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!smb_io_pol_hnd("pol", &r_u->pol, ps, depth))
-		return False;
-
-	if(!prs_uint32("rid   ", ps, depth, &r_u->rid))
-		return False;
-	if(!prs_ntstatus("status", ps, depth, &r_u->status))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -2350,9 +975,8 @@ inits a SAMR_Q_DELETE_DOM_GROUP structur
 void init_samr_q_delete_dom_group(SAMR_Q_DELETE_DOM_GROUP * q_c,
 				  POLICY_HND *hnd)
 {
-	DEBUG(5, ("init_samr_q_delete_dom_group\n"));
-
-	q_c->group_pol = *hnd;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -2362,19 +986,8 @@ reads or writes a structure.
 BOOL samr_io_q_delete_dom_group(const char *desc, SAMR_Q_DELETE_DOM_GROUP * q_u,
 				prs_struct *ps, int depth)
 {
-	if (q_u == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "samr_io_q_delete_dom_group");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!smb_io_pol_hnd("group_pol", &q_u->group_pol, ps, depth))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -2384,22 +997,8 @@ reads or writes a structure.
 BOOL samr_io_r_delete_dom_group(const char *desc, SAMR_R_DELETE_DOM_GROUP * r_u,
 				prs_struct *ps, int depth)
 {
-	if (r_u == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "samr_io_r_delete_dom_group");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!smb_io_pol_hnd("pol", &r_u->pol, ps, depth))
-		return False;
-
-	if(!prs_ntstatus("status", ps, depth, &r_u->status))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -2409,10 +1008,8 @@ inits a SAMR_Q_DEL_GROUPMEM structure.
 void init_samr_q_del_groupmem(SAMR_Q_DEL_GROUPMEM * q_e,
 			      POLICY_HND *pol, uint32 rid)
 {
-	DEBUG(5, ("init_samr_q_del_groupmem\n"));
-
-	q_e->pol = *pol;
-	q_e->rid = rid;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -2422,22 +1019,8 @@ reads or writes a structure.
 BOOL samr_io_q_del_groupmem(const char *desc, SAMR_Q_DEL_GROUPMEM * q_e,
 			    prs_struct *ps, int depth)
 {
-	if (q_e == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "samr_io_q_del_groupmem");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!smb_io_pol_hnd("pol", &q_e->pol, ps, depth))
-		return False;
-
-	if(!prs_uint32("rid", ps, depth, &q_e->rid))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -2447,9 +1030,8 @@ inits a SAMR_R_DEL_GROUPMEM structure.
 void init_samr_r_del_groupmem(SAMR_R_DEL_GROUPMEM * r_u, POLICY_HND *pol,
 			      NTSTATUS status)
 {
-	DEBUG(5, ("init_samr_r_del_groupmem\n"));
-
-	r_u->status = status;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -2459,19 +1041,8 @@ reads or writes a structure.
 BOOL samr_io_r_del_groupmem(const char *desc, SAMR_R_DEL_GROUPMEM * r_u,
 			    prs_struct *ps, int depth)
 {
-	if (r_u == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "samr_io_r_del_groupmem");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_ntstatus("status", ps, depth, &r_u->status))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -2481,11 +1052,8 @@ inits a SAMR_Q_ADD_GROUPMEM structure.
 void init_samr_q_add_groupmem(SAMR_Q_ADD_GROUPMEM * q_e,
 			      POLICY_HND *pol, uint32 rid)
 {
-	DEBUG(5, ("init_samr_q_add_groupmem\n"));
-
-	q_e->pol = *pol;
-	q_e->rid = rid;
-	q_e->unknown = 0x0005;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -2495,24 +1063,8 @@ reads or writes a structure.
 BOOL samr_io_q_add_groupmem(const char *desc, SAMR_Q_ADD_GROUPMEM * q_e,
 			    prs_struct *ps, int depth)
 {
-	if (q_e == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "samr_io_q_add_groupmem");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!smb_io_pol_hnd("pol", &q_e->pol, ps, depth))
-		return False;
-
-	if(!prs_uint32("rid    ", ps, depth, &q_e->rid))
-		return False;
-	if(!prs_uint32("unknown", ps, depth, &q_e->unknown))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -2522,9 +1074,8 @@ inits a SAMR_R_ADD_GROUPMEM structure.
 void init_samr_r_add_groupmem(SAMR_R_ADD_GROUPMEM * r_u, POLICY_HND *pol,
 			      NTSTATUS status)
 {
-	DEBUG(5, ("init_samr_r_add_groupmem\n"));
-
-	r_u->status = status;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -2534,19 +1085,8 @@ reads or writes a structure.
 BOOL samr_io_r_add_groupmem(const char *desc, SAMR_R_ADD_GROUPMEM * r_u,
 			    prs_struct *ps, int depth)
 {
-	if (r_u == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "samr_io_r_add_groupmem");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_ntstatus("status", ps, depth, &r_u->status))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -2556,10 +1096,8 @@ inits a SAMR_Q_SET_GROUPINFO structure.
 void init_samr_q_set_groupinfo(SAMR_Q_SET_GROUPINFO * q_e,
 			       POLICY_HND *pol, GROUP_INFO_CTR * ctr)
 {
-	DEBUG(5, ("init_samr_q_set_groupinfo\n"));
-
-	q_e->pol = *pol;
-	q_e->ctr = ctr;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -2569,22 +1107,8 @@ reads or writes a structure.
 BOOL samr_io_q_set_groupinfo(const char *desc, SAMR_Q_SET_GROUPINFO * q_e,
 			     prs_struct *ps, int depth)
 {
-	if (q_e == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "samr_io_q_set_groupinfo");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!smb_io_pol_hnd("pol", &q_e->pol, ps, depth))
-		return False;
-	
-	if(!samr_group_info_ctr("ctr", &q_e->ctr, ps, depth))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -2593,9 +1117,8 @@ inits a SAMR_R_SET_GROUPINFO structure.
 
 void init_samr_r_set_groupinfo(SAMR_R_SET_GROUPINFO * r_u, NTSTATUS status)
 {
-	DEBUG(5, ("init_samr_r_set_groupinfo\n"));
-
-	r_u->status = status;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -2605,19 +1128,8 @@ reads or writes a structure.
 BOOL samr_io_r_set_groupinfo(const char *desc, SAMR_R_SET_GROUPINFO * r_u,
 			     prs_struct *ps, int depth)
 {
-	if (r_u == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "samr_io_r_set_groupinfo");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_ntstatus("status", ps, depth, &r_u->status))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -2627,11 +1139,8 @@ inits a SAMR_Q_QUERY_GROUPINFO structure
 void init_samr_q_query_groupinfo(SAMR_Q_QUERY_GROUPINFO * q_e,
 				 POLICY_HND *pol, uint16 switch_level)
 {
-	DEBUG(5, ("init_samr_q_query_groupinfo\n"));
-
-	q_e->pol = *pol;
-
-	q_e->switch_level = switch_level;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -2641,22 +1150,8 @@ reads or writes a structure.
 BOOL samr_io_q_query_groupinfo(const char *desc, SAMR_Q_QUERY_GROUPINFO * q_e,
 			       prs_struct *ps, int depth)
 {
-	if (q_e == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "samr_io_q_query_groupinfo");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!smb_io_pol_hnd("pol", &q_e->pol, ps, depth))
-		return False;
-
-	if(!prs_uint16("switch_level", ps, depth, &q_e->switch_level))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -2666,11 +1161,8 @@ inits a SAMR_R_QUERY_GROUPINFO structure
 void init_samr_r_query_groupinfo(SAMR_R_QUERY_GROUPINFO * r_u,
 				 GROUP_INFO_CTR * ctr, NTSTATUS status)
 {
-	DEBUG(5, ("init_samr_r_query_groupinfo\n"));
-
-	r_u->ptr = (NT_STATUS_IS_OK(status) && ctr != NULL) ? 1 : 0;
-	r_u->ctr = ctr;
-	r_u->status = status;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -2680,29 +1172,8 @@ reads or writes a structure.
 BOOL samr_io_r_query_groupinfo(const char *desc, SAMR_R_QUERY_GROUPINFO * r_u,
 			       prs_struct *ps, int depth)
 {
-	if (r_u == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "samr_io_r_query_groupinfo");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_uint32("ptr", ps, depth, &r_u->ptr))
-		return False;
-
-	if (r_u->ptr != 0) {
-		if(!samr_group_info_ctr("ctr", &r_u->ctr, ps, depth))
-			return False;
-	}
-
-	if(!prs_align(ps))
-		return False;
-	if(!prs_ntstatus("status", ps, depth, &r_u->status))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -2711,9 +1182,8 @@ inits a SAMR_Q_QUERY_GROUPMEM structure.
 
 void init_samr_q_query_groupmem(SAMR_Q_QUERY_GROUPMEM * q_c, POLICY_HND *hnd)
 {
-	DEBUG(5, ("init_samr_q_query_groupmem\n"));
-
-	q_c->group_pol = *hnd;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -2723,19 +1193,8 @@ reads or writes a structure.
 BOOL samr_io_q_query_groupmem(const char *desc, SAMR_Q_QUERY_GROUPMEM * q_u,
 			      prs_struct *ps, int depth)
 {
-	if (q_u == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "samr_io_q_query_groupmem");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!smb_io_pol_hnd("group_pol", &q_u->group_pol, ps, depth))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -2746,26 +1205,8 @@ void init_samr_r_query_groupmem(SAMR_R_Q
 				uint32 num_entries, uint32 *rid,
 				uint32 *attr, NTSTATUS status)
 {
-	DEBUG(5, ("init_samr_r_query_groupmem\n"));
-
-	if (NT_STATUS_IS_OK(status)) {
-		r_u->ptr = 1;
-		r_u->num_entries = num_entries;
-
-		r_u->ptr_attrs = attr != NULL ? 1 : 0;
-		r_u->ptr_rids = rid != NULL ? 1 : 0;
-
-		r_u->num_rids = num_entries;
-		r_u->rid = rid;
-
-		r_u->num_attrs = num_entries;
-		r_u->attr = attr;
-	} else {
-		r_u->ptr = 0;
-		r_u->num_entries = 0;
-	}
-
-	r_u->status = status;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -2775,67 +1216,8 @@ reads or writes a structure.
 BOOL samr_io_r_query_groupmem(const char *desc, SAMR_R_QUERY_GROUPMEM * r_u,
 			      prs_struct *ps, int depth)
 {
-	uint32 i;
-
-	if (r_u == NULL)
-		return False;
-
-	if (UNMARSHALLING(ps))
-		ZERO_STRUCTP(r_u);
-
-	prs_debug(ps, depth, desc, "samr_io_r_query_groupmem");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_uint32("ptr", ps, depth, &r_u->ptr))
-		return False;
-	if(!prs_uint32("num_entries ", ps, depth, &r_u->num_entries))
-		return False;
-
-	if (r_u->ptr != 0) {
-		if(!prs_uint32("ptr_rids ", ps, depth, &r_u->ptr_rids))
-			return False;
-		if(!prs_uint32("ptr_attrs", ps, depth, &r_u->ptr_attrs))
-			return False;
-
-		if (r_u->ptr_rids != 0)	{
-			if(!prs_uint32("num_rids", ps, depth, &r_u->num_rids))
-				return False;
-			if (UNMARSHALLING(ps) && r_u->num_rids != 0) {
-				r_u->rid = (uint32 *)prs_alloc_mem(ps,sizeof(r_u->rid[0])*r_u->num_rids);
-				if (r_u->rid == NULL)
-					return False;
-			}
-
-			for (i = 0; i < r_u->num_rids; i++) {
-				if(!prs_uint32("", ps, depth, &r_u->rid[i]))
-					return False;
-			}
-		}
-
-		if (r_u->ptr_attrs != 0) {
-			if(!prs_uint32("num_attrs", ps, depth, &r_u->num_attrs))
-				return False;
-
-			if (UNMARSHALLING(ps) && r_u->num_attrs != 0) {
-				r_u->attr = (uint32 *)prs_alloc_mem(ps,sizeof(r_u->attr[0])*r_u->num_attrs);
-				if (r_u->attr == NULL)
-					return False;
-			}
-
-			for (i = 0; i < r_u->num_attrs; i++) {
-				if(!prs_uint32("", ps, depth, &r_u->attr[i]))
-					return False;
-			}
-		}
-	}
-
-	if(!prs_ntstatus("status", ps, depth, &r_u->status))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -2845,9 +1227,8 @@ inits a SAMR_Q_QUERY_USERGROUPS structur
 void init_samr_q_query_usergroups(SAMR_Q_QUERY_USERGROUPS * q_u,
 				  POLICY_HND *hnd)
 {
-	DEBUG(5, ("init_samr_q_query_usergroups\n"));
-
-	q_u->pol = *hnd;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -2857,19 +1238,8 @@ reads or writes a structure.
 BOOL samr_io_q_query_usergroups(const char *desc, SAMR_Q_QUERY_USERGROUPS * q_u,
 				prs_struct *ps, int depth)
 {
-	if (q_u == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "samr_io_q_query_usergroups");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!smb_io_pol_hnd("pol", &q_u->pol, ps, depth))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -2880,23 +1250,8 @@ void init_samr_r_query_usergroups(SAMR_R
 				  uint32 num_gids, DOM_GID * gid,
 				  NTSTATUS status)
 {
-	DEBUG(5, ("init_samr_r_query_usergroups\n"));
-
-	if (NT_STATUS_IS_OK(status)) {
-		r_u->ptr_0 = 1;
-		r_u->num_entries = num_gids;
-		r_u->ptr_1 = (num_gids != 0) ? 1 : 0;
-		r_u->num_entries2 = num_gids;
-
-		r_u->gid = gid;
-	} else {
-		r_u->ptr_0 = 0;
-		r_u->num_entries = 0;
-		r_u->ptr_1 = 0;
-		r_u->gid = NULL;
-	}
-
-	r_u->status = status;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -2906,35 +1261,8 @@ reads or writes a structure.
 BOOL samr_io_gids(const char *desc, uint32 *num_gids, DOM_GID ** gid,
 		  prs_struct *ps, int depth)
 {
-	uint32 i;
-	if (gid == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "samr_io_gids");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_uint32("num_gids", ps, depth, num_gids))
-		return False;
-
-	if ((*num_gids) != 0) {
-		if (UNMARSHALLING(ps)) {
-			(*gid) = (DOM_GID *)prs_alloc_mem(ps,sizeof(DOM_GID)*(*num_gids));
-		}
-
-		if ((*gid) == NULL) {
-			return False;
-		}
-
-		for (i = 0; i < (*num_gids); i++) {
-			if(!smb_io_gid("gids", &(*gid)[i], ps, depth))
-				return False;
-		}
-	}
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -2944,36 +1272,8 @@ reads or writes a structure.
 BOOL samr_io_r_query_usergroups(const char *desc, SAMR_R_QUERY_USERGROUPS * r_u,
 				prs_struct *ps, int depth)
 {
-	if (r_u == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "samr_io_r_query_usergroups");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_uint32("ptr_0       ", ps, depth, &r_u->ptr_0))
-		return False;
-
-	if (r_u->ptr_0 != 0) {
-		if(!prs_uint32("num_entries ", ps, depth, &r_u->num_entries))
-			return False;
-		if(!prs_uint32("ptr_1       ", ps, depth, &r_u->ptr_1))
-			return False;
-
-		if (r_u->num_entries != 0 && r_u->ptr_1 != 0) {
-			if(!samr_io_gids("gids", &r_u->num_entries2, &r_u->gid, ps, depth))
-				return False;
-		}
-	}
-
-	if(!prs_align(ps))
-		return False;
-	if(!prs_ntstatus("status", ps, depth, &r_u->status))
-	  return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -2984,12 +1284,8 @@ void init_samr_q_enum_domains(SAMR_Q_ENU
 			      POLICY_HND *pol,
 			      uint32 start_idx, uint32 size)
 {
-	DEBUG(5, ("init_samr_q_enum_domains\n"));
-
-	q_e->pol = *pol;
-
-	q_e->start_idx = start_idx;
-	q_e->max_size = size;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -2999,24 +1295,8 @@ reads or writes a structure.
 BOOL samr_io_q_enum_domains(const char *desc, SAMR_Q_ENUM_DOMAINS * q_e,
 			    prs_struct *ps, int depth)
 {
-	if (q_e == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "samr_io_q_enum_domains");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!smb_io_pol_hnd("pol", &q_e->pol, ps, depth))
-		return False;
-
-	if(!prs_uint32("start_idx", ps, depth, &q_e->start_idx))
-		return False;
-	if(!prs_uint32("max_size ", ps, depth, &q_e->max_size))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -3026,22 +1306,8 @@ inits a SAMR_R_ENUM_DOMAINS structure.
 void init_samr_r_enum_domains(SAMR_R_ENUM_DOMAINS * r_u,
 			      uint32 next_idx, uint32 num_sam_entries)
 {
-	DEBUG(5, ("init_samr_r_enum_domains\n"));
-
-	r_u->next_idx = next_idx;
-
-	if (num_sam_entries != 0) {
-		r_u->ptr_entries1 = 1;
-		r_u->ptr_entries2 = 1;
-		r_u->num_entries2 = num_sam_entries;
-		r_u->num_entries3 = num_sam_entries;
-
-		r_u->num_entries4 = num_sam_entries;
-	} else {
-		r_u->ptr_entries1 = 0;
-		r_u->num_entries2 = num_sam_entries;
-		r_u->ptr_entries2 = 1;
-	}
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -3051,68 +1317,8 @@ reads or writes a structure.
 BOOL samr_io_r_enum_domains(const char *desc, SAMR_R_ENUM_DOMAINS * r_u,
 			    prs_struct *ps, int depth)
 {
-	uint32 i;
-
-	if (r_u == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "samr_io_r_enum_domains");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_uint32("next_idx    ", ps, depth, &r_u->next_idx))
-		return False;
-	if(!prs_uint32("ptr_entries1", ps, depth, &r_u->ptr_entries1))
-		return False;
-
-	if (r_u->ptr_entries1 != 0) {
-		if(!prs_uint32("num_entries2", ps, depth, &r_u->num_entries2))
-			return False;
-		if(!prs_uint32("ptr_entries2", ps, depth, &r_u->ptr_entries2))
-			return False;
-		if(!prs_uint32("num_entries3", ps, depth, &r_u->num_entries3))
-			return False;
-
-		if (UNMARSHALLING(ps)) {
-			r_u->sam = (SAM_ENTRY *)prs_alloc_mem(ps,sizeof(SAM_ENTRY)*r_u->num_entries2);
-			r_u->uni_dom_name = (UNISTR2 *)prs_alloc_mem(ps,sizeof(UNISTR2)*r_u->num_entries2);
-		}
-
-		if ((r_u->sam == NULL || r_u->uni_dom_name == NULL) && r_u->num_entries2 != 0) {
-			DEBUG(0, ("NULL pointers in SAMR_R_ENUM_DOMAINS\n"));
-			r_u->num_entries4 = 0;
-			r_u->status = NT_STATUS_MEMORY_NOT_ALLOCATED;
-			return False;
-		}
-
-		for (i = 0; i < r_u->num_entries2; i++)	{
-			fstring tmp;
-			slprintf(tmp, sizeof(tmp) - 1, "dom[%d]", i);
-			if(!sam_io_sam_entry(tmp, &r_u->sam[i], ps, depth))
-				return False;
-		}
-
-		for (i = 0; i < r_u->num_entries2; i++)	{
-			fstring tmp;
-			slprintf(tmp, sizeof(tmp) - 1, "dom[%d]", i);
-			if(!smb_io_unistr2(tmp, &r_u->uni_dom_name[i],
-				       r_u->sam[i].hdr_name.buffer, ps,
-				       depth))
-				return False;
-		}
-
-	}
-
-	if(!prs_align(ps))
-		return False;
-	if(!prs_uint32("num_entries4", ps, depth, &r_u->num_entries4))
-		return False;
-	if(!prs_ntstatus("status", ps, depth, &r_u->status))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -3123,12 +1329,8 @@ void init_samr_q_enum_dom_groups(SAMR_Q_
 				 POLICY_HND *pol,
 				 uint32 start_idx, uint32 size)
 {
-	DEBUG(5, ("init_samr_q_enum_dom_groups\n"));
-
-	q_e->pol = *pol;
-
-	q_e->start_idx = start_idx;
-	q_e->max_size = size;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -3138,24 +1340,8 @@ reads or writes a structure.
 BOOL samr_io_q_enum_dom_groups(const char *desc, SAMR_Q_ENUM_DOM_GROUPS * q_e,
 			       prs_struct *ps, int depth)
 {
-	if (q_e == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "samr_io_q_enum_dom_groups");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!smb_io_pol_hnd("pol", &(q_e->pol), ps, depth))
-		return False;
-
-	if(!prs_uint32("start_idx", ps, depth, &q_e->start_idx))
-		return False;
-	if(!prs_uint32("max_size ", ps, depth, &q_e->max_size))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -3165,22 +1351,8 @@ inits a SAMR_R_ENUM_DOM_GROUPS structure
 void init_samr_r_enum_dom_groups(SAMR_R_ENUM_DOM_GROUPS * r_u,
 				 uint32 next_idx, uint32 num_sam_entries)
 {
-	DEBUG(5, ("init_samr_r_enum_dom_groups\n"));
-
-	r_u->next_idx = next_idx;
-
-	if (num_sam_entries != 0) {
-		r_u->ptr_entries1 = 1;
-		r_u->ptr_entries2 = 1;
-		r_u->num_entries2 = num_sam_entries;
-		r_u->num_entries3 = num_sam_entries;
-
-		r_u->num_entries4 = num_sam_entries;
-	} else {
-		r_u->ptr_entries1 = 0;
-		r_u->num_entries2 = num_sam_entries;
-		r_u->ptr_entries2 = 1;
-	}
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -3190,63 +1362,8 @@ reads or writes a structure.
 BOOL samr_io_r_enum_dom_groups(const char *desc, SAMR_R_ENUM_DOM_GROUPS * r_u,
 			       prs_struct *ps, int depth)
 {
-	uint32 i;
-
-	if (r_u == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "samr_io_r_enum_dom_groups");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_uint32("next_idx    ", ps, depth, &r_u->next_idx))
-		return False;
-	if(!prs_uint32("ptr_entries1", ps, depth, &r_u->ptr_entries1))
-		return False;
-
-	if (r_u->ptr_entries1 != 0) {
-		if(!prs_uint32("num_entries2", ps, depth, &r_u->num_entries2))
-			return False;
-		if(!prs_uint32("ptr_entries2", ps, depth, &r_u->ptr_entries2))
-			return False;
-		if(!prs_uint32("num_entries3", ps, depth, &r_u->num_entries3))
-			return False;
-
-		if (UNMARSHALLING(ps)) {
-			r_u->sam = (SAM_ENTRY *)prs_alloc_mem(ps,sizeof(SAM_ENTRY)*r_u->num_entries2);
-			r_u->uni_grp_name = (UNISTR2 *)prs_alloc_mem(ps,sizeof(UNISTR2)*r_u->num_entries2);
-		}
-
-		if ((r_u->sam == NULL || r_u->uni_grp_name == NULL) && r_u->num_entries2 != 0) {
-			DEBUG(0,
-			      ("NULL pointers in SAMR_R_ENUM_DOM_GROUPS\n"));
-			r_u->num_entries4 = 0;
-			r_u->status = NT_STATUS_MEMORY_NOT_ALLOCATED;
-			return False;
-		}
-
-		for (i = 0; i < r_u->num_entries2; i++)	{
-			if(!sam_io_sam_entry("", &r_u->sam[i], ps, depth))
-				return False;
-		}
-
-		for (i = 0; i < r_u->num_entries2; i++)	{
-			if(!smb_io_unistr2("", &r_u->uni_grp_name[i],
-				       r_u->sam[i].hdr_name.buffer, ps, depth))
-				return False;
-		}
-	}
-
-	if(!prs_align(ps))
-		return False;
-	if(!prs_uint32("num_entries4", ps, depth, &r_u->num_entries4))
-		return False;
-	if(!prs_ntstatus("status", ps, depth, &r_u->status))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -3257,12 +1374,8 @@ void init_samr_q_enum_dom_aliases(SAMR_Q
 				  POLICY_HND *pol, uint32 start_idx,
 				  uint32 size)
 {
-	DEBUG(5, ("init_samr_q_enum_dom_aliases\n"));
-
-	q_e->pol = *pol;
-
-	q_e->start_idx = start_idx;
-	q_e->max_size = size;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 
@@ -3273,24 +1386,8 @@ reads or writes a structure.
 BOOL samr_io_q_enum_dom_aliases(const char *desc, SAMR_Q_ENUM_DOM_ALIASES * q_e,
 				prs_struct *ps, int depth)
 {
-	if (q_e == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "samr_io_q_enum_dom_aliases");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!smb_io_pol_hnd("pol", &q_e->pol, ps, depth))
-		return False;
-
-	if(!prs_uint32("start_idx", ps, depth, &q_e->start_idx))
-		return False;
-	if(!prs_uint32("max_size ", ps, depth, &q_e->max_size))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -3299,22 +1396,8 @@ inits a SAMR_R_ENUM_DOM_ALIASES structur
 
 void init_samr_r_enum_dom_aliases(SAMR_R_ENUM_DOM_ALIASES *r_u, uint32 next_idx, uint32 num_sam_entries)
 {
-	DEBUG(5, ("init_samr_r_enum_dom_aliases\n"));
-
-	r_u->next_idx = next_idx;
-
-	if (num_sam_entries != 0) {
-		r_u->ptr_entries1 = 1;
-		r_u->ptr_entries2 = 1;
-		r_u->num_entries2 = num_sam_entries;
-		r_u->num_entries3 = num_sam_entries;
-
-		r_u->num_entries4 = num_sam_entries;
-	} else {
-		r_u->ptr_entries1 = 0;
-		r_u->num_entries2 = num_sam_entries;
-		r_u->ptr_entries2 = 1;
-	}
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -3324,64 +1407,8 @@ reads or writes a structure.
 BOOL samr_io_r_enum_dom_aliases(const char *desc, SAMR_R_ENUM_DOM_ALIASES * r_u,
 				prs_struct *ps, int depth)
 {
-	uint32 i;
-
-	if (r_u == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "samr_io_r_enum_dom_aliases");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_uint32("next_idx    ", ps, depth, &r_u->next_idx))
-		return False;
-	if(!prs_uint32("ptr_entries1", ps, depth, &r_u->ptr_entries1))
-		return False;
-
-	if (r_u->ptr_entries1 != 0) {
-		if(!prs_uint32("num_entries2", ps, depth, &r_u->num_entries2))
-			return False;
-		if(!prs_uint32("ptr_entries2", ps, depth, &r_u->ptr_entries2))
-			return False;
-		if(!prs_uint32("num_entries3", ps, depth, &r_u->num_entries3))
-			return False;
-
-		if (UNMARSHALLING(ps) && (r_u->num_entries2 > 0)) {
-			r_u->sam = (SAM_ENTRY *)prs_alloc_mem(ps,sizeof(SAM_ENTRY)*r_u->num_entries2);
-			r_u->uni_grp_name = (UNISTR2 *)prs_alloc_mem(ps,sizeof(UNISTR2)*r_u->num_entries2);
-		}
-
-		if (r_u->num_entries2 != 0 && 
-		    (r_u->sam == NULL || r_u->uni_grp_name == NULL)) {
-			DEBUG(0,("NULL pointers in SAMR_R_ENUM_DOM_ALIASES\n"));
-			r_u->num_entries4 = 0;
-			r_u->status = NT_STATUS_MEMORY_NOT_ALLOCATED;
-			return False;
-		}
-
-		for (i = 0; i < r_u->num_entries2; i++) {
-			if(!sam_io_sam_entry("", &r_u->sam[i], ps, depth))
-				return False;
-		}
-
-		for (i = 0; i < r_u->num_entries2; i++) {
-			if(!smb_io_unistr2("", &r_u->uni_grp_name[i],
-				       r_u->sam[i].hdr_name.buffer, ps,
-				       depth))
-				return False;
-		}
-	}
-
-	if(!prs_align(ps))
-		return False;
-	if(!prs_uint32("num_entries4", ps, depth, &r_u->num_entries4))
-		return False;
-	if(!prs_ntstatus("status", ps, depth, &r_u->status))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -3390,18 +1417,8 @@ inits a ALIAS_INFO1 structure.
 
 void init_samr_alias_info1(ALIAS_INFO1 * al1, const char *acct_name, uint32 num_member, const char *acct_desc)
 {
-	int acct_len_name = acct_name != NULL ? strlen(acct_name) : 0;
-	int acct_len_desc = acct_desc != NULL ? strlen(acct_desc) : 0;
-
-	DEBUG(5, ("init_samr_alias_info1\n"));
-
-	init_uni_hdr(&al1->hdr_acct_name, acct_len_name);
-	init_unistr2(&al1->uni_acct_name, acct_name, acct_len_name);
-
-	al1->num_member=num_member;
-
-	init_uni_hdr(&al1->hdr_acct_desc, acct_len_desc);
-	init_unistr2(&al1->uni_acct_desc, acct_desc, acct_len_desc);
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -3411,34 +1428,8 @@ reads or writes a structure.
 BOOL samr_io_alias_info1(const char *desc, ALIAS_INFO1 * al1,
 			 prs_struct *ps, int depth)
 {
-	if (al1 == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "samr_io_alias_info1");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!smb_io_unihdr("hdr_acct_name", &al1->hdr_acct_name, ps, depth))
-		return False;
-	if(!prs_uint32("num_member", ps, depth, &al1->num_member))
-		return False;
-	if(!smb_io_unihdr("hdr_acct_desc", &al1->hdr_acct_desc, ps, depth))
-		return False;
-
-	if(!smb_io_unistr2("uni_acct_name", &al1->uni_acct_name,
-		       al1->hdr_acct_name.buffer, ps, depth))
-		return False;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!smb_io_unistr2("uni_acct_desc", &al1->uni_acct_desc,
-		       al1->hdr_acct_desc.buffer, ps, depth))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -3447,12 +1438,8 @@ inits a ALIAS_INFO3 structure.
 
 void init_samr_alias_info3(ALIAS_INFO3 * al3, const char *acct_desc)
 {
-	int acct_len = acct_desc != NULL ? strlen(acct_desc) : 0;
-
-	DEBUG(5, ("init_samr_alias_info3\n"));
-
-	init_uni_hdr(&al3->hdr_acct_desc, acct_len);
-	init_unistr2(&al3->uni_acct_desc, acct_desc, acct_len);
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -3462,22 +1449,8 @@ reads or writes a structure.
 BOOL samr_io_alias_info3(const char *desc, ALIAS_INFO3 * al3,
 			 prs_struct *ps, int depth)
 {
-	if (al3 == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "samr_io_alias_info3");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!smb_io_unihdr("hdr_acct_desc", &al3->hdr_acct_desc, ps, depth))
-		return False;
-	if(!smb_io_unistr2("uni_acct_desc", &al3->uni_acct_desc,
-		       al3->hdr_acct_desc.buffer, ps, depth))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -3487,32 +1460,8 @@ reads or writes a structure.
 BOOL samr_alias_info_ctr(const char *desc, ALIAS_INFO_CTR * ctr,
 			 prs_struct *ps, int depth)
 {
-	if (ctr == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "samr_alias_info_ctr");
-	depth++;
-
-	if(!prs_uint16("switch_value1", ps, depth, &ctr->switch_value1))
-		return False;
-	if(!prs_uint16("switch_value2", ps, depth, &ctr->switch_value2))
-		return False;
-
-	switch (ctr->switch_value1) {
-	case 1: 
-		if(!samr_io_alias_info1("alias_info1", &ctr->alias.info1, ps, depth))
-			return False;
-		break;
-	case 3: 
-		if(!samr_io_alias_info3("alias_info3", &ctr->alias.info3, ps, depth))
-			return False;
-		break;
-	default:
-		DEBUG(0,("samr_alias_info_ctr: unsupported switch level\n"));
-		break;
-	}
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -3522,10 +1471,8 @@ inits a SAMR_Q_QUERY_ALIASINFO structure
 void init_samr_q_query_aliasinfo(SAMR_Q_QUERY_ALIASINFO * q_e,
 				 POLICY_HND *pol, uint16 switch_level)
 {
-	DEBUG(5, ("init_samr_q_query_aliasinfo\n"));
-
-	q_e->pol = *pol;
-	q_e->switch_level = switch_level;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -3535,22 +1482,8 @@ reads or writes a structure.
 BOOL samr_io_q_query_aliasinfo(const char *desc, SAMR_Q_QUERY_ALIASINFO * q_e,
 			       prs_struct *ps, int depth)
 {
-	if (q_e == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "samr_io_q_query_aliasinfo");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!smb_io_pol_hnd("pol", &(q_e->pol), ps, depth))
-		return False;
-
-	if(!prs_uint16("switch_level", ps, depth, &q_e->switch_level))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -3560,11 +1493,8 @@ inits a SAMR_R_QUERY_ALIASINFO structure
 void init_samr_r_query_aliasinfo(SAMR_R_QUERY_ALIASINFO * r_u,
 				 ALIAS_INFO_CTR * ctr, NTSTATUS status)
 {
-	DEBUG(5, ("init_samr_r_query_aliasinfo\n"));
-
-	r_u->ptr = (NT_STATUS_IS_OK(status) && ctr != NULL) ? 1 : 0;
-	r_u->ctr = *ctr;
-	r_u->status = status;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -3574,29 +1504,8 @@ reads or writes a structure.
 BOOL samr_io_r_query_aliasinfo(const char *desc, SAMR_R_QUERY_ALIASINFO * r_u,
 			       prs_struct *ps, int depth)
 {
-	if (r_u == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "samr_io_r_query_aliasinfo");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_uint32("ptr", ps, depth, &r_u->ptr))
-		return False;
-
-	if (r_u->ptr != 0) {
-		if(!samr_alias_info_ctr("ctr", &r_u->ctr, ps, depth))
-			return False;
-	}
-
-	if(!prs_align(ps))
-		return False;
-	if(!prs_ntstatus("status", ps, depth, &r_u->status))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -3606,10 +1515,8 @@ inits a SAMR_Q_SET_ALIASINFO structure.
 void init_samr_q_set_aliasinfo(SAMR_Q_SET_ALIASINFO * q_u,
 			       POLICY_HND *hnd, ALIAS_INFO_CTR * ctr)
 {
-	DEBUG(5, ("init_samr_q_set_aliasinfo\n"));
-
-	q_u->alias_pol = *hnd;
-	q_u->ctr = *ctr;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -3619,21 +1526,8 @@ reads or writes a structure.
 BOOL samr_io_q_set_aliasinfo(const char *desc, SAMR_Q_SET_ALIASINFO * q_u,
 			     prs_struct *ps, int depth)
 {
-	if (q_u == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "samr_io_q_set_aliasinfo");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!smb_io_pol_hnd("alias_pol", &q_u->alias_pol, ps, depth))
-		return False;
-	if(!samr_alias_info_ctr("ctr", &q_u->ctr, ps, depth))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -3643,19 +1537,9 @@ reads or writes a structure.
 BOOL samr_io_r_set_aliasinfo(const char *desc, SAMR_R_SET_ALIASINFO * r_u,
 			     prs_struct *ps, int depth)
 {
-	if (r_u == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "samr_io_r_set_aliasinfo");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-	if(!prs_ntstatus("status", ps, depth, &r_u->status))
-		return False;
-
-	return True;
-}
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
+}
 
 /*******************************************************************
 inits a SAMR_Q_QUERY_USERALIASES structure.
@@ -3666,16 +1550,8 @@ void init_samr_q_query_useraliases(SAMR_
 				   uint32 num_sids,
 				   uint32 *ptr_sid, DOM_SID2 * sid)
 {
-	DEBUG(5, ("init_samr_q_query_useraliases\n"));
-
-	q_u->pol = *hnd;
-
-	q_u->num_sids1 = num_sids;
-	q_u->ptr = 1;
-	q_u->num_sids2 = num_sids;
-
-	q_u->ptr_sid = ptr_sid;
-	q_u->sid = sid;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -3685,57 +1561,8 @@ reads or writes a SAMR_Q_QUERY_USERALIAS
 BOOL samr_io_q_query_useraliases(const char *desc, SAMR_Q_QUERY_USERALIASES * q_u,
 				 prs_struct *ps, int depth)
 {
-	fstring tmp;
-	uint32 i;
-
-	if (q_u == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "samr_io_q_query_useraliases");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!smb_io_pol_hnd("pol", &q_u->pol, ps, depth))
-		return False;
-
-	if(!prs_uint32("num_sids1", ps, depth, &q_u->num_sids1))
-		return False;
-	if(!prs_uint32("ptr      ", ps, depth, &q_u->ptr))
-		return False;
-
-	if (q_u->ptr==0)
-		return True;
-
-	if(!prs_uint32("num_sids2", ps, depth, &q_u->num_sids2))
-		return False;
-
-	if (UNMARSHALLING(ps) && (q_u->num_sids2 != 0)) {
-		q_u->ptr_sid = (uint32 *)prs_alloc_mem(ps,sizeof(q_u->ptr_sid[0])*q_u->num_sids2);
-		if (q_u->ptr_sid == NULL)
-			return False;
-
-		q_u->sid = (DOM_SID2 *)prs_alloc_mem(ps, sizeof(q_u->sid[0]) * q_u->num_sids2);
-		if (q_u->sid == NULL)
-			return False;
-	}
-
-	for (i = 0; i < q_u->num_sids2; i++) {
-		slprintf(tmp, sizeof(tmp) - 1, "ptr[%02d]", i);
-		if(!prs_uint32(tmp, ps, depth, &q_u->ptr_sid[i]))
-			return False;
-	}
-
-	for (i = 0; i < q_u->num_sids2; i++) {
-		if (q_u->ptr_sid[i] != 0) {
-			slprintf(tmp, sizeof(tmp) - 1, "sid[%02d]", i);
-			if(!smb_io_dom_sid2(tmp, &q_u->sid[i], ps, depth))
-				return False;
-		}
-	}
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -3746,21 +1573,8 @@ void init_samr_r_query_useraliases(SAMR_
 				   uint32 num_rids, uint32 *rid,
 				   NTSTATUS status)
 {
-	DEBUG(5, ("init_samr_r_query_useraliases\n"));
-
-	if (NT_STATUS_IS_OK(status)) {
-		r_u->num_entries = num_rids;
-		r_u->ptr = 1;
-		r_u->num_entries2 = num_rids;
-
-		r_u->rid = rid;
-	} else {
-		r_u->num_entries = 0;
-		r_u->ptr = 0;
-		r_u->num_entries2 = 0;
-	}
-
-	r_u->status = status;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -3770,36 +1584,8 @@ reads or writes a structure.
 BOOL samr_io_rids(const char *desc, uint32 *num_rids, uint32 **rid,
 		  prs_struct *ps, int depth)
 {
-	fstring tmp;
-	uint32 i;
-	if (rid == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "samr_io_rids");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_uint32("num_rids", ps, depth, num_rids))
-		return False;
-
-	if ((*num_rids) != 0) {
-		if (UNMARSHALLING(ps)) {
-			/* reading */
-			(*rid) = (uint32 *)prs_alloc_mem(ps,sizeof(uint32)*(*num_rids));
-		}
-		if ((*rid) == NULL)
-			return False;
-
-		for (i = 0; i < (*num_rids); i++) {
-			slprintf(tmp, sizeof(tmp) - 1, "rid[%02d]", i);
-			if(!prs_uint32(tmp, ps, depth, &((*rid)[i])))
-				return False;
-		}
-	}
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -3809,31 +1595,8 @@ reads or writes a structure.
 BOOL samr_io_r_query_useraliases(const char *desc, SAMR_R_QUERY_USERALIASES * r_u,
 				 prs_struct *ps, int depth)
 {
-	if (r_u == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "samr_io_r_query_useraliases");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_uint32("num_entries", ps, depth, &r_u->num_entries))
-		return False;
-	if(!prs_uint32("ptr        ", ps, depth, &r_u->ptr))
-		return False;
-
-	if (r_u->ptr != 0) {
-		if(!samr_io_rids("rids", &r_u->num_entries2, &r_u->rid, ps, depth))
-			return False;
-	}
-
-	if(!prs_align(ps))
-		return False;
-	if(!prs_ntstatus("status", ps, depth, &r_u->status))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -3857,24 +1620,8 @@ reads or writes a structure.
 BOOL samr_io_q_open_alias(const char *desc, SAMR_Q_OPEN_ALIAS * q_u,
 			  prs_struct *ps, int depth)
 {
-	if (q_u == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "samr_io_q_open_alias");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!smb_io_pol_hnd("domain_pol", &q_u->dom_pol, ps, depth))
-		return False;
-
-	if(!prs_uint32("access_mask", ps, depth, &q_u->access_mask))
-		return False;
-	if(!prs_uint32("rid_alias", ps, depth, &q_u->rid_alias))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -3884,22 +1631,8 @@ reads or writes a structure.
 BOOL samr_io_r_open_alias(const char *desc, SAMR_R_OPEN_ALIAS * r_u,
 			  prs_struct *ps, int depth)
 {
-	if (r_u == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "samr_io_r_open_alias");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!smb_io_pol_hnd("pol", &r_u->pol, ps, depth))
-		return False;
-
-	if(!prs_ntstatus("status", ps, depth, &r_u->status))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -3910,21 +1643,8 @@ void init_samr_q_lookup_rids(TALLOC_CTX
 			     POLICY_HND *pol, uint32 flags,
 			     uint32 num_rids, uint32 *rid)
 {
-	DEBUG(5, ("init_samr_q_lookup_rids\n"));
-
-	q_u->pol = *pol;
-
-	q_u->num_rids1 = num_rids;
-	q_u->flags = flags;
-	q_u->ptr = 0;
-	q_u->num_rids2 = num_rids;
-	q_u->rid = (uint32 *)talloc_zero(ctx, num_rids * sizeof(q_u->rid[0]));
-	if (q_u->rid == NULL) {
-		q_u->num_rids1 = 0;
-		q_u->num_rids2 = 0;
-	} else {
-		memcpy(q_u->rid, rid, num_rids * sizeof(q_u->rid[0]));
-	}
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -3934,46 +1654,8 @@ reads or writes a structure.
 BOOL samr_io_q_lookup_rids(const char *desc, SAMR_Q_LOOKUP_RIDS * q_u,
 			   prs_struct *ps, int depth)
 {
-	uint32 i;
-	fstring tmp;
-
-	if (q_u == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "samr_io_q_lookup_rids");
-	depth++;
-
-	if (UNMARSHALLING(ps))
-		ZERO_STRUCTP(q_u);
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!smb_io_pol_hnd("pol", &q_u->pol, ps, depth))
-		return False;
-
-	if(!prs_uint32("num_rids1", ps, depth, &q_u->num_rids1))
-		return False;
-	if(!prs_uint32("flags    ", ps, depth, &q_u->flags))
-		return False;
-	if(!prs_uint32("ptr      ", ps, depth, &q_u->ptr))
-		return False;
-	if(!prs_uint32("num_rids2", ps, depth, &q_u->num_rids2))
-		return False;
-
-	if (UNMARSHALLING(ps) && (q_u->num_rids2 != 0)) {
-		q_u->rid = (uint32 *)prs_alloc_mem(ps, sizeof(q_u->rid[0])*q_u->num_rids2);
-		if (q_u->rid == NULL)
-			return False;
-	}
-
-	for (i = 0; i < q_u->num_rids2; i++) {
-		slprintf(tmp, sizeof(tmp) - 1, "rid[%02d]  ", i);
-		if(!prs_uint32(tmp, ps, depth, &q_u->rid[i]))
-			return False;
-	}
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -3984,33 +1666,8 @@ void init_samr_r_lookup_rids(SAMR_R_LOOK
 			     uint32 num_names, UNIHDR * hdr_name,
 			     UNISTR2 *uni_name, uint32 *type)
 {
-	DEBUG(5, ("init_samr_r_lookup_rids\n"));
-
-	r_u->hdr_name = NULL;
-	r_u->uni_name = NULL;
-	r_u->type = NULL;
-
-	if (num_names != 0) {
-		r_u->num_names1 = num_names;
-		r_u->ptr_names = 1;
-		r_u->num_names2 = num_names;
-
-		r_u->num_types1 = num_names;
-		r_u->ptr_types = 1;
-		r_u->num_types2 = num_names;
-
-		r_u->hdr_name = hdr_name;
-		r_u->uni_name = uni_name;
-		r_u->type = type;
-	} else {
-		r_u->num_names1 = num_names;
-		r_u->ptr_names = 0;
-		r_u->num_names2 = num_names;
-
-		r_u->num_types1 = num_names;
-		r_u->ptr_types = 0;
-		r_u->num_types2 = num_names;
-	}
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -4020,80 +1677,8 @@ reads or writes a structure.
 BOOL samr_io_r_lookup_rids(const char *desc, SAMR_R_LOOKUP_RIDS * r_u,
 			   prs_struct *ps, int depth)
 {
-	uint32 i;
-	fstring tmp;
-	if (r_u == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "samr_io_r_lookup_rids");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_uint32("num_names1", ps, depth, &r_u->num_names1))
-		return False;
-	if(!prs_uint32("ptr_names ", ps, depth, &r_u->ptr_names))
-		return False;
-
-	if (r_u->ptr_names != 0) {
-
-		if(!prs_uint32("num_names2", ps, depth, &r_u->num_names2))
-			return False;
-
-
-		if (UNMARSHALLING(ps) && (r_u->num_names2 != 0)) {
-			r_u->hdr_name = (UNIHDR *) prs_alloc_mem(ps, r_u->num_names2 * sizeof(r_u->hdr_name[0]));
-			if (r_u->hdr_name == NULL)
-				return False;
-
-			r_u->uni_name = (UNISTR2 *)prs_alloc_mem(ps, r_u->num_names2 * sizeof(r_u->uni_name[0]));
-			if (r_u->uni_name == NULL)
-				return False;
-		}
-		
-		for (i = 0; i < r_u->num_names2; i++) {
-			slprintf(tmp, sizeof(tmp) - 1, "hdr[%02d]  ", i);
-			if(!smb_io_unihdr("", &r_u->hdr_name[i], ps, depth))
-				return False;
-		}
-		for (i = 0; i < r_u->num_names2; i++) {
-			slprintf(tmp, sizeof(tmp) - 1, "str[%02d]  ", i);
-			if(!smb_io_unistr2("", &r_u->uni_name[i], r_u->hdr_name[i].buffer, ps, depth))
-				return False;
-		}
-
-	}
-	
-	if(!prs_align(ps))
-		return False;
-	if(!prs_uint32("num_types1", ps, depth, &r_u->num_types1))
-		return False;
-	if(!prs_uint32("ptr_types ", ps, depth, &r_u->ptr_types))
-		return False;
-
-	if (r_u->ptr_types != 0) {
-
-		if(!prs_uint32("num_types2", ps, depth, &r_u->num_types2))
-			return False;
-
-		if (UNMARSHALLING(ps) && (r_u->num_types2 != 0)) {
-			r_u->type = (uint32 *)prs_alloc_mem(ps, r_u->num_types2 * sizeof(r_u->type[0]));
-			if (r_u->type == NULL)
-				return False;
-		}
-
-		for (i = 0; i < r_u->num_types2; i++) {
-			slprintf(tmp, sizeof(tmp) - 1, "type[%02d]  ", i);
-			if(!prs_uint32(tmp, ps, depth, &r_u->type[i]))
-				return False;
-		}
-	}
-
-	if(!prs_ntstatus("status", ps, depth, &r_u->status))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -4102,9 +1687,8 @@ inits a SAMR_Q_OPEN_ALIAS structure.
 
 void init_samr_q_delete_alias(SAMR_Q_DELETE_DOM_ALIAS * q_u, POLICY_HND *hnd)
 {
-	DEBUG(5, ("init_samr_q_delete_alias\n"));
-
-	q_u->alias_pol = *hnd;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -4114,19 +1698,8 @@ reads or writes a structure.
 BOOL samr_io_q_delete_alias(const char *desc, SAMR_Q_DELETE_DOM_ALIAS * q_u,
 			    prs_struct *ps, int depth)
 {
-	if (q_u == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "samr_io_q_delete_alias");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!smb_io_pol_hnd("alias_pol", &q_u->alias_pol, ps, depth))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -4136,21 +1709,8 @@ reads or writes a structure.
 BOOL samr_io_r_delete_alias(const char *desc, SAMR_R_DELETE_DOM_ALIAS * r_u,
 			    prs_struct *ps, int depth)
 {
-	if (r_u == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "samr_io_r_delete_alias");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!smb_io_pol_hnd("pol", &r_u->pol, ps, depth))
-		return False;
-	if(!prs_ntstatus("status", ps, depth, &r_u->status))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -4160,16 +1720,8 @@ inits a SAMR_Q_CREATE_DOM_ALIAS structur
 void init_samr_q_create_dom_alias(SAMR_Q_CREATE_DOM_ALIAS * q_u,
 				  POLICY_HND *hnd, const char *acct_desc)
 {
-	int acct_len = acct_desc != NULL ? strlen(acct_desc) : 0;
-
-	DEBUG(5, ("init_samr_q_create_dom_alias\n"));
-
-	q_u->dom_pol = *hnd;
-
-	init_uni_hdr(&q_u->hdr_acct_desc, acct_len);
-	init_unistr2(&q_u->uni_acct_desc, acct_desc, acct_len);
-
-	q_u->access_mask = 0x001f000f;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -4179,30 +1731,8 @@ reads or writes a structure.
 BOOL samr_io_q_create_dom_alias(const char *desc, SAMR_Q_CREATE_DOM_ALIAS * q_u,
 				prs_struct *ps, int depth)
 {
-	if (q_u == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "samr_io_q_create_dom_alias");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!smb_io_pol_hnd("dom_pol", &q_u->dom_pol, ps, depth))
-		return False;
-
-	if(!smb_io_unihdr("hdr_acct_desc", &q_u->hdr_acct_desc, ps, depth))
-		return False;
-	if(!smb_io_unistr2("uni_acct_desc", &q_u->uni_acct_desc,
-		       q_u->hdr_acct_desc.buffer, ps, depth))
-		return False;
-
-	if(!prs_align(ps))
-		return False;
-	if(!prs_uint32("access_mask", ps, depth, &q_u->access_mask))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -4212,25 +1742,8 @@ reads or writes a structure.
 BOOL samr_io_r_create_dom_alias(const char *desc, SAMR_R_CREATE_DOM_ALIAS * r_u,
 				prs_struct *ps, int depth)
 {
-	if (r_u == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "samr_io_r_create_dom_alias");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!smb_io_pol_hnd("alias_pol", &r_u->alias_pol, ps, depth))
-		return False;
-
-	if(!prs_uint32("rid", ps, depth, &r_u->rid))
-		return False;
-
-	if(!prs_ntstatus("status", ps, depth, &r_u->status))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -4240,10 +1753,8 @@ inits a SAMR_Q_ADD_ALIASMEM structure.
 void init_samr_q_add_aliasmem(SAMR_Q_ADD_ALIASMEM * q_u, POLICY_HND *hnd,
 			      DOM_SID *sid)
 {
-	DEBUG(5, ("init_samr_q_add_aliasmem\n"));
-
-	q_u->alias_pol = *hnd;
-	init_dom_sid2(&q_u->sid, sid);
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -4253,21 +1764,8 @@ reads or writes a structure.
 BOOL samr_io_q_add_aliasmem(const char *desc, SAMR_Q_ADD_ALIASMEM * q_u,
 			    prs_struct *ps, int depth)
 {
-	if (q_u == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "samr_io_q_add_aliasmem");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!smb_io_pol_hnd("alias_pol", &q_u->alias_pol, ps, depth))
-		return False;
-	if(!smb_io_dom_sid2("sid      ", &q_u->sid, ps, depth))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -4277,19 +1775,8 @@ reads or writes a structure.
 BOOL samr_io_r_add_aliasmem(const char *desc, SAMR_R_ADD_ALIASMEM * r_u,
 			    prs_struct *ps, int depth)
 {
-	if (r_u == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "samr_io_r_add_aliasmem");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_ntstatus("status", ps, depth, &r_u->status))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -4299,10 +1786,8 @@ inits a SAMR_Q_DEL_ALIASMEM structure.
 void init_samr_q_del_aliasmem(SAMR_Q_DEL_ALIASMEM * q_u, POLICY_HND *hnd,
 			      DOM_SID *sid)
 {
-	DEBUG(5, ("init_samr_q_del_aliasmem\n"));
-
-	q_u->alias_pol = *hnd;
-	init_dom_sid2(&q_u->sid, sid);
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -4312,21 +1797,8 @@ reads or writes a structure.
 BOOL samr_io_q_del_aliasmem(const char *desc, SAMR_Q_DEL_ALIASMEM * q_u,
 			    prs_struct *ps, int depth)
 {
-	if (q_u == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "samr_io_q_del_aliasmem");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!smb_io_pol_hnd("alias_pol", &q_u->alias_pol, ps, depth))
-		return False;
-	if(!smb_io_dom_sid2("sid      ", &q_u->sid, ps, depth))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -4335,20 +1807,8 @@ reads or writes a structure.
 
 BOOL samr_io_r_del_aliasmem(const char *desc, SAMR_R_DEL_ALIASMEM * r_u,
 			    prs_struct *ps, int depth)
-{
-	if (r_u == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "samr_io_r_del_aliasmem");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_ntstatus("status", ps, depth, &r_u->status))
-		return False;
-
-	return True;
+{ DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -4358,9 +1818,8 @@ inits a SAMR_Q_DELETE_DOM_ALIAS structur
 void init_samr_q_delete_dom_alias(SAMR_Q_DELETE_DOM_ALIAS * q_c,
 				  POLICY_HND *hnd)
 {
-	DEBUG(5, ("init_samr_q_delete_dom_alias\n"));
-
-	q_c->alias_pol = *hnd;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -4370,19 +1829,8 @@ reads or writes a structure.
 BOOL samr_io_q_delete_dom_alias(const char *desc, SAMR_Q_DELETE_DOM_ALIAS * q_u,
 				prs_struct *ps, int depth)
 {
-	if (q_u == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "samr_io_q_delete_dom_alias");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!smb_io_pol_hnd("alias_pol", &q_u->alias_pol, ps, depth))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -4392,9 +1840,8 @@ inits a SAMR_R_DELETE_DOM_ALIAS structur
 void init_samr_r_delete_dom_alias(SAMR_R_DELETE_DOM_ALIAS * r_u,
 				  NTSTATUS status)
 {
-	DEBUG(5, ("init_samr_r_delete_dom_alias\n"));
-
-	r_u->status = status;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -4404,19 +1851,8 @@ reads or writes a structure.
 BOOL samr_io_r_delete_dom_alias(const char *desc, SAMR_R_DELETE_DOM_ALIAS * r_u,
 				prs_struct *ps, int depth)
 {
-	if (r_u == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "samr_io_r_delete_dom_alias");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_ntstatus("status", ps, depth, &r_u->status))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -4426,9 +1862,8 @@ inits a SAMR_Q_QUERY_ALIASMEM structure.
 void init_samr_q_query_aliasmem(SAMR_Q_QUERY_ALIASMEM * q_c,
 				POLICY_HND *hnd)
 {
-	DEBUG(5, ("init_samr_q_query_aliasmem\n"));
-
-	q_c->alias_pol = *hnd;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -4437,20 +1872,8 @@ reads or writes a structure.
 
 BOOL samr_io_q_query_aliasmem(const char *desc, SAMR_Q_QUERY_ALIASMEM * q_u,
 			      prs_struct *ps, int depth)
-{
-	if (q_u == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "samr_io_q_query_aliasmem");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!smb_io_pol_hnd("alias_pol", &q_u->alias_pol, ps, depth))
-		return False;
-
-	return True;
+{DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -4461,20 +1884,8 @@ void init_samr_r_query_aliasmem(SAMR_R_Q
 				uint32 num_sids, DOM_SID2 * sid,
 				NTSTATUS status)
 {
-	DEBUG(5, ("init_samr_r_query_aliasmem\n"));
-
-	if (NT_STATUS_IS_OK(status)) {
-		r_u->num_sids = num_sids;
-		r_u->ptr = (num_sids != 0) ? 1 : 0;
-		r_u->num_sids1 = num_sids;
-
-		r_u->sid = sid;
-	} else {
-		r_u->ptr = 0;
-		r_u->num_sids = 0;
-	}
-
-	r_u->status = status;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -4484,51 +1895,8 @@ reads or writes a structure.
 BOOL samr_io_r_query_aliasmem(const char *desc, SAMR_R_QUERY_ALIASMEM * r_u,
 			      prs_struct *ps, int depth)
 {
-	uint32 i;
-	uint32 ptr_sid[MAX_LOOKUP_SIDS];
-
-	if (r_u == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "samr_io_r_query_aliasmem");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_uint32("num_sids ", ps, depth, &r_u->num_sids))
-		return False;
-	if(!prs_uint32("ptr", ps, depth, &r_u->ptr))
-		return False;
-
-	if (r_u->ptr != 0) {
-		SMB_ASSERT_ARRAY(ptr_sid, r_u->num_sids);
-
-		if (r_u->num_sids != 0) {
-			if(!prs_uint32("num_sids1", ps, depth, &r_u->num_sids1))
-				return False;
-
-			for (i = 0; i < r_u->num_sids1; i++) {
-				ptr_sid[i] = 1;
-				if(!prs_uint32("", ps, depth, &ptr_sid[i]))
-				  return False;
-			}
-
-			for (i = 0; i < r_u->num_sids1; i++) {
-				if (ptr_sid[i] != 0) {
-					if(!smb_io_dom_sid2("", &r_u->sid[i], ps, depth))
-						return False;
-				}
-			}
-		}
-	}
-
-	if(!prs_align(ps))
-		return False;
-	if(!prs_ntstatus("status", ps, depth, &r_u->status))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -4539,30 +1907,8 @@ NTSTATUS init_samr_q_lookup_names(TALLOC
 			      POLICY_HND *pol, uint32 flags,
 			      uint32 num_names, const char **name)
 {
-	uint32 i;
-
-	DEBUG(5, ("init_samr_q_lookup_names\n"));
-
-	q_u->pol = *pol;
-
-	q_u->num_names1 = num_names;
-	q_u->flags = flags;
-	q_u->ptr = 0;
-	q_u->num_names2 = num_names;
-
-	if (!(q_u->hdr_name = (UNIHDR *)talloc_zero(ctx, num_names * sizeof(UNIHDR))))
-		return NT_STATUS_NO_MEMORY;
-
-	if (!(q_u->uni_name = (UNISTR2 *)talloc_zero(ctx, num_names * sizeof(UNISTR2))))
-		return NT_STATUS_NO_MEMORY;
-
-	for (i = 0; i < num_names; i++) {
-		int len_name = name[i] != NULL ? strlen(name[i]) : 0;
-		init_uni_hdr(&q_u->hdr_name[i], len_name);	/* unicode header for user_name */
-		init_unistr2(&q_u->uni_name[i], name[i], len_name);	/* unicode string for machine account */
-	}
-
-	return NT_STATUS_OK;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -4572,52 +1918,8 @@ reads or writes a structure.
 BOOL samr_io_q_lookup_names(const char *desc, SAMR_Q_LOOKUP_NAMES * q_u,
 			    prs_struct *ps, int depth)
 {
-	uint32 i;
-
-	if (q_u == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "samr_io_q_lookup_names");
-	depth++;
-
-	if (UNMARSHALLING(ps))
-		ZERO_STRUCTP(q_u);
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!smb_io_pol_hnd("pol", &q_u->pol, ps, depth))
-		return False;
-
-	if(!prs_uint32("num_names1", ps, depth, &q_u->num_names1))
-		return False;
-	if(!prs_uint32("flags     ", ps, depth, &q_u->flags))
-		return False;
-	if(!prs_uint32("ptr       ", ps, depth, &q_u->ptr))
-		return False;
-	if(!prs_uint32("num_names2", ps, depth, &q_u->num_names2))
-		return False;
-
-	if (UNMARSHALLING(ps) && (q_u->num_names2 != 0)) {
-		q_u->hdr_name = (UNIHDR *)prs_alloc_mem(ps, sizeof(UNIHDR) *
-							q_u->num_names2);
-		q_u->uni_name = (UNISTR2 *)prs_alloc_mem(ps, sizeof(UNISTR2) *
-							 q_u->num_names2);
-		if (!q_u->hdr_name || !q_u->uni_name)
-			return False;
-	}
-
-	for (i = 0; i < q_u->num_names2; i++) {
-		if(!smb_io_unihdr("", &q_u->hdr_name[i], ps, depth))
-			return False;
-	}
-
-	for (i = 0; i < q_u->num_names2; i++) {
-		if(!smb_io_unistr2("", &q_u->uni_name[i], q_u->hdr_name[i].buffer, ps, depth))
-			return False;
-	}
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -4629,49 +1931,8 @@ NTSTATUS init_samr_r_lookup_names(TALLOC
 			      uint32 *rid, uint32 *type,
 			      NTSTATUS status)
 {
-	DEBUG(5, ("init_samr_r_lookup_names\n"));
-
-	if (NT_STATUS_IS_OK(status) && (num_rids != 0))	{
-		uint32 i;
-
-		r_u->num_types1 = num_rids;
-		r_u->ptr_types = 1;
-		r_u->num_types2 = num_rids;
-
-		r_u->num_rids1 = num_rids;
-		r_u->ptr_rids = 1;
-		r_u->num_rids2 = num_rids;
-
-		if (!(r_u->rids = (uint32 *)talloc_zero(ctx, sizeof(uint32)*num_rids)))
-			return NT_STATUS_NO_MEMORY;
-		if (!(r_u->types = (uint32 *)talloc_zero(ctx, sizeof(uint32)*num_rids)))
-			return NT_STATUS_NO_MEMORY;
-
-		if (!r_u->rids || !r_u->types)
-			goto empty;
-
-		for (i = 0; i < num_rids; i++) {
-			r_u->rids[i] = rid[i];
-			r_u->types[i] = type[i];
-		}
-	} else {
-
-  empty:
-		r_u->num_types1 = 0;
-		r_u->ptr_types = 0;
-		r_u->num_types2 = 0;
-
-		r_u->num_rids1 = 0;
-		r_u->ptr_rids = 0;
-		r_u->num_rids2 = 0;
-
-		r_u->rids = NULL;
-		r_u->types = NULL;
-	}
-
-	r_u->status = status;
-
-	return NT_STATUS_OK;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -4681,83 +1942,8 @@ reads or writes a structure.
 BOOL samr_io_r_lookup_names(const char *desc, SAMR_R_LOOKUP_NAMES * r_u,
 			    prs_struct *ps, int depth)
 {
-	uint32 i;
-	fstring tmp;
-
-	if (r_u == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "samr_io_r_lookup_names");
-	depth++;
-
-	if (UNMARSHALLING(ps))
-		ZERO_STRUCTP(r_u);
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_uint32("num_rids1", ps, depth, &r_u->num_rids1))
-		return False;
-	if(!prs_uint32("ptr_rids ", ps, depth, &r_u->ptr_rids))
-		return False;
-
-	if (r_u->ptr_rids != 0)	{
-		if(!prs_uint32("num_rids2", ps, depth, &r_u->num_rids2))
-			return False;
-
-		if (r_u->num_rids2 != r_u->num_rids1) {
-			/* RPC fault */
-			return False;
-		}
-
-		if (UNMARSHALLING(ps))
-			r_u->rids = (uint32 *)prs_alloc_mem(ps, sizeof(uint32)*r_u->num_rids2);
-
-		if (!r_u->rids) {
-			DEBUG(0, ("NULL rids in samr_io_r_lookup_names\n"));
-			return False;
-		}
-
-		for (i = 0; i < r_u->num_rids2; i++) {
-			slprintf(tmp, sizeof(tmp) - 1, "rid[%02d]  ", i);
-			if(!prs_uint32(tmp, ps, depth, &r_u->rids[i]))
-				return False;
-		}
-	}
-
-	if(!prs_uint32("num_types1", ps, depth, &r_u->num_types1))
-		return False;
-	if(!prs_uint32("ptr_types ", ps, depth, &r_u->ptr_types))
-		return False;
-
-	if (r_u->ptr_types != 0) {
-		if(!prs_uint32("num_types2", ps, depth, &r_u->num_types2))
-			return False;
-
-		if (r_u->num_types2 != r_u->num_types1) {
-			/* RPC fault */
-			return False;
-		}
-
-		if (UNMARSHALLING(ps))
-			r_u->types = (uint32 *)prs_alloc_mem(ps, sizeof(uint32)*r_u->num_types2);
-
-		if (!r_u->types) {
-			DEBUG(0, ("NULL types in samr_io_r_lookup_names\n"));
-			return False;
-		}
-
-		for (i = 0; i < r_u->num_types2; i++) {
-			slprintf(tmp, sizeof(tmp) - 1, "type[%02d]  ", i);
-			if(!prs_uint32(tmp, ps, depth, &r_u->types[i]))
-				return False;
-		}
-	}
-
-	if(!prs_ntstatus("status", ps, depth, &r_u->status))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -4767,9 +1953,8 @@ inits a SAMR_Q_DELETE_DOM_USER structure
 void init_samr_q_delete_dom_user(SAMR_Q_DELETE_DOM_USER * q_c,
 				 POLICY_HND *hnd)
 {
-	DEBUG(5, ("init_samr_q_delete_dom_user\n"));
-
-	q_c->user_pol = *hnd;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -4779,19 +1964,8 @@ reads or writes a structure.
 BOOL samr_io_q_delete_dom_user(const char *desc, SAMR_Q_DELETE_DOM_USER * q_u,
 			       prs_struct *ps, int depth)
 {
-	if (q_u == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "samr_io_q_delete_dom_user");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!smb_io_pol_hnd("user_pol", &q_u->user_pol, ps, depth))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -4801,21 +1975,8 @@ reads or writes a structure.
 BOOL samr_io_r_delete_dom_user(const char *desc, SAMR_R_DELETE_DOM_USER * r_u,
 			       prs_struct *ps, int depth)
 {
-	if (r_u == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "samr_io_r_delete_dom_user");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!smb_io_pol_hnd("pol", &r_u->pol, ps, depth))
-		return False;
-	if(!prs_ntstatus("status", ps, depth, &r_u->status))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -4826,11 +1987,8 @@ void init_samr_q_open_user(SAMR_Q_OPEN_U
 			   POLICY_HND *pol,
 			   uint32 access_mask, uint32 rid)
 {
-	DEBUG(5, ("samr_init_samr_q_open_user\n"));
-
-	q_u->domain_pol = *pol;
-	q_u->access_mask = access_mask;
-	q_u->user_rid = rid;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -4840,24 +1998,8 @@ reads or writes a structure.
 BOOL samr_io_q_open_user(const char *desc, SAMR_Q_OPEN_USER * q_u,
 			 prs_struct *ps, int depth)
 {
-	if (q_u == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "samr_io_q_open_user");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!smb_io_pol_hnd("domain_pol", &q_u->domain_pol, ps, depth))
-		return False;
-
-	if(!prs_uint32("access_mask", ps, depth, &q_u->access_mask))
-		return False;
-	if(!prs_uint32("user_rid ", ps, depth, &q_u->user_rid))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -4867,22 +2009,8 @@ reads or writes a structure.
 BOOL samr_io_r_open_user(const char *desc, SAMR_R_OPEN_USER * r_u,
 			 prs_struct *ps, int depth)
 {
-	if (r_u == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "samr_io_r_open_user");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!smb_io_pol_hnd("user_pol", &r_u->user_pol, ps, depth))
-		return False;
-
-	if(!prs_ntstatus("status", ps, depth, &r_u->status))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 
@@ -4895,18 +2023,8 @@ void init_samr_q_create_user(SAMR_Q_CREA
 			     const char *name,
 			     uint32 acb_info, uint32 access_mask)
 {
-	int len_name;
-	len_name = strlen(name);
-
-	DEBUG(5, ("samr_init_samr_q_create_user\n"));
-
-	q_u->domain_pol = *pol;
-
-	init_uni_hdr(&q_u->hdr_name, len_name);
-	init_unistr2(&q_u->uni_name, name, len_name);
-
-	q_u->acb_info = acb_info;
-	q_u->access_mask = access_mask;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -4916,31 +2034,8 @@ reads or writes a structure.
 BOOL samr_io_q_create_user(const char *desc, SAMR_Q_CREATE_USER * q_u,
 			   prs_struct *ps, int depth)
 {
-	if (q_u == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "samr_io_q_create_user");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!smb_io_pol_hnd("domain_pol", &q_u->domain_pol, ps, depth))
-		return False;
-
-	if(!smb_io_unihdr("hdr_name", &q_u->hdr_name, ps, depth))
-		return False;
-	if(!smb_io_unistr2("uni_name", &q_u->uni_name, q_u->hdr_name.buffer, ps, depth))
-		return False;
-
-	if(!prs_align(ps))
-		return False;
-	if(!prs_uint32("acb_info   ", ps, depth, &q_u->acb_info))
-		return False;
-	if(!prs_uint32("access_mask", ps, depth, &q_u->access_mask))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -4950,26 +2045,8 @@ reads or writes a structure.
 BOOL samr_io_r_create_user(const char *desc, SAMR_R_CREATE_USER * r_u,
 			   prs_struct *ps, int depth)
 {
-	if (r_u == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "samr_io_r_create_user");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!smb_io_pol_hnd("user_pol", &r_u->user_pol, ps, depth))
-		return False;
-
-	if(!prs_uint32("unknown_0", ps, depth, &r_u->unknown_0))
-		return False;
-	if(!prs_uint32("user_rid ", ps, depth, &r_u->user_rid))
-		return False;
-	if(!prs_ntstatus("status", ps, depth, &r_u->status))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -4979,10 +2056,8 @@ inits a SAMR_Q_QUERY_USERINFO structure.
 void init_samr_q_query_userinfo(SAMR_Q_QUERY_USERINFO * q_u,
 				POLICY_HND *hnd, uint16 switch_value)
 {
-	DEBUG(5, ("init_samr_q_query_userinfo\n"));
-
-	q_u->pol = *hnd;
-	q_u->switch_value = switch_value;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -4992,22 +2067,8 @@ reads or writes a structure.
 BOOL samr_io_q_query_userinfo(const char *desc, SAMR_Q_QUERY_USERINFO * q_u,
 			      prs_struct *ps, int depth)
 {
-	if (q_u == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "samr_io_q_query_userinfo");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!smb_io_pol_hnd("pol", &q_u->pol, ps, depth))
-		return False;
-
-	if(!prs_uint16("switch_value", ps, depth, &q_u->switch_value)) /* 0x0015 or 0x0011 */
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -5017,27 +2078,8 @@ reads or writes a LOGON_HRS structure.
 static BOOL sam_io_logon_hrs(const char *desc, LOGON_HRS * hrs,
 			     prs_struct *ps, int depth)
 {
-	if (hrs == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "sam_io_logon_hrs");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_uint32("len  ", ps, depth, &hrs->len))
-		return False;
-
-	if (hrs->len > sizeof(hrs->hours)) {
-		DEBUG(3, ("sam_io_logon_hrs: truncating length from %d\n", hrs->len));
-		hrs->len = sizeof(hrs->hours);
-	}
-
-	if(!prs_uint8s(False, "hours", ps, depth, hrs->hours, hrs->len))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -5047,12 +2089,8 @@ inits a SAM_USER_INFO_12 structure.
 void init_sam_user_info12(SAM_USER_INFO_12 * usr,
 			  const uint8 lm_pwd[16], const uint8 nt_pwd[16])
 {
-	DEBUG(5, ("init_sam_user_info12\n"));
-
-	usr->lm_pwd_active =
-		memcpy(usr->lm_pwd, lm_pwd, sizeof(usr->lm_pwd)) ? 1 : 0;
-	usr->nt_pwd_active =
-		memcpy(usr->nt_pwd, nt_pwd, sizeof(usr->nt_pwd)) ? 1 : 0;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -5062,26 +2100,8 @@ reads or writes a structure.
 static BOOL sam_io_user_info12(const char *desc, SAM_USER_INFO_12 * u,
 			prs_struct *ps, int depth)
 {
-	if (u == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "samr_io_r_user_info12");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_uint8s(False, "lm_pwd", ps, depth, u->lm_pwd, sizeof(u->lm_pwd)))
-		return False;
-	if(!prs_uint8s(False, "nt_pwd", ps, depth, u->nt_pwd, sizeof(u->nt_pwd)))
-		return False;
-
-	if(!prs_uint8("lm_pwd_active", ps, depth, &u->lm_pwd_active))
-		return False;
-	if(!prs_uint8("nt_pwd_active", ps, depth, &u->nt_pwd_active))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -5090,9 +2110,8 @@ inits a SAM_USER_INFO_10 structure.
 
 void init_sam_user_info10(SAM_USER_INFO_10 * usr, uint32 acb_info)
 {
-	DEBUG(5, ("init_sam_user_info10\n"));
-
-	usr->acb_info = acb_info;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -5102,19 +2121,8 @@ reads or writes a structure.
 static BOOL sam_io_user_info10(const char *desc, SAM_USER_INFO_10 * usr,
 			prs_struct *ps, int depth)
 {
-	if (usr == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "samr_io_r_user_info10");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_uint32("acb_info", ps, depth, &usr->acb_info))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -5126,41 +2134,8 @@ void init_sam_user_info11(SAM_USER_INFO_
 			  const char *mach_acct,
 			  uint32 rid_user, uint32 rid_group, uint16 acct_ctrl)
 {
-	int len_mach_acct;
-
-	DEBUG(5, ("init_sam_user_info11\n"));
-
-	len_mach_acct = strlen(mach_acct);
-
-	memcpy(&(usr->expiry), expiry, sizeof(usr->expiry));	/* expiry time or something? */
-	ZERO_STRUCT(usr->padding_1);	/* 0 - padding 24 bytes */
-
-	init_uni_hdr(&usr->hdr_mach_acct, len_mach_acct);	/* unicode header for machine account */
-	usr->padding_2 = 0;	/* 0 - padding 4 bytes */
-
-	usr->ptr_1 = 1;		/* pointer */
-	ZERO_STRUCT(usr->padding_3);	/* 0 - padding 32 bytes */
-	usr->padding_4 = 0;	/* 0 - padding 4 bytes */
-
-	usr->ptr_2 = 1;		/* pointer */
-	usr->padding_5 = 0;	/* 0 - padding 4 bytes */
-
-	usr->ptr_3 = 1;		/* pointer */
-	ZERO_STRUCT(usr->padding_6);	/* 0 - padding 32 bytes */
-
-	usr->rid_user = rid_user;
-	usr->rid_group = rid_group;
-
-	usr->acct_ctrl = acct_ctrl;
-	usr->unknown_3 = 0x0000;
-
-	usr->unknown_4 = 0x003f;	/* 0x003f      - 16 bit unknown */
-	usr->unknown_5 = 0x003c;	/* 0x003c      - 16 bit unknown */
-
-	ZERO_STRUCT(usr->padding_7);	/* 0 - padding 16 bytes */
-	usr->padding_8 = 0;	/* 0 - padding 4 bytes */
-
-	init_unistr2(&usr->uni_mach_acct, mach_acct, len_mach_acct);	/* unicode string for machine account */
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -5170,77 +2145,8 @@ reads or writes a structure.
 static BOOL sam_io_user_info11(const char *desc, SAM_USER_INFO_11 * usr,
 			prs_struct *ps, int depth)
 {
-	if (usr == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "samr_io_r_unknown_11");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_uint8s(False, "padding_0", ps, depth, usr->padding_0, sizeof(usr->padding_0)))
-		return False;
-
-	if(!smb_io_time("time", &usr->expiry, ps, depth))
-		return False;
-
-	if(!prs_uint8s(False, "padding_1", ps, depth, usr->padding_1, sizeof(usr->padding_1)))
-		return False;
-
-	if(!smb_io_unihdr("unihdr", &usr->hdr_mach_acct, ps, depth))
-		return False;
-
-	if(!prs_uint32("padding_2", ps, depth, &usr->padding_2))
-		return False;
-
-	if(!prs_uint32("ptr_1    ", ps, depth, &usr->ptr_1))
-		return False;
-	if(!prs_uint8s(False, "padding_3", ps, depth, usr->padding_3, sizeof(usr->padding_3)))
-		return False;
-
-	if(!prs_uint32("padding_4", ps, depth, &usr->padding_4))
-		return False;
-
-	if(!prs_uint32("ptr_2    ", ps, depth, &usr->ptr_2))
-		return False;
-	if(!prs_uint32("padding_5", ps, depth, &usr->padding_5))
-		return False;
-
-	if(!prs_uint32("ptr_3    ", ps, depth, &usr->ptr_3))
-		return False;
-	if(!prs_uint8s(False, "padding_6", ps, depth, usr->padding_6,sizeof(usr->padding_6)))
-		return False;
-
-	if(!prs_uint32("rid_user ", ps, depth, &usr->rid_user))
-		return False;
-	if(!prs_uint32("rid_group", ps, depth, &usr->rid_group))
-		return False;
-	if(!prs_uint16("acct_ctrl", ps, depth, &usr->acct_ctrl))
-		return False;
-	if(!prs_uint16("unknown_3", ps, depth, &usr->unknown_3))
-		return False;
-	if(!prs_uint16("unknown_4", ps, depth, &usr->unknown_4))
-		return False;
-	if(!prs_uint16("unknown_5", ps, depth, &usr->unknown_5))
-		return False;
-
-	if(!prs_uint8s(False, "padding_7", ps, depth, usr->padding_7, sizeof(usr->padding_7)))
-		return False;
-
-	if(!prs_uint32("padding_8", ps, depth, &(usr->padding_8)))
-		return False;
-
-	if(!smb_io_unistr2("unistr2", &usr->uni_mach_acct, True, ps, depth))
-		return False;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_uint8s(False, "padding_9", ps, depth, usr->padding_9, sizeof(usr->padding_9)))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*************************************************************************
@@ -5254,9 +2160,8 @@ static BOOL sam_io_user_info11(const cha
 
 void init_sam_user_info24(SAM_USER_INFO_24 * usr, char newpass[516], uint16 pw_len)
 {
-	DEBUG(10, ("init_sam_user_info24:\n"));
-	memcpy(usr->pass, newpass, sizeof(usr->pass));
-	usr->pw_len = pw_len;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -5266,27 +2171,8 @@ reads or writes a structure.
 static BOOL sam_io_user_info24(const char *desc, SAM_USER_INFO_24 * usr,
 			       prs_struct *ps, int depth)
 {
-	if (usr == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "sam_io_user_info24");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_uint8s(False, "password", ps, depth, usr->pass, 
-		       sizeof(usr->pass)))
-		return False;
-	
-	if (MARSHALLING(ps) && (usr->pw_len != 0)) {
-		if (!prs_uint16("pw_len", ps, depth, &usr->pw_len))
-			return False;
-	}
-	if(!prs_align(ps))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*************************************************************************
@@ -5323,67 +2209,8 @@ void init_sam_user_info23W(SAM_USER_INFO
 			uint32 unknown_5,
 			char newpass[516], uint32 unknown_6)
 {
-	int len_user_name = user_name != NULL ? user_name->uni_str_len : 0;
-	int len_full_name = full_name != NULL ? full_name->uni_str_len : 0;
-	int len_home_dir = home_dir != NULL ? home_dir->uni_str_len : 0;
-	int len_dir_drive = dir_drive != NULL ? dir_drive->uni_str_len : 0;
-	int len_logon_script = log_scr != NULL ? log_scr->uni_str_len : 0;
-	int len_profile_path = prof_path != NULL ? prof_path->uni_str_len : 0;
-	int len_description = desc != NULL ? desc->uni_str_len : 0;
-	int len_workstations = wkstas != NULL ? wkstas->uni_str_len : 0;
-	int len_unknown_str = unk_str != NULL ? unk_str->uni_str_len : 0;
-	int len_munged_dial = mung_dial != NULL ? mung_dial->uni_str_len : 0;
-
-	usr->logon_time = *logon_time;	/* all zeros */
-	usr->logoff_time = *logoff_time;	/* all zeros */
-	usr->kickoff_time = *kickoff_time;	/* all zeros */
-	usr->pass_last_set_time = *pass_last_set_time;	/* all zeros */
-	usr->pass_can_change_time = *pass_can_change_time;	/* all zeros */
-	usr->pass_must_change_time = *pass_must_change_time;	/* all zeros */
-
-	init_uni_hdr(&usr->hdr_user_name, len_user_name);	/* NULL */
-	init_uni_hdr(&usr->hdr_full_name, len_full_name);
-	init_uni_hdr(&usr->hdr_home_dir, len_home_dir);
-	init_uni_hdr(&usr->hdr_dir_drive, len_dir_drive);
-	init_uni_hdr(&usr->hdr_logon_script, len_logon_script);
-	init_uni_hdr(&usr->hdr_profile_path, len_profile_path);
-	init_uni_hdr(&usr->hdr_acct_desc, len_description);
-	init_uni_hdr(&usr->hdr_workstations, len_workstations);
-	init_uni_hdr(&usr->hdr_unknown_str, len_unknown_str);
-	init_uni_hdr(&usr->hdr_munged_dial, len_munged_dial);
-
-	ZERO_STRUCT(usr->nt_pwd);
-	ZERO_STRUCT(usr->lm_pwd);
-
-	usr->user_rid = user_rid;	/* 0x0000 0000 */
-	usr->group_rid = group_rid;
-	usr->acb_info = acb_info;
-	usr->unknown_3 = unknown_3;	/* 09f8 27fa */
-
-	usr->logon_divs = logon_divs;	/* should be 168 (hours/week) */
-	usr->ptr_logon_hrs = hrs ? 1 : 0;
-
-	ZERO_STRUCT(usr->padding1);
-
-	usr->unknown_5 = unknown_5;	/* 0x0001 0000 */
-
-	memcpy(usr->pass, newpass, sizeof(usr->pass));
-
-	copy_unistr2(&usr->uni_user_name, user_name);
-	copy_unistr2(&usr->uni_full_name, full_name);
-	copy_unistr2(&usr->uni_home_dir, home_dir);
-	copy_unistr2(&usr->uni_dir_drive, dir_drive);
-	copy_unistr2(&usr->uni_logon_script, log_scr);
-	copy_unistr2(&usr->uni_profile_path, prof_path);
-	copy_unistr2(&usr->uni_acct_desc, desc);
-	copy_unistr2(&usr->uni_workstations, wkstas);
-	copy_unistr2(&usr->uni_unknown_str, unk_str);
-	copy_unistr2(&usr->uni_munged_dial, mung_dial);
-
-	usr->unknown_6 = unknown_6;	/* 0x0000 04ec */
-	usr->padding4 = 0;
-
-	memcpy(&usr->logon_hrs, hrs, sizeof(usr->logon_hrs));
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*************************************************************************
@@ -5411,67 +2238,8 @@ void init_sam_user_info23A(SAM_USER_INFO
 			   LOGON_HRS * hrs, uint32 unknown_5,
 			   char newpass[516], uint32 unknown_6)
 {
-	int len_user_name = user_name != NULL ? strlen(user_name) : 0;
-	int len_full_name = full_name != NULL ? strlen(full_name) : 0;
-	int len_home_dir = home_dir != NULL ? strlen(home_dir) : 0;
-	int len_dir_drive = dir_drive != NULL ? strlen(dir_drive) : 0;
-	int len_logon_script = log_scr != NULL ? strlen(log_scr) : 0;
-	int len_profile_path = prof_path != NULL ? strlen(prof_path) : 0;
-	int len_description = desc != NULL ? strlen(desc) : 0;
-	int len_workstations = wkstas != NULL ? strlen(wkstas) : 0;
-	int len_unknown_str = unk_str != NULL ? strlen(unk_str) : 0;
-	int len_munged_dial = mung_dial != NULL ? strlen(mung_dial) : 0;
-
-	usr->logon_time = *logon_time;	/* all zeros */
-	usr->logoff_time = *logoff_time;	/* all zeros */
-	usr->kickoff_time = *kickoff_time;	/* all zeros */
-	usr->pass_last_set_time = *pass_last_set_time;	/* all zeros */
-	usr->pass_can_change_time = *pass_can_change_time;	/* all zeros */
-	usr->pass_must_change_time = *pass_must_change_time;	/* all zeros */
-
-	init_uni_hdr(&usr->hdr_user_name, len_user_name);	/* NULL */
-	init_uni_hdr(&usr->hdr_full_name, len_full_name);
-	init_uni_hdr(&usr->hdr_home_dir, len_home_dir);
-	init_uni_hdr(&usr->hdr_dir_drive, len_dir_drive);
-	init_uni_hdr(&usr->hdr_logon_script, len_logon_script);
-	init_uni_hdr(&usr->hdr_profile_path, len_profile_path);
-	init_uni_hdr(&usr->hdr_acct_desc, len_description);
-	init_uni_hdr(&usr->hdr_workstations, len_workstations);
-	init_uni_hdr(&usr->hdr_unknown_str, len_unknown_str);
-	init_uni_hdr(&usr->hdr_munged_dial, len_munged_dial);
-
-	ZERO_STRUCT(usr->nt_pwd);
-	ZERO_STRUCT(usr->lm_pwd);
-
-	usr->user_rid = user_rid;	/* 0x0000 0000 */
-	usr->group_rid = group_rid;
-	usr->acb_info = acb_info;
-	usr->unknown_3 = unknown_3;	/* 09f8 27fa */
-
-	usr->logon_divs = logon_divs;	/* should be 168 (hours/week) */
-	usr->ptr_logon_hrs = hrs ? 1 : 0;
-
-	ZERO_STRUCT(usr->padding1);
-
-	usr->unknown_5 = unknown_5;	/* 0x0001 0000 */
-
-	memcpy(usr->pass, newpass, sizeof(usr->pass));
-
-	init_unistr2(&usr->uni_user_name, user_name, len_user_name);	/* NULL */
-	init_unistr2(&usr->uni_full_name, full_name, len_full_name);
-	init_unistr2(&usr->uni_home_dir, home_dir, len_home_dir);
-	init_unistr2(&usr->uni_dir_drive, dir_drive, len_dir_drive);
-	init_unistr2(&usr->uni_logon_script, log_scr, len_logon_script);
-	init_unistr2(&usr->uni_profile_path, prof_path, len_profile_path);
-	init_unistr2(&usr->uni_acct_desc, desc, len_description);
-	init_unistr2(&usr->uni_workstations, wkstas, len_workstations);
-	init_unistr2(&usr->uni_unknown_str, unk_str, len_unknown_str);
-	init_unistr2(&usr->uni_munged_dial, mung_dial, len_munged_dial);
-
-	usr->unknown_6 = unknown_6;	/* 0x0000 04ec */
-	usr->padding4 = 0;
-
-	memcpy(&usr->logon_hrs, hrs, sizeof(usr->logon_hrs));
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -5481,123 +2249,8 @@ reads or writes a structure.
 static BOOL sam_io_user_info23(const char *desc, SAM_USER_INFO_23 * usr,
 			       prs_struct *ps, int depth)
 {
-	if (usr == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "sam_io_user_info23");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!smb_io_time("logon_time           ", &usr->logon_time, ps, depth))
-		return False;
-	if(!smb_io_time("logoff_time          ", &usr->logoff_time, ps, depth))
-		return False;
-	if(!smb_io_time("kickoff_time         ", &usr->kickoff_time, ps, depth))
-		return False;
-	if(!smb_io_time("pass_last_set_time   ", &usr->pass_last_set_time, ps, depth))
-		return False;
-	if(!smb_io_time("pass_can_change_time ", &usr->pass_can_change_time, ps, depth))
-		return False;
-	if(!smb_io_time("pass_must_change_time", &usr->pass_must_change_time, ps, depth))
-		return False;
-
-	if(!smb_io_unihdr("hdr_user_name   ", &usr->hdr_user_name, ps, depth))	/* username unicode string header */
-		return False;
-	if(!smb_io_unihdr("hdr_full_name   ", &usr->hdr_full_name, ps, depth))	/* user's full name unicode string header */
-		return False;
-	if(!smb_io_unihdr("hdr_home_dir    ", &usr->hdr_home_dir, ps, depth))	/* home directory unicode string header */
-		return False;
-	if(!smb_io_unihdr("hdr_dir_drive   ", &usr->hdr_dir_drive, ps, depth))	/* home directory drive */
-		return False;
-	if(!smb_io_unihdr("hdr_logon_script", &usr->hdr_logon_script, ps, depth))	/* logon script unicode string header */
-		return False;
-	if(!smb_io_unihdr("hdr_profile_path", &usr->hdr_profile_path, ps, depth))	/* profile path unicode string header */
-		return False;
-	if(!smb_io_unihdr("hdr_acct_desc   ", &usr->hdr_acct_desc, ps, depth))	/* account desc */
-		return False;
-	if(!smb_io_unihdr("hdr_workstations", &usr->hdr_workstations, ps, depth))	/* wkstas user can log on from */
-		return False;
-	if(!smb_io_unihdr("hdr_unknown_str ", &usr->hdr_unknown_str, ps, depth))	/* unknown string */
-		return False;
-	if(!smb_io_unihdr("hdr_munged_dial ", &usr->hdr_munged_dial, ps, depth))	/* wkstas user can log on from */
-		return False;
-
-	if(!prs_uint8s(False, "lm_pwd        ", ps, depth, usr->lm_pwd, sizeof(usr->lm_pwd)))
-		return False;
-	if(!prs_uint8s(False, "nt_pwd        ", ps, depth, usr->nt_pwd, sizeof(usr->nt_pwd)))
-		return False;
-
-	if(!prs_uint32("user_rid      ", ps, depth, &usr->user_rid))	/* User ID */
-		return False;
-	if(!prs_uint32("group_rid     ", ps, depth, &usr->group_rid))	/* Group ID */
-		return False;
-	if(!prs_uint32("acb_info      ", ps, depth, &usr->acb_info))
-		return False;
-
-	if(!prs_uint32("unknown_3     ", ps, depth, &usr->unknown_3))
-		return False;
-	if(!prs_uint16("logon_divs    ", ps, depth, &usr->logon_divs))	/* logon divisions per week */
-		return False;
-	if(!prs_align(ps))
-		return False;
-	if(!prs_uint32("ptr_logon_hrs ", ps, depth, &usr->ptr_logon_hrs))
-		return False;
-	if(!prs_uint8s(False, "padding1      ", ps, depth, usr->padding1, sizeof(usr->padding1)))
-		return False;
-	if(!prs_uint32("unknown_5     ", ps, depth, &usr->unknown_5))
-		return False;
-
-	if(!prs_uint8s(False, "password      ", ps, depth, usr->pass, sizeof(usr->pass)))
-		return False;
-
-	/* here begins pointed-to data */
-
-	if(!smb_io_unistr2("uni_user_name   ", &usr->uni_user_name, usr->hdr_user_name.buffer, ps, depth))	/* username unicode string */
-		return False;
-
-	if(!smb_io_unistr2("uni_full_name   ", &usr->uni_full_name, usr->hdr_full_name.buffer, ps, depth))	/* user's full name unicode string */
-		return False;
-
-	if(!smb_io_unistr2("uni_home_dir    ", &usr->uni_home_dir, usr->hdr_home_dir.buffer, ps, depth))	/* home directory unicode string */
-		return False;
-
-	if(!smb_io_unistr2("uni_dir_drive   ", &usr->uni_dir_drive, usr->hdr_dir_drive.buffer, ps, depth))	/* home directory drive unicode string */
-		return False;
-
-	if(!smb_io_unistr2("uni_logon_script", &usr->uni_logon_script, usr->hdr_logon_script.buffer, ps, depth))	/* logon script unicode string */
-		return False;
-
-	if(!smb_io_unistr2("uni_profile_path", &usr->uni_profile_path, usr->hdr_profile_path.buffer, ps, depth))	/* profile path unicode string */
-		return False;
-
-	if(!smb_io_unistr2("uni_acct_desc   ", &usr->uni_acct_desc, usr->hdr_acct_desc.buffer, ps, depth))	/* user desc unicode string */
-		return False;
-
-	if(!smb_io_unistr2("uni_workstations", &usr->uni_workstations, usr->hdr_workstations.buffer, ps, depth))	/* worksations user can log on from */
-		return False;
-
-	if(!smb_io_unistr2("uni_unknown_str ", &usr->uni_unknown_str, usr->hdr_unknown_str.buffer, ps, depth))	/* unknown string */
-		return False;
-
-	if(!smb_io_unistr2("uni_munged_dial ", &usr->uni_munged_dial, usr->hdr_munged_dial.buffer, ps, depth))
-		return False;
-
-	/* ok, this is only guess-work (as usual) */
-	if (usr->ptr_logon_hrs) {
-		if(!prs_uint32("unknown_6     ", ps, depth, &usr->unknown_6))
-			return False;
-		if(!prs_uint32("padding4      ", ps, depth, &usr->padding4))
-			return False;
-		if(!sam_io_logon_hrs("logon_hrs", &usr->logon_hrs, ps, depth))
-			return False;
-	} else if (UNMARSHALLING(ps)) {
-		usr->unknown_6 = 0;
-		usr->padding4 = 0;
-	}
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -5609,115 +2262,8 @@ static BOOL sam_io_user_info23(const cha
 
 static BOOL sam_io_user_info25(const char *desc, SAM_USER_INFO_25 * usr, prs_struct *ps, int depth)
 {
-	if (usr == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "sam_io_user_info25");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!smb_io_time("logon_time           ", &usr->logon_time, ps, depth))
-		return False;
-	if(!smb_io_time("logoff_time          ", &usr->logoff_time, ps, depth))
-		return False;
-	if(!smb_io_time("kickoff_time         ", &usr->kickoff_time, ps, depth))
-		return False;
-	if(!smb_io_time("pass_last_set_time   ", &usr->pass_last_set_time, ps, depth))
-		return False;
-	if(!smb_io_time("pass_can_change_time ", &usr->pass_can_change_time, ps, depth))
-		return False;
-	if(!smb_io_time("pass_must_change_time", &usr->pass_must_change_time, ps, depth))
-		return False;
-
-	if(!smb_io_unihdr("hdr_user_name   ", &usr->hdr_user_name, ps, depth))	/* username unicode string header */
-		return False;
-	if(!smb_io_unihdr("hdr_full_name   ", &usr->hdr_full_name, ps, depth))	/* user's full name unicode string header */
-		return False;
-	if(!smb_io_unihdr("hdr_home_dir    ", &usr->hdr_home_dir, ps, depth))	/* home directory unicode string header */
-		return False;
-	if(!smb_io_unihdr("hdr_dir_drive   ", &usr->hdr_dir_drive, ps, depth))	/* home directory drive */
-		return False;
-	if(!smb_io_unihdr("hdr_logon_script", &usr->hdr_logon_script, ps, depth))	/* logon script unicode string header */
-		return False;
-	if(!smb_io_unihdr("hdr_profile_path", &usr->hdr_profile_path, ps, depth))	/* profile path unicode string header */
-		return False;
-	if(!smb_io_unihdr("hdr_acct_desc   ", &usr->hdr_acct_desc, ps, depth))	/* account desc */
-		return False;
-	if(!smb_io_unihdr("hdr_workstations", &usr->hdr_workstations, ps, depth))	/* wkstas user can log on from */
-		return False;
-	if(!smb_io_unihdr("hdr_unknown_str ", &usr->hdr_unknown_str, ps, depth))	/* unknown string */
-		return False;
-	if(!smb_io_unihdr("hdr_munged_dial ", &usr->hdr_munged_dial, ps, depth))	/* wkstas user can log on from */
-		return False;
-
-	if(!prs_uint8s(False, "lm_pwd        ", ps, depth, usr->lm_pwd, sizeof(usr->lm_pwd)))
-		return False;
-	if(!prs_uint8s(False, "nt_pwd        ", ps, depth, usr->nt_pwd, sizeof(usr->nt_pwd)))
-		return False;
-
-	if(!prs_uint32("user_rid      ", ps, depth, &usr->user_rid))	/* User ID */
-		return False;
-	if(!prs_uint32("group_rid     ", ps, depth, &usr->group_rid))	/* Group ID */
-		return False;
-	if(!prs_uint32("acb_info      ", ps, depth, &usr->acb_info))
-		return False;
-
-	if(!prs_uint32s(False, "unknown_6      ", ps, depth, usr->unknown_6, 6))
-		return False;
-
-	if(!prs_uint8s(False, "password      ", ps, depth, usr->pass, sizeof(usr->pass)))
-		return False;
-
-	/* here begins pointed-to data */
-
-	if(!smb_io_unistr2("uni_user_name   ", &usr->uni_user_name, usr->hdr_user_name.buffer, ps, depth))	/* username unicode string */
-		return False;
-
-	if(!smb_io_unistr2("uni_full_name   ", &usr->uni_full_name, usr->hdr_full_name.buffer, ps, depth))	/* user's full name unicode string */
-		return False;
-
-	if(!smb_io_unistr2("uni_home_dir    ", &usr->uni_home_dir, usr->hdr_home_dir.buffer, ps, depth))	/* home directory unicode string */
-		return False;
-
-	if(!smb_io_unistr2("uni_dir_drive   ", &usr->uni_dir_drive, usr->hdr_dir_drive.buffer, ps, depth))	/* home directory drive unicode string */
-		return False;
-
-	if(!smb_io_unistr2("uni_logon_script", &usr->uni_logon_script, usr->hdr_logon_script.buffer, ps, depth))	/* logon script unicode string */
-		return False;
-
-	if(!smb_io_unistr2("uni_profile_path", &usr->uni_profile_path, usr->hdr_profile_path.buffer, ps, depth))	/* profile path unicode string */
-		return False;
-
-	if(!smb_io_unistr2("uni_acct_desc   ", &usr->uni_acct_desc, usr->hdr_acct_desc.buffer, ps, depth))	/* user desc unicode string */
-		return False;
-
-	if(!smb_io_unistr2("uni_workstations", &usr->uni_workstations, usr->hdr_workstations.buffer, ps, depth))	/* worksations user can log on from */
-		return False;
-
-	if(!smb_io_unistr2("uni_unknown_str ", &usr->uni_unknown_str, usr->hdr_unknown_str.buffer, ps, depth))	/* unknown string */
-		return False;
-
-	if(!smb_io_unistr2("uni_munged_dial ", &usr->uni_munged_dial, usr->hdr_munged_dial.buffer, ps, depth))
-		return False;
-
-#if 0 /* JRA - unknown... */
-	/* ok, this is only guess-work (as usual) */
-	if (usr->ptr_logon_hrs) {
-		if(!prs_uint32("unknown_6     ", ps, depth, &usr->unknown_6))
-			return False;
-		if(!prs_uint32("padding4      ", ps, depth, &usr->padding4))
-			return False;
-		if(!sam_io_logon_hrs("logon_hrs", &usr->logon_hrs, ps, depth))
-			return False;
-	} else if (UNMARSHALLING(ps)) {
-		usr->unknown_6 = 0;
-		usr->padding4 = 0;
-	}
-#endif
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 
@@ -5757,64 +2303,8 @@ void init_sam_user_info21W(SAM_USER_INFO
 			   LOGON_HRS * hrs,
 			   uint32 unknown_5, uint32 unknown_6)
 {
-	int len_user_name = user_name != NULL ? user_name->uni_str_len : 0;
-	int len_full_name = full_name != NULL ? full_name->uni_str_len : 0;
-	int len_home_dir = home_dir != NULL ? home_dir->uni_str_len : 0;
-	int len_dir_drive = dir_drive != NULL ? dir_drive->uni_str_len : 0;
-	int len_logon_script = log_scr != NULL ? log_scr->uni_str_len : 0;
-	int len_profile_path = prof_path != NULL ? prof_path->uni_str_len : 0;
-	int len_description = desc != NULL ? desc->uni_str_len : 0;
-	int len_workstations = wkstas != NULL ? wkstas->uni_str_len : 0;
-	int len_unknown_str = unk_str != NULL ? unk_str->uni_str_len : 0;
-	int len_munged_dial = mung_dial != NULL ? mung_dial->uni_str_len : 0;
-
-	usr->logon_time = *logon_time;
-	usr->logoff_time = *logoff_time;
-	usr->kickoff_time = *kickoff_time;
-	usr->pass_last_set_time = *pass_last_set_time;
-	usr->pass_can_change_time = *pass_can_change_time;
-	usr->pass_must_change_time = *pass_must_change_time;
-
-	init_uni_hdr(&usr->hdr_user_name, len_user_name);
-	init_uni_hdr(&usr->hdr_full_name, len_full_name);
-	init_uni_hdr(&usr->hdr_home_dir, len_home_dir);
-	init_uni_hdr(&usr->hdr_dir_drive, len_dir_drive);
-	init_uni_hdr(&usr->hdr_logon_script, len_logon_script);
-	init_uni_hdr(&usr->hdr_profile_path, len_profile_path);
-	init_uni_hdr(&usr->hdr_acct_desc, len_description);
-	init_uni_hdr(&usr->hdr_workstations, len_workstations);
-	init_uni_hdr(&usr->hdr_unknown_str, len_unknown_str);
-	init_uni_hdr(&usr->hdr_munged_dial, len_munged_dial);
-
-	memcpy(usr->lm_pwd, lm_pwd, sizeof(usr->lm_pwd));
-	memcpy(usr->nt_pwd, nt_pwd, sizeof(usr->nt_pwd));
-
-	usr->user_rid = user_rid;
-	usr->group_rid = group_rid;
-	usr->acb_info = acb_info;
-	usr->unknown_3 = unknown_3;	/* 0x00ff ffff */
-
-	usr->logon_divs = logon_divs;	/* should be 168 (hours/week) */
-	usr->ptr_logon_hrs = hrs ? 1 : 0;
-	usr->unknown_5 = unknown_5;	/* 0x0002 0000 */
-
-	ZERO_STRUCT(usr->padding1);
-
-	copy_unistr2(&usr->uni_user_name, user_name);
-	copy_unistr2(&usr->uni_full_name, full_name);
-	copy_unistr2(&usr->uni_home_dir, home_dir);
-	copy_unistr2(&usr->uni_dir_drive, dir_drive);
-	copy_unistr2(&usr->uni_logon_script, log_scr);
-	copy_unistr2(&usr->uni_profile_path, prof_path);
-	copy_unistr2(&usr->uni_acct_desc, desc);
-	copy_unistr2(&usr->uni_workstations, wkstas);
-	copy_unistr2(&usr->uni_unknown_str, unk_str);
-	copy_unistr2(&usr->uni_munged_dial, mung_dial);
-
-	usr->unknown_6 = unknown_6;	/* 0x0000 04ec */
-	usr->padding4 = 0;
-
-	memcpy(&usr->logon_hrs, hrs, sizeof(usr->logon_hrs));
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*************************************************************************
@@ -5828,97 +2318,8 @@ void init_sam_user_info21W(SAM_USER_INFO
 
 void init_sam_user_info21A(SAM_USER_INFO_21 *usr, SAM_ACCOUNT *pw)
 {
-	NTTIME 		logon_time, logoff_time, kickoff_time,
-			pass_last_set_time, pass_can_change_time,
-			pass_must_change_time;
-
-	int 		len_user_name, len_full_name, len_home_dir,
-			len_dir_drive, len_logon_script, len_profile_path,
-			len_description, len_workstations, len_unknown_str,
-			len_munged_dial;
-			
-	const char*		user_name = pdb_get_username(pw);
-	const char*		full_name = pdb_get_fullname(pw);
-	const char*		home_dir  = pdb_get_homedir(pw);
-	const char*		dir_drive = pdb_get_dirdrive(pw);
-	const char*		logon_script = pdb_get_logon_script(pw);
-	const char*		profile_path = pdb_get_profile_path(pw);
-	const char*		description = pdb_get_acct_desc(pw);
-	const char*		workstations = pdb_get_workstations(pw);
-	const char*		munged_dial = pdb_get_munged_dial(pw);
-
-	len_user_name    = user_name    != NULL ? strlen(unix_to_dos_static(user_name))+1 : 0;
-	len_full_name    = full_name    != NULL ? strlen(unix_to_dos_static(full_name))+1 : 0;
-	len_home_dir     = home_dir     != NULL ? strlen(unix_to_dos_static(home_dir))+1 : 0;
-	len_dir_drive    = dir_drive    != NULL ? strlen(unix_to_dos_static(dir_drive))+1 : 0;
-	len_logon_script = logon_script != NULL ? strlen(unix_to_dos_static(logon_script))+1 : 0;
-	len_profile_path = profile_path != NULL ? strlen(unix_to_dos_static(profile_path))+1 : 0;
-	len_description  = description  != NULL ? strlen(unix_to_dos_static(description))+1 : 0;
-	len_workstations = workstations != NULL ? strlen(unix_to_dos_static(workstations))+1 : 0;
-	len_unknown_str  = 0;
-	len_munged_dial  = munged_dial  != NULL ? strlen(unix_to_dos_static(munged_dial))+1 : 0;
-
-
-	/* Create NTTIME structs */
-	unix_to_nt_time (&logon_time, 		pdb_get_logon_time(pw));
-	unix_to_nt_time (&logoff_time, 		pdb_get_logoff_time(pw));
-	unix_to_nt_time (&kickoff_time, 	pdb_get_kickoff_time(pw));
-	unix_to_nt_time (&pass_last_set_time, 	pdb_get_pass_last_set_time(pw));
-	unix_to_nt_time (&pass_can_change_time,	pdb_get_pass_can_change_time(pw));
-	unix_to_nt_time (&pass_must_change_time,pdb_get_pass_must_change_time(pw));
-	
-	/* structure assignment */
-	usr->logon_time            = logon_time;
-	usr->logoff_time           = logoff_time;
-	usr->kickoff_time          = kickoff_time;
-	usr->pass_last_set_time    = pass_last_set_time;
-	usr->pass_can_change_time  = pass_can_change_time;
-	usr->pass_must_change_time = pass_must_change_time;
-
-	init_uni_hdr(&usr->hdr_user_name, len_user_name);
-	init_uni_hdr(&usr->hdr_full_name, len_full_name);
-	init_uni_hdr(&usr->hdr_home_dir, len_home_dir);
-	init_uni_hdr(&usr->hdr_dir_drive, len_dir_drive);
-	init_uni_hdr(&usr->hdr_logon_script, len_logon_script);
-	init_uni_hdr(&usr->hdr_profile_path, len_profile_path);
-	init_uni_hdr(&usr->hdr_acct_desc, len_description);
-	init_uni_hdr(&usr->hdr_workstations, len_workstations);
-	init_uni_hdr(&usr->hdr_unknown_str, len_unknown_str);
-	init_uni_hdr(&usr->hdr_munged_dial, len_munged_dial);
-
-	ZERO_STRUCT(usr->nt_pwd);
-	ZERO_STRUCT(usr->lm_pwd);
-
-	usr->user_rid  = pdb_get_user_rid(pw);
-	usr->group_rid = pdb_get_group_rid(pw);
-	usr->acb_info  = pdb_get_acct_ctrl(pw);
-	usr->unknown_3 = pdb_get_unknown3(pw);
-
-	usr->logon_divs = pdb_get_logon_divs(pw); 
-	usr->ptr_logon_hrs = pdb_get_hours(pw) ? 1 : 0;
-	usr->unknown_5 = pdb_get_unknown5(pw); /* 0x0002 0000 */
-
-	ZERO_STRUCT(usr->padding1);
-
-	init_unistr2(&usr->uni_user_name, unix_to_dos_static(user_name), len_user_name);
-	init_unistr2(&usr->uni_full_name, unix_to_dos_static(full_name), len_full_name);
-	init_unistr2(&usr->uni_home_dir, unix_to_dos_static(home_dir), len_home_dir);
-	init_unistr2(&usr->uni_dir_drive, unix_to_dos_static(dir_drive), len_dir_drive);
-	init_unistr2(&usr->uni_logon_script, unix_to_dos_static(logon_script), len_logon_script);
-	init_unistr2(&usr->uni_profile_path, unix_to_dos_static(profile_path), len_profile_path);
-	init_unistr2(&usr->uni_acct_desc, unix_to_dos_static(description), len_description);
-	init_unistr2(&usr->uni_workstations, unix_to_dos_static(workstations), len_workstations);
-	init_unistr2(&usr->uni_unknown_str, NULL, len_unknown_str);
-	init_unistr2(&usr->uni_munged_dial, unix_to_dos_static(munged_dial), len_munged_dial);
-
-	usr->unknown_6 = pdb_get_unknown6(pw);
-	usr->padding4 = 0;
-
-	if (pdb_get_hours(pw)) {
-		usr->logon_hrs.len = pdb_get_hours_len(pw);
-		memcpy(&usr->logon_hrs.hours, pdb_get_hours(pw), MAX_HOURS_LEN);
-	} else
-		memset(&usr->logon_hrs, 0xff, sizeof(usr->logon_hrs));
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -5928,124 +2329,14 @@ reads or writes a structure.
 static BOOL sam_io_user_info21(const char *desc, SAM_USER_INFO_21 * usr,
 			prs_struct *ps, int depth)
 {
-	if (usr == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "sam_io_user_info21");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!smb_io_time("logon_time           ", &usr->logon_time, ps, depth))
-		return False;
-	if(!smb_io_time("logoff_time          ", &usr->logoff_time, ps, depth))
-		return False;
-	if(!smb_io_time("pass_last_set_time   ", &usr->pass_last_set_time, ps,depth))
-		return False;
-	if(!smb_io_time("kickoff_time         ", &usr->kickoff_time, ps, depth))
-		return False;
-	if(!smb_io_time("pass_can_change_time ", &usr->pass_can_change_time, ps,depth))
-		return False;
-	if(!smb_io_time("pass_must_change_time", &usr->pass_must_change_time,  ps, depth))
-		return False;
-
-	if(!smb_io_unihdr("hdr_user_name   ", &usr->hdr_user_name, ps, depth))	/* username unicode string header */
-		return False;
-	if(!smb_io_unihdr("hdr_full_name   ", &usr->hdr_full_name, ps, depth))	/* user's full name unicode string header */
-		return False;
-	if(!smb_io_unihdr("hdr_home_dir    ", &usr->hdr_home_dir, ps, depth))	/* home directory unicode string header */
-		return False;
-	if(!smb_io_unihdr("hdr_dir_drive   ", &usr->hdr_dir_drive, ps, depth))	/* home directory drive */
-		return False;
-	if(!smb_io_unihdr("hdr_logon_script", &usr->hdr_logon_script, ps, depth))	/* logon script unicode string header */
-		return False;
-	if(!smb_io_unihdr("hdr_profile_path", &usr->hdr_profile_path, ps, depth))	/* profile path unicode string header */
-		return False;
-	if(!smb_io_unihdr("hdr_acct_desc   ", &usr->hdr_acct_desc, ps, depth))	/* account desc */
-		return False;
-	if(!smb_io_unihdr("hdr_workstations", &usr->hdr_workstations, ps, depth))	/* wkstas user can log on from */
-		return False;
-	if(!smb_io_unihdr("hdr_unknown_str ", &usr->hdr_unknown_str, ps, depth))	/* unknown string */
-		return False;
-	if(!smb_io_unihdr("hdr_munged_dial ", &usr->hdr_munged_dial, ps, depth))	/* wkstas user can log on from */
-		return False;
-
-	if(!prs_uint8s(False, "lm_pwd        ", ps, depth, usr->lm_pwd, sizeof(usr->lm_pwd)))
-		return False;
-	if(!prs_uint8s(False, "nt_pwd        ", ps, depth, usr->nt_pwd, sizeof(usr->nt_pwd)))
-		return False;
-
-	if(!prs_uint32("user_rid      ", ps, depth, &usr->user_rid))	/* User ID */
-		return False;
-	if(!prs_uint32("group_rid     ", ps, depth, &usr->group_rid))	/* Group ID */
-		return False;
-	if(!prs_uint32("acb_info      ", ps, depth, &usr->acb_info))
-		return False;
-
-	if(!prs_uint32("unknown_3     ", ps, depth, &usr->unknown_3))
-		return False;
-	if(!prs_uint16("logon_divs    ", ps, depth, &usr->logon_divs))	/* logon divisions per week */
-		return False;
-	if(!prs_align(ps))
-		return False;
-	if(!prs_uint32("ptr_logon_hrs ", ps, depth, &usr->ptr_logon_hrs))
-		return False;
-	if(!prs_uint32("unknown_5     ", ps, depth, &usr->unknown_5))
-		return False;
-
-	if(!prs_uint8s(False, "padding1      ", ps, depth, usr->padding1, sizeof(usr->padding1)))
-		return False;
-
-	/* here begins pointed-to data */
-
-	if(!smb_io_unistr2("uni_user_name   ", &usr->uni_user_name,usr->hdr_user_name.buffer, ps, depth))	/* username unicode string */
-		return False;
-	if(!smb_io_unistr2("uni_full_name   ", &usr->uni_full_name, usr->hdr_full_name.buffer, ps, depth))	/* user's full name unicode string */
-		return False;
-	if(!smb_io_unistr2("uni_home_dir    ", &usr->uni_home_dir, usr->hdr_home_dir.buffer, ps, depth))	/* home directory unicode string */
-		return False;
-	if(!smb_io_unistr2("uni_dir_drive   ", &usr->uni_dir_drive, usr->hdr_dir_drive.buffer, ps, depth))	/* home directory drive unicode string */
-		return False;
-	if(!smb_io_unistr2("uni_logon_script", &usr->uni_logon_script, usr->hdr_logon_script.buffer, ps, depth))	/* logon script unicode string */
-		return False;
-	if(!smb_io_unistr2("uni_profile_path", &usr->uni_profile_path, usr->hdr_profile_path.buffer, ps, depth))	/* profile path unicode string */
-		return False;
-	if(!smb_io_unistr2("uni_acct_desc   ", &usr->uni_acct_desc, usr->hdr_acct_desc.buffer, ps, depth))	/* user desc unicode string */
-		return False;
-	if(!smb_io_unistr2("uni_workstations", &usr->uni_workstations, usr->hdr_workstations.buffer, ps, depth))	/* worksations user can log on from */
-		return False;
-	if(!smb_io_unistr2("uni_unknown_str ", &usr->uni_unknown_str, usr->hdr_unknown_str.buffer, ps, depth))	/* unknown string */
-		return False;
-	if(!smb_io_unistr2("uni_munged_dial ", &usr->uni_munged_dial,usr->hdr_munged_dial.buffer, ps, depth))	/* worksations user can log on from */
-		return False;
-
-	/* ok, this is only guess-work (as usual) */
-	if (usr->ptr_logon_hrs) {
-		if(!prs_align(ps))
-			return False;
-		if(!prs_uint32("unknown_6     ", ps, depth, &usr->unknown_6))
-			return False;
-		if(!prs_uint32("padding4      ", ps, depth, &usr->padding4))
-			return False;
-		if(!sam_io_logon_hrs("logon_hrs", &usr->logon_hrs, ps, depth))
-			return False;
-	} else if (UNMARSHALLING(ps)) {
-		usr->unknown_6 = 0;
-		usr->padding4 = 0;
-	}
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 void init_sam_user_info20A(SAM_USER_INFO_20 *usr, SAM_ACCOUNT *pw)
 {
-	int 		len_munged_dial;
-	const char*		munged_dial = pdb_get_munged_dial(pw);
-
-	len_munged_dial  = munged_dial  != NULL ? strlen(unix_to_dos_static(munged_dial))+1 : 0;
-	init_uni_hdr(&usr->hdr_munged_dial, len_munged_dial);
-	init_unistr2(&usr->uni_munged_dial, unix_to_dos_static(munged_dial), len_munged_dial);
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 
 }
 
@@ -6056,22 +2347,8 @@ reads or writes a structure.
 static BOOL sam_io_user_info20(const char *desc, SAM_USER_INFO_20 *usr,
 			prs_struct *ps, int depth)
 {
-	if (usr == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "sam_io_user_info20");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!smb_io_unihdr("hdr_munged_dial ", &usr->hdr_munged_dial, ps, depth))	/* wkstas user can log on from */
-		return False;
-
-	if(!smb_io_unistr2("uni_munged_dial ", &usr->uni_munged_dial,usr->hdr_munged_dial.buffer, ps, depth))	/* worksations user can log on from */
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -6082,64 +2359,8 @@ NTSTATUS make_samr_userinfo_ctr_usr21(TA
 				    uint16 switch_value,
 				    SAM_USER_INFO_21 * usr)
 {
-	DEBUG(5, ("init_samr_userinfo_ctr\n"));
-
-	ctr->switch_value = switch_value;
-	ctr->info.id = NULL;
-
-	switch (switch_value) {
-	case 0x10:
-		ctr->info.id10 = (SAM_USER_INFO_10 *)talloc_zero(ctx,sizeof(SAM_USER_INFO_10));
-		if (ctr->info.id10 == NULL)
-			return NT_STATUS_NO_MEMORY;
-
-		init_sam_user_info10(ctr->info.id10, usr->acb_info);
-		break;
-#if 0
-/* whoops - got this wrong.  i think.  or don't understand what's happening. */
-	case 0x11:
-		{
-			NTTIME expire;
-			info = (void *)&id11;
-
-			expire.low = 0xffffffff;
-			expire.high = 0x7fffffff;
-
-			ctr->info.id = (SAM_USER_INFO_11 *) talloc_zero(ctx,sizeof(*ctr->info.id11));
-			init_sam_user_info11(ctr->info.id11, &expire,
-					     "BROOKFIELDS$",	/* name */
-					     0x03ef,	/* user rid */
-					     0x201,	/* group rid */
-					     0x0080);	/* acb info */
-
-			break;
-		}
-#endif
-	case 0x12:
-		ctr->info.id12 = (SAM_USER_INFO_12 *)talloc_zero(ctx,sizeof(SAM_USER_INFO_12));
-		if (ctr->info.id12 == NULL)
-			return NT_STATUS_NO_MEMORY;
-
-		init_sam_user_info12(ctr->info.id12, usr->lm_pwd, usr->nt_pwd);
-		break;
-	case 21:
-		{
-			SAM_USER_INFO_21 *cusr;
-			cusr = (SAM_USER_INFO_21 *)talloc_zero(ctx,sizeof(SAM_USER_INFO_21));
-			ctr->info.id21 = cusr;
-			if (ctr->info.id21 == NULL)
-				return NT_STATUS_NO_MEMORY;
-			memcpy(cusr, usr, sizeof(*usr));
-			memset(cusr->lm_pwd, 0, sizeof(cusr->lm_pwd));
-			memset(cusr->nt_pwd, 0, sizeof(cusr->nt_pwd));
-			break;
-		}
-	default:
-		DEBUG(4,("make_samr_userinfo_ctr: unsupported info\n"));
-		return NT_STATUS_INVALID_INFO_CLASS;
-	}
-
-	return NT_STATUS_OK;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -6149,25 +2370,8 @@ inits a SAM_USERINFO_CTR structure.
 void init_samr_userinfo_ctr(SAM_USERINFO_CTR * ctr, uchar * sess_key,
 			    uint16 switch_value, void *info)
 {
-	DEBUG(5, ("init_samr_userinfo_ctr\n"));
-
-	ctr->switch_value = switch_value;
-	ctr->info.id = info;
-
-	switch (switch_value) {
-	case 0x18:
-		SamOEMhash(ctr->info.id24->pass, sess_key, 516);
-		dump_data(100, (char *)sess_key, 16);
-		dump_data(100, (char *)ctr->info.id24->pass, 516);
-		break;
-	case 0x17:
-		SamOEMhash(ctr->info.id23->pass, sess_key, 516);
-		dump_data(100, (char *)sess_key, 16);
-		dump_data(100, (char *)ctr->info.id23->pass, 516);
-		break;
-	default:
-		DEBUG(4,("init_samr_userinfo_ctr: unsupported switch level\n"));
-	}
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -6177,117 +2381,8 @@ reads or writes a structure.
 static BOOL samr_io_userinfo_ctr(const char *desc, SAM_USERINFO_CTR **ppctr,
 				 prs_struct *ps, int depth)
 {
-	BOOL ret;
-	SAM_USERINFO_CTR *ctr;
-
-	prs_debug(ps, depth, desc, "samr_io_userinfo_ctr");
-	depth++;
-
-	if (UNMARSHALLING(ps)) {
-		ctr = (SAM_USERINFO_CTR *)prs_alloc_mem(ps,sizeof(SAM_USERINFO_CTR));
-		if (ctr == NULL)
-			return False;
-		*ppctr = ctr;
-	} else {
-		ctr = *ppctr;
-	}
-
-	/* lkclXXXX DO NOT ALIGN BEFORE READING SWITCH VALUE! */
-
-	if(!prs_uint16("switch_value", ps, depth, &ctr->switch_value))
-		return False;
-	if(!prs_align(ps))
-		return False;
-
-	ret = False;
-
-	switch (ctr->switch_value) {
-	case 0x10:
-		if (UNMARSHALLING(ps))
-			ctr->info.id10 = (SAM_USER_INFO_10 *)prs_alloc_mem(ps,sizeof(SAM_USER_INFO_10));
-		if (ctr->info.id10 == NULL) {
-			DEBUG(2,("samr_io_userinfo_ctr: info pointer not initialised\n"));
-			return False;
-		}
-		ret = sam_io_user_info10("", ctr->info.id10, ps, depth);
-		break;
-	case 0x11:
-		if (UNMARSHALLING(ps))
-			ctr->info.id11 = (SAM_USER_INFO_11 *)prs_alloc_mem(ps,sizeof(SAM_USER_INFO_11));
-
-		if (ctr->info.id11 == NULL) {
-			DEBUG(2,("samr_io_userinfo_ctr: info pointer not initialised\n"));
-			return False;
-		}
-		ret = sam_io_user_info11("", ctr->info.id11, ps, depth);
-		break;
-	case 0x12:
-		if (UNMARSHALLING(ps))
-			ctr->info.id12 = (SAM_USER_INFO_12 *)prs_alloc_mem(ps,sizeof(SAM_USER_INFO_12));
-
-		if (ctr->info.id12 == NULL) {
-			DEBUG(2,("samr_io_userinfo_ctr: info pointer not initialised\n"));
-			return False;
-		}
-		ret = sam_io_user_info12("", ctr->info.id12, ps, depth);
-		break;
-	case 20:
-		if (UNMARSHALLING(ps))
-			ctr->info.id20 = (SAM_USER_INFO_20 *)prs_alloc_mem(ps,sizeof(SAM_USER_INFO_20));
-
-		if (ctr->info.id20 == NULL) {
-			DEBUG(2,("samr_io_userinfo_ctr: info pointer not initialised\n"));
-			return False;
-		}
-		ret = sam_io_user_info20("", ctr->info.id20, ps, depth);
-		break;
-	case 21:
-		if (UNMARSHALLING(ps))
-			ctr->info.id21 = (SAM_USER_INFO_21 *)prs_alloc_mem(ps,sizeof(SAM_USER_INFO_21));
-
-		if (ctr->info.id21 == NULL) {
-			DEBUG(2,("samr_io_userinfo_ctr: info pointer not initialised\n"));
-			return False;
-		}
-		ret = sam_io_user_info21("", ctr->info.id21, ps, depth);
-		break;
-	case 23:
-		if (UNMARSHALLING(ps))
-			ctr->info.id23 = (SAM_USER_INFO_23 *)prs_alloc_mem(ps,sizeof(SAM_USER_INFO_23));
-
-		if (ctr->info.id23 == NULL) {
-			DEBUG(2,("samr_io_userinfo_ctr: info pointer not initialised\n"));
-			return False;
-		}
-		ret = sam_io_user_info23("", ctr->info.id23, ps, depth);
-		break;
-	case 24:
-		if (UNMARSHALLING(ps))
-			ctr->info.id24 = (SAM_USER_INFO_24 *)prs_alloc_mem(ps,sizeof(SAM_USER_INFO_24));
-
-		if (ctr->info.id24 == NULL) {
-			DEBUG(2,("samr_io_userinfo_ctr: info pointer not initialised\n"));
-			return False;
-		}
-		ret = sam_io_user_info24("", ctr->info.id24, ps,  depth);
-		break;
-	case 25:
-		if (UNMARSHALLING(ps))
-			ctr->info.id25 = (SAM_USER_INFO_25 *)prs_alloc_mem(ps,sizeof(SAM_USER_INFO_25));
-
-		if (ctr->info.id25 == NULL) {
-			DEBUG(2,("samr_io_userinfo_ctr: info pointer not initialised\n"));
-			return False;
-		}
-		ret = sam_io_user_info25("", ctr->info.id25, ps, depth);
-		break;
-	default:
-		DEBUG(2, ("samr_io_userinfo_ctr: unknown switch level 0x%x\n", ctr->switch_value));
-		ret = False;
-		break;
-	}
-
-	return ret;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -6297,17 +2392,8 @@ inits a SAMR_R_QUERY_USERINFO structure.
 void init_samr_r_query_userinfo(SAMR_R_QUERY_USERINFO * r_u,
 				SAM_USERINFO_CTR * ctr, NTSTATUS status)
 {
-	DEBUG(5, ("init_samr_r_query_userinfo\n"));
-
-	r_u->ptr = 0;
-	r_u->ctr = NULL;
-
-	if (NT_STATUS_IS_OK(status)) {
-		r_u->ptr = 1;
-		r_u->ctr = ctr;
-	}
-
-	r_u->status = status;	/* return status */
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -6317,29 +2403,8 @@ reads or writes a structure.
 BOOL samr_io_r_query_userinfo(const char *desc, SAMR_R_QUERY_USERINFO * r_u,
 			      prs_struct *ps, int depth)
 {
-	if (r_u == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "samr_io_r_query_userinfo");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_uint32("ptr", ps, depth, &r_u->ptr))
-		return False;
-
-	if (r_u->ptr != 0) {
-		if(!samr_io_userinfo_ctr("ctr", &r_u->ctr, ps, depth))
-			return False;
-	}
-
-	if(!prs_align(ps))
-		return False;
-	if(!prs_ntstatus("status", ps, depth, &r_u->status))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -6350,11 +2415,8 @@ void init_samr_q_set_userinfo(SAMR_Q_SET
 			      POLICY_HND *hnd,  unsigned char sess_key[16],
 			      uint16 switch_value, void *info)
 {
-	DEBUG(5, ("init_samr_q_set_userinfo\n"));
-
-	q_u->pol = *hnd;
-	q_u->switch_value = switch_value;
-	init_samr_userinfo_ctr(q_u->ctr, sess_key, switch_value, info);
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -6364,23 +2426,8 @@ reads or writes a structure.
 BOOL samr_io_q_set_userinfo(const char *desc, SAMR_Q_SET_USERINFO * q_u,
 			    prs_struct *ps, int depth)
 {
-	if (q_u == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "samr_io_q_set_userinfo");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	smb_io_pol_hnd("pol", &(q_u->pol), ps, depth);
-
-	if(!prs_uint16("switch_value", ps, depth, &q_u->switch_value))
-		return False;
-	if(!samr_io_userinfo_ctr("ctr", &q_u->ctr, ps, depth))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -6389,31 +2436,19 @@ inits a SAMR_R_SET_USERINFO structure.
 
 void init_samr_r_set_userinfo(SAMR_R_SET_USERINFO * r_u, NTSTATUS status)
 {
-	DEBUG(5, ("init_samr_r_set_userinfo\n"));
-
-	r_u->status = status;	/* return status */
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
 reads or writes a structure.
-********************************************************************/
-
-BOOL samr_io_r_set_userinfo(const char *desc, SAMR_R_SET_USERINFO * r_u,
-			    prs_struct *ps, int depth)
-{
-	if (r_u == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "samr_io_r_set_userinfo");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_ntstatus("status", ps, depth, &r_u->status))
-		return False;
+********************************************************************/
 
-	return True;
+BOOL samr_io_r_set_userinfo(const char *desc, SAMR_R_SET_USERINFO * r_u,
+			    prs_struct *ps, int depth)
+{
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -6424,24 +2459,8 @@ void init_samr_q_set_userinfo2(SAMR_Q_SE
 			       POLICY_HND *hnd, unsigned char sess_key[16],
 			       uint16 switch_value, SAM_USERINFO_CTR * ctr)
 {
-	DEBUG(5, ("init_samr_q_set_userinfo2\n"));
-
-	q_u->pol = *hnd;
-	q_u->switch_value = switch_value;
-	q_u->ctr = ctr;
-
-	if (q_u->ctr != NULL)
-		q_u->ctr->switch_value = switch_value;
-
-	switch (switch_value) {
-	case 0x12:
-		SamOEMhash(ctr->info.id12->lm_pwd, sess_key, 16);
-		SamOEMhash(ctr->info.id12->nt_pwd, sess_key, 16);
-		dump_data(100, (char *)sess_key, 16);
-		dump_data(100, (char *)ctr->info.id12->lm_pwd, 16);
-		dump_data(100, (char *)ctr->info.id12->nt_pwd, 16);
-		break;
-	}
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -6451,24 +2470,8 @@ reads or writes a structure.
 BOOL samr_io_q_set_userinfo2(const char *desc, SAMR_Q_SET_USERINFO2 * q_u,
 			     prs_struct *ps, int depth)
 {
-	if (q_u == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "samr_io_q_set_userinfo2");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!smb_io_pol_hnd("pol", &q_u->pol, ps, depth))
-		return False;
-
-	if(!prs_uint16("switch_value", ps, depth, &q_u->switch_value))
-		return False;
-	if(!samr_io_userinfo_ctr("ctr", &q_u->ctr, ps, depth))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -6477,9 +2480,8 @@ inits a SAMR_R_SET_USERINFO2 structure.
 
 void init_samr_r_set_userinfo2(SAMR_R_SET_USERINFO2 * r_u, NTSTATUS status)
 {
-	DEBUG(5, ("init_samr_r_set_userinfo2\n"));
-
-	r_u->status = status;	/* return status */
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -6489,19 +2491,8 @@ reads or writes a structure.
 BOOL samr_io_r_set_userinfo2(const char *desc, SAMR_R_SET_USERINFO2 * r_u,
 			     prs_struct *ps, int depth)
 {
-	if (r_u == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "samr_io_r_set_userinfo2");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_ntstatus("status", ps, depth, &r_u->status))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -6511,16 +2502,8 @@ inits a SAMR_Q_CONNECT structure.
 void init_samr_q_connect(SAMR_Q_CONNECT * q_u,
 			 const char *srv_name, uint32 access_mask)
 {
-	int len_srv_name = strlen(srv_name);
-
-	DEBUG(5, ("init_samr_q_connect\n"));
-
-	/* make PDC server name \\server */
-	q_u->ptr_srv_name = len_srv_name > 0 ? 1 : 0;
-	init_unistr2(&q_u->uni_srv_name, srv_name, len_srv_name + 1);
-
-	/* example values: 0x0000 0002 */
-	q_u->access_mask = access_mask;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -6530,26 +2513,8 @@ reads or writes a structure.
 BOOL samr_io_q_connect(const char *desc, SAMR_Q_CONNECT * q_u,
 		       prs_struct *ps, int depth)
 {
-	if (q_u == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "samr_io_q_connect");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_uint32("ptr_srv_name", ps, depth, &q_u->ptr_srv_name))
-		return False;
-	if(!smb_io_unistr2("", &q_u->uni_srv_name, q_u->ptr_srv_name, ps, depth))
-		return False;
-
-	if(!prs_align(ps))
-		return False;
-	if(!prs_uint32("access_mask", ps, depth, &q_u->access_mask))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -6559,22 +2524,8 @@ reads or writes a structure.
 BOOL samr_io_r_connect(const char *desc, SAMR_R_CONNECT * r_u,
 		       prs_struct *ps, int depth)
 {
-	if (r_u == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "samr_io_r_connect");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!smb_io_pol_hnd("connect_pol", &r_u->connect_pol, ps, depth))
-		return False;
-
-	if(!prs_ntstatus("status", ps, depth, &r_u->status))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -6583,12 +2534,8 @@ inits a SAMR_Q_CONNECT_ANON structure.
 
 void init_samr_q_connect_anon(SAMR_Q_CONNECT_ANON * q_u)
 {
-	DEBUG(5, ("init_samr_q_connect_anon\n"));
-
-	q_u->ptr = 1;
-	q_u->unknown_0 = 0x5c;	/* server name (?!!) */
-	q_u->unknown_1 = 0x01;
-	q_u->access_mask = 0x20;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -6598,25 +2545,8 @@ reads or writes a structure.
 BOOL samr_io_q_connect_anon(const char *desc, SAMR_Q_CONNECT_ANON * q_u,
 			    prs_struct *ps, int depth)
 {
-	if (q_u == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "samr_io_q_connect_anon");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_uint32("ptr      ", ps, depth, &q_u->ptr))
-		return False;
-	if(!prs_uint16("unknown_0", ps, depth, &q_u->unknown_0))
-		return False;
-	if(!prs_uint16("unknown_1", ps, depth, &q_u->unknown_1))
-		return False;
-	if(!prs_uint32("access_mask", ps, depth, &q_u->access_mask))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -6626,22 +2556,8 @@ reads or writes a structure.
 BOOL samr_io_r_connect_anon(const char *desc, SAMR_R_CONNECT_ANON * r_u,
 			    prs_struct *ps, int depth)
 {
-	if (r_u == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "samr_io_r_connect_anon");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!smb_io_pol_hnd("connect_pol", &r_u->connect_pol, ps, depth))
-		return False;
-
-	if(!prs_ntstatus("status", ps, depth, &r_u->status))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -6651,13 +2567,8 @@ inits a SAMR_Q_GET_DOM_PWINFO structure.
 void init_samr_q_get_dom_pwinfo(SAMR_Q_GET_DOM_PWINFO * q_u,
 				const char *srv_name)
 {
-	int len_srv_name = strlen(srv_name);
-
-	DEBUG(5, ("init_samr_q_get_dom_pwinfo\n"));
-
-	q_u->ptr = 1;
-	init_uni_hdr(&q_u->hdr_srv_name, len_srv_name);
-	init_unistr2(&q_u->uni_srv_name, srv_name, len_srv_name);
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -6667,25 +2578,8 @@ reads or writes a structure.
 BOOL samr_io_q_get_dom_pwinfo(const char *desc, SAMR_Q_GET_DOM_PWINFO * q_u,
 			      prs_struct *ps, int depth)
 {
-	if (q_u == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "samr_io_q_get_dom_pwinfo");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_uint32("ptr", ps, depth, &q_u->ptr))
-		return False;
-	if (q_u->ptr != 0) {
-		if(!smb_io_unihdr("", &q_u->hdr_srv_name, ps, depth))
-			return False;
-		if(!smb_io_unistr2("", &q_u->uni_srv_name, q_u->hdr_srv_name.buffer, ps, depth))
-			return False;
-	}
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -6695,31 +2589,8 @@ reads or writes a structure.
 BOOL samr_io_r_get_dom_pwinfo(const char *desc, SAMR_R_GET_DOM_PWINFO * r_u,
 			      prs_struct *ps, int depth)
 {
-	if (r_u == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "samr_io_r_get_dom_pwinfo");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	/* 
-	 * we need 16 bytes herre according to tests.  Don't know
-	 * what they are, but the length is important for the singing
-	 */
-
-	if(!prs_uint32("unk_0", ps, depth, &r_u->unk_0))
-		return False;
-	if(!prs_uint32("unk_1", ps, depth, &r_u->unk_1))
-		return False;
-	if(!prs_uint32("unk_2", ps, depth, &r_u->unk_2))
-		return False;
-
-	if(!prs_ntstatus("status", ps, depth, &r_u->status))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -6745,24 +2616,8 @@ reads or writes a SAMR_ENC_PASSWD struct
 BOOL samr_io_enc_passwd(const char *desc, SAMR_ENC_PASSWD * pwd,
 			prs_struct *ps, int depth)
 {
-	if (pwd == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "samr_io_enc_passwd");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_uint32("ptr", ps, depth, &pwd->ptr))
-		return False;
-
-	if (pwd->ptr != 0) {
-		if(!prs_uint8s(False, "pwd", ps, depth, pwd->pass, sizeof(pwd->pass)))
-			return False;
-	}
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -6788,23 +2643,8 @@ reads or writes a SAMR_ENC_HASH structur
 BOOL samr_io_enc_hash(const char *desc, SAMR_ENC_HASH * hsh,
 		      prs_struct *ps, int depth)
 {
-	if (hsh == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "samr_io_enc_hash");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_uint32("ptr ", ps, depth, &hsh->ptr))
-		return False;
-	if (hsh->ptr != 0) {
-		if(!prs_uint8s(False, "hash", ps, depth, hsh->hash,sizeof(hsh->hash)))
-			return False;
-	}
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -6818,24 +2658,8 @@ void init_samr_q_chgpasswd_user(SAMR_Q_C
 				char lm_newpass[516],
 				uchar lm_oldhash[16])
 {
-	int len_dest_host = strlen(dest_host);
-	int len_user_name = strlen(user_name);
-
-	DEBUG(5, ("init_samr_q_chgpasswd_user\n"));
-
-	q_u->ptr_0 = 1;
-	init_uni_hdr(&q_u->hdr_dest_host, len_dest_host);
-	init_unistr2(&q_u->uni_dest_host, dest_host, len_dest_host);
-	init_uni_hdr(&q_u->hdr_user_name, len_user_name);
-	init_unistr2(&q_u->uni_user_name, user_name, len_user_name);
-
-	init_enc_passwd(&q_u->nt_newpass, nt_newpass);
-	init_enc_hash(&q_u->nt_oldhash, nt_oldhash);
-
-	q_u->unknown = 0x01;
-
-	init_enc_passwd(&q_u->lm_newpass, lm_newpass);
-	init_enc_hash(&q_u->lm_oldhash, lm_oldhash);
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -6845,44 +2669,8 @@ reads or writes a structure.
 BOOL samr_io_q_chgpasswd_user(const char *desc, SAMR_Q_CHGPASSWD_USER * q_u,
 			      prs_struct *ps, int depth)
 {
-	if (q_u == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "samr_io_q_chgpasswd_user");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_uint32("ptr_0", ps, depth, &q_u->ptr_0))
-		return False;
-
-	if(!smb_io_unihdr("", &q_u->hdr_dest_host, ps, depth))
-		return False;
-	if(!smb_io_unistr2("", &q_u->uni_dest_host, q_u->hdr_dest_host.buffer, ps, depth))
-		return False;
-
-	if(!prs_align(ps))
-		return False;
-	if(!smb_io_unihdr("", &q_u->hdr_user_name, ps, depth))
-		return False;
-	if(!smb_io_unistr2("", &q_u->uni_user_name, q_u->hdr_user_name.buffer,ps, depth))
-		return False;
-
-	if(!samr_io_enc_passwd("nt_newpass", &q_u->nt_newpass, ps, depth))
-		return False;
-	if(!samr_io_enc_hash("nt_oldhash", &q_u->nt_oldhash, ps, depth))
-		return False;
-
-	if(!prs_uint32("unknown", ps, depth, &q_u->unknown))
-		return False;
-
-	if(!samr_io_enc_passwd("lm_newpass", &q_u->lm_newpass, ps, depth))
-		return False;
-	if(!samr_io_enc_hash("lm_oldhash", &q_u->lm_oldhash, ps, depth))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -6891,9 +2679,8 @@ inits a SAMR_R_CHGPASSWD_USER structure.
 
 void init_samr_r_chgpasswd_user(SAMR_R_CHGPASSWD_USER * r_u, NTSTATUS status)
 {
-	DEBUG(5, ("init_r_chgpasswd_user\n"));
-
-	r_u->status = status;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -6903,19 +2690,8 @@ reads or writes a structure.
 BOOL samr_io_r_chgpasswd_user(const char *desc, SAMR_R_CHGPASSWD_USER * r_u,
 			      prs_struct *ps, int depth)
 {
-	if (r_u == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "samr_io_r_chgpasswd_user");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_ntstatus("status", ps, depth, &r_u->status))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -6925,10 +2701,8 @@ reads or writes a structure.
 void init_samr_q_unknown_2e(SAMR_Q_UNKNOWN_2E *q_u,
 				POLICY_HND *domain_pol, uint16 switch_value)
 {
-	DEBUG(5, ("init_samr_q_unknown_2e\n"));
-
-	q_u->domain_pol = *domain_pol;
-	q_u->switch_value = switch_value;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -6938,22 +2712,8 @@ reads or writes a structure.
 BOOL samr_io_q_unknown_2e(const char *desc, SAMR_Q_UNKNOWN_2E *q_u,
 			      prs_struct *ps, int depth)
 {
-	if (q_u == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "samr_io_q_unknown_2e");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!smb_io_pol_hnd("domain_pol", &q_u->domain_pol, ps, depth))
-		return False;
-
-	if(!prs_uint16("switch_value", ps, depth, &q_u->switch_value))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -6964,17 +2724,8 @@ void init_samr_r_samr_unknown_2e(SAMR_R_
 				uint16 switch_value, SAM_UNK_CTR * ctr,
 				NTSTATUS status)
 {
-	DEBUG(5, ("init_samr_r_samr_unknown_2e\n"));
-
-	r_u->ptr_0 = 0;
-	r_u->switch_value = 0;
-	r_u->status = status;	/* return status */
-
-	if (NT_STATUS_IS_OK(status)) {
-		r_u->switch_value = switch_value;
-		r_u->ptr_0 = 1;
-		r_u->ctr = ctr;
-	}
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -6983,69 +2734,8 @@ reads or writes a structure.
 
 BOOL samr_io_r_samr_unknown_2e(const char *desc, SAMR_R_UNKNOWN_2E * r_u,
 			      prs_struct *ps, int depth)
-{
-        if (r_u == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "samr_io_r_samr_unknown_2e");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_uint32("ptr_0 ", ps, depth, &r_u->ptr_0))
-		return False;
-
-	if (r_u->ptr_0 != 0 && r_u->ctr != NULL) {
-		if(!prs_uint16("switch_value", ps, depth, &r_u->switch_value))
-			return False;
-		if(!prs_align(ps))
-			return False;
-
-		switch (r_u->switch_value) {
-		case 0x0c:
-			if(!sam_io_unk_info12("unk_inf12", &r_u->ctr->info.inf12, ps, depth))
-				return False;
-			break;
-		case 0x07:
-			if(!sam_io_unk_info7("unk_inf7",&r_u->ctr->info.inf7, ps,depth))
-				return False;
-			break;
-		case 0x06:
-			if(!sam_io_unk_info6("unk_inf6",&r_u->ctr->info.inf6, ps,depth))
-				return False;
-			break;
-		case 0x05:
-			if(!sam_io_unk_info5("unk_inf5",&r_u->ctr->info.inf5, ps,depth))
-				return False;
-			break;
-		case 0x03:
-			if(!sam_io_unk_info3("unk_inf3",&r_u->ctr->info.inf3, ps,depth))
-				return False;
-			break;
-		case 0x02:
-			if(!sam_io_unk_info2("unk_inf2",&r_u->ctr->info.inf2, ps,depth))
-				return False;
-			break;
-		case 0x01:
-			if(!sam_io_unk_info1("unk_inf1",&r_u->ctr->info.inf1, ps,depth))
-				return False;
-			break;
-		default:
-			DEBUG(0, ("samr_io_r_samr_unknown_2e: unknown switch level 0x%x\n",
-				r_u->switch_value));
-			r_u->status = NT_STATUS_INVALID_INFO_CLASS;
-			return False;
-		}
-	}
-	
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_ntstatus("status", ps, depth, &r_u->status))
-		return False;
-	
-	return True;
+{DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 
@@ -7056,14 +2746,8 @@ reads or writes a structure.
 void init_samr_q_set_domain_info(SAMR_Q_SET_DOMAIN_INFO *q_u,
 				POLICY_HND *domain_pol, uint16 switch_value, SAM_UNK_CTR *ctr)
 {
-	DEBUG(5, ("init_samr_q_set_domain_info\n"));
-
-	q_u->domain_pol = *domain_pol;
-	q_u->switch_value0 = switch_value;
-
-	q_u->switch_value = switch_value;
-	q_u->ctr = ctr;
-	
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -7073,67 +2757,8 @@ reads or writes a structure.
 BOOL samr_io_q_set_domain_info(const char *desc, SAMR_Q_SET_DOMAIN_INFO *q_u,
 			      prs_struct *ps, int depth)
 {
-	if (q_u == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "samr_io_q_set_domain_info");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!smb_io_pol_hnd("domain_pol", &q_u->domain_pol, ps, depth))
-		return False;
-
-	if(!prs_uint16("switch_value0", ps, depth, &q_u->switch_value0))
-		return False;
-
-	if(!prs_uint16("switch_value", ps, depth, &q_u->switch_value))
-		return False;
-
-	if(!prs_align(ps))
-		return False;
-
-	if ((q_u->ctr = (SAM_UNK_CTR *)prs_alloc_mem(ps, sizeof(SAM_UNK_CTR))) == NULL)
-		return False;
-	
-	switch (q_u->switch_value) {
-
-	case 0x0c:
-		if(!sam_io_unk_info12("unk_inf12", &q_u->ctr->info.inf12, ps, depth))
-			return False;
-		break;
-	case 0x07:
-		if(!sam_io_unk_info7("unk_inf7",&q_u->ctr->info.inf7, ps,depth))
-			return False;
-		break;
-	case 0x06:
-		if(!sam_io_unk_info6("unk_inf6",&q_u->ctr->info.inf6, ps,depth))
-			return False;
-		break;
-	case 0x05:
-		if(!sam_io_unk_info5("unk_inf5",&q_u->ctr->info.inf5, ps,depth))
-			return False;
-		break;
-	case 0x03:
-		if(!sam_io_unk_info3("unk_inf3",&q_u->ctr->info.inf3, ps,depth))
-			return False;
-		break;
-	case 0x02:
-		if(!sam_io_unk_info2("unk_inf2",&q_u->ctr->info.inf2, ps,depth))
-			return False;
-		break;
-	case 0x01:
-		if(!sam_io_unk_info1("unk_inf1",&q_u->ctr->info.inf1, ps,depth))
-			return False;
-		break;
-	default:
-		DEBUG(0, ("samr_io_r_samr_unknown_2e: unknown switch level 0x%x\n",
-			q_u->switch_value));
-		return False;
-	}
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -7142,9 +2767,8 @@ inits a SAMR_R_QUERY_DOMAIN_INFO structu
 
 void init_samr_r_set_domain_info(SAMR_R_SET_DOMAIN_INFO * r_u, NTSTATUS status)
 {
-	DEBUG(5, ("init_samr_r_set_domain_info\n"));
-
-	r_u->status = status;	/* return status */
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /*******************************************************************
@@ -7154,17 +2778,6 @@ reads or writes a structure.
 BOOL samr_io_r_set_domain_info(const char *desc, SAMR_R_SET_DOMAIN_INFO * r_u,
 			      prs_struct *ps, int depth)
 {
-        if (r_u == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "samr_io_r_samr_unknown_2e");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_ntstatus("status", ps, depth, &r_u->status))
-		return False;
-	
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
diff -pruwN samba-2.2.12/source/rpc_parse/parse_sec.c samba-2.2.12-livebox/rpc_parse/parse_sec.c
--- samba-2.2.12/source/rpc_parse/parse_sec.c	2004-08-12 20:24:27.000000000 +0200
+++ samba-2.2.12-livebox/rpc_parse/parse_sec.c	2010-03-31 11:45:59.000000000 +0200
@@ -262,24 +262,8 @@ size_t sec_desc_size(SEC_DESC *psd)
 
 BOOL sec_ace_equal(SEC_ACE *s1, SEC_ACE *s2)
 {
-	/* Trivial case */
-
-	if (!s1 && !s2) return True;
-
-	/* Check top level stuff */
-
-	if (s1->type != s2->type || s1->flags != s2->flags ||
-	    s1->info.mask != s2->info.mask) {
-		return False;
-	}
-
-	/* Check SID */
-
-	if (!sid_equal(&s1->trustee, &s2->trustee)) {
-		return False;
-	}
-
-	return True;
+	   DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -288,44 +272,8 @@ BOOL sec_ace_equal(SEC_ACE *s1, SEC_ACE
 
 BOOL sec_acl_equal(SEC_ACL *s1, SEC_ACL *s2)
 {
-	int i, j;
-
-	/* Trivial cases */
-
-	if (!s1 && !s2) return True;
-	if (!s1 || !s2) return False;
-
-	/* Check top level stuff */
-
-	if (s1->revision != s2->revision) {
-		DEBUG(10, ("sec_acl_equal(): revision differs (%d != %d)\n",
-			   s1->revision, s2->revision));
-		return False;
-	}
-
-	if (s1->num_aces != s2->num_aces) {
-		DEBUG(10, ("sec_acl_equal(): num_aces differs (%d != %d)\n",
-			   s1->revision, s2->revision));
-		return False;
-	}
-
-	/* The ACEs could be in any order so check each ACE in s1 against 
-	   each ACE in s2. */
-
-	for (i = 0; i < s1->num_aces; i++) {
-		BOOL found = False;
-
-		for (j = 0; j < s2->num_aces; j++) {
-			if (sec_ace_equal(&s1->ace[i], &s2->ace[j])) {
-				found = True;
-				break;
-			}
-		}
-
-		if (!found) return False;
-	}
-
-	return True;
+	   DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -334,70 +282,8 @@ BOOL sec_acl_equal(SEC_ACL *s1, SEC_ACL
 
 BOOL sec_desc_equal(SEC_DESC *s1, SEC_DESC *s2)
 {
-	/* Trivial case */
-
-	if (!s1 && !s2) {
-		goto done;
-	}
-
-	/* Check top level stuff */
-
-	if (s1->revision != s2->revision) {
-		DEBUG(10, ("sec_desc_equal(): revision differs (%d != %d)\n",
-			   s1->revision, s2->revision));
-		return False;
-	}
-
-	if (s1->type!= s2->type) {
-		DEBUG(10, ("sec_desc_equal(): type differs (%d != %d)\n",
-			   s1->type, s2->type));
-		return False;
-	}
-
-	/* Check owner and group */
-
-	if (!sid_equal(s1->owner_sid, s2->owner_sid)) {
-		fstring str1, str2;
-
-		sid_to_string(str1, s1->owner_sid);
-		sid_to_string(str2, s2->owner_sid);
-
-		DEBUG(10, ("sec_desc_equal(): owner differs (%s != %s)\n",
-			   str1, str2));
-		return False;
-	}
-
-	if (!sid_equal(s1->grp_sid, s2->grp_sid)) {
-		fstring str1, str2;
-
-		sid_to_string(str1, s1->grp_sid);
-		sid_to_string(str2, s2->grp_sid);
-
-		DEBUG(10, ("sec_desc_equal(): group differs (%s != %s)\n",
-			   str1, str2));
-		return False;
-	}
-
-	/* Check ACLs present in one but not the other */
-
-	if ((s1->dacl && !s2->dacl) || (!s1->dacl && s2->dacl) ||
-	    (s1->sacl && !s2->sacl) || (!s1->sacl && s2->sacl)) {
-		DEBUG(10, ("sec_desc_equal(): dacl or sacl not present\n"));
-		return False;
-	}
-
-	/* Sigh - we have to do it the hard way by iterating over all
-	   the ACEs in the ACLs */
-
-	if (!sec_acl_equal(s1->dacl, s2->dacl) ||
-	    !sec_acl_equal(s1->sacl, s2->sacl)) {
-		DEBUG(10, ("sec_desc_equal(): dacl/sacl list not equal\n"));
-		return False;
-	}
-
- done:
-	DEBUG(10, ("sec_desc_equal(): secdescs are identical\n"));
-	return True;
+	   DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -407,47 +293,8 @@ BOOL sec_desc_equal(SEC_DESC *s1, SEC_DE
 
 SEC_DESC_BUF *sec_desc_merge(TALLOC_CTX *ctx, SEC_DESC_BUF *new_sdb, SEC_DESC_BUF *old_sdb)
 {
-	DOM_SID *owner_sid, *group_sid;
-	SEC_DESC_BUF *return_sdb;
-	SEC_ACL *dacl, *sacl;
-	SEC_DESC *psd = NULL;
-	uint16 secdesc_type;
-	size_t secdesc_size;
-
-	/* Copy over owner and group sids.  There seems to be no flag for
-	   this so just check the pointer values. */
-
-	owner_sid = new_sdb->sec->owner_sid ? new_sdb->sec->owner_sid :
-		old_sdb->sec->owner_sid;
-
-	group_sid = new_sdb->sec->grp_sid ? new_sdb->sec->grp_sid :
-		old_sdb->sec->grp_sid;
-	
-	secdesc_type = new_sdb->sec->type;
-
-	/* Ignore changes to the system ACL.  This has the effect of making
-	   changes through the security tab audit button not sticking. 
-	   Perhaps in future Samba could implement these settings somehow. */
-
-	sacl = NULL;
-	secdesc_type &= ~SEC_DESC_SACL_PRESENT;
-
-	/* Copy across discretionary ACL */
-
-	if (secdesc_type & SEC_DESC_DACL_PRESENT) {
-		dacl = new_sdb->sec->dacl;
-	} else {
-		dacl = old_sdb->sec->dacl;
-	}
-
-	/* Create new security descriptor from bits */
-
-	psd = make_sec_desc(ctx, new_sdb->sec->revision, 
-			    owner_sid, group_sid, sacl, dacl, &secdesc_size);
-
-	return_sdb = make_sec_desc_buf(ctx, secdesc_size, psd);
-
-	return(return_sdb);
+	   DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -748,10 +595,8 @@ SEC_DESC_BUF *make_sec_desc_buf(TALLOC_C
 
 SEC_DESC_BUF *dup_sec_desc_buf(TALLOC_CTX *ctx, SEC_DESC_BUF *src)
 {
-	if(src == NULL)
-		return NULL;
-
-	return make_sec_desc_buf( ctx, src->len, src->sec);
+	   DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
diff -pruwN samba-2.2.12/source/rpc_parse/parse_srv.c samba-2.2.12-livebox/rpc_parse/parse_srv.c
--- samba-2.2.12/source/rpc_parse/parse_srv.c	2004-08-12 20:24:27.000000000 +0200
+++ samba-2.2.12-livebox/rpc_parse/parse_srv.c	2010-03-31 11:45:59.000000000 +0200
@@ -121,34 +121,8 @@ void init_srv_share_info2_str(SH_INFO_2_
 
 static BOOL srv_io_share_info2_str(const char *desc, SH_INFO_2 *sh, SH_INFO_2_STR *sh2, prs_struct *ps, int depth)
 {
-	if (sh2 == NULL)
-		return False;
-
-	if (UNMARSHALLING(ps))
-		ZERO_STRUCTP(sh2);
-
-	prs_debug(ps, depth, desc, "srv_io_share_info2_str");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-	if (sh->ptr_netname)
-		if(!smb_io_unistr2("", &sh2->uni_netname, True, ps, depth))
-			return False;
-
-	if (sh->ptr_remark)
-		if(!smb_io_unistr2("", &sh2->uni_remark, True, ps, depth))
-			return False;
-
-	if (sh->ptr_netname)
-		if(!smb_io_unistr2("", &sh2->uni_path, True, ps, depth))
-			return False;
-
-	if (sh->ptr_passwd)
-		if(!smb_io_unistr2("", &sh2->uni_passwd, True, ps, depth))
-			return False;
-
-	return True;
+	  DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -214,15 +188,8 @@ static BOOL srv_io_share_info2(const cha
 
 void init_srv_share_info501(SH_INFO_501 *sh501, const char *net_name, uint32 type, const char *remark, uint32 csc_policy)
 {
-	DEBUG(5,("init_srv_share_info501: %s %8x %s %08x\n", net_name, type,
-		remark, csc_policy));
-
-	ZERO_STRUCTP(sh501);
-
-	sh501->ptr_netname = (net_name != NULL) ? 1 : 0;
-	sh501->type = type;
-	sh501->ptr_remark = (remark != NULL) ? 1 : 0;
-	sh501->csc_policy = csc_policy;
+	  DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -231,25 +198,8 @@ void init_srv_share_info501(SH_INFO_501
 
 static BOOL srv_io_share_info501(const char *desc, SH_INFO_501 *sh501, prs_struct *ps, int depth)
 {
-	if (sh501 == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "srv_io_share_info501");
-	depth++;
-
-	if (!prs_align(ps))
-		return False;
-
-	if (!prs_uint32("ptr_netname", ps, depth, &sh501->ptr_netname))
-		return False;
-	if (!prs_uint32("type     ", ps, depth, &sh501->type))
-		return False;
-	if (!prs_uint32("ptr_remark ", ps, depth, &sh501->ptr_remark))
-		return False;
-	if (!prs_uint32("csc_policy ", ps, depth, &sh501->csc_policy))
-		return False;
-
-	return True;
+	  DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /********************************************************************
@@ -258,10 +208,8 @@ static BOOL srv_io_share_info501(const c
 
 void init_srv_share_info501_str(SH_INFO_501_STR *sh501, const char *net_name, const char *remark)
 {
-	DEBUG(5,("init_srv_share_info501_str\n"));
-
-	init_unistr2(&sh501->uni_netname, net_name, strlen(net_name)+1);
-	init_unistr2(&sh501->uni_remark, remark, strlen(remark)+1);
+	  DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -270,23 +218,8 @@ void init_srv_share_info501_str(SH_INFO_
 
 static BOOL srv_io_share_info501_str(const char *desc, SH_INFO_501_STR *sh501, prs_struct *ps, int depth)
 {
-	if (sh501 == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "srv_io_share_info501_str");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-	if(!smb_io_unistr2("", &sh501->uni_netname, True, ps, depth))
-		return False;
-
-	if(!prs_align(ps))
-		return False;
-	if(!smb_io_unistr2("", &sh501->uni_remark, True, ps, depth))
-		return False;
-
-	return True;
+	  DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -298,21 +231,8 @@ void init_srv_share_info502(SH_INFO_502
 				uint32 perms, uint32 max_uses, uint32 num_uses,
 				const char *path, const char *passwd, SEC_DESC *psd, size_t sd_size)
 {
-	DEBUG(5,("init_srv_share_info502: %s %8x %s\n", net_name, type, remark));
-
-	ZERO_STRUCTP(sh502);
-
-	sh502->ptr_netname = (net_name != NULL) ? 1 : 0;
-	sh502->type        = type;
-	sh502->ptr_remark  = (remark != NULL) ? 1 : 0;
-	sh502->perms       = perms;
-	sh502->max_uses    = max_uses;
-	sh502->num_uses    = num_uses;
-	sh502->type        = type;
-	sh502->ptr_path    = (path != NULL) ? 1 : 0;
-	sh502->ptr_passwd  = (passwd != NULL) ? 1 : 0;
-	sh502->sd_size     = (uint32)sd_size;
-	sh502->ptr_sd      = (psd != NULL) ? 1 : 0;
+	  DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -321,37 +241,8 @@ void init_srv_share_info502(SH_INFO_502
 
 static BOOL srv_io_share_info502(const char *desc, SH_INFO_502 *sh502, prs_struct *ps, int depth)
 {
-	if (sh502 == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "srv_io_share_info502");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_uint32("ptr_netname", ps, depth, &sh502->ptr_netname))
-		return False;
-	if(!prs_uint32("type       ", ps, depth, &sh502->type))
-		return False;
-	if(!prs_uint32("ptr_remark ", ps, depth, &sh502->ptr_remark))
-		return False;
-	if(!prs_uint32("perms      ", ps, depth, &sh502->perms))
-		return False;
-	if(!prs_uint32("max_uses   ", ps, depth, &sh502->max_uses))
-		return False;
-	if(!prs_uint32("num_uses   ", ps, depth, &sh502->num_uses))
-		return False;
-	if(!prs_uint32("ptr_path   ", ps, depth, &sh502->ptr_path))
-		return False;
-	if(!prs_uint32("ptr_passwd ", ps, depth, &sh502->ptr_passwd))
-		return False;
-	if(!prs_uint32("sd_size    ", ps, depth, &sh502->sd_size))
-		return False;
-	if(!prs_uint32("ptr_sd     ", ps, depth, &sh502->ptr_sd))
-		return False;
-
-	return True;
+	  DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -363,22 +254,8 @@ void init_srv_share_info502_str(SH_INFO_
 				const char *net_name, const char *remark,
 				const char *path, const char *passwd, SEC_DESC *psd, size_t sd_size)
 {
-	DEBUG(5,("init_srv_share_info502_str\n"));
-
-	sh502str->ptrs = ptrs;
-
-	if(sh502str->ptrs->ptr_netname)
-		init_unistr2(&sh502str->uni_netname, net_name, strlen(net_name)+1);
-	if(sh502str->ptrs->ptr_remark)
-		init_unistr2(&sh502str->uni_remark, remark, strlen(remark)+1);
-	if(sh502str->ptrs->ptr_path)
-		init_unistr2(&sh502str->uni_path, path, strlen(path)+1);
-	if(sh502str->ptrs->ptr_passwd)
-		init_unistr2(&sh502str->uni_passwd, passwd, strlen(passwd)+1);
-	if(sh502str->ptrs->ptr_sd) {
-		sh502str->sd = psd;
-		sh502str->sd_size = sd_size;
-	}
+	  DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -387,55 +264,8 @@ void init_srv_share_info502_str(SH_INFO_
 
 static BOOL srv_io_share_info502_str(const char *desc, SH_INFO_502_STR *sh502, prs_struct *ps, int depth)
 {
-	if (sh502 == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "srv_io_share_info502_str");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(sh502->ptrs->ptr_netname) {
-		if(!smb_io_unistr2("", &sh502->uni_netname, True, ps, depth))
-			return False;
-	}
-
-	if(!prs_align(ps))
-		return False;
-
-	if(sh502->ptrs->ptr_remark) {
-		if(!smb_io_unistr2("", &sh502->uni_remark, True, ps, depth))
-			return False;
-	}
-
-	if(!prs_align(ps))
-		return False;
-
-	if(sh502->ptrs->ptr_path) {
-		if(!smb_io_unistr2("", &sh502->uni_path, True, ps, depth))
-			return False;
-	}
-
-	if(!prs_align(ps))
-		return False;
-
-	if(sh502->ptrs->ptr_passwd) {
-		if(!smb_io_unistr2("", &sh502->uni_passwd, True, ps, depth))
-			return False;
-	}
-
-	if(!prs_align(ps))
-		return False;
-
-	if(sh502->ptrs->ptr_sd) {
-		if(!prs_uint32("sd_size   ", ps, depth, &sh502->sd_size))
-			return False;
-		if (!sec_io_desc(desc, &sh502->sd, ps, depth))
-			return False;
-	}
-
-	return True;
+	  DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -445,19 +275,8 @@ static BOOL srv_io_share_info502_str(con
 static BOOL srv_io_share_info1005(const char* desc, SRV_SHARE_INFO_1005* sh1005,
 				  prs_struct* ps, int depth)
 {
-	if(sh1005 == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "srv_io_share_info1005");
-		depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_uint32("misc_flags", ps, depth, &sh1005->misc_flags))
-		return False;
-
-	return True;
+	  DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }   
 
 /*******************************************************************
@@ -467,19 +286,8 @@ static BOOL srv_io_share_info1005(const
 static BOOL srv_io_share_info1501(const char* desc, SRV_SHARE_INFO_1501* sh1501,
 				  prs_struct* ps, int depth)
 {
-	if(sh1501 == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "srv_io_share_info1501");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if (!sec_io_desc_buf(desc, &sh1501->sdb, ps, depth))
-		return False;
-
-	return True;
+	  DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }   
 
 /*******************************************************************
@@ -1043,19 +851,8 @@ void init_srv_sess_info0_str(SESS_INFO_0
 
 static BOOL srv_io_sess_info0_str(const char *desc,  SESS_INFO_0_STR *ss0, prs_struct *ps, int depth)
 {
-	if (ss0 == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "srv_io_sess_info0_str");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!smb_io_unistr2("", &ss0->uni_name, True, ps, depth))
-		return False;
-
-	return True;
+	  DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -1064,9 +861,8 @@ static BOOL srv_io_sess_info0_str(const
 
 void init_srv_sess_info0(SESS_INFO_0 *ss0, const char *name)
 {
-	DEBUG(5,("init_srv_sess_info0: %s\n", name));
-
-	ss0->ptr_name = (name != NULL) ? 1 : 0;
+	  DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -1075,19 +871,8 @@ void init_srv_sess_info0(SESS_INFO_0 *ss
 
 static BOOL srv_io_sess_info0(const char *desc, SESS_INFO_0 *ss0, prs_struct *ps, int depth)
 {
-	if (ss0 == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "srv_io_sess_info0");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_uint32("ptr_name", ps, depth, &ss0->ptr_name))
-		return False;
-
-	return True;
+	  DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -1096,48 +881,8 @@ static BOOL srv_io_sess_info0(const char
 
 static BOOL srv_io_srv_sess_info_0(const char *desc, SRV_SESS_INFO_0 *ss0, prs_struct *ps, int depth)
 {
-	if (ss0 == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "srv_io_srv_sess_info_0");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_uint32("num_entries_read", ps, depth, &ss0->num_entries_read))
-		return False;
-	if(!prs_uint32("ptr_sess_info", ps, depth, &ss0->ptr_sess_info))
-		return False;
-
-	if (ss0->ptr_sess_info != 0) {
-		int i;
-		int num_entries = ss0->num_entries_read;
-
-		if (num_entries > MAX_SESS_ENTRIES) {
-			num_entries = MAX_SESS_ENTRIES; /* report this! */
-		}
-
-		if(!prs_uint32("num_entries_read2", ps, depth, &ss0->num_entries_read2))
-			return False;
-
-		SMB_ASSERT_ARRAY(ss0->info_0, num_entries);
-
-		for (i = 0; i < num_entries; i++) {
-			if(!srv_io_sess_info0("", &ss0->info_0[i], ps, depth))
-				return False;
-		}
-
-		for (i = 0; i < num_entries; i++) {
-			if(!srv_io_sess_info0_str("", &ss0->info_0_str[i], ps, depth))
-				return False;
-		}
-
-		if(!prs_align(ps))
-			return False;
-	}
-
-	return True;
+	  DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -1146,10 +891,8 @@ static BOOL srv_io_srv_sess_info_0(const
 
 void init_srv_sess_info1_str(SESS_INFO_1_STR *ss1, const char *name, const char *user)
 {
-	DEBUG(5,("init_srv_sess_info1_str\n"));
-
-	init_unistr2(&ss1->uni_name, name, strlen(name)+1);
-	init_unistr2(&ss1->uni_user, name, strlen(user)+1);
+	  DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -1158,21 +901,8 @@ void init_srv_sess_info1_str(SESS_INFO_1
 
 static BOOL srv_io_sess_info1_str(const char *desc, SESS_INFO_1_STR *ss1, prs_struct *ps, int depth)
 {
-	if (ss1 == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "srv_io_sess_info1_str");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!smb_io_unistr2("", &ss1->uni_name, True, ps, depth))
-		return False;
-	if(!smb_io_unistr2("", &(ss1->uni_user), True, ps, depth))
-		return False;
-
-	return True;
+	  DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -1184,15 +914,8 @@ void init_srv_sess_info1(SESS_INFO_1 *ss
 				uint32 num_opens, uint32 open_time, uint32 idle_time,
 				uint32 user_flags)
 {
-	DEBUG(5,("init_srv_sess_info1: %s\n", name));
-
-	ss1->ptr_name = (name != NULL) ? 1 : 0;
-	ss1->ptr_user = (user != NULL) ? 1 : 0;
-
-	ss1->num_opens  = num_opens;
-	ss1->open_time  = open_time;
-	ss1->idle_time  = idle_time;
-	ss1->user_flags = user_flags;
+	  DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -1201,30 +924,8 @@ reads or writes a structure.
 
 static BOOL srv_io_sess_info1(const char *desc, SESS_INFO_1 *ss1, prs_struct *ps, int depth)
 {
-	if (ss1 == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "srv_io_sess_info1");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_uint32("ptr_name  ", ps, depth, &ss1->ptr_name))
-		return False;
-	if(!prs_uint32("ptr_user  ", ps, depth, &ss1->ptr_user))
-		return False;
-
-	if(!prs_uint32("num_opens ", ps, depth, &ss1->num_opens))
-		return False;
-	if(!prs_uint32("open_time ", ps, depth, &ss1->open_time))
-		return False;
-	if(!prs_uint32("idle_time ", ps, depth, &ss1->idle_time))
-		return False;
-	if(!prs_uint32("user_flags", ps, depth, &ss1->user_flags))
-		return False;
-
-	return True;
+	  DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -1233,211 +934,62 @@ static BOOL srv_io_sess_info1(const char
 
 static BOOL srv_io_srv_sess_info_1(const char *desc, SRV_SESS_INFO_1 *ss1, prs_struct *ps, int depth)
 {
-	if (ss1 == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "srv_io_srv_sess_info_1");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_uint32("num_entries_read", ps, depth, &ss1->num_entries_read))
-		return False;
-	if(!prs_uint32("ptr_sess_info", ps, depth, &ss1->ptr_sess_info))
-		return False;
-
-	if (ss1->ptr_sess_info != 0) {
-		int i;
-		int num_entries = ss1->num_entries_read;
-
-		if (num_entries > MAX_SESS_ENTRIES) {
-			num_entries = MAX_SESS_ENTRIES; /* report this! */
+	  DEBUG(1,("function ommited\n"));
+	/* function omited*/
 		}
 
-		if(!prs_uint32("num_entries_read2", ps, depth, &ss1->num_entries_read2))
-			return False;
-
-		SMB_ASSERT_ARRAY(ss1->info_1, num_entries);
+/*******************************************************************
+ Reads or writes a structure.
+********************************************************************/
 
-		for (i = 0; i < num_entries; i++) {
-			if(!srv_io_sess_info1("", &ss1->info_1[i], ps, depth))
-				return False;
+static BOOL srv_io_srv_sess_ctr(const char *desc, SRV_SESS_INFO_CTR **pp_ctr, prs_struct *ps, int depth)
+{
+	  DEBUG(1,("function ommited\n"));
+	/* function omited*/
 		}
 
-		for (i = 0; i < num_entries; i++) {
-			if(!srv_io_sess_info1_str("", &ss1->info_1_str[i], ps, depth))
-				return False;
-		}
+/*******************************************************************
+ Inits a SRV_Q_NET_SESS_ENUM structure.
+********************************************************************/
 
-		if(!prs_align(ps))
-			return False;
+void init_srv_q_net_sess_enum(SRV_Q_NET_SESS_ENUM *q_n,
+				const char *srv_name, const char *qual_name,
+				uint32 sess_level, SRV_SESS_INFO_CTR *ctr,
+				uint32 preferred_len,
+				ENUM_HND *hnd)
+{
+	  DEBUG(1,("function ommited\n"));
+	/* function omited*/
 	}
 
-	return True;
+/*******************************************************************
+ Reads or writes a structure.
+********************************************************************/
+
+BOOL srv_io_q_net_sess_enum(const char *desc, SRV_Q_NET_SESS_ENUM *q_n, prs_struct *ps, int depth)
+{
+	  DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
  Reads or writes a structure.
 ********************************************************************/
 
-static BOOL srv_io_srv_sess_ctr(const char *desc, SRV_SESS_INFO_CTR **pp_ctr, prs_struct *ps, int depth)
+BOOL srv_io_r_net_sess_enum(const char *desc, SRV_R_NET_SESS_ENUM *r_n, prs_struct *ps, int depth)
 {
-	SRV_SESS_INFO_CTR *ctr = *pp_ctr;
+	  DEBUG(1,("function ommited\n"));
+	/* function omited*/
+}
 
-	prs_debug(ps, depth, desc, "srv_io_srv_sess_ctr");
-	depth++;
-
-	if(UNMARSHALLING(ps)) {
-		ctr = *pp_ctr = (SRV_SESS_INFO_CTR *)prs_alloc_mem(ps, sizeof(SRV_SESS_INFO_CTR));
-		if (ctr == NULL)
-			return False;
-	}
-
-	if (ctr == NULL)
-		return False;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_uint32("switch_value", ps, depth, &ctr->switch_value))
-		return False;
-	if(!prs_uint32("ptr_sess_ctr", ps, depth, &ctr->ptr_sess_ctr))
-		return False;
-
-	if (ctr->ptr_sess_ctr != 0) {
-		switch (ctr->switch_value) {
-		case 0:
-			if(!srv_io_srv_sess_info_0("", &ctr->sess.info0, ps, depth))
-				return False;
-			break;
-		case 1:
-			if(!srv_io_srv_sess_info_1("", &ctr->sess.info1, ps, depth))
-				return False;
-			break;
-		default:
-			DEBUG(5,("%s no session info at switch_value %d\n",
-			         tab_depth(depth), ctr->switch_value));
-			break;
-		}
-	}
-
-	return True;
-}
-
-/*******************************************************************
- Inits a SRV_Q_NET_SESS_ENUM structure.
-********************************************************************/
-
-void init_srv_q_net_sess_enum(SRV_Q_NET_SESS_ENUM *q_n, 
-				const char *srv_name, const char *qual_name,
-				uint32 sess_level, SRV_SESS_INFO_CTR *ctr,
-				uint32 preferred_len,
-				ENUM_HND *hnd)
-{
-	q_n->ctr = ctr;
-
-	DEBUG(5,("init_q_net_sess_enum\n"));
-
-	init_buf_unistr2(&q_n->uni_srv_name, &q_n->ptr_srv_name, srv_name);
-	init_buf_unistr2(&q_n->uni_qual_name, &q_n->ptr_qual_name, qual_name);
-
-	q_n->sess_level    = sess_level;
-	q_n->preferred_len = preferred_len;
-
-	memcpy(&q_n->enum_hnd, hnd, sizeof(*hnd));
-}
-
-/*******************************************************************
- Reads or writes a structure.
-********************************************************************/
-
-BOOL srv_io_q_net_sess_enum(const char *desc, SRV_Q_NET_SESS_ENUM *q_n, prs_struct *ps, int depth)
-{
-	if (q_n == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "srv_io_q_net_sess_enum");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_uint32("ptr_srv_name", ps, depth, &q_n->ptr_srv_name))
-		return False;
-	if(!smb_io_unistr2("", &q_n->uni_srv_name, True, ps, depth))
-		return False;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_uint32("ptr_qual_name", ps, depth, &q_n->ptr_qual_name))
-		return False;
-	if(!smb_io_unistr2("", &q_n->uni_qual_name, q_n->ptr_qual_name, ps, depth))
-		return False;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_uint32("sess_level", ps, depth, &q_n->sess_level))
-		return False;
-	
-	if (q_n->sess_level != -1) {
-		if(!srv_io_srv_sess_ctr("sess_ctr", &q_n->ctr, ps, depth))
-			return False;
-	}
-
-	if(!prs_uint32("preferred_len", ps, depth, &q_n->preferred_len))
-		return False;
-
-	if(!smb_io_enum_hnd("enum_hnd", &q_n->enum_hnd, ps, depth))
-		return False;
-
-	return True;
-}
-
-/*******************************************************************
- Reads or writes a structure.
-********************************************************************/
-
-BOOL srv_io_r_net_sess_enum(const char *desc, SRV_R_NET_SESS_ENUM *r_n, prs_struct *ps, int depth)
-{
-	if (r_n == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "srv_io_r_net_sess_enum");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_uint32("sess_level", ps, depth, &r_n->sess_level))
-		return False;
-
-	if (r_n->sess_level != -1) {
-		if(!srv_io_srv_sess_ctr("sess_ctr", &r_n->ctr, ps, depth))
-			return False;
-	}
-
-	if(!prs_uint32("total_entries", ps, depth, &r_n->total_entries))
-		return False;
-	if(!smb_io_enum_hnd("enum_hnd", &r_n->enum_hnd, ps, depth))
-		return False;
-	if(!prs_werror("status     ", ps, depth, &r_n->status))
-		return False;
-
-	return True;
-}
-
-/*******************************************************************
- Inits a CONN_INFO_0 structure
-********************************************************************/
+/*******************************************************************
+ Inits a CONN_INFO_0 structure
+********************************************************************/
 
 void init_srv_conn_info0(CONN_INFO_0 *ss0, uint32 id)
 {
-	DEBUG(5,("init_srv_conn_info0\n"));
-
-	ss0->id = id;
+	  DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -1446,19 +998,8 @@ void init_srv_conn_info0(CONN_INFO_0 *ss
 
 static BOOL srv_io_conn_info0(const char *desc, CONN_INFO_0 *ss0, prs_struct *ps, int depth)
 {
-	if (ss0 == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "srv_io_conn_info0");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_uint32("id", ps, depth, &ss0->id))
-		return False;
-
-	return True;
+	  DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -1467,41 +1008,8 @@ static BOOL srv_io_conn_info0(const char
 
 static BOOL srv_io_srv_conn_info_0(const char *desc, SRV_CONN_INFO_0 *ss0, prs_struct *ps, int depth)
 {
-	if (ss0 == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "srv_io_srv_conn_info_0");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_uint32("num_entries_read", ps, depth, &ss0->num_entries_read))
-		return False;
-	if(!prs_uint32("ptr_conn_info", ps, depth, &ss0->ptr_conn_info))
-		return False;
-
-	if (ss0->ptr_conn_info != 0) {
-		int i;
-		int num_entries = ss0->num_entries_read;
-
-		if (num_entries > MAX_CONN_ENTRIES) {
-			num_entries = MAX_CONN_ENTRIES; /* report this! */
-		}
-
-		if(!prs_uint32("num_entries_read2", ps, depth, &ss0->num_entries_read2))
-			return False;
-
-		for (i = 0; i < num_entries; i++) {
-			if(!srv_io_conn_info0("", &ss0->info_0[i], ps, depth))
-				return False;
-		}
-
-		if(!prs_align(ps))
-			return False;
-	}
-
-	return True;
+	  DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -1510,10 +1018,8 @@ static BOOL srv_io_srv_conn_info_0(const
 
 void init_srv_conn_info1_str(CONN_INFO_1_STR *ss1, const char *usr_name, const char *net_name)
 {
-	DEBUG(5,("init_srv_conn_info1_str\n"));
-
-	init_unistr2(&ss1->uni_usr_name, usr_name, strlen(usr_name)+1);
-	init_unistr2(&ss1->uni_net_name, net_name, strlen(net_name)+1);
+	  DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -1522,21 +1028,8 @@ void init_srv_conn_info1_str(CONN_INFO_1
 
 static BOOL srv_io_conn_info1_str(const char *desc, CONN_INFO_1_STR *ss1, prs_struct *ps, int depth)
 {
-	if (ss1 == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "srv_io_conn_info1_str");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!smb_io_unistr2("", &ss1->uni_usr_name, True, ps, depth))
-		return False;
-	if(!smb_io_unistr2("", &ss1->uni_net_name, True, ps, depth))
-		return False;
-
-	return True;
+	  DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -1548,16 +1041,8 @@ void init_srv_conn_info1(CONN_INFO_1 *ss
 				uint32 num_opens, uint32 num_users, uint32 open_time,
 				const char *usr_name, const char *net_name)
 {
-	DEBUG(5,("init_srv_conn_info1: %s %s\n", usr_name, net_name));
-
-	ss1->id        = id       ;
-	ss1->type      = type     ;
-	ss1->num_opens = num_opens ;
-	ss1->num_users = num_users;
-	ss1->open_time = open_time;
-
-	ss1->ptr_usr_name = (usr_name != NULL) ? 1 : 0;
-	ss1->ptr_net_name = (net_name != NULL) ? 1 : 0;
+	  DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -1566,32 +1051,8 @@ void init_srv_conn_info1(CONN_INFO_1 *ss
 
 static BOOL srv_io_conn_info1(const char *desc, CONN_INFO_1 *ss1, prs_struct *ps, int depth)
 {
-	if (ss1 == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "srv_io_conn_info1");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_uint32("id          ", ps, depth, &ss1->id))
-		return False;
-	if(!prs_uint32("type        ", ps, depth, &ss1->type))
-		return False;
-	if(!prs_uint32("num_opens   ", ps, depth, &ss1->num_opens))
-		return False;
-	if(!prs_uint32("num_users   ", ps, depth, &ss1->num_users))
-		return False;
-	if(!prs_uint32("open_time   ", ps, depth, &ss1->open_time))
-		return False;
-
-	if(!prs_uint32("ptr_usr_name", ps, depth, &ss1->ptr_usr_name))
-		return False;
-	if(!prs_uint32("ptr_net_name", ps, depth, &ss1->ptr_net_name))
-		return False;
-
-	return True;
+	  DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -1600,46 +1061,8 @@ static BOOL srv_io_conn_info1(const char
 
 static BOOL srv_io_srv_conn_info_1(const char *desc, SRV_CONN_INFO_1 *ss1, prs_struct *ps, int depth)
 {
-	if (ss1 == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "srv_io_srv_conn_info_1");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_uint32("num_entries_read", ps, depth, &ss1->num_entries_read))
-		return False;
-	if(!prs_uint32("ptr_conn_info", ps, depth, &ss1->ptr_conn_info))
-		return False;
-
-	if (ss1->ptr_conn_info != 0) {
-		int i;
-		int num_entries = ss1->num_entries_read;
-
-		if (num_entries > MAX_CONN_ENTRIES) {
-			num_entries = MAX_CONN_ENTRIES; /* report this! */
-		}
-
-		if(!prs_uint32("num_entries_read2", ps, depth, &ss1->num_entries_read2))
-			return False;
-
-		for (i = 0; i < num_entries; i++) {
-			if(!srv_io_conn_info1("", &ss1->info_1[i], ps, depth))
-				return False;
-		}
-
-		for (i = 0; i < num_entries; i++) {
-			if(!srv_io_conn_info1_str("", &ss1->info_1_str[i], ps, depth))
-				return False;
-		}
-
-		if(!prs_align(ps))
-			return False;
-	}
-
-	return True;
+	  DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -1699,18 +1122,8 @@ void init_srv_q_net_conn_enum(SRV_Q_NET_
 				uint32 conn_level, SRV_CONN_INFO_CTR *ctr,
 				uint32 preferred_len,
 				ENUM_HND *hnd)
-{
-	DEBUG(5,("init_q_net_conn_enum\n"));
-
-	q_n->ctr = ctr;
-
-	init_buf_unistr2(&q_n->uni_srv_name, &q_n->ptr_srv_name, srv_name );
-	init_buf_unistr2(&q_n->uni_qual_name, &q_n->ptr_qual_name, qual_name);
-
-	q_n->conn_level    = conn_level;
-	q_n->preferred_len = preferred_len;
-
-	memcpy(&q_n->enum_hnd, hnd, sizeof(*hnd));
+{  DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -1719,46 +1132,8 @@ void init_srv_q_net_conn_enum(SRV_Q_NET_
 
 BOOL srv_io_q_net_conn_enum(const char *desc, SRV_Q_NET_CONN_ENUM *q_n, prs_struct *ps, int depth)
 {
-	if (q_n == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "srv_io_q_net_conn_enum");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_uint32("ptr_srv_name ", ps, depth, &q_n->ptr_srv_name))
-		return False;
-	if(!smb_io_unistr2("", &q_n->uni_srv_name, q_n->ptr_srv_name, ps, depth))
-		return False;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_uint32("ptr_qual_name", ps, depth, &q_n->ptr_qual_name))
-		return False;
-	if(!smb_io_unistr2("", &q_n->uni_qual_name, q_n->ptr_qual_name, ps, depth))
-		return False;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_uint32("conn_level", ps, depth, &q_n->conn_level))
-		return False;
-	
-	if (q_n->conn_level != -1) {
-		if(!srv_io_srv_conn_ctr("conn_ctr", &q_n->ctr, ps, depth))
-			return False;
-	}
-
-	if(!prs_uint32("preferred_len", ps, depth, &q_n->preferred_len))
-		return False;
-
-	if(!smb_io_enum_hnd("enum_hnd", &q_n->enum_hnd, ps, depth))
-		return False;
-
-	return True;
+	  DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -1767,31 +1142,8 @@ BOOL srv_io_q_net_conn_enum(const char *
 
 BOOL srv_io_r_net_conn_enum(const char *desc,  SRV_R_NET_CONN_ENUM *r_n, prs_struct *ps, int depth)
 {
-	if (r_n == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "srv_io_r_net_conn_enum");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_uint32("conn_level", ps, depth, &r_n->conn_level))
-		return False;
-
-	if (r_n->conn_level != -1) {
-		if(!srv_io_srv_conn_ctr("conn_ctr", &r_n->ctr, ps, depth))
-			return False;
-	}
-
-	if(!prs_uint32("total_entries", ps, depth, &r_n->total_entries))
-		return False;
-	if(!smb_io_enum_hnd("enum_hnd", &r_n->enum_hnd, ps, depth))
-		return False;
-	if(!prs_werror("status     ", ps, depth, &r_n->status))
-		return False;
-
-	return True;
+	  DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -1800,10 +1152,8 @@ BOOL srv_io_r_net_conn_enum(const char *
 
 void init_srv_file_info3_str(FILE_INFO_3_STR *fi3, const char *user_name, const char *path_name)
 {
-	DEBUG(5,("init_srv_file_info3_str\n"));
-
-	init_unistr2(&fi3->uni_path_name, path_name, strlen(path_name)+1);
-	init_unistr2(&fi3->uni_user_name, user_name, strlen(user_name)+1);
+	  DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -1812,21 +1162,8 @@ void init_srv_file_info3_str(FILE_INFO_3
 
 static BOOL srv_io_file_info3_str(const char *desc, FILE_INFO_3_STR *sh1, prs_struct *ps, int depth)
 {
-	if (sh1 == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "srv_io_file_info3_str");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!smb_io_unistr2("", &sh1->uni_path_name, True, ps, depth))
-		return False;
-	if(!smb_io_unistr2("", &sh1->uni_user_name, True, ps, depth))
-		return False;
-
-	return True;
+	  DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -1837,14 +1174,8 @@ void init_srv_file_info3(FILE_INFO_3 *fl
 				uint32 id, uint32 perms, uint32 num_locks,
 				const char *path_name, const char *user_name)
 {
-	DEBUG(5,("init_srv_file_info3: %s %s\n", path_name, user_name));
-
-	fl3->id        = id;	
-	fl3->perms     = perms;
-	fl3->num_locks = num_locks;
-
-	fl3->ptr_path_name = (path_name != NULL) ? 1 : 0;
-	fl3->ptr_user_name = (user_name != NULL) ? 1 : 0;
+	  DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -1853,27 +1184,8 @@ void init_srv_file_info3(FILE_INFO_3 *fl
 
 static BOOL srv_io_file_info3(const char *desc, FILE_INFO_3 *fl3, prs_struct *ps, int depth)
 {
-	if (fl3 == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "srv_io_file_info3");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_uint32("id           ", ps, depth, &fl3->id))
-		return False;
-	if(!prs_uint32("perms        ", ps, depth, &fl3->perms))
-		return False;
-	if(!prs_uint32("num_locks    ", ps, depth, &fl3->num_locks))
-		return False;
-	if(!prs_uint32("ptr_path_name", ps, depth, &fl3->ptr_path_name))
-		return False;
-	if(!prs_uint32("ptr_user_name", ps, depth, &fl3->ptr_user_name))
-		return False;
-
-	return True;
+	  DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -1882,46 +1194,8 @@ static BOOL srv_io_file_info3(const char
 
 static BOOL srv_io_srv_file_info_3(const char *desc, SRV_FILE_INFO_3 *fl3, prs_struct *ps, int depth)
 {
-	if (fl3 == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "srv_io_file_3_fl3");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_uint32("num_entries_read", ps, depth, &fl3->num_entries_read))
-		return False;
-	if(!prs_uint32("ptr_file_fl3", ps, depth, &fl3->ptr_file_info))
-		return False;
-
-	if (fl3->ptr_file_info != 0) {
-		int i;
-		int num_entries = fl3->num_entries_read;
-
-		if (num_entries > MAX_FILE_ENTRIES) {
-			num_entries = MAX_FILE_ENTRIES; /* report this! */
-		}
-
-		if(!prs_uint32("num_entries_read2", ps, depth, &fl3->num_entries_read2))
-			return False;
-
-		for (i = 0; i < num_entries; i++) {
-			if(!srv_io_file_info3("", &fl3->info_3[i], ps, depth))
-				return False;
-		}
-
-		for (i = 0; i < num_entries; i++) {
-			if(!srv_io_file_info3_str("", &fl3->info_3_str[i], ps, depth))
-				return False;
-		}
-
-		if(!prs_align(ps))
-			return False;
-	}
-
-	return True;
+	  DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -1930,42 +1204,8 @@ static BOOL srv_io_srv_file_info_3(const
 
 static BOOL srv_io_srv_file_ctr(const char *desc, SRV_FILE_INFO_CTR **pp_ctr, prs_struct *ps, int depth)
 {
-	SRV_FILE_INFO_CTR *ctr = *pp_ctr;
-
-	if (UNMARSHALLING(ps)) {
-		ctr = *pp_ctr = (SRV_FILE_INFO_CTR *)prs_alloc_mem(ps, sizeof(SRV_FILE_INFO_CTR));
-		if (ctr == NULL)
-			return False;
-	}
-
-	if (ctr == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "srv_io_srv_file_ctr");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_uint32("switch_value", ps, depth, &ctr->switch_value))
-		return False;
-	if(!prs_uint32("ptr_file_ctr", ps, depth, &ctr->ptr_file_ctr))
-		return False;
-
-	if (ctr->ptr_file_ctr != 0) {
-		switch (ctr->switch_value) {
-		case 3:
-			if(!srv_io_srv_file_info_3("", &ctr->file.info3, ps, depth))
-				return False;
-			break;
-		default:
-			DEBUG(5,("%s no file info at switch_value %d\n",
-			         tab_depth(depth), ctr->switch_value));
-			break;
-		}
-	}
-
-	return True;
+	  DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -1978,17 +1218,8 @@ void init_srv_q_net_file_enum(SRV_Q_NET_
 				uint32 preferred_len,
 				ENUM_HND *hnd)
 {
-	DEBUG(5,("init_q_net_file_enum\n"));
-
-	q_n->ctr = ctr;
-
-	init_buf_unistr2(&q_n->uni_srv_name, &q_n->ptr_srv_name, srv_name);
-	init_buf_unistr2(&q_n->uni_qual_name, &q_n->ptr_qual_name, qual_name);
-
-	q_n->file_level    = file_level;
-	q_n->preferred_len = preferred_len;
-
-	memcpy(&q_n->enum_hnd, hnd, sizeof(*hnd));
+	  DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -1997,46 +1228,8 @@ void init_srv_q_net_file_enum(SRV_Q_NET_
 
 BOOL srv_io_q_net_file_enum(const char *desc, SRV_Q_NET_FILE_ENUM *q_n, prs_struct *ps, int depth)
 {
-	if (q_n == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "srv_io_q_net_file_enum");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_uint32("ptr_srv_name", ps, depth, &q_n->ptr_srv_name))
-		return False;
-	if(!smb_io_unistr2("", &q_n->uni_srv_name, True, ps, depth))
-		return False;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_uint32("ptr_qual_name", ps, depth, &q_n->ptr_qual_name))
-		return False;
-	if(!smb_io_unistr2("", &q_n->uni_qual_name, q_n->ptr_qual_name, ps, depth))
-		return False;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_uint32("file_level", ps, depth, &q_n->file_level))
-		return False;
-
-	if (q_n->file_level != -1) {
-		if(!srv_io_srv_file_ctr("file_ctr", &q_n->ctr, ps, depth))
-			return False;
-	}
-
-	if(!prs_uint32("preferred_len", ps, depth, &q_n->preferred_len))
-		return False;
-
-	if(!smb_io_enum_hnd("enum_hnd", &q_n->enum_hnd, ps, depth))
-		return False;
-
-	return True;
+	  DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -2045,31 +1238,8 @@ BOOL srv_io_q_net_file_enum(const char *
 
 BOOL srv_io_r_net_file_enum(const char *desc, SRV_R_NET_FILE_ENUM *r_n, prs_struct *ps, int depth)
 {
-	if (r_n == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "srv_io_r_net_file_enum");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_uint32("file_level", ps, depth, &r_n->file_level))
-		return False;
-
-	if (r_n->file_level != 0) {
-		if(!srv_io_srv_file_ctr("file_ctr", &r_n->ctr, ps, depth))
-			return False;
-	}
-
-	if(!prs_uint32("total_entries", ps, depth, &r_n->total_entries))
-		return False;
-	if(!smb_io_enum_hnd("enum_hnd", &r_n->enum_hnd, ps, depth))
-		return False;
-	if(!prs_werror("status     ", ps, depth, &r_n->status))
-		return False;
-
-	return True;
+	  DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -2077,37 +1247,19 @@ BOOL srv_io_r_net_file_enum(const char *
  ********************************************************************/
 
 void init_srv_info_100(SRV_INFO_100 *sv100, uint32 platform_id, const char *name)
-{
-	DEBUG(5,("init_srv_info_100\n"));
-
-	sv100->platform_id  = platform_id;
-	init_buf_unistr2(&sv100->uni_name, &sv100->ptr_name, name);
-}
-
-/*******************************************************************
- Reads or writes a SRV_INFO_101 structure.
- ********************************************************************/
-
-static BOOL srv_io_info_100(const char *desc, SRV_INFO_100 *sv100, prs_struct *ps, int depth)
-{
-	if (sv100 == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "srv_io_info_100");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_uint32("platform_id ", ps, depth, &sv100->platform_id))
-		return False;
-	if(!prs_uint32("ptr_name    ", ps, depth, &sv100->ptr_name))
-		return False;
+{
+	  DEBUG(1,("function ommited\n"));
+	/* function omited*/
+}
 
-	if(!smb_io_unistr2("uni_name    ", &sv100->uni_name, True, ps, depth))
-		return False;
+/*******************************************************************
+ Reads or writes a SRV_INFO_101 structure.
+ ********************************************************************/
 
-	return True;
+static BOOL srv_io_info_100(const char *desc, SRV_INFO_100 *sv100, prs_struct *ps, int depth)
+{
+	  DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 
@@ -2178,24 +1330,8 @@ void init_srv_info_102(SRV_INFO_102 *sv1
 				uint32 announce, uint32 ann_delta, uint32 licenses,
 				const char *usr_path)
 {
-	DEBUG(5,("init_srv_info_102\n"));
-
-	sv102->platform_id  = platform_id;
-	init_buf_unistr2(&sv102->uni_name, &sv102->ptr_name, name);
-	sv102->ver_major    = ver_major;
-	sv102->ver_minor    = ver_minor;
-	sv102->srv_type     = srv_type;
-	init_buf_unistr2(&sv102->uni_comment, &sv102->ptr_comment, comment);
-
-	/* same as 101 up to here */
-
-	sv102->users        = users;
-	sv102->disc         = disc;
-	sv102->hidden       = hidden;
-	sv102->announce     = announce;
-	sv102->ann_delta    =ann_delta;
-	sv102->licenses     = licenses;
-	init_buf_unistr2(&sv102->uni_usr_path, &sv102->ptr_usr_path, usr_path);
+	  DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 
@@ -2205,57 +1341,8 @@ void init_srv_info_102(SRV_INFO_102 *sv1
 
 static BOOL srv_io_info_102(const char *desc, SRV_INFO_102 *sv102, prs_struct *ps, int depth)
 {
-	if (sv102 == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "srv_io_info102");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_uint32("platform_id ", ps, depth, &sv102->platform_id))
-		return False;
-	if(!prs_uint32("ptr_name    ", ps, depth, &sv102->ptr_name))
-		return False;
-	if(!prs_uint32("ver_major   ", ps, depth, &sv102->ver_major))
-		return False;
-	if(!prs_uint32("ver_minor   ", ps, depth, &sv102->ver_minor))
-		return False;
-	if(!prs_uint32("srv_type    ", ps, depth, &sv102->srv_type))
-		return False;
-	if(!prs_uint32("ptr_comment ", ps, depth, &sv102->ptr_comment))
-		return False;
-
-	/* same as 101 up to here */
-
-	if(!prs_uint32("users       ", ps, depth, &sv102->users))
-		return False;
-	if(!prs_uint32("disc        ", ps, depth, &sv102->disc))
-		return False;
-	if(!prs_uint32("hidden      ", ps, depth, &sv102->hidden))
-		return False;
-	if(!prs_uint32("announce    ", ps, depth, &sv102->announce))
-		return False;
-	if(!prs_uint32("ann_delta   ", ps, depth, &sv102->ann_delta))
-		return False;
-	if(!prs_uint32("licenses    ", ps, depth, &sv102->licenses))
-		return False;
-	if(!prs_uint32("ptr_usr_path", ps, depth, &sv102->ptr_usr_path))
-		return False;
-
-	if(!smb_io_unistr2("uni_name    ", &sv102->uni_name, True, ps, depth))
-		return False;
-	if(!prs_align(ps))
-		return False;
-	if(!smb_io_unistr2("uni_comment ", &sv102->uni_comment, True, ps, depth))
-		return False;
-	if(!prs_align(ps))
-		return False;
-	if(!smb_io_unistr2("uni_usr_path", &sv102->uni_usr_path, True, ps, depth))
-		return False;
-
-	return True;
+	  DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -2311,11 +1398,8 @@ static BOOL srv_io_info_ctr(const char *
 void init_srv_q_net_srv_get_info(SRV_Q_NET_SRV_GET_INFO *srv,
 				const char *server_name, uint32 switch_value)
 {
-	DEBUG(5,("init_srv_q_net_srv_get_info\n"));
-
-	init_buf_unistr2(&srv->uni_srv_name, &srv->ptr_srv_name, server_name);
-
-	srv->switch_value = switch_value;
+	  DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -2376,10 +1460,8 @@ void init_srv_r_net_srv_get_info(SRV_R_N
 void init_srv_r_net_srv_set_info(SRV_R_NET_SRV_SET_INFO *srv,
 				 uint32 switch_value, WERROR status)
 {
-	DEBUG(5,("init_srv_r_net_srv_set_info\n"));
-
-	srv->switch_value = switch_value;
-	srv->status = status;
+	  DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -2389,35 +1471,8 @@ void init_srv_r_net_srv_set_info(SRV_R_N
 BOOL srv_io_q_net_srv_set_info(const char *desc, SRV_Q_NET_SRV_SET_INFO *q_n, 
 			       prs_struct *ps, int depth)
 {
-	prs_debug(ps, depth, desc, "srv_io_q_net_srv_set_info");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_uint32("ptr_srv_name  ", ps, depth, &q_n->ptr_srv_name))
-		return False;
-	if(!smb_io_unistr2("", &q_n->uni_srv_name, True, ps, depth))
-		return False;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_uint32("switch_value  ", ps, depth, &q_n->switch_value))
-		return False;
-
-	if (UNMARSHALLING(ps)) {
-		q_n->ctr = (SRV_INFO_CTR *)
-			prs_alloc_mem(ps, sizeof(SRV_INFO_CTR));
-
-		if (!q_n->ctr)
-			return False;
-	}
-
-	if(!srv_io_info_ctr("ctr", q_n->ctr, ps, depth))
-		return False;
-
-	return True;
+	  DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -2635,53 +1690,8 @@ BOOL srv_io_q_net_disk_enum(const char *
 
 BOOL srv_io_r_net_disk_enum(const char *desc, SRV_R_NET_DISK_ENUM *r_n, prs_struct *ps, int depth)
 {
-	int i;
-
-	if (r_n == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "srv_io_r_net_disk_enum");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_uint32("entries_read", ps, depth, &r_n->disk_enum_ctr.entries_read))
-		return False;
-	if(!prs_uint32("ptr_disk_info", ps, depth, &r_n->disk_enum_ctr.disk_info_ptr))
-		return False;
-
-	/*this may be max, unknown, actual?*/
-
-	if(!prs_uint32("max_elements", ps, depth, &r_n->disk_enum_ctr.entries_read))
-		return False;
-	if(!prs_uint32("unknown", ps, depth, &r_n->disk_enum_ctr.unknown))
-		return False;
-	if(!prs_uint32("actual_elements", ps, depth, &r_n->disk_enum_ctr.entries_read))
-		return False;
-
-	for(i=0; i < r_n->disk_enum_ctr.entries_read; i++) {
-
-		if(!prs_uint32("unknown", ps, depth, &r_n->disk_enum_ctr.disk_info[i].unknown))
-			return False;
-   
-		if(!smb_io_unistr3("disk_name", &r_n->disk_enum_ctr.disk_info[i].disk_name, ps, depth))
-			return False;
-
-		if(!prs_align(ps))
-			return False;
-	}
-
-	if(!prs_uint32("total_entries", ps, depth, &r_n->total_entries))
-		return False;
-
-	if(!smb_io_enum_hnd("enum_hnd", &r_n->enum_hnd, ps, depth))
-		return False;
-
-	if(!prs_werror("status", ps, depth, &r_n->status))
-		return False;
-
-	return True;
+	  DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -2690,37 +1700,8 @@ BOOL srv_io_r_net_disk_enum(const char *
 
 BOOL srv_io_q_net_name_validate(const char *desc, SRV_Q_NET_NAME_VALIDATE *q_n, prs_struct *ps, int depth)
 {
-	if (q_n == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "srv_io_q_net_name_validate");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_uint32("ptr_srv_name", ps, depth, &q_n->ptr_srv_name))
-		return False;
-
-	if(!smb_io_unistr2("", &q_n->uni_srv_name, True, ps, depth))
-		return False;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!smb_io_unistr2("", &q_n->uni_name, True, ps, depth))
-		return False;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_uint32("type", ps, depth, &q_n->type))
-		return False;
-
-	if(!prs_uint32("flags", ps, depth, &q_n->flags))
-		return False;
-
-	return True;
+	  DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -2729,19 +1710,8 @@ BOOL srv_io_q_net_name_validate(const ch
 
 BOOL srv_io_r_net_name_validate(const char *desc, SRV_R_NET_NAME_VALIDATE *r_n, prs_struct *ps, int depth)
 {
-	if (r_n == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "srv_io_r_net_name_validate");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_werror("status", ps, depth, &r_n->status))
-		return False;
-
-	return True;
+	  DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -2750,46 +1720,8 @@ BOOL srv_io_r_net_name_validate(const ch
 
 BOOL srv_io_q_net_file_query_secdesc(const char *desc, SRV_Q_NET_FILE_QUERY_SECDESC *q_n, prs_struct *ps, int depth)
 {
-	if (q_n == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "srv_io_q_net_file_query_secdesc");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_uint32("ptr_srv_name", ps, depth, &q_n->ptr_srv_name))
-		return False;
-
-	if(!smb_io_unistr2("", &q_n->uni_srv_name, True, ps, depth))
-		return False;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_uint32("ptr_qual_name", ps, depth, &q_n->ptr_qual_name))
-		return False;
-
-	if(!smb_io_unistr2("", &q_n->uni_qual_name, True, ps, depth))
-		return False;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!smb_io_unistr2("", &q_n->uni_file_name, True, ps, depth))
-		return False;
-
-	if(!prs_uint32("unknown1", ps, depth, &q_n->unknown1))
-		return False;
-
-	if(!prs_uint32("unknown2", ps, depth, &q_n->unknown2))
-		return False;
-
-	if(!prs_uint32("unknown3", ps, depth, &q_n->unknown3))
-		return False;
-
-	return True;
+	  DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -2798,37 +1730,8 @@ BOOL srv_io_q_net_file_query_secdesc(con
 
 BOOL srv_io_r_net_file_query_secdesc(const char *desc, SRV_R_NET_FILE_QUERY_SECDESC *r_n, prs_struct *ps, int depth)
 {
-	if (r_n == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "srv_io_r_net_file_query_secdesc");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_uint32("ptr_response", ps, depth, &r_n->ptr_response))
-		return False;
-
-	if(!prs_uint32("size_response", ps, depth, &r_n->size_response))
-		return False;
-
-	if(!prs_uint32("ptr_secdesc", ps, depth, &r_n->ptr_secdesc))
-		return False;
-
-	if(!prs_uint32("size_secdesc", ps, depth, &r_n->size_secdesc))
-		return False;
-
-	if(!sec_io_desc("sec_desc", &r_n->sec_desc, ps, depth))
-		return False;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_werror("status", ps, depth, &r_n->status))
-		return False;
-
-	return True;
+	  DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -2837,55 +1740,8 @@ BOOL srv_io_r_net_file_query_secdesc(con
 
 BOOL srv_io_q_net_file_set_secdesc(const char *desc, SRV_Q_NET_FILE_SET_SECDESC *q_n, prs_struct *ps, int depth)
 {
-	if (q_n == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "srv_io_q_net_file_set_secdesc");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_uint32("ptr_srv_name", ps, depth, &q_n->ptr_srv_name))
-		return False;
-
-	if(!smb_io_unistr2("", &q_n->uni_srv_name, True, ps, depth))
-		return False;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_uint32("ptr_qual_name", ps, depth, &q_n->ptr_qual_name))
-		return False;
-
-	if(!smb_io_unistr2("", &q_n->uni_qual_name, True, ps, depth))
-		return False;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!smb_io_unistr2("", &q_n->uni_file_name, True, ps, depth))
-		return False;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_uint32("sec_info", ps, depth, &q_n->sec_info))
-		return False;
-
-	if(!prs_uint32("size_set", ps, depth, &q_n->size_set))
-		return False;
-
-	if(!prs_uint32("ptr_secdesc", ps, depth, &q_n->ptr_secdesc))
-		return False;
-
-	if(!prs_uint32("size_secdesc", ps, depth, &q_n->size_secdesc))
-		return False;
-
-	if(!sec_io_desc("sec_desc", &q_n->sec_desc, ps, depth))
-		return False;
-
-	return True;
+	  DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -2894,17 +1750,6 @@ BOOL srv_io_q_net_file_set_secdesc(const
 
 BOOL srv_io_r_net_file_set_secdesc(const char *desc, SRV_R_NET_FILE_SET_SECDESC *r_n, prs_struct *ps, int depth)
 {
-	if (r_n == NULL)
-		return False;
-
-	prs_debug(ps, depth, desc, "srv_io_r_net_file_set_secdesc");
-	depth++;
-
-	if(!prs_align(ps))
-		return False;
-
-	if(!prs_werror("status", ps, depth, &r_n->status))
-		return False;
-
-	return True;
+	  DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
diff -pruwN samba-2.2.12/source/rpc_parse/parse_wks.c samba-2.2.12-livebox/rpc_parse/parse_wks.c
--- samba-2.2.12/source/rpc_parse/parse_wks.c	2004-08-12 20:24:27.000000000 +0200
+++ samba-2.2.12-livebox/rpc_parse/parse_wks.c	2010-03-31 11:45:59.000000000 +0200
@@ -30,10 +30,8 @@
 void init_wks_q_query_info(WKS_Q_QUERY_INFO *q_u,
 				const char *server, uint16 switch_value)  
 {
-	DEBUG(5,("init_wks_q_query_info\n"));
-
-	init_buf_unistr2(&q_u->uni_srv_name, &q_u->ptr_srv_name, server);
-	q_u->switch_value = switch_value;
+	  DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
diff -pruwN samba-2.2.12/source/rpc_server/srv_lsa.c samba-2.2.12-livebox/rpc_server/srv_lsa.c
--- samba-2.2.12/source/rpc_server/srv_lsa.c	2004-08-12 20:24:26.000000000 +0200
+++ samba-2.2.12-livebox/rpc_server/srv_lsa.c	2010-03-31 11:45:59.000000000 +0200
@@ -32,29 +32,8 @@
 
 static BOOL api_lsa_open_policy2(pipes_struct *p)
 {
-	LSA_Q_OPEN_POL2 q_u;
-	LSA_R_OPEN_POL2 r_u;
-	prs_struct *data = &p->in_data.data;
-	prs_struct *rdata = &p->out_data.rdata;
-
-	ZERO_STRUCT(q_u);
-	ZERO_STRUCT(r_u);
-
-	/* grab the server, object attributes and desired access flag...*/
-	if(!lsa_io_q_open_pol2("", &q_u, data, 0)) {
-		DEBUG(0,("api_lsa_open_policy2: unable to unmarshall LSA_Q_OPEN_POL2.\n"));
-		return False;
-	}
-
-	r_u.status = _lsa_open_policy2(p, &q_u, &r_u);
-
-	/* store the response in the SMB stream */
-	if(!lsa_io_r_open_pol2("", &r_u, rdata, 0)) {
-		DEBUG(0,("api_lsa_open_policy2: unable to marshall LSA_R_OPEN_POL2.\n"));
-		return False;
-	}
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /***************************************************************************
@@ -63,29 +42,8 @@ api_lsa_open_policy
 
 static BOOL api_lsa_open_policy(pipes_struct *p)
 {
-	LSA_Q_OPEN_POL q_u;
-	LSA_R_OPEN_POL r_u;
-	prs_struct *data = &p->in_data.data;
-	prs_struct *rdata = &p->out_data.rdata;
-
-	ZERO_STRUCT(q_u);
-	ZERO_STRUCT(r_u);
-
-	/* grab the server, object attributes and desired access flag...*/
-	if(!lsa_io_q_open_pol("", &q_u, data, 0)) {
-		DEBUG(0,("api_lsa_open_policy: unable to unmarshall LSA_Q_OPEN_POL.\n"));
-		return False;
-	}
-
-	r_u.status = _lsa_open_policy(p, &q_u, &r_u);
-
-	/* store the response in the SMB stream */
-	if(!lsa_io_r_open_pol("", &r_u, rdata, 0)) {
-		DEBUG(0,("api_lsa_open_policy: unable to marshall LSA_R_OPEN_POL.\n"));
-		return False;
-	}
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /***************************************************************************
@@ -94,24 +52,8 @@ static BOOL api_lsa_open_policy(pipes_st
 
 static BOOL api_lsa_enum_trust_dom(pipes_struct *p)
 {
-	LSA_Q_ENUM_TRUST_DOM q_u;
-	LSA_R_ENUM_TRUST_DOM r_u;
-	prs_struct *data = &p->in_data.data;
-	prs_struct *rdata = &p->out_data.rdata;
-
-	ZERO_STRUCT(q_u);
-	ZERO_STRUCT(r_u);
-
-	/* grab the enum trust domain context etc. */
-	if(!lsa_io_q_enum_trust_dom("", &q_u, data, 0))
-		return False;
-
-	r_u.status = _lsa_enum_trust_dom(p, &q_u, &r_u);
-
-	if(!lsa_io_r_enum_trust_dom("", &r_u, rdata, 0))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /***************************************************************************
@@ -120,29 +62,8 @@ static BOOL api_lsa_enum_trust_dom(pipes
 
 static BOOL api_lsa_query_info(pipes_struct *p)
 {
-	LSA_Q_QUERY_INFO q_u;
-	LSA_R_QUERY_INFO r_u;
-	prs_struct *data = &p->in_data.data;
-	prs_struct *rdata = &p->out_data.rdata;
-
-	ZERO_STRUCT(q_u);
-	ZERO_STRUCT(r_u);
-
-	/* grab the info class and policy handle */
-	if(!lsa_io_q_query("", &q_u, data, 0)) {
-		DEBUG(0,("api_lsa_query_info: failed to unmarshall LSA_Q_QUERY_INFO.\n"));
-		return False;
-	}
-
-	r_u.status = _lsa_query_info(p, &q_u, &r_u);
-
-	/* store the response in the SMB stream */
-	if(!lsa_io_r_query("", &r_u, rdata, 0)) {
-		DEBUG(0,("api_lsa_query_info: failed to marshall LSA_R_QUERY_INFO.\n"));
-		return False;
-	}
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /***************************************************************************
@@ -151,28 +72,8 @@ static BOOL api_lsa_query_info(pipes_str
 
 static BOOL api_lsa_lookup_sids(pipes_struct *p)
 {
-	LSA_Q_LOOKUP_SIDS q_u;
-	LSA_R_LOOKUP_SIDS r_u;
-	prs_struct *data = &p->in_data.data;
-	prs_struct *rdata = &p->out_data.rdata;
-
-	ZERO_STRUCT(q_u);
-	ZERO_STRUCT(r_u);
-
-	/* grab the info class and policy handle */
-	if(!lsa_io_q_lookup_sids("", &q_u, data, 0)) {
-		DEBUG(0,("api_lsa_lookup_sids: failed to unmarshall LSA_Q_LOOKUP_SIDS.\n"));
-		return False;
-	}
-
-	r_u.status = _lsa_lookup_sids(p, &q_u, &r_u);
-
-	if(!lsa_io_r_lookup_sids("", &r_u, rdata, 0)) {
-		DEBUG(0,("api_lsa_lookup_sids: Failed to marshall LSA_R_LOOKUP_SIDS.\n"));
-		return False;
-	}
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /***************************************************************************
@@ -181,29 +82,8 @@ static BOOL api_lsa_lookup_sids(pipes_st
 
 static BOOL api_lsa_lookup_names(pipes_struct *p)
 {
-	LSA_Q_LOOKUP_NAMES q_u;
-	LSA_R_LOOKUP_NAMES r_u;
-	prs_struct *data = &p->in_data.data;
-	prs_struct *rdata = &p->out_data.rdata;
-
-	ZERO_STRUCT(q_u);
-	ZERO_STRUCT(r_u);
-
-	/* grab the info class and policy handle */
-	if(!lsa_io_q_lookup_names("", &q_u, data, 0)) {
-		DEBUG(0,("api_lsa_lookup_names: failed to unmarshall LSA_Q_LOOKUP_NAMES.\n"));
-		return False;
-	}
-
-	r_u.status = _lsa_lookup_names(p, &q_u, &r_u);
-
-	/* store the response in the SMB stream */
-	if(!lsa_io_r_lookup_names("", &r_u, rdata, 0)) {
-		DEBUG(0,("api_lsa_lookup_names: Failed to marshall LSA_R_LOOKUP_NAMES.\n"));
-		return False;
-	}
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /***************************************************************************
@@ -212,28 +92,8 @@ static BOOL api_lsa_lookup_names(pipes_s
 
 static BOOL api_lsa_close(pipes_struct *p)
 {
-	LSA_Q_CLOSE q_u;
-	LSA_R_CLOSE r_u;
-	prs_struct *data = &p->in_data.data;
-	prs_struct *rdata = &p->out_data.rdata;
-
-	ZERO_STRUCT(q_u);
-	ZERO_STRUCT(r_u);
-
-	if (!lsa_io_q_close("", &q_u, data, 0)) {
-		DEBUG(0,("api_lsa_close: lsa_io_q_close failed.\n"));
-		return False;
-	}
-
-	r_u.status = _lsa_close(p, &q_u, &r_u);
-
-	/* store the response in the SMB stream */
-	if (!lsa_io_r_close("", &r_u, rdata, 0)) {
-		DEBUG(0,("api_lsa_close: lsa_io_r_close failed.\n"));
-		return False;
-	}
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /***************************************************************************
@@ -242,28 +102,8 @@ static BOOL api_lsa_close(pipes_struct *
 
 static BOOL api_lsa_open_secret(pipes_struct *p)
 {
-	LSA_Q_OPEN_SECRET q_u;
-	LSA_R_OPEN_SECRET r_u;
-	prs_struct *data = &p->in_data.data;
-	prs_struct *rdata = &p->out_data.rdata;
-
-	ZERO_STRUCT(q_u);
-	ZERO_STRUCT(r_u);
-
-	if(!lsa_io_q_open_secret("", &q_u, data, 0)) {
-		DEBUG(0,("api_lsa_open_secret: failed to unmarshall LSA_Q_OPEN_SECRET.\n"));
-		return False;
-	}
-
-	r_u.status = _lsa_open_secret(p, &q_u, &r_u);
-
-	/* store the response in the SMB stream */
-	if(!lsa_io_r_open_secret("", &r_u, rdata, 0)) {
-		DEBUG(0,("api_lsa_open_secret: Failed to marshall LSA_R_OPEN_SECRET.\n"));
-		return False;
-	}
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /***************************************************************************
@@ -272,28 +112,8 @@ static BOOL api_lsa_open_secret(pipes_st
 
 static BOOL api_lsa_enum_privs(pipes_struct *p)
 {
-	LSA_Q_ENUM_PRIVS q_u;
-	LSA_R_ENUM_PRIVS r_u;
-	prs_struct *data = &p->in_data.data;
-	prs_struct *rdata = &p->out_data.rdata;
-
-	ZERO_STRUCT(q_u);
-	ZERO_STRUCT(r_u);
-
-	if(!lsa_io_q_enum_privs("", &q_u, data, 0)) {
-		DEBUG(0,("api_lsa_enum_privs: failed to unmarshall LSA_Q_ENUM_PRIVS.\n"));
-		return False;
-	}
-
-	r_u.status = _lsa_enum_privs(p, &q_u, &r_u);
-
-	/* store the response in the SMB stream */
-	if(!lsa_io_r_enum_privs("", &r_u, rdata, 0)) {
-		DEBUG(0,("api_lsa_enum_privs: Failed to marshall LSA_R_ENUM_PRIVS.\n"));
-		return False;
-	}
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /***************************************************************************
@@ -302,28 +122,8 @@ static BOOL api_lsa_enum_privs(pipes_str
 
 static BOOL api_lsa_priv_get_dispname(pipes_struct *p)
 {
-	LSA_Q_PRIV_GET_DISPNAME q_u;
-	LSA_R_PRIV_GET_DISPNAME r_u;
-	prs_struct *data = &p->in_data.data;
-	prs_struct *rdata = &p->out_data.rdata;
-
-	ZERO_STRUCT(q_u);
-	ZERO_STRUCT(r_u);
-
-	if(!lsa_io_q_priv_get_dispname("", &q_u, data, 0)) {
-		DEBUG(0,("api_lsa_priv_get_dispname: failed to unmarshall LSA_Q_PRIV_GET_DISPNAME.\n"));
-		return False;
-	}
-
-	r_u.status = _lsa_priv_get_dispname(p, &q_u, &r_u);
-
-	/* store the response in the SMB stream */
-	if(!lsa_io_r_priv_get_dispname("", &r_u, rdata, 0)) {
-		DEBUG(0,("api_lsa_priv_get_dispname: Failed to marshall LSA_R_PRIV_GET_DISPNAME.\n"));
-		return False;
-	}
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 #if 0
@@ -364,29 +164,8 @@ static BOOL api_lsa_enum_accounts(pipes_
 
 static BOOL api_lsa_unk_get_connuser(pipes_struct *p)
 {
-	LSA_Q_UNK_GET_CONNUSER q_u;
-	LSA_R_UNK_GET_CONNUSER r_u;
-	
-	prs_struct *data = &p->in_data.data;
-	prs_struct *rdata = &p->out_data.rdata;
-
-	ZERO_STRUCT(q_u);
-	ZERO_STRUCT(r_u);
-
-	if(!lsa_io_q_unk_get_connuser("", &q_u, data, 0)) {
-		DEBUG(0,("api_lsa_unk_get_connuser: failed to unmarshall LSA_Q_UNK_GET_CONNUSER.\n"));
-		return False;
-	}
-
-	r_u.status = _lsa_unk_get_connuser(p, &q_u, &r_u);
-
-	/* store the response in the SMB stream */
-	if(!lsa_io_r_unk_get_connuser("", &r_u, rdata, 0)) {
-		DEBUG(0,("api_lsa_unk_get_connuser: Failed to marshall LSA_R_UNK_GET_CONNUSER.\n"));
-		return False;
-	}
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /***************************************************************************
@@ -395,29 +174,8 @@ static BOOL api_lsa_unk_get_connuser(pip
 
 static BOOL api_lsa_open_account(pipes_struct *p)
 {
-	LSA_Q_OPENACCOUNT q_u;
-	LSA_R_OPENACCOUNT r_u;
-	
-	prs_struct *data = &p->in_data.data;
-	prs_struct *rdata = &p->out_data.rdata;
-
-	ZERO_STRUCT(q_u);
-	ZERO_STRUCT(r_u);
-
-	if(!lsa_io_q_open_account("", &q_u, data, 0)) {
-		DEBUG(0,("api_lsa_open_account: failed to unmarshall LSA_Q_OPENACCOUNT.\n"));
-		return False;
-	}
-
-	r_u.status = _lsa_open_account(p, &q_u, &r_u);
-
-	/* store the response in the SMB stream */
-	if(!lsa_io_r_open_account("", &r_u, rdata, 0)) {
-		DEBUG(0,("api_lsa_open_account: Failed to marshall LSA_R_OPENACCOUNT.\n"));
-		return False;
-	}
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 #if 0
@@ -459,29 +217,8 @@ static BOOL api_lsa_enum_privsaccount(pi
 
 static BOOL api_lsa_getsystemaccount(pipes_struct *p)
 {
-	LSA_Q_GETSYSTEMACCOUNT q_u;
-	LSA_R_GETSYSTEMACCOUNT r_u;
-	
-	prs_struct *data = &p->in_data.data;
-	prs_struct *rdata = &p->out_data.rdata;
-
-	ZERO_STRUCT(q_u);
-	ZERO_STRUCT(r_u);
-
-	if(!lsa_io_q_getsystemaccount("", &q_u, data, 0)) {
-		DEBUG(0,("api_lsa_getsystemaccount: failed to unmarshall LSA_Q_GETSYSTEMACCOUNT.\n"));
-		return False;
-	}
-
-	r_u.status = _lsa_getsystemaccount(p, &q_u, &r_u);
-
-	/* store the response in the SMB stream */
-	if(!lsa_io_r_getsystemaccount("", &r_u, rdata, 0)) {
-		DEBUG(0,("api_lsa_getsystemaccount: Failed to marshall LSA_R_GETSYSTEMACCOUNT.\n"));
-		return False;
-	}
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 
@@ -518,5 +255,6 @@ static struct api_struct api_lsa_cmds[]
  ***************************************************************************/
 BOOL api_ntlsa_rpc(pipes_struct *p)
 {
-	return api_rpcTNP(p, "api_ntlsa_rpc", api_lsa_cmds);
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
diff -pruwN samba-2.2.12/source/rpc_server/srv_lsa_nt.c samba-2.2.12-livebox/rpc_server/srv_lsa_nt.c
--- samba-2.2.12/source/rpc_server/srv_lsa_nt.c	2004-08-12 20:24:26.000000000 +0200
+++ samba-2.2.12-livebox/rpc_server/srv_lsa_nt.c	2010-03-31 11:45:59.000000000 +0200
@@ -49,9 +49,8 @@ struct lsa_info {
 
 static void free_lsa_info(void *ptr)
 {
-	struct lsa_info *lsa = (struct lsa_info *)ptr;
-
-	SAFE_FREE(lsa);
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /***************************************************************************
@@ -60,27 +59,8 @@ Init dom_query
 
 static void init_dom_query(DOM_QUERY *d_q, char *dom_name, DOM_SID *dom_sid)
 {
-	int domlen = (dom_name != NULL) ? strlen(dom_name) : 0;
-
-	/*
-	 * I'm not sure why this really odd combination of length
-	 * values works, but it does appear to. I need to look at
-	 * this *much* more closely - but at the moment leave alone
-	 * until it's understood. This allows a W2k client to join
-	 * a domain with both odd and even length names... JRA.
-	 */
-
-	d_q->uni_dom_str_len = domlen ? ((domlen + 1) * 2) : 0;
-	d_q->uni_dom_max_len = domlen * 2;
-	d_q->buffer_dom_name = domlen != 0 ? 1 : 0; /* domain buffer pointer */
-	d_q->buffer_dom_sid = dom_sid != NULL ? 1 : 0;  /* domain sid pointer */
-
-	/* this string is supposed to be character short */
-	init_unistr2(&d_q->uni_domain_name, dom_name, domlen);
-	d_q->uni_domain_name.uni_max_len++;
-
-	if (dom_sid != NULL)
-		init_dom_sid2(&d_q->dom_sid, dom_sid);
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /***************************************************************************
@@ -89,41 +69,8 @@ static void init_dom_query(DOM_QUERY *d_
 
 static int init_dom_ref(DOM_R_REF *ref, char *dom_name, DOM_SID *dom_sid)
 {
-	int num = 0;
-	int len;
-
-	if (dom_name != NULL) {
-		for (num = 0; num < ref->num_ref_doms_1; num++) {
-			fstring domname;
-			fstrcpy(domname, dos_unistr2_to_str(&ref->ref_dom[num].uni_dom_name));
-			if (strequal(domname, dom_name))
-				return num;
-		}
-	} else {
-		num = ref->num_ref_doms_1;
-	}
-
-	if (num >= MAX_REF_DOMAINS) {
-		/* index not found, already at maximum domain limit */
-		return -1;
-	}
-
-	ref->num_ref_doms_1 = num+1;
-	ref->ptr_ref_dom  = 1;
-	ref->max_entries = MAX_REF_DOMAINS;
-	ref->num_ref_doms_2 = num+1;
-
-	len = (dom_name != NULL) ? strlen(dom_name) : 0;
-	if(dom_name != NULL && len == 0)
-		len = 1;
-
-	init_uni_hdr(&ref->hdr_ref_dom[num].hdr_dom_name, len);
-	ref->hdr_ref_dom[num].ptr_dom_sid = dom_sid != NULL ? 1 : 0;
-
-	init_unistr2(&ref->ref_dom[num].uni_dom_name, dom_name, len);
-	init_dom_sid2(&ref->ref_dom[num].ref_dom, dom_sid );
-
-	return num;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /***************************************************************************
@@ -134,49 +81,8 @@ static void init_lsa_rid2s(DOM_R_REF *re
 				int num_entries, UNISTR2 *name,
 				uint32 *mapped_count, BOOL endian)
 {
-	int i;
-	int total = 0;
-	*mapped_count = 0;
-
-	SMB_ASSERT(num_entries <= MAX_LOOKUP_SIDS);
-
-	for (i = 0; i < num_entries; i++) {
-		BOOL status = False;
-		DOM_SID sid;
-		uint32 rid = 0xffffffff;
-		int dom_idx = -1;
-		pstring full_name;
-		fstring dom_name, user;
-		enum SID_NAME_USE name_type = SID_NAME_UNKNOWN;
-
-		/* Split name into domain and user component */
-
-		pstrcpy(full_name, dos_unistr2_to_str(&name[i]));
-		dos_to_unix(full_name); /* full name should be in unix charset. */
-		split_domain_name(full_name, dom_name, user);
-
-		/* Lookup name */
-
-		DEBUG(5, ("init_lsa_rid2s: looking up name %s\n", full_name));
-
-		status = lookup_name(full_name, &sid, &name_type);
-
-		DEBUG(5, ("init_lsa_rid2s: %s\n", status ? "found" : 
-			  "not found"));
-
-		if (status) {
-			sid_split_rid(&sid, &rid);
-			dom_idx = init_dom_ref(ref, dom_name, &sid);
-			(*mapped_count)++;
-		} else {
-			dom_idx = -1;
-			rid = 0xffffffff;
-			name_type = SID_NAME_UNKNOWN;
-		}
-
-		init_dom_rid2(&rid2[total], rid, name_type, dom_idx);
-		total++;
-	}
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /***************************************************************************
@@ -187,20 +93,8 @@ static void init_reply_lookup_names(LSA_
                 DOM_R_REF *ref, uint32 num_entries,
                 DOM_RID2 *rid2, uint32 mapped_count)
 {
-	r_l->ptr_dom_ref  = 1;
-	r_l->dom_ref      = ref;
-
-	r_l->num_entries  = num_entries;
-	r_l->ptr_entries  = 1;
-	r_l->num_entries2 = num_entries;
-	r_l->dom_rid      = rid2;
-
-	r_l->mapped_count = mapped_count;
-
-	if (mapped_count == 0)
-		r_l->status = NT_STATUS_NONE_MAPPED;
-	else
-		r_l->status = NT_STATUS_OK;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /***************************************************************************
@@ -211,77 +105,8 @@ static void init_lsa_trans_names(TALLOC_
 				 int num_entries, DOM_SID2 *sid,
 				 uint32 *mapped_count)
 {
-	int i;
-	int total = 0;
-	*mapped_count = 0;
-
-	/* Allocate memory for list of names */
-
-	if (num_entries > 0) {
-		if (!(trn->name = (LSA_TRANS_NAME *)talloc(ctx, sizeof(LSA_TRANS_NAME) *
-							  num_entries))) {
-			DEBUG(0, ("init_lsa_trans_names(): out of memory\n"));
-			return;
-		}
-
-		if (!(trn->uni_name = (UNISTR2 *)talloc(ctx, sizeof(UNISTR2) * 
-							num_entries))) {
-			DEBUG(0, ("init_lsa_trans_names(): out of memory\n"));
-			return;
-		}
-	}
-
-	for (i = 0; i < num_entries; i++) {
-		BOOL status = False;
-		DOM_SID find_sid = sid[i].sid;
-		uint32 rid = 0xffffffff;
-		int dom_idx = -1;
-		fstring name, dom_name;
-		enum SID_NAME_USE sid_name_use = (enum SID_NAME_USE)0;
-
-		sid_to_string(name, &find_sid);
-		DEBUG(5, ("init_lsa_trans_names: looking up sid %s\n", name));
-
-		/* Lookup sid from winbindd */
-
-		memset(dom_name, '\0', sizeof(dom_name));
-		memset(name, '\0', sizeof(name));
-
-		status = lookup_sid(&find_sid, dom_name, name, &sid_name_use);
-
-		DEBUG(5, ("init_lsa_trans_names: %s\n", status ? "found" : 
-			  "not found"));
-
-		if (!status) {
-			sid_name_use = SID_NAME_UNKNOWN;
-		}
-
-		/* Store domain sid in ref array */
-
-		if (find_sid.num_auths == 5) {
-			sid_split_rid(&find_sid, &rid);
-		}
-
-		/* unistr routines take dos codepage strings */
-
-		unix_to_dos(dom_name);
-		unix_to_dos(name);
-
-		dom_idx = init_dom_ref(ref, dom_name, &find_sid);
-
-		DEBUG(10,("init_lsa_trans_names: added user '%s\\%s' to "
-			  "referenced list.\n", dom_name, name ));
-
-		(*mapped_count)++;
-
-		init_lsa_trans_name(&trn->name[total], &trn->uni_name[total],
-					sid_name_use, name, dom_idx);
-		total++;
-	}
-
-	trn->num_entries = total;
-	trn->ptr_trans_names = 1;
-	trn->num_entries2 = total;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /***************************************************************************
@@ -292,15 +117,8 @@ static void init_reply_lookup_sids(LSA_R
                 DOM_R_REF *ref, LSA_TRANS_NAME_ENUM *names,
                 uint32 mapped_count)
 {
-	r_l->ptr_dom_ref  = 1;
-	r_l->dom_ref      = ref;
-	r_l->names        = names;
-	r_l->mapped_count = mapped_count;
-
-	if (mapped_count == 0)
-		r_l->status = NT_STATUS_NONE_MAPPED;
-	else
-		r_l->status = NT_STATUS_OK;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /***************************************************************************
@@ -309,13 +127,8 @@ static void init_reply_lookup_sids(LSA_R
 
 NTSTATUS _lsa_open_policy2(pipes_struct *p, LSA_Q_OPEN_POL2 *q_u, LSA_R_OPEN_POL2 *r_u)
 {
-	/* lkclXXXX having decoded it, ignore all fields in the open policy! */
-
-	/* set up the LSA QUERY INFO response */
-	if (!create_policy_hnd(p, &r_u->pol, NULL, NULL))
-		return NT_STATUS_OBJECT_NAME_NOT_FOUND;
-
-	return NT_STATUS_OK;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /***************************************************************************
@@ -324,13 +137,8 @@ NTSTATUS _lsa_open_policy2(pipes_struct
 
 NTSTATUS _lsa_open_policy(pipes_struct *p, LSA_Q_OPEN_POL *q_u, LSA_R_OPEN_POL *r_u)
 {
-	/* lkclXXXX having decoded it, ignore all fields in the open policy! */
-
-	/* set up the LSA QUERY INFO response */
-	if (!create_policy_hnd(p, &r_u->pol, NULL, NULL))
-		return NT_STATUS_OBJECT_NAME_NOT_FOUND;
-
-	return NT_STATUS_OK;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /***************************************************************************
@@ -339,18 +147,8 @@ NTSTATUS _lsa_open_policy(pipes_struct *
 
 NTSTATUS _lsa_enum_trust_dom(pipes_struct *p, LSA_Q_ENUM_TRUST_DOM *q_u, LSA_R_ENUM_TRUST_DOM *r_u)
 {
-	uint32 enum_context = 0;
-	char *dom_name = NULL;
-	DOM_SID *dom_sid = NULL;
-
-	if (!find_policy_by_hnd(p, &q_u->pol, NULL))
-		return NT_STATUS_INVALID_HANDLE;
-
-	/* set up the LSA QUERY INFO response */
-	init_r_enum_trust_dom(p->mem_ctx, r_u, enum_context, dom_name, dom_sid,
-	      dom_name != NULL ? NT_STATUS_OK : NT_STATUS_NO_MORE_ENTRIES);
-
-	return r_u->status;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /***************************************************************************
@@ -359,115 +157,8 @@ NTSTATUS _lsa_enum_trust_dom(pipes_struc
 
 NTSTATUS _lsa_query_info(pipes_struct *p, LSA_Q_QUERY_INFO *q_u, LSA_R_QUERY_INFO *r_u)
 {
-	LSA_INFO_UNION *info = &r_u->dom;
-	DOM_SID domain_sid;
-	fstring dos_domain;
-	fstring dos_myname;
-	char *name = NULL;
-	DOM_SID *sid = NULL;
-
-	r_u->status = NT_STATUS_OK;
-
-	if (!find_policy_by_hnd(p, &q_u->pol, NULL))
-		return NT_STATUS_INVALID_HANDLE;
-
-	fstrcpy(dos_myname, global_myname);
-	unix_to_dos(dos_myname);
-
-	fstrcpy(dos_domain, global_myworkgroup);
-	unix_to_dos(dos_domain);
-
-	switch (q_u->info_class) {
-	case 0x02:
-		{
-			unsigned int i;
-			/* fake info: We audit everything. ;) */
-			info->id2.auditing_enabled = 1;
-			info->id2.count1 = 7;
-			info->id2.count2 = 7;
-			if ((info->id2.auditsettings = (uint32 *)talloc(p->mem_ctx,7*sizeof(uint32))) == NULL)
-				return NT_STATUS_NO_MEMORY;
-			for (i = 0; i < 7; i++)
-				info->id2.auditsettings[i] = 3;
-			break;
-		}
-	case 0x03:
-		/* Request PolicyPrimaryDomainInformation. */
-		switch (lp_server_role()) {
-			case ROLE_DOMAIN_PDC:
-			case ROLE_DOMAIN_BDC:
-				name = dos_domain;
-				sid = &global_sam_sid;
-				break;
-			case ROLE_DOMAIN_MEMBER:
-				name = dos_domain;
-				/* We need to return the Domain SID here. */
-				if (secrets_fetch_domain_sid(dos_domain,
-							     &domain_sid))
-					sid = &domain_sid;
-				else
-					return NT_STATUS_CANT_ACCESS_DOMAIN_INFO;
-				break;
-			case ROLE_STANDALONE:
-				name = dos_domain;
-				sid = NULL;
-				break;
-			default:
-				return NT_STATUS_CANT_ACCESS_DOMAIN_INFO;
-		}
-		init_dom_query(&r_u->dom.id3, name, sid);
-		break;
-	case 0x05:
-		/* Request PolicyAccountDomainInformation. */
-		switch (lp_server_role()) {
-			case ROLE_DOMAIN_PDC:
-			case ROLE_DOMAIN_BDC:
-				name = dos_domain;
-				sid = &global_sam_sid;
-				break;
-			case ROLE_DOMAIN_MEMBER:
-				name = dos_myname;
-				sid = &global_sam_sid;
-				break;
-			case ROLE_STANDALONE:
-				name = dos_myname;
-				sid = &global_sam_sid;
-				break;
-			default:
-				return NT_STATUS_CANT_ACCESS_DOMAIN_INFO;
-		}
-		init_dom_query(&r_u->dom.id5, name, sid);
-		break;
-	case 0x06:
-		switch (lp_server_role()) {
-			case ROLE_DOMAIN_BDC:
-				/*
-				 * only a BDC is a backup controller
-				 * of the domain, it controls.
-				 */
-				info->id6.server_role = 2;
-				break;
-			default:
-				/*
-				 * any other role is a primary
-				 * of the domain, it controls.
-				 */
-				info->id6.server_role = 3;
-				break; 
-		}
-		break;
-	default:
-		DEBUG(0,("_lsa_query_info: unknown info level in Lsa Query: %d\n", q_u->info_class));
-		r_u->status = NT_STATUS_INVALID_INFO_CLASS;
-		break;
-	}
-
-	if (NT_STATUS_IS_OK(r_u->status)) {
-		r_u->undoc_buffer = 0x22000000; /* bizarre */
-		r_u->info_class = q_u->info_class;
-	}
-
-	return r_u->status;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /***************************************************************************
@@ -476,26 +167,8 @@ NTSTATUS _lsa_query_info(pipes_struct *p
 
 NTSTATUS _lsa_lookup_sids(pipes_struct *p, LSA_Q_LOOKUP_SIDS *q_u, LSA_R_LOOKUP_SIDS *r_u)
 {
-	DOM_SID2 *sid = q_u->sids.sid;
-	int num_entries = q_u->sids.num_entries;
-	DOM_R_REF *ref = NULL;
-	LSA_TRANS_NAME_ENUM *names = NULL;
-	uint32 mapped_count = 0;
-
-	ref = (DOM_R_REF *)talloc_zero(p->mem_ctx, sizeof(DOM_R_REF));
-	names = (LSA_TRANS_NAME_ENUM *)talloc_zero(p->mem_ctx, sizeof(LSA_TRANS_NAME_ENUM));
-
-	if (!find_policy_by_hnd(p, &q_u->pol, NULL))
-		r_u->status = NT_STATUS_INVALID_HANDLE;
-
-	if ((!ref || !names) && NT_STATUS_IS_OK(r_u->status))
-		r_u->status = NT_STATUS_NO_MEMORY;
-
-	/* set up the LSA Lookup SIDs response */
-	init_lsa_trans_names(p->mem_ctx, ref, names, num_entries, sid, &mapped_count);
-	init_reply_lookup_sids(r_u, ref, names, mapped_count);
-
-	return r_u->status;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /***************************************************************************
@@ -504,26 +177,8 @@ lsa_reply_lookup_names
 
 NTSTATUS _lsa_lookup_names(pipes_struct *p,LSA_Q_LOOKUP_NAMES *q_u, LSA_R_LOOKUP_NAMES *r_u)
 {
-	UNISTR2 *names = q_u->uni_name;
-	int num_entries = q_u->num_entries;
-	DOM_R_REF *ref;
-	DOM_RID2 *rids;
-	uint32 mapped_count = 0;
-
-	ref = (DOM_R_REF *)talloc_zero(p->mem_ctx, sizeof(DOM_R_REF));
-	rids = (DOM_RID2 *)talloc_zero(p->mem_ctx, sizeof(DOM_RID2)*MAX_LOOKUP_SIDS);
-
-	if (!find_policy_by_hnd(p, &q_u->pol, NULL))
-		r_u->status = NT_STATUS_INVALID_HANDLE;
-
-	if ((!ref || !rids) && NT_STATUS_IS_OK(r_u->status))
-		r_u->status = NT_STATUS_NO_MEMORY;
-
-	/* set up the LSA Lookup RIDs response */
-	init_lsa_rid2s(ref, rids, num_entries, names, &mapped_count, p->endian);
-	init_reply_lookup_names(r_u, ref, num_entries, rids, mapped_count);
-
-	return r_u->status;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /***************************************************************************
@@ -532,11 +187,8 @@ NTSTATUS _lsa_lookup_names(pipes_struct
 
 NTSTATUS _lsa_close(pipes_struct *p, LSA_Q_CLOSE *q_u, LSA_R_CLOSE *r_u)
 {
-	if (!find_policy_by_hnd(p, &q_u->pol, NULL))
-		return NT_STATUS_INVALID_HANDLE;
-
-	close_policy_hnd(p, &q_u->pol);
-	return NT_STATUS_OK;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /***************************************************************************
@@ -545,7 +197,8 @@ NTSTATUS _lsa_close(pipes_struct *p, LSA
 
 NTSTATUS _lsa_open_secret(pipes_struct *p, LSA_Q_OPEN_SECRET *q_u, LSA_R_OPEN_SECRET *r_u)
 {
-	return NT_STATUS_OBJECT_NAME_NOT_FOUND;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /***************************************************************************
@@ -554,33 +207,8 @@ _lsa_enum_privs.
 
 NTSTATUS _lsa_enum_privs(pipes_struct *p, LSA_Q_ENUM_PRIVS *q_u, LSA_R_ENUM_PRIVS *r_u)
 {
-	uint32 i;
-
-	uint32 enum_context=q_u->enum_context;
-	LSA_PRIV_ENTRY *entry;
-	LSA_PRIV_ENTRY *entries;
-
-	if (!find_policy_by_hnd(p, &q_u->pol, NULL))
-		return NT_STATUS_INVALID_HANDLE;
-
-	if (enum_context >= PRIV_ALL_INDEX)
-		return NT_STATUS_UNABLE_TO_FREE_VM;
-
-	entries = (LSA_PRIV_ENTRY *)talloc_zero(p->mem_ctx, sizeof(LSA_PRIV_ENTRY) * (PRIV_ALL_INDEX-enum_context));
-	if (entries==NULL)
-		return NT_STATUS_NO_MEMORY;
-
-	entry = entries;
-	for (i = 0; i < PRIV_ALL_INDEX-enum_context; i++, entry++) {
-		init_uni_hdr(&entry->hdr_name, strlen(privs[i+1-enum_context].priv));
-		init_unistr2(&entry->name, privs[i+1-enum_context].priv, strlen(privs[i+1-enum_context].priv) );
-		entry->luid_low = privs[i+1-enum_context].se_priv;
-		entry->luid_high = 1;
-	}
-
-	init_lsa_r_enum_privs(r_u, i+enum_context, PRIV_ALL_INDEX-enum_context, entries);
-
-	return NT_STATUS_OK;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /***************************************************************************
@@ -589,63 +217,14 @@ _lsa_priv_get_dispname.
 
 NTSTATUS _lsa_priv_get_dispname(pipes_struct *p, LSA_Q_PRIV_GET_DISPNAME *q_u, LSA_R_PRIV_GET_DISPNAME *r_u)
 {
-	fstring name_asc;
-	fstring desc_asc;
-	int i;
-
-	if (!find_policy_by_hnd(p, &q_u->pol, NULL))
-		return NT_STATUS_INVALID_HANDLE;
-
-	unistr2_to_dos(name_asc, &q_u->name, sizeof(name_asc));
-
-	DEBUG(0,("_lsa_priv_get_dispname: %s", name_asc));
-
-	for (i=1; privs[i].se_priv!=SE_PRIV_ALL; i++) {
-		if ( strcmp(name_asc, privs[i].priv)) {
-			
-			fstrcpy(desc_asc, privs[i].description);
-		
-		}
-	}
-	DEBUG(0,(": %s\n", desc_asc));
-
-	init_uni_hdr(&r_u->hdr_desc, strlen(desc_asc));
-	init_unistr2(&r_u->desc, desc_asc, strlen(desc_asc) );
-
-	r_u->ptr_info=0xdeadbeef;
-	r_u->lang_id=q_u->lang_id;
-
-	return NT_STATUS_OK;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 NTSTATUS _lsa_unk_get_connuser(pipes_struct *p, LSA_Q_UNK_GET_CONNUSER *q_u, LSA_R_UNK_GET_CONNUSER *r_u)
 {
-  fstring username, domname;
-  int ulen, dlen;
-  user_struct *vuser = get_valid_user_struct(p->vuid);
-  
-  if (vuser == NULL)
-    return NT_STATUS_CANT_ACCESS_DOMAIN_INFO;
-  
-  fstrcpy(username, vuser->user.smb_name);
-  fstrcpy(domname, vuser->user.domain);
-  
-  ulen = strlen(username) + 1;
-  dlen = strlen(domname) + 1;
-  
-  init_uni_hdr(&r_u->hdr_user_name, ulen);
-  r_u->ptr_user_name = 1;
-  init_unistr2(&r_u->uni2_user_name, username, ulen);
-
-  r_u->unk1 = 1;
-  
-  init_uni_hdr(&r_u->hdr_dom_name, dlen);
-  r_u->ptr_dom_name = 1;
-  init_unistr2(&r_u->uni2_dom_name, domname, dlen);
-
-  r_u->status = NT_STATUS_OK;
-  
-  return r_u->status;
+DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /***************************************************************************
@@ -654,27 +233,8 @@ NTSTATUS _lsa_unk_get_connuser(pipes_str
 
 NTSTATUS _lsa_open_account(pipes_struct *p, LSA_Q_OPENACCOUNT *q_u, LSA_R_OPENACCOUNT *r_u)
 {
-	struct lsa_info *info;
-
-	r_u->status = NT_STATUS_OK;
-
-	/* find the connection policy handle. */
-	if (!find_policy_by_hnd(p, &q_u->pol, NULL))
-		return NT_STATUS_INVALID_HANDLE;
-
-	/* associate the user/group SID with the (unique) handle. */
-	if ((info = (struct lsa_info *)malloc(sizeof(struct lsa_info))) == NULL)
-		return NT_STATUS_NO_MEMORY;
-
-	ZERO_STRUCTP(info);
-	info->sid = q_u->sid.sid;
-	info->access = q_u->access;
-
-	/* get a (unique) handle.  open a policy on it. */
-	if (!create_policy_hnd(p, &r_u->pol, free_lsa_info, (void *)info))
-		return NT_STATUS_OBJECT_NAME_NOT_FOUND;
-
-	return r_u->status;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /***************************************************************************
@@ -683,13 +243,6 @@ NTSTATUS _lsa_open_account(pipes_struct
 
 NTSTATUS _lsa_getsystemaccount(pipes_struct *p, LSA_Q_GETSYSTEMACCOUNT *q_u, LSA_R_GETSYSTEMACCOUNT *r_u)
 {
-	r_u->status = NT_STATUS_OK;
-
-	/* find the connection policy handle. */
-	if (!find_policy_by_hnd(p, &q_u->pol, NULL))
-		return NT_STATUS_INVALID_HANDLE;
-
-	r_u->access=3;
-
-	return r_u->status;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
diff -pruwN samba-2.2.12/source/rpc_server/srv_netlog.c samba-2.2.12-livebox/rpc_server/srv_netlog.c
--- samba-2.2.12/source/rpc_server/srv_netlog.c	2004-08-12 20:24:27.000000000 +0200
+++ samba-2.2.12-livebox/rpc_server/srv_netlog.c	2010-03-31 11:45:59.000000000 +0200
@@ -32,29 +32,8 @@
 
 static BOOL api_net_req_chal(pipes_struct *p)
 {
-	NET_Q_REQ_CHAL q_u;
-	NET_R_REQ_CHAL r_u;
-	prs_struct *data = &p->in_data.data;
-	prs_struct *rdata = &p->out_data.rdata;
-
-	ZERO_STRUCT(q_u);
-	ZERO_STRUCT(r_u);
-
-	/* grab the challenge... */
-	if(!net_io_q_req_chal("", &q_u, data, 0)) {
-		DEBUG(0,("api_net_req_chal: Failed to unmarshall NET_Q_REQ_CHAL.\n"));
-		return False;
-	}
-
-	r_u.status = _net_req_chal(p, &q_u, &r_u);
-
-	/* store the response in the SMB stream */
-	if(!net_io_r_req_chal("", &r_u, rdata, 0)) {
-		DEBUG(0,("api_net_req_chal: Failed to marshall NET_R_REQ_CHAL.\n"));
-		return False;
-	}
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*************************************************************************
@@ -63,29 +42,8 @@ static BOOL api_net_req_chal(pipes_struc
 
 static BOOL api_net_auth(pipes_struct *p)
 {
-	NET_Q_AUTH q_u;
-	NET_R_AUTH r_u;
-	prs_struct *data = &p->in_data.data;
-	prs_struct *rdata = &p->out_data.rdata;
-
-	ZERO_STRUCT(q_u);
-	ZERO_STRUCT(r_u);
-
-	/* grab the challenge... */
-	if(!net_io_q_auth("", &q_u, data, 0)) {
-		DEBUG(0,("api_net_auth: Failed to unmarshall NET_Q_AUTH.\n"));
-		return False;
-	}
-
-	r_u.status = _net_auth(p, &q_u, &r_u);
-
-	/* store the response in the SMB stream */
-	if(!net_io_r_auth("", &r_u, rdata, 0)) {
-		DEBUG(0,("api_net_auth: Failed to marshall NET_R_AUTH.\n"));
-		return False;
-	}
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*************************************************************************
@@ -94,29 +52,8 @@ static BOOL api_net_auth(pipes_struct *p
 
 static BOOL api_net_auth_2(pipes_struct *p)
 {
-	NET_Q_AUTH_2 q_u;
-	NET_R_AUTH_2 r_u;
-	prs_struct *data = &p->in_data.data;
-	prs_struct *rdata = &p->out_data.rdata;
-
-	ZERO_STRUCT(q_u);
-	ZERO_STRUCT(r_u);
-
-	/* grab the challenge... */
-	if(!net_io_q_auth_2("", &q_u, data, 0)) {
-		DEBUG(0,("api_net_auth_2: Failed to unmarshall NET_Q_AUTH_2.\n"));
-		return False;
-	}
-
-	r_u.status = _net_auth_2(p, &q_u, &r_u);
-
-	/* store the response in the SMB stream */
-	if(!net_io_r_auth_2("", &r_u, rdata, 0)) {
-		DEBUG(0,("api_net_auth_2: Failed to marshall NET_R_AUTH_2.\n"));
-		return False;
-	}
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*************************************************************************
@@ -125,29 +62,8 @@ static BOOL api_net_auth_2(pipes_struct
 
 static BOOL api_net_srv_pwset(pipes_struct *p)
 {
-	NET_Q_SRV_PWSET q_u;
-	NET_R_SRV_PWSET r_u;
-	prs_struct *data = &p->in_data.data;
-	prs_struct *rdata = &p->out_data.rdata;
-
-	ZERO_STRUCT(q_u);
-	ZERO_STRUCT(r_u);
-
-	/* grab the challenge and encrypted password ... */
-	if(!net_io_q_srv_pwset("", &q_u, data, 0)) {
-		DEBUG(0,("api_net_srv_pwset: Failed to unmarshall NET_Q_SRV_PWSET.\n"));
-		return False;
-	}
-
-	r_u.status = _net_srv_pwset(p, &q_u, &r_u);
-
-	/* store the response in the SMB stream */
-	if(!net_io_r_srv_pwset("", &r_u, rdata, 0)) {
-		DEBUG(0,("api_net_srv_pwset: Failed to marshall NET_R_SRV_PWSET.\n"));
-		return False;
-	}
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*************************************************************************
@@ -156,28 +72,8 @@ static BOOL api_net_srv_pwset(pipes_stru
 
 static BOOL api_net_sam_logoff(pipes_struct *p)
 {
-	NET_Q_SAM_LOGOFF q_u;
-	NET_R_SAM_LOGOFF r_u;
-	prs_struct *data = &p->in_data.data;
-	prs_struct *rdata = &p->out_data.rdata;
-
-	ZERO_STRUCT(q_u);
-	ZERO_STRUCT(r_u);
-
-	if(!net_io_q_sam_logoff("", &q_u, data, 0)) {
-		DEBUG(0,("api_net_sam_logoff: Failed to unmarshall NET_Q_SAM_LOGOFF.\n"));
-		return False;
-	}
-
-	r_u.status = _net_sam_logoff(p, &q_u, &r_u);
-
-	/* store the response in the SMB stream */
-	if(!net_io_r_sam_logoff("", &r_u, rdata, 0)) {
-		DEBUG(0,("api_net_sam_logoff: Failed to marshall NET_R_SAM_LOGOFF.\n"));
-		return False;
-	}
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*************************************************************************
@@ -186,28 +82,8 @@ static BOOL api_net_sam_logoff(pipes_str
 
 static BOOL api_net_sam_logon(pipes_struct *p)
 {
-	NET_Q_SAM_LOGON q_u;
-	NET_R_SAM_LOGON r_u;
-	prs_struct *data = &p->in_data.data;
-	prs_struct *rdata = &p->out_data.rdata;
-    
-	ZERO_STRUCT(q_u);
-	ZERO_STRUCT(r_u);
-
-    if(!net_io_q_sam_logon("", &q_u, data, 0)) {
-        DEBUG(0, ("api_net_sam_logon: Failed to unmarshall NET_Q_SAM_LOGON.\n"));
-        return False;
-    }
-   
-	r_u.status = _net_sam_logon(p, &q_u, &r_u);
-
-	/* store the response in the SMB stream */
-	if(!net_io_r_sam_logon("", &r_u, rdata, 0)) {
-		DEBUG(0,("api_net_sam_logon: Failed to marshall NET_R_SAM_LOGON.\n"));
-		return False;
-	}
-
-    return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*************************************************************************
@@ -216,34 +92,8 @@ static BOOL api_net_sam_logon(pipes_stru
 
 static BOOL api_net_trust_dom_list(pipes_struct *p)
 {
-	NET_Q_TRUST_DOM_LIST q_u;
-	NET_R_TRUST_DOM_LIST r_u;
-	prs_struct *data = &p->in_data.data;
-	prs_struct *rdata = &p->out_data.rdata;
-
-	ZERO_STRUCT(q_u);
-	ZERO_STRUCT(r_u);
-
-	DEBUG(6,("api_net_trust_dom_list: %d\n", __LINE__));
-
-	/* grab the lsa trusted domain list query... */
-	if(!net_io_q_trust_dom("", &q_u, data, 0)) {
-		DEBUG(0,("api_net_trust_dom_list: Failed to unmarshall NET_Q_TRUST_DOM_LIST.\n"));
-		return False;
-	}
-
-	/* construct reply. */
-	r_u.status = _net_trust_dom_list(p, &q_u, &r_u);
-
-	/* store the response in the SMB stream */
-	if(!net_io_r_trust_dom("", &r_u, rdata, 0)) {
-		DEBUG(0,("net_reply_trust_dom_list: Failed to marshall NET_R_TRUST_DOM_LIST.\n"));
-		return False;
-	}
-
-	DEBUG(6,("api_net_trust_dom_list: %d\n", __LINE__));
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*************************************************************************
@@ -252,32 +102,8 @@ static BOOL api_net_trust_dom_list(pipes
 
 static BOOL api_net_logon_ctrl2(pipes_struct *p)
 {
-	NET_Q_LOGON_CTRL2 q_u;
-	NET_R_LOGON_CTRL2 r_u;
-	prs_struct *data = &p->in_data.data;
-	prs_struct *rdata = &p->out_data.rdata;
-
-	ZERO_STRUCT(q_u);
-	ZERO_STRUCT(r_u);
-
-	DEBUG(6,("api_net_logon_ctrl2: %d\n", __LINE__));
-
-	/* grab the lsa netlogon ctrl2 query... */
-	if(!net_io_q_logon_ctrl2("", &q_u, data, 0)) {
-		DEBUG(0,("api_net_logon_ctrl2: Failed to unmarshall NET_Q_LOGON_CTRL2.\n"));
-		return False;
-	}
-
-	r_u.status = _net_logon_ctrl2(p, &q_u, &r_u);
-
-	if(!net_io_r_logon_ctrl2("", &r_u, rdata, 0)) {
-		DEBUG(0,("net_reply_logon_ctrl2: Failed to marshall NET_R_LOGON_CTRL2.\n"));
-		return False;
-	}
-
-	DEBUG(6,("api_net_logon_ctrl2: %d\n", __LINE__));
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*************************************************************************
@@ -286,32 +112,8 @@ static BOOL api_net_logon_ctrl2(pipes_st
 
 static BOOL api_net_logon_ctrl(pipes_struct *p)
 {
-	NET_Q_LOGON_CTRL q_u;
-	NET_R_LOGON_CTRL r_u;
-	prs_struct *data = &p->in_data.data;
-	prs_struct *rdata = &p->out_data.rdata;
-
-	ZERO_STRUCT(q_u);
-	ZERO_STRUCT(r_u);
-
-	DEBUG(6,("api_net_logon_ctrl: %d\n", __LINE__));
-
-	/* grab the lsa netlogon ctrl query... */
-	if(!net_io_q_logon_ctrl("", &q_u, data, 0)) {
-		DEBUG(0,("api_net_logon_ctrl: Failed to unmarshall NET_Q_LOGON_CTRL.\n"));
-		return False;
-	}
-
-	r_u.status = _net_logon_ctrl(p, &q_u, &r_u);
-
-	if(!net_io_r_logon_ctrl("", &r_u, rdata, 0)) {
-		DEBUG(0,("net_reply_logon_ctrl2: Failed to marshall NET_R_LOGON_CTRL2.\n"));
-		return False;
-	}
-
-	DEBUG(6,("api_net_logon_ctrl2: %d\n", __LINE__));
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -337,5 +139,6 @@ static struct api_struct api_net_cmds []
 
 BOOL api_netlog_rpc(pipes_struct *p)
 {
-	return api_rpcTNP(p, "api_netlog_rpc", api_net_cmds);
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
diff -pruwN samba-2.2.12/source/rpc_server/srv_netlog_nt.c samba-2.2.12-livebox/rpc_server/srv_netlog_nt.c
--- samba-2.2.12/source/rpc_server/srv_netlog_nt.c	2004-08-12 20:24:27.000000000 +0200
+++ samba-2.2.12-livebox/rpc_server/srv_netlog_nt.c	2010-03-31 11:45:59.000000000 +0200
@@ -39,9 +39,8 @@ extern DOM_SID global_sam_sid;
 static void init_net_r_req_chal(NET_R_REQ_CHAL *r_c,
                                 DOM_CHAL *srv_chal, NTSTATUS status)
 {
-	DEBUG(6,("init_net_r_req_chal: %d\n", __LINE__));
-	memcpy(r_c->srv_chal.data, srv_chal->data, sizeof(srv_chal->data));
-	r_c->status = status;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*************************************************************************
@@ -64,15 +63,8 @@ static void init_net_r_req_chal(NET_R_RE
 NTSTATUS _net_logon_ctrl(pipes_struct *p, NET_Q_LOGON_CTRL *q_u, 
 		       NET_R_LOGON_CTRL *r_u)
 {
-	uint32 flags = 0x0;
-	uint32 pdc_connection_status = 0x00; /* Maybe a win32 error code? */
-	
-	/* Setup the Logon Control response */
-
-	init_net_r_logon_ctrl(r_u, q_u->query_level, flags, 
-			      pdc_connection_status);
-
-	return r_u->status;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*************************************************************************
@@ -81,26 +73,8 @@ NTSTATUS _net_logon_ctrl(pipes_struct *p
 
 NTSTATUS _net_logon_ctrl2(pipes_struct *p, NET_Q_LOGON_CTRL2 *q_u, NET_R_LOGON_CTRL2 *r_u)
 {
-	uint32 flags = 0x0;
-	uint32 pdc_connection_status = 0x0;
-	uint32 logon_attempts = 0x0;
-	uint32 tc_status = ERROR_NO_LOGON_SERVERS;
-	const char *trusted_domain = "test_domain";
-
-        DEBUG(0, ("*** net long ctrl2 %d, %d, %d\n",
-                  q_u->function_code, q_u->query_level, q_u->switch_value));
-
-	DEBUG(6,("_net_logon_ctrl2: %d\n", __LINE__));
-
-
-	/* set up the Logon Control2 response */
-	init_net_r_logon_ctrl2(r_u, q_u->query_level,
-	                   flags, pdc_connection_status, logon_attempts,
-	                   tc_status, trusted_domain);
-
-	DEBUG(6,("_net_logon_ctrl2: %d\n", __LINE__));
-
-	return r_u->status;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*************************************************************************
@@ -109,17 +83,8 @@ NTSTATUS _net_logon_ctrl2(pipes_struct *
 
 NTSTATUS _net_trust_dom_list(pipes_struct *p, NET_Q_TRUST_DOM_LIST *q_u, NET_R_TRUST_DOM_LIST *r_u)
 {
-	const char *trusted_domain = "test_domain";
-	uint32 num_trust_domains = 1;
-
-	DEBUG(6,("_net_trust_dom_list: %d\n", __LINE__));
-
-	/* set up the Trusted Domain List response */
-	init_r_trust_dom(r_u, num_trust_domains, trusted_domain);
-
-	DEBUG(6,("_net_trust_dom_list: %d\n", __LINE__));
-
-	return r_u->status;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /***********************************************************************************
@@ -129,12 +94,8 @@ NTSTATUS _net_trust_dom_list(pipes_struc
 static void init_net_r_srv_pwset(NET_R_SRV_PWSET *r_s,
                              DOM_CRED *srv_cred, NTSTATUS status)  
 {
-	DEBUG(5,("init_net_r_srv_pwset: %d\n", __LINE__));
-
-	memcpy(&r_s->srv_cred, srv_cred, sizeof(r_s->srv_cred));
-	r_s->status = status;
-
-	DEBUG(5,("init_net_r_srv_pwset: %d\n", __LINE__));
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /******************************************************************
@@ -143,51 +104,8 @@ static void init_net_r_srv_pwset(NET_R_S
 
 static BOOL get_md4pw(char *md4pw, char *mach_acct)
 {
-	SAM_ACCOUNT *sampass = NULL;
-	uint8 *pass;
-	BOOL ret;
-
-#if 0
-    /*
-     * Currently this code is redundent as we already have a filter
-     * by hostname list. What this code really needs to do is to 
-     * get a hosts allowed/hosts denied list from the SAM database
-     * on a per user basis, and make the access decision there.
-     * I will leave this code here for now as a reminder to implement
-     * this at a later date. JRA.
-     */
-
-	if (!allow_access(lp_domain_hostsdeny(), lp_domain_hostsallow(),
-	                  client_name(), client_addr()))
-	{
-		DEBUG(0,("get_md4pw: Workstation %s denied access to domain\n", mach_acct));
-		return False;
-	}
-#endif /* 0 */
-	if(!pdb_init_sam(&sampass))
-		return False;
-
-	/* JRA. This is ok as it is only used for generating the challenge. */
-	become_root();
-	ret=pdb_getsampwnam(sampass, mach_acct);
-	unbecome_root();
-
- 	if (ret==False) {
- 		DEBUG(0,("get_md4pw: Workstation %s: no account in domain\n", mach_acct));
-		pdb_free_sam(sampass);
-		return False;
-	}
-
-	if (!(pdb_get_acct_ctrl(sampass) & ACB_DISABLED) && ((pass=pdb_get_nt_passwd(sampass)) != NULL)) {
-		memcpy(md4pw, pass, 16);
-		dump_data(5, md4pw, 16);
- 		pdb_free_sam(sampass);
-		return True;
-	}
- 	
-	DEBUG(0,("get_md4pw: Workstation %s: no account in domain\n", mach_acct));
-	pdb_free_sam(sampass);
-	return False;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*************************************************************************
@@ -196,47 +114,8 @@ static BOOL get_md4pw(char *md4pw, char
 
 NTSTATUS _net_req_chal(pipes_struct *p, NET_Q_REQ_CHAL *q_u, NET_R_REQ_CHAL *r_u)
 {
-	NTSTATUS status = NT_STATUS_OK;
-	fstring mach_acct;
-
-	if (!get_valid_user_struct(p->vuid))
-		return NT_STATUS_NO_SUCH_USER;
-
-	fstrcpy(mach_acct, dos_unistrn2(q_u->uni_logon_clnt.buffer,
-	                            q_u->uni_logon_clnt.uni_str_len));
-
-	strlower(mach_acct);
-	fstrcat(mach_acct, "$");
-
-	if (get_md4pw((char *)p->dc.md4pw, mach_acct)) {
-		/* copy the client credentials */
-		memcpy(p->dc.clnt_chal.data          , q_u->clnt_chal.data, sizeof(q_u->clnt_chal.data));
-		memcpy(p->dc.clnt_cred.challenge.data, q_u->clnt_chal.data, sizeof(q_u->clnt_chal.data));
-
-		/* create a server challenge for the client */
-		/* Set these to random values. */
-		generate_random_buffer(p->dc.srv_chal.data, 8, False);
-
-		memcpy(p->dc.srv_cred.challenge.data, p->dc.srv_chal.data, 8);
-
-		memset((char *)p->dc.sess_key, '\0', sizeof(p->dc.sess_key));
-
-		/* from client / server challenges and md4 password, generate sess key */
-		cred_session_key(&p->dc.clnt_chal, &p->dc.srv_chal,
-				(uchar *)p->dc.md4pw, p->dc.sess_key);
-
-		/* Save the machine account name. */
-		fstrcpy(p->dc.mach_acct, mach_acct);
-
-	} else {
-		/* lkclXXXX take a guess at a good error message to return :-) */
-		status = NT_STATUS_NOLOGON_WORKSTATION_TRUST_ACCOUNT;
-	}
-
-	/* set up the LSA REQUEST CHALLENGE response */
-	init_net_r_req_chal(r_u, &p->dc.srv_chal, status);
-
-	return r_u->status;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*************************************************************************
@@ -245,8 +124,8 @@ NTSTATUS _net_req_chal(pipes_struct *p,
 
 static void init_net_r_auth(NET_R_AUTH *r_a, DOM_CHAL *resp_cred, NTSTATUS status)
 {
-	memcpy(r_a->srv_chal.data, resp_cred->data, sizeof(resp_cred->data));
-	r_a->status = status;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*************************************************************************
@@ -255,32 +134,8 @@ static void init_net_r_auth(NET_R_AUTH *
 
 NTSTATUS _net_auth(pipes_struct *p, NET_Q_AUTH *q_u, NET_R_AUTH *r_u)
 {
-	NTSTATUS status = NT_STATUS_OK;
-	DOM_CHAL srv_cred;
-	UTIME srv_time;
-
-	if (!get_valid_user_struct(p->vuid))
-		return NT_STATUS_NO_SUCH_USER;
-
-	srv_time.time = 0;
-
-	/* check that the client credentials are valid */
-	if (cred_assert(&q_u->clnt_chal, p->dc.sess_key, &p->dc.clnt_cred.challenge, srv_time)) {
-
-		/* create server challenge for inclusion in the reply */
-		cred_create(p->dc.sess_key, &p->dc.srv_cred.challenge, srv_time, &srv_cred);
-
-		/* copy the received client credentials for use next time */
-		memcpy(p->dc.clnt_cred.challenge.data, q_u->clnt_chal.data, sizeof(q_u->clnt_chal.data));
-		memcpy(p->dc.srv_cred .challenge.data, q_u->clnt_chal.data, sizeof(q_u->clnt_chal.data));
-	} else {
-		status = NT_STATUS_ACCESS_DENIED;
-	}
-
-	/* set up the LSA AUTH 2 response */
-	init_net_r_auth(r_u, &srv_cred, status);
-
-	return r_u->status;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*************************************************************************
@@ -290,9 +145,8 @@ NTSTATUS _net_auth(pipes_struct *p, NET_
 static void init_net_r_auth_2(NET_R_AUTH_2 *r_a,
                               DOM_CHAL *resp_cred, NEG_FLAGS *flgs, NTSTATUS status)
 {
-	memcpy(r_a->srv_chal.data, resp_cred->data, sizeof(resp_cred->data));
-	memcpy(&r_a->srv_flgs, flgs, sizeof(r_a->srv_flgs));
-	r_a->status = status;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*************************************************************************
@@ -301,35 +155,8 @@ static void init_net_r_auth_2(NET_R_AUTH
 
 NTSTATUS _net_auth_2(pipes_struct *p, NET_Q_AUTH_2 *q_u, NET_R_AUTH_2 *r_u)
 {
-	NTSTATUS status = NT_STATUS_OK;
-	DOM_CHAL srv_cred;
-	UTIME srv_time;
-	NEG_FLAGS srv_flgs;
-
-	if (!get_valid_user_struct(p->vuid))
-		return NT_STATUS_NO_SUCH_USER;
-
-	srv_time.time = 0;
-
-	/* check that the client credentials are valid */
-	if (cred_assert(&q_u->clnt_chal, p->dc.sess_key, &p->dc.clnt_cred.challenge, srv_time)) {
-
-		/* create server challenge for inclusion in the reply */
-		cred_create(p->dc.sess_key, &p->dc.srv_cred.challenge, srv_time, &srv_cred);
-
-		/* copy the received client credentials for use next time */
-		memcpy(p->dc.clnt_cred.challenge.data, q_u->clnt_chal.data, sizeof(q_u->clnt_chal.data));
-		memcpy(p->dc.srv_cred .challenge.data, q_u->clnt_chal.data, sizeof(q_u->clnt_chal.data));
-	} else {
-		status = NT_STATUS_ACCESS_DENIED;
-	}
-
-	srv_flgs.neg_flags = 0x000001ff;
-
-	/* set up the LSA AUTH 2 response */
-	init_net_r_auth_2(r_u, &srv_cred, &srv_flgs, status);
-
-	return r_u->status;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*************************************************************************
@@ -338,83 +165,8 @@ NTSTATUS _net_auth_2(pipes_struct *p, NE
 
 NTSTATUS _net_srv_pwset(pipes_struct *p, NET_Q_SRV_PWSET *q_u, NET_R_SRV_PWSET *r_u)
 {
-	NTSTATUS status = NT_STATUS_WRONG_PASSWORD;
-	DOM_CRED srv_cred;
-	pstring mach_acct;
-	SAM_ACCOUNT *sampass=NULL;
-	BOOL ret=False;
-	unsigned char pwd[16];
-	int i;
-
-	if (!get_valid_user_struct(p->vuid))
-		return NT_STATUS_NO_SUCH_USER;
-
-	/* checks and updates credentials.  creates reply credentials */
-	if (!deal_with_creds(p->dc.sess_key, &p->dc.clnt_cred, &q_u->clnt_id.cred, &srv_cred))
-		return NT_STATUS_INVALID_HANDLE;
-
-	memcpy(&p->dc.srv_cred, &p->dc.clnt_cred, sizeof(p->dc.clnt_cred));
-
-	DEBUG(5,("_net_srv_pwset: %d\n", __LINE__));
-
-	pstrcpy(mach_acct, dos_unistrn2(q_u->clnt_id.login.uni_acct_name.buffer,
-	                            q_u->clnt_id.login.uni_acct_name.uni_str_len));
-
-	DEBUG(3,("Server Password Set Wksta:[%s]\n", mach_acct));
-
-	/*
-	 * Check the machine account name we're changing is the same
-	 * as the one we've authenticated from. This prevents arbitrary
-	 * machines changing other machine account passwords.
-	 */
-
-	if (!strequal(mach_acct, p->dc.mach_acct)) {
-		return NT_STATUS_ACCESS_DENIED;
-	}
-
-	pdb_init_sam(&sampass);
-
-	become_root();
-	ret=pdb_getsampwnam(sampass, mach_acct);
-	unbecome_root();
-
-	/* Ensure the account exists and is a machine account. */
-
-	if (ret==False || !(pdb_get_acct_ctrl(sampass) & ACB_WSTRUST)) {
-		pdb_free_sam(sampass);
-		return NT_STATUS_NO_SUCH_USER;
-	}
-				    				    
-	DEBUG(100,("Server password set : new given value was :\n"));
-	for(i = 0; i < 16; i++)
-		DEBUG(100,("%02X ", q_u->pwd[i]));
-	DEBUG(100,("\n"));
-
-	cred_hash3( pwd, q_u->pwd, p->dc.sess_key, 0);
-
-	/* lies!  nt and lm passwords are _not_ the same: don't care */
-	if (!pdb_set_lanman_passwd (sampass, pwd)) {
-		pdb_free_sam(sampass);
-		return NT_STATUS_NO_MEMORY;
-	}
-	if (!pdb_set_nt_passwd(sampass, pwd)) {
-		pdb_free_sam(sampass);
-		return NT_STATUS_NO_MEMORY;
-	}
-	pdb_set_acct_ctrl     (sampass, ACB_WSTRUST);
- 
-	become_root();
-	ret = pdb_update_sam_account (sampass,False);
-	unbecome_root();
-
-	if (ret)
-		status = NT_STATUS_OK;
-
-	/* set up the LSA Server Password Set response */
-	init_net_r_srv_pwset(r_u, &srv_cred, status);
-
-	pdb_free_sam(sampass);
-	return r_u->status;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 
@@ -424,25 +176,8 @@ NTSTATUS _net_srv_pwset(pipes_struct *p,
 
 NTSTATUS _net_sam_logoff(pipes_struct *p, NET_Q_SAM_LOGOFF *q_u, NET_R_SAM_LOGOFF *r_u)
 {
-	DOM_CRED srv_cred;
-
-	if (!get_valid_user_struct(p->vuid))
-		return NT_STATUS_NO_SUCH_USER;
-
-	/* checks and updates credentials.  creates reply credentials */
-	if (!deal_with_creds(p->dc.sess_key, &p->dc.clnt_cred, 
-	                &q_u->sam_id.client.cred, &srv_cred))
-		return NT_STATUS_INVALID_HANDLE;
-
-	memcpy(&p->dc.srv_cred, &p->dc.clnt_cred, sizeof(p->dc.clnt_cred));
-
-	/* XXXX maybe we want to say 'no', reject the client's credentials */
-	r_u->buffer_creds = 1; /* yes, we have valid server credentials */
-	memcpy(&r_u->srv_creds, &srv_cred, sizeof(r_u->srv_creds));
-
-	r_u->status = NT_STATUS_OK;
-
-	return r_u->status;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*************************************************************************
@@ -451,65 +186,8 @@ NTSTATUS _net_sam_logoff(pipes_struct *p
 
 static NTSTATUS net_login_interactive(NET_ID_INFO_1 *id1, SAM_ACCOUNT *sampass, pipes_struct *p)
 {
-	uint8    *stored_nt_pwd, *stored_lanman_pwd;
-	char nt_pwd[16];
-	char lm_pwd[16];
-	unsigned char key[16];
-
-	memset(key, 0, 16);
-	memcpy(key, p->dc.sess_key, 8);
-
-	memcpy(lm_pwd, id1->lm_owf.data, 16);
-	memcpy(nt_pwd, id1->nt_owf.data, 16);
-
-#ifdef DEBUG_PASSWORD
-	DEBUG(100,("key:"));
-	dump_data(100, (char *)key, 16);
-
-	DEBUG(100,("lm owf password:"));
-	dump_data(100, lm_pwd, 16);
-
-	DEBUG(100,("nt owf password:"));
-	dump_data(100, nt_pwd, 16);
-#endif
-
-	SamOEMhash((uchar *)lm_pwd, key, 16);
-	SamOEMhash((uchar *)nt_pwd, key, 16);
-
-#ifdef DEBUG_PASSWORD
-	DEBUG(100,("decrypt of lm owf password:"));
-	dump_data(100, lm_pwd, 16);
-
-	DEBUG(100,("decrypt of nt owf password:"));
-	dump_data(100, nt_pwd, 16);
-#endif
-
-	/* JRA. Check the NT password first if it exists - this is a higher quality 
-           password, if it exists and it doesn't match - fail. */
-
-	stored_nt_pwd = pdb_get_nt_passwd(sampass);
-
-	if (stored_nt_pwd) {
-		if (memcmp(stored_nt_pwd, nt_pwd, 16) != 0) {
-			DEBUG(10,("net_login_interactive: NT password for user %s doesn't match.\n",
-				sampass->username));
-			return NT_STATUS_WRONG_PASSWORD;
-		} else
-			return NT_STATUS_OK;
-	}
-
-	stored_lanman_pwd = pdb_get_lanman_passwd(sampass);
-
-	if (stored_lanman_pwd && lp_lanman_auth()) {
-		if (memcmp(stored_lanman_pwd, lm_pwd, 16) != 0) {
-			DEBUG(10,("net_login_interactive: lanman password for user %s doesn't match.\n",
-				sampass->username));
-			return NT_STATUS_WRONG_PASSWORD;
-		} else
-			return NT_STATUS_OK;
-	}
-
-	return NT_STATUS_WRONG_PASSWORD;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*************************************************************************
@@ -518,44 +196,8 @@ static NTSTATUS net_login_interactive(NE
 
 static NTSTATUS net_login_network(NET_ID_INFO_2 *id2, SAM_ACCOUNT *sampass)
 {
-	uint8    *nt_pwd, *lanman_pwd;
-
-	DEBUG(5,("net_login_network: lm_len: %d nt_len: %d\n",
-		id2->hdr_lm_chal_resp.str_str_len, 
-		id2->hdr_nt_chal_resp.str_str_len));
-
-	/* JRA. Check the NT password first if it exists - this is a higher quality 
-           password, if it exists and it doesn't match - fail. */
-
-	nt_pwd = pdb_get_nt_passwd(sampass);
-	lanman_pwd = pdb_get_lanman_passwd(sampass);
-
-	if (id2->hdr_nt_chal_resp.str_str_len == 24 && nt_pwd != NULL)	{
-		if(smb_password_check((char *)id2->nt_chal_resp.buffer, nt_pwd, id2->lm_chal)) 
-			return NT_STATUS_OK;
-		else
-			return NT_STATUS_WRONG_PASSWORD;
-	}
-
-	/* lkclXXXX this is not a good place to put disabling of LM hashes in.
-	   if that is to be done, first move this entire function into a
-	   library routine that calls the two smb_password_check() functions.
-	   if disabling LM hashes (which nt can do for security reasons) then
-	   an attempt should be made to disable them everywhere (which nt does
-	   not do, for various security-hole reasons).
-	 */
-
-	if (lp_lanman_auth() && id2->hdr_lm_chal_resp.str_str_len == 24 &&
-		smb_password_check((char *)id2->lm_chal_resp.buffer,
-		                   lanman_pwd, id2->lm_chal)) 
-	{
-		return NT_STATUS_OK;
-	}
-
-
-	/* oops! neither password check succeeded */
-
-	return NT_STATUS_WRONG_PASSWORD;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*************************************************************************
@@ -564,166 +206,6 @@ static NTSTATUS net_login_network(NET_ID
 
 NTSTATUS _net_sam_logon(pipes_struct *p, NET_Q_SAM_LOGON *q_u, NET_R_SAM_LOGON *r_u)
 {
-	NTSTATUS status = NT_STATUS_OK;
-	NET_USER_INFO_3 *usr_info = NULL;
-	DOM_CRED srv_cred;
-	SAM_ACCOUNT *sampass = NULL;
-	UNISTR2 *uni_samlogon_user = NULL;
-	fstring nt_username;
-	BOOL ret;
-	uint16 acct_ctrl;
-   
-	usr_info = (NET_USER_INFO_3 *)talloc(p->mem_ctx, sizeof(NET_USER_INFO_3));
-	if (!usr_info)
-		return NT_STATUS_NO_MEMORY;
-	ZERO_STRUCTP(usr_info);
-
- 	/* store the user information, if there is any. */
-	r_u->user = usr_info;
-	r_u->switch_value = 0; /* indicates no info */
-	r_u->auth_resp = 1; /* authoritative response */
-	r_u->switch_value = 3; /* indicates type of validation user info */
- 
-	if (!get_valid_user_struct(p->vuid))
-		return NT_STATUS_NO_SUCH_USER;
-    
-	/* checks and updates credentials.  creates reply credentials */
-	if (!deal_with_creds(p->dc.sess_key, &p->dc.clnt_cred, &q_u->sam_id.client.cred, &srv_cred))
-		return NT_STATUS_INVALID_HANDLE;
-	else
-		memcpy(&p->dc.srv_cred, &p->dc.clnt_cred, sizeof(p->dc.clnt_cred));
-    
-	r_u->buffer_creds = 1; /* yes, we have valid server credentials */
-	memcpy(&r_u->srv_creds, &srv_cred, sizeof(r_u->srv_creds));
-
-	/* find the username */
-    
-	switch (q_u->sam_id.logon_level) {
-	case INTERACTIVE_LOGON_TYPE:
-		uni_samlogon_user = &q_u->sam_id.ctr->auth.id1.uni_user_name;
-            
-		DEBUG(3,("SAM Logon (Interactive). Domain:[%s].  ", lp_workgroup()));
-		break;
-	case NET_LOGON_TYPE:
-		uni_samlogon_user = &q_u->sam_id.ctr->auth.id2.uni_user_name;
-            
-		DEBUG(3,("SAM Logon (Network). Domain:[%s].  ", lp_workgroup()));
-		break;
-	default:
-		DEBUG(2,("SAM Logon: unsupported switch value\n"));
-		return NT_STATUS_INVALID_INFO_CLASS;
-	} /* end switch */
-
-	/* check username exists */
-
-	pstrcpy(nt_username, dos_unistrn2(uni_samlogon_user->buffer, uni_samlogon_user->uni_str_len));
-
-	DEBUG(3,("User:[%s]\n", nt_username));
-        
-	/*
-	 * Convert to a UNIX username.
-	 */
-
-	map_username(nt_username);
-
-	/* get the account information */
-	pdb_init_sam(&sampass);
-	become_root();
-	ret = pdb_getsampwnam(sampass, nt_username);
-	unbecome_root();
-
-	if (!ret)
-	{
-		pdb_free_sam(sampass);
-		return NT_STATUS_NO_SUCH_USER;
-	}
-	
-	acct_ctrl = pdb_get_acct_ctrl(sampass);
-
-	/* Validate password - if required. */
-
-	if (!(acct_ctrl & ACB_PWNOTREQ)) {
-		switch (q_u->sam_id.logon_level) {
-		case INTERACTIVE_LOGON_TYPE:
-			/* interactive login. */
-			status = net_login_interactive(&q_u->sam_id.ctr->auth.id1, sampass, p);
-			break;
-		case NET_LOGON_TYPE:
-			/* network login.  lm challenge and 24 byte responses */
-			status = net_login_network(&q_u->sam_id.ctr->auth.id2, sampass);
-			break;
-		}
-	}
-
-	if (!NT_STATUS_IS_OK(status)) {
-		pdb_free_sam(sampass);
-		return status;
-	}
-
-#ifdef WITH_PAM
-	become_root();
-	status = smb_pam_accountcheck(pdb_get_username(sampass));
-	unbecome_root();
-	if (!NT_STATUS_IS_OK(status)) {
-		pdb_free_sam(sampass);
-		return status;
-	}
-#endif
-
-	if (acct_ctrl & ACB_DISABLED) {
-		pdb_free_sam(sampass);
-		return NT_STATUS_ACCOUNT_DISABLED;
-	}
-    
-	/* lkclXXXX this is the point at which, if the login was
-		successful, that the SAM Local Security Authority should
-		record that the user is logged in to the domain.
-	*/
-    
-	{
-		DOM_GID *gids = NULL;
-		int num_gids = 0;
-		pstring my_name;
-		pstring my_workgroup;
-		pstring domain_groups;
-	
-		/* set up pointer indicating user/password failed to be found */
-		usr_info->ptr_user_info = 0;
-        
-		pstrcpy(my_workgroup, lp_workgroup());
-		pstrcpy(my_name, global_myname);
-		strupper(my_name);
-
-		/*
-		 * This is the point at which we get the group
-		 * database - we should be getting the gid_t list
-		 * from /etc/group and then turning the uids into
-		 * rids and then into machine sids for this user.
-		 * JRA.
-		 */
-        
-		get_domain_user_groups(domain_groups, nt_username);
-        
-		/*
-		 * make_dom_gids allocates the gids array. JRA.
-		 */
-		gids = NULL;
-		num_gids = make_dom_gids(p->mem_ctx, domain_groups, &gids);
-        
-		init_net_user_info3(p->mem_ctx, usr_info, sampass,
-                            0, /* logon_count */
-                            0, /* bad_pw_count */
-                            num_gids,    /* uint32 num_groups */
-                            gids    , /* DOM_GID *gids */
-                            0x20    , /* uint32 user_flgs (?) */
-                            NULL, /* char sess_key[16] */
-                            my_name     , /* char *logon_srv */
-                            my_workgroup, /* char *logon_dom */
-                            &global_sam_sid,     /* DOM_SID *dom_sid */
-                            NULL); /* char *other_sids */
-        
-	}
-
-	pdb_free_sam(sampass);
-	return status;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
diff -pruwN samba-2.2.12/source/rpc_server/srv_pipe.c samba-2.2.12-livebox/rpc_server/srv_pipe.c
--- samba-2.2.12/source/rpc_server/srv_pipe.c	2004-08-12 20:24:27.000000000 +0200
+++ samba-2.2.12-livebox/rpc_server/srv_pipe.c	2010-03-31 11:45:59.000000000 +0200
@@ -42,28 +42,8 @@
 
 static void NTLMSSPcalc_p( pipes_struct *p, unsigned char *data, int len)
 {
-    unsigned char *hash = p->ntlmssp_hash;
-    unsigned char index_i = hash[256];
-    unsigned char index_j = hash[257];
-    int ind;
-
-    for( ind = 0; ind < len; ind++) {
-        unsigned char tc;
-        unsigned char t;
-
-        index_i++;
-        index_j += hash[index_i];
-
-        tc = hash[index_i];
-        hash[index_i] = hash[index_j];
-        hash[index_j] = tc;
-
-        t = hash[index_i] + hash[index_j];
-        data[ind] = data[ind] ^ hash[t];
-    }
-
-    hash[256] = index_i;
-    hash[257] = index_j;
+DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -278,222 +258,8 @@ BOOL create_next_pdu(pipes_struct *p)
 
 static BOOL api_pipe_ntlmssp_verify(pipes_struct *p, RPC_AUTH_NTLMSSP_RESP *ntlmssp_resp)
 {
-	uchar lm_owf[24];
-	uchar nt_owf[24];
-	fstring user_name;
-	fstring pipe_user_name;
-	fstring domain;
-	fstring wks;
-	BOOL guest_user = False;
-	SAM_ACCOUNT *sampass = NULL;
-	uchar null_smb_passwd[16];
-	uchar *smb_passwd_ptr = NULL;
-	
-	DEBUG(5,("api_pipe_ntlmssp_verify: checking user details\n"));
-
-	memset(p->user_name, '\0', sizeof(p->user_name));
-	memset(p->pipe_user_name, '\0', sizeof(p->pipe_user_name));
-	memset(p->domain, '\0', sizeof(p->domain));
-	memset(p->wks, '\0', sizeof(p->wks));
-
-	/* Set up for non-authenticated user. */
-	delete_nt_token(&p->pipe_user.nt_user_token);
-	p->pipe_user.ngroups = 0;
-	safe_free( p->pipe_user.groups);
-
-	/* 
-	 * Setup an empty password for a guest user.
-	 */
-
- 	memset(null_smb_passwd,0,16);
-
-	/*
-	 * We always negotiate UNICODE.
-	 */
-
-	if (p->ntlmssp_chal_flags & NTLMSSP_NEGOTIATE_UNICODE) {
-		fstrcpy(user_name, dos_unistrn2((uint16*)ntlmssp_resp->user, ntlmssp_resp->hdr_usr.str_str_len/2));
-		fstrcpy(domain, dos_unistrn2((uint16*)ntlmssp_resp->domain, ntlmssp_resp->hdr_domain.str_str_len/2));
-		fstrcpy(wks, dos_unistrn2((uint16*)ntlmssp_resp->wks, ntlmssp_resp->hdr_wks.str_str_len/2));
-	} else {
-		fstrcpy(user_name, ntlmssp_resp->user);
-		fstrcpy(domain, ntlmssp_resp->domain);
-		fstrcpy(wks, ntlmssp_resp->wks);
-	}
-
-	DEBUG(5,("user: %s domain: %s wks: %s\n", user_name, domain, wks));
-
-	memcpy(lm_owf, ntlmssp_resp->lm_resp, sizeof(lm_owf));
-	memcpy(nt_owf, ntlmssp_resp->nt_resp, sizeof(nt_owf));
-
-#ifdef DEBUG_PASSWORD
-	DEBUG(100,("lm, nt owfs, chal\n"));
-	dump_data(100, (char *)lm_owf, sizeof(lm_owf));
-	dump_data(100, (char *)nt_owf, sizeof(nt_owf));
-	dump_data(100, (char *)p->challenge, 8);
-#endif
-
-	/*
-	 * Allow guest access. Patch from Shirish Kalele <kalele@veritas.com>.
-	 */
-
-	if((strlen(user_name) == 0) && 
-	   (ntlmssp_resp->hdr_nt_resp.str_str_len==0))
-	  {
-		guest_user = True;
-
-		fstrcpy(pipe_user_name, lp_guestaccount(-1));
-		DEBUG(100,("Null user in NTLMSSP verification. Using guest = %s\n", pipe_user_name));
-
-		smb_passwd_ptr = null_smb_passwd;
-
-	} else {
-
-		/*
-		 * Pass the user through the NT -> unix user mapping
-		 * function.
-		 */
-
-		fstrcpy(pipe_user_name, user_name);
-		(void)map_username(pipe_user_name);
-
-	 	/* 
-		 * Do the length checking only if user is not NULL.
-		 */
-
- 		if (ntlmssp_resp->hdr_lm_resp.str_str_len == 0)
- 			return False;
- 		if (ntlmssp_resp->hdr_nt_resp.str_str_len == 0)
- 			return False;
- 		if (ntlmssp_resp->hdr_usr.str_str_len == 0)
- 			return False;
- 		if (ntlmssp_resp->hdr_domain.str_str_len == 0)
- 			return False;
- 		if (ntlmssp_resp->hdr_wks.str_str_len == 0)
- 			return False;
-
-	}
-
-	if(!guest_user) {
-
-		become_root();
-
-		if(!(p->ntlmssp_auth_validated = pass_check_smb(pipe_user_name, domain,
-		                      (uchar*)p->challenge, lm_owf, nt_owf, NULL))) {
-			DEBUG(1,("api_pipe_ntlmssp_verify: User %s\\%s from machine %s \
-failed authentication on named pipe %s.\n", domain, pipe_user_name, wks, p->name ));
-			unbecome_root();
-			return False;
-		}
-
-		pdb_init_sam(&sampass);
-
-		if(!pdb_getsampwnam(sampass, pipe_user_name)) {
-			DEBUG(1,("api_pipe_ntlmssp_verify: Cannot find user %s in smb passwd database.\n",
-				pipe_user_name));
-			pdb_free_sam(sampass);
-			unbecome_root();
-			return False;
-		}
-		
-		unbecome_root();
-
-		/* Quit if the account was disabled. */
-		if((pdb_get_acct_ctrl(sampass) & ACB_DISABLED) || !pdb_get_lanman_passwd(sampass)) {
-			DEBUG(1,("Account for user '%s' was disabled.\n", pipe_user_name));
-			pdb_free_sam(sampass);
-			return False;
-		}
- 
-		if(!pdb_get_nt_passwd(sampass)) {
-			DEBUG(1,("Account for user '%s' has no NT password hash.\n", pipe_user_name));
-			pdb_free_sam(sampass);
-			return False;
-		}
- 
-		smb_passwd_ptr = pdb_get_lanman_passwd(sampass);
-		
-		/*
-		 * Store the UNIX credential data (uid/gid pair) in the pipe structure.
-		 */
-
-		p->pipe_user.uid = pdb_get_uid(sampass);
-		p->pipe_user.gid = pdb_get_gid(sampass);
-	}
-	else {
-		struct passwd *pw;
-		
-		/* setup the guest credentials; assuming that the guest 
-		   account does not have to exist in the smbpasswd file */
-
-		if ( (pw = sys_getpwnam(pipe_user_name)) == NULL ) {
-			DEBUG(0,("api_pipe_ntlmssp_verify: Invalid guest account [%s].  getpwnam() failed!\n", 
-				pipe_user_name));
-			pdb_free_sam(sampass);
-			return False;
-		}
-			
-		p->pipe_user.uid = pw->pw_uid;
-		p->pipe_user.gid = pw->pw_gid;
-		
-	}
-
-	/*
-	 * Set up the sign/seal data.
-	 */
-
-	{
-		uchar p24[24];
-		NTLMSSPOWFencrypt(smb_passwd_ptr, lm_owf, p24);
-		{
-			unsigned char j = 0;
-			int ind;
-
-			unsigned char k2[8];
-
-			memcpy(k2, p24, 5);
-			k2[5] = 0xe5;
-			k2[6] = 0x38;
-			k2[7] = 0xb0;
-
-			for (ind = 0; ind < 256; ind++)
-				p->ntlmssp_hash[ind] = (unsigned char)ind;
-
-			for( ind = 0; ind < 256; ind++) {
-				unsigned char tc;
-
-				j += (p->ntlmssp_hash[ind] + k2[ind%8]);
-
-				tc = p->ntlmssp_hash[ind];
-				p->ntlmssp_hash[ind] = p->ntlmssp_hash[j];
-				p->ntlmssp_hash[j] = tc;
-			}
-
-			p->ntlmssp_hash[256] = 0;
-			p->ntlmssp_hash[257] = 0;
-		}
-/*		NTLMSSPhash(p->ntlmssp_hash, p24); */
-		p->ntlmssp_seq_num = 0;
-
-	}
-
-	fstrcpy(p->user_name, user_name);
-	fstrcpy(p->pipe_user_name, pipe_user_name);
-	fstrcpy(p->domain, domain);
-	fstrcpy(p->wks, wks);
-
-	/* Set up pipe user group membership. */
-	initialise_groups(pipe_user_name, p->pipe_user.uid, p->pipe_user.gid);
-	get_current_groups( p->pipe_user.gid, &p->pipe_user.ngroups, &p->pipe_user.groups);
-
-	/* Create an NT_USER_TOKEN struct for this user. */
-	p->pipe_user.nt_user_token = create_nt_token(p->pipe_user.uid,p->pipe_user.gid,
-						p->pipe_user.ngroups, p->pipe_user.groups,
-						guest_user, NULL);
-
-	p->ntlmssp_auth_validated = True;
-	pdb_free_sam(sampass);
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -529,62 +295,8 @@ static struct api_cmd api_fd_commands[]
 
 BOOL api_pipe_bind_auth_resp(pipes_struct *p, prs_struct *rpc_in_p)
 {
-	RPC_HDR_AUTHA autha_info;
-	RPC_AUTH_VERIFIER auth_verifier;
-	RPC_AUTH_NTLMSSP_RESP ntlmssp_resp;
-
-	DEBUG(5,("api_pipe_bind_auth_resp: decode request. %d\n", __LINE__));
-
-	if (p->hdr.auth_len == 0) {
-		DEBUG(0,("api_pipe_bind_auth_resp: No auth field sent !\n"));
-		return False;
-	}
-
-	/*
-	 * Decode the authentication verifier response.
-	 */
-
-	if(!smb_io_rpc_hdr_autha("", &autha_info, rpc_in_p, 0)) {
-		DEBUG(0,("api_pipe_bind_auth_resp: unmarshall of RPC_HDR_AUTHA failed.\n"));
-		return False;
-	}
-
-	if (autha_info.auth_type != NTLMSSP_AUTH_TYPE || autha_info.auth_level != NTLMSSP_AUTH_LEVEL) {
-		DEBUG(0,("api_pipe_bind_auth_resp: incorrect auth type (%d) or level (%d).\n",
-			(int)autha_info.auth_type, (int)autha_info.auth_level ));
-		return False;
-	}
-
-	if(!smb_io_rpc_auth_verifier("", &auth_verifier, rpc_in_p, 0)) {
-		DEBUG(0,("api_pipe_bind_auth_resp: unmarshall of RPC_AUTH_VERIFIER failed.\n"));
-		return False;
-	}
-
-	/*
-	 * Ensure this is a NTLMSSP_AUTH packet type.
-	 */
-
-	if (!rpc_auth_verifier_chk(&auth_verifier, "NTLMSSP", NTLMSSP_AUTH)) {
-		DEBUG(0,("api_pipe_bind_auth_resp: rpc_auth_verifier_chk failed.\n"));
-		return False;
-	}
-
-	if(!smb_io_rpc_auth_ntlmssp_resp("", &ntlmssp_resp, rpc_in_p, 0)) {
-		DEBUG(0,("api_pipe_bind_auth_resp: Failed to unmarshall RPC_AUTH_NTLMSSP_RESP.\n"));
-		return False;
-	}
-
-	/*
-	 * The following call actually checks the challenge/response data.
-	 * for correctness against the given DOMAIN\user name.
-	 */
-	
-	if (!api_pipe_ntlmssp_verify(p, &ntlmssp_resp))
-		return False;
-
-	p->pipe_bound = True
-;
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -593,56 +305,8 @@ BOOL api_pipe_bind_auth_resp(pipes_struc
 
 static BOOL setup_bind_nak(pipes_struct *p)
 {
-	prs_struct outgoing_rpc;
-	RPC_HDR nak_hdr;
-	uint16 zero = 0;
-
-	/* Free any memory in the current return data buffer. */
-	prs_mem_free(&p->out_data.rdata);
-
-	/*
-	 * Marshall directly into the outgoing PDU space. We
-	 * must do this as we need to set to the bind response
-	 * header and are never sending more than one PDU here.
-	 */
-
-	prs_init( &outgoing_rpc, 0, p->mem_ctx, MARSHALL);
-	prs_give_memory( &outgoing_rpc, (char *)p->out_data.current_pdu, sizeof(p->out_data.current_pdu), False);
-
-
-	/*
-	 * Initialize a bind_nak header.
-	 */
-
-	init_rpc_hdr(&nak_hdr, RPC_BINDNACK, RPC_FLG_FIRST | RPC_FLG_LAST,
-            p->hdr.call_id, RPC_HEADER_LEN + sizeof(uint16), 0);
-
-	/*
-	 * Marshall the header into the outgoing PDU.
-	 */
-
-	if(!smb_io_rpc_hdr("", &nak_hdr, &outgoing_rpc, 0)) {
-		DEBUG(0,("setup_bind_nak: marshalling of RPC_HDR failed.\n"));
-		prs_mem_free(&outgoing_rpc);
-		return False;
-	}
-
-	/*
-	 * Now add the reject reason.
-	 */
-
-	if(!prs_uint16("reject code", &outgoing_rpc, 0, &zero)) {
-		prs_mem_free(&outgoing_rpc);
-        return False;
-	}
-
-	p->out_data.data_sent_length = 0;
-	p->out_data.current_pdu_len = prs_offset(&outgoing_rpc);
-	p->out_data.current_pdu_sent = 0;
-
-	p->pipe_bound = False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -1045,101 +709,8 @@ BOOL api_pipe_bind_req(pipes_struct *p,
 
 BOOL api_pipe_auth_process(pipes_struct *p, prs_struct *rpc_in)
 {
-	/*
-	 * We always negotiate the following two bits....
-	 */
-	BOOL auth_verify = ((p->ntlmssp_chal_flags & NTLMSSP_NEGOTIATE_SIGN) != 0);
-	BOOL auth_seal   = ((p->ntlmssp_chal_flags & NTLMSSP_NEGOTIATE_SEAL) != 0);
-	int data_len;
-	int auth_len;
-	uint32 old_offset;
-	uint32 crc32 = 0;
-
-	auth_len = p->hdr.auth_len;
-
-	if ((auth_len != RPC_AUTH_NTLMSSP_CHK_LEN) && auth_verify) {
-		DEBUG(0,("api_pipe_auth_process: Incorrect auth_len %d.\n", auth_len ));
-		return False;
-	}
-
-	/*
-	 * The following is that length of the data we must verify or unseal.
-	 * This doesn't include the RPC headers or the auth_len or the RPC_HDR_AUTH_LEN
-	 * preceeding the auth_data.
-	 */
-
-	data_len = p->hdr.frag_len - RPC_HEADER_LEN - RPC_HDR_REQ_LEN - 
-			(auth_verify ? RPC_HDR_AUTH_LEN : 0) - auth_len;
-	
-	DEBUG(5,("api_pipe_auth_process: sign: %s seal: %s data %d auth %d\n",
-	         BOOLSTR(auth_verify), BOOLSTR(auth_seal), data_len, auth_len));
-
-	if (auth_seal) {
-		/*
-		 * The data in rpc_in doesn't contain the RPC_HEADER as this
-		 * has already been consumed.
-		 */
-		char *data = prs_data_p(rpc_in) + RPC_HDR_REQ_LEN;
-		NTLMSSPcalc_p(p, (uchar*)data, data_len);
-		crc32 = crc32_calc_buffer(data, data_len);
-	}
-
-	old_offset = prs_offset(rpc_in);
-
-	if (auth_seal || auth_verify) {
-		RPC_HDR_AUTH auth_info;
-
-		if(!prs_set_offset(rpc_in, old_offset + data_len)) {
-			DEBUG(0,("api_pipe_auth_process: cannot move offset to %u.\n",
-				(unsigned int)old_offset + data_len ));
-			return False;
-		}
-
-		if(!smb_io_rpc_hdr_auth("hdr_auth", &auth_info, rpc_in, 0)) {
-			DEBUG(0,("api_pipe_auth_process: failed to unmarshall RPC_HDR_AUTH.\n"));
-			return False;
-		}
-	}
-
-	if (auth_verify) {
-		RPC_AUTH_NTLMSSP_CHK ntlmssp_chk;
-		char *req_data = prs_data_p(rpc_in) + prs_offset(rpc_in) + 4;
-
-		DEBUG(5,("api_pipe_auth_process: auth %d\n", prs_offset(rpc_in) + 4));
-
-		/*
-		 * Ensure we have RPC_AUTH_NTLMSSP_CHK_LEN - 4 more bytes in the
-		 * incoming buffer.
-		 */
-		if(prs_mem_get(rpc_in, RPC_AUTH_NTLMSSP_CHK_LEN - 4) == NULL) {
-			DEBUG(0,("api_pipe_auth_process: missing %d bytes in buffer.\n",
-				RPC_AUTH_NTLMSSP_CHK_LEN - 4 ));
-			return False;
-		}
-
-		NTLMSSPcalc_p(p, (uchar*)req_data, RPC_AUTH_NTLMSSP_CHK_LEN - 4);
-		if(!smb_io_rpc_auth_ntlmssp_chk("auth_sign", &ntlmssp_chk, rpc_in, 0)) {
-			DEBUG(0,("api_pipe_auth_process: failed to unmarshall RPC_AUTH_NTLMSSP_CHK.\n"));
-			return False;
-		}
-
-		if (!rpc_auth_ntlmssp_chk(&ntlmssp_chk, crc32, p->ntlmssp_seq_num)) {
-			DEBUG(0,("api_pipe_auth_process: NTLMSSP check failed.\n"));
-			return False;
-		}
-	}
-
-	/*
-	 * Return the current pointer to the data offset.
-	 */
-
-	if(!prs_set_offset(rpc_in, old_offset)) {
-		DEBUG(0,("api_pipe_auth_process: failed to set offset back to %u\n",
-			(unsigned int)old_offset ));
-		return False;
-	}
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /****************************************************************************
diff -pruwN samba-2.2.12/source/rpc_server/srv_reg.c samba-2.2.12-livebox/rpc_server/srv_reg.c
--- samba-2.2.12/source/rpc_server/srv_reg.c	2004-08-12 20:24:26.000000000 +0200
+++ samba-2.2.12-livebox/rpc_server/srv_reg.c	2010-03-31 11:45:59.000000000 +0200
@@ -112,24 +112,8 @@ static BOOL api_reg_open_entry(pipes_str
 
 static BOOL api_reg_info(pipes_struct *p)
 {
-	REG_Q_INFO q_u;
-	REG_R_INFO r_u;
-	prs_struct *data = &p->in_data.data;
-	prs_struct *rdata = &p->out_data.rdata;
-
-	ZERO_STRUCT(q_u);
-	ZERO_STRUCT(r_u);
-
-	/* grab the reg unknown 0x11*/
-	if(!reg_io_q_info("", &q_u, data, 0))
-		return False;
-
-	r_u.status = _reg_info(p, &q_u, &r_u);
-
-	if(!reg_io_r_info("", &r_u, rdata, 0))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 #if 0
diff -pruwN samba-2.2.12/source/rpc_server/srv_reg_nt.c samba-2.2.12-livebox/rpc_server/srv_reg_nt.c
--- samba-2.2.12/source/rpc_server/srv_reg_nt.c	2004-08-12 20:24:26.000000000 +0200
+++ samba-2.2.12-livebox/rpc_server/srv_reg_nt.c	2010-03-31 11:45:59.000000000 +0200
@@ -35,9 +35,8 @@ struct reg_info
 
 static void free_reg_info(void *ptr)
 {
-	struct reg_info *info = (struct reg_info *)ptr;
-
-	SAFE_FREE(info);
+	DEBUG(1,("function ommited/n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -114,64 +113,6 @@ NTSTATUS _reg_open_entry(pipes_struct *p
 
 NTSTATUS _reg_info(pipes_struct *p, REG_Q_INFO *q_u, REG_R_INFO *r_u)
 {
-	NTSTATUS status = NT_STATUS_OK;
-	const char *key = NULL;
-	uint32 type=0x1; /* key type: REG_SZ */
-
-	UNISTR2 *uni_key = NULL;
-	BUFFER2 *buf = NULL;
-	fstring name;
-
-	DEBUG(5,("_reg_info: %d\n", __LINE__));
-
-	if (!find_policy_by_hnd(p, &q_u->pol, NULL))
-		return NT_STATUS_INVALID_HANDLE;
-
-	fstrcpy(name, dos_unistrn2(q_u->uni_type.buffer, q_u->uni_type.uni_str_len));
-
-	DEBUG(5,("reg_info: checking key: %s\n", name));
-
-	uni_key = (UNISTR2 *)talloc_zero(p->mem_ctx, sizeof(UNISTR2));
-	buf = (BUFFER2 *)talloc_zero(p->mem_ctx, sizeof(BUFFER2));
-
-	if (!uni_key || !buf)
-		return NT_STATUS_NO_MEMORY;
-
-	if ( strequal(name, "RefusePasswordChange") ) {
-		type=0xF770;
-		status = NT_STATUS_NO_SUCH_FILE;
-		init_unistr2(uni_key, "", 0);
-		init_buffer2(buf, (uint8*) uni_key->buffer, uni_key->uni_str_len*2);
-		
-		buf->buf_max_len=4;
-
-		goto out;
-	}
-
-	switch (lp_server_role()) {
-	case ROLE_DOMAIN_PDC:
-	case ROLE_DOMAIN_BDC:
-		key = "LanmanNT";
-		break;
-	case ROLE_STANDALONE:
-		key = "ServerNT";
-		break;
-	case ROLE_DOMAIN_MEMBER:
-		key = "WinNT";
-		break;
-	}
-
-	/* This makes the server look like a member server to clients */
-	/* which tells clients that we have our own local user and    */
-	/* group databases and helps with ACL support.                */
-
-	init_unistr2(uni_key, key, strlen(key)+1);
-	init_buffer2(buf, (uint8*)uni_key->buffer, uni_key->uni_str_len*2);
-  
- out:
-	init_reg_r_info(q_u->ptr_buf, r_u, buf, type, status);
-
-	DEBUG(5,("reg_open_entry: %d\n", __LINE__));
-
-	return status;
+	DEBUG(1,("function ommited/n"));
+	/* function omited*/
 }
diff -pruwN samba-2.2.12/source/rpc_server/srv_samr.c samba-2.2.12-livebox/rpc_server/srv_samr.c
--- samba-2.2.12/source/rpc_server/srv_samr.c	2004-08-12 20:24:27.000000000 +0200
+++ samba-2.2.12-livebox/rpc_server/srv_samr.c	2010-03-31 11:45:59.000000000 +0200
@@ -38,28 +38,8 @@
 
 static BOOL api_samr_close_hnd(pipes_struct *p)
 {
-	SAMR_Q_CLOSE_HND q_u;
-	SAMR_R_CLOSE_HND r_u;
-	prs_struct *data = &p->in_data.data;
-	prs_struct *rdata = &p->out_data.rdata;
-
-	ZERO_STRUCT(q_u);
-	ZERO_STRUCT(r_u);
-
-	if(!samr_io_q_close_hnd("", &q_u, data, 0)) {
-		DEBUG(0,("api_samr_close_hnd: unable to unmarshall SAMR_Q_CLOSE_HND.\n"));
-		return False;
-	}
-
-	r_u.status = _samr_close_hnd(p, &q_u, &r_u);
-
-	/* store the response in the SMB stream */
-	if(!samr_io_r_close_hnd("", &r_u, rdata, 0)) {
-		DEBUG(0,("api_samr_close_hnd: unable to marshall SAMR_R_CLOSE_HND.\n"));
-		return False;
-	}
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -68,29 +48,8 @@ static BOOL api_samr_close_hnd(pipes_str
 
 static BOOL api_samr_open_domain(pipes_struct *p)
 {
-	SAMR_Q_OPEN_DOMAIN q_u;
-	SAMR_R_OPEN_DOMAIN r_u;
-
-	prs_struct *data = &p->in_data.data;
-	prs_struct *rdata = &p->out_data.rdata;
-
-	ZERO_STRUCT(q_u);
-	ZERO_STRUCT(r_u);
-
-	if(!samr_io_q_open_domain("", &q_u, data, 0)) {
-		DEBUG(0,("api_samr_open_domain: unable to unmarshall SAMR_Q_OPEN_DOMAIN.\n"));
-		return False;
-	}
-
-	r_u.status = _samr_open_domain(p, &q_u, &r_u);
-
-	/* store the response in the SMB stream */
-	if(!samr_io_r_open_domain("", &r_u, rdata, 0)) {
-		DEBUG(0,("api_samr_open_domain: unable to marshall SAMR_R_OPEN_DOMAIN.\n"));
-		return False;
-	}
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -99,24 +58,8 @@ static BOOL api_samr_open_domain(pipes_s
 
 static BOOL api_samr_get_usrdom_pwinfo(pipes_struct *p)
 {
-	SAMR_Q_GET_USRDOM_PWINFO q_u;
-	SAMR_R_GET_USRDOM_PWINFO r_u;
-
-	prs_struct *data = &p->in_data.data;
-	prs_struct *rdata = &p->out_data.rdata;
-
-	ZERO_STRUCT(q_u);
-	ZERO_STRUCT(r_u);
-
-	if(!samr_io_q_get_usrdom_pwinfo("", &q_u, data, 0))
-		return False;
-
-	r_u.status = _samr_get_usrdom_pwinfo(p, &q_u, &r_u);
-
-	if(!samr_io_r_get_usrdom_pwinfo("", &r_u, rdata, 0))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -125,24 +68,8 @@ static BOOL api_samr_get_usrdom_pwinfo(p
 
 static BOOL api_samr_query_sec_obj(pipes_struct *p)
 {
-	SAMR_Q_QUERY_SEC_OBJ q_u;
-	SAMR_R_QUERY_SEC_OBJ r_u;
-
-	prs_struct *data = &p->in_data.data;
-	prs_struct *rdata = &p->out_data.rdata;
-
-	ZERO_STRUCT(q_u);
-	ZERO_STRUCT(r_u);
-
-	if(!samr_io_q_query_sec_obj("", &q_u, data, 0))
-		return False;
-
-	r_u.status = _samr_query_sec_obj(p, &q_u, &r_u);
-
-	if(!samr_io_r_query_sec_obj("", &r_u, rdata, 0))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -151,25 +78,8 @@ static BOOL api_samr_query_sec_obj(pipes
 
 static BOOL api_samr_enum_dom_users(pipes_struct *p)
 {
-	SAMR_Q_ENUM_DOM_USERS q_u;
-	SAMR_R_ENUM_DOM_USERS r_u;
-	prs_struct *data = &p->in_data.data;
-	prs_struct *rdata = &p->out_data.rdata;
-
-	ZERO_STRUCT(q_u);
-	ZERO_STRUCT(r_u);
-
-	/* grab the samr open */
-	if(!samr_io_q_enum_dom_users("", &q_u, data, 0))
-		return False;
-
-	r_u.status = _samr_enum_dom_users(p, &q_u, &r_u);
-
-	/* store the response in the SMB stream */
-	if(!samr_io_r_enum_dom_users("", &r_u, rdata, 0))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -178,25 +88,8 @@ static BOOL api_samr_enum_dom_users(pipe
 
 static BOOL api_samr_enum_dom_groups(pipes_struct *p)
 {
-	SAMR_Q_ENUM_DOM_GROUPS q_u;
-	SAMR_R_ENUM_DOM_GROUPS r_u;
-	prs_struct *data = &p->in_data.data;
-	prs_struct *rdata = &p->out_data.rdata;
-
-	ZERO_STRUCT(q_u);
-	ZERO_STRUCT(r_u);
-
-	/* grab the samr open */
-	if(!samr_io_q_enum_dom_groups("", &q_u, data, 0))
-		return False;
-
-	r_u.status = _samr_enum_dom_groups(p, &q_u, &r_u);
-
-	/* store the response in the SMB stream */
-	if(!samr_io_r_enum_dom_groups("", &r_u, rdata, 0))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -205,25 +98,8 @@ static BOOL api_samr_enum_dom_groups(pip
 
 static BOOL api_samr_enum_dom_aliases(pipes_struct *p)
 {
-	SAMR_Q_ENUM_DOM_ALIASES q_u;
-	SAMR_R_ENUM_DOM_ALIASES r_u;
-	prs_struct *data = &p->in_data.data;
-	prs_struct *rdata = &p->out_data.rdata;
-	
-	ZERO_STRUCT(q_u);
-	ZERO_STRUCT(r_u);
-
-	/* grab the samr open */
-	if(!samr_io_q_enum_dom_aliases("", &q_u, data, 0))
-		return False;
-
-	r_u.status = _samr_enum_dom_aliases(p, &q_u, &r_u);
-
-	/* store the response in the SMB stream */
-	if(!samr_io_r_enum_dom_aliases("", &r_u, rdata, 0))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -232,24 +108,8 @@ static BOOL api_samr_enum_dom_aliases(pi
 
 static BOOL api_samr_query_dispinfo(pipes_struct *p)
 {
-	SAMR_Q_QUERY_DISPINFO q_u;
-	SAMR_R_QUERY_DISPINFO r_u;
-	prs_struct *data = &p->in_data.data;
-	prs_struct *rdata = &p->out_data.rdata;
-
-	ZERO_STRUCT(q_u);
-	ZERO_STRUCT(r_u);
-
-	if(!samr_io_q_query_dispinfo("", &q_u, data, 0))
-		return False;
-
-	r_u.status = _samr_query_dispinfo(p, &q_u, &r_u);
-
-	/* store the response in the SMB stream */
-	if(!samr_io_r_query_dispinfo("", &r_u, rdata, 0))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -258,25 +118,8 @@ static BOOL api_samr_query_dispinfo(pipe
 
 static BOOL api_samr_query_aliasinfo(pipes_struct *p)
 {
-	SAMR_Q_QUERY_ALIASINFO q_u;
-	SAMR_R_QUERY_ALIASINFO r_u;
-	prs_struct *data = &p->in_data.data;
-	prs_struct *rdata = &p->out_data.rdata;
-
-	ZERO_STRUCT(q_u);
-	ZERO_STRUCT(r_u);
-
-	/* grab the samr open */
-	if(!samr_io_q_query_aliasinfo("", &q_u, data, 0))
-		return False;
-
-	r_u.status = _samr_query_aliasinfo(p, &q_u, &r_u);
-
-	/* store the response in the SMB stream */
-	if(!samr_io_r_query_aliasinfo("", &r_u, rdata, 0))
-		return False;
-  
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -285,25 +128,8 @@ static BOOL api_samr_query_aliasinfo(pip
 
 static BOOL api_samr_lookup_names(pipes_struct *p)
 {
-	SAMR_Q_LOOKUP_NAMES q_u;
-	SAMR_R_LOOKUP_NAMES r_u;
-	prs_struct *data = &p->in_data.data;
-	prs_struct *rdata = &p->out_data.rdata;
-
-	ZERO_STRUCT(q_u);
-	ZERO_STRUCT(r_u);
-
-	/* grab the samr lookup names */
-	if(!samr_io_q_lookup_names("", &q_u, data, 0))
-		return False;
-
-	r_u.status = _samr_lookup_names(p, &q_u, &r_u);
-
-	/* store the response in the SMB stream */
-	if(!samr_io_r_lookup_names("", &r_u, rdata, 0))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -312,29 +138,8 @@ static BOOL api_samr_lookup_names(pipes_
 
 static BOOL api_samr_chgpasswd_user(pipes_struct *p)
 {
-	SAMR_Q_CHGPASSWD_USER q_u;
-	SAMR_R_CHGPASSWD_USER r_u;
-	prs_struct *data = &p->in_data.data;
-	prs_struct *rdata = &p->out_data.rdata;
-
-	ZERO_STRUCT(q_u);
-	ZERO_STRUCT(r_u);
-
-	/* unknown 38 command */
-	if (!samr_io_q_chgpasswd_user("", &q_u, data, 0)) {
-		DEBUG(0,("api_samr_chgpasswd_user: Failed to unmarshall SAMR_Q_CHGPASSWD_USER.\n"));
-		return False;
-	}
-
-	r_u.status = _samr_chgpasswd_user(p, &q_u, &r_u);
-
-	/* store the response in the SMB stream */
-	if(!samr_io_r_chgpasswd_user("", &r_u, rdata, 0)) {
-		DEBUG(0,("api_samr_chgpasswd_user: Failed to marshall SAMR_R_CHGPASSWD_USER.\n" ));
-		return False;
-	}
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -343,25 +148,8 @@ static BOOL api_samr_chgpasswd_user(pipe
 
 static BOOL api_samr_lookup_rids(pipes_struct *p)
 {
-	SAMR_Q_LOOKUP_RIDS q_u;
-	SAMR_R_LOOKUP_RIDS r_u;
-	prs_struct *data = &p->in_data.data;
-	prs_struct *rdata = &p->out_data.rdata;
-
-	ZERO_STRUCT(q_u);
-	ZERO_STRUCT(r_u);
-
-	/* grab the samr lookup names */
-	if(!samr_io_q_lookup_rids("", &q_u, data, 0))
-		return False;
-
-	r_u.status = _samr_lookup_rids(p, &q_u, &r_u);
-
-	/* store the response in the SMB stream */
-	if(!samr_io_r_lookup_rids("", &r_u, rdata, 0))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -370,27 +158,8 @@ static BOOL api_samr_lookup_rids(pipes_s
 
 static BOOL api_samr_open_user(pipes_struct *p)
 {
-	SAMR_Q_OPEN_USER q_u;
-	SAMR_R_OPEN_USER r_u;
-	prs_struct *data = &p->in_data.data;
-	prs_struct *rdata = &p->out_data.rdata;
-
-	ZERO_STRUCT(q_u);
-	ZERO_STRUCT(r_u);
-
-	/* grab the samr unknown 22 */
-	if(!samr_io_q_open_user("", &q_u, data, 0))
-		return False;
-
-	r_u.status = _api_samr_open_user(p, &q_u, &r_u);
-
-	/* store the response in the SMB stream */
-	if(!samr_io_r_open_user("", &r_u, rdata, 0))
-		return False;
-
-	DEBUG(5,("samr_open_user: %d\n", __LINE__));
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -399,25 +168,8 @@ static BOOL api_samr_open_user(pipes_str
 
 static BOOL api_samr_query_userinfo(pipes_struct *p)
 {
-	SAMR_Q_QUERY_USERINFO q_u;
-	SAMR_R_QUERY_USERINFO r_u;
-	prs_struct *data = &p->in_data.data;
-	prs_struct *rdata = &p->out_data.rdata;
-
-	ZERO_STRUCT(q_u);
-	ZERO_STRUCT(r_u);
-
-	/* grab the samr unknown 24 */
-	if(!samr_io_q_query_userinfo("", &q_u, data, 0))
-		return False;
-
-	r_u.status = _samr_query_userinfo(p, &q_u, &r_u);
-
-	/* store the response in the SMB stream */
-	if(!samr_io_r_query_userinfo("", &r_u, rdata, 0))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -426,26 +178,8 @@ static BOOL api_samr_query_userinfo(pipe
 
 static BOOL api_samr_query_usergroups(pipes_struct *p)
 {
-	SAMR_Q_QUERY_USERGROUPS q_u;
-	SAMR_R_QUERY_USERGROUPS r_u;
-	prs_struct *data = &p->in_data.data;
-	prs_struct *rdata = &p->out_data.rdata;
-
-	ZERO_STRUCT(q_u);
-	ZERO_STRUCT(r_u);
-
-	/* grab the samr unknown 32 */
-	if(!samr_io_q_query_usergroups("", &q_u, data, 0))
-		return False;
-
-	r_u.status = _samr_query_usergroups(p, &q_u, &r_u);
-
-	/* store the response in the SMB stream */
-	if(!samr_io_r_query_usergroups("", &r_u, rdata, 0)) {
-		return False;
-	}
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -454,27 +188,8 @@ static BOOL api_samr_query_usergroups(pi
 
 static BOOL api_samr_query_dom_info(pipes_struct *p)
 {
-	SAMR_Q_QUERY_DOMAIN_INFO q_u;
-	SAMR_R_QUERY_DOMAIN_INFO r_u;
-	prs_struct *data = &p->in_data.data;
-	prs_struct *rdata = &p->out_data.rdata;
-
-	ZERO_STRUCT(q_u);
-	ZERO_STRUCT(r_u);
-
-	/* grab the samr unknown 8 command */
-	if(!samr_io_q_query_dom_info("", &q_u, data, 0))
-		return False;
-
-	r_u.status = _samr_query_dom_info(p, &q_u, &r_u);
-
-	/* store the response in the SMB stream */
-	if(!samr_io_r_query_dom_info("", &r_u, rdata, 0))
-		return False;
-
-	DEBUG(5,("api_samr_query_dom_info: %d\n", __LINE__));
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -483,30 +198,8 @@ static BOOL api_samr_query_dom_info(pipe
 
 static BOOL api_samr_create_user(pipes_struct *p)
 {
-	prs_struct *data = &p->in_data.data;
-	prs_struct *rdata = &p->out_data.rdata;
-
-	SAMR_Q_CREATE_USER q_u;
-	SAMR_R_CREATE_USER r_u;
-
-	ZERO_STRUCT(q_u);
-	ZERO_STRUCT(r_u);
-
-	/* grab the samr create user */
-	if (!samr_io_q_create_user("", &q_u, data, 0)) {
-		DEBUG(0,("api_samr_create_user: Unable to unmarshall SAMR_Q_CREATE_USER.\n"));
-		return False;
-	}
-
-	r_u.status=_api_samr_create_user(p, &q_u, &r_u);
-
-	/* store the response in the SMB stream */
-	if(!samr_io_r_create_user("", &r_u, rdata, 0)) {
-		DEBUG(0,("api_samr_create_user: Unable to marshall SAMR_R_CREATE_USER.\n"));
-		return False;
-	}
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -515,25 +208,8 @@ static BOOL api_samr_create_user(pipes_s
 
 static BOOL api_samr_connect_anon(pipes_struct *p)
 {
-	SAMR_Q_CONNECT_ANON q_u;
-	SAMR_R_CONNECT_ANON r_u;
-	prs_struct *data = &p->in_data.data;
-	prs_struct *rdata = &p->out_data.rdata;
-
-	ZERO_STRUCT(q_u);
-	ZERO_STRUCT(r_u);
-
-	/* grab the samr open policy */
-	if(!samr_io_q_connect_anon("", &q_u, data, 0))
-		return False;
-
-	r_u.status = _samr_connect_anon(p, &q_u, &r_u);
-
-	/* store the response in the SMB stream */
-	if(!samr_io_r_connect_anon("", &r_u, rdata, 0))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -542,25 +218,8 @@ static BOOL api_samr_connect_anon(pipes_
 
 static BOOL api_samr_connect(pipes_struct *p)
 {
-	SAMR_Q_CONNECT q_u;
-	SAMR_R_CONNECT r_u;
-	prs_struct *data = &p->in_data.data;
-	prs_struct *rdata = &p->out_data.rdata;
-
-	ZERO_STRUCT(q_u);
-	ZERO_STRUCT(r_u);
-
-	/* grab the samr open policy */
-	if(!samr_io_q_connect("", &q_u, data, 0))
-		return False;
-
-	r_u.status = _samr_connect(p, &q_u, &r_u);
-
-	/* store the response in the SMB stream */
-	if(!samr_io_r_connect("", &r_u, rdata, 0))
-		return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /**********************************************************************
@@ -569,27 +228,8 @@ static BOOL api_samr_connect(pipes_struc
 
 static BOOL api_samr_lookup_domain(pipes_struct *p)
 {
-	SAMR_Q_LOOKUP_DOMAIN q_u;
-	SAMR_R_LOOKUP_DOMAIN r_u;
-	prs_struct *data = &p->in_data.data;
-	prs_struct *rdata = &p->out_data.rdata;
-  
-	ZERO_STRUCT(q_u);
-	ZERO_STRUCT(r_u);
-
-	if(!samr_io_q_lookup_domain("", &q_u, data, 0)) {
-		DEBUG(0,("api_samr_lookup_domain: Unable to unmarshall SAMR_Q_LOOKUP_DOMAIN.\n"));
-		return False;
-	}
-
-	r_u.status = _samr_lookup_domain(p, &q_u, &r_u);
-	
-	if(!samr_io_r_lookup_domain("", &r_u, rdata, 0)){
-		DEBUG(0,("api_samr_lookup_domain: Unable to marshall SAMR_R_LOOKUP_DOMAIN.\n"));
-		return False;
-	}
-	
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /**********************************************************************
@@ -598,27 +238,8 @@ static BOOL api_samr_lookup_domain(pipes
 
 static BOOL api_samr_enum_domains(pipes_struct *p)
 {
-	SAMR_Q_ENUM_DOMAINS q_u;
-	SAMR_R_ENUM_DOMAINS r_u;
-	prs_struct *data = &p->in_data.data;
-	prs_struct *rdata = &p->out_data.rdata;
-  
-	ZERO_STRUCT(q_u);
-	ZERO_STRUCT(r_u);
-
-	if(!samr_io_q_enum_domains("", &q_u, data, 0)) {
-		DEBUG(0,("api_samr_enum_domains: Unable to unmarshall SAMR_Q_ENUM_DOMAINS.\n"));
-		return False;
-	}
-
-	r_u.status = _samr_enum_domains(p, &q_u, &r_u);
-
-	if(!samr_io_r_enum_domains("", &r_u, rdata, 0)) {
-		DEBUG(0,("api_samr_enum_domains: Unable to marshall SAMR_R_ENUM_DOMAINS.\n"));
-		return False;
-	}
-	
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -627,29 +248,8 @@ static BOOL api_samr_enum_domains(pipes_
 
 static BOOL api_samr_open_alias(pipes_struct *p)
 {
-	SAMR_Q_OPEN_ALIAS q_u;
-	SAMR_R_OPEN_ALIAS r_u;
-	prs_struct *data = &p->in_data.data;
-	prs_struct *rdata = &p->out_data.rdata;
-
-	ZERO_STRUCT(q_u);
-	ZERO_STRUCT(r_u);
-
-	/* grab the samr open policy */
-	if(!samr_io_q_open_alias("", &q_u, data, 0)) {
-		DEBUG(0,("api_samr_open_alias: Unable to unmarshall SAMR_Q_OPEN_ALIAS.\n"));
-		return False;
-	}
-
-	r_u.status=_api_samr_open_alias(p, &q_u, &r_u);
-
-	/* store the response in the SMB stream */
-	if(!samr_io_r_open_alias("", &r_u, rdata, 0)) {
-		DEBUG(0,("api_samr_open_alias: Unable to marshall SAMR_R_OPEN_ALIAS.\n"));
-		return False;
-	}
-	
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -658,32 +258,8 @@ static BOOL api_samr_open_alias(pipes_st
 
 static BOOL api_samr_set_userinfo(pipes_struct *p)
 {
-	SAMR_Q_SET_USERINFO q_u;
-	SAMR_R_SET_USERINFO r_u;
-	prs_struct *data = &p->in_data.data;
-	prs_struct *rdata = &p->out_data.rdata;
-
-	ZERO_STRUCT(q_u);
-	ZERO_STRUCT(r_u);
-
-	if (!samr_io_q_set_userinfo("", &q_u, data, 0)) {
-		DEBUG(0,("api_samr_set_userinfo: Unable to unmarshall SAMR_Q_SET_USERINFO.\n"));
-		/* Fix for W2K SP2 */
-		if (q_u.switch_value == 0x1a) {
-			setup_fault_pdu(p, NT_STATUS(0x1c000006));
-			return True;
-		}
-		return False;
-	}
-
-	r_u.status = _samr_set_userinfo(p, &q_u, &r_u);
-
-	if(!samr_io_r_set_userinfo("", &r_u, rdata, 0)) {
-		DEBUG(0,("api_samr_set_userinfo: Unable to marshall SAMR_R_SET_USERINFO.\n"));
-		return False;
-	}
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -692,28 +268,8 @@ static BOOL api_samr_set_userinfo(pipes_
 
 static BOOL api_samr_set_userinfo2(pipes_struct *p)
 {
-	SAMR_Q_SET_USERINFO2 q_u;
-	SAMR_R_SET_USERINFO2 r_u;
-
-	prs_struct *data = &p->in_data.data;
-	prs_struct *rdata = &p->out_data.rdata;
-
-	ZERO_STRUCT(q_u);
-	ZERO_STRUCT(r_u);
-
-	if (!samr_io_q_set_userinfo2("", &q_u, data, 0)) {
-		DEBUG(0,("api_samr_set_userinfo2: Unable to unmarshall SAMR_Q_SET_USERINFO2.\n"));
-		return False;
-	}
-
-	r_u.status = _samr_set_userinfo2(p, &q_u, &r_u);
-
-	if(!samr_io_r_set_userinfo2("", &r_u, rdata, 0)) {
-		DEBUG(0,("api_samr_set_userinfo2: Unable to marshall SAMR_R_SET_USERINFO2.\n"));
-		return False;
-	}
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -722,28 +278,8 @@ static BOOL api_samr_set_userinfo2(pipes
 
 static BOOL api_samr_query_useraliases(pipes_struct *p)
 {
-	SAMR_Q_QUERY_USERALIASES q_u;
-	SAMR_R_QUERY_USERALIASES r_u;
-
-	prs_struct *data = &p->in_data.data;
-	prs_struct *rdata = &p->out_data.rdata;
-
-	ZERO_STRUCT(q_u);
-	ZERO_STRUCT(r_u);
-
-	if (!samr_io_q_query_useraliases("", &q_u, data, 0)) {
-		DEBUG(0,("api_samr_query_useraliases:  Unable to unmarshall SAMR_Q_QUERY_USERALIASES.\n"));
-		return False;
-	}
-
-	r_u.status = _samr_query_useraliases(p, &q_u, &r_u);
-
-	if (! samr_io_r_query_useraliases("", &r_u, rdata, 0)) {
-		DEBUG(0,("api_samr_query_useraliases:  Unable to nmarshall SAMR_R_QUERY_USERALIASES.\n"));
-		return False;
-	}
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -752,26 +288,8 @@ static BOOL api_samr_query_useraliases(p
 
 static BOOL api_samr_query_aliasmem(pipes_struct *p)
 {
-	SAMR_Q_QUERY_ALIASMEM q_u;
-	SAMR_R_QUERY_ALIASMEM r_u;
-
-	prs_struct *data = &p->in_data.data;
-	prs_struct *rdata = &p->out_data.rdata;
-
-	ZERO_STRUCT(q_u);
-	ZERO_STRUCT(r_u);
-
-	if (!samr_io_q_query_aliasmem("", &q_u, data, 0)) {
-		return False;
-	}
-
-	r_u.status = _samr_query_aliasmem(p, &q_u, &r_u);
-
-	if (!samr_io_r_query_aliasmem("", &r_u, rdata, 0)) {
-		return False;
-	}
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -780,26 +298,8 @@ static BOOL api_samr_query_aliasmem(pipe
 
 static BOOL api_samr_query_groupmem(pipes_struct *p)
 {
-	SAMR_Q_QUERY_GROUPMEM q_u;
-	SAMR_R_QUERY_GROUPMEM r_u;
-
-	prs_struct *data = &p->in_data.data;
-	prs_struct *rdata = &p->out_data.rdata;
-
-	ZERO_STRUCT(q_u);
-	ZERO_STRUCT(r_u);
-
-	if (!samr_io_q_query_groupmem("", &q_u, data, 0)) {
-		return False;
-	}
-
-	r_u.status = _samr_query_groupmem(p, &q_u, &r_u);
-
-	if (!samr_io_r_query_groupmem("", &r_u, rdata, 0)) {
-		return False;
-	}
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -808,26 +308,8 @@ static BOOL api_samr_query_groupmem(pipe
 
 static BOOL api_samr_add_aliasmem(pipes_struct *p)
 {
-	SAMR_Q_ADD_ALIASMEM q_u;
-	SAMR_R_ADD_ALIASMEM r_u;
-
-	prs_struct *data = &p->in_data.data;
-	prs_struct *rdata = &p->out_data.rdata;
-
-	ZERO_STRUCT(q_u);
-	ZERO_STRUCT(r_u);
-
-	if (!samr_io_q_add_aliasmem("", &q_u, data, 0)) {
-		return False;
-	}
-
-	r_u.status = _samr_add_aliasmem(p, &q_u, &r_u);
-
-	if (!samr_io_r_add_aliasmem("", &r_u, rdata, 0)) {
-		return False;
-	}
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -836,26 +318,8 @@ static BOOL api_samr_add_aliasmem(pipes_
 
 static BOOL api_samr_del_aliasmem(pipes_struct *p)
 {
-	SAMR_Q_DEL_ALIASMEM q_u;
-	SAMR_R_DEL_ALIASMEM r_u;
-
-	prs_struct *data = &p->in_data.data;
-	prs_struct *rdata = &p->out_data.rdata;
-
-	ZERO_STRUCT(q_u);
-	ZERO_STRUCT(r_u);
-
-	if (!samr_io_q_del_aliasmem("", &q_u, data, 0)) {
-		return False;
-	}
-
-	r_u.status = _samr_del_aliasmem(p, &q_u, &r_u);
-
-	if (!samr_io_r_del_aliasmem("", &r_u, rdata, 0)) {
-		return False;
-	}
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -864,26 +328,8 @@ static BOOL api_samr_del_aliasmem(pipes_
 
 static BOOL api_samr_add_groupmem(pipes_struct *p)
 {
-	SAMR_Q_ADD_GROUPMEM q_u;
-	SAMR_R_ADD_GROUPMEM r_u;
-
-	prs_struct *data = &p->in_data.data;
-	prs_struct *rdata = &p->out_data.rdata;
-
-	ZERO_STRUCT(q_u);
-	ZERO_STRUCT(r_u);
-
-	if (!samr_io_q_add_groupmem("", &q_u, data, 0)) {
-		return False;
-	}
-
-	r_u.status = _samr_add_groupmem(p, &q_u, &r_u);
-
-	if (!samr_io_r_add_groupmem("", &r_u, rdata, 0)) {
-		return False;
-	}
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -892,26 +338,8 @@ static BOOL api_samr_add_groupmem(pipes_
 
 static BOOL api_samr_del_groupmem(pipes_struct *p)
 {
-	SAMR_Q_DEL_GROUPMEM q_u;
-	SAMR_R_DEL_GROUPMEM r_u;
-
-	prs_struct *data = &p->in_data.data;
-	prs_struct *rdata = &p->out_data.rdata;
-
-	ZERO_STRUCT(q_u);
-	ZERO_STRUCT(r_u);
-
-	if (!samr_io_q_del_groupmem("", &q_u, data, 0)) {
-		return False;
-	}
-
-	r_u.status = _samr_del_groupmem(p, &q_u, &r_u);
-
-	if (!samr_io_r_del_groupmem("", &r_u, rdata, 0)) {
-		return False;
-	}
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -920,26 +348,8 @@ static BOOL api_samr_del_groupmem(pipes_
 
 static BOOL api_samr_delete_dom_user(pipes_struct *p)
 {
-	SAMR_Q_DELETE_DOM_USER q_u;
-	SAMR_R_DELETE_DOM_USER r_u;
-
-	prs_struct *data = &p->in_data.data;
-	prs_struct *rdata = &p->out_data.rdata;
-
-	ZERO_STRUCT(q_u);
-	ZERO_STRUCT(r_u);
-
-	if (!samr_io_q_delete_dom_user("", &q_u, data, 0)) {
-		return False;
-	}
-
-	r_u.status = _samr_delete_dom_user(p, &q_u, &r_u);
-
-	if (!samr_io_r_delete_dom_user("", &r_u, rdata, 0)) {
-		return False;
-	}
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -948,26 +358,8 @@ static BOOL api_samr_delete_dom_user(pip
 
 static BOOL api_samr_delete_dom_group(pipes_struct *p)
 {
-	SAMR_Q_DELETE_DOM_GROUP q_u;
-	SAMR_R_DELETE_DOM_GROUP r_u;
-
-	prs_struct *data = &p->in_data.data;
-	prs_struct *rdata = &p->out_data.rdata;
-
-	ZERO_STRUCT(q_u);
-	ZERO_STRUCT(r_u);
-
-	if (!samr_io_q_delete_dom_group("", &q_u, data, 0)) {
-		return False;
-	}
-
-	r_u.status = _samr_delete_dom_group(p, &q_u, &r_u);
-
-	if (!samr_io_r_delete_dom_group("", &r_u, rdata, 0)) {
-		return False;
-	}
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -976,26 +368,8 @@ static BOOL api_samr_delete_dom_group(pi
 
 static BOOL api_samr_delete_dom_alias(pipes_struct *p)
 {
-	SAMR_Q_DELETE_DOM_ALIAS q_u;
-	SAMR_R_DELETE_DOM_ALIAS r_u;
-
-	prs_struct *data = &p->in_data.data;
-	prs_struct *rdata = &p->out_data.rdata;
-
-	ZERO_STRUCT(q_u);
-	ZERO_STRUCT(r_u);
-
-	if (!samr_io_q_delete_dom_alias("", &q_u, data, 0)) {
-		return False;
-	}
-
-	r_u.status = _samr_delete_dom_alias(p, &q_u, &r_u);
-
-	if (!samr_io_r_delete_dom_alias("", &r_u, rdata, 0)) {
-		return False;
-	}
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -1004,26 +378,8 @@ static BOOL api_samr_delete_dom_alias(pi
 
 static BOOL api_samr_create_dom_group(pipes_struct *p)
 {
-	SAMR_Q_CREATE_DOM_GROUP q_u;
-	SAMR_R_CREATE_DOM_GROUP r_u;
-
-	prs_struct *data = &p->in_data.data;
-	prs_struct *rdata = &p->out_data.rdata;
-
-	ZERO_STRUCT(q_u);
-	ZERO_STRUCT(r_u);
-
-	if (!samr_io_q_create_dom_group("", &q_u, data, 0)) {
-		return False;
-	}
-
-	r_u.status = _samr_create_dom_group(p, &q_u, &r_u);
-
-	if (!samr_io_r_create_dom_group("", &r_u, rdata, 0)) {
-		return False;
-	}
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -1032,26 +388,8 @@ static BOOL api_samr_create_dom_group(pi
 
 static BOOL api_samr_create_dom_alias(pipes_struct *p)
 {
-	SAMR_Q_CREATE_DOM_ALIAS q_u;
-	SAMR_R_CREATE_DOM_ALIAS r_u;
-
-	prs_struct *data = &p->in_data.data;
-	prs_struct *rdata = &p->out_data.rdata;
-
-	ZERO_STRUCT(q_u);
-	ZERO_STRUCT(r_u);
-
-	if (!samr_io_q_create_dom_alias("", &q_u, data, 0)) {
-		return False;
-	}
-
-	r_u.status = _samr_create_dom_alias(p, &q_u, &r_u);
-
-	if (!samr_io_r_create_dom_alias("", &r_u, rdata, 0)) {
-		return False;
-	}
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -1060,26 +398,8 @@ static BOOL api_samr_create_dom_alias(pi
 
 static BOOL api_samr_query_groupinfo(pipes_struct *p)
 {
-	SAMR_Q_QUERY_GROUPINFO q_u;
-	SAMR_R_QUERY_GROUPINFO r_u;
-
-	prs_struct *data = &p->in_data.data;
-	prs_struct *rdata = &p->out_data.rdata;
-
-	ZERO_STRUCT(q_u);
-	ZERO_STRUCT(r_u);
-
-	if (!samr_io_q_query_groupinfo("", &q_u, data, 0)) {
-		return False;
-	}
-
-	r_u.status = _samr_query_groupinfo(p, &q_u, &r_u);
-
-	if (!samr_io_r_query_groupinfo("", &r_u, rdata, 0)) {
-		return False;
-	}
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -1088,26 +408,8 @@ static BOOL api_samr_query_groupinfo(pip
 
 static BOOL api_samr_set_groupinfo(pipes_struct *p)
 {
-	SAMR_Q_SET_GROUPINFO q_u;
-	SAMR_R_SET_GROUPINFO r_u;
-
-	prs_struct *data = &p->in_data.data;
-	prs_struct *rdata = &p->out_data.rdata;
-
-	ZERO_STRUCT(q_u);
-	ZERO_STRUCT(r_u);
-
-	if (!samr_io_q_set_groupinfo("", &q_u, data, 0)) {
-		return False;
-	}
-
-	r_u.status = _samr_set_groupinfo(p, &q_u, &r_u);
-
-	if (!samr_io_r_set_groupinfo("", &r_u, rdata, 0)) {
-		return False;
-	}
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -1116,26 +418,8 @@ static BOOL api_samr_set_groupinfo(pipes
 
 static BOOL api_samr_get_dom_pwinfo(pipes_struct *p)
 {
-	SAMR_Q_GET_DOM_PWINFO q_u;
-	SAMR_R_GET_DOM_PWINFO r_u;
-
-	prs_struct *data = &p->in_data.data;
-	prs_struct *rdata = &p->out_data.rdata;
-
-	ZERO_STRUCT(q_u);
-	ZERO_STRUCT(r_u);
-
-	if (!samr_io_q_get_dom_pwinfo("", &q_u, data, 0)) {
-		return False;
-	}
-
-	r_u.status = _samr_get_dom_pwinfo(p, &q_u, &r_u);
-
-	if (!samr_io_r_get_dom_pwinfo("", &r_u, rdata, 0)) {
-		return False;
-	}
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -1144,26 +428,8 @@ static BOOL api_samr_get_dom_pwinfo(pipe
 
 static BOOL api_samr_open_group(pipes_struct *p)
 {
-	SAMR_Q_OPEN_GROUP q_u;
-	SAMR_R_OPEN_GROUP r_u;
-
-	prs_struct *data = &p->in_data.data;
-	prs_struct *rdata = &p->out_data.rdata;
-
-	ZERO_STRUCT(q_u);
-	ZERO_STRUCT(r_u);
-
-	if (!samr_io_q_open_group("", &q_u, data, 0)) {
-		return False;
-	}
-
-	r_u.status = _samr_open_group(p, &q_u, &r_u);
-
-	if (!samr_io_r_open_group("", &r_u, rdata, 0)) {
-		return False;
-	}
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -1172,26 +438,8 @@ static BOOL api_samr_open_group(pipes_st
 
 static BOOL api_samr_unknown_2d(pipes_struct *p)
 {
-	SAMR_Q_UNKNOWN_2D q_u;
-	SAMR_R_UNKNOWN_2D r_u;
-
-	prs_struct *data = &p->in_data.data;
-	prs_struct *rdata = &p->out_data.rdata;
-
-	ZERO_STRUCT(q_u);
-	ZERO_STRUCT(r_u);
-
-	if (!samr_io_q_unknown_2d("", &q_u, data, 0)) {
-		return False;
-	}
-
-	r_u.status = _samr_unknown_2d(p, &q_u, &r_u);
-
-	if (!samr_io_r_unknown_2d("", &r_u, rdata, 0)) {
-		return False;
-	}
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -1287,5 +535,6 @@ static struct api_struct api_samr_cmds [
  ********************************************************************/
 BOOL api_samr_rpc(pipes_struct *p)
 {
-	return api_rpcTNP(p, "api_samr_rpc", api_samr_cmds);
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
diff -pruwN samba-2.2.12/source/rpc_server/srv_samr_nt.c samba-2.2.12-livebox/rpc_server/srv_samr_nt.c
--- samba-2.2.12/source/rpc_server/srv_samr_nt.c	2004-08-12 20:24:27.000000000 +0200
+++ samba-2.2.12-livebox/rpc_server/srv_samr_nt.c	2010-03-31 11:45:59.000000000 +0200
@@ -7,7 +7,7 @@
  *  Copyright (C) Paul Ashton                       1997.
  *  Copyright (C) Marc Jacobsen						1999.
  *  Copyright (C) Jeremy Allison               2001-2002.
- *  Copyright (C) Jean Franois Micouleau      1998-2001.
+ *  Copyright (C) Jean Fran�ois Micouleau      1998-2001.
  *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the GNU General Public License as published by
@@ -61,20 +61,8 @@ struct samr_info {
 
 static struct samr_info *get_samr_info_by_sid(DOM_SID *psid)
 {
-	struct samr_info *info;
-	fstring sid_str;
-
-	if ((info = (struct samr_info *)malloc(sizeof(struct samr_info))) == NULL)
-		return NULL;
-
-	ZERO_STRUCTP(info);
-	if (psid) {
-		DEBUG(10,("get_samr_info_by_sid: created new info for sid %s\n", sid_to_string(sid_str, psid) ));
-		sid_copy( &info->sid, psid);
-	} else {
-		DEBUG(10,("get_samr_info_by_sid: created new info for NULL sid.\n"));
-	}
-	return info;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -83,26 +71,8 @@ static struct samr_info *get_samr_info_b
 
 static void free_samr_db(struct samr_info *info)
 {
-	int i;
-
-	if (info->disp_info.group_dbloaded) {
-		for (i=0; i<info->disp_info.num_group_account; i++)
-			SAFE_FREE(info->disp_info.disp_group_info[i].grp);
-
-		SAFE_FREE(info->disp_info.disp_group_info);
-	}
-
-	if (info->disp_info.user_dbloaded){
-		for (i=0; i<info->disp_info.num_user_account; i++)
-			pdb_free_sam(info->disp_info.disp_user_info[i].sam);
-
-		SAFE_FREE(info->disp_info.disp_user_info);
-	}
-
-	info->disp_info.user_dbloaded=False;
-	info->disp_info.group_dbloaded=False;
-	info->disp_info.num_group_account=0;
-	info->disp_info.num_user_account=0;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -111,10 +81,8 @@ static void free_samr_db(struct samr_inf
 
 static void free_samr_info(void *ptr)
 {
-	struct samr_info *info=(struct samr_info *) ptr;
-
-	free_samr_db(info);
-	SAFE_FREE(info);
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -123,84 +91,20 @@ static void free_samr_info(void *ptr)
 
 static void samr_clear_passwd_fields( SAM_USER_INFO_21 *pass, int num_entries)
 {
-	int i;
-
-	if (!pass)
-		return;
-
-	for (i = 0; i < num_entries; i++) {
-		memset(&pass[i].lm_pwd, '\0', sizeof(pass[i].lm_pwd));
-		memset(&pass[i].nt_pwd, '\0', sizeof(pass[i].nt_pwd));
-	}
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 static void samr_clear_sam_passwd(SAM_ACCOUNT *sam_pass)
 {
-	if (!sam_pass)
-		return;
-
-	if (sam_pass->lm_pw)
-		memset(sam_pass->lm_pw, '\0', 16);
-	if (sam_pass->nt_pw)
-		memset(sam_pass->nt_pw, '\0', 16);
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 static NTSTATUS load_sampwd_entries(struct samr_info *info, uint16 acb_mask)
 {
-	SAM_ACCOUNT *pwd = NULL;
-	DISP_USER_INFO *pwd_array = NULL;
-
-	DEBUG(10,("load_sampwd_entries\n"));
-
-	/* if the snapshoot is already loaded, return */
-	if (info->disp_info.user_dbloaded==True) {
-		DEBUG(10,("load_sampwd_entries: already in memory\n"));
-		return NT_STATUS_OK;
-	}
-
-	if (!pdb_setsampwent(False)) {
-		DEBUG(0, ("load_sampwd_entries: Unable to open passdb.\n"));
-		return NT_STATUS_ACCESS_DENIED;
-	}
-
-	for (pdb_init_sam(&pwd); pdb_getsampwent(pwd) == True; pwd=NULL, pdb_init_sam(&pwd) ) {
-		
-		if (acb_mask != 0 && !(pwd->acct_ctrl & acb_mask)) {
-			pdb_free_sam(pwd);
-			DEBUG(5,(" acb_mask %x reject\n", acb_mask));
-			continue;
-		}
-
-		/* Realloc some memory for the array of ptr to the SAM_ACCOUNT structs */
-		if (info->disp_info.num_user_account % MAX_SAM_ENTRIES == 0) {
-		
-			DEBUG(10,("load_sampwd_entries: allocating more memory\n"));
-			pwd_array=(DISP_USER_INFO *)Realloc(info->disp_info.disp_user_info, 
-			                  (info->disp_info.num_user_account+MAX_SAM_ENTRIES)*sizeof(DISP_USER_INFO));
-
-			if (pwd_array==NULL)
-				return NT_STATUS_NO_MEMORY;
-
-			info->disp_info.disp_user_info=pwd_array;
-		}
-	
-		/* link the SAM_ACCOUNT to the array */
-		info->disp_info.disp_user_info[info->disp_info.num_user_account].sam=pwd;
-
-		DEBUG(10,("load_sampwd_entries: entry: %d\n", info->disp_info.num_user_account));
-
-		info->disp_info.num_user_account++;	
-	}
-
-	pdb_endsampwent();
-
-	/* the snapshoot is in memory, we're ready to enumerate fast */
-
-	info->disp_info.user_dbloaded=True;
-
-	DEBUG(12,("load_sampwd_entries: done\n"));
-
-	return NT_STATUS_OK;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*
@@ -210,91 +114,14 @@ static NTSTATUS load_sampwd_entries(stru
 
 static int setup_fake_group_map(GROUP_MAP **ret_map)
 {
-	static GROUP_MAP static_map[2];
-	static BOOL group_map_init;
-	extern DOM_SID global_sam_sid;
-
-	*ret_map = (GROUP_MAP *)malloc(sizeof(GROUP_MAP)*2);
-	if (!ret_map)
-		return 2;
-	
-	if (group_map_init) {
-		memcpy( *ret_map, &static_map[0], sizeof(GROUP_MAP)*2);
-		return sizeof(static_map)/sizeof(GROUP_MAP);
-	}
-
-	group_map_init = True;
-
-	static_map[0].gid = (gid_t)-1;
-	sid_copy(&static_map[0].sid, &global_sam_sid);
-	sid_append_rid(&static_map[0].sid, DOMAIN_GROUP_RID_ADMINS);
-	static_map[0].sid_name_use = SID_NAME_DOM_GRP;
-	fstrcpy(static_map[0].nt_name, "Domain Admins");
-	fstrcpy(static_map[0].comment, "Administrators for the domain");
-	static_map[0].privilege = 0;
-
-	static_map[1].gid = (gid_t)-1;
-	sid_copy(&static_map[1].sid, &global_sam_sid);
-	sid_append_rid(&static_map[1].sid, DOMAIN_GROUP_RID_USERS);
-	static_map[1].sid_name_use = SID_NAME_DOM_GRP;
-	fstrcpy(static_map[1].nt_name, "Domain Users");
-	fstrcpy(static_map[1].comment, "Users in the domain");
-	static_map[1].privilege = 0;
-
-	memcpy( *ret_map, &static_map[0], sizeof(GROUP_MAP)*2);
-	return sizeof(static_map)/sizeof(GROUP_MAP);
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 static NTSTATUS load_group_domain_entries(struct samr_info *info, DOM_SID *sid)
 {
-	GROUP_MAP *map;
-	DISP_GROUP_INFO *grp_array = NULL;
-	uint32 group_entries = 0;
-	uint32 i;
-
-	DEBUG(10,("load_group_domain_entries\n"));
-
-	/* if the snapshoot is already loaded, return */
-	if (info->disp_info.group_dbloaded==True) {
-		DEBUG(10,("load_group_domain_entries: already in memory\n"));
-		return NT_STATUS_OK;
-	}
-
-	/*
-	 * This is a really ugly hack to make this interface work in the 2.2.x code. JRA.
-	 */
-
-	group_entries = setup_fake_group_map(&map);
-
-	info->disp_info.num_group_account=group_entries;
-
-	grp_array=(DISP_GROUP_INFO *)malloc(info->disp_info.num_group_account*sizeof(DISP_GROUP_INFO));
-
-	if (group_entries!=0 && grp_array==NULL) {
-		return NT_STATUS_NO_MEMORY;
-	}
-
-	info->disp_info.disp_group_info=grp_array;
-
-	for (i=0; i<group_entries; i++) {
-	
-		grp_array[i].grp=(DOMAIN_GRP *)malloc(sizeof(DOMAIN_GRP));
-	
-		fstrcpy(grp_array[i].grp->name, map[i].nt_name);
-		fstrcpy(grp_array[i].grp->comment, map[i].comment);
-		sid_split_rid(&map[i].sid, &grp_array[i].grp->rid);
-		grp_array[i].grp->attr=SID_NAME_DOM_GRP;
-	}
-
-	SAFE_FREE(map);
-
-	/* the snapshoot is in memory, we're ready to enumerate fast */
-
-	info->disp_info.group_dbloaded=True;
-
-	DEBUG(12,("load_group_domain_entries: done\n"));
-
-	return NT_STATUS_OK;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -306,73 +133,8 @@ static NTSTATUS get_sampwd_entries(SAM_U
                                 int *total_entries, int *num_entries,
                                 int max_num_entries, uint16 acb_mask)
 {
-	SAM_ACCOUNT *pwd = NULL;
-	BOOL not_finished = True;
- 
-	(*num_entries) = 0;
-	(*total_entries) = 0;
-
-	if (pw_buf == NULL)
-		return NT_STATUS_NO_MEMORY;
-
-	pdb_init_sam(&pwd);
-
-	if (!pdb_setsampwent(False)) {
-		DEBUG(0, ("get_sampwd_entries: Unable to open passdb.\n"));
-		pdb_free_sam(pwd);
-		return NT_STATUS_ACCESS_DENIED;
-	}
-	
-	while (((not_finished = pdb_getsampwent(pwd)) != False) 
-	       && (*num_entries) < max_num_entries) 
-	{
-	        int user_name_len;
-		
-	        if (start_idx > 0) {
-
-			pdb_reset_sam(pwd);
-
-			/* skip the requested number of entries.
-			   not very efficient, but hey...  */
-			start_idx--;
-			continue;
-		}
-		
-		user_name_len = strlen(pdb_get_username(pwd))+1;
-		init_unistr2(&pw_buf[(*num_entries)].uni_user_name, pdb_get_username(pwd), user_name_len);
-		init_uni_hdr(&pw_buf[(*num_entries)].hdr_user_name, user_name_len);
-		pw_buf[(*num_entries)].user_rid = pwd->user_rid;
-		memset((char *)pw_buf[(*num_entries)].nt_pwd, '\0', 16);
-		
-		/* Now check if the NT compatible password is available. */
-		if (pdb_get_nt_passwd(pwd))
-			memcpy( pw_buf[(*num_entries)].nt_pwd , pdb_get_nt_passwd(pwd), 16);
-		
-		pw_buf[(*num_entries)].acb_info = pdb_get_acct_ctrl(pwd);
-		
-		DEBUG(5, ("entry idx: %d user %s, rid 0x%x, acb %x",
-			  (*num_entries), pdb_get_username(pwd), pdb_get_user_rid(pwd), pdb_get_acct_ctrl(pwd) ));
-		
-		if (acb_mask == 0 || (pwd->acct_ctrl & acb_mask)) {
-			DEBUG(5,(" acb_mask %x accepts\n", acb_mask));
-			(*num_entries)++;
-		} else {
-			DEBUG(5,(" acb_mask %x rejects\n", acb_mask));
-		}
-
-		(*total_entries)++;
-		
-		pdb_reset_sam(pwd);
-
-	}
-	
-	pdb_endsampwent();
-	pdb_free_sam(pwd);
-
-	if (not_finished)
-		return STATUS_MORE_ENTRIES;
-	else
-		return NT_STATUS_OK;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -381,15 +143,8 @@ static NTSTATUS get_sampwd_entries(SAM_U
 
 NTSTATUS _samr_close_hnd(pipes_struct *p, SAMR_Q_CLOSE_HND *q_u, SAMR_R_CLOSE_HND *r_u)
 {
-	r_u->status = NT_STATUS_OK;
-
-	/* close the policy handle */
-	if (!close_policy_hnd(p, &q_u->pol))
-		return NT_STATUS_OBJECT_NAME_INVALID;
-
-	DEBUG(5,("samr_reply_close_hnd: %d\n", __LINE__));
-
-	return r_u->status;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -398,35 +153,14 @@ NTSTATUS _samr_close_hnd(pipes_struct *p
 
 NTSTATUS _samr_open_domain(pipes_struct *p, SAMR_Q_OPEN_DOMAIN *q_u, SAMR_R_OPEN_DOMAIN *r_u)
 {
-	struct samr_info *info;
-
-	r_u->status = NT_STATUS_OK;
-
-	/* find the connection policy handle. */
-	if (!find_policy_by_hnd(p, &q_u->pol, NULL))
-		return NT_STATUS_INVALID_HANDLE;
-
-	/* associate the domain SID with the (unique) handle. */
-	if ((info = get_samr_info_by_sid(&q_u->dom_sid.sid))==NULL)
-		return NT_STATUS_NO_MEMORY;
-
-	/* get a (unique) handle.  open a policy on it. */
-	if (!create_policy_hnd(p, &r_u->domain_pol, free_samr_info, (void *)info))
-		return NT_STATUS_OBJECT_NAME_NOT_FOUND;
-
-	DEBUG(5,("samr_open_domain: %d\n", __LINE__));
-
-	return r_u->status;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 static uint32 get_lsa_policy_samr_rid(struct samr_info *info)
 {
-	if (!info) {
-		DEBUG(3,("Error getting policy\n"));
-		return 0xffffffff;
-	}
-
-	return info->sid.sub_auths[info->sid.num_auths-1];
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -435,25 +169,8 @@ static uint32 get_lsa_policy_samr_rid(st
 
 NTSTATUS _samr_get_usrdom_pwinfo(pipes_struct *p, SAMR_Q_GET_USRDOM_PWINFO *q_u, SAMR_R_GET_USRDOM_PWINFO *r_u)
 {
-	struct samr_info *info = NULL;
-
-	r_u->status = NT_STATUS_OK;
-
-	/* find the policy handle.  open a policy on it. */
-	if (!find_policy_by_hnd(p, &q_u->user_pol, (void **)&info)) {
-		return NT_STATUS_INVALID_HANDLE;
-	}
-
-	/* find the user's rid */
-	if (get_lsa_policy_samr_rid(info) == 0xffffffff) {
-		return NT_STATUS_OBJECT_TYPE_MISMATCH;
-	}
-
-	init_samr_r_get_usrdom_pwinfo(r_u, NT_STATUS_OK);
-
-	DEBUG(5,("_samr_get_usrdom_pwinfo: %d\n", __LINE__));
-
-	return r_u->status;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -462,44 +179,8 @@ NTSTATUS _samr_get_usrdom_pwinfo(pipes_s
 
 static NTSTATUS samr_make_usr_obj_sd(TALLOC_CTX *ctx, SEC_DESC_BUF **buf, DOM_SID *usr_sid)
 {
-	extern DOM_SID global_sid_Builtin;
-	extern DOM_SID global_sid_World;
-	DOM_SID adm_sid;
-	DOM_SID act_sid;
-
-	SEC_ACE ace[4];
-	SEC_ACCESS mask;
-
-	SEC_ACL *psa = NULL;
-	SEC_DESC *psd = NULL;
-	size_t sd_size;
-
-	sid_copy(&adm_sid, &global_sid_Builtin);
-	sid_append_rid(&adm_sid, BUILTIN_ALIAS_RID_ADMINS);
-
-	sid_copy(&act_sid, &global_sid_Builtin);
-	sid_append_rid(&act_sid, BUILTIN_ALIAS_RID_ACCOUNT_OPS);
-
-	init_sec_access(&mask, 0x2035b);
-	init_sec_ace(&ace[0], &global_sid_World, SEC_ACE_TYPE_ACCESS_ALLOWED, mask, 0);
-
-	init_sec_access(&mask, 0xf07ff);
-	init_sec_ace(&ace[1], &adm_sid, SEC_ACE_TYPE_ACCESS_ALLOWED, mask, 0);
-	init_sec_ace(&ace[2], &act_sid, SEC_ACE_TYPE_ACCESS_ALLOWED, mask, 0);
-
-	init_sec_access(&mask,0x20044);
-	init_sec_ace(&ace[3], usr_sid, SEC_ACE_TYPE_ACCESS_ALLOWED, mask, 0);
-
-	if((psa = make_sec_acl(ctx, NT4_ACL_REVISION, 4, ace)) == NULL)
-		return NT_STATUS_NO_MEMORY;
-
-	if((psd = make_sec_desc(ctx, SEC_DESC_REVISION, NULL, NULL, NULL, psa, &sd_size)) == NULL)
-		return NT_STATUS_NO_MEMORY;
-
-	if((*buf = make_sec_desc_buf(ctx, sd_size, psd)) == NULL)
-		return NT_STATUS_NO_MEMORY;
-
-	return NT_STATUS_OK;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 static BOOL get_lsa_policy_samr_sid(pipes_struct *p, POLICY_HND *pol, DOM_SID *sid)
@@ -523,21 +204,8 @@ static BOOL get_lsa_policy_samr_sid(pipe
 
 NTSTATUS _samr_query_sec_obj(pipes_struct *p, SAMR_Q_QUERY_SEC_OBJ *q_u, SAMR_R_QUERY_SEC_OBJ *r_u)
 {
-	DOM_SID pol_sid;
-
-	r_u->status = NT_STATUS_OK;
-
-	/* Get the SID. */
-
-	if (!get_lsa_policy_samr_sid(p, &q_u->user_pol, &pol_sid))
-		return NT_STATUS_INVALID_HANDLE;
-
-	r_u->status = samr_make_usr_obj_sd(p->mem_ctx, &r_u->buf, &pol_sid);
-
-	if (NT_STATUS_IS_OK(r_u->status))
-		r_u->ptr = 1;
-
-	return r_u->status;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -547,34 +215,8 @@ makes a SAM_ENTRY / UNISTR2* structure f
 static void make_user_sam_entry_list(TALLOC_CTX *ctx, SAM_ENTRY **sam_pp, UNISTR2 **uni_name_pp,
                 uint32 num_sam_entries, SAM_USER_INFO_21 *pass)
 {
-	uint32 i;
-	SAM_ENTRY *sam;
-	UNISTR2 *uni_name;
-
-	*sam_pp = NULL;
-	*uni_name_pp = NULL;
-
-	if (num_sam_entries == 0)
-		return;
-
-	sam = (SAM_ENTRY *)talloc_zero(ctx, sizeof(SAM_ENTRY)*num_sam_entries);
-
-	uni_name = (UNISTR2 *)talloc_zero(ctx, sizeof(UNISTR2)*num_sam_entries);
-
-	if (sam == NULL || uni_name == NULL) {
-		DEBUG(0, ("NULL pointers in SAMR_R_QUERY_DISPINFO\n"));
-		return;
-	}
-
-	for (i = 0; i < num_sam_entries; i++) {
-		int len = pass[i].uni_user_name.uni_str_len;
-
-		init_sam_entry(&sam[i], len, pass[i].user_rid);
-		copy_unistr2(&uni_name[i], &pass[i].uni_user_name);
-	}
-
-	*sam_pp = sam;
-	*uni_name_pp = uni_name;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -583,48 +225,8 @@ static void make_user_sam_entry_list(TAL
 
 NTSTATUS _samr_enum_dom_users(pipes_struct *p, SAMR_Q_ENUM_DOM_USERS *q_u, SAMR_R_ENUM_DOM_USERS *r_u)
 {
-	SAM_USER_INFO_21 pass[MAX_SAM_ENTRIES];
-	int num_entries = 0;
-	int total_entries = 0;
-	
-	r_u->status = NT_STATUS_OK;
-
-	/* find the policy handle.  open a policy on it. */
-	if (!find_policy_by_hnd(p, &q_u->pol, NULL))
-		return NT_STATUS_INVALID_HANDLE;
-
-	DEBUG(5,("_samr_enum_dom_users: %d\n", __LINE__));
-
-	become_root();
-	r_u->status = get_sampwd_entries(pass, q_u->start_idx, &total_entries, &num_entries,
-								MAX_SAM_ENTRIES, q_u->acb_mask);
-	unbecome_root();
-
-	if (NT_STATUS_IS_ERR(r_u->status))
-		return r_u->status;
-
-	samr_clear_passwd_fields(pass, num_entries);
-
-	/* 
-	 * Note from JRA. total_entries is not being used here. Currently if there is a
-	 * large user base then it looks like NT will enumerate until get_sampwd_entries
-	 * returns False due to num_entries being zero. This will cause an access denied
-	 * return. I don't think this is right and needs further investigation. Note that
-	 * this is also the same in the TNG code (I don't think that has been tested with
-	 * a very large user list as MAX_SAM_ENTRIES is set to 600).
-	 * 
-	 * I also think that one of the 'num_entries' return parameters is probably
-	 * the "max entries" parameter - but in the TNG code they're all currently set to the same
-	 * value (again I think this is wrong).
-	 */
-
-	make_user_sam_entry_list(p->mem_ctx, &r_u->sam, &r_u->uni_acct_name, num_entries, pass);
-
-	init_samr_r_enum_dom_users(r_u, q_u->start_idx + num_entries, num_entries);
-
-	DEBUG(5,("_samr_enum_dom_users: %d\n", __LINE__));
-
-	return r_u->status;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -634,37 +236,8 @@ makes a SAM_ENTRY / UNISTR2* structure f
 static void make_group_sam_entry_list(TALLOC_CTX *ctx, SAM_ENTRY **sam_pp, UNISTR2 **uni_name_pp,
                 uint32 num_sam_entries, DOMAIN_GRP *grp)
 {
-	uint32 i;
-	SAM_ENTRY *sam;
-	UNISTR2 *uni_name;
-
-	*sam_pp = NULL;
-	*uni_name_pp = NULL;
-
-	if (num_sam_entries == 0)
-		return;
-
-	sam = (SAM_ENTRY *)talloc_zero(ctx, sizeof(SAM_ENTRY)*num_sam_entries);
-
-	uni_name = (UNISTR2 *)talloc_zero(ctx, sizeof(UNISTR2)*num_sam_entries);
-
-	if (sam == NULL || uni_name == NULL) {
-		DEBUG(0, ("NULL pointers in SAMR_R_QUERY_DISPINFO\n"));
-		return;
-	}
-
-	for (i = 0; i < num_sam_entries; i++) {
-		/*
-		 * JRA. I think this should include the null. TNG does not.
-		 */
-		int len = strlen(unix_to_dos_static(grp[i].name))+1;
-
-		init_sam_entry(&sam[i], len, grp[i].rid);
-		init_unistr2(&uni_name[i], unix_to_dos_static(grp[i].name), len);
-	}
-
-	*sam_pp = sam;
-	*uni_name_pp = uni_name;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -674,98 +247,8 @@ static void make_group_sam_entry_list(TA
 static NTSTATUS get_group_alias_entries(DOMAIN_GRP *d_grp, DOM_SID *sid, uint32 start_idx,
 				    uint32 *p_num_entries, uint32 max_entries)
 {
-	fstring sid_str;
-	fstring sam_sid_str;
-	uint32 num_entries = 0;
-
-	sid_to_string(sid_str, sid);
-	sid_to_string(sam_sid_str, &global_sam_sid);
-
-	*p_num_entries = 0;
-
-	/* well-known aliases */
-	if (strequal(sid_str, "S-1-5-32")) {
-		const char *alias_name;
-		while (!lp_hide_local_users() &&
-				num_entries < max_entries && 
-				((alias_name = builtin_alias_rids[num_entries].name) != NULL)) {
-
-			fstrcpy(d_grp[num_entries].name, alias_name);
-			d_grp[num_entries].rid = builtin_alias_rids[num_entries].rid;
-
-			num_entries++;
-		}
-	} else if (strequal(sid_str, sam_sid_str) && !lp_hide_local_users()) {
-		fstring name;
-		char *sep;
-		struct sys_grent *glist;
-		struct sys_grent *grp;
-
-		sep = lp_winbind_separator();
-
-		/* local aliases */
-		/* we return the UNIX groups here.  This seems to be the right */
-		/* thing to do, since NT member servers return their local     */
-		/* groups in the same situation.                               */
-
-		/* use getgrent_list() to retrieve the list of groups to avoid
-		 * problems with getgrent possible infinite loop by internal
-		 * libc grent structures overwrites by called functions */
-		grp = glist = getgrent_list();
-		if (grp == NULL)
-			return NT_STATUS_NO_MEMORY;
-
-		for (;(num_entries < max_entries) && (grp != NULL); grp = grp->next) {
-			int i;
-			uint32 trid;
-
-			fstrcpy(name,grp->gr_name);
-			DEBUG(10,("get_group_alias_entries: got group %s\n", name ));
-
-			/* Don't return winbind groups as they are not local! */
-
-			if (strchr(name, *sep) != NULL) {
-				DEBUG(10,("get_group_alias_entries: not returing %s, not local.\n", name ));
-				continue;
-			}
-
-			/* Don't return user private groups... */
-			if (Get_Pwnam(name, False) != 0) {
-				DEBUG(10,("get_group_alias_entries: not returing %s, clashes with user.\n", name ));
-				continue;
-			}
-
-			trid = pdb_gid_to_group_rid(grp->gr_gid);
-			for( i = 0; i < num_entries; i++)
-				if ( d_grp[i].rid == trid )
-					break;
-
-			if ( i < num_entries )
-				continue; /* rid was there, dup! */
-
-			/* JRA - added this for large group db enumeration... */
-
-			if (start_idx > 0) {
-				/* skip the requested number of entries.
-					not very efficient, but hey...
-				*/
-				start_idx--;
-				continue;
-			}
-
-			fstrcpy(d_grp[num_entries].name, name);
-			d_grp[num_entries].rid = trid;
-			num_entries++;
-		}
-
-		grent_free(glist);
-	}
-
-	*p_num_entries = num_entries;
-
-	if (num_entries >= max_entries)
-		return STATUS_MORE_ENTRIES;
-	return NT_STATUS_OK;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -775,32 +258,8 @@ static NTSTATUS get_group_alias_entries(
 static NTSTATUS get_group_domain_entries(DOMAIN_GRP *d_grp, DOM_SID *sid, uint32 start_idx,
 				     uint32 *p_num_entries, uint32 max_entries)
 {
-	fstring sid_str;
-	fstring sam_sid_str;
-	uint32 num_entries = 0;
-	fstring name="Domain Admins";
-	fstring comment="Just to make it work !";
-
-	sid_to_string(sid_str, sid);
-	sid_to_string(sam_sid_str, &global_sam_sid);
-
-	*p_num_entries = 0;
-
-	fstrcpy(d_grp[0].name, name);
-	fstrcpy(d_grp[0].comment, comment);
-	d_grp[0].rid = DOMAIN_GROUP_RID_ADMINS;
-	d_grp[0].attr=SID_NAME_DOM_GRP;
-
-	fstrcpy(d_grp[1].name, "Domain Users");
-	fstrcpy(d_grp[1].comment, "Just to make it work !");
-	d_grp[1].rid = DOMAIN_GROUP_RID_USERS;
-	d_grp[1].attr=SID_NAME_DOM_GRP;
-
-	num_entries = 2;
-
-	*p_num_entries = num_entries;
-
-	return NT_STATUS_OK;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -811,26 +270,8 @@ static NTSTATUS get_group_domain_entries
 
 NTSTATUS _samr_enum_dom_groups(pipes_struct *p, SAMR_Q_ENUM_DOM_GROUPS *q_u, SAMR_R_ENUM_DOM_GROUPS *r_u)
 {
-	DOMAIN_GRP grp[2];
-	uint32 num_entries;
-	DOM_SID sid;
-
-	r_u->status = NT_STATUS_OK;
-
-	if (!get_lsa_policy_samr_sid(p, &q_u->pol, &sid))
-		return NT_STATUS_INVALID_HANDLE;
-
-	DEBUG(5,("samr_reply_enum_dom_groups: %d\n", __LINE__));
-
-	get_group_domain_entries(grp, &sid, q_u->start_idx, &num_entries, MAX_SAM_ENTRIES);
-
-	make_group_sam_entry_list(p->mem_ctx, &r_u->sam, &r_u->uni_grp_name, num_entries, grp);
-
-	init_samr_r_enum_dom_groups(r_u, q_u->start_idx, num_entries);
-
-	DEBUG(5,("samr_enum_dom_groups: %d\n", __LINE__));
-
-	return r_u->status;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 
@@ -840,31 +281,8 @@ NTSTATUS _samr_enum_dom_groups(pipes_str
 
 NTSTATUS _samr_enum_dom_aliases(pipes_struct *p, SAMR_Q_ENUM_DOM_ALIASES *q_u, SAMR_R_ENUM_DOM_ALIASES *r_u)
 {
-	DOMAIN_GRP grp[MAX_SAM_ENTRIES];
-	uint32 num_entries = 0;
-	fstring sid_str;
-	DOM_SID sid;
-	
-	r_u->status = NT_STATUS_OK;
-
-	if (!get_lsa_policy_samr_sid(p, &q_u->pol, &sid))
-		return NT_STATUS_INVALID_HANDLE;
-
-	sid_to_string(sid_str, &sid);
-	DEBUG(5,("samr_reply_enum_dom_aliases: sid %s\n", sid_str));
-
-	r_u->status = get_group_alias_entries(grp, &sid, q_u->start_idx,
-						&num_entries, MAX_SAM_ENTRIES);
-	if (NT_STATUS_IS_ERR(r_u->status))
-		return r_u->status;
-
-	make_group_sam_entry_list(p->mem_ctx, &r_u->sam, &r_u->uni_grp_name, num_entries, grp);
-
-	init_samr_r_enum_dom_aliases(r_u, q_u->start_idx + num_entries, num_entries);
-
-	DEBUG(5,("samr_enum_dom_aliases: %d\n", __LINE__));
-
-	return r_u->status;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -872,185 +290,8 @@ NTSTATUS _samr_enum_dom_aliases(pipes_st
  ********************************************************************/
 NTSTATUS _samr_query_dispinfo(pipes_struct *p, SAMR_Q_QUERY_DISPINFO *q_u, SAMR_R_QUERY_DISPINFO *r_u)
 {
-	struct samr_info *info = NULL;
-	uint32 struct_size=0x20; /* W2K always reply that, client doesn't care */
-	uint16 acb_mask;
-	
-	uint32 max_entries=q_u->max_entries;
-	uint32 enum_context=q_u->start_idx;
-	uint32 max_size=q_u->max_size;
-
-	SAM_DISPINFO_CTR *ctr;
-	uint32 temp_size=0, total_data_size=0;
-	NTSTATUS disp_ret;
-	uint32 num_account = 0;
-	enum remote_arch_types ra_type = get_remote_arch();
-	int max_sam_entries;
-
-	max_sam_entries = (ra_type == RA_WIN95) ? MAX_SAM_ENTRIES_W95 : MAX_SAM_ENTRIES_W2K;
-
-	DEBUG(5, ("samr_reply_query_dispinfo: %d\n", __LINE__));
-	r_u->status = NT_STATUS_OK;
-
-	/* find the policy handle.  open a policy on it. */
-	if (!find_policy_by_hnd(p, &q_u->domain_pol, (void **)&info))
-		return NT_STATUS_INVALID_HANDLE;
-
-	/*
-	 * calculate how many entries we will return.
-	 * based on 
-	 * - the number of entries the client asked
-	 * - our limit on that
-	 * - the starting point (enumeration context)
-	 * - the buffer size the client will accept
-	 */
-
-	/*
-	 * We are a lot more like W2K. Instead of reading the SAM
-	 * each time to find the records we need to send back,
-	 * we read it once and link that copy to the sam handle.
-	 * For large user list (over the MAX_SAM_ENTRIES)
-	 * it's a definitive win.
-	 * second point to notice: between enumerations
-	 * our sam is now the same as it's a snapshoot.
-	 * third point: got rid of the static SAM_USER_21 struct
-	 * no more intermediate.
-	 * con: it uses much more memory, as a full copy is stored
-	 * in memory.
-	 *
-	 * If you want to change it, think twice and think
-	 * of the second point , that's really important.
-	 *
-	 * JFM, 12/20/2001
-	 */
-
-	/* Get what we need from the password database */
-
-	if (q_u->switch_level==2)
-		acb_mask = ACB_WSTRUST;
-	else
-		acb_mask = ACB_NORMAL;
-
-	/* Get what we need from the password database */
-	switch (q_u->switch_level) {
-		case 0x1:
-		case 0x2:
-		case 0x4:
-			become_root();		
-			r_u->status=load_sampwd_entries(info, acb_mask);
-			unbecome_root();
-			if (NT_STATUS_IS_ERR(r_u->status)) {
-				DEBUG(5, ("_samr_query_dispinfo: load_sampwd_entries failed\n"));
-				return r_u->status;
-			}
-			num_account = info->disp_info.num_user_account;
-			break;
-		case 0x3:
-		case 0x5:
-			r_u->status = load_group_domain_entries(info, &info->sid);
-			if (NT_STATUS_IS_ERR(r_u->status))
-				return r_u->status;
-			num_account = info->disp_info.num_group_account;
-			break;
-		default:
-			DEBUG(0,("_samr_query_dispinfo: Unknown info level (%u)\n", (unsigned int)q_u->switch_level ));
-			return NT_STATUS_INVALID_INFO_CLASS;
-	}
-
-	/* first limit the number of entries we will return */
-	if(max_entries > max_sam_entries) {
-		DEBUG(5, ("samr_reply_query_dispinfo: client requested %d entries, limiting to %d\n", max_entries, max_sam_entries));
-		max_entries = max_sam_entries;
-	}
-
-	if (enum_context > num_account) {
-		DEBUG(5, ("samr_reply_query_dispinfo: enumeration handle over total entries\n"));
-		return NT_STATUS_OK;
-	}
-
-	/* verify we won't overflow */
-	if (max_entries > num_account-enum_context) {
-		max_entries = num_account-enum_context;
-		DEBUG(5, ("samr_reply_query_dispinfo: only %d entries to return\n", max_entries));
-	}
-
-	/* calculate the size and limit on the number of entries we will return */
-	temp_size=max_entries*struct_size;
-	
-	if (temp_size>max_size) {
-		max_entries=MIN((max_size/struct_size),max_entries);
-		DEBUG(5, ("samr_reply_query_dispinfo: buffer size limits to only %d entries\n", max_entries));
-	}
-
-	if (!(ctr = (SAM_DISPINFO_CTR *)talloc_zero(p->mem_ctx,sizeof(SAM_DISPINFO_CTR))))
-		return NT_STATUS_NO_MEMORY;
-
-	ZERO_STRUCTP(ctr);
-
-	/* Now create reply structure */
-	switch (q_u->switch_level) {
-	case 0x1:
-		if (max_entries) {
-			if (!(ctr->sam.info1 = (SAM_DISPINFO_1 *)talloc_zero(p->mem_ctx,max_entries*sizeof(SAM_DISPINFO_1))))
-				return NT_STATUS_NO_MEMORY;
-		}
-		disp_ret = init_sam_dispinfo_1(p->mem_ctx, ctr->sam.info1, max_entries, enum_context, info->disp_info.disp_user_info);
-		if (NT_STATUS_IS_ERR(disp_ret))
-			return disp_ret;
-		break;
-	case 0x2:
-		if (max_entries) {
-			if (!(ctr->sam.info2 = (SAM_DISPINFO_2 *)talloc_zero(p->mem_ctx,max_entries*sizeof(SAM_DISPINFO_2))))
-				return NT_STATUS_NO_MEMORY;
-		}
-		disp_ret = init_sam_dispinfo_2(p->mem_ctx, ctr->sam.info2, max_entries, enum_context, info->disp_info.disp_user_info);
-		if (NT_STATUS_IS_ERR(disp_ret))
-			return disp_ret;
-		break;
-	case 0x3:
-		if (max_entries) {
-			if (!(ctr->sam.info3 = (SAM_DISPINFO_3 *)talloc_zero(p->mem_ctx,max_entries*sizeof(SAM_DISPINFO_3))))
-				return NT_STATUS_NO_MEMORY;
-		}
-		disp_ret = init_sam_dispinfo_3(p->mem_ctx, ctr->sam.info3, max_entries, enum_context, info->disp_info.disp_group_info);
-		if (NT_STATUS_IS_ERR(disp_ret))
-			return disp_ret;
-		break;
-	case 0x4:
-		if (max_entries) {
-			if (!(ctr->sam.info4 = (SAM_DISPINFO_4 *)talloc_zero(p->mem_ctx,max_entries*sizeof(SAM_DISPINFO_4))))
-				return NT_STATUS_NO_MEMORY;
-		}
-		disp_ret = init_sam_dispinfo_4(p->mem_ctx, ctr->sam.info4, max_entries, enum_context, info->disp_info.disp_user_info);
-		if (NT_STATUS_IS_ERR(disp_ret))
-			return disp_ret;
-		break;
-	case 0x5:
-		if (max_entries) {
-			if (!(ctr->sam.info5 = (SAM_DISPINFO_5 *)talloc_zero(p->mem_ctx,max_entries*sizeof(SAM_DISPINFO_5))))
-				return NT_STATUS_NO_MEMORY;
-		}
-		disp_ret = init_sam_dispinfo_5(p->mem_ctx, ctr->sam.info5, max_entries, enum_context, info->disp_info.disp_group_info);
-		if (NT_STATUS_IS_ERR(disp_ret))
-			return disp_ret;
-		break;
-
-	default:
-		ctr->sam.info = NULL;
-		return NT_STATUS_INVALID_INFO_CLASS;
-	}
-
-	/* calculate the total size */
-	total_data_size=num_account*struct_size;
-
-	if (enum_context+max_entries < num_account)
-		r_u->status = STATUS_MORE_ENTRIES;
-
-	DEBUG(5, ("_samr_query_dispinfo: %d\n", __LINE__));
-
-	init_samr_r_query_dispinfo(r_u, max_entries, total_data_size, temp_size, q_u->switch_level, ctr, r_u->status);
-
-	return r_u->status;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 
 }
 
@@ -1060,41 +301,9 @@ NTSTATUS _samr_query_dispinfo(pipes_stru
 
 NTSTATUS _samr_query_aliasinfo(pipes_struct *p, SAMR_Q_QUERY_ALIASINFO *q_u, SAMR_R_QUERY_ALIASINFO *r_u)
 {
-	fstring alias_desc = "Local Unix group";
-	fstring alias="";
-	enum SID_NAME_USE type;
-	uint32 alias_rid;
-	struct samr_info *info = NULL;
-
-	r_u->status = NT_STATUS_OK;
-
-	DEBUG(5,("_samr_query_aliasinfo: %d\n", __LINE__));
-
-	/* find the policy handle.  open a policy on it. */
-	if (!find_policy_by_hnd(p, &q_u->pol, (void **)&info))
-		return NT_STATUS_INVALID_HANDLE;
-
-	alias_rid = get_lsa_policy_samr_rid(info);
-	if(alias_rid == 0xffffffff)
-		return NT_STATUS_NO_SUCH_ALIAS;
-
-	if(!local_lookup_rid(alias_rid, alias, &type))
-		return NT_STATUS_NO_SUCH_ALIAS;
-
-	switch (q_u->switch_level) {
-	case 3:
-		r_u->ptr = 1;
-		r_u->ctr.switch_value1 = 3;
-		init_samr_alias_info3(&r_u->ctr.alias.info3, alias_desc);
-		break;
-	default:
-		return NT_STATUS_INVALID_INFO_CLASS;
-	}
-
-	DEBUG(5,("_samr_query_aliasinfo: %d\n", __LINE__));
-
-	return r_u->status;
-}
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
+}
 
 #if 0
 /*******************************************************************
@@ -1162,73 +371,8 @@ NTSTATUS _samr_query_aliasinfo(pipes_str
 
 NTSTATUS _samr_lookup_names(pipes_struct *p, SAMR_Q_LOOKUP_NAMES *q_u, SAMR_R_LOOKUP_NAMES *r_u)
 {
-	uint32 rid[MAX_SAM_ENTRIES];
-	uint32 local_rid;
-	enum SID_NAME_USE type[MAX_SAM_ENTRIES];
-	enum SID_NAME_USE local_type;
-	int i;
-	int num_rids = q_u->num_names2;
-	DOM_SID pol_sid;
-	fstring sid_str;
-
-	r_u->status = NT_STATUS_OK;
-
-	DEBUG(5,("_samr_lookup_names: %d\n", __LINE__));
-
-	ZERO_ARRAY(rid);
-	ZERO_ARRAY(type);
-
-	if (!get_lsa_policy_samr_sid(p, &q_u->pol, &pol_sid)) {
-		init_samr_r_lookup_names(p->mem_ctx, r_u, 0, NULL, NULL, NT_STATUS_OBJECT_TYPE_MISMATCH);
-		return r_u->status;
-	}
-
-	if (num_rids > MAX_SAM_ENTRIES) {
-		num_rids = MAX_SAM_ENTRIES;
-		DEBUG(5,("_samr_lookup_names: truncating entries to %d\n", num_rids));
-	}
-
-	DEBUG(5,("_samr_lookup_names: looking name on SID %s\n", sid_to_string(sid_str, &pol_sid)));
-
-	for (i = 0; i < num_rids; i++) {
-		fstring name;
-		DOM_SID sid;
-
-		r_u->status = NT_STATUS_NONE_MAPPED;
-
-		rid [i] = 0xffffffff;
-		type[i] = SID_NAME_UNKNOWN;
-
-		fstrcpy(name, dos_unistrn2(q_u->uni_name[i].buffer, q_u->uni_name[i].uni_str_len));
-
-		/*
-		 * we are only looking for a name
-		 * the SID we get back can be outside
-		 * the scope of the pol_sid
-		 *
-		 * in clear: it prevents to reply to domain\group: yes
-		 * when only builtin\group exists.
-		 *
-		 * a cleaner code is to add the sid of the domain we're looking in
-		 * to the local_lookup_name function.
-		 */
- 
-		if(local_lookup_name(global_myname, name, &sid, &local_type)) {
-			sid_split_rid(&sid, &local_rid);
- 
-			if (sid_equal(&sid, &pol_sid)) {
-				rid[i]=local_rid;
-				type[i]=local_type;
-				r_u->status = NT_STATUS_OK;
-			}
-		}
-	}
-
-	init_samr_r_lookup_names(p->mem_ctx, r_u, num_rids, rid, (uint32 *)type, r_u->status);
-
-	DEBUG(5,("_samr_lookup_names: %d\n", __LINE__));
-
-	return r_u->status;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -1237,39 +381,8 @@ NTSTATUS _samr_lookup_names(pipes_struct
 
 NTSTATUS _samr_chgpasswd_user(pipes_struct *p, SAMR_Q_CHGPASSWD_USER *q_u, SAMR_R_CHGPASSWD_USER *r_u)
 {
-    fstring user_name;
-    fstring wks;
-
-    DEBUG(5,("_samr_chgpasswd_user: %d\n", __LINE__));
-
-    r_u->status = NT_STATUS_OK;
-
-    fstrcpy(user_name, dos_unistrn2(q_u->uni_user_name.buffer, q_u->uni_user_name.uni_str_len));
-    fstrcpy(wks      , dos_unistrn2(q_u->uni_dest_host.buffer, q_u->uni_dest_host.uni_str_len));
-
-    DEBUG(5,("samr_chgpasswd_user: user: %s wks: %s\n", user_name, wks));
-
-	/*
-	 * Pass the user through the NT -> unix user mapping
-	 * function.
-	 */
- 
-	(void)map_username(user_name);
- 
-	/*
-	 * Do any UNIX username case mangling.
-	 */
-	(void)Get_Pwnam( user_name, True);
-
-    if (!pass_oem_change(user_name, q_u->lm_newpass.pass, q_u->lm_oldhash.hash,
-                         q_u->nt_newpass.pass, q_u->nt_oldhash.hash))
-        r_u->status = NT_STATUS_WRONG_PASSWORD;
-
-    init_samr_r_chgpasswd_user(r_u, r_u->status);
-
-    DEBUG(5,("_samr_chgpasswd_user: %d\n", __LINE__));
-
-    return r_u->status;
+DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -1279,34 +392,8 @@ makes a SAMR_R_LOOKUP_RIDS structure.
 static BOOL make_samr_lookup_rids(TALLOC_CTX *ctx, uint32 num_names, fstring names[],
 	    UNIHDR **pp_hdr_name, UNISTR2 **pp_uni_name)
 {
-	uint32 i;
-	UNIHDR *hdr_name = NULL;
-	UNISTR2 *uni_name = NULL;
-
-	*pp_uni_name = NULL;
-	*pp_hdr_name = NULL;
-
-	if (num_names != 0) {
-		hdr_name = (UNIHDR *)talloc_zero(ctx, sizeof(UNIHDR)*num_names);
-		if (hdr_name == NULL)
-			return False;
-
-		uni_name = (UNISTR2 *)talloc_zero(ctx,sizeof(UNISTR2)*num_names);
-		if (uni_name == NULL)
-			return False;
-	}
-
-	for (i = 0; i < num_names; i++) {
-		int len = names[i] != NULL ? strlen(names[i]) : 0;
-		DEBUG(10, ("names[%d]:%s\n", i, names[i]));
-		init_uni_hdr(&hdr_name[i], len);
-		init_unistr2(&uni_name[i], names[i], len);
-	}
-
-	*pp_uni_name = uni_name;
-	*pp_hdr_name = hdr_name;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -1315,63 +402,8 @@ static BOOL make_samr_lookup_rids(TALLOC
 
 NTSTATUS _samr_lookup_rids(pipes_struct *p, SAMR_Q_LOOKUP_RIDS *q_u, SAMR_R_LOOKUP_RIDS *r_u)
 {
-	fstring group_names[MAX_SAM_ENTRIES];
-	uint32 *group_attrs = NULL;
-	UNIHDR *hdr_name = NULL;
-	UNISTR2 *uni_name = NULL;
-	DOM_SID pol_sid;
-	int num_rids = q_u->num_rids1;
-	int i;
-
-	r_u->status = NT_STATUS_OK;
-
-	DEBUG(5,("_samr_lookup_rids: %d\n", __LINE__));
-
-	/* find the policy handle.  open a policy on it. */
-	if (!get_lsa_policy_samr_sid(p, &q_u->pol, &pol_sid))
-		return NT_STATUS_INVALID_HANDLE;
-
-	if (num_rids > MAX_SAM_ENTRIES) {
-		num_rids = MAX_SAM_ENTRIES;
-		DEBUG(5,("_samr_lookup_rids: truncating entries to %d\n", num_rids));
-	}
-
-	if (num_rids) {
-		if ((group_attrs = (uint32 *)talloc_zero(p->mem_ctx, num_rids * sizeof(uint32))) == NULL)
-			return NT_STATUS_NO_MEMORY;
-	}
-
-	r_u->status = NT_STATUS_NONE_MAPPED;
-
-	for (i = 0; i < num_rids; i++) {
-		fstring tmpname;
-		fstring domname;
-		DOM_SID sid;
-   		enum SID_NAME_USE type;
-
-		group_attrs[i] = SID_NAME_UNKNOWN;
-		*group_names[i] = '\0';
-
-		if (sid_equal(&pol_sid, &global_sam_sid)) {
-			sid_copy(&sid, &pol_sid);
-			sid_append_rid(&sid, q_u->rid[i]);
-
-			if (lookup_sid(&sid, domname, tmpname, &type)) {
-				r_u->status = NT_STATUS_OK;
-				group_attrs[i] = (uint32)type;
-				fstrcpy(group_names[i],tmpname);
-			}
-		}
-	}
-
-	if(!make_samr_lookup_rids(p->mem_ctx, num_rids, group_names, &hdr_name, &uni_name))
-		return NT_STATUS_NO_MEMORY;
-
-	init_samr_r_lookup_rids(r_u, num_rids, hdr_name, uni_name, group_attrs);
-
-	DEBUG(5,("_samr_lookup_rids: %d\n", __LINE__));
-
-	return r_u->status;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -1380,52 +412,8 @@ NTSTATUS _samr_lookup_rids(pipes_struct
 
 NTSTATUS _api_samr_open_user(pipes_struct *p, SAMR_Q_OPEN_USER *q_u, SAMR_R_OPEN_USER *r_u)
 {
-	SAM_ACCOUNT *sampass=NULL;
-	DOM_SID sid;
-	POLICY_HND domain_pol = q_u->domain_pol;
-	uint32 user_rid = q_u->user_rid;
-	POLICY_HND *user_pol = &r_u->user_pol;
-	struct samr_info *info = NULL;
-	BOOL ret;
-
-	r_u->status = NT_STATUS_OK;
-
-	/* find the domain policy handle. */
-	if (!find_policy_by_hnd(p, &domain_pol, NULL))
-		return NT_STATUS_INVALID_HANDLE;
-
-	pdb_init_sam(&sampass);
-
-	become_root();
-	ret=pdb_getsampwrid(sampass, user_rid);
-	unbecome_root();
-
-	/* check that the RID exists in our domain. */
-	if (ret == False) {
-		pdb_free_sam(sampass);
-        	return NT_STATUS_NO_SUCH_USER;
-	}
-
-	samr_clear_sam_passwd(sampass);
-	pdb_free_sam(sampass);
-
-	/* Get the domain SID stored in the domain policy */
-	if(!get_lsa_policy_samr_sid(p, &domain_pol, &sid))
-		return NT_STATUS_INVALID_HANDLE;
-
-	/* append the user's RID to it */
-	if(!sid_append_rid(&sid, user_rid))
-		return NT_STATUS_NO_SUCH_USER;
-
-	/* associate the user's SID with the new handle. */
-	if ((info = get_samr_info_by_sid(&sid)) == NULL)
-		return NT_STATUS_NO_MEMORY;
-
-	/* get a (unique) handle.  open a policy on it. */
-	if (!create_policy_hnd(p, user_pol, free_samr_info, (void *)info))
-		return NT_STATUS_OBJECT_NAME_NOT_FOUND;
-
-	return r_u->status;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*************************************************************************
@@ -1434,35 +422,8 @@ NTSTATUS _api_samr_open_user(pipes_struc
 
 static BOOL get_user_info_10(SAM_USER_INFO_10 *id10, uint32 user_rid)
 {
-	SAM_ACCOUNT *smbpass=NULL;
-	BOOL ret;
-
-	if (!pdb_rid_is_user(user_rid)) {
-		DEBUG(4,("RID 0x%x is not a user RID\n", user_rid));
-		return False;
-	}
-
-	pdb_init_sam(&smbpass);
-
-	become_root();
-	ret = pdb_getsampwrid(smbpass, user_rid);
-	unbecome_root();
-
-	if (ret==False) {
-		DEBUG(4,("User 0x%x not found\n", user_rid));
-		pdb_free_sam(smbpass);
-		return False;
-	}
-
-	DEBUG(3,("User:[%s]\n", pdb_get_username(smbpass) ));
-
-	ZERO_STRUCTP(id10);
-	init_sam_user_info10(id10, pdb_get_acct_ctrl(smbpass) );
-
-	samr_clear_sam_passwd(smbpass);
-	pdb_free_sam(smbpass);
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*************************************************************************
@@ -1473,41 +434,8 @@ static BOOL get_user_info_10(SAM_USER_IN
 
 static NTSTATUS get_user_info_12(pipes_struct *p, SAM_USER_INFO_12 * id12, uint32 user_rid)
 {
-	SAM_ACCOUNT *smbpass=NULL;
-	BOOL ret;
-
-	if (!p->ntlmssp_auth_validated)
-		return NT_STATUS_ACCESS_DENIED;
-
-	if (!(p->ntlmssp_chal_flags & NTLMSSP_NEGOTIATE_SIGN) || !(p->ntlmssp_chal_flags & NTLMSSP_NEGOTIATE_SEAL))
-		return NT_STATUS_ACCESS_DENIED;
-
-	/*
-	 * Do *NOT* do become_root()/unbecome_root() here ! JRA.
-	 */
-	pdb_init_sam(&smbpass);
-
-	ret = pdb_getsampwrid(smbpass, user_rid);
-
-	if (ret == False) {
-		DEBUG(4, ("User 0x%x not found\n", user_rid));
-		pdb_free_sam(smbpass);
-		return (geteuid() == (uid_t)0) ? NT_STATUS_NO_SUCH_USER : NT_STATUS_ACCESS_DENIED;
-	}
-
-	DEBUG(3,("User:[%s] 0x%x\n", pdb_get_username(smbpass), pdb_get_acct_ctrl(smbpass) ));
-
-	if ( pdb_get_acct_ctrl(smbpass) & ACB_DISABLED) {
-		pdb_free_sam(smbpass);
-		return NT_STATUS_ACCOUNT_DISABLED;
-	}
-
-	ZERO_STRUCTP(id12);
-	init_sam_user_info12(id12, pdb_get_lanman_passwd(smbpass), pdb_get_nt_passwd(smbpass));
-	
-	pdb_free_sam(smbpass);
-
-	return NT_STATUS_OK;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 #if 1 /* JRA - re-enabled... JERRY - why was this removed ? */
@@ -1517,36 +445,8 @@ static NTSTATUS get_user_info_12(pipes_s
 
 static BOOL get_user_info_20(SAM_USER_INFO_20 *id20, uint32 user_rid)
 {
-	SAM_ACCOUNT *sampass=NULL;
-	BOOL ret;
-
-	if (!pdb_rid_is_user(user_rid)) {
-		DEBUG(4,("RID 0x%x is not a user RID\n", user_rid));
-		return False;
-	}
-
-	pdb_init_sam(&sampass);
-
-	become_root();
-	ret = pdb_getsampwrid(sampass, user_rid);
-	unbecome_root();
-
-	if (ret == False) {
-		DEBUG(4,("User 0x%x not found\n", user_rid));
-		pdb_free_sam(sampass);
-		return False;
-	}
-
-	samr_clear_sam_passwd(sampass);
-
-	DEBUG(3,("User:[%s]\n",  pdb_get_username(sampass) ));
-
-	ZERO_STRUCTP(id20);
-	init_sam_user_info20A(id20, sampass);
-	
-	pdb_free_sam(sampass);
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 #endif
 
@@ -1556,36 +456,8 @@ static BOOL get_user_info_20(SAM_USER_IN
 
 static BOOL get_user_info_21(SAM_USER_INFO_21 *id21, uint32 user_rid)
 {
-	SAM_ACCOUNT *sampass=NULL;
-	BOOL ret;
-
-	if (!pdb_rid_is_user(user_rid)) {
-		DEBUG(4,("RID 0x%x is not a user RID\n", user_rid));
-		return False;
-	}
-
-	pdb_init_sam(&sampass);
-
-	become_root();
-	ret = pdb_getsampwrid(sampass, user_rid);
-	unbecome_root();
-
-	if (ret == False) {
-		DEBUG(4,("User 0x%x not found\n", user_rid));
-		pdb_free_sam(sampass);
-		return False;
-	}
-
-	samr_clear_sam_passwd(sampass);
-
-	DEBUG(3,("User:[%s]\n",  pdb_get_username(sampass) ));
-
-	ZERO_STRUCTP(id21);
-	init_sam_user_info21A(id21, sampass);
-	
-	pdb_free_sam(sampass);
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -1594,100 +466,8 @@ static BOOL get_user_info_21(SAM_USER_IN
 
 NTSTATUS _samr_query_userinfo(pipes_struct *p, SAMR_Q_QUERY_USERINFO *q_u, SAMR_R_QUERY_USERINFO *r_u)
 {
-	SAM_USERINFO_CTR *ctr;
-	uint32 rid = 0;
-	struct samr_info *info = NULL;
-
-	r_u->status=NT_STATUS_OK;
-
-	/* search for the handle */
-	if (!find_policy_by_hnd(p, &q_u->pol, (void **)&info))
-		return NT_STATUS_INVALID_HANDLE;
-
-	/* find the user's rid */
-	if ((rid = get_lsa_policy_samr_rid(info)) == 0xffffffff)
-		return NT_STATUS_OBJECT_TYPE_MISMATCH;
-
-	DEBUG(5,("_samr_query_userinfo: rid:0x%x\n", rid));
-
-	ctr = (SAM_USERINFO_CTR *)talloc_zero(p->mem_ctx, sizeof(SAM_USERINFO_CTR));
-	if (!ctr)
-		return NT_STATUS_NO_MEMORY;
-
-	ZERO_STRUCTP(ctr);
-
-	/* ok!  user info levels (lots: see MSDEV help), off we go... */
-	ctr->switch_value = q_u->switch_value;
-
-	switch (q_u->switch_value) {
-	case 0x10:
-		ctr->info.id10 = (SAM_USER_INFO_10 *)talloc_zero(p->mem_ctx, sizeof(SAM_USER_INFO_10));
-		if (ctr->info.id10 == NULL)
-			return NT_STATUS_NO_MEMORY;
-
-		if (!get_user_info_10(ctr->info.id10, rid))
-			return NT_STATUS_NO_SUCH_USER;
-		break;
-
-#if 0
-/* whoops - got this wrong.  i think.  or don't understand what's happening. */
-        case 0x11:
-        {
-            NTTIME expire;
-            info = (void *)&id11;
-
-            expire.low = 0xffffffff;
-            expire.high = 0x7fffffff;
-
-            ctr->info.id = (SAM_USER_INFO_11 *)talloc_zero(p->mem_ctx,
-                                    sizeof
-                                    (*ctr->
-                                     info.
-                                     id11));
-            init_sam_user_info11(ctr->info.id11, &expire,
-                         "BROOKFIELDS$",    /* name */
-                         0x03ef,    /* user rid */
-                         0x201, /* group rid */
-                         0x0080);   /* acb info */
-
-            break;
-        }
-#endif
-
-	case 0x12:
-		ctr->info.id12 = (SAM_USER_INFO_12 *)talloc_zero(p->mem_ctx, sizeof(SAM_USER_INFO_12));
-		if (ctr->info.id12 == NULL)
-			return NT_STATUS_NO_MEMORY;
-
-		if (NT_STATUS_IS_ERR(r_u->status = get_user_info_12(p, ctr->info.id12, rid)))
-			return r_u->status;
-		break;
-
-	case 20:
-		ctr->info.id20 = (SAM_USER_INFO_20 *)talloc_zero(p->mem_ctx,sizeof(SAM_USER_INFO_20));
-		if (ctr->info.id20 == NULL)
-			return NT_STATUS_NO_MEMORY;
-		if (!get_user_info_20(ctr->info.id20, rid))
-			return NT_STATUS_NO_SUCH_USER;
-		break;
-
-	case 21:
-		ctr->info.id21 = (SAM_USER_INFO_21 *)talloc_zero(p->mem_ctx,sizeof(SAM_USER_INFO_21));
-		if (ctr->info.id21 == NULL)
-			return NT_STATUS_NO_MEMORY;
-		if (!get_user_info_21(ctr->info.id21, rid))
-			return NT_STATUS_NO_SUCH_USER;
-		break;
-
-	default:
-		return NT_STATUS_INVALID_INFO_CLASS;
-	}
-
-	init_samr_r_query_userinfo(r_u, ctr, r_u->status);
-
-	DEBUG(5,("_samr_query_userinfo: %d\n", __LINE__));
-
-	return r_u->status;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -1696,51 +476,8 @@ NTSTATUS _samr_query_userinfo(pipes_stru
 
 NTSTATUS _samr_query_usergroups(pipes_struct *p, SAMR_Q_QUERY_USERGROUPS *q_u, SAMR_R_QUERY_USERGROUPS *r_u)
 {
-	SAM_ACCOUNT *sam_pass=NULL;
-	DOM_GID *gids = NULL;
-	int num_groups = 0;
-	pstring groups;
-	uint32 rid;
-	struct samr_info *info = NULL;
-	BOOL ret;
-
-	r_u->status = NT_STATUS_OK;
-
-	DEBUG(5,("_samr_query_usergroups: %d\n", __LINE__));
-
-	/* find the policy handle.  open a policy on it. */
-	if (!find_policy_by_hnd(p, &q_u->pol, (void **)&info))
-		return NT_STATUS_INVALID_HANDLE;
-
-	/* find the user's rid */
-	if ((rid = get_lsa_policy_samr_rid(info)) == 0xffffffff)
-		return NT_STATUS_OBJECT_TYPE_MISMATCH;
-
-	pdb_init_sam(&sam_pass);
-
-	become_root();
-	ret = pdb_getsampwrid(sam_pass, rid);
-	unbecome_root();
-
-	if (ret == False) {
-		samr_clear_sam_passwd(sam_pass);
-		pdb_free_sam(sam_pass);
-		return NT_STATUS_NO_SUCH_USER;
-	}
-
-	get_domain_user_groups(groups, pdb_get_username(sam_pass));
-	gids = NULL;
-	num_groups = make_dom_gids(p->mem_ctx, groups, &gids);
-
-	/* construct the response.  lkclXXXX: gids are not copied! */
-	init_samr_r_query_usergroups(r_u, num_groups, gids, r_u->status);
-
-	DEBUG(5,("_samr_query_usergroups: %d\n", __LINE__));
-	
-	samr_clear_sam_passwd(sam_pass);
-	pdb_free_sam(sam_pass);
-
-	return r_u->status;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -1749,107 +486,8 @@ NTSTATUS _samr_query_usergroups(pipes_st
 
 NTSTATUS _samr_query_dom_info(pipes_struct *p, SAMR_Q_QUERY_DOMAIN_INFO *q_u, SAMR_R_QUERY_DOMAIN_INFO *r_u)
 {
-	struct samr_info *info = NULL;
-	SAM_UNK_CTR *ctr;
-	uint32 min_pass_len,pass_hist,flag;
-	time_t u_expire, u_min_age;
-	NTTIME nt_expire, nt_min_age;
-
-	time_t u_lock_duration, u_reset_time;
-	NTTIME nt_lock_duration, nt_reset_time;
-	uint32 lockout;
-	
-	time_t u_logout;
-	NTTIME nt_logout;
-
-	uint32 num_users=0, num_groups=0, num_aliases=0;
-
-	if ((ctr = (SAM_UNK_CTR *)talloc_zero(p->mem_ctx, sizeof(SAM_UNK_CTR))) == NULL)
-		return NT_STATUS_NO_MEMORY;
-
-	ZERO_STRUCTP(ctr);
-
-	r_u->status = NT_STATUS_OK;
-
-	DEBUG(5,("_samr_query_dom_info: %d\n", __LINE__));
-
-	/* find the policy handle.  open a policy on it. */
-	if (!find_policy_by_hnd(p, &q_u->domain_pol, (void **)&info))
-		return NT_STATUS_INVALID_HANDLE;
-
-	switch (q_u->switch_value) {
-		case 0x01:
-			/* Use defaults until we merge with HEAD db. JRA */
-			min_pass_len = MINPASSWDLENGTH;		/* 5 chars minimum             */
-			pass_hist = 0;				/* don't keep any old password */
-			flag = 0;				/* don't force user to logon   */
-			u_expire = MAX_PASSWORD_AGE;		/* 21 days                     */
-			u_min_age = 0;				/* 0 days                      */
-
-			unix_to_nt_time_abs(&nt_expire, u_expire);
-			unix_to_nt_time_abs(&nt_min_age, u_min_age);
-
-			init_unk_info1(&ctr->info.inf1, (uint16)min_pass_len, (uint16)pass_hist, 
-			               flag, nt_expire, nt_min_age);
-			break;
-		case 0x02:
-			become_root();		
-			r_u->status=load_sampwd_entries(info, ACB_NORMAL);
-			unbecome_root();
-			if (NT_STATUS_IS_ERR(r_u->status)) {
-				DEBUG(5, ("_samr_query_dispinfo: load_sampwd_entries failed\n"));
-				return r_u->status;
-			}
-			num_users=info->disp_info.num_user_account;
-			free_samr_db(info);
-			
-			r_u->status=load_group_domain_entries(info, &global_sam_sid);
-			if (NT_STATUS_IS_ERR(r_u->status)) {
-				DEBUG(5, ("_samr_query_dispinfo: load_group_domain_entries failed\n"));
-				return r_u->status;
-			}
-			num_groups=info->disp_info.num_group_account;
-			free_samr_db(info);
-			
-			/* The time call below is to get a sequence number for the sam. FIXME !!! JRA. */
-			init_unk_info2(&ctr->info.inf2, global_myworkgroup, global_myname, (uint32) time(NULL), 
-				       num_users, num_groups, num_aliases);
-			break;
-		case 0x03:
-			/* Use defaults until we merge with HEAD db. JRA */
-			u_logout = -1;				/* don't force logout          */
-			unix_to_nt_time_abs(&nt_logout, u_logout);
-			init_unk_info3(&ctr->info.inf3, nt_logout);
-			break;
-		case 0x05:
-			init_unk_info5(&ctr->info.inf5, global_myname);
-			break;
-		case 0x06:
-			init_unk_info6(&ctr->info.inf6);
-			break;
-		case 0x07:
-			init_unk_info7(&ctr->info.inf7);
-			break;
-		case 0x0c:
-			/* Use defaults until we merge with HEAD db. JRA */
-			u_lock_duration = 0;			/* lockout for 0 minutes       */
-			u_reset_time = 0;			/* reset immediatly            */
-			lockout = 0;				/* don't lockout               */
-	
-			unix_to_nt_time_abs(&nt_lock_duration, u_lock_duration);
-			unix_to_nt_time_abs(&nt_reset_time, u_reset_time);
-	
-            		init_unk_info12(&ctr->info.inf12, nt_lock_duration, nt_reset_time, (uint16)lockout);
-            		break;
-        	default:
-            		return NT_STATUS_INVALID_INFO_CLASS;
-	}
-
-	init_samr_r_query_dom_info(r_u, q_u->switch_value, ctr, NT_STATUS_OK);
-
-	DEBUG(5,("_samr_query_dom_info: %d\n", __LINE__));
-
-	return r_u->status;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -1860,117 +498,8 @@ NTSTATUS _samr_query_dom_info(pipes_stru
 
 NTSTATUS _api_samr_create_user(pipes_struct *p, SAMR_Q_CREATE_USER *q_u, SAMR_R_CREATE_USER *r_u)
 {
-	SAM_ACCOUNT *sam_pass=NULL;
-	fstring mach_acct;
-	pstring err_str;
-	pstring msg_str;
-	int local_flags=0;
-	DOM_SID sid;
-	pstring add_script;
-	POLICY_HND dom_pol = q_u->domain_pol;
-	UNISTR2 user_account = q_u->uni_name;
-	uint16 acb_info = q_u->acb_info;
-	POLICY_HND *user_pol = &r_u->user_pol;
-	struct samr_info *info = NULL;
-	BOOL ret;
-
-	/* find the policy handle.  open a policy on it. */
-	if (!find_policy_by_hnd(p, &dom_pol, NULL))
-		return NT_STATUS_INVALID_HANDLE;
-
-	/* find the machine account: tell the caller if it exists.
-	  lkclXXXX i have *no* idea if this is a problem or not
- 	  or even if you are supposed to construct a different
-	  reply if the account already exists...
-	 */
-
-	fstrcpy(mach_acct, dos_unistrn2(user_account.buffer, user_account.uni_str_len));
-	strlower(mach_acct);
-
-	pdb_init_sam(&sam_pass);
-
-	become_root();
-	ret = pdb_getsampwnam(sam_pass, mach_acct);
-	unbecome_root();
-	if (ret == True) {
-		/* machine account exists: say so */
-		pdb_free_sam(sam_pass);
-		return NT_STATUS_USER_EXISTS;
-	}
-
-	local_flags=LOCAL_ADD_USER|LOCAL_DISABLE_USER|LOCAL_SET_NO_PASSWORD;
-	local_flags|= (acb_info & ACB_WSTRUST) ? LOCAL_TRUST_ACCOUNT:0;
-
-	/*
-	 * NB. VERY IMPORTANT ! This call must be done as the current pipe user,
-	 * *NOT* surrounded by a become_root()/unbecome_root() call. This ensures
-	 * that only people with write access to the smbpasswd file will be able
-	 * to create a user. JRA.
-	 */
-
-	/*
-	 * add the user in the /etc/passwd file or the unix authority system.
-	 * We don't check if the smb_create_user() function succed or not for 2 reasons:
-	 * a) local_password_change() checks for us if the /etc/passwd account really exists
-	 * b) smb_create_user() would return an error if the account already exists
-	 * and as it could return an error also if it can't create the account, it would be tricky.
-	 *
-	 * So we go the easy way, only check after if the account exists.
-	 * JFM (2/3/2001), to clear any possible bad understanding (-:
-	 */
- 
-	pstrcpy(add_script, lp_adduser_script());
- 
-	if(*add_script)
-		smb_create_user(mach_acct, NULL);
-
-	/* add the user in the smbpasswd file or the Samba authority database */
-	if (!local_password_change(mach_acct, local_flags, NULL, err_str, sizeof(err_str), msg_str, sizeof(msg_str))) {
-		DEBUG(0, ("%s\n", err_str));
-		pdb_free_sam(sam_pass);
-		return NT_STATUS_ACCESS_DENIED;
-	}
-
-	become_root();
-	ret = pdb_getsampwnam(sam_pass, mach_acct);
- 	unbecome_root();
- 	if (ret == False) {
-		/* account doesn't exist: say so */
-		pdb_free_sam(sam_pass);
-		return NT_STATUS_ACCESS_DENIED;
-	}
-
-	/* Get the domain SID stored in the domain policy */
-	if(!get_lsa_policy_samr_sid(p, &dom_pol, &sid)) {
-		pdb_free_sam(sam_pass);
-		return NT_STATUS_INVALID_HANDLE;
-	}
-
-	/* append the user's RID to it */
-	if(!sid_append_rid(&sid, pdb_get_user_rid(sam_pass) )) {
-		pdb_free_sam(sam_pass);
-		return NT_STATUS_NO_SUCH_USER;
-	}
-
-	/* associate the user's SID with the new handle. */
-	
-	if ((info = get_samr_info_by_sid(&sid)) == NULL) {
-		pdb_free_sam(sam_pass);
-		return NT_STATUS_NO_MEMORY;
-	}
-
-	/* get a (unique) handle.  open a policy on it. */
-	if (!create_policy_hnd(p, user_pol, free_samr_info, (void *)info)) {
-		pdb_free_sam(sam_pass);
-		return NT_STATUS_OBJECT_NAME_NOT_FOUND;
-	}
-
-	r_u->user_rid=sam_pass->user_rid;
-	r_u->unknown_0 = 0x000703ff;
-
-	pdb_free_sam(sam_pass);
-
-	return NT_STATUS_OK;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -1979,23 +508,8 @@ NTSTATUS _api_samr_create_user(pipes_str
 
 NTSTATUS _samr_connect_anon(pipes_struct *p, SAMR_Q_CONNECT_ANON *q_u, SAMR_R_CONNECT_ANON *r_u)
 {
-	struct samr_info *info = NULL;
-
-	/* set up the SAMR connect_anon response */
-
-	r_u->status = NT_STATUS_OK;
-
-	/* associate the user's SID with the new handle. */
-	if ((info = get_samr_info_by_sid(NULL)) == NULL)
-		return NT_STATUS_NO_MEMORY;
-
-	info->status = q_u->unknown_0;
-
-	/* get a (unique) handle.  open a policy on it. */
-	if (!create_policy_hnd(p, &r_u->connect_pol, free_samr_info, (void *)info))
-		return NT_STATUS_OBJECT_NAME_NOT_FOUND;
-
-	return r_u->status;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -2004,25 +518,8 @@ NTSTATUS _samr_connect_anon(pipes_struct
 
 NTSTATUS _samr_connect(pipes_struct *p, SAMR_Q_CONNECT *q_u, SAMR_R_CONNECT *r_u)
 {
-	struct samr_info *info = NULL;
-
-	DEBUG(5,("_samr_connect: %d\n", __LINE__));
-
-	r_u->status = NT_STATUS_OK;
-
-	/* associate the user's SID with the new handle. */
-	if ((info = get_samr_info_by_sid(NULL)) == NULL)
-		return NT_STATUS_NO_MEMORY;
-
-	info->status = q_u->access_mask;
-
-	/* get a (unique) handle.  open a policy on it. */
-	if (!create_policy_hnd(p, &r_u->connect_pol, free_samr_info, (void *)info))
-		return NT_STATUS_OBJECT_NAME_NOT_FOUND;
-
-	DEBUG(5,("_samr_connect: %d\n", __LINE__));
-
-	return r_u->status;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /**********************************************************************
@@ -2031,27 +528,8 @@ NTSTATUS _samr_connect(pipes_struct *p,
 
 NTSTATUS _samr_lookup_domain(pipes_struct *p, SAMR_Q_LOOKUP_DOMAIN *q_u, SAMR_R_LOOKUP_DOMAIN *r_u)
 {
-	fstring domain_name;
-	DOM_SID sid;
-
-	r_u->status = NT_STATUS_OK;
-
-	if (!find_policy_by_hnd(p, &q_u->connect_pol, NULL))
-		return NT_STATUS_INVALID_HANDLE;
-
-	fstrcpy(domain_name, dos_unistrn2( q_u->uni_domain.buffer, q_u->uni_domain.uni_str_len));
-
-	ZERO_STRUCT(sid);
-
-	if (!secrets_fetch_domain_sid(domain_name, &sid)) {
-		r_u->status = NT_STATUS_NO_SUCH_DOMAIN;
-	}
-
-	DEBUG(2,("Returning domain sid for domain %s -> %s\n", domain_name, sid_string_static(&sid)));
-
-	init_samr_r_lookup_domain(r_u, &sid, r_u->status);
-
-	return r_u->status;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /******************************************************************
@@ -2061,35 +539,8 @@ makes a SAMR_R_ENUM_DOMAINS structure.
 static BOOL make_enum_domains(TALLOC_CTX *ctx, SAM_ENTRY **pp_sam,
 			UNISTR2 **pp_uni_name, uint32 num_sam_entries, fstring doms[])
 {
-	uint32 i;
-	SAM_ENTRY *sam;
-	UNISTR2 *uni_name;
-
-	DEBUG(5, ("make_enum_domains\n"));
-
-	*pp_sam = NULL;
-	*pp_uni_name = NULL;
-
-	if (num_sam_entries == 0)
-		return True;
-
-	sam = (SAM_ENTRY *)talloc_zero(ctx, sizeof(SAM_ENTRY)*num_sam_entries);
-	uni_name = (UNISTR2 *)talloc_zero(ctx, sizeof(UNISTR2)*num_sam_entries);
-
-	if (sam == NULL || uni_name == NULL)
-		return False;
-
-	for (i = 0; i < num_sam_entries; i++) {
-		int len = doms[i] != NULL ? strlen(doms[i]) : 0;
-
-		init_sam_entry(&sam[i], len, 0);
-		init_unistr2(&uni_name[i], doms[i], len);
-	}
-
-	*pp_sam = sam;
-	*pp_uni_name = uni_name;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /**********************************************************************
@@ -2098,31 +549,8 @@ static BOOL make_enum_domains(TALLOC_CTX
 
 NTSTATUS _samr_enum_domains(pipes_struct *p, SAMR_Q_ENUM_DOMAINS *q_u, SAMR_R_ENUM_DOMAINS *r_u)
 {
-	uint32 num_entries = 2;
-	fstring dom[2];
-	char *name;
-
-	r_u->status = NT_STATUS_OK;
-
-	switch (lp_server_role()) {
-		case ROLE_DOMAIN_PDC:
-		case ROLE_DOMAIN_BDC:
-			name = global_myworkgroup;
-			break;
-		default:
-			name = global_myname;
-	}
-
-	fstrcpy(dom[0],name);
-	strupper(dom[0]);
-	fstrcpy(dom[1],"Builtin");
-
-	if (!make_enum_domains(p->mem_ctx, &r_u->sam, &r_u->uni_dom_name, num_entries, dom))
-		return NT_STATUS_NO_MEMORY;
-
-	init_samr_r_enum_domains(r_u, q_u->start_idx + num_entries, num_entries);
-
-	return r_u->status;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -2131,40 +559,8 @@ NTSTATUS _samr_enum_domains(pipes_struct
 
 NTSTATUS _api_samr_open_alias(pipes_struct *p, SAMR_Q_OPEN_ALIAS *q_u, SAMR_R_OPEN_ALIAS *r_u)
 {
-	DOM_SID sid;
-	POLICY_HND domain_pol = q_u->dom_pol;
-	uint32 alias_rid = q_u->rid_alias;
-	POLICY_HND *alias_pol = &r_u->pol;
-	struct samr_info *info = NULL;
-
-	r_u->status = NT_STATUS_OK;
-
-	/* get the domain policy. */
-	if (!find_policy_by_hnd(p, &domain_pol, NULL))
-		return NT_STATUS_INVALID_HANDLE;
-
-	/* Get the domain SID stored in the domain policy */
-	if(!get_lsa_policy_samr_sid(p, &domain_pol, &sid))
-		return NT_STATUS_INVALID_HANDLE;
-
-	/* append the alias' RID to it */
-	if(!sid_append_rid(&sid, alias_rid))
-		return NT_STATUS_NO_SUCH_USER;
-
-	/*
-	 * we should check if the rid really exist !!!
-	 * JFM.
-	 */
-
-	/* associate the user's SID with the new handle. */
-	if ((info = get_samr_info_by_sid(&sid)) == NULL)
-		return NT_STATUS_NO_MEMORY;
-
-	/* get a (unique) handle.  open a policy on it. */
-	if (!create_policy_hnd(p, alias_pol, free_samr_info, (void *)info))
-		return NT_STATUS_OBJECT_NAME_NOT_FOUND;
-
-	return r_u->status;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -2173,37 +569,8 @@ NTSTATUS _api_samr_open_alias(pipes_stru
 
 static BOOL set_user_info_10(const SAM_USER_INFO_10 *id10, uint32 rid)
 {
-	SAM_ACCOUNT *pwd =NULL;
-	BOOL ret;
-	
-	pdb_init_sam(&pwd);
-	
-	ret = pdb_getsampwrid(pwd, rid);
-	
-	if(ret==False) {
-		pdb_free_sam(pwd);
-		return False;
-	}
-
-	if (id10 == NULL) {
-		DEBUG(5, ("set_user_info_10: NULL id10\n"));
-		pdb_free_sam(pwd);
-		return False;
-	}
-
-	if (!pdb_set_acct_ctrl(pwd, id10->acb_info)) {
-		pdb_free_sam(pwd);
-		return False;
-	}
-
-	if(!pdb_update_sam_account(pwd, True)) {
-		pdb_free_sam(pwd);
-		return False;
-	}
-
-	pdb_free_sam(pwd);
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -2212,37 +579,8 @@ static BOOL set_user_info_10(const SAM_U
 
 static BOOL set_user_info_12(SAM_USER_INFO_12 *id12, uint32 rid)
 {
-	SAM_ACCOUNT *pwd = NULL;
-
-	pdb_init_sam(&pwd);
-
-	if(!pdb_getsampwrid(pwd, rid)) {
-		pdb_free_sam(pwd);
-		return False;
-	}
-
-	if (id12 == NULL) {
-		DEBUG(2, ("set_user_info_12: id12 is NULL\n"));
-		pdb_free_sam(pwd);
-		return False;
-	}
- 
-	if (!pdb_set_lanman_passwd (pwd, id12->lm_pwd)) {
-		pdb_free_sam(pwd);
-		return False;
-	}
-	if (!pdb_set_nt_passwd(pwd, id12->nt_pwd)) {
-		pdb_free_sam(pwd);
-		return False;
-	}
- 
-	if(!pdb_update_sam_account(pwd, True)) {
-		pdb_free_sam(pwd);
-		return False;
- 	}
-
-	pdb_free_sam(pwd);
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -2251,40 +589,8 @@ static BOOL set_user_info_12(SAM_USER_IN
 
 static BOOL set_user_info_21(SAM_USER_INFO_21 *id21, uint32 rid)
 {
-	SAM_ACCOUNT *pwd = NULL;
-	BOOL result = True;
- 
-	if (id21 == NULL) {
-		DEBUG(5, ("set_user_info_21: NULL id21\n"));
-		return False;
-	}
- 
-	pdb_init_sam(&pwd);
- 
-	if (!pdb_getsampwrid(pwd, rid)) {
-		result = False;
-		goto done;
-	}
- 
-	/* we make a copy so that we can modify stuff */
-	copy_id21_to_sam_passwd(pwd, id21);
- 
-	/*
-	 * The funny part about the previous two calls is
-	 * that pwd still has the password hashes from the
-	 * passdb entry.  These have not been updated from
-	 * id21.  I don't know if they need to be set.    --jerry
-	 */
- 
-	/* write the change out */
-	if(!pdb_update_sam_account(pwd, True)) {
-		result = False;
-		goto done;
- 	}
-
-done:
-	pdb_free_sam(pwd);
-	return result;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -2293,68 +599,8 @@ done:
 
 static BOOL set_user_info_23(SAM_USER_INFO_23 *id23, uint32 rid)
 {
-	SAM_ACCOUNT *pwd = NULL;
-	uint8 nt_hash[16];
-	uint8 lm_hash[16];
-	pstring buf;
-	uint32 len;
-	uint16 acct_ctrl;
-	BOOL result = True;
- 
-	if (id23 == NULL) {
-		DEBUG(5, ("set_user_info_23: NULL id23\n"));
-		return False;
-	}
- 
- 	pdb_init_sam(&pwd);
- 
-	if (!pdb_getsampwrid(pwd, rid)) {
-		result = False;
-		goto done;
- 	}
-
-	acct_ctrl = pdb_get_acct_ctrl(pwd);
-	
-	copy_id23_to_sam_passwd(pwd, id23);
- 
-	if (!decode_pw_buffer((char*)id23->pass, buf, 256, &len, nt_hash, lm_hash)) {
-		result = False;
-		goto done;
- 	}
-  
-	if (!pdb_set_lanman_passwd (pwd, lm_hash)) {
-		result = False;
-		goto done;
-	}
-	if (!pdb_set_nt_passwd(pwd, nt_hash)) {
-		result = False;
-		goto done;
-	}
- 
-	/* if it's a trust account, don't update /etc/passwd */
-	if ( ( (acct_ctrl &  ACB_DOMTRUST) == ACB_DOMTRUST ) ||
-	     ( (acct_ctrl &  ACB_WSTRUST) ==  ACB_WSTRUST) ||
-	     ( (acct_ctrl &  ACB_SVRTRUST) ==  ACB_SVRTRUST) ) {
-	     DEBUG(5, ("Changing trust account password, not updating /etc/passwd\n"));
-	} else  {
-		/* update the UNIX password */
-		if (lp_unix_password_sync() )
-			if(!chgpasswd(pdb_get_username(pwd), "", buf, True)) {
-				result = False;
-				goto done;
-			}
-	}
- 
-	memset(buf, 0, sizeof(buf));
- 
-	if(!pdb_update_sam_account(pwd, True)) {
-		result = False;
-		goto done;
-	}
- 
-done:
-	pdb_free_sam(pwd);
-	return result;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -2363,65 +609,8 @@ done:
 
 static BOOL set_user_info_pw(char *pass, uint32 rid)
 {
-	SAM_ACCOUNT *pwd = NULL;
-	uchar nt_hash[16];
-	uchar lm_hash[16];
-	uint32 len;
-	pstring buf;
-	uint16 acct_ctrl;
- 
- 	pdb_init_sam(&pwd);
- 
-	if (!pdb_getsampwrid(pwd, rid)) {
-		pdb_free_sam(pwd);
-		return False;
- 	}
-	
-	acct_ctrl = pdb_get_acct_ctrl(pwd);
-
-	memset(buf, 0, sizeof(buf));
- 
-	if (!decode_pw_buffer(pass, buf, 256, &len, nt_hash, lm_hash)) {
-		pdb_free_sam(pwd);
-		return False;
- 	}
-
-	if (!pdb_set_lanman_passwd (pwd, lm_hash)) {
-		pdb_free_sam(pwd);
-		return False;
-	}
-	if (!pdb_set_nt_passwd(pwd, nt_hash)) {
-		pdb_free_sam(pwd);
-		return False;
-	}
- 
-	/* if it's a trust account, don't update /etc/passwd */
-	if ( ( (acct_ctrl &  ACB_DOMTRUST) == ACB_DOMTRUST ) ||
-	     ( (acct_ctrl &  ACB_WSTRUST) ==  ACB_WSTRUST) ||
-	     ( (acct_ctrl &  ACB_SVRTRUST) ==  ACB_SVRTRUST) ) {
-	     DEBUG(5, ("Changing trust account password, not updating /etc/passwd\n"));
-	} else {
-		/* update the UNIX password */
-		if (lp_unix_password_sync())
-			if(!chgpasswd(pdb_get_username(pwd), "", buf, True)) {
-				pdb_free_sam(pwd);
-				return False;
-			}
-	}
- 
-	memset(buf, 0, sizeof(buf));
- 
-	DEBUG(5,("set_user_info_pw: pdb_update_sam_account()\n"));
- 
-	/* update the SAMBA password */
-	if(!pdb_update_sam_account(pwd, True)) {
-		pdb_free_sam(pwd);
-		return False;
- 	}
-
-	pdb_free_sam(pwd);
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -2430,114 +619,8 @@ static BOOL set_user_info_pw(char *pass,
 
 NTSTATUS _samr_set_userinfo(pipes_struct *p, SAMR_Q_SET_USERINFO *q_u, SAMR_R_SET_USERINFO *r_u)
 {
-	uint32 rid = 0x0;
-	DOM_SID sid;
-	struct current_user user;
-	SAM_ACCOUNT *sam_pass=NULL;
-	unsigned char sess_key[16];
-	POLICY_HND *pol = &q_u->pol;
-	uint16 switch_value = q_u->switch_value;
-	SAM_USERINFO_CTR *ctr = q_u->ctr;
-	BOOL ret;
-
-	DEBUG(5, ("_samr_set_userinfo: %d\n", __LINE__));
-
-	r_u->status = NT_STATUS_OK;
-
-	if (p->ntlmssp_auth_validated) 	{
-		memcpy(&user, &p->pipe_user, sizeof(user));
-	} else 	{
-		extern struct current_user current_user;
-		memcpy(&user, &current_user, sizeof(user));
-	}
-
-	/* find the policy handle.  open a policy on it. */
-	if (!get_lsa_policy_samr_sid(p, pol, &sid))
-		return NT_STATUS_INVALID_HANDLE;
-
-	sid_split_rid(&sid, &rid);
-
-	DEBUG(5, ("_samr_set_userinfo: rid:0x%x, level:%d\n", rid, switch_value));
-
-	if (ctr == NULL) {
-		DEBUG(5, ("_samr_set_userinfo: NULL info level\n"));
-		return NT_STATUS_INVALID_INFO_CLASS;
-	}
-
-
-	pdb_init_sam(&sam_pass);
-
-	/* 
-	 * We need the NT hash of the user who is changing the user's password.
-	 * This NT hash is used to generate a "user session key"
-	 * This "user session key" is in turn used to encrypt/decrypt the user's password.
-	 */
-
-	become_root();
-	ret = pdb_getsampwuid(sam_pass, user.uid);
-	unbecome_root();
-	if(ret == False) {
-		DEBUG(0,("_samr_set_userinfo: Unable to get smbpasswd entry for uid %u\n", (unsigned int)user.uid ));
-		pdb_free_sam(sam_pass);
-		return NT_STATUS_ACCESS_DENIED;
-	}
-		
-	memset(sess_key, '\0', 16);
-	mdfour(sess_key, pdb_get_nt_passwd(sam_pass), 16);
-
-	pdb_free_sam(sam_pass);
-	sam_pass = NULL;
-
-	/* ok!  user info levels (lots: see MSDEV help), off we go... */
-	switch (switch_value) {
-		case 0x12:
-			if (!set_user_info_12(ctr->info.id12, rid))
-				return NT_STATUS_ACCESS_DENIED;
-			break;
-
-		case 24:
-			SamOEMhash(ctr->info.id24->pass, sess_key, 516);
-
-			dump_data(100, (char *)ctr->info.id24->pass, 516);
-
-			if (!set_user_info_pw((char *)ctr->info.id24->pass, rid))
-				return NT_STATUS_ACCESS_DENIED;
-			break;
-
-		case 25:
-#if 0
-			/*
-			 * Currently we don't really know how to unmarshall
-			 * the level 25 struct, and the password encryption
-			 * is different. This is a placeholder for when we
-			 * do understand it. In the meantime just return INVALID
-			 * info level and W2K SP2 drops down to level 23... JRA.
-			 */
-
-			SamOEMhash(ctr->info.id25->pass, sess_key, 532);
-
-			dump_data(100, (char *)ctr->info.id25->pass, 532);
-
-			if (!set_user_info_pw(ctr->info.id25->pass, rid))
-				return NT_STATUS_ACCESS_DENIED;
-			break;
-#endif
-			return NT_STATUS_INVALID_INFO_CLASS;
-
-		case 23:
-			SamOEMhash(ctr->info.id23->pass, sess_key, 516);
-
-			dump_data(100, (char *)ctr->info.id23->pass, 516);
-
-			if (!set_user_info_23(ctr->info.id23, rid))
-				return NT_STATUS_ACCESS_DENIED;
-			break;
-
-		default:
-			return NT_STATUS_INVALID_INFO_CLASS;
-	}
-
-	return r_u->status;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -2546,51 +629,8 @@ NTSTATUS _samr_set_userinfo(pipes_struct
 
 NTSTATUS _samr_set_userinfo2(pipes_struct *p, SAMR_Q_SET_USERINFO2 *q_u, SAMR_R_SET_USERINFO2 *r_u)
 {
-	DOM_SID sid;
-	uint32 rid = 0x0;
-	SAM_USERINFO_CTR *ctr = q_u->ctr;
-	POLICY_HND *pol = &q_u->pol;
-	uint16 switch_value = q_u->switch_value;
-
-	DEBUG(5, ("samr_reply_set_userinfo2: %d\n", __LINE__));
-
-	r_u->status = NT_STATUS_OK;
-
-	/* find the policy handle.  open a policy on it. */
-	if (!get_lsa_policy_samr_sid(p, pol, &sid))
-		return NT_STATUS_INVALID_HANDLE;
-
-	sid_split_rid(&sid, &rid);
-
-	DEBUG(5, ("samr_reply_set_userinfo2: rid:0x%x\n", rid));
-
-	if (ctr == NULL) {
-		DEBUG(5, ("samr_reply_set_userinfo2: NULL info level\n"));
-		return NT_STATUS_INVALID_INFO_CLASS;
-	}
-
-	switch_value=ctr->switch_value;
-
-	/* ok!  user info levels (lots: see MSDEV help), off we go... */
-	switch (switch_value) {
-		case 21:
-			if (!set_user_info_21(ctr->info.id21, rid))
-				return NT_STATUS_ACCESS_DENIED;
-			break;
-		case 16:
-			if (!set_user_info_10(ctr->info.id10, rid))
-				return NT_STATUS_ACCESS_DENIED;
-			break;
-		case 18:
-			/* Used by AS/U JRA. */
-			if (!set_user_info_12(ctr->info.id12, rid))
-				return NT_STATUS_ACCESS_DENIED;
-			break;
-		default:
-			return NT_STATUS_INVALID_INFO_CLASS;
-	}
-
-	return r_u->status;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*********************************************************************
@@ -2599,21 +639,8 @@ NTSTATUS _samr_set_userinfo2(pipes_struc
 
 NTSTATUS _samr_query_useraliases(pipes_struct *p, SAMR_Q_QUERY_USERALIASES *q_u, SAMR_R_QUERY_USERALIASES *r_u)
 {
-	uint32 *rid=NULL;
-	int num_rids;
-
-	num_rids = 1;
-	rid=(uint32 *)talloc_zero(p->mem_ctx, num_rids*sizeof(uint32));
-	if (rid == NULL)
-		return NT_STATUS_NO_MEMORY;
-
-	/* until i see a real useraliases query, we fack one up */
- 
-	rid[0] = BUILTIN_ALIAS_RID_USERS;
- 
-	init_samr_r_query_useraliases(r_u, num_rids, rid, NT_STATUS_OK);
- 
-	return NT_STATUS_OK;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 
 }
 
@@ -2623,8 +650,8 @@ NTSTATUS _samr_query_useraliases(pipes_s
 
 NTSTATUS _samr_query_aliasmem(pipes_struct *p, SAMR_Q_QUERY_ALIASMEM *q_u, SAMR_R_QUERY_ALIASMEM *r_u)
 {
-	DEBUG(0,("_samr_query_aliasmem: Not yet implemented.\n"));
-	return NT_STATUS_NOT_IMPLEMENTED;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*********************************************************************
@@ -2633,8 +660,8 @@ NTSTATUS _samr_query_aliasmem(pipes_stru
 
 NTSTATUS _samr_query_groupmem(pipes_struct *p, SAMR_Q_QUERY_GROUPMEM *q_u, SAMR_R_QUERY_GROUPMEM *r_u)
 {
-	DEBUG(0,("_samr_query_groupmem: Not yet implemented.\n"));
-	return NT_STATUS_NOT_IMPLEMENTED;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*********************************************************************
@@ -2643,8 +670,8 @@ NTSTATUS _samr_query_groupmem(pipes_stru
 
 NTSTATUS _samr_add_aliasmem(pipes_struct *p, SAMR_Q_ADD_ALIASMEM *q_u, SAMR_R_ADD_ALIASMEM *r_u)
 {
-	DEBUG(0,("_samr_add_aliasmem: Not yet implemented.\n"));
-	return NT_STATUS_NOT_IMPLEMENTED;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*********************************************************************
@@ -2653,8 +680,8 @@ NTSTATUS _samr_add_aliasmem(pipes_struct
 
 NTSTATUS _samr_del_aliasmem(pipes_struct *p, SAMR_Q_DEL_ALIASMEM *q_u, SAMR_R_DEL_ALIASMEM *r_u)
 {
-	DEBUG(0,("_samr_del_aliasmem: Not yet implemented.\n"));
-	return NT_STATUS_NOT_IMPLEMENTED;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*********************************************************************
@@ -2663,8 +690,8 @@ NTSTATUS _samr_del_aliasmem(pipes_struct
 
 NTSTATUS _samr_add_groupmem(pipes_struct *p, SAMR_Q_ADD_GROUPMEM *q_u, SAMR_R_ADD_GROUPMEM *r_u)
 {
-	DEBUG(0,("_samr_add_groupmem: Not yet implemented.\n"));
-	return NT_STATUS_NOT_IMPLEMENTED;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*********************************************************************
@@ -2673,8 +700,8 @@ NTSTATUS _samr_add_groupmem(pipes_struct
 
 NTSTATUS _samr_del_groupmem(pipes_struct *p, SAMR_Q_DEL_GROUPMEM *q_u, SAMR_R_DEL_GROUPMEM *r_u)
 {
-	DEBUG(0,("_samr_del_groupmem: Not yet implemented.\n"));
-	return NT_STATUS_NOT_IMPLEMENTED;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*********************************************************************
@@ -2683,8 +710,8 @@ NTSTATUS _samr_del_groupmem(pipes_struct
 
 NTSTATUS _samr_delete_dom_user(pipes_struct *p, SAMR_Q_DELETE_DOM_USER *q_u, SAMR_R_DELETE_DOM_USER *r_u )
 {
-	DEBUG(0,("_samr_delete_dom_user: Not yet implemented.\n"));
-	return NT_STATUS_NOT_IMPLEMENTED;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*********************************************************************
@@ -2693,8 +720,8 @@ NTSTATUS _samr_delete_dom_user(pipes_str
 
 NTSTATUS _samr_delete_dom_group(pipes_struct *p, SAMR_Q_DELETE_DOM_GROUP *q_u, SAMR_R_DELETE_DOM_GROUP *r_u)
 {
-	DEBUG(0,("_samr_delete_dom_group: Not yet implemented.\n"));
-	return NT_STATUS_NOT_IMPLEMENTED;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*********************************************************************
@@ -2703,8 +730,8 @@ NTSTATUS _samr_delete_dom_group(pipes_st
 
 NTSTATUS _samr_delete_dom_alias(pipes_struct *p, SAMR_Q_DELETE_DOM_ALIAS *q_u, SAMR_R_DELETE_DOM_ALIAS *r_u)
 {
-	DEBUG(0,("_samr_delete_dom_alias: Not yet implemented.\n"));
-	return NT_STATUS_NOT_IMPLEMENTED;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*********************************************************************
@@ -2713,8 +740,8 @@ NTSTATUS _samr_delete_dom_alias(pipes_st
 
 NTSTATUS _samr_create_dom_group(pipes_struct *p, SAMR_Q_CREATE_DOM_GROUP *q_u, SAMR_R_CREATE_DOM_GROUP *r_u)
 {
-	DEBUG(0,("_samr_create_dom_group: Not yet implemented.\n"));
-	return NT_STATUS_NOT_IMPLEMENTED;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*********************************************************************
@@ -2723,8 +750,8 @@ NTSTATUS _samr_create_dom_group(pipes_st
 
 NTSTATUS _samr_create_dom_alias(pipes_struct *p, SAMR_Q_CREATE_DOM_ALIAS *q_u, SAMR_R_CREATE_DOM_ALIAS *r_u)
 {
-	DEBUG(0,("_samr_create_dom_alias: Not yet implemented.\n"));
-	return NT_STATUS_NOT_IMPLEMENTED;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*********************************************************************
@@ -2733,8 +760,8 @@ NTSTATUS _samr_create_dom_alias(pipes_st
 
 NTSTATUS _samr_query_groupinfo(pipes_struct *p, SAMR_Q_QUERY_GROUPINFO *q_u, SAMR_R_QUERY_GROUPINFO *r_u)
 {
-	DEBUG(0,("_samr_query_groupinfo: Not yet implemented.\n"));
-	return NT_STATUS_NOT_IMPLEMENTED;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*********************************************************************
@@ -2743,8 +770,8 @@ NTSTATUS _samr_query_groupinfo(pipes_str
 
 NTSTATUS _samr_set_groupinfo(pipes_struct *p, SAMR_Q_SET_GROUPINFO *q_u, SAMR_R_SET_GROUPINFO *r_u)
 {
-	DEBUG(0,("_samr_set_groupinfo: Not yet implemented.\n"));
-	return NT_STATUS_NOT_IMPLEMENTED;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*********************************************************************
@@ -2753,8 +780,8 @@ NTSTATUS _samr_set_groupinfo(pipes_struc
 
 NTSTATUS _samr_get_dom_pwinfo(pipes_struct *p, SAMR_Q_GET_DOM_PWINFO *q_u, SAMR_R_GET_DOM_PWINFO *r_u)
 {
-	/* Actually, returning zeros here works quite well :-). */
-	return NT_STATUS_OK;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*********************************************************************
@@ -2763,8 +790,8 @@ NTSTATUS _samr_get_dom_pwinfo(pipes_stru
 
 NTSTATUS _samr_open_group(pipes_struct *p, SAMR_Q_OPEN_GROUP *q_u, SAMR_R_OPEN_GROUP *r_u)
 {
-	DEBUG(0,("_samr_open_group: Not yet implemented.\n"));
-	return NT_STATUS_NOT_IMPLEMENTED;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*********************************************************************
@@ -2773,6 +800,6 @@ NTSTATUS _samr_open_group(pipes_struct *
 
 NTSTATUS _samr_unknown_2d(pipes_struct *p, SAMR_Q_UNKNOWN_2D *q_u, SAMR_R_UNKNOWN_2D *r_u)
 {
-	DEBUG(0,("_samr_unknown_2d: Not yet implemented.\n"));
-	return NT_STATUS_NOT_IMPLEMENTED;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
diff -pruwN samba-2.2.12/source/rpc_server/srv_spoolss_nt.c samba-2.2.12-livebox/rpc_server/srv_spoolss_nt.c
--- samba-2.2.12/source/rpc_server/srv_spoolss_nt.c	2004-08-12 20:31:57.000000000 +0200
+++ samba-2.2.12-livebox/rpc_server/srv_spoolss_nt.c	2010-03-31 11:45:59.000000000 +0200
@@ -4709,7 +4709,6 @@ WERROR _spoolss_writeprinter(pipes_struc
 
 	(*buffer_written) = print_job_write(Printer->jobid, (char *)buffer, buffer_size);
 
-
 	r_u->buffer_written = q_u->buffer_size2;
 
 	return WERR_OK;
diff -pruwN samba-2.2.12/source/rpc_server/srv_util.c samba-2.2.12-livebox/rpc_server/srv_util.c
--- samba-2.2.12/source/rpc_server/srv_util.c	2004-08-12 20:24:26.000000000 +0200
+++ samba-2.2.12-livebox/rpc_server/srv_util.c	2010-03-31 11:45:59.000000000 +0200
@@ -80,78 +80,8 @@ rid_name domain_group_rids[] =
 
 int make_dom_gids(TALLOC_CTX *ctx, char *gids_str, DOM_GID **ppgids)
 {
-  const char *ptr;
-  pstring s2;
-  int count;
-  DOM_GID *gids;
-
-  *ppgids = NULL;
-
-  DEBUG(4,("make_dom_gids: %s\n", gids_str));
-
-  if (gids_str == NULL || *gids_str == 0)
-    return 0;
-
-  for (count = 0, ptr = gids_str; 
-       next_token(&ptr, s2, NULL, sizeof(s2)); 
-       count++)
-    ;
-
-  gids = (DOM_GID *)talloc(ctx, sizeof(DOM_GID) * count );
-  if(!gids)
-  {
-    DEBUG(0,("make_dom_gids: talloc fail !\n"));
-    return 0;
-  }
-
-  for (count = 0, ptr = gids_str; 
-       next_token(&ptr, s2, NULL, sizeof(s2)) && 
-	       count < LSA_MAX_GROUPS; 
-       count++) 
-  {
-    /* the entries are of the form GID/ATTR, ATTR being optional.*/
-    const char *attr = NULL;
-    char *pattr = NULL;
-    uint32 rid = 0;
-    int i;
-
-    pattr = strchr(s2,'/');
-    if (pattr)
-      *pattr++ = 0;
-
-    attr = pattr;
-    if (!attr || !*attr)
-      attr = "7"; /* default value for attribute is 7 */
-
-    /* look up the RID string and see if we can turn it into a rid number */
-    for (i = 0; builtin_alias_rids[i].name != NULL; i++)
-    {
-      if (strequal(builtin_alias_rids[i].name, s2))
-      {
-        rid = builtin_alias_rids[i].rid;
-        break;
-      }
-    }
-
-    if (rid == 0)
-      rid = atoi(s2);
-
-    if (rid == 0)
-    {
-      DEBUG(1,("make_dom_gids: unknown well-known alias RID %s/%s\n", s2, attr));
-      count--;
-    }
-    else
-    {
-      gids[count].g_rid = rid;
-      gids[count].attr  = atoi(attr);
-
-      DEBUG(5,("group id: %d attr: %d\n", gids[count].g_rid, gids[count].attr));
-    }
-  }
-
-  *ppgids = gids;
-  return count;
+DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 
@@ -160,40 +90,8 @@ int make_dom_gids(TALLOC_CTX *ctx, char
  ********************************************************************/
 void get_domain_user_groups(char *domain_groups, char *user)
 {
-	pstring tmp;
-
-	if (domain_groups == NULL || user == NULL) return;
-
-#if 0	/* removed by --jerry */ 
-	/* any additional groups this user is in.  e.g power users */
-	pstrcpy(domain_groups, lp_domain_groups());
-#else
-	*domain_groups = '\0';
-#endif
-
-	/* can only be a user or a guest.  cannot be guest _and_ admin */
-	if (user_in_list(user, lp_domain_guest_group()))
-	{
-		slprintf(tmp, sizeof(tmp) - 1, " %ld/7 ", DOMAIN_GROUP_RID_GUESTS);
-		pstrcat(domain_groups, tmp);
-
-		DEBUG(3,("domain guest group access %s granted\n", tmp));
-	}
-	else
-	{
-		slprintf(tmp, sizeof(tmp) -1, " %ld/7 ", DOMAIN_GROUP_RID_USERS);
-		pstrcat(domain_groups, tmp);
-
-		DEBUG(3,("domain group access %s granted\n", tmp));
-
-		if (user_in_list(user, lp_domain_admin_group()))
-		{
-			slprintf(tmp, sizeof(tmp) - 1, " %ld/7 ", DOMAIN_GROUP_RID_ADMINS);
-			pstrcat(domain_groups, tmp);
-
-			DEBUG(3,("domain admin group access %s granted\n", tmp));
-		}
-	}
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -201,25 +99,8 @@ void get_domain_user_groups(char *domain
  ********************************************************************/
 NTSTATUS local_lookup_group_name(uint32 rid, char *group_name, uint32 *type)
 {
-	int i = 0; 
-	(*type) = SID_NAME_DOM_GRP;
-
-	DEBUG(5,("lookup_group_name: rid: %d", rid));
-
-	while (domain_group_rids[i].rid != rid && domain_group_rids[i].rid != 0)
-	{
-		i++;
-	}
-
-	if (domain_group_rids[i].rid != 0)
-	{
-		fstrcpy(group_name, domain_group_rids[i].name);
-		DEBUG(5,(" = %s\n", group_name));
-		return NT_STATUS_OK;
-	}
-
-	DEBUG(5,(" none mapped\n"));
-	return NT_STATUS_NONE_MAPPED;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -227,25 +108,8 @@ NTSTATUS local_lookup_group_name(uint32
  ********************************************************************/
 NTSTATUS local_lookup_alias_name(uint32 rid, char *alias_name, uint32 *type)
 {
-	int i = 0; 
-	(*type) = SID_NAME_WKN_GRP;
-
-	DEBUG(5,("lookup_alias_name: rid: %d", rid));
-
-	while (builtin_alias_rids[i].rid != rid && builtin_alias_rids[i].rid != 0)
-	{
-		i++;
-	}
-
-	if (builtin_alias_rids[i].rid != 0)
-	{
-		fstrcpy(alias_name, builtin_alias_rids[i].name);
-		DEBUG(5,(" = %s\n", alias_name));
-		return NT_STATUS_OK;
-	}
-
-	DEBUG(5,(" none mapped\n"));
-	return NT_STATUS_NONE_MAPPED;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -253,43 +117,8 @@ NTSTATUS local_lookup_alias_name(uint32
  ********************************************************************/
 NTSTATUS local_lookup_user_name(uint32 rid, char *user_name, uint32 *type)
 {
-	SAM_ACCOUNT *sampwd=NULL;
-	int i = 0;
-	BOOL ret;
-	
-	(*type) = SID_NAME_USER;
-
-	DEBUG(5,("lookup_user_name: rid: %d", rid));
-
-	/* look up the well-known domain user rids first */
-	while (domain_user_rids[i].rid != rid && domain_user_rids[i].rid != 0)
-	{
-		i++;
-	}
-
-	if (domain_user_rids[i].rid != 0) {
-		fstrcpy(user_name, domain_user_rids[i].name);
-		DEBUG(5,(" = %s\n", user_name));
-		return NT_STATUS_OK;
-	}
-
-	pdb_init_sam(&sampwd);
-
-	/* ok, it's a user.  find the user account */
-	become_root();
-	ret = pdb_getsampwrid(sampwd, rid);
-	unbecome_root();
-
-	if (ret == True) {
-		fstrcpy(user_name, pdb_get_username(sampwd) );
-		DEBUG(5,(" = %s\n", user_name));
-		pdb_free_sam(sampwd);
-		return NT_STATUS_OK;
-	}
-
-	DEBUG(5,(" none mapped\n"));
-	pdb_free_sam(sampwd);
-	return NT_STATUS_NONE_MAPPED;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -297,18 +126,8 @@ NTSTATUS local_lookup_user_name(uint32 r
  ********************************************************************/
 NTSTATUS local_lookup_group_rid(char *group_name, uint32 *rid)
 {
-	const char *grp_name;
-	int i = -1; /* start do loop at -1 */
-
-	do /* find, if it exists, a group rid for the group name*/
-	{
-		i++;
-		(*rid) = domain_group_rids[i].rid;
-		grp_name = domain_group_rids[i].name;
-
-	} while (grp_name != NULL && !strequal(grp_name, group_name));
-
-	return (grp_name != NULL) ? NT_STATUS_OK : NT_STATUS_NONE_MAPPED;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -316,18 +135,8 @@ NTSTATUS local_lookup_group_rid(char *gr
  ********************************************************************/
 NTSTATUS local_lookup_alias_rid(char *alias_name, uint32 *rid)
 {
-	const char *als_name;
-	int i = -1; /* start do loop at -1 */
-
-	do /* find, if it exists, a alias rid for the alias name*/
-	{
-		i++;
-		(*rid) = builtin_alias_rids[i].rid;
-		als_name = builtin_alias_rids[i].name;
-
-	} while (als_name != NULL && !strequal(als_name, alias_name));
-
-	return (als_name != NULL) ? NT_STATUS_OK : NT_STATUS_NONE_MAPPED;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -335,24 +144,6 @@ NTSTATUS local_lookup_alias_rid(char *al
  ********************************************************************/
 NTSTATUS local_lookup_user_rid(char *user_name, uint32 *rid)
 {
-	SAM_ACCOUNT *sampass=NULL;
-	BOOL ret;
-
-	(*rid) = 0;
-
-	pdb_init_sam(&sampass);
-
-	/* find the user account */
-	become_root();
-	ret = pdb_getsampwnam(sampass, user_name);
-	unbecome_root();
-
-	if (ret == True) {
-		(*rid) = pdb_get_user_rid(sampass);
-		pdb_free_sam(sampass);
-		return NT_STATUS_OK;
-	}
-
-	pdb_free_sam(sampass);
-	return NT_STATUS_NONE_MAPPED;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
diff -pruwN samba-2.2.12/source/script/findsmb samba-2.2.12-livebox/script/findsmb
--- samba-2.2.12/source/script/findsmb	1970-01-01 01:00:00.000000000 +0100
+++ samba-2.2.12-livebox/script/findsmb	2010-03-31 11:45:59.000000000 +0200
@@ -0,0 +1,153 @@
+#!/usr/bin/perl
+#
+# Prints info on all smb responding machines on a subnet.
+# This script needs to be run on a machine without nmbd running and be
+# run as root to get correct info from WIN95 clients.
+#
+# syntax:
+#    findsmb [subnet broadcast address]
+#
+# with no agrument it will list machines on the current subnet
+#
+# There will be a "+" in front of the workgroup name for machines that are
+# local master browsers for that workgroup. There will be an "*" in front
+# of the workgroup name for machines that are the domain master browser for
+# that workgroup.
+#
+
+$SAMBABIN = "/usr/local/samba/bin";
+
+for ($i = 0; $i < 2; $i++) {	# test for -d option and broadcast address
+  $_ = shift;
+  if (m/-d|-D/) {
+    $DEBUG = 1;
+  } else  {
+    if ($_) {
+      $BCAST = "-B $_";
+    }
+  }
+}
+
+sub ipsort			# do numeric sort on last field of IP address
+{
+  @t1 = split(/\./,$a);
+  @t2 = split(/\./,$b);
+  @t1[3] <=> @t2[3];
+}
+
+# look for all machines that respond to a name lookup
+
+open(NMBLOOKUP,"$SAMBABIN/nmblookup $BCAST '*'|") || 
+  die("Can't run nmblookup '*'.\n");
+
+# get rid of all lines that are not a response IP address,
+# strip everything but IP address and sort by last field in address
+
+@ipaddrs = sort ipsort grep(s/ \*<00>.*$//,<NMBLOOKUP>);
+
+# print header info
+
+print "\n                                *=DMB\n";
+print "                                +=LMB\n";
+print "IP ADDR         NETBIOS NAME     WORKGROUP/OS/VERSION $BCAST\n";
+print "---------------------------------------------------------------------\n";
+
+foreach $ip (@ipaddrs)		# loop through each IP address found
+{
+  $ip =~ s/\n//;		# strip newline from IP address
+
+# find the netbios names registered by each machine
+
+  open(NMBLOOKUP,"$SAMBABIN/nmblookup -r -A $ip|") || 
+	die("Can't get nmb name list.\n");
+  @nmblookup = <NMBLOOKUP>;
+  close NMBLOOKUP;
+
+# get the first non group <00> name
+
+  @name = grep(/<00> -        /,@nmblookup);
+  $_ = @name[0];
+  if (not $_) {
+# try without the -r option
+    open(NMBLOOKUP,"$SAMBABIN/nmblookup -A $ip|") ||
+        die("Can't get nmb name list.\n");
+    @nmblookup = <NMBLOOKUP>;
+    close NMBLOOKUP;
+    @name = grep(/<00> -        /,@nmblookup);
+    $_ = @name[0];
+  }
+# The Netbios name can contain lot of characters also '<' '>'
+# and spaces. The follwing cures embedded space but not
+# names starting or ending with spaces
+  /(.{1,15})\s+<00>\s+/;
+  $name = $1;
+
+  if (not $name) {                     # no netbios name found
+# try getting the host name
+    ($name, $aliases, $type, $length, @addresses) = 
+      gethostbyaddr(pack('C4',split('\.',$ip)),2);
+    if (! $name) {			# could not get name
+      $name = "unknown name";
+    }
+# truncate name to 15 characters
+    if (length($name) > 15) {
+        $name = substr($name,0,15);
+    }
+# do an smbclient command on the ip address
+
+    open(SMB,"$SAMBABIN/smbclient -N -L '$ip' -I $ip -U% |") ||
+        die("Can't do smbclient command.\n");
+    @smb = <SMB>;
+    close SMB;
+  } else {                              # netbios name found
+
+# do an smbclient command on the netbios name.
+
+    open(SMB,"$SAMBABIN/smbclient -N -L '$name' -I $ip -U% |") ||
+	die("Can't do smbclient command.\n");
+    @smb = <SMB>;
+    close SMB;
+  }
+  if ($DEBUG) {		# if -d flag print results of nmblookup and smbclient
+    print "===============================================================\n";
+    print @nmblookup;
+    print @smb;
+  }
+
+# look for the OS= string
+
+  @info = grep(/OS=/,@smb);
+  $_ = @info[0];
+  if ($_) {				# we found response
+    s/.*Domain=|OS=|Server=|\n//g;	# strip out descriptions to make line shorter
+
+  } else {				# no OS= string in response (WIN95 client)
+
+# for WIN95 clients get workgroup name from nmblookup response
+    @name = grep(/<00> - <GROUP>/,@nmblookup);
+    $_ = @name[0];
+    if ($_) {
+# Same as before for space and characters
+      /(.{1,15})\s+<00>\s+/;
+      $_ = "[$1]";
+    } else {
+      $_ = "Unknown Workgroup";
+    }
+  }
+
+# see if machine registered a local master browser name
+  if (grep(/<1d>/,@nmblookup)) {
+    $master = '+';			# indicate local master browser
+    if (grep(/<1b>/,@nmblookup)) {	# how about domain master browser?
+      $master = '*';			# indicate domain master browser
+    }
+  } else {
+    $master = ' ';			# not a browse master
+  }
+
+# line up info in 3 columns
+
+  print "$ip".' 'x(16-length($ip))."$name".' 'x(16-length($name))."$master"."$_\n";
+
+} 
+
diff -pruwN samba-2.2.12/source/smbd/blocking.c samba-2.2.12-livebox/smbd/blocking.c
--- samba-2.2.12/source/smbd/blocking.c	2004-08-12 20:24:20.000000000 +0200
+++ samba-2.2.12-livebox/smbd/blocking.c	2010-03-31 11:45:59.000000000 +0200
@@ -1,9 +1,9 @@
 /* 
-   Unix SMB/CIFS implementation.
+   Unix SMB\CIFS implementation.
    Blocking Locking functions
    Copyright (C) Jeremy Allison 1998
    
-   This program is free software; you can redistribute it and/or modify
+   This program is free software; you can redistribute it and\or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation; either version 2 of the License, or
    (at your option) any later version.
@@ -48,8 +48,8 @@ static ubi_slList blocking_lock_queue =
 
 static void free_blocking_lock_record(blocking_lock_record *blr)
 {
-  SAFE_FREE(blr->inbuf);
-  SAFE_FREE(blr);
+DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /****************************************************************************
@@ -58,17 +58,8 @@ static void free_blocking_lock_record(bl
 
 static files_struct *get_fsp_from_pkt(char *inbuf)
 {
-  switch(CVAL(inbuf,smb_com)) {
-  case SMBlock:
-  case SMBlockread:
-    return file_fsp(inbuf,smb_vwv0);
-  case SMBlockingX:
-    return file_fsp(inbuf,smb_vwv2);
-  default:
-    DEBUG(0,("get_fsp_from_pkt: PANIC - unknown type on blocking lock queue - exiting.!\n"));
-    exit_server("PANIC - unknown type on blocking lock queue");
-  }
-  return NULL; /* Keep compiler happy. */
+DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /****************************************************************************
@@ -77,7 +68,8 @@ static files_struct *get_fsp_from_pkt(ch
 
 static BOOL in_chained_smb(void)
 {
-  return (chain_size != 0);
+DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 static void received_unlock_msg(int msg_type, pid_t src, void *buf, size_t len);
@@ -89,66 +81,8 @@ static void received_unlock_msg(int msg_
 BOOL push_blocking_lock_request( char *inbuf, int length, int lock_timeout,
 		int lock_num, uint16 lock_pid, SMB_BIG_UINT offset, SMB_BIG_UINT count)
 {
-  static BOOL set_lock_msg;
-  blocking_lock_record *blr;
-  NTSTATUS status;
-
-  if(in_chained_smb() ) {
-    DEBUG(0,("push_blocking_lock_request: cannot queue a chained request (currently).\n"));
-    return False;
-  }
-
-  /*
-   * Now queue an entry on the blocking lock queue. We setup
-   * the expiration time here.
-   */
-
-  if((blr = (blocking_lock_record *)malloc(sizeof(blocking_lock_record))) == NULL) {
-    DEBUG(0,("push_blocking_lock_request: Malloc fail !\n" ));
-    return False;
-  }
-
-  if((blr->inbuf = (char *)malloc(length)) == NULL) {
-    DEBUG(0,("push_blocking_lock_request: Malloc fail (2)!\n" ));
-    SAFE_FREE(blr);
-    return False;
-  }
-
-  blr->com_type = CVAL(inbuf,smb_com);
-  blr->fsp = get_fsp_from_pkt(inbuf);
-  blr->expire_time = (lock_timeout == -1) ? (time_t)-1 : time(NULL) + (time_t)lock_timeout;
-  blr->lock_num = lock_num;
-  blr->lock_pid = lock_pid;
-  blr->offset = offset;
-  blr->count = count;
-  memcpy(blr->inbuf, inbuf, length);
-  blr->length = length;
-
-  /* Add a pending lock record for this. */
-  status = brl_lock(blr->fsp->dev, blr->fsp->inode, blr->fsp->fnum,
-		lock_pid, sys_getpid(), blr->fsp->conn->cnum,
-		offset, count,
-		PENDING_LOCK);
-
-  if (!NT_STATUS_IS_OK(status)) {
-	DEBUG(0,("push_blocking_lock_request: failed to add PENDING_LOCK record.\n"));
-	free_blocking_lock_record(blr);
-	return False;
-  }
-
-  ubi_slAddTail(&blocking_lock_queue, blr);
-
-  /* Ensure we'll receive messages when this is unlocked. */
-  if (!set_lock_msg) {
-	  message_register(MSG_SMB_UNLOCK, received_unlock_msg);
-	  set_lock_msg = True;
-  }
-
-  DEBUG(3,("push_blocking_lock_request: lock request length=%d blocked with expiry time %d (+%d) \
-for fnum = %d, name = %s\n", length, (int)blr->expire_time, lock_timeout,
-        blr->fsp->fnum, blr->fsp->fsp_name ));
-
-  return True;
+DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /****************************************************************************
@@ -157,11 +91,8 @@ for fnum = %d, name = %s\n", length, (in
 
 static void send_blocking_reply(char *outbuf, int outsize)
 {
-	if(outsize > 4)
-		smb_setlen(outbuf,outsize - 4);
-
-	if (!send_smb(smbd_server_fd(),outbuf))
-		exit_server("send_blocking_reply: send_smb failed.");
+DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /****************************************************************************
@@ -170,27 +101,8 @@ static void send_blocking_reply(char *ou
 
 static void reply_lockingX_success(blocking_lock_record *blr)
 {
-  char *outbuf = OutBuffer;
-  int bufsize = BUFFER_SIZE;
-  char *inbuf = blr->inbuf;
-  int outsize = 0;
-
-  construct_reply_common(inbuf, outbuf);
-  set_message(outbuf,2,0,True);
-
-  /*
-   * As this message is a lockingX call we must handle
-   * any following chained message correctly.
-   * This is normally handled in construct_reply(),
-   * but as that calls switch_message, we can't use
-   * that here and must set up the chain info manually.
-   */
-
-  outsize = chain_reply(inbuf,outbuf,blr->length,bufsize);
-
-  outsize += chain_size;
-
-  send_blocking_reply(outbuf,outsize);
+DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /****************************************************************************
@@ -199,19 +111,8 @@ static void reply_lockingX_success(block
 
 static void generic_blocking_lock_error(blocking_lock_record *blr, NTSTATUS status)
 {
-	char *outbuf = OutBuffer;
-	char *inbuf = blr->inbuf;
-	construct_reply_common(inbuf, outbuf);
-
-	/* whenever a timeout is given w2k maps LOCK_NOT_GRANTED to
-	   FILE_LOCK_CONFLICT! (tridge) */
-	if (NT_STATUS_EQUAL(status, NT_STATUS_LOCK_NOT_GRANTED)) {
-		status = NT_STATUS_FILE_LOCK_CONFLICT;
-	}
-
-	ERROR_NT(status);
-	if (!send_smb(smbd_server_fd(),outbuf))
-		exit_server("generic_blocking_lock_error: send_smb failed.");
+DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /****************************************************************************
@@ -290,69 +191,8 @@ static void blocking_lock_reply_error(bl
 
 static BOOL process_lockread(blocking_lock_record *blr)
 {
-	char *outbuf = OutBuffer;
-	char *inbuf = blr->inbuf;
-	ssize_t nread = -1;
-	char *data, *p;
-	int outsize = 0;
-	SMB_BIG_UINT startpos;
-	size_t numtoread;
-	NTSTATUS status;
-	connection_struct *conn = conn_find(SVAL(inbuf,smb_tid));
-	files_struct *fsp = blr->fsp;
-
-	numtoread = SVAL(inbuf,smb_vwv1);
-	startpos = (SMB_BIG_UINT)IVAL(inbuf,smb_vwv2);
-	
-	numtoread = MIN(BUFFER_SIZE-outsize,numtoread);
-	data = smb_buf(outbuf) + 3;
- 
-	status = do_lock_spin( fsp, conn, SVAL(inbuf,smb_pid), (SMB_BIG_UINT)numtoread, 
-			  startpos, READ_LOCK);
-	if (NT_STATUS_V(status)) {
-		if (!NT_STATUS_EQUAL(status,NT_STATUS_LOCK_NOT_GRANTED) &&
-			!NT_STATUS_EQUAL(status,NT_STATUS_FILE_LOCK_CONFLICT)) {
-			/*
-			 * We have other than a "can't get lock"
-			 * error. Send an error.
-			 * Return True so we get dequeued.
-			 */
-			generic_blocking_lock_error(blr, status);
-			return True;
-		}
-
-		/*
-		 * Still waiting for lock....
-		 */
-		
-		DEBUG(10,("process_lockread: failed to get lock for file = %s. Still waiting....\n",
-			  fsp->fsp_name));
-		return False;
-	}
-
-	nread = read_file(fsp,data,startpos,numtoread);
-
-	if (nread < 0) {
-		generic_blocking_lock_error(blr,NT_STATUS_ACCESS_DENIED);
-		return True;
-	}
-	
-	construct_reply_common(inbuf, outbuf);
-	outsize = set_message(outbuf,5,0,True);
-	
-	outsize += nread;
-	SSVAL(outbuf,smb_vwv0,nread);
-	SSVAL(outbuf,smb_vwv5,nread+3);
-	p = smb_buf(outbuf);
-	*p++ = 1;
-	SSVAL(p,0,nread); p += 2;
-	set_message_end(outbuf, p+nread);
-	
-	DEBUG(3, ( "process_lockread file = %s, fnum=%d num=%d nread=%d\n",
-		   fsp->fsp_name, fsp->fnum, (int)numtoread, (int)nread ) );
-	
-	send_blocking_reply(outbuf,outsize);
-	return True;
+DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /****************************************************************************
@@ -362,51 +202,8 @@ static BOOL process_lockread(blocking_lo
 
 static BOOL process_lock(blocking_lock_record *blr)
 {
-	char *outbuf = OutBuffer;
-	char *inbuf = blr->inbuf;
-	int outsize;
-	SMB_BIG_UINT count = (SMB_BIG_UINT)0, offset = (SMB_BIG_UINT)0;
-	NTSTATUS status;
-	connection_struct *conn = conn_find(SVAL(inbuf,smb_tid));
-	files_struct *fsp = blr->fsp;
-
-	count = (SMB_BIG_UINT)IVAL(inbuf,smb_vwv1);
-	offset = (SMB_BIG_UINT)IVAL(inbuf,smb_vwv3);
-
-	errno = 0;
-	status = do_lock_spin(fsp, conn, SVAL(inbuf,smb_pid), count, 
-			 offset, WRITE_LOCK);
-	if (NT_STATUS_IS_ERR(status)) {
-		if (!NT_STATUS_EQUAL(status,NT_STATUS_LOCK_NOT_GRANTED) &&
-			!NT_STATUS_EQUAL(status,NT_STATUS_FILE_LOCK_CONFLICT)) {
-			/*
-			 * We have other than a "can't get lock"
-			 * error. Send an error.
-			 * Return True so we get dequeued.
-			 */
-			
-			blocking_lock_reply_error(blr, status);
-			return True;
-		}
-		/*
-		 * Still can't get the lock - keep waiting.
-		 */
-		DEBUG(10,("process_lock: failed to get lock for file = %s. Still waiting....\n",
-			  fsp->fsp_name));
-		return False;
-	}
-
-	/*
-	 * Success - we got the lock.
-	 */
-	
-	DEBUG(3,("process_lock : file=%s fnum=%d offset=%.0f count=%.0f\n",
-		 fsp->fsp_name, fsp->fnum, (double)offset, (double)count));
-	
-	construct_reply_common(inbuf, outbuf);
-	outsize = set_message(outbuf,0,0,True);
-	send_blocking_reply(outbuf,outsize);
-	return True;
+DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /****************************************************************************
@@ -416,73 +213,8 @@ static BOOL process_lock(blocking_lock_r
 
 static BOOL process_lockingX(blocking_lock_record *blr)
 {
-	char *inbuf = blr->inbuf;
-	unsigned char locktype = CVAL(inbuf,smb_vwv3);
-	files_struct *fsp = blr->fsp;
-	connection_struct *conn = conn_find(SVAL(inbuf,smb_tid));
-	uint16 num_ulocks = SVAL(inbuf,smb_vwv6);
-	uint16 num_locks = SVAL(inbuf,smb_vwv7);
-	SMB_BIG_UINT count = (SMB_BIG_UINT)0, offset = (SMB_BIG_UINT)0;
-	uint16 lock_pid;
-	BOOL large_file_format = (locktype & LOCKING_ANDX_LARGE_FILES);
-	char *data;
-	NTSTATUS status = NT_STATUS_OK;
-
-	data = smb_buf(inbuf) + ((large_file_format ? 20 : 10)*num_ulocks);
-
-	/* 
-	 * Data now points at the beginning of the list
-	 * of smb_lkrng structs.
-	 */
-	
-	for(; blr->lock_num < num_locks; blr->lock_num++) {
-		BOOL err;
-
-		lock_pid = get_lock_pid( data, blr->lock_num, large_file_format);
-		count = get_lock_count( data, blr->lock_num, large_file_format);
-		offset = get_lock_offset( data, blr->lock_num, large_file_format, &err);
-		
-		/*
-		 * We know err cannot be set as if it was the lock
-		 * request would never have been queued. JRA.
-		 */
-		errno = 0;
-		status = do_lock_spin(fsp,conn,lock_pid,count,offset, 
-				 ((locktype & 1) ? READ_LOCK : WRITE_LOCK));
-		if (NT_STATUS_IS_ERR(status)) break;
-	}
-
-	if(blr->lock_num == num_locks) {
-		/*
-		 * Success - we got all the locks.
-		 */
-		
-		DEBUG(3,("process_lockingX file = %s, fnum=%d type=%d num_locks=%d\n",
-			 fsp->fsp_name, fsp->fnum, (unsigned int)locktype, num_locks) );
-
-		reply_lockingX_success(blr);
-		return True;
-	} else if (!NT_STATUS_EQUAL(status,NT_STATUS_LOCK_NOT_GRANTED) &&
-			!NT_STATUS_EQUAL(status,NT_STATUS_FILE_LOCK_CONFLICT)) {
-			/*
-			 * We have other than a "can't get lock"
-			 * error. Free any locks we had and return an error.
-			 * Return True so we get dequeued.
-			 */
-		
-		blocking_lock_reply_error(blr, status);
-		return True;
-	}
-
-	/*
-	 * Still can't get all the locks - keep waiting.
-	 */
-	
-	DEBUG(10,("process_lockingX: only got %d locks of %d needed for file %s, fnum = %d. \
-Waiting....\n", 
-		  blr->lock_num, num_locks, fsp->fsp_name, fsp->fnum));
-	
-	return False;
+DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /****************************************************************************
@@ -492,18 +224,8 @@ Waiting....\n",
 
 static BOOL blocking_lock_record_process(blocking_lock_record *blr)
 {
-  switch(blr->com_type) {
-  case SMBlock:
-    return process_lock(blr);
-  case SMBlockread:
-    return process_lockread(blr);
-  case SMBlockingX:
-    return process_lockingX(blr);
-  default:
-    DEBUG(0,("blocking_lock_record_process: PANIC - unknown type on blocking lock queue - exiting.!\n"));
-    exit_server("PANIC - unknown type on blocking lock queue");
-  }
-  return False; /* Keep compiler happy. */
+DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /****************************************************************************
@@ -571,8 +293,8 @@ file %s fnum = %d\n", blr->com_type, fsp
 
 static void received_unlock_msg(int msg_type, pid_t src, void *buf, size_t len)
 {
-	DEBUG(10,("received_unlock_msg\n"));
-	process_blocking_lock_queue(time(NULL));
+DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /****************************************************************************
diff -pruwN samba-2.2.12/source/smbd/chgpasswd.c samba-2.2.12-livebox/smbd/chgpasswd.c
--- samba-2.2.12/source/smbd/chgpasswd.c	2004-08-12 20:24:20.000000000 +0200
+++ samba-2.2.12-livebox/smbd/chgpasswd.c	2010-03-31 11:45:59.000000000 +0200
@@ -55,513 +55,55 @@ extern struct passdb_ops pdb_ops;
 
 static int findpty(char **slave)
 {
-	int master;
-	static fstring line;
-	DIR *dirp;
-	char *dpname;
-
-#if defined(HAVE_GRANTPT)
-	/* Try to open /dev/ptmx. If that fails, fall through to old method. */
-	if ((master = sys_open("/dev/ptmx", O_RDWR, 0)) >= 0)
-	{
-		grantpt(master);
-		unlockpt(master);
-		*slave = (char *)ptsname(master);
-		if (*slave == NULL)
-		{
-			DEBUG(0,
-			      ("findpty: Unable to create master/slave pty pair.\n"));
-			/* Stop fd leak on error. */
-			close(master);
-			return -1;
-		}
-		else
-		{
-			DEBUG(10,
-			      ("findpty: Allocated slave pty %s\n", *slave));
-			return (master);
-		}
-	}
-#endif /* HAVE_GRANTPT */
-
-	fstrcpy(line, "/dev/ptyXX");
-
-	dirp = opendir("/dev");
-	if (!dirp)
-		return (-1);
-	while ((dpname = readdirname(dirp)) != NULL)
-	{
-		if (strncmp(dpname, "pty", 3) == 0 && strlen(dpname) == 5)
-		{
-			DEBUG(3,
-			      ("pty: try to open %s, line was %s\n", dpname,
-			       line));
-			line[8] = dpname[3];
-			line[9] = dpname[4];
-			if ((master = sys_open(line, O_RDWR, 0)) >= 0)
-			{
-				DEBUG(3, ("pty: opened %s\n", line));
-				line[5] = 't';
-				*slave = line;
-				closedir(dirp);
-				return (master);
-			}
-		}
-	}
-	closedir(dirp);
-	return (-1);
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 static int dochild(int master, char *slavedev, char *name,
 		   char *passwordprogram, BOOL as_root)
 {
-	int slave;
-	struct termios stermios;
-	struct passwd *pass = Get_Pwnam(name, True);
-	gid_t gid;
-	uid_t uid;
-
-	if (pass == NULL)
-	{
-		DEBUG(0,
-		      ("dochild: user name %s doesn't exist in the UNIX password database.\n",
-		       name));
-		return False;
-	}
-
-	gid = pass->pw_gid;
-	uid = pass->pw_uid;
-
-	gain_root_privilege();
-
-	/* Start new session - gets rid of controlling terminal. */
-	if (setsid() < 0)
-	{
-		DEBUG(3,
-		      ("Weirdness, couldn't let go of controlling terminal\n"));
-		return (False);
-	}
-
-	/* Open slave pty and acquire as new controlling terminal. */
-	if ((slave = sys_open(slavedev, O_RDWR, 0)) < 0)
-	{
-		DEBUG(3, ("More weirdness, could not open %s\n", slavedev));
-		return (False);
-	}
-#ifdef I_PUSH
-	ioctl(slave, I_PUSH, "ptem");
-	ioctl(slave, I_PUSH, "ldterm");
-#elif defined(TIOCSCTTY)
-	if (ioctl(slave, TIOCSCTTY, 0) < 0)
-	{
-		DEBUG(3, ("Error in ioctl call for slave pty\n"));
-		/* return(False); */
-	}
-#endif
-
-	/* Close master. */
-	close(master);
-
-	/* Make slave stdin/out/err of child. */
-
-	if (dup2(slave, STDIN_FILENO) != STDIN_FILENO)
-	{
-		DEBUG(3, ("Could not re-direct stdin\n"));
-		return (False);
-	}
-	if (dup2(slave, STDOUT_FILENO) != STDOUT_FILENO)
-	{
-		DEBUG(3, ("Could not re-direct stdout\n"));
-		return (False);
-	}
-	if (dup2(slave, STDERR_FILENO) != STDERR_FILENO)
-	{
-		DEBUG(3, ("Could not re-direct stderr\n"));
-		return (False);
-	}
-	if (slave > 2)
-		close(slave);
-
-	/* Set proper terminal attributes - no echo, canonical input processing,
-	   no map NL to CR/NL on output. */
-
-	if (tcgetattr(0, &stermios) < 0)
-	{
-		DEBUG(3,
-		      ("could not read default terminal attributes on pty\n"));
-		return (False);
-	}
-	stermios.c_lflag &= ~(ECHO | ECHOE | ECHOK | ECHONL);
-	stermios.c_lflag |= ICANON;
-#ifdef ONLCR
- 	stermios.c_oflag &= ~(ONLCR);
-#endif
-	if (tcsetattr(0, TCSANOW, &stermios) < 0) {
-		DEBUG(3, ("could not set attributes of pty\n"));
-		return (False);
-	}
-
-	/* make us completely into the right uid */
-	if (!as_root) {
-		become_user_permanently(uid, gid);
-	}
-
-	DEBUG(10,
-	      ("Invoking '%s' as password change program.\n",
-	       passwordprogram));
-
-	/* execl() password-change application */
-	if (execl("/bin/sh", "sh", "-c", passwordprogram, NULL) < 0)
-	{
-		DEBUG(3, ("Bad status returned from %s\n", passwordprogram));
-		return (False);
-	}
-	return (True);
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 static int expect(int master, char *issue, char *expected)
 {
-	pstring buffer;
-	int attempts, timeout, nread, len;
-	BOOL match = False;
-
-	for (attempts = 0; attempts < 2; attempts++) {
-		if (!strequal(issue, ".")) {
-			if (lp_passwd_chat_debug())
-				DEBUG(100, ("expect: sending [%s]\n", issue));
-
-			if ((len = write(master, issue, strlen(issue))) != strlen(issue)) {
-				DEBUG(2,("expect: (short) write returned %d\n", len ));
-				return False;
-			}
-		}
-
-		if (strequal(expected, "."))
-			return True;
-
-		timeout = 2000;
-		nread = 0;
-		buffer[nread] = 0;
-
-		while ((len = read_with_timeout(master, buffer + nread, 1,
-						sizeof(buffer) - nread - 1,
-						timeout)) > 0) {
-			nread += len;
-			buffer[nread] = 0;
-
-			{
-				/* Eat leading/trailing whitespace before match. */
-				pstring str;
-				pstrcpy( str, buffer);
-				trim_string( str, " ", " ");
-
-				if ((match = (unix_wild_match(expected, str) == 0)))
-					timeout = 200;
-			}
-		}
-
-		if (lp_passwd_chat_debug())
-			DEBUG(100, ("expect: expected [%s] received [%s] match %s\n",
-				    expected, buffer, match ? "yes" : "no" ));
-
-		if (match)
-			break;
-
-		if (len < 0) {
-			DEBUG(2, ("expect: %s\n", strerror(errno)));
-			return False;
-		}
-	}
-
-	DEBUG(10,("expect: returning %s\n", match ? "True" : "False" ));
-	return match;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 static void pwd_sub(char *buf)
 {
-	all_string_sub(buf, "\\n", "\n", 0);
-	all_string_sub(buf, "\\r", "\r", 0);
-	all_string_sub(buf, "\\s", " ", 0);
-	all_string_sub(buf, "\\t", "\t", 0);
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 static int talktochild(int master, const char *seq)
 {
-	int count = 0;
-	fstring issue, expected;
-
-	fstrcpy(issue, ".");
-
-	while (next_token(&seq, expected, NULL, sizeof(expected)))
-	{
-		pwd_sub(expected);
-		count++;
-
-		if (!expect(master, issue, expected))
-		{
-			DEBUG(3, ("Response %d incorrect\n", count));
-			return False;
-		}
-
-		if (!next_token(&seq, issue, NULL, sizeof(issue)))
-			fstrcpy(issue, ".");
-
-		pwd_sub(issue);
-	}
-	if (!strequal(issue, ".")) {
-		/* we have one final issue to send */
-		fstrcpy(expected, ".");
-		if (!expect(master, issue, expected))
-			return False;
-	}
-
-	return (count > 0);
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 static BOOL chat_with_program(char *passwordprogram, char *name,
 			      char *chatsequence, BOOL as_root)
 {
-	char *slavedev;
-	int master;
-	pid_t pid, wpid;
-	int wstat;
-	BOOL chstat = False;
-
-	/* allocate a pseudo-terminal device */
-	if ((master = findpty(&slavedev)) < 0)
-	{
-		DEBUG(3,
-		      ("Cannot Allocate pty for password change: %s\n",
-		       name));
-		return (False);
-	}
-
-	/*
-	 * We need to temporarily stop CatchChild from eating
-	 * SIGCLD signals as it also eats the exit status code. JRA.
-	 */
-
-	CatchChildLeaveStatus();
-
-	if ((pid = sys_fork()) < 0)
-	{
-		DEBUG(3,
-		      ("Cannot fork() child for password change: %s\n",
-		       name));
-		close(master);
-		CatchChild();
-		return (False);
-	}
-
-	/* we now have a pty */
-	if (pid > 0)
-	{			/* This is the parent process */
-		if ((chstat = talktochild(master, chatsequence)) == False)
-		{
-			DEBUG(3,
-			      ("Child failed to change password: %s\n",
-			       name));
-			kill(pid, SIGKILL);	/* be sure to end this process */
-		}
-
-		while ((wpid = sys_waitpid(pid, &wstat, 0)) < 0)
-		{
-			if (errno == EINTR)
-			{
-				errno = 0;
-				continue;
-			}
-			break;
-		}
-
-		if (wpid < 0)
-		{
-			DEBUG(3, ("The process is no longer waiting!\n\n"));
-			close(master);
-			CatchChild();
-			return (False);
-		}
-
-		/*
-		 * Go back to ignoring children.
-		 */
-		CatchChild();
-
-		close(master);
-
-		if (pid != wpid)
-		{
-			DEBUG(3,
-			      ("We were waiting for the wrong process ID\n"));
-			return (False);
-		}
-		if (WIFEXITED(wstat) == 0)
-		{
-			DEBUG(3,
-			      ("The process exited while we were waiting\n"));
-			return (False);
-		}
-		if (WEXITSTATUS(wstat) != 0)
-		{
-			DEBUG(3,
-			      ("The status of the process exiting was %d\n",
-			       wstat));
-			return (False);
-		}
-
-	}
-	else
-	{
-		/* CHILD */
-
-		/*
-		 * Lose any oplock capabilities.
-		 */
-		oplock_set_capability(False, False);
-
-		/* make sure it doesn't freeze */
-		alarm(20);
-
-		if (as_root)
-			become_root();
-
-		DEBUG(3,
-		      ("Dochild for user %s (uid=%d,gid=%d)\n", name,
-		       (int)getuid(), (int)getgid()));
-		chstat =
-			dochild(master, slavedev, name, passwordprogram,
-				as_root);
-
-		if (as_root)
-			unbecome_root();
-
-		/*
-		 * The child should never return from dochild() ....
-		 */
-
-		DEBUG(0,
-		      ("chat_with_program: Error: dochild() returned %d\n",
-		       chstat));
-		exit(1);
-	}
-
-	if (chstat)
-		DEBUG(3,
-		      ("Password change %ssuccessful for user %s\n",
-		       (chstat ? "" : "un"), name));
-	return (chstat);
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 
 BOOL chgpasswd(char *name, const char *oldpass, const char *newpass, BOOL as_root)
 {
-	pstring passwordprogram;
-	pstring chatsequence;
-	size_t i;
-	size_t len;
-
-	strlower(name);
-	DEBUG(3, ("Password change for user: %s\n", name));
-
-#if DEBUG_PASSWORD
-	DEBUG(100, ("Passwords: old=%s new=%s\n", oldpass, newpass));
-#endif
-
-	/* Take the passed information and test it for minimum criteria */
-	/* Minimum password length */
-	if (strlen(newpass) < lp_min_passwd_length()) {
-		/* too short, must be at least MINPASSWDLENGTH */
-		DEBUG(0, ("Password Change: user %s, New password is shorter than minimum password length = %d\n",
-		       name, lp_min_passwd_length()));
-		return (False);	/* inform the user */
-	}
-
-	/* Password is same as old password */
-	if (strcmp(oldpass, newpass) == 0) {
-		/* don't allow same password */
-		DEBUG(2, ("Password Change: %s, New password is same as old\n", name));	/* log the attempt */
-		return (False);	/* inform the user */
-	}
-
-	/* 
-	 * Check the old and new passwords don't contain any control
-	 * characters.
-	 */
-
-	len = strlen(oldpass);
-	for (i = 0; i < len; i++) {
-		if (iscntrl((int)oldpass[i])) {
-			DEBUG(0,
-			      ("chat_with_program: oldpass contains control characters (disallowed).\n"));
-			return False;
-		}
-	}
-
-	len = strlen(newpass);
-	for (i = 0; i < len; i++) {
-		if (iscntrl((int)newpass[i])) {
-			DEBUG(0,
-			      ("chat_with_program: newpass contains control characters (disallowed).\n"));
-			return False;
-		}
-	}
-
-#ifdef WITH_PAM
-	if (lp_pam_password_change()) {
-		BOOL ret;
-
-		if (as_root)
-			become_root();
-
-		ret = smb_pam_passchange(name, oldpass, newpass);
-
-		if (as_root)
-			unbecome_root();
-
-		return ret;
-	}
-#endif
-
-	pstrcpy(passwordprogram, lp_passwd_program());
-	pstrcpy(chatsequence, lp_passwd_chat());
-
-	if (!*chatsequence) {
-		DEBUG(2, ("chgpasswd: Null chat sequence - no password changing\n"));
-		return (False);
-	}
-
-	if (!*passwordprogram) {
-		DEBUG(2, ("chgpasswd: Null password program - no password changing\n"));
-		return (False);
-	}
-
-	if (as_root) {
-		/* The password program *must* contain the user name to work. Fail if not. */
-		if (strstr(passwordprogram, "%u") == NULL) {
-			DEBUG(0,("chgpasswd: Running as root the 'passwd program' parameter *MUST* contain \
-the string %%u, and the given string %s does not.\n", passwordprogram ));
-			return False;
-		}
-	}
-
-	pstring_sub(passwordprogram, "%u", name);
-	/* note that we do NOT substitute the %o and %n in the password program
-	   as this would open up a security hole where the user could use
-	   a new password containing shell escape characters */
-
-	pstring_sub(chatsequence, "%u", name);
-	all_string_sub(chatsequence, "%o", oldpass, sizeof(pstring));
-	all_string_sub(chatsequence, "%n", newpass, sizeof(pstring));
-	return (chat_with_program
-		(passwordprogram, name, chatsequence, as_root));
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 #else /* ALLOW_CHANGE_PASSWORD */
 
 BOOL chgpasswd(char *name, const char *oldpass, const char *newpass, BOOL as_root)
 {
-	DEBUG(0, ("Password changing not compiled in (user=%s)\n", name));
-	return (False);
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 #endif /* ALLOW_CHANGE_PASSWORD */
 
@@ -572,65 +114,8 @@ BOOL chgpasswd(char *name, const char *o
 BOOL check_lanman_password(char *user, uchar * pass1,
 			   uchar * pass2, SAM_ACCOUNT **hnd)
 {
-	static uchar null_pw[16];
-	uchar unenc_new_pw[16];
-	uchar unenc_old_pw[16];
-	SAM_ACCOUNT *sampass = NULL;
-	uint16 acct_ctrl;
-	uint8 *lanman_pw;
-	BOOL ret;
-	
-	become_root();
-	ret = pdb_getsampwnam(sampass, user);
-	unbecome_root();
-
-	if (ret == False) {
-		DEBUG(0,("check_lanman_password: getsampwnam returned NULL\n"));
-		pdb_free_sam(sampass);
-		return False;
-	}
-	
-	acct_ctrl = pdb_get_acct_ctrl     (sampass);
-	lanman_pw = pdb_get_lanman_passwd (sampass);
-
-	if (acct_ctrl & ACB_DISABLED) {
-		DEBUG(0,("check_lanman_password: account %s disabled.\n", user));
-		pdb_free_sam(sampass);
-		return False;
-	}
-
-	if ((lanman_pw == NULL) && (acct_ctrl & ACB_PWNOTREQ)) {
-		uchar no_pw[14];
-		memset(no_pw, '\0', 14);
-		E_P16(no_pw, null_pw);
-		if (!pdb_set_lanman_passwd(sampass, null_pw)) {
-			pdb_free_sam(sampass);
-			return False;
-		}
-	}
-	else if (lanman_pw == NULL) {
-		DEBUG(0, ("check_lanman_password: no lanman password !\n"));
-		pdb_free_sam(sampass);
-		return False;
-	}
-
-	/* Get the new lanman hash. */
-	D_P16(lanman_pw, pass2, unenc_new_pw);
-
-	/* Use this to get the old lanman hash. */
-	D_P16(unenc_new_pw, pass1, unenc_old_pw);
-
-	/* Check that the two old passwords match. */
-	if (memcmp(lanman_pw, unenc_old_pw, 16)) {
-		DEBUG(0,("check_lanman_password: old password doesn't match.\n"));
-		pdb_free_sam(sampass);
-		return False;
-	}
-
-	/* this saves the pointer for the caller */
-	*hnd = sampass;
-	
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /***********************************************************
@@ -642,51 +127,8 @@ BOOL check_lanman_password(char *user, u
 BOOL change_lanman_password(SAM_ACCOUNT *sampass, uchar * pass1,
 			    uchar * pass2)
 {
-	static uchar null_pw[16];
-	uchar unenc_new_pw[16];
-	BOOL ret;
-	uint16 acct_ctrl;
-	uint8 *pwd;
-
-	if (sampass == NULL) {
-		DEBUG(0,("change_lanman_password: no smb password entry.\n"));
-		return False;
-	}
-	
-	acct_ctrl = pdb_get_acct_ctrl(sampass);
-	pwd = pdb_get_lanman_passwd(sampass);
-
-	if (acct_ctrl & ACB_DISABLED) {
-		DEBUG(0,("change_lanman_password: account %s disabled.\n",
-		       pdb_get_username(sampass)));
-		return False;
-	}
-
-	if ((pwd == NULL) && (acct_ctrl & ACB_PWNOTREQ)) {
-		uchar no_pw[14];
-		memset(no_pw, '\0', 14);
-		E_P16(no_pw, null_pw);
-		if (!pdb_set_lanman_passwd(sampass, null_pw))
-			return False;
-	}
-	else if (pwd == NULL) {
-		DEBUG(0,("change_lanman_password: no lanman password !\n"));
-		return False;
-	}
-
-	/* Get the new lanman hash. */
-	D_P16(pwd, pass2, unenc_new_pw);
-
-	if (!pdb_set_lanman_passwd(sampass, unenc_new_pw))
-		return False;
-	pdb_set_nt_passwd    (sampass, NULL);	/* We lose the NT hash. Sorry. */
-
-	/* Now flush the sam_passwd struct to persistent storage */
-	become_root();
-	ret = pdb_update_sam_account (sampass, False);
-	unbecome_root();
-
-	return ret;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /***********************************************************
@@ -696,31 +138,8 @@ BOOL pass_oem_change(char *user,
 		     uchar * lmdata, uchar * lmhash,
 		     uchar * ntdata, uchar * nthash)
 {
-	fstring new_passwd;
-	SAM_ACCOUNT *sampass = NULL;
-	BOOL ret = check_oem_password(user, lmdata, lmhash, ntdata, nthash,
-				      &sampass, new_passwd, sizeof(new_passwd));
-
-	/* 
-	 * At this point we have the new case-sensitive plaintext
-	 * password in the fstring new_passwd. If we wanted to synchronise
-	 * with UNIX passwords we would call a UNIX password changing 
-	 * function here. However it would have to be done as root
-	 * as the plaintext of the old users password is not 
-	 * available. JRA.
-	 */
-
-	if (ret && lp_unix_password_sync())
-		ret = chgpasswd(user, "", new_passwd, True);
-
-	if (ret)
-		ret = change_oem_password(sampass, new_passwd, False);
-
-	memset(new_passwd, 0, sizeof(new_passwd));
-
-	pdb_free_sam(sampass);
-
-	return ret;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /***********************************************************
@@ -737,168 +156,8 @@ BOOL check_oem_password(char *user,
 			SAM_ACCOUNT **hnd, char *new_passwd,
 			int new_passwd_size)
 {
-	static uchar null_pw[16];
-	static uchar null_ntpw[16];
-	SAM_ACCOUNT *sampass = NULL;
-	uint8 *lanman_pw, *nt_pw;
-	uint16 acct_ctrl;
-	int new_pw_len;
-	uchar new_ntp16[16];
-	uchar unenc_old_ntpw[16];
-	uchar new_p16[16];
-	uchar unenc_old_pw[16];
-	char no_pw[2];
-	BOOL ret;
-
-	BOOL nt_pass_set = (ntdata != NULL && nthash != NULL);
-
-	*hnd = NULL;
-
-	pdb_init_sam(&sampass);
-
-	become_root();
-	ret = pdb_getsampwnam(sampass, user);
-	unbecome_root();
-
-	if (ret == False) {
-		DEBUG(0, ("check_oem_password: getsmbpwnam returned NULL\n"));
-		pdb_free_sam(sampass);
-		return False;
-	}
-
-	acct_ctrl = pdb_get_acct_ctrl(sampass);
-	
-	if (acct_ctrl & ACB_DISABLED) {
-		DEBUG(0,("check_lanman_password: account %s disabled.\n", user));
-		pdb_free_sam(sampass);
-		return False;
-	}
-
-	/* construct a null password (in case one is needed */
-	no_pw[0] = 0;
-	no_pw[1] = 0;
-	nt_lm_owf_gen(no_pw, null_ntpw, null_pw);
-
-	/* save pointers to passwords so we don't have to keep looking them up */
-	lanman_pw = pdb_get_lanman_passwd(sampass);
-	nt_pw = pdb_get_nt_passwd(sampass);
-
-	/* check for null passwords */
-	if (lanman_pw == NULL) {
-		if (acct_ctrl & ACB_PWNOTREQ) {
-			if (!pdb_set_lanman_passwd(sampass, null_pw)) {
-				pdb_free_sam(sampass);
-				return False;
-			}
-			lanman_pw = pdb_get_lanman_passwd(sampass);
-			if (!lanman_pw) {
-				pdb_free_sam(sampass);
-				return False;
-			}
-		} else {
-			DEBUG(0,("check_oem_password: no lanman password !\n"));
-			pdb_free_sam(sampass);
-			return False;
-		}
-	}
-
-	if (pdb_get_nt_passwd(sampass) == NULL && nt_pass_set) {
-		if (acct_ctrl & ACB_PWNOTREQ) {
-			pdb_set_nt_passwd(sampass, null_ntpw);
-			nt_pw = pdb_get_nt_passwd(sampass);
-			if (!nt_pw) {
-				pdb_free_sam(sampass);
-				return False;
-			}
-		} else {
-			DEBUG(0,("check_oem_password: no ntlm password !\n"));
-			pdb_free_sam(sampass);
-			return False;
-		}
-	}
-
-	/* 
-	 * Call the hash function to get the new password.
-	 */
-	SamOEMhash((uchar *) lmdata, (uchar *)lanman_pw, 516);
-
-	/* 
-	 * The length of the new password is in the last 4 bytes of
-	 * the data buffer.
-	 */
-
-	new_pw_len = IVAL(lmdata, 512);
-	if (new_pw_len < 0 || new_pw_len > new_passwd_size - 1) {
-		DEBUG(0,("check_oem_password: incorrect password length (%d).\n", new_pw_len));
-		pdb_free_sam(sampass);
-		return False;
-	}
-
-	if (nt_pass_set) {
-		/*
-		 * nt passwords are in unicode
-		 */
-		int uni_pw_len = new_pw_len;
-		char *pw;
-		new_pw_len /= 2;
-		pw = dos_unistrn2((uint16 *)(&lmdata[512 - uni_pw_len]), new_pw_len);
-		memcpy(new_passwd, pw, new_pw_len + 1);
-	} else {
-		memcpy(new_passwd, &lmdata[512 - new_pw_len], new_pw_len);
-		new_passwd[new_pw_len] = 0;
-	}
-
-	/*
-	 * To ensure we got the correct new password, hash it and
-	 * use it as a key to test the passed old password.
-	 */
-
-	nt_lm_owf_gen(new_passwd, new_ntp16, new_p16);
-
-	if (!nt_pass_set) {
-		/*
-		 * Now use new_p16 as the key to see if the old
-		 * password matches.
-		 */
-		D_P16(new_p16, lmhash, unenc_old_pw);
-
-		if (memcmp(lanman_pw, unenc_old_pw, 16)) {
-			DEBUG(0,("check_oem_password: old lm password doesn't match.\n"));
-			pdb_free_sam(sampass);
-			return False;
-		}
-
-#ifdef DEBUG_PASSWORD
-		DEBUG(100,
-		      ("check_oem_password: password %s ok\n", new_passwd));
-#endif
-		*hnd = sampass;
-		return True;
-	}
-
-	/*
-	 * Now use new_p16 as the key to see if the old
-	 * password matches.
-	 */
-	D_P16(new_ntp16, lmhash, unenc_old_pw);
-	D_P16(new_ntp16, nthash, unenc_old_ntpw);
-
-	if (memcmp(lanman_pw, unenc_old_pw, 16)) {
-		DEBUG(0,("check_oem_password: old lm password doesn't match.\n"));
-		pdb_free_sam(sampass);
-		return False;
-	}
-
-	if (memcmp(nt_pw, unenc_old_ntpw, 16)) {
-		DEBUG(0,("check_oem_password: old nt password doesn't match.\n"));
-		pdb_free_sam(sampass);
-		return False;
-	}
-#ifdef DEBUG_PASSWORD
-	DEBUG(100, ("check_oem_password: password %s ok\n", new_passwd));
-#endif
-	*hnd = sampass;
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /***********************************************************
@@ -911,25 +170,8 @@ BOOL check_oem_password(char *user,
 BOOL change_oem_password(SAM_ACCOUNT *hnd, char *new_passwd,
 			 BOOL override)
 {
-	BOOL ret;
-	uchar new_nt_p16[16];
-	uchar new_p16[16];
-
-	nt_lm_owf_gen(new_passwd, new_nt_p16, new_p16);
-
-	if (!pdb_set_lanman_passwd (hnd, new_p16))
-		return False;
-	if (!pdb_set_nt_passwd(hnd, new_nt_p16))
-		return False;
-
-	/* Now write it into the file. */
-	become_root();
-	ret = pdb_update_sam_account (hnd, override);
-	unbecome_root();
-
-	memset(new_passwd, '\0', strlen(new_passwd));
-
-	return ret;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /***********************************************************
@@ -939,49 +181,6 @@ BOOL change_oem_password(SAM_ACCOUNT *hn
 BOOL check_plaintext_password(char *user, char *old_passwd,
 			      int old_passwd_size, SAM_ACCOUNT **hnd)
 {
-	SAM_ACCOUNT  *sampass = NULL;
-	uchar old_pw[16], old_ntpw[16];
-	BOOL ret;
-
-	*hnd = NULL;
-
-	pdb_init_sam(&sampass);
-
-	become_root();
-	ret = pdb_getsampwnam(sampass, user);
-	unbecome_root();
-
-	if (ret == False) {
-		DEBUG(0,("check_plaintext_password: getsmbpwnam returned NULL\n"));
-		pdb_free_sam(sampass);
-		return False;
-	}
-
-	if (pdb_get_acct_ctrl(sampass) & ACB_DISABLED) {
-		DEBUG(0,("check_plaintext_password: account %s disabled.\n", user));
-		pdb_free_sam(sampass);
-		return (False);
-	}
-
-	nt_lm_owf_gen(old_passwd, old_ntpw, old_pw);
-
-#ifdef DEBUG_PASSWORD
-	DEBUG(100, ("check_plaintext_password: nt_passwd \n"));
-	dump_data(100, pdb_get_nt_passwd(sampass), 16);
-	DEBUG(100, ("check_plaintext_password: old_ntpw \n"));
-	dump_data(100, old_ntpw, 16);
-	DEBUG(100, ("check_plaintext_password: lanman_passwd \n"));
-	dump_data(100, pdb_get_lanman_passwd(sampass), 16);
-	DEBUG(100, ("check_plaintext_password: old_pw\n"));
-	dump_data(100, old_pw, 16);
-#endif
-
-	if (memcmp(pdb_get_nt_passwd(sampass), old_ntpw, 16)
-	    && memcmp(pdb_get_lanman_passwd(sampass), old_pw, 16)) {
-		pdb_free_sam(sampass);
-		return (False);
-	} else {
-		*hnd = sampass;
-		return (True);
-	}
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
diff -pruwN samba-2.2.12/source/smbd/mangle_hash2.c samba-2.2.12-livebox/smbd/mangle_hash2.c
--- samba-2.2.12/source/smbd/mangle_hash2.c	2004-08-12 20:25:49.000000000 +0200
+++ samba-2.2.12-livebox/smbd/mangle_hash2.c	2010-03-31 11:45:59.000000000 +0200
@@ -108,30 +108,8 @@ static const char *reserved_names[] =
 */
 static u32 mangle_hash(const char *key, unsigned length)
 {
-	u32 value;
-	u32   i;
-	fstring str;
-
-	/* we have to uppercase here to ensure that the mangled name
-	   doesn't depend on the case of the long name. Note that this
-	   is the only place where we need to use a multi-byte string
-	   function */
-	strncpy(str, key, length);
-	str[length] = 0;
-	strupper(str);
-
-	/* the length of a multi-byte string can change after a strupper_m */
-	length = strlen(str);
-
-	/* Set the initial value from the key size. */
-	for (value = FNV1_INIT, i=0; i < length; i++) {
-                value *= (u32)FNV1_PRIME;
-                value ^= (u32)(str[i]);
-        }
-
-	/* note that we force it to a 31 bit hash, to keep within the limits
-	   of the 36^6 mangle space */
-	return value & ~0x80000000;  
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /* 
@@ -139,15 +117,8 @@ static u32 mangle_hash(const char *key,
  */
 static BOOL cache_init(void)
 {
-	if (prefix_cache) return True;
-
-	prefix_cache = calloc(MANGLE_CACHE_SIZE, sizeof(char *));
-	if (!prefix_cache) return False;
-
-	prefix_cache_hashes = calloc(MANGLE_CACHE_SIZE, sizeof(u32));
-	if (!prefix_cache_hashes) return False;
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*
@@ -155,14 +126,8 @@ static BOOL cache_init(void)
   terminated */
 static void cache_insert(const char *prefix, int length, u32 hash)
 {
-	int i = hash % MANGLE_CACHE_SIZE;
-
-	if (prefix_cache[i]) {
-		free(prefix_cache[i]);
-	}
-
-	prefix_cache[i] = strndup(prefix, length);
-	prefix_cache_hashes[i] = hash;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*
@@ -170,14 +135,8 @@ static void cache_insert(const char *pre
 */
 static const char *cache_lookup(u32 hash)
 {
-	int i = hash % MANGLE_CACHE_SIZE;
-
-	if (!prefix_cache[i] || hash != prefix_cache_hashes[i]) {
-		return NULL;
-	}
-
-	/* yep, it matched */
-	return prefix_cache[i];
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 
@@ -190,45 +149,8 @@ static const char *cache_lookup(u32 hash
  */
 static BOOL is_mangled_component(const char *name)
 {
-	int len, i;
-
-	DEBUG(10,("is_mangled_component %s ?\n", name));
-
-	/* check the length */
-	len = strlen(name);
-	if (len > 12 || len < 8) return False;
-
-	/* the best distinguishing characteristic is the ~ */
-	if (len > 7 && name[6] != '~') return False;
-
-	/* check extension */
-	if (len > 8) {
-		if (name[8] != '.') return False;
-		for (i=9; name[i]; i++) {
-			if (! FLAG_CHECK(name[i], FLAG_ASCII)) {
-				return False;
-			}
-		}
-	}
-	
-	/* check first character */
-	if (! FLAG_CHECK(name[0], FLAG_ASCII)) {
-		return False;
-	}
-	
-	/* check rest of hash */
-	if (! FLAG_CHECK(name[7], FLAG_BASECHAR)) {
-		return False;
-	}
-	for (i=1;i<6;i++) {
-		if (! FLAG_CHECK(name[i], FLAG_BASECHAR)) {
-			return False;
-		}
-	}
-
-	DEBUG(10,("is_mangled %s -> yes\n", name));
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 
@@ -246,22 +168,8 @@ static BOOL is_mangled_component(const c
  */
 static BOOL is_mangled(const char *name)
 {
-	const char *p;
-	const char *s;
-
-	DEBUG(10,("is_mangled %s ?\n", name));
-
-	for (s=name; (p=strchr(s, '/')); s=p+1) {
-		char *component = strndup(s, PTR_DIFF(p, s));
-		if (is_mangled_component(component)) {
-			free(component);
-			return True;
-		}
-		free(component);
-	}
-	
-	/* and the last part ... */
-	return is_mangled_component(s);
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 
@@ -274,62 +182,8 @@ static BOOL is_mangled(const char *name)
 */
 static BOOL is_8_3(const char *name, BOOL check_case, BOOL allow_wildcards)
 {
-	int len, i;
-	char *dot_p;
-
-	/* as a special case, the names '.' and '..' are allowable 8.3 names */
-	if (name[0] == '.') {
-		if (!name[1] || (name[1] == '.' && !name[2])) {
-			return True;
-		}
-	}
-
-	/* the simplest test is on the overall length of the
-	 filename. Note that we deliberately use the ascii string
-	 length (not the multi-byte one) as it is faster, and gives us
-	 the result we need in this case. Using strlen_m would not
-	 only be slower, it would be incorrect */
-	len = strlen(name);
-	if (len > 12) return False;
-
-	/* find the '.'. Note that once again we use the non-multibyte
-           function */
-	dot_p = strchr(name, '.');
-
-	if (!dot_p) {
-		/* if the name doesn't contain a '.' then its length
-                   must be less than 8 */
-		if (len > 8) {
-			return False;
-		}
-	} else {
-		int prefix_len, suffix_len;
-
-		/* if it does contain a dot then the prefix must be <=
-		   8 and the suffix <= 3 in length */
-		prefix_len = PTR_DIFF(dot_p, name);
-		suffix_len = len - (prefix_len+1);
-
-		if (prefix_len > 8 || suffix_len > 3) {
-			return False;
-		}
-
-		/* a 8.3 name cannot contain more than 1 '.' */
-		if (strchr(dot_p+1, '.')) {
-			return False;
-		}
-	}
-
-	/* the length are all OK. Now check to see if the characters themselves are OK */
-	for (i=0; name[i]; i++) {
-		/* note that we may allow wildcard petterns! */
-		if (!FLAG_CHECK(name[i], FLAG_ASCII|(allow_wildcards ? FLAG_WILDCARD : 0)) && name[i] != '.') {
-			return False;
-		}
-	}
-
-	/* it is a good 8.3 name */
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 
@@ -403,23 +257,8 @@ static BOOL check_cache(char *name, size
 */
 static BOOL is_reserved_name(const char *name)
 {
-	if (FLAG_CHECK(name[0], FLAG_POSSIBLE1) &&
-	    FLAG_CHECK(name[1], FLAG_POSSIBLE2) &&
-	    FLAG_CHECK(name[2], FLAG_POSSIBLE3) &&
-	    FLAG_CHECK(name[3], FLAG_POSSIBLE4)) {
-		/* a likely match, scan the lot */
-		int i;
-		for (i=0; reserved_names[i]; i++) {
-			int len = strlen(reserved_names[i]);
-			/* note that we match on COM1 as well as COM1.foo */
-			if (strncasecmp(name, reserved_names[i], len) == 0 &&
-			    (name[len] == '.' || name[len] == 0)) {
-				return True;
-			}
-		}
-	}
-
-	return False;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*
@@ -429,33 +268,8 @@ static BOOL is_reserved_name(const char
 
 static BOOL is_legal_name(const char *name)
 {
-	const char *dot_pos = NULL;
-	BOOL alldots = True;
-	size_t numdots = 0;
-
-	while (*name) {
-		if (FLAG_CHECK(name[0], FLAG_ILLEGAL)) {
-			return False;
-		}
-		if (name[0] == '.') {
-			dot_pos = name;
-			numdots++;
-		} else {
-			alldots = False;
-		}
-		name++;
-	}
-
-	if (dot_pos) {
-		if (alldots && (numdots == 1 || numdots == 2))
-			return True; /* . or .. is a valid name */
-
-		/* A valid long name cannot end in '.' */
-		if (dot_pos[1] == '\0')
-			return False;
-	}
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*
@@ -471,107 +285,8 @@ static BOOL is_legal_name(const char *na
 */
 static void name_map(char *name, BOOL need83, BOOL cache83)
 {
-	char *dot_p;
-	char lead_char;
-	char extension[4];
-	int extension_length, i;
-	int prefix_len;
-	u32 hash, v;
-	char new_name[13];
-
-	/* reserved names are handled specially */
-	if (!is_reserved_name(name)) {
-		/* if the name is already a valid 8.3 name then we don't need to 
-		   do anything */
-		if (is_8_3(name, False, False)) {
-			return;
-		}
-
-		/* if the caller doesn't strictly need 8.3 then just check for illegal 
-		   filenames */
-		if (!need83 && is_legal_name(name)) {
-			return;
-		}
-	}
-
-	/* find the '.' if any */
-	dot_p = strrchr(name, '.');
-
-	if (dot_p) {
-		/* if the extension contains any illegal characters or
-		   is too long or zero length then we treat it as part
-		   of the prefix */
-		for (i=0; i<4 && dot_p[i+1]; i++) {
-			if (! FLAG_CHECK(dot_p[i+1], FLAG_ASCII)) {
-				dot_p = NULL;
-				break;
-			}
-		}
-		if (i == 0 || i == 4) dot_p = NULL;
-	}
-
-	/* the leading character in the mangled name is taken from
-	   the first character of the name, if it is ascii 
-	   otherwise '_' is used
-	*/
-	lead_char = name[0];
-	if (! FLAG_CHECK(lead_char, FLAG_ASCII)) {
-		lead_char = '_';
-	}
-	lead_char = toupper(lead_char);
-
-	/* the prefix is anything up to the first dot */
-	if (dot_p) {
-		prefix_len = PTR_DIFF(dot_p, name);
-	} else {
-		prefix_len = strlen(name);
-	}
-
-	/* the extension of the mangled name is taken from the first 3
-	   ascii chars after the dot */
-	extension_length = 0;
-	if (dot_p) {
-		for (i=1; extension_length < 3 && dot_p[i]; i++) {
-			char c = dot_p[i];
-			if (FLAG_CHECK(c, FLAG_ASCII)) {
-				extension[extension_length++] = toupper(c);
-			}
-		}
-	}
-	   
-	/* find the hash for this prefix */
-	v = hash = mangle_hash(name, prefix_len);
-
-	/* now form the mangled name. */
-	new_name[0] = lead_char;
-	new_name[7] = base_forward(v % 36);
-	new_name[6] = '~';	
-	for (i=5; i>=1; i--) {
-		v = v / 36;
-		new_name[i] = base_forward(v % 36);
-	}
-
-	/* add the extension */
-	if (extension_length) {
-		new_name[8] = '.';
-		memcpy(&new_name[9], extension, extension_length);
-		new_name[9+extension_length] = 0;
-	} else {
-		new_name[8] = 0;
-	}
-
-	if (cache83) {
-		/* put it in the cache */
-		cache_insert(name, prefix_len, hash);
-	}
-
-	DEBUG(10,("name_map: %s -> %08X -> %s (cache=%d)\n", 
-		   name, hash, new_name, cache83));
-
-	/* and overwrite the old name */
-	fstrcpy(name, new_name);
-
-	/* all done, we've managed to mangle it */
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 
@@ -584,55 +299,8 @@ static void name_map(char *name, BOOL ne
 */
 static void init_tables(void)
 {
-	int i;
-
-	memset(char_flags, 0, sizeof(char_flags));
-
-	for (i=0;i<128;i++) {
-		if ((i >= '0' && i <= '9') || 
-		    (i >= 'a' && i <= 'z') || 
-		    (i >= 'A' && i <= 'Z')) {
-			char_flags[i] |=  (FLAG_ASCII | FLAG_BASECHAR);
-		}
-		if (strchr("_-$~", i)) {
-			char_flags[i] |= FLAG_ASCII;
-		}
-
-		if (strchr("*\\/?<>|\":", i)) {
-			char_flags[i] |= FLAG_ILLEGAL;
-		}
-
-		if (strchr("*?\"<>", i)) {
-			char_flags[i] |= FLAG_WILDCARD;
-		}
-	}
-
-	memset(base_reverse, 0, sizeof(base_reverse));
-	for (i=0;i<36;i++) {
-		base_reverse[(unsigned char)base_forward(i)] = i;
-	}	
-
-	/* fill in the reserved names flags. These are used as a very
-	   fast filter for finding possible DOS reserved filenames */
-	for (i=0; reserved_names[i]; i++) {
-		unsigned char c1, c2, c3, c4;
-
-		c1 = (unsigned char)reserved_names[i][0];
-		c2 = (unsigned char)reserved_names[i][1];
-		c3 = (unsigned char)reserved_names[i][2];
-		c4 = (unsigned char)reserved_names[i][3];
-
-		char_flags[c1] |= FLAG_POSSIBLE1;
-		char_flags[c2] |= FLAG_POSSIBLE2;
-		char_flags[c3] |= FLAG_POSSIBLE3;
-		char_flags[c4] |= FLAG_POSSIBLE4;
-		char_flags[tolower(c1)] |= FLAG_POSSIBLE1;
-		char_flags[tolower(c2)] |= FLAG_POSSIBLE2;
-		char_flags[tolower(c3)] |= FLAG_POSSIBLE3;
-		char_flags[tolower(c4)] |= FLAG_POSSIBLE4;
-
-		char_flags[(unsigned char)'.'] |= FLAG_POSSIBLE4;
-	}
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 
@@ -650,12 +318,6 @@ static struct mangle_fns mangle_fns = {
 /* return the methods for this mangling implementation */
 struct mangle_fns *mangle_hash2_init(void)
 {
-	init_tables();
-	mangle_reset();
-
-	if (!cache_init()) {
-		return NULL;
-	}
-
-	return &mangle_fns;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
diff -pruwN samba-2.2.12/source/smbd/mangle_hash.c samba-2.2.12-livebox/smbd/mangle_hash.c
--- samba-2.2.12/source/smbd/mangle_hash.c	2004-08-12 20:25:49.000000000 +0200
+++ samba-2.2.12-livebox/smbd/mangle_hash.c	2010-03-31 11:45:59.000000000 +0200
@@ -618,65 +618,8 @@ static void cache_mangled_name( char *ma
 
 static BOOL check_mangled_cache( char *s, size_t maxlen )
 {
-  ubi_cacheEntryPtr FoundPtr;
-  char             *ext_start = NULL;
-  char             *found_name;
-  char             *saved_ext = NULL;
-
-  /* If the cache isn't initialized, give up. */
-  if( !mc_initialized )
-    return( False );
-
-  FoundPtr = ubi_cacheGet( mangled_cache, (ubi_trItemPtr)s );
-
-  /* If we didn't find the name *with* the extension, try without. */
-  if( !FoundPtr )
-  {
-    ext_start = strrchr( s, '.' );
-    if( ext_start )
-    {
-      if((saved_ext = strdup(ext_start)) == NULL)
-        return False;
-
-      *ext_start = '\0';
-      FoundPtr = ubi_cacheGet( mangled_cache, (ubi_trItemPtr)s );
-      /* 
-       * At this point s is the name without the
-       * extension. We re-add the extension if saved_ext
-       * is not null, before freeing saved_ext.
-       */
-    }
-  }
-
-  /* Okay, if we haven't found it we're done. */
-  if( !FoundPtr )
-  {
-    if(saved_ext)
-    {
-      /* Replace the saved_ext as it was truncated. */
-      (void)safe_strcat( s, saved_ext, maxlen );
-      SAFE_FREE(saved_ext);
-    }
-    return( False );
-  }
-
-  /* If we *did* find it, we need to copy it into the string buffer. */
-  found_name = (char *)(FoundPtr + 1);
-  found_name += (strlen( found_name ) + 1);
-
-  DEBUG( 3, ("Found %s on mangled stack ", s) );
-
-  (void)safe_strcpy( s, found_name, maxlen );
-  if( saved_ext )
-  {
-    /* Replace the saved_ext as it was truncated. */
-    (void)safe_strcat( s, saved_ext,maxlen );
-    SAFE_FREE(saved_ext);
-  }
-
-  DEBUG( 3, ("as %s\n", s) );
-
-  return( True );
+DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*****************************************************************************
diff -pruwN samba-2.2.12/source/smbd/mangle_map.c samba-2.2.12-livebox/smbd/mangle_map.c
--- samba-2.2.12/source/smbd/mangle_map.c	2004-08-12 20:24:20.000000000 +0200
+++ samba-2.2.12-livebox/smbd/mangle_map.c	2010-03-31 11:45:59.000000000 +0200
@@ -30,81 +30,8 @@ static char *map_filename( char *s,
                            const char *pattern,   /* This isn't. */
                            int len )        /* This is the length of pattern. */
   {
-  static pstring matching_bit;  /* The bit of the string which matches */
-                                /* a * in pattern if indeed there is a * */
-  char *sp;                     /* Pointer into s. */
-  char *pp;                     /* Pointer into p. */
-  char *match_start;            /* Where the matching bit starts. */
-  pstring pat;
-
-  StrnCpy( pat, pattern, len ); /* Get pattern into a proper string! */
-  pstrcpy( matching_bit, "" );  /* Match but no star gets this. */
-  pp = pat;                     /* Initialize the pointers. */
-  sp = s;
-
-  if( strequal(s, ".") || strequal(s, ".."))
-    {
-    return NULL;                /* Do not map '.' and '..' */
-    }
-
-  if( (len == 1) && (*pattern == '*') )
-    {
-    return NULL;                /* Impossible, too ambiguous for */
-    }                           /* words! */
-
-  while( (*sp)                  /* Not the end of the string. */
-      && (*pp)                  /* Not the end of the pattern. */
-      && (*sp == *pp)           /* The two match. */
-      && (*pp != '*') )         /* No wildcard. */
-    {
-    sp++;                       /* Keep looking. */
-    pp++;
-    }
-
-  if( !*sp && !*pp )            /* End of pattern. */
-    return( matching_bit );     /* Simple match.  Return empty string. */
-
-  if( *pp == '*' )
-    {
-    pp++;                       /* Always interrested in the chacter */
-                                /* after the '*' */
-    if( !*pp )                  /* It is at the end of the pattern. */
-      {
-      StrnCpy( matching_bit, s, sp-s );
-      return( matching_bit );
-      }
-    else
-      {
-      /* The next character in pattern must match a character further */
-      /* along s than sp so look for that character. */
-      match_start = sp;
-      while( (*sp)              /* Not the end of s. */
-          && (*sp != *pp) )     /* Not the same  */
-        sp++;                   /* Keep looking. */
-      if( !*sp )                /* Got to the end without a match. */
-        {
-        return( NULL );
-        }                       /* Still hope for a match. */
-      else
-        {
-        /* Now sp should point to a matching character. */
-        StrnCpy(matching_bit, match_start, sp-match_start);
-        /* Back to needing a stright match again. */
-        while( (*sp)            /* Not the end of the string. */
-            && (*pp)            /* Not the end of the pattern. */
-            && (*sp == *pp) )   /* The two match. */
-          {
-          sp++;                 /* Keep looking. */
-          pp++;
-          }
-        if( !*sp && !*pp )      /* Both at end so it matched */
-          return( matching_bit );
-        else
-          return( NULL );
-        }
-      }
-    }
-  return( NULL );               /* No match. */
+DEBUG(1,("function ommited\n"));
+	/* function omited*/
   } /* map_filename */
 
 
@@ -127,74 +54,8 @@ static char *map_filename( char *s,
  */
 static void mangled_map(char *s, const char *MangledMap)
 {
-	const char *start=MangledMap; /* Use this to search for mappings. */
-	const char *end;                    /* Used to find the end of strings. */
-	char *match_string;
-	pstring new_string;           /* Make up the result here. */
-	char *np;                     /* Points into new_string. */
-
-	DEBUG( 5, ("Mangled Mapping '%s' map '%s'\n", s, MangledMap) );
-	while( *start ) {
-		while( (*start) && (*start != '(') )
-			start++;
-		if( !*start )
-			continue;                 /* Always check for the end. */
-		start++;                    /* Skip the ( */
-		end = start;                /* Search for the ' ' or a ')' */
-		DEBUG( 5, ("Start of first in pair '%s'\n", start) );
-		while( (*end) && !((*end == ' ') || (*end == ')')) )
-			end++;
-		if( !*end ) {
-			start = end;
-			continue;                 /* Always check for the end. */
-		}
-		DEBUG( 5, ("End of first in pair '%s'\n", end) );
-		if( (match_string = map_filename( s, start, end-start )) ) {
-			int size_left = sizeof(new_string) - 1;
-			DEBUG( 5, ("Found a match\n") );
-			/* Found a match. */
-			start = end + 1; /* Point to start of what it is to become. */
-			DEBUG( 5, ("Start of second in pair '%s'\n", start) );
-			end = start;
-			np = new_string;
-			while( (*end && size_left > 0)    /* Not the end of string. */
-			       && (*end != ')')      /* Not the end of the pattern. */
-			       && (*end != '*') ) {   /* Not a wildcard. */
-				*np++ = *end++;
-				size_left--;
-			}
-
-			if( !*end ) {
-				start = end;
-				continue;               /* Always check for the end. */
-			}
-			if( *end == '*' ) {
-				if (size_left > 0 )
-					safe_strcpy( np, match_string, size_left );
-				np += strlen( match_string );
-				size_left -= strlen( match_string );
-				end++;                  /* Skip the '*' */
-				while ((*end && size_left >  0)   /* Not the end of string. */
-				       && (*end != ')') /* Not the end of the pattern. */
-				       && (*end != '*')) { /* Not a wildcard. */
-					*np++ = *end++;
-					size_left--;
-				}
-			}
-			if (!*end) {
-				start = end;
-				continue;               /* Always check for the end. */
-			}
-			if (size_left > 0)
-				*np++ = '\0';             /* NULL terminate it. */
-			DEBUG(5,("End of second in pair '%s'\n", end));
-			new_string[sizeof(new_string)-1] = '\0';
-			pstrcpy( s, new_string );  /* Substitute with the new name. */
-			DEBUG( 5, ("s is now '%s'\n", s) );
-		}
-		start = end;  /* Skip a bit which cannot be wanted anymore. */
-		start++;
-	}
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*
diff -pruwN samba-2.2.12/source/smbd/vfs.c samba-2.2.12-livebox/smbd/vfs.c
--- samba-2.2.12/source/smbd/vfs.c	2004-09-29 19:37:44.000000000 +0200
+++ samba-2.2.12-livebox/smbd/vfs.c	2010-03-31 11:45:59.000000000 +0200
@@ -132,47 +132,8 @@ static BOOL vfs_init_default(connection_
 
 static BOOL vfs_init_custom(connection_struct *conn)
 {
-	int vfs_version = -1;
-	struct vfs_ops *ops, *(*init_fptr)(int *, struct vfs_ops *);
-
-	DEBUG(3, ("Initialising custom vfs hooks from %s\n", lp_vfsobj(SNUM(conn))));
-
-	/* Open object file */
-
-	if ((conn->dl_handle = sys_dlopen(lp_vfsobj(SNUM(conn)), RTLD_NOW | RTLD_GLOBAL)) == NULL) {
-		DEBUG(0, ("Error opening %s: %s\n", lp_vfsobj(SNUM(conn)), sys_dlerror()));
-		return False;
-	}
-
-	/* Get handle on vfs_init() symbol */
-
-	init_fptr = (struct vfs_ops *(*)(int *, struct vfs_ops *))sys_dlsym(conn->dl_handle, "vfs_init");
-
-	if (init_fptr == NULL) {
-		DEBUG(0, ("No vfs_init() symbol found in %s\n", lp_vfsobj(SNUM(conn))));
-		return False;
-	}
-
-	/* Initialise vfs_ops structure */
-
-	conn->vfs_ops = default_vfs_ops;
-
-	if ((ops = init_fptr(&vfs_version, &default_vfs_ops)) == NULL) {
-		DEBUG(0, ("vfs_init function from %s failed\n", lp_vfsobj(SNUM(conn))));
-		return False;
-	}
-
-	if (vfs_version != SMB_VFS_INTERFACE_VERSION) {
-		DEBUG(0, ("vfs_init returned wrong interface version info (was %d, should be %d)\n",
-			vfs_version, SMB_VFS_INTERFACE_VERSION ));
-		return False;
-	}
-
-	if (ops != &conn->vfs_ops) {
-		memcpy(&conn->vfs_ops, ops, sizeof(struct vfs_ops));
-	}
-
-	return True;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*****************************************************************
@@ -203,20 +164,8 @@ BOOL smbd_vfs_init(connection_struct *co
 
 BOOL vfs_directory_exist(connection_struct *conn, const char *dname, SMB_STRUCT_STAT *st)
 {
-	SMB_STRUCT_STAT st2;
-	BOOL ret;
-
-	if (!st)
-		st = &st2;
-
-	if (vfs_stat(conn,dname,st) != 0)
-		return(False);
-
-	ret = S_ISDIR(st->st_mode);
-	if(!ret)
-		errno = ENOTDIR;
-
-	return ret;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -249,11 +198,8 @@ int vfs_mkdir(connection_struct *conn, c
 
 char *vfs_getwd(connection_struct *conn, char *unix_path)
 {
-	char *wd;
-	wd = conn->vfs_ops.getwd(conn,unix_path);
-	if (wd)
-		unix_to_dos(wd);
-	return wd;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -280,16 +226,8 @@ BOOL vfs_object_exist(connection_struct
 
 BOOL vfs_file_exist(connection_struct *conn, const char *fname,SMB_STRUCT_STAT *sbuf)
 {
-	SMB_STRUCT_STAT st;
-
-	if (!sbuf)
-		sbuf = &st;
-
-	ZERO_STRUCTP(sbuf);
-
-	if (vfs_stat(conn,fname,sbuf) == -1)
-		return False;
-	return(S_ISREG(sbuf->st_mode));
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /****************************************************************************
@@ -298,23 +236,8 @@ BOOL vfs_file_exist(connection_struct *c
 
 ssize_t vfs_read_data(files_struct *fsp, char *buf, size_t byte_count)
 {
-	size_t total=0;
-
-	while (total < byte_count)
-	{
-		ssize_t ret = fsp->conn->vfs_ops.read(fsp, fsp->fd, buf + total,
-					  byte_count - total);
-
-		if (ret == 0) return total;
-		if (ret == -1) {
-			if (errno == EINTR)
-				continue;
-			else
-				return -1;
-		}
-		total += ret;
-	}
-	return (ssize_t)total;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /****************************************************************************
@@ -436,12 +359,14 @@ static files_struct *out_fsp;
 
 static ssize_t read_fn(int fd, void *buf, size_t len)
 {
-	return in_fsp->conn->vfs_ops.read(in_fsp, fd, buf, len);
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 static ssize_t write_fn(int fd, const void *buf, size_t len)
 {
-	return out_fsp->conn->vfs_ops.write(out_fsp, fd, buf, len);
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 SMB_OFF_T vfs_transfer_file(files_struct *in, files_struct *out, SMB_OFF_T n)
@@ -597,21 +522,8 @@ extern BOOL use_getwd_cache;
 
 static void array_promote(char *array,int elsize,int element)
 {
-	char *p;
-	if (element == 0)
-		return;
-
-	p = (char *)malloc(elsize);
-
-	if (!p) {
-		DEBUG(5,("array_promote: malloc fail\n"));
-		return;
-	}
-
-	memcpy(p,array + element * elsize, elsize);
-	memmove(array + elsize,array,elsize*element);
-	memcpy(array,p,elsize);
-	SAFE_FREE(p);
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
@@ -622,87 +534,8 @@ static void array_promote(char *array,in
 
 char *vfs_GetWd(connection_struct *conn, char *path)
 {
-	pstring s;
-	static BOOL getwd_cache_init = False;
-	SMB_STRUCT_STAT st, st2;
-	int i;
-
-	*s = 0;
-
-	if (!use_getwd_cache)
-		return(vfs_getwd(conn,path));
-
-	/* init the cache */
-	if (!getwd_cache_init) {
-		getwd_cache_init = True;
-		for (i=0;i<MAX_GETWDCACHE;i++) {
-			string_set(&ino_list[i].dos_path,"");
-			ino_list[i].valid = False;
-		}
-	}
-
-	/*  Get the inode of the current directory, if this doesn't work we're
-		in trouble :-) */
-
-	if (vfs_stat(conn, ".",&st) == -1) {
-		DEBUG(0,("Very strange, couldn't stat \".\" path=%s\n", path));
-		return(vfs_getwd(conn,path));
-	}
-
-
-	for (i=0; i<MAX_GETWDCACHE; i++) {
-		if (ino_list[i].valid) {
-
-			/*  If we have found an entry with a matching inode and dev number
-			then find the inode number for the directory in the cached string.
-			If this agrees with that returned by the stat for the current
-			directory then all is o.k. (but make sure it is a directory all
-			the same...) */
-
-			if (st.st_ino == ino_list[i].inode && st.st_dev == ino_list[i].dev) {
-				if (vfs_stat(conn,ino_list[i].dos_path,&st2) == 0) {
-					if (st.st_ino == st2.st_ino && st.st_dev == st2.st_dev &&
-							(st2.st_mode & S_IFMT) == S_IFDIR) {
-						pstrcpy (path, ino_list[i].dos_path);
-
-						/* promote it for future use */
-						array_promote((char *)&ino_list[0],sizeof(ino_list[0]),i);
-						return (path);
-
-					} else {
-						/*  If the inode is different then something's changed,
-								scrub the entry and start from scratch. */
-						ino_list[i].valid = False;
-					}
-				}
-			}
-		}
-	}
-
-	/*  We don't have the information to hand so rely on traditional methods.
-		The very slow getcwd, which spawns a process on some systems, or the
-		not quite so bad getwd. */
-
-	if (!vfs_getwd(conn,s)) {
-		DEBUG(0,("vfs_GetWd: vfs_getwd call failed, errno %s\n",strerror(errno)));
-		return (NULL);
-	}
-
-	pstrcpy(path,s);
-
-	DEBUG(5,("vfs_GetWd %s, inode %.0f, dev %.0f\n",s,(double)st.st_ino,(double)st.st_dev));
-
-	/* add it to the cache */
-	i = MAX_GETWDCACHE - 1;
-	string_set(&ino_list[i].dos_path,s);
-	ino_list[i].dev = st.st_dev;
-	ino_list[i].inode = st.st_ino;
-	ino_list[i].valid = True;
-
-	/* put it at the top of the list */
-	array_promote((char *)&ino_list[0],sizeof(ino_list[0]),i);
-
-	return (path);
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 
@@ -711,55 +544,8 @@ char *vfs_GetWd(connection_struct *conn,
 
 static BOOL readlink_check(connection_struct *conn, char *dir, char *name)
 {
-	BOOL ret = True;
-	pstring flink;
-	pstring cleanlink;
-	pstring savedir;
-	pstring realdir;
-	size_t reallen;
-
-	if (!vfs_GetWd(conn, savedir)) {
-		DEBUG(0,("couldn't vfs_GetWd for %s %s\n", name, dir));
-		return False;
-	}
-
-	if (vfs_ChDir(conn, dir) != 0) {
-		DEBUG(0,("couldn't vfs_ChDir to %s\n", dir));
-		return False;
-	}
-
-	if (!vfs_GetWd(conn, realdir)) {
-		DEBUG(0,("couldn't vfs_GetWd for %s\n", dir));
-		vfs_ChDir(conn, savedir);
-		return(False);
-	}
-	
-	reallen = strlen(realdir);
-	if (realdir[reallen -1] == '/') {
-		reallen--;
-		realdir[reallen] = 0;
-	}
-
-	if (conn->vfs_ops.readlink(conn, name, flink, sizeof(pstring) -1) != -1) {
-		DEBUG(3,("reduce_name: file path name %s is a symlink\nChecking it's path\n", name));
-		if (*flink == '/') {
-			pstrcpy(cleanlink, flink);
-		} else {
-			pstrcpy(cleanlink, realdir);
-			pstrcat(cleanlink, "/");
-			pstrcat(cleanlink, flink);
-		}
-		unix_clean_name(cleanlink);
-
-		if (strncmp(cleanlink, realdir, reallen) != 0) {
-			DEBUG(2,("Bad access attempt? s=%s dir=%s newname=%s l=%d\n", name, realdir, cleanlink, (int)reallen));
-			ret = False;
-		}
-	}
-
-	vfs_ChDir(conn, savedir);
-	
-	return ret;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /*******************************************************************
diff -pruwN samba-2.2.12/source/smbd/vfs-wrap.c samba-2.2.12-livebox/smbd/vfs-wrap.c
--- samba-2.2.12/source/smbd/vfs-wrap.c	2004-08-12 20:24:21.000000000 +0200
+++ samba-2.2.12-livebox/smbd/vfs-wrap.c	2010-03-31 11:45:59.000000000 +0200
@@ -544,8 +544,14 @@ int vfswrap_ftruncate(files_struct *fsp,
 	   ftruncate extend but ext2 can. */
 
 	result = sys_ftruncate(fd, len);
-	if (result == 0)
+	//ignore ftruncate result with forcing result to 0
+	if (result != 0){
+	DEBUG(2, ("ftruncate result != 0 : ignore ftruncate result==================================\n"));
+	result = 0;
+}
+	if (result == 0){
 		goto done;
+	}
 
 	/* According to W. R. Stevens advanced UNIX prog. Pure 4.3 BSD cannot
 	   extend a file with ftruncate. Provide alternate implementation
diff -pruwN samba-2.2.12/source/tdb/spinlock.c samba-2.2.12-livebox/tdb/spinlock.c
--- samba-2.2.12/source/tdb/spinlock.c	2004-08-12 20:24:35.000000000 +0200
+++ samba-2.2.12-livebox/tdb/spinlock.c	2010-03-31 11:45:59.000000000 +0200
@@ -323,48 +323,15 @@ static void __read_unlock(tdb_rwlock_t *
 /* lock a list in the database. list -1 is the alloc list */
 int tdb_spinlock(TDB_CONTEXT *tdb, int list, int rw_type)
 {
-	tdb_rwlock_t *rwlocks;
-
-	if (!tdb->map_ptr) return -1;
-	rwlocks = (tdb_rwlock_t *)((char *)tdb->map_ptr + tdb->header.rwlocks);
-
-	switch(rw_type) {
-	case F_RDLCK:
-		__read_lock(&rwlocks[list+1]);
-		break;
-
-	case F_WRLCK:
-		__write_lock(&rwlocks[list+1]);
-		break;
-
-	default:
-		return TDB_ERRCODE(TDB_ERR_LOCK, -1);
-	}
-	return 0;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 /* unlock the database. */
 int tdb_spinunlock(TDB_CONTEXT *tdb, int list, int rw_type)
 {
-	tdb_rwlock_t *rwlocks;
-
-	if (!tdb->map_ptr) return -1;
-	rwlocks = (tdb_rwlock_t *)((char *)tdb->map_ptr + tdb->header.rwlocks);
-
-	switch(rw_type) {
-	case F_RDLCK:
-		__read_unlock(&rwlocks[list+1]);
-		break;
-
-	case F_WRLCK:
-		__write_unlock(&rwlocks[list+1]);
-		break;
-
-	default:
-		return TDB_ERRCODE(TDB_ERR_LOCK, -1);
-	}
-
-	return 0;
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
 }
 
 int tdb_create_rwlocks(int fd, unsigned int hash_size)
diff -pruwN samba-2.2.12/source/tdb/tdbutil.c samba-2.2.12-livebox/tdb/tdbutil.c
--- samba-2.2.12/source/tdb/tdbutil.c	2004-08-12 20:24:35.000000000 +0200
+++ samba-2.2.12-livebox/tdb/tdbutil.c	2010-03-31 11:45:59.000000000 +0200
@@ -31,7 +31,8 @@ static SIG_ATOMIC_T gotalarm;
 
 static void gotalarm_sig(void)
 {
-	gotalarm = 1;
+	DEBUG(1,("function ommited\n"));
+/* function ommited*/
 }
 
 /****************************************************************************
@@ -157,17 +158,8 @@ int tdb_store_int32(TDB_CONTEXT *tdb, co
 
 BOOL tdb_fetch_uint32_byblob(TDB_CONTEXT *tdb, const char *keyval, size_t len, uint32 *value)
 {
-	TDB_DATA key, data;
-
-	key.dptr = keyval;
-	key.dsize = len;
-	data = tdb_fetch(tdb, key);
-	if (!data.dptr || data.dsize != sizeof(uint32))
-		return False;
-	
-	*value = IVAL(data.dptr,0);
-	SAFE_FREE(data.dptr);
-	return True;
+	DEBUG(1,("function ommited\n"));
+/* function ommited*/
 }
 
 /****************************************************************************
@@ -177,7 +169,8 @@ BOOL tdb_fetch_uint32_byblob(TDB_CONTEXT
 
 BOOL tdb_fetch_uint32(TDB_CONTEXT *tdb, const char *keystr, uint32 *value)
 {
-	return tdb_fetch_uint32_byblob(tdb, keystr, strlen(keystr) + 1, value);
+DEBUG(1,("function ommited\n"));
+/* function ommited*/
 }
 
 /****************************************************************************
@@ -187,20 +180,8 @@ BOOL tdb_fetch_uint32(TDB_CONTEXT *tdb,
 
 BOOL tdb_store_uint32_byblob(TDB_CONTEXT *tdb, const char *keystr, size_t len, uint32 value)
 {
-	TDB_DATA key, data;
-	uint32 v_store;
-	BOOL ret = True;
-
-	key.dptr = keystr;
-	key.dsize = len;
-	SIVAL(&v_store, 0, value);
-	data.dptr = (void *)&v_store;
-	data.dsize = sizeof(uint32);
-
-	if (tdb_store(tdb, key, data, TDB_REPLACE) == -1)
-		ret = False;
-
-	return ret;
+DEBUG(1,("function ommited\n"));
+/* function ommited*/
 }
 
 /****************************************************************************
@@ -210,7 +191,7 @@ BOOL tdb_store_uint32_byblob(TDB_CONTEXT
 
 BOOL tdb_store_uint32(TDB_CONTEXT *tdb, const char *keystr, uint32 value)
 {
-	return tdb_store_uint32_byblob(tdb, keystr, strlen(keystr) + 1, value);
+	/* function ommited*/
 }
 /****************************************************************************
  Store a buffer by a null terminated string key.  Return 0 on success, -1
@@ -219,15 +200,8 @@ BOOL tdb_store_uint32(TDB_CONTEXT *tdb,
 
 int tdb_store_by_string(TDB_CONTEXT *tdb, const char *keystr, void *buffer, int len)
 {
-    TDB_DATA key, data;
-
-    key.dptr = keystr;
-    key.dsize = strlen(keystr) + 1;
-
-    data.dptr = buffer;
-    data.dsize = len;
-
-    return tdb_store(tdb, key, data, TDB_REPLACE);
+DEBUG(1,("function ommited\n"));
+/* function ommited*/
 }
 
 /****************************************************************************
@@ -237,12 +211,8 @@ int tdb_store_by_string(TDB_CONTEXT *tdb
 
 TDB_DATA tdb_fetch_by_string(TDB_CONTEXT *tdb, const char *keystr)
 {
-    TDB_DATA key;
-
-    key.dptr = keystr;
-    key.dsize = strlen(keystr) + 1;
-
-    return tdb_fetch(tdb, key);
+DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /****************************************************************************
@@ -292,40 +262,8 @@ int32 tdb_change_int32_atomic(TDB_CONTEX
 
 BOOL tdb_change_uint32_atomic(TDB_CONTEXT *tdb, char *keystr, uint32 *oldval, uint32 change_val)
 {
-	uint32 val;
-	BOOL ret = False;
- 
-	if (tdb_lock_bystring(tdb, keystr,0) == -1)
-		return False;
- 
-	if (!tdb_fetch_uint32(tdb, keystr, &val)) {
-		/* It failed */
-		if (tdb_error(tdb) != TDB_ERR_NOEXIST) {
-			/* and not becouse it didn't exist */
-			goto err_out;
-		}
- 
-		/* Start with 'old' value */
-		val = *oldval;
- 
-	} else {
-		/* it worked, set return value (oldval) to tdb data */
-		*oldval = val;
- 
-	}
- 
-	/* get a new value to store */
-	val += change_val;
- 
-	if (!tdb_store_uint32(tdb, keystr, val))
-		goto err_out;
- 
-	ret = True;
- 
-  err_out:
- 
-	tdb_unlock_bystring(tdb, keystr);
-	return ret;
+DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
 
 /****************************************************************************
@@ -561,5 +499,6 @@ TDB_CONTEXT *tdb_open_log(const char *na
 int tdb_traverse_delete_fn(TDB_CONTEXT *the_tdb, TDB_DATA key, TDB_DATA dbuf,
                      void *state)
 {
-    return tdb_delete(the_tdb, key);
+DEBUG(1,("function ommited\n"));
+/* function omited*/
 }
diff -pruwN samba-2.2.12/source/ubiqx/debugparse.c samba-2.2.12-livebox/ubiqx/debugparse.c
--- samba-2.2.12/source/ubiqx/debugparse.c	2004-08-12 20:24:21.000000000 +0200
+++ samba-2.2.12-livebox/ubiqx/debugparse.c	2010-03-31 11:45:59.000000000 +0200
@@ -30,7 +30,7 @@
  */
 
 #include "debugparse.h"
-
+#include "includes.h"
 /* -------------------------------------------------------------------------- **
  * Constants...
  *
@@ -46,250 +46,21 @@
  */
 
 const char *dbg_token2string( dbg_Token tok )
-  /* ------------------------------------------------------------------------ **
-   * Given a token, return a string describing the token.
-   *
-   *  Input:  tok - One of the set of dbg_Tokens defined in debugparse.h.
-   *
-   *  Output: A string identifying the token.  This is useful for debugging,
-   *          etc.
-   *
-   *  Note:   If the token is not known, this function will return the
-   *          string "<unknown>".
-   *
-   * ------------------------------------------------------------------------ **
-   */
   {
-  switch( tok )
-    {
-    case dbg_null:
-      return( "null" );
-    case dbg_ignore:
-      return( "ignore" );
-    case dbg_header:
-      return( "header" );
-    case dbg_timestamp:
-      return( "time stamp" );
-    case dbg_level:
-      return( "level" );
-    case dbg_sourcefile:
-      return( "source file" );
-    case dbg_function:
-      return( "function" );
-    case dbg_lineno:
-      return( "line number" );
-    case dbg_message:
-      return( "message" );
-    case dbg_eof:
-      return( "[EOF]" );
-    }
-  return( "<unknown>" );
+	DEBUG(1,("function ommited\n"));
+ /* function omited*/
   } /* dbg_token2string */
 
 dbg_Token dbg_char2token( dbg_Token *state, int c )
-  /* ------------------------------------------------------------------------ **
-   * Parse input one character at a time.
-   *
-   *  Input:  state - A pointer to a token variable.  This is used to
-   *                  maintain the parser state between calls.  For
-   *                  each input stream, you should set up a separate
-   *                  state variable and initialize it to dbg_null.
-   *                  Pass a pointer to it into this function with each
-   *                  character in the input stream.  See dbg_test()
-   *                  for an example.
-   *          c     - The "current" character in the input stream.
-   *
-   *  Output: A token.
-   *          The token value will change when delimiters are found,
-   *          which indicate a transition between syntactical objects.
-   *          Possible return values are:
-   *
-   *          dbg_null        - The input character was an end-of-line.
-   *                            This resets the parser to its initial state
-   *                            in preparation for parsing the next line.
-   *          dbg_eof         - Same as dbg_null, except that the character
-   *                            was an end-of-file.
-   *          dbg_ignore      - Returned for whitespace and delimiters.
-   *                            These lexical tokens are only of interest
-   *                            to the parser.
-   *          dbg_header      - Indicates the start of a header line.  The
-   *                            input character was '[' and was the first on
-   *                            the line.
-   *          dbg_timestamp   - Indicates that the input character was part
-   *                            of a header timestamp.
-   *          dbg_level       - Indicates that the input character was part
-   *                            of the debug-level value in the header.
-   *          dbg_sourcefile  - Indicates that the input character was part
-   *                            of the sourcefile name in the header.
-   *          dbg_function    - Indicates that the input character was part
-   *                            of the function name in the header.
-   *          dbg_lineno      - Indicates that the input character was part
-   *                            of the DEBUG call line number in the header.
-   *          dbg_message     - Indicates that the input character was part
-   *                            of the DEBUG message text.
-   *
-   * ------------------------------------------------------------------------ **
-   */
-  {
-  /* The terminating characters that we see will greatly depend upon
-   * how they are read.  For example, if gets() is used instead of
-   * fgets(), then we will not see newline characters.  A lot also
-   * depends on the calling function, which may handle terminators
-   * itself.
-   *
-   * '\n', '\0', and EOF are all considered line terminators.  The
-   * dbg_eof token is sent back if an EOF is encountered.
-   *
-   * Warning:  only allow the '\0' character to be sent if you are
-   *           using gets() to read whole lines (thus replacing '\n'
-   *           with '\0').  Sending '\0' at the wrong time will mess
-   *           up the parsing.
-   */
-  switch( c )
-    {
-    case EOF:
-      *state = dbg_null;   /* Set state to null (initial state) so */
-      return( dbg_eof );   /* that we can restart with new input.  */
-    case '\n':
-    case '\0':
-      *state = dbg_null;   /* A newline or eoln resets to the null state. */
-      return( dbg_null );
-    }
-
-  /* When within the body of the message, only a line terminator
-   * can cause a change of state.  We've already checked for line
-   * terminators, so if the current state is dbg_msgtxt, simply
-   * return that as our current token.
-   */
-  if( dbg_message == *state )
-    return( dbg_message );
-
-  /* If we are at the start of a new line, and the input character 
-   * is an opening bracket, then the line is a header line, otherwise
-   * it's a message body line.
-   */
-  if( dbg_null == *state )
-    {
-    if( '[' == c )
       {
-      *state = dbg_timestamp;
-      return( dbg_header );
-      }
-    *state = dbg_message;
-    return( dbg_message );
-    }
-
-  /* We've taken care of terminators, text blocks and new lines.
-   * The remaining possibilities are all within the header line
-   * itself.
-   */
-
-  /* Within the header line, whitespace can be ignored *except*
-   * within the timestamp.
-   */
-  if( isspace( c ) )
-    {
-    /* Fudge.  The timestamp may contain space characters. */
-    if( (' ' == c) && (dbg_timestamp == *state) )
-      return( dbg_timestamp );
-    /* Otherwise, ignore whitespace. */
-    return( dbg_ignore );
-    }
-
-  /* Okay, at this point we know we're somewhere in the header.
-   * Valid header *states* are: dbg_timestamp, dbg_level,
-   * dbg_sourcefile, dbg_function, and dbg_lineno.
-   */
-  switch( c )
-    {
-    case ',':
-      if( dbg_timestamp == *state )
-        {
-        *state = dbg_level;
-        return( dbg_ignore );
-        }
-      break;
-    case ']':
-      if( dbg_level == *state )
-        {
-        *state = dbg_sourcefile;
-        return( dbg_ignore );
-        }
-      break;
-    case ':':
-      if( dbg_sourcefile == *state )
-        {
-        *state = dbg_function;
-        return( dbg_ignore );
-        }
-      break;
-    case '(':
-      if( dbg_function == *state )
-        {
-        *state = dbg_lineno;
-        return( dbg_ignore );
-        }
-      break;
-    case ')':
-      if( dbg_lineno == *state )
-        {
-        *state = dbg_null;
-        return( dbg_ignore );
-        }
-      break;
-    }
-
-  /* If the previous block did not result in a state change, then
-   * return the current state as the current token.
-   */
-  return( *state );
+DEBUG(1,("function ommited\n"));
+/* function omited*/
   } /* dbg_char2token */
 
 void dbg_test( void )
-  /* ------------------------------------------------------------------------ **
-   * Simple test function.
-   *
-   *  Input:  none.
-   *  Output: none.
-   *  Notes:  This function was used to test dbg_char2token().  It reads a
-   *          Samba log file from stdin and prints parsing info to stdout.
-   *          It also serves as a simple example.
-   *
-   * ------------------------------------------------------------------------ **
-   */
-  {
-  char bufr[DBG_BSIZE];
-  int  i;
-  int  linecount  = 1;
-  dbg_Token old   = dbg_null,
-            new   = dbg_null,
-            state = dbg_null;
-
-  while( fgets( bufr, DBG_BSIZE, stdin ) )
-    {
-    for( i = 0; bufr[i]; i++ )
-      {
-      old = new;
-      new = dbg_char2token( &state, bufr[i] );
-      switch( new )
         {
-        case dbg_header:
-          if( linecount > 1 )
-            (void)putchar( '\n' );
-          break;
-        case dbg_null:
-          linecount++;
-          break;
-        case dbg_ignore:
-          break;
-        default:
-          if( old != new )
-            (void)printf( "\n[%05d]%12s: ", linecount, dbg_token2string(new) );
-          (void)putchar( bufr[i] );
-        }
-      }
-    }
-  (void)putchar( '\n' );
+DEBUG(1,("function ommited\n"));
+/* function omited*/
   } /* dbg_test */
 
 
diff -pruwN samba-2.2.12/source/ubiqx/ubi_BinTree.c samba-2.2.12-livebox/ubiqx/ubi_BinTree.c
--- samba-2.2.12/source/ubiqx/ubi_BinTree.c	2004-08-12 20:24:21.000000000 +0200
+++ samba-2.2.12-livebox/ubiqx/ubi_BinTree.c	2010-03-31 11:45:59.000000000 +0200
@@ -180,7 +180,7 @@
  */
 
 #include "ubi_BinTree.h"  /* Header for this module.   */
-
+#include "includes.h"
 /* ========================================================================== **
  * Static data.
  */
@@ -314,46 +314,10 @@ static void ReplaceNode( ubi_btNodePtr *
 static void SwapNodes( ubi_btRootPtr RootPtr,
                        ubi_btNodePtr Node1,
                        ubi_btNodePtr Node2 )
-  /* ------------------------------------------------------------------------ **
-   * This function swaps two nodes in the tree.  Node1 will take the place of
-   * Node2, and Node2 will fill in the space left vacant by Node 1.
-   *
-   * Input:
-   *  RootPtr  - pointer to the tree header structure for this tree.
-   *  Node1    - \
-   *              > These are the two nodes which are to be swapped.
-   *  Node2    - /
-   *
-   * Notes:
-   *  This function does a three step swap, using a dummy node as a place
-   *  holder.  This function is used by ubi_btRemove().
-   * ------------------------------------------------------------------------ **
-   */
-  {
-  ubi_btNodePtr *Parent;
-  ubi_btNode     dummy;
-  ubi_btNodePtr  dummy_p = &dummy;
-
-  /* Replace Node 1 with the dummy, thus removing Node1 from the tree. */
-  if( NULL != Node1->Link[ubi_trPARENT] )
-    Parent = &((Node1->Link[ubi_trPARENT])->Link[(int)(Node1->gender)]);
-  else
-    Parent = &(RootPtr->root);
-  ReplaceNode( Parent, Node1, dummy_p );
 
-  /* Swap Node 1 with Node 2, placing Node 1 back into the tree. */
-  if( NULL != Node2->Link[ubi_trPARENT] )
-    Parent = &((Node2->Link[ubi_trPARENT])->Link[(int)(Node2->gender)]);
-  else
-    Parent = &(RootPtr->root);
-  ReplaceNode( Parent, Node2, Node1 );
-
-  /* Swap Node 2 and the dummy, thus placing Node 2 back into the tree. */
-  if( NULL != dummy_p->Link[ubi_trPARENT] )
-    Parent = &((dummy_p->Link[ubi_trPARENT])->Link[(int)(dummy_p->gender)]);
-  else
-    Parent = &(RootPtr->root);
-  ReplaceNode( Parent, dummy_p, Node2 );
+  {
+	DEBUG(1,("function ommited\n"));
+	/* function ommited*/
   } /* SwapNodes */
 
 /* -------------------------------------------------------------------------- **
@@ -422,63 +386,9 @@ static ubi_btNodePtr Border( ubi_btRootP
                              ubi_btItemPtr FindMe,
                              ubi_btNodePtr p,
                              int           whichway )
-  /* ------------------------------------------------------------------------ **
-   * Given starting point p, which has a key value equal to *FindMe, locate
-   * the first (index order) node with the same key value.
-   *
-   * This function is useful in trees that have can have duplicate keys.
-   * For example, consider the following tree:
-   *     Tree                                                      Traversal
-   *       2    If <p> points to the root and <whichway> is RIGHT,     3
-   *      / \    then the return value will be a pointer to the       / \
-   *     2   2    RIGHT child of the root node.  The tree on         2   5
-   *    /   / \    the right shows the order of traversal.          /   / \
-   *   1   2   3                                                   1   4   6
-   *
-   *  Input:  RootPtr   - Pointer to the tree root structure.
-   *          FindMe    - Key value for comparisons.
-   *          p         - Pointer to the starting-point node.
-   *          whichway  - the direction in which to travel to find the
-   *                      neighbor, i.e., the RIGHT neighbor or the LEFT
-   *                      neighbor.
-   *
-   *  Output: A pointer to the first (index, or "traversal", order) node with
-   *          a Key value that matches *FindMe.
-   *
-   *  Notes:  If whichway is PARENT, or if the tree does not allow duplicate
-   *          keys, this function will return <p>.
-   * ------------------------------------------------------------------------ **
-   */
-  {
-  register ubi_btNodePtr q;
-
-  /* Exit if there's nothing that can be done. */
-  if( !ubi_trDups_OK( RootPtr ) || (ubi_trPARENT == whichway) )
-    return( p );
-
-  /* First, if needed, move up the tree.  We need to get to the root of the
-   * subtree that contains all of the matching nodes.
-   */
-  q = p->Link[ubi_trPARENT];
-  while( (NULL != q)
-      && (ubi_trEQUAL == ubi_trAbNormal( (*(RootPtr->cmp))(FindMe, q) )) )
-    {
-    p = q;
-    q = p->Link[ubi_trPARENT];
-    }
-
-  /* Next, move back down in the "whichway" direction. */
-  q = p->Link[whichway];
-  while( NULL != q )
-    {
-    q = qFind( RootPtr->cmp, FindMe, q );
-    if( q )
       {
-      p = q;
-      q = p->Link[whichway];
-      }
-    }
-  return( p );
+	DEBUG(1,("function ommited\n"));
+	/* function ommited*/
   } /* Border */
 
 
@@ -685,150 +595,19 @@ ubi_trBool ubi_btInsert( ubi_btRootPtr
 
 ubi_btNodePtr ubi_btRemove( ubi_btRootPtr RootPtr,
                             ubi_btNodePtr DeadNode )
-  /* ------------------------------------------------------------------------ **
-   * This function removes the indicated node from the tree.
-   *
-   *  Input:   RootPtr  -  A pointer to the header of the tree that contains
-   *                       the node to be removed.
-   *           DeadNode -  A pointer to the node that will be removed.
-   *
-   *  Output:  This function returns a pointer to the node that was removed
-   *           from the tree (ie. the same as DeadNode).
-   *
-   *  Note:    The node MUST be in the tree indicated by RootPtr.  If not,
-   *           strange and evil things will happen to your trees.
-   * ------------------------------------------------------------------------ **
-   */
-  {
-  ubi_btNodePtr p,
-               *parentp;
-  int           tmp;
-
-  /* if the node has both left and right subtrees, then we have to swap
-   * it with another node.  The other node we choose will be the Prev()ious
-   * node, which is garunteed to have no RIGHT child.
-   */
-  if( (NULL != DeadNode->Link[ubi_trLEFT])
-   && (NULL != DeadNode->Link[ubi_trRIGHT]) )
-    SwapNodes( RootPtr, DeadNode, ubi_btPrev( DeadNode ) );
-
-  /* The parent of the node to be deleted may be another node, or it may be
-   * the root of the tree.  Since we're not sure, it's best just to have
-   * a pointer to the parent pointer, whatever it is.
-   */
-  if( NULL == DeadNode->Link[ubi_trPARENT] )
-    parentp = &( RootPtr->root );
-  else
-    parentp = &((DeadNode->Link[ubi_trPARENT])->Link[(int)(DeadNode->gender)]);
-
-  /* Now link the parent to the only grand-child and patch up the gender. */
-  tmp = ((DeadNode->Link[ubi_trLEFT])?ubi_trLEFT:ubi_trRIGHT);
 
-  p = (DeadNode->Link[tmp]);
-  if( NULL != p )
     {
-    p->Link[ubi_trPARENT] = DeadNode->Link[ubi_trPARENT];
-    p->gender       = DeadNode->gender;
-    }
-  (*parentp) = p;
-
-  /* Finished, reduce the node count and return. */
-  (RootPtr->count)--;
-  return( DeadNode );
+	DEBUG(1,("function ommited\n"));
+	/* function ommited*/
   } /* ubi_btRemove */
 
 ubi_btNodePtr ubi_btLocate( ubi_btRootPtr RootPtr,
                             ubi_btItemPtr FindMe,
                             ubi_trCompOps CompOp )
-  /* ------------------------------------------------------------------------ **
-   * The purpose of ubi_btLocate() is to find a node or set of nodes given
-   * a target value and a "comparison operator".  The Locate() function is
-   * more flexible and (in the case of trees that may contain dupicate keys)
-   * more precise than the ubi_btFind() function.  The latter is faster,
-   * but it only searches for exact matches and, if the tree contains
-   * duplicates, Find() may return a pointer to any one of the duplicate-
-   * keyed records.
-   *
-   *  Input:
-   *     RootPtr  -  A pointer to the header of the tree to be searched.
-   *     FindMe   -  An ubi_btItemPtr that indicates the key for which to
-   *                 search.
-   *     CompOp   -  One of the following:
-   *                    CompOp     Return a pointer to the node with
-   *                    ------     ---------------------------------
-   *                   ubi_trLT - the last key value that is less
-   *                              than FindMe.
-   *                   ubi_trLE - the first key matching FindMe, or
-   *                              the last key that is less than
-   *                              FindMe.
-   *                   ubi_trEQ - the first key matching FindMe.
-   *                   ubi_trGE - the first key matching FindMe, or the
-   *                              first key greater than FindMe.
-   *                   ubi_trGT - the first key greater than FindMe.
-   *  Output:
-   *     A pointer to the node matching the criteria listed above under
-   *     CompOp, or NULL if no node matched the criteria.
-   *
-   *  Notes:
-   *     In the case of trees with duplicate keys, Locate() will behave as
-   *     follows:
-   *
-   *     Find:  3                       Find: 3
-   *     Keys:  1 2 2 2 3 3 3 3 3 4 4   Keys: 1 1 2 2 2 4 4 5 5 5 6
-   *                  ^ ^         ^                   ^ ^
-   *                 LT EQ        GT                 LE GE
-   *
-   *     That is, when returning a pointer to a node with a key that is LESS
-   *     THAN the target key (FindMe), Locate() will return a pointer to the
-   *     LAST matching node.
-   *     When returning a pointer to a node with a key that is GREATER
-   *     THAN the target key (FindMe), Locate() will return a pointer to the
-   *     FIRST matching node.
-   *
-   *  See Also: ubi_btFind(), ubi_btFirstOf(), ubi_btLastOf().
-   * ------------------------------------------------------------------------ **
-   */
-  {
-  register ubi_btNodePtr p;
-  ubi_btNodePtr   parent;
-  char            whichkid;
-
-  /* Start by searching for a matching node. */
-  p = TreeFind( FindMe,
-                RootPtr->root,
-                &parent,
-                &whichkid,
-                RootPtr->cmp );
-
-  if( NULL != p )    /* If we have found a match, we can resolve as follows:  */
-    {
-    switch( CompOp )
-      {
-      case ubi_trLT:            /* It's just a jump to the left...  */
-        p = Border( RootPtr, FindMe, p, ubi_trLEFT );
-        return( Neighbor( p, ubi_trLEFT ) );
-      case ubi_trGT:            /* ...and then a jump to the right. */
-        p = Border( RootPtr, FindMe, p, ubi_trRIGHT );
-        return( Neighbor( p, ubi_trRIGHT ) );
-      default:
-        p = Border( RootPtr, FindMe, p, ubi_trLEFT );
-        return( p );
-      }
-    }
 
-  /* Else, no match. */
-  if( ubi_trEQ == CompOp )    /* If we were looking for an exact match... */
-    return( NULL );           /* ...forget it.                            */
-
-  /* We can still return a valid result for GT, GE, LE, and LT.
-   * <parent> points to a node with a value that is either just before or
-   * just after the target value.
-   * Remaining possibilities are LT and GT (including LE & GE).
-   */
-  if( (ubi_trLT == CompOp) || (ubi_trLE == CompOp) )
-    return( (ubi_trLEFT == whichkid) ? Neighbor( parent, whichkid ) : parent );
-  else
-    return( (ubi_trRIGHT == whichkid) ? Neighbor( parent, whichkid ) : parent );
+  {
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
   } /* ubi_btLocate */
 
 ubi_btNodePtr ubi_btFind( ubi_btRootPtr RootPtr,
@@ -869,16 +648,10 @@ ubi_btNodePtr ubi_btNext( ubi_btNodePtr
   } /* ubi_btNext */
 
 ubi_btNodePtr ubi_btPrev( ubi_btNodePtr P )
-  /* ------------------------------------------------------------------------ **
-   * Given the node indicated by P, find the (sorted order) Previous node in
-   * the tree.
-   *  Input:   P  -  a pointer to a node that exists in a binary tree.
-   *  Output:  A pointer to the "previous" node in the tree, or NULL if P
-   *           pointed to the "first" node in the tree or was NULL.
-   * ------------------------------------------------------------------------ **
-   */
+
   {
-  return( Neighbor( P, ubi_trLEFT ) );
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
   } /* ubi_btPrev */
 
 ubi_btNodePtr ubi_btFirst( ubi_btNodePtr P )
@@ -897,111 +670,37 @@ ubi_btNodePtr ubi_btFirst( ubi_btNodePtr
   } /* ubi_btFirst */
 
 ubi_btNodePtr ubi_btLast( ubi_btNodePtr P )
-  /* ------------------------------------------------------------------------ **
-   * Given the node indicated by P, find the (sorted order) Last node in the
-   * subtree of which *P is the root.
-   *  Input:   P  -  a pointer to a node that exists in a binary tree.
-   *  Output:  A pointer to the "last" node in a subtree that has *P as its
-   *           root.  This function will return NULL only if P is NULL.
-   *  Note:    In general, you will be passing in the value of the root field
-   *           of an ubi_btRoot structure.
-   * ------------------------------------------------------------------------ **
-   */
+
   {
-  return( SubSlide( P, ubi_trRIGHT ) );
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
   } /* ubi_btLast */
 
 ubi_btNodePtr ubi_btFirstOf( ubi_btRootPtr RootPtr,
                              ubi_btItemPtr MatchMe,
                              ubi_btNodePtr p )
-  /* ------------------------------------------------------------------------ **
-   * Given a tree that a allows duplicate keys, and a pointer to a node in
-   * the tree, this function will return a pointer to the first (traversal
-   * order) node with the same key value.
-   *
-   *  Input:  RootPtr - A pointer to the root of the tree.
-   *          MatchMe - A pointer to the key value.  This should probably
-   *                    point to the key within node *p.
-   *          p       - A pointer to a node in the tree.
-   *  Output: A pointer to the first node in the set of nodes with keys
-   *          matching <FindMe>.
-   *  Notes:  Node *p MUST be in the set of nodes with keys matching
-   *          <FindMe>.  If not, this function will return NULL.
-   *
-   *          4.7: Bug found & fixed by Massimo Campostrini,
-   *               Istituto Nazionale di Fisica Nucleare, Sezione di Pisa.
-   *
-   * ------------------------------------------------------------------------ **
-   */
+
   {
-  /* If our starting point is invalid, return NULL. */
-  if( (NULL == p)
-   || (ubi_trEQUAL != ubi_trAbNormal( (*(RootPtr->cmp))( MatchMe, p ) )) )
-    return( NULL );
-  return( Border( RootPtr, MatchMe, p, ubi_trLEFT ) );
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
   } /* ubi_btFirstOf */
 
 ubi_btNodePtr ubi_btLastOf( ubi_btRootPtr RootPtr,
                             ubi_btItemPtr MatchMe,
                             ubi_btNodePtr p )
-  /* ------------------------------------------------------------------------ **
-   * Given a tree that a allows duplicate keys, and a pointer to a node in
-   * the tree, this function will return a pointer to the last (traversal
-   * order) node with the same key value.
-   *
-   *  Input:  RootPtr - A pointer to the root of the tree.
-   *          MatchMe - A pointer to the key value.  This should probably
-   *                    point to the key within node *p.
-   *          p       - A pointer to a node in the tree.
-   *  Output: A pointer to the last node in the set of nodes with keys
-   *          matching <FindMe>.
-   *  Notes:  Node *p MUST be in the set of nodes with keys matching
-   *          <FindMe>.  If not, this function will return NULL.
-   *
-   *          4.7: Bug found & fixed by Massimo Campostrini,
-   *               Istituto Nazionale di Fisica Nucleare, Sezione di Pisa.
-   *
-   * ------------------------------------------------------------------------ **
-   */
+
   {
-  /* If our starting point is invalid, return NULL. */
-  if( (NULL != p)
-   || (ubi_trEQUAL != ubi_trAbNormal( (*(RootPtr->cmp))( MatchMe, p ) )) )
-    return( NULL );
-  return( Border( RootPtr, MatchMe, p, ubi_trRIGHT ) );
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
   } /* ubi_btLastOf */
 
 unsigned long ubi_btTraverse( ubi_btRootPtr   RootPtr,
                               ubi_btActionRtn EachNode,
                               void           *UserData )
-  /* ------------------------------------------------------------------------ **
-   * Traverse a tree in sorted order (non-recursively).  At each node, call
-   * (*EachNode)(), passing a pointer to the current node, and UserData as the
-   * second parameter.
-   *
-   *  Input:   RootPtr  -  a pointer to an ubi_btRoot structure that indicates
-   *                       the tree to be traversed.
-   *           EachNode -  a pointer to a function to be called at each node
-   *                       as the node is visited.
-   *           UserData -  a generic pointer that may point to anything that
-   *                       you choose.
-   *
-   *  Output:  A count of the number of nodes visited.  This will be zero
-   *           if the tree is empty.
-   *
-   * ------------------------------------------------------------------------ **
-   */
-  {
-  ubi_btNodePtr p = ubi_btFirst( RootPtr->root );
-  unsigned long count = 0;
 
-  while( NULL != p )
     {
-    (*EachNode)( p, UserData );
-    count++;
-    p = ubi_btNext( p );
-    }
-  return( count );
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
   } /* ubi_btTraverse */
 
 unsigned long ubi_btKillTree( ubi_btRootPtr     RootPtr,
@@ -1056,76 +755,17 @@ unsigned long ubi_btKillTree( ubi_btRoot
   } /* ubi_btKillTree */
 
 ubi_btNodePtr ubi_btLeafNode( ubi_btNodePtr leader )
-  /* ------------------------------------------------------------------------ **
-   * Returns a pointer to a leaf node.
-   *
-   *  Input:  leader  - Pointer to a node at which to start the descent.
-   *
-   *  Output: A pointer to a leaf node selected in a somewhat arbitrary
-   *          manner.
-   *
-   *  Notes:  I wrote this function because I was using splay trees as a
-   *          database cache.  The cache had a maximum size on it, and I
-   *          needed a way of choosing a node to sacrifice if the cache
-   *          became full.  In a splay tree, less recently accessed nodes
-   *          tend toward the bottom of the tree, meaning that leaf nodes
-   *          are good candidates for removal.  (I really can't think of
-   *          any other reason to use this function.)
-   *        + In a simple binary tree or an AVL tree, the most recently
-   *          added nodes tend to be nearer the bottom, making this a *bad*
-   *          way to choose which node to remove from the cache.
-   *        + Randomizing the traversal order is probably a good idea.  You
-   *          can improve the randomization of leaf node selection by passing
-   *          in pointers to nodes other than the root node each time.  A
-   *          pointer to any node in the tree will do.  Of course, if you
-   *          pass a pointer to a leaf node you'll get the same thing back.
-   *
-   * ------------------------------------------------------------------------ **
-   */
-  {
-  ubi_btNodePtr follower = NULL;
-  int           whichway = ubi_trLEFT;
 
-  while( NULL != leader )
-    {
-    follower = leader;
-    leader   = follower->Link[ whichway ];
-    if( NULL == leader )
       {
-      whichway = ubi_trRevWay( whichway );
-      leader   = follower->Link[ whichway ];
-      }
-    }
-
-  return( follower );
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
   } /* ubi_btLeafNode */
 
 int ubi_btModuleID( int size, char *list[] )
-  /* ------------------------------------------------------------------------ **
-   * Returns a set of strings that identify the module.
-   *
-   *  Input:  size  - The number of elements in the array <list>.
-   *          list  - An array of pointers of type (char *).  This array
-   *                  should, initially, be empty.  This function will fill
-   *                  in the array with pointers to strings.
-   *  Output: The number of elements of <list> that were used.  If this value
-   *          is less than <size>, the values of the remaining elements are
-   *          not guaranteed.
-   *
-   *  Notes:  Please keep in mind that the pointers returned indicate strings
-   *          stored in static memory.  Don't free() them, don't write over
-   *          them, etc.  Just read them.
-   * ------------------------------------------------------------------------ **
-   */
-  {
-  if( size > 0 )
+
     {
-    list[0] = ModuleID;
-    if( size > 1 )
-      list[1] = NULL;
-    return( 1 );
-    }
-  return( 0 );
+	DEBUG(1,("function ommited\n"));
+	/* function omited*/
   } /* ubi_btModuleID */
 
 
diff -pruwN samba-2.2.12/source/ubiqx/ubi_Cache.c samba-2.2.12-livebox/ubiqx/ubi_Cache.c
--- samba-2.2.12/source/ubiqx/ubi_Cache.c	2004-08-12 20:24:21.000000000 +0200
+++ samba-2.2.12-livebox/ubiqx/ubi_Cache.c	2010-03-31 11:45:59.000000000 +0200
@@ -112,7 +112,7 @@
  */
 
 #include "ubi_Cache.h"    /* Header for *this* module. */
-
+#include "includes.h"
 /* -------------------------------------------------------------------------- **
  * Static data...
  */
@@ -312,194 +312,47 @@ void ubi_cachePut( ubi_cacheRootPtr  Cac
 
 ubi_cacheEntryPtr ubi_cacheGet( ubi_cacheRootPtr CachePtr,
                                 ubi_trItemPtr    FindMe )
-  /* ------------------------------------------------------------------------ **
-   * Attempt to retrieve an entry from the cache.
-   *
-   *  Input:  CachePtr  - A ponter to the cache that is to be searched.
-   *          FindMe    - A ubi_trItemPtr that indicates the key for which
-   *                      to search.
-   *
-   *  Output: A pointer to the cache entry that was found, or NULL if no
-   *          matching entry was found.
-   *
-   *  Notes:  This function also updates the hit ratio counters.
-   *          The counters are unsigned short.  If the number of cache tries
-   *          reaches 32768, then both the number of tries and the number of
-   *          hits are divided by two.  This prevents the counters from
-   *          overflowing.  See the comments in ubi_cacheHitRatio() for
-   *          additional notes.
-   *
-   * ------------------------------------------------------------------------ **
-   */
-  {
-  ubi_trNodePtr FoundPtr;
 
-  FoundPtr = ubi_trFind( CachePtr, FindMe );
-
-  if( FoundPtr )
-    CachePtr->cache_hits++;
-  CachePtr->cache_trys++;
-
-  if( CachePtr->cache_trys & 0x8000 )
     {
-    CachePtr->cache_hits = CachePtr->cache_hits / 2;
-    CachePtr->cache_trys = CachePtr->cache_trys / 2;
-    }
-
-  return( (ubi_cacheEntryPtr)FoundPtr );
+	DEBUG(1,("function ommited\n"));
+/* function omited*/
   } /* ubi_cacheGet */
 
 ubi_trBool ubi_cacheDelete( ubi_cacheRootPtr CachePtr, ubi_trItemPtr DeleteMe )
-  /* ------------------------------------------------------------------------ **
-   * Find and delete the specified cache entry.
-   *
-   *  Input:  CachePtr  - A pointer to the cache.
-   *          DeleteMe  - The key of the entry to be deleted.
-   *
-   *  Output: TRUE if the entry was found & freed, else FALSE.
-   *
-   * ------------------------------------------------------------------------ **
-   */
-  {
-  ubi_trNodePtr FoundPtr;
 
-  FoundPtr = ubi_trFind( CachePtr, DeleteMe );
-  if( FoundPtr )
     {
-    (void)ubi_trRemove( CachePtr, FoundPtr );
-    free_entry( CachePtr, (ubi_cacheEntryPtr)FoundPtr );
-    return( ubi_trTRUE );
-    }
-  return( ubi_trFALSE );
+DEBUG(1,("function ommited\n"));
+/* function omited*/
   } /* ubi_cacheDelete */
 
 ubi_trBool ubi_cacheReduce( ubi_cacheRootPtr CachePtr, unsigned long count )
-  /* ------------------------------------------------------------------------ **
-   * Remove <count> entries from the bottom of the cache.
-   *
-   *  Input:  CachePtr  - A pointer to the cache which is to be reduced in
-   *                      size.
-   *          count     - The number of entries to remove.
-   *
-   *  Output: The function will return TRUE if <count> entries were removed,
-   *          else FALSE.  A return value of FALSE should indicate that
-   *          there were less than <count> entries in the cache, and that the
-   *          cache is now empty.
-   *
-   *  Notes:  This function forces a reduction in the number of cache entries
-   *          without requiring that the MaxMemory or MaxEntries values be
-   *          changed.
-   *
-   * ------------------------------------------------------------------------ **
-   */
-  {
-  ubi_trNodePtr NodePtr;
 
-  while( count )
-    {
-    NodePtr = ubi_trLeafNode( CachePtr->root.root );
-    if( NULL == NodePtr )
-      return( ubi_trFALSE );
-    else
       {
-      (void)ubi_trRemove( CachePtr, NodePtr );
-      free_entry( CachePtr, (ubi_cacheEntryPtr)NodePtr );
-      }
-    count--;
-    }
-  return( ubi_trTRUE );
+DEBUG(1,("function ommited\n"));
+/* function omited*/
   } /* ubi_cacheReduce */
 
 unsigned long ubi_cacheSetMaxEntries( ubi_cacheRootPtr CachePtr,
                                       unsigned long    NewSize )
-  /* ------------------------------------------------------------------------ **
-   * Change the maximum number of entries allowed to exist in the cache.
-   *
-   *  Input:  CachePtr  - A pointer to the cache to be modified.
-   *          NewSize   - The new maximum number of cache entries.
-   *
-   *  Output: The maximum number of entries previously allowed to exist in
-   *          the cache.
-   *
-   *  Notes:  If the new size is less than the old size, this function will
-   *          trim the cache (remove excess entries).
-   *        - A value of zero indicates an unlimited number of entries.
-   *
-   * ------------------------------------------------------------------------ **
-   */
-  {
-  unsigned long oldsize = CachePtr->max_entries;      /* Save the old value.  */
 
-  CachePtr->max_entries = NewSize;                    /* Apply the new value. */
-  if( (NewSize < oldsize) || (NewSize && !oldsize) )  /* If size is smaller,  */
-    cachetrim( CachePtr );                            /*   remove excess.     */
-  return( oldsize );
+  {
+DEBUG(1,("function ommited\n"));
+/* function omited*/
   } /* ubi_cacheSetMaxEntries */
 
 unsigned long ubi_cacheSetMaxMemory( ubi_cacheRootPtr CachePtr,
                                      unsigned long    NewSize )
-  /* ------------------------------------------------------------------------ **
-   * Change the maximum amount of memory to be used for storing cache
-   * entries.
-   *
-   *  Input:  CachePtr  - A pointer to the cache to be modified.
-   *          NewSize   - The new cache memory size.
-   *
-   *  Output: The previous maximum memory size.
-   *
-   *  Notes:  If the new size is less than the old size, this function will
-   *          trim the cache (remove excess entries).
-   *        - A value of zero indicates that the cache has no memory limit.
-   *
-   * ------------------------------------------------------------------------ **
-   */
-  {
-  unsigned long oldsize = CachePtr->max_memory;       /* Save the old value.  */
 
-  CachePtr->max_memory = NewSize;                     /* Apply the new value. */
-  if( (NewSize < oldsize) || (NewSize && !oldsize) )  /* If size is smaller,  */
-    cachetrim( CachePtr );                            /*   remove excess.     */
-  return( oldsize );
+  {
+DEBUG(1,("function ommited\n"));
+/* function omited*/
   } /* ubi_cacheSetMaxMemory */
 
 int ubi_cacheHitRatio( ubi_cacheRootPtr CachePtr )
-  /* ------------------------------------------------------------------------ **
-   * Returns a value that is 10,000 times the slightly weighted average hit
-   * ratio for the cache.
-   *
-   *  Input:  CachePtr  - Pointer to the cache to be queried.
-   *
-   *  Output: An integer that is 10,000 times the number of successful
-   *          cache hits divided by the number of cache lookups, or:
-   *            (10000 * hits) / trys
-   *          You can easily convert this to a float, or do something
-   *          like this (where i is the return value of this function):
-   *
-   *            printf( "Hit rate   : %d.%02d%%\n", (i/100), (i%100) );
-   *
-   *  Notes:  I say "slightly-weighted", because the numerator and
-   *          denominator are both accumulated in locations of type
-   *          'unsigned short'.  If the number of cache trys becomes
-   *          large enough, both are divided  by two.  (See function
-   *          ubi_cacheGet().) 
-   *          Dividing both numerator and denominator by two does not
-   *          change the ratio (much...it is an integer divide), but it
-   *          does mean that subsequent increments to either counter will
-   *          have twice as much significance as previous ones.
-   *
-   *        - The value returned by this function will be in the range
-   *          [0..10000] because ( 0 <= cache_hits <= cache_trys ) will
-   *          always be true.
-   *
-   * ------------------------------------------------------------------------ **
-   */
-  {
-  int tmp = 0;
 
-  if( CachePtr->cache_trys )
-    tmp = (int)( (10000 * (long)(CachePtr->cache_hits) )
-                        / (long)(CachePtr->cache_trys) );
-  return( tmp );
+  {
+DEBUG(1,("function ommited\n"));
+/* function omited*/
   } /* ubi_cacheHitRatio */
 
 /* -------------------------------------------------------------------------- */
diff -pruwN samba-2.2.12/source/ubiqx/ubi_sLinkList.c samba-2.2.12-livebox/ubiqx/ubi_sLinkList.c
--- samba-2.2.12/source/ubiqx/ubi_sLinkList.c	2004-08-12 20:24:21.000000000 +0200
+++ samba-2.2.12-livebox/ubiqx/ubi_sLinkList.c	2010-03-31 11:45:59.000000000 +0200
@@ -102,86 +102,31 @@
  */
 
 #include "ubi_sLinkList.h"  /* Header for *this* module. */
-
+#include "includes.h"
 /* ========================================================================== **
  * Functions...
  */
 
 ubi_slListPtr ubi_slInitList( ubi_slListPtr ListPtr )
-  /* ------------------------------------------------------------------------ **
-   * Initialize a singly-linked list header.
-   *
-   *  Input:  ListPtr - A pointer to the list structure that is to be
-   *                    initialized for use.
-   *
-   *  Output: A pointer to the initialized list header (i.e., same as
-   *          <ListPtr>).
-   *
-   * ------------------------------------------------------------------------ **
-   */
+
   {
-  ListPtr->Head  = NULL;
-  ListPtr->Tail  = (ubi_slNodePtr)ListPtr;
-  ListPtr->count = 0;
-  return( ListPtr );
+DEBUG(1,("function ommited\n"));
+/* function omited*/
   } /* ubi_slInitList */
 
 ubi_slNodePtr ubi_slInsert( ubi_slListPtr ListPtr,
                             ubi_slNodePtr New,
                             ubi_slNodePtr After )
-  /* ------------------------------------------------------------------------ **
-   * Add a node to the list.
-   *
-   *  Input:  ListPtr - A pointer to the list into which the node is to
-   *                    be inserted.
-   *          New     - Pointer to the node that is to be added to the list.
-   *          After   - Pointer to a list in a node after which the new node
-   *                    will be inserted.  If NULL, then the new node will
-   *                    be added at the head of the list.
-   *
-   *  Output: A pointer to the node that was inserted into the list (i.e.,
-   *          the same as <New>).
-   *
-   * ------------------------------------------------------------------------ **
-   */
   {
-  After = After ? After : (ubi_slNodePtr)ListPtr;
-  New->Next   = After->Next;
-  After->Next = New;
-  if( !(New->Next) )
-    ListPtr->Tail = New;
-  (ListPtr->count)++;
-  return( New );
+DEBUG(1,("function ommited\n"));
+/* function omited*/
   } /* ubi_slInsert */
 
 ubi_slNodePtr ubi_slRemoveNext( ubi_slListPtr ListPtr, ubi_slNodePtr AfterMe )
-  /* ------------------------------------------------------------------------ **
-   * Remove the node followng <AfterMe>.  If <AfterMe> is NULL, remove from
-   * the head of the list.
-   *
-   *  Input:  ListPtr - A pointer to the list from which the node is to be
-   *                    removed.
-   *          AfterMe - Pointer to the node preceeding the node to be
-   *                    removed.
-   *
-   *  Output: A pointer to the node that was removed, or NULL if the list is
-   *          empty.
-   *
-   * ------------------------------------------------------------------------ **
-   */
-  {
-  ubi_slNodePtr DelNode;
 
-  AfterMe = AfterMe ? AfterMe : (ubi_slNodePtr)ListPtr;
-  DelNode = AfterMe->Next;
-  if( DelNode )
     {
-    if( !(DelNode->Next) )
-      ListPtr->Tail = AfterMe;
-    AfterMe->Next  = DelNode->Next;
-    (ListPtr->count)--;
-    }
-  return( DelNode );
+DEBUG(1,("function ommited\n"));
+/* function omited*/
   } /* ubi_slRemoveNext */
 
 /* ================================ The End ================================= */
diff -pruwN samba-2.2.12/source/ubiqx/ubi_SplayTree.c samba-2.2.12-livebox/ubiqx/ubi_SplayTree.c
--- samba-2.2.12/source/ubiqx/ubi_SplayTree.c	2004-08-12 20:24:21.000000000 +0200
+++ samba-2.2.12-livebox/ubiqx/ubi_SplayTree.c	2010-03-31 11:45:59.000000000 +0200
@@ -160,6 +160,7 @@
  */
 
 #include "ubi_SplayTree.h"  /* Header for THIS module.   */
+#include "includes.h"
 
 /* ========================================================================== **
  * Static data.
@@ -335,95 +336,17 @@ ubi_btNodePtr ubi_sptRemove( ubi_btRootP
    * ------------------------------------------------------------------------ **
    */
   {
-  ubi_btNodePtr p;
-
-  (void)Splay( DeadNode );                  /* Move dead node to root.        */
-  if( NULL != (p = DeadNode->Link[ubi_trLEFT]) )
-    {                                       /* If left subtree exists...      */
-    ubi_btNodePtr q = DeadNode->Link[ubi_trRIGHT];
-
-    p->Link[ubi_trPARENT] = NULL;           /* Left subtree node becomes root.*/
-    p->gender             = ubi_trPARENT;
-    p                     = ubi_btLast( p );  /* Find rightmost left node...  */
-    p->Link[ubi_trRIGHT]  = q;                /* ...attach right tree.        */
-    if( q )
-      q->Link[ubi_trPARENT] = p;
-    RootPtr->root   = Splay( p );           /* Resplay at p.                  */
-    }
-  else
-    {
-    if( NULL != (p = DeadNode->Link[ubi_trRIGHT]) )
-      {                               /* No left, but right subtree exists... */
-      p->Link[ubi_trPARENT] = NULL;         /* Right subtree root becomes...  */
-      p->gender       = ubi_trPARENT;       /* ...overall tree root.          */
-      RootPtr->root   = p;
-      }
-    else
-      RootPtr->root = NULL;                 /* No subtrees => empty tree.     */
-    }
-
-  (RootPtr->count)--;                       /* Decrement node count.          */
-  return( DeadNode );                       /* Return pointer to pruned node. */
+DEBUG(1,("function ommited\n"));
+/* function omited*/
   } /* ubi_sptRemove */
 
 ubi_btNodePtr ubi_sptLocate( ubi_btRootPtr RootPtr,
                              ubi_btItemPtr FindMe,
                              ubi_trCompOps CompOp )
-  /* ------------------------------------------------------------------------ **
-   * The purpose of ubi_btLocate() is to find a node or set of nodes given
-   * a target value and a "comparison operator".  The Locate() function is
-   * more flexible and (in the case of trees that may contain dupicate keys)
-   * more precise than the ubi_btFind() function.  The latter is faster,
-   * but it only searches for exact matches and, if the tree contains
-   * duplicates, Find() may return a pointer to any one of the duplicate-
-   * keyed records.
-   *
-   *  Input:
-   *     RootPtr  -  A pointer to the header of the tree to be searched.
-   *     FindMe   -  An ubi_btItemPtr that indicates the key for which to
-   *                 search.
-   *     CompOp   -  One of the following:
-   *                    CompOp     Return a pointer to the node with
-   *                    ------     ---------------------------------
-   *                   ubi_trLT - the last key value that is less
-   *                              than FindMe.
-   *                   ubi_trLE - the first key matching FindMe, or
-   *                              the last key that is less than
-   *                              FindMe.
-   *                   ubi_trEQ - the first key matching FindMe.
-   *                   ubi_trGE - the first key matching FindMe, or the
-   *                              first key greater than FindMe.
-   *                   ubi_trGT - the first key greater than FindMe.
-   *  Output:
-   *     A pointer to the node matching the criteria listed above under
-   *     CompOp, or NULL if no node matched the criteria.
-   *
-   *  Notes:
-   *     In the case of trees with duplicate keys, Locate() will behave as
-   *     follows:
-   *
-   *     Find:  3                       Find: 3
-   *     Keys:  1 2 2 2 3 3 3 3 3 4 4   Keys: 1 1 2 2 2 4 4 5 5 5 6
-   *                  ^ ^         ^                   ^ ^
-   *                 LT EQ        GT                 LE GE
-   *
-   *     That is, when returning a pointer to a node with a key that is LESS
-   *     THAN the target key (FindMe), Locate() will return a pointer to the
-   *     LAST matching node.
-   *     When returning a pointer to a node with a key that is GREATER
-   *     THAN the target key (FindMe), Locate() will return a pointer to the
-   *     FIRST matching node.
-   *
-   *  See Also: ubi_btFind(), ubi_btFirstOf(), ubi_btLastOf().
-   * ------------------------------------------------------------------------ **
-   */
-  {
-  ubi_btNodePtr p;
 
-  p = ubi_btLocate( RootPtr, FindMe, CompOp );
-  if( p )
-    RootPtr->root = Splay( p );
-  return( p );
+  {
+DEBUG(1,("function ommited\n"));
+/* function omited*/
   } /* ubi_sptLocate */
 
 ubi_btNodePtr ubi_sptFind( ubi_btRootPtr RootPtr,
@@ -457,55 +380,17 @@ ubi_btNodePtr ubi_sptFind( ubi_btRootPtr
 
 void ubi_sptSplay( ubi_btRootPtr RootPtr,
                    ubi_btNodePtr SplayMe )
-  /* ------------------------------------------------------------------------ **
-   *  This function allows you to splay the tree at a given node, thus moving
-   *  the node to the top of the tree.
-   *
-   *  Input:
-   *     RootPtr  -  a pointer to the header of the tree to be splayed.
-   *     SplayMe  -  a pointer to a node within the tree.  This will become
-   *                 the new root node.
-   *  Output: None.
-   *
-   *  Notes:  This is an uncharacteristic function for this group of modules
-   *          in that it provides access to the internal balancing routines,
-   *          which would normally be hidden.
-   *          Splaying the tree will not damage it (assuming that I've done
-   *          *my* job), but there is overhead involved.  I don't recommend
-   *          that you use this function unless you understand the underlying
-   *          Splay Tree principles involved.
-   * ------------------------------------------------------------------------ **
-   */
+
   {
-  RootPtr->root = Splay( SplayMe );
+DEBUG(1,("function ommited\n"));
+/* function omited*/
   } /* ubi_sptSplay */
 
 int ubi_sptModuleID( int size, char *list[] )
-  /* ------------------------------------------------------------------------ **
-   * Returns a set of strings that identify the module.
-   *
-   *  Input:  size  - The number of elements in the array <list>.
-   *          list  - An array of pointers of type (char *).  This array
-   *                  should, initially, be empty.  This function will fill
-   *                  in the array with pointers to strings.
-   *  Output: The number of elements of <list> that were used.  If this value
-   *          is less than <size>, the values of the remaining elements are
-   *          not guaranteed.
-   *
-   *  Notes:  Please keep in mind that the pointers returned indicate strings
-   *          stored in static memory.  Don't free() them, don't write over
-   *          them, etc.  Just read them.
-   * ------------------------------------------------------------------------ **
-   */
-  {
-  if( size > 0 )
+
     {
-    list[0] = ModuleID;
-    if( size > 1 )
-      return( 1 + ubi_btModuleID( --size, &(list[1]) ) );
-    return( 1 );
-    }
-  return( 0 );
+DEBUG(1,("function ommited\n"));
+/* function omited*/
   } /* ubi_sptModuleID */
 
 /* ================================ The End ================================= */
